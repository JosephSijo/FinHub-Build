import{j as e,y as Fe,R as ge,ay as Ae,az as Te,aA as Be,r as Y,aB as Pe,C as Le,W as oe,as as pe,aC as xe,at as $e,K as ue,Y as le,aD as fe,a6 as Ee,$ as Ne}from"./ui-DwNC2Rqb.js";import{I as y}from"./InteractiveFinancialValue-k5N6qor8.js";import{m as K,f as ne,a as C,i as ve}from"./index-DKCn1eko.js";import{H as Oe}from"./haptics-C9gh8PRt.js";import{R as me,a as Ye,P as ze,b as _e,c as qe,d as Re,e as He,f as Ve,C as Ge,T as be,A as We,X as we,Y as Ue,g as Ke,B as Je,h as ye}from"./charts-CInRTlJo.js";import{A as Xe}from"./index-CeDZTw5p.js";import"./vendor-7PqXWhc5.js";import"./motion-BKne_-B1.js";const Ze=({message:o,loading:i})=>e.jsxs("div",{className:"col-span-full card-elite p-8 border-l-4 border-indigo-500 bg-slate-900 mb-8 relative group overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-500 blur-[80px] opacity-10 -mr-16 -mt-16 group-hover:opacity-20 transition-opacity"}),e.jsxs("div",{className:"flex items-center gap-6 relative z-10",children:[e.jsx("div",{className:"w-14 h-14 bg-indigo-500/10 rounded-2xl flex items-center justify-center border border-indigo-500/20 min-w-[56px] shadow-inner group-hover:scale-105 transition-transform duration-500",children:e.jsx(Fe,{className:"text-indigo-400 w-6 h-6"})}),e.jsx("div",{id:"truth-banner-content",className:"text-sm tracking-tight text-slate-300 font-bold italic leading-relaxed",children:i?e.jsx("span",{className:"animate-pulse text-indigo-400",children:"Initializing Intelligence Nodes..."}):o||"Intelligence Node Active. Analyzing Cash Flow Velocity and Expenditure Entropy..."})]})]}),Qe=({liabilities:o})=>{const[i,a]=ge.useState("avalanche"),d=[...o].sort((m,N)=>i==="avalanche"?(N.interestRate||0)-(m.interestRate||0):(m.outstanding||0)-(N.outstanding||0))[0],r=d?Math.round(d.outstanding*(d.interestRate/100)*2.5):32400;return o.length===0?null:e.jsxs("div",{className:"segmented-stack",children:[e.jsxs("div",{className:"stack-cap flex justify-between items-center border-t-2 border-blue-600/50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-600/10 flex items-center justify-center border border-blue-500/20",children:e.jsx(Ae,{className:"text-blue-500 w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white text-xs font-black uppercase tracking-[0.4em]",children:"Your Payoff Path"}),e.jsxs("p",{className:"text-[9px] text-slate-500 uppercase font-bold tracking-widest mt-1",children:["Node: ",i==="avalanche"?"High Interest (Avalanche)":"Smallest Balance (Snowball)"]})]})]}),e.jsx("div",{className:"bg-blue-600/20 text-blue-400 text-[8px] font-black px-4 py-2 rounded-full border border-blue-500/20 uppercase tracking-widest",children:"Active Strategy"})]}),e.jsx("div",{className:"stack-body py-10",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("p",{className:"text-sm text-slate-300 leading-relaxed font-light italic",children:['"Prioritizing your ',e.jsx("span",{className:"text-blue-400 font-bold",children:d?.name})," ",i==="avalanche"?"rate":"balance"," node first will reclaim approximately ",e.jsxs("span",{className:"text-emerald-400 font-bold",children:["â‚¹",r.toLocaleString()]}),' in future money supply."']}),d&&e.jsxs("div",{className:"p-6 bg-slate-800 rounded-2xl border border-blue-500/20 relative overflow-hidden",children:[e.jsx("span",{className:"text-[8px] font-black text-slate-500 uppercase block mb-3 tracking-widest",children:"Target Node"}),e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xl font-bold block text-white",children:d.name}),e.jsxs("span",{className:"text-[10px] text-red-400 font-black uppercase mt-1",children:[d.interestRate,"% APR â€¢ ",i==="avalanche"?"Burn Heavy":"Low Friction"]})]}),e.jsx("button",{className:"bg-blue-600 text-white text-[10px] font-black px-6 py-3 rounded-xl shadow-xl shadow-blue-900/40 uppercase tracking-widest hover:bg-blue-500 transition-colors",children:"PAY OFF"})]})]})]}),e.jsxs("div",{className:"space-y-6 flex flex-col justify-center",children:[e.jsxs("div",{className:`flex items-center gap-5 group cursor-pointer p-4 rounded-xl transition-all ${i==="snowball"?"bg-slate-800 border border-blue-500/30":"hover:bg-slate-800"}`,onClick:()=>a(i==="avalanche"?"snowball":"avalanche"),children:[e.jsx("div",{className:`w-10 h-10 rounded-full border flex items-center justify-center transition-colors ${i==="snowball"?"border-blue-500":"border-white/10 group-hover:border-blue-500"}`,children:e.jsx(Te,{className:`w-4 h-4 transition-colors ${i==="snowball"?"text-blue-500":"text-slate-600 group-hover:text-blue-500"}`})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-bold text-slate-200 block",children:i==="avalanche"?"Switch to Snowball Node":"Switch to Avalanche Node"}),e.jsx("span",{className:"text-[9px] text-slate-600 uppercase font-black tracking-tighter",children:i==="avalanche"?"Prioritize small balances for morale gains":"Prioritize high rates to minimize interest burn"})]})]}),e.jsxs("div",{className:"flex items-center gap-5 group cursor-pointer p-4 hover:bg-slate-800 rounded-xl transition-all opacity-50",children:[e.jsx("div",{className:"w-10 h-10 rounded-full border border-white/10 flex items-center justify-center",children:e.jsx(Be,{className:"w-4 h-4 text-slate-600"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-bold text-slate-200 block",children:"Simulation Sub-Routine"}),e.jsx("span",{className:"text-[9px] text-slate-600 uppercase font-black tracking-tighter",children:"Automated Debt Payoff Projections (Coming Soon)"})]})]})]})]})})]})},ke=["#FF3B3B","#3B82F6","#A855F7","#F59E0B"],et=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],re=(o,i,a=!1,p=!0)=>{if(!p)return 50;let d;return a?d=Math.max(0,100-o/i*100):d=Math.min(100,o/i*100),Math.round(d)},tt=({currency:o,expenses:i,incomes:a,accounts:p,savingsRate:d,dtiRatio:r,outflowRatio:m})=>{const{healthData:N,overallHealth:x,spendingData:v,peakCategory:B,peakPercentage:b,flowData:k,trendData:w,scoreDebt:P,totalSpent:Q,totalIncome:D,scoreLeakage:z}=Y.useMemo(()=>{const f=new Date,j=f.getMonth(),F=f.getFullYear(),q=i.filter(s=>{const c=new Date(s.date);return c.getMonth()===j&&c.getFullYear()===F&&!s.isInternalTransfer}),ee=p.filter(s=>s.type==="bank").map(s=>s.id),R=p.filter(s=>["bank","cash","credit_card"].includes(s.type)).map(s=>s.id),E=a.filter(s=>{const c=new Date(s.date);return c.getMonth()===j&&c.getFullYear()===F&&ee.includes(s.accountId)&&!s.isInternalTransfer}).reduce((s,c)=>s+c.amount,0)||1,g=q.filter(s=>R.includes(s.accountId)).reduce((s,c)=>s+c.amount,0),I=Array.from({length:6}).map((s,c)=>{const Z=new Date;Z.setMonth(Z.getMonth()-(5-c));const M=Z.getMonth(),T=Z.getFullYear(),t=a.filter(u=>{const S=new Date(u.date);return S.getMonth()===M&&S.getFullYear()===T&&!u.isInternalTransfer}).reduce((u,S)=>u+S.amount,0),l=i.filter(u=>{const S=new Date(u.date);return S.getMonth()===M&&S.getFullYear()===T&&!u.isInternalTransfer}).reduce((u,S)=>u+S.amount,0);return{month:et[M],Fuel:t,Burn:l}}),A=I.map(s=>({month:s.month,value:s.Burn})),ie=re(d,30,!1,a.length>0),te=re(r,.5,!0,p.some(s=>s.type==="credit_card")||r>0),se=Math.max(0,m-.7),ce=E>1||g>0?re(se,.3,!0,!0):50,J=ce,ae=p.filter(s=>s.type==="bank"||s.type==="cash").reduce((s,c)=>s+c.balance,0),de=ae>0?g/ae:0;let H=50;(ae>0||g>0)&&(H=re(de,1,!0,!0));const L=I.map(s=>s.Burn).filter(s=>s>0);let V=50;if(L.length>1){const s=L.reduce((T,t)=>T+t,0)/L.length,c=L.reduce((T,t)=>T+Math.pow(t-s,2),0)/L.length,M=Math.sqrt(c)/s;V=re(M,.5,!0,!0)}else L.length===1&&(V=75);const G=[{subject:"Savings",A:ie,fullMark:100},{subject:"Debt",A:te,fullMark:100},{subject:"Leakage",A:J,fullMark:100},{subject:"Buffer",A:H,fullMark:100},{subject:"Cash Flow Speed",A:V,fullMark:100}],$=Math.round((ie+te+J+H+V)/5),W=q.reduce((s,c)=>(s[c.category]=(s[c.category]||0)+c.amount,s),{}),U=Object.entries(W).map(([s,c])=>({name:s,value:c})).sort((s,c)=>c.value-s.value).slice(0,4),X=U[0]?.name||"None",he=g>0?Math.round(U[0]?.value/g*100):0;return{healthData:G,overallHealth:$,spendingData:U,peakCategory:X,peakPercentage:he,flowData:I,trendData:A,scoreDebt:te,totalSpent:g,totalIncome:E,scoreLeakage:ce}},[i,a,p,d,r,m]),_=({active:f,payload:j,label:F})=>{const[q,ee]=ge.useState(null);return ge.useEffect(()=>{f&&F!==q&&(Oe.light(),ee(F))},[f,F,q]),f&&j&&j.length?e.jsxs("div",{className:"bg-[#1C1C1E] border border-white/5 p-3 squircle-12 shadow-2xl backdrop-blur-xl",children:[e.jsx("p",{className:"text-[10px] text-slate-500 uppercase font-black mb-2 tracking-widest",children:F}),e.jsx("div",{className:"space-y-1.5",children:j.map((R,E)=>{let g="text-slate-200";const I=R.color?.toUpperCase();return I==="#FF3B3B"?g="text-[#FF453A]":I==="#3B82F6"?g="text-[#0A84FF]":I==="#A855F7"?g="text-[#BF5AF2]":I==="#F59E0B"?g="text-[#FF9F0A]":I==="#10B981"?g="text-[#30D158]":R.name==="Burn"&&(g="text-slate-400"),e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase",children:R.name}),e.jsx("span",{className:`text-xs font-black tabular-nums ${g}`,children:C(R.value,o)})]},E)})})]}):null};return e.jsxs("div",{className:"col-span-full mt-12 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-6 mb-10",children:[e.jsx("div",{className:"h-px bg-white/5 flex-1"}),e.jsx("span",{className:"text-[10px] font-black text-slate-700 uppercase tracking-[0.5em]",children:"Intelligence Center"}),e.jsx("div",{className:"h-px bg-white/5 flex-1"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"segmented-stack secondary-stealth",children:[e.jsxs("div",{className:"stack-cap flex justify-between items-start border-white/5",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-slate-500 text-[9px] font-bold uppercase tracking-[0.2em] mb-2",children:"Financial Health"}),e.jsxs("div",{className:"text-4xl font-black text-white",children:[x,e.jsx("span",{className:"text-sm text-slate-500 font-normal ml-2",children:"/100"})]})]}),e.jsx("div",{className:`text-[9px] font-black px-3 py-1.5 rounded-full border uppercase tracking-widest ${x>70?"bg-green-500/10 text-green-400 border-green-500/20":"bg-yellow-500/10 text-yellow-400 border-yellow-500/20"}`,children:x>70?"Stable":"Warning"})]}),e.jsx("div",{className:"stack-body px-0 pt-8 pb-4 h-[250px] w-full relative",children:e.jsx(me,{width:"100%",height:"100%",children:e.jsxs(Ye,{cx:"50%",cy:"50%",outerRadius:"70%",data:N,children:[e.jsx(ze,{stroke:"rgba(255,255,255,0.1)"}),e.jsx(_e,{dataKey:"subject",tick:{fill:"#64748B",fontSize:10,fontWeight:800}}),e.jsx(qe,{angle:30,domain:[0,100],tick:!1,axisLine:!1}),e.jsx(Re,{name:"Health",dataKey:"A",stroke:"#00FF85",strokeWidth:2,fill:"rgba(0, 255, 133, 0.15)",fillOpacity:.3})]})})})]}),e.jsxs("div",{className:"segmented-stack secondary-stealth",children:[e.jsxs("div",{className:"stack-cap flex justify-between items-center border-white/5",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-slate-500 text-[9px] font-bold uppercase tracking-[0.2em] mb-1",children:"Spending Power"}),e.jsx("div",{className:"text-2xl font-black text-white",children:B})]}),e.jsx(Pe,{className:"text-slate-700 w-4 h-4"})]}),e.jsxs("div",{className:"stack-body px-0 h-[240px] w-full relative",children:[e.jsx(me,{width:"100%",height:"100%",children:e.jsxs(He,{children:[e.jsx(Ve,{data:v,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",stroke:"none",children:v.map((f,j)=>e.jsx(Ge,{fill:ke[j%ke.length]},`cell-${j}`))}),e.jsx(be,{content:e.jsx(_,{})})]})}),e.jsxs("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-center pointer-events-none",children:[e.jsxs("span",{className:"text-[10px] text-slate-500 block font-bold",children:[b,"%"]}),e.jsx("span",{className:"text-[7px] font-black text-slate-600 uppercase tracking-widest block",children:"BURN"})]})]}),e.jsx("div",{className:"stack-footer py-4",children:e.jsxs("div",{className:"flex justify-between items-center px-2",children:[e.jsx("span",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest",children:"High Power Node identified"}),e.jsx("span",{className:"text-xs font-bold text-blue-400",children:B})]})})]}),e.jsxs("div",{className:"segmented-stack secondary-stealth",children:[e.jsx("div",{className:"stack-cap border-white/5",children:e.jsx("h3",{className:"text-slate-400 text-[9px] font-bold uppercase tracking-[0.2em]",children:"Spending Power Trend"})}),e.jsx("div",{className:"stack-body px-0 pb-0 h-[200px] w-full",children:e.jsx(me,{width:"100%",height:"100%",children:e.jsxs(We,{data:w,margin:{top:0,right:0,left:0,bottom:0},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorTrend",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#0A84FF",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#0A84FF",stopOpacity:0})]}),e.jsxs("filter",{id:"glow",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx(we,{dataKey:"month",hide:!0}),e.jsx(Ue,{hide:!0}),e.jsx(be,{content:e.jsx(_,{}),cursor:{stroke:"rgba(255,255,255,0.2)",strokeWidth:1}}),e.jsx(Ke,{type:"monotone",dataKey:"value",stroke:"#0A84FF",strokeWidth:3,fillOpacity:1,fill:"url(#colorTrend)",animationDuration:1500,filter:"url(#glow)"})]})})})]}),e.jsxs("div",{className:"segmented-stack secondary-stealth",children:[e.jsxs("div",{className:"stack-cap flex justify-between items-center border-white/5",children:[e.jsx("h3",{className:"text-slate-500 text-[9px] font-bold uppercase tracking-[0.2em]",children:"Flow Efficiency"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-[#30D158]"}),e.jsx("span",{className:"text-[8px] font-bold text-slate-500",children:"FUEL"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-[#1C1C1E] border border-white/10"}),e.jsx("span",{className:"text-[8px] font-bold text-slate-500",children:"BURN"})]})]})]}),e.jsx("div",{className:"stack-body px-0 pb-0 h-[200px] w-full",children:e.jsx(me,{width:"100%",height:"100%",children:e.jsxs(Je,{data:k,barGap:8,margin:{top:20,right:0,left:0,bottom:0},children:[e.jsx(we,{dataKey:"month",axisLine:!1,tickLine:!1,tick:{fontSize:9,fill:"#64748B",fontWeight:700}}),e.jsx(be,{cursor:{fill:"rgba(255,255,255,0.05)"},content:e.jsx(_,{})}),e.jsx(ye,{dataKey:"Fuel",fill:"#30D158",radius:[4,4,0,0],barSize:12}),e.jsx(ye,{dataKey:"Burn",fill:"#2C2C2E",radius:[4,4,0,0],barSize:12})]})})})]}),e.jsxs("div",{className:"segmented-stack col-span-full secondary-stealth",children:[e.jsxs("div",{className:"stack-cap flex justify-between items-start border-white/5",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-slate-500 text-[9px] font-bold uppercase tracking-[0.2em] mb-2",children:"The Risk Meter (DTI)"}),e.jsxs("div",{className:"text-4xl font-black text-white",children:[(r*100).toFixed(1),"%",e.jsx("span",{className:"text-sm text-slate-500 font-normal ml-2",children:"Debt-to-Income"})]})]}),e.jsx("div",{className:`text-[9px] font-black px-3 py-1.5 rounded-full border uppercase tracking-widest ${r<.2?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":r<.4?"bg-amber-500/10 text-amber-400 border-amber-500/20":"bg-rose-500/10 text-rose-400 border-rose-500/20"}`,children:r<.2?"Safe":r<.4?"Caution":"Danger"})]}),e.jsx("div",{className:"stack-body px-8 py-10",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"relative h-4 w-full bg-slate-900 rounded-full overflow-hidden border border-white/5",children:[e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"h-full flex-1 bg-emerald-500/20"}),e.jsx("div",{className:"h-full flex-1 bg-amber-500/20"}),e.jsx("div",{className:"h-full flex-1 bg-rose-500/20"})]}),e.jsx(K.div,{className:`absolute inset-y-0 left-0 ${r<.2?"bg-emerald-500 shadow-[0_0_15px_rgba(16,185,129,0.5)]":r<.4?"bg-amber-500 shadow-[0_0_15px_rgba(245,158,11,0.5)]":"bg-rose-500 shadow-[0_0_15px_rgba(239,68,68,0.5)]"}`,initial:{width:0},animate:{width:`${Math.min(100,r/.5*100)}%`},transition:{duration:1,ease:"easeOut"}})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-[8px] text-slate-500 uppercase font-black block mb-1",children:"Risk Score"}),e.jsxs("span",{className:`text-xl font-bold ${P>70?"text-emerald-400":P>30?"text-amber-400":"text-rose-400"}`,children:[Math.round(P),"/100"]})]}),e.jsxs("div",{className:"text-center border-x border-white/5",children:[e.jsx("span",{className:"text-[8px] text-slate-500 uppercase font-black block mb-1",children:"Threshold"}),e.jsx("span",{className:"text-xl font-bold text-slate-200",children:"50%"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-[8px] text-slate-500 uppercase font-black block mb-1",children:"Status"}),e.jsx("span",{className:`text-xl font-bold ${r<.36?"text-emerald-400":"text-rose-400"}`,children:r<.36?"Healthy":"Aggressive"})]})]})]})}),e.jsx("div",{className:"stack-footer",children:e.jsx("p",{className:"text-[10px] text-slate-500 text-center italic",children:"Protocol: A DTI below 36% is considered healthy for asset growth management."})})]}),e.jsxs("div",{className:"segmented-stack col-span-full secondary-stealth",children:[e.jsxs("div",{className:"stack-cap flex justify-between items-start border-white/5",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-slate-500 text-[9px] font-bold uppercase tracking-[0.2em] mb-2",children:"Leakage Tracker"}),e.jsxs("div",{className:"text-4xl font-black text-white",children:[(m*100).toFixed(1),"%",e.jsx("span",{className:"text-sm text-slate-500 font-normal ml-2",children:"Total Outflow"})]})]}),e.jsx("div",{className:`text-[9px] font-black px-3 py-1.5 rounded-full border uppercase tracking-widest ${m<=.7?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":m<.9?"bg-amber-500/10 text-amber-400 border-amber-500/20":"bg-rose-500/10 text-rose-400 border-rose-500/20"}`,children:m<=.7?"Tight":m<.9?"Loose":"Leakage"})]}),e.jsx("div",{className:"stack-body py-10",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-center",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-slate-900 border border-white/5 rounded-xl",children:[e.jsx("span",{className:"text-[8px] text-slate-500 uppercase font-black block mb-1",children:"Monthly Inflow"}),e.jsx("span",{className:"text-sm font-bold text-emerald-400",children:ne(D,o)})]}),e.jsxs("div",{className:"p-4 bg-slate-900 border border-white/5 rounded-xl",children:[e.jsx("span",{className:"text-[8px] text-slate-500 uppercase font-black block mb-1",children:"Total Outflow"}),e.jsx("span",{className:"text-sm font-bold text-rose-400",children:ne(Q,o)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-[8px] text-slate-500 uppercase font-black",children:[e.jsx("span",{children:"Efficiency Status"}),e.jsxs("span",{className:z>70?"text-emerald-400":"text-amber-400",children:[z.toFixed(0),"/100"]})]}),e.jsx("div",{className:"h-1.5 w-full bg-slate-900 rounded-full overflow-hidden border border-white/5",children:e.jsx(K.div,{className:`h-full ${z>70?"bg-emerald-500":z>30?"bg-amber-500":"bg-rose-500"}`,initial:{width:0},animate:{width:`${z}%`},transition:{duration:1.5}})})]})]}),e.jsxs("div",{className:"p-6 bg-blue-500/5 border border-blue-500/10 rounded-xl",children:[e.jsx("h4",{className:"text-[10px] font-black text-blue-400 uppercase tracking-widest mb-3",children:"Protocol Interpretation"}),e.jsx("p",{className:"text-xs text-slate-300 leading-relaxed mb-4",children:m<=.7?"Perfect circulation. Your liquid accumulation (30%+) is optimal for future high-power asset allocation.":m>=1?"Critical Leakage. System is in absolute burn state. No liquid accumulation is occurring. Immediate consolidation needed.":"Standard Circulation. System is functional, but efficiency can be increased by reducing non-essential burn categories."}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-1 w-1 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-[8px] text-slate-500 uppercase font-bold tracking-widest",children:"Efficiency Benchmark: 70.0%"})]})]})]})})]})]})]})},O=({title:o,subtitle:i,icon:a,value:p,valueColor:d="text-white",isOpen:r,onToggle:m,children:N,className:x=""})=>e.jsxs("div",{className:`py-4 ${x}`,children:[e.jsxs(K.div,{whileTap:{scale:.98},onClick:m,className:"flex items-center justify-between cursor-pointer group/collapsible",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-xl flex items-center justify-center transition-colors ${r?"bg-blue-500/20 text-blue-400":"bg-white/5 text-slate-500"}`,children:a}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-black uppercase tracking-widest text-slate-400 group-hover/collapsible:text-slate-200",children:o}),i&&e.jsx("span",{className:"text-[9px] text-slate-600 uppercase font-bold tracking-widest",children:i})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[p&&e.jsx("span",{className:`text-sm font-bold tabular-nums ${d}`,children:p}),e.jsx(K.div,{animate:{rotate:r?180:0},transition:{duration:.3,ease:[.19,1,.22,1]},children:e.jsx(Le,{className:"w-4 h-4 text-slate-600"})})]})]}),e.jsx(Xe,{children:r&&e.jsx(K.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:[.19,1,.22,1]},className:"overflow-hidden",children:e.jsx("div",{className:"pt-6",children:N})})})]}),st=({accounts:o,goals:i,liabilities:a,expenses:p,emergencyFundAmount:d=0})=>{const r=Y.useMemo(()=>o.filter(b=>b.type==="bank"||b.type==="cash").reduce((b,k)=>b+k.balance,0),[o]),m=Y.useMemo(()=>o.filter(b=>b.type==="credit_card").reduce((b,k)=>b+Math.abs(k.balance),0),[o]),N=Y.useMemo(()=>{const b=a.reduce((w,P)=>w+(P.emiAmount||0),0),k=p.filter(w=>w.isRecurring).reduce((w,P)=>w+P.amount,0);return b+k},[a,p]),x=Y.useMemo(()=>i.reduce((k,w)=>k+w.currentAmount,0)+(d||0),[i,d]),v=Y.useMemo(()=>x+N,[x,N]),B=Y.useMemo(()=>{const b=r-v;return Math.max(0,b)},[r,v]);return{totalBankBalance:r,totalCreditUsage:m,totalCommitments:N,shadowWalletTotal:x,totalReserved:v,availableToSpend:B}},mt=({expenses:o,incomes:i=[],currency:a,goals:p=[],emergencyFundAmount:d=0,liabilities:r=[],debts:m=[],investments:N=[],accounts:x=[]})=>{const v=o.map(t=>({...t,isInternalTransfer:t.isInternalTransfer||ve(t)})),B=i.map(t=>({...t,isInternalTransfer:t.isInternalTransfer||ve(t)}));v.forEach(t=>{if(t.isInternalTransfer)return;const l=B.find(u=>!u.isInternalTransfer&&u.amount===t.amount&&u.date.split("T")[0]===t.date.split("T")[0]&&u.accountId!==t.accountId);l&&(t.isInternalTransfer=!0,l.isInternalTransfer=!0)});const{shadowWalletTotal:b,totalReserved:k,availableToSpend:w,totalCreditUsage:P,totalCommitments:Q}=st({accounts:x,goals:p,liabilities:r,expenses:v,emergencyFundAmount:d}),[D,z]=Y.useState(null),_=new Date,f=_.getMonth(),j=_.getFullYear(),F=new Date(j,f-1,1),q=F.getMonth(),ee=F.getFullYear(),E=new Date(j,f+1,0).getDate()-_.getDate()+1,g=v.filter(t=>{const l=new Date(t.date);return l.getMonth()===f&&l.getFullYear()===j&&!t.isInternalTransfer}),I=v.filter(t=>{const l=new Date(t.date);return l.getMonth()===q&&l.getFullYear()===ee&&!t.isInternalTransfer}),A=t=>{z(D===t?null:t)},ie=p.length,te=r.reduce((t,l)=>t+(l.outstanding||l.principal||0),0),se=m.filter(t=>t.type==="borrowed"&&t.status==="pending"),ce=se.reduce((t,l)=>t+l.amount,0),J=m.filter(t=>t.type==="lent"&&t.status==="pending"),ae=J.reduce((t,l)=>t+l.amount,0),de=N.filter(t=>{if(t.accountId&&t.accountId!=="none"){const l=x.find(u=>u.id===t.accountId);if(l&&l.type!=="investment")return!1}return!0}),H=de.reduce((t,l)=>t+l.buyPrice*l.quantity,0),L=de.reduce((t,l)=>t+(l.currentPrice||l.buyPrice)*l.quantity,0),V=H>0?((L-H)/H*100).toFixed(1):"0.0",G=x.filter(t=>t.type==="bank"||t.type==="cash").reduce((t,l)=>t+l.balance,0),$=B.filter(t=>!t.isInternalTransfer).reduce((t,l)=>t+l.amount,0)||42500,W=g.reduce((t,l)=>t+l.amount,0),U=I.reduce((t,l)=>t+l.amount,0),X=U>0?Math.round((W-U)/U*100):0,he=g.filter(t=>t.category==="Subscription").reduce((t,l)=>t+l.amount,0),s=G>0?W/G:0,c=(s*100).toFixed(1)+"%",M=(t=>t>1?{status:"Aggressive",color:"text-rose-400",bg:"bg-rose-500/10",border:"border-rose-500/20",advice:"High-velocity detected. Spending is outpacing liquid nodes. Priority: Solidify safety buffer.",suggestion:"Consolidate spending and pause growth node transfers for 30 days."}:t<.3?{status:"Stagnant",color:"text-amber-400",bg:"bg-amber-500/10",border:"border-amber-500/20",advice:"Low-velocity detected. Capital is sitting idle in liquid nodes and losing theoretical power.",suggestion:"Highly recommended: Shift "+C(Math.floor(G*.2),a)+" to Money Growth."}:{status:"Optimal",color:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/20",advice:"Optimal circulation. Capital flow is balanced between spending and holding.",suggestion:"Protocol: Continue current flow. System is in high-efficiency state."})(s),T=E>0?Math.floor(w/E):0;return e.jsxs("div",{className:"main-grid",children:[e.jsx(Ze,{message:`Assessment: â‚¹${C(k,a,!0)} reserved. Safe daily spending limit is â‚¹${C(T,a,!0)} for the next ${E} days.`}),e.jsxs(K.div,{layout:!0,initial:!1,className:"segmented-stack mesh-gradient-card group transition-all duration-500 col-span-full",children:[e.jsxs("div",{className:"stack-cap relative z-10 border-none bg-transparent",children:[e.jsx("div",{className:"mesh-blob mesh-blob-1"}),e.jsx("div",{className:"mesh-blob mesh-blob-2"}),e.jsx("div",{className:"mesh-blob mesh-blob-3"}),e.jsx(oe,{className:"hero-ghost-icon"}),e.jsxs("div",{className:"flex justify-between items-start relative z-20",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("h3",{className:"text-label text-[9px]",children:"Balance Board"}),e.jsx("div",{className:"px-2 py-0.5 rounded-full text-[8px] font-black uppercase tracking-widest border border-blue-500/20 bg-blue-500/10 text-[#0A84FF]",children:"Total Liquidity"})]}),e.jsx(K.div,{layoutId:"balance-mount",className:"hero-text text-5xl md:text-6xl lg:text-7xl tabular-nums text-white",children:e.jsx(y,{value:G,currency:a})})]}),e.jsx("div",{className:"w-14 h-14 bg-white/5 flex items-center justify-center border border-white/10 backdrop-blur-xl group-hover:scale-110 transition-transform duration-500 rounded-2xl",children:e.jsx(oe,{className:"text-blue-400 w-6 h-6"})})]})]}),e.jsx("div",{className:"stack-body relative z-10",children:e.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-label text-[10px] mb-1.5 opacity-60",children:"Daily Spend"}),e.jsx("div",{className:"text-balance text-xl text-white tabular-nums",children:e.jsx(y,{value:T,currency:a})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-label text-[10px] mb-1.5 opacity-60",children:"Budget Left"}),e.jsx("div",{className:"text-balance text-xl text-[#30D158] tabular-nums",children:e.jsx(y,{value:w,currency:a})})]})]})}),e.jsxs("div",{className:"stack-footer relative z-10 bg-transparent border-t border-white/5 py-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-label text-[10px] mb-1.5 opacity-60",children:"Daily Spend"}),e.jsx("p",{className:"text-balance text-xl text-white tabular-nums",children:C(T,a)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-label text-[10px] mb-1.5 opacity-60",children:"Budget Left"}),e.jsx("p",{className:"text-balance text-xl text-[#30D158] tabular-nums",children:C(w,a)})]})]}),e.jsx(O,{title:"Liquidity Nodes",subtitle:"Institutional Reservoirs",icon:e.jsx(pe,{className:"w-4 h-4"}),value:C(G,a),isOpen:D==="liquidity-group",onToggle:()=>A("liquidity-group"),children:e.jsx("div",{className:"space-y-3",children:x.filter(t=>t.type==="bank"||t.type==="cash").map(t=>e.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-900/50 rounded-xl border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[t.type==="bank"?e.jsx(pe,{className:"w-4 h-4 text-blue-400"}):e.jsx(oe,{className:"w-4 h-4 text-emerald-400"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-200 uppercase truncate",children:t.name}),e.jsx("p",{className:"text-[9px] text-slate-600 uppercase font-black tracking-widest",children:t.type==="bank"?"Institutional Reservoir":"Physical Cash Node"})]})]}),e.jsx("span",{className:"text-sm font-bold text-white tabular-nums",children:C(t.balance,a)})]},t.id))})}),e.jsx(O,{title:"Debt & Liability",subtitle:"Capital Sourced",icon:e.jsx(xe,{className:"w-4 h-4"}),value:e.jsx(y,{value:te+ce+P,currency:a}),valueColor:"text-rose-400",isOpen:D==="debt-group",onToggle:()=>A("debt-group"),children:e.jsx("div",{className:"space-y-3",children:[...r,...se,...x.filter(t=>t.type==="credit_card"&&t.balance<0)].length===0?e.jsxs("div",{className:"p-6 bg-slate-800/20 border border-dashed border-white/5 squircle-12 text-center",children:[e.jsx(xe,{className:"w-8 h-8 mx-auto text-slate-700 mb-2"}),e.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-widest",children:"No active liabilities found"}),e.jsx("p",{className:"text-[10px] text-slate-600 mt-1 whitespace-nowrap",children:"Your financial circulation is debt-free"})]}):e.jsxs(e.Fragment,{children:[r.map(t=>e.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-900/50 rounded-2xl border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(pe,{className:"w-4 h-4 text-slate-500"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-200 uppercase truncate",children:t.name}),e.jsx("p",{className:"text-[9px] text-slate-600 uppercase font-black tracking-widest",children:"Loan Reservoir"})]})]}),e.jsx("span",{className:"text-sm font-bold text-rose-400 tabular-nums",children:e.jsx(y,{value:t.outstanding||t.principal,currency:a})})]},t.id)),x.filter(t=>t.type==="credit_card"&&t.balance<0).map(t=>e.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-900/50 rounded-2xl border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($e,{className:"w-4 h-4 text-slate-500"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-200 uppercase truncate",children:t.name}),e.jsx("p",{className:"text-[9px] text-slate-600 uppercase font-black tracking-widest",children:"Card Usage"})]})]}),e.jsx("span",{className:"text-sm font-bold text-rose-400 tabular-nums",children:e.jsx(y,{value:Math.abs(t.balance),currency:a})})]},t.id)),se.map(t=>e.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-900/50 rounded-2xl border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ue,{className:"w-4 h-4 text-slate-500"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-200 uppercase truncate",children:t.personName}),e.jsx("p",{className:"text-[9px] text-slate-600 uppercase font-black tracking-widest",children:"Personal IOU"})]})]}),e.jsx("span",{className:"text-sm font-bold text-rose-400 tabular-nums",children:e.jsx(y,{value:t.amount,currency:a})})]},t.id))]})})}),e.jsx(O,{title:"Lent & Receivables",subtitle:"Capital Displaced",icon:e.jsx(le,{className:"w-4 h-4"}),value:e.jsx(y,{value:ae,currency:a}),valueColor:"text-emerald-400",isOpen:D==="receivable-group",onToggle:()=>A("receivable-group"),children:e.jsx("div",{className:"space-y-3",children:J.length===0?e.jsxs("div",{className:"p-6 bg-slate-800/20 border border-dashed border-white/5 squircle-12 text-center",children:[e.jsx(le,{className:"w-8 h-8 mx-auto text-slate-700 mb-2"}),e.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-widest",children:"No active receivables"}),e.jsx("p",{className:"text-[10px] text-slate-600 mt-1 whitespace-nowrap",children:"You haven't lent money recently"})]}):J.map(t=>e.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-900/50 rounded-xl border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ue,{className:"w-4 h-4 text-slate-500"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-200 uppercase truncate",children:t.personName}),e.jsx("p",{className:"text-[9px] text-slate-600 uppercase font-black tracking-widest",children:"Receivable Asset"})]})]}),e.jsx("span",{className:"text-sm font-bold text-emerald-400 tabular-nums",children:e.jsx(y,{value:t.amount,currency:a})})]},t.id))})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 col-span-full",children:[e.jsxs("div",{className:"grid-widget mesh-gradient-card group relative",children:[e.jsx("div",{className:"mesh-blob mesh-blob-1 opacity-10"}),e.jsx("div",{className:"mesh-blob mesh-blob-3 opacity-10"}),e.jsx(fe,{className:"hero-ghost-icon"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/10 flex items-center justify-center border border-blue-500/20 rounded-xl",children:e.jsx(fe,{className:"text-blue-400 w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-label text-[10px]",children:"Circulation"}),e.jsx("p",{className:"text-[9px] text-slate-500 uppercase font-black tracking-widest",children:"Efficiency"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{title:"Cash Flow Speed",subtitle:M.status,icon:e.jsx(xe,{className:"w-4 h-4"}),value:c,valueColor:M.color,isOpen:D==="flow-speed",onToggle:()=>A("flow-speed"),children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-slate-800 p-5 rounded-xl border border-white/5",children:[e.jsx("span",{className:"text-[8px] text-slate-500 uppercase block mb-1",children:"Gross Income (Est)"}),e.jsxs("div",{className:"text-emerald-400 font-bold tabular-nums",children:["~",e.jsx(y,{value:$,currency:a})]})]}),e.jsxs("div",{className:"bg-slate-800 p-5 rounded-xl border border-white/5",children:[e.jsx("span",{className:"text-[8px] text-slate-500 uppercase block mb-1",children:"Gross Burn"}),e.jsx("div",{className:"text-red-400 font-bold tabular-nums",children:e.jsx(y,{value:W,currency:a})})]}),e.jsxs("div",{className:"col-span-2 space-y-4",children:[e.jsx("div",{className:`p-5 rounded-xl border ${M.bg} ${M.border}`,children:e.jsx("p",{className:"text-xs text-slate-300 leading-relaxed",children:M.advice})}),e.jsx("div",{className:"p-5 rounded-xl bg-blue-500/5 border border-blue-500/10",children:e.jsx("p",{className:"text-xs text-white font-medium leading-relaxed",children:M.suggestion})})]})]})}),e.jsx(O,{title:"Monthly Spending",subtitle:`${X>=0?"Increase":"Decrease"} Node`,icon:e.jsx(Ee,{className:"w-4 h-4"}),value:`${X>0?"+":""}${X}%`,valueColor:X>0?"text-rose-400":"text-emerald-400",isOpen:D==="spending-flow",onToggle:()=>A("spending-flow"),children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-slate-800 rounded-xl border border-white/5",children:[e.jsx("span",{className:"text-[8px] text-slate-500 uppercase block mb-1",children:"Daily Spend Avg"}),e.jsx("span",{className:"text-sm font-bold tabular-nums",children:C(Math.floor(W/30),a)})]}),e.jsxs("div",{className:"p-4 bg-slate-800 rounded-xl border border-white/5",children:[e.jsx("span",{className:"text-[8px] text-slate-500 uppercase block mb-1",children:"Subscriptions"}),e.jsx("span",{className:"text-sm font-bold tabular-nums",children:C(he,a)})]})]})})]})]})]}),e.jsxs("div",{className:"grid-widget mesh-gradient-card group relative",children:[e.jsx("div",{className:"mesh-blob mesh-blob-2 opacity-10"}),e.jsx("div",{className:"mesh-blob mesh-blob-3 opacity-10"}),e.jsx(Ne,{className:"hero-ghost-icon"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-500/10 flex items-center justify-center border border-purple-500/20 rounded-xl",children:e.jsx(Ne,{className:"text-purple-400 w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-label text-[10px]",children:"Reserves"}),e.jsx("p",{className:"text-[9px] text-slate-500 uppercase font-black tracking-widest",children:"Allocations"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{title:"Money Set Aside",subtitle:`${ie+(d>0?1:0)+(Q>0?1:0)} Buckets Active`,icon:e.jsx(oe,{className:"w-4 h-4"}),value:ne(k,a),valueColor:"text-blue-400",isOpen:D==="reserve-vault",onToggle:()=>A("reserve-vault"),children:e.jsxs("div",{className:"space-y-4",children:[d>0&&e.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-800 rounded-xl border border-white/5",children:[e.jsx("span",{className:"text-xs text-slate-300 block",children:"Emergency Fund"}),e.jsx("div",{className:"font-bold text-emerald-400 tabular-nums",children:e.jsx(y,{value:d,currency:a})})]}),Q>0&&e.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-800 rounded-xl border border-white/5",children:[e.jsx("span",{className:"text-xs text-slate-300 block",children:"Upcoming Bills/EMI"}),e.jsx("div",{className:"font-bold text-red-400 tabular-nums",children:e.jsx(y,{value:Q,currency:a})})]})]})}),e.jsx(O,{title:"Active Goals",subtitle:"Targets Initialized",icon:e.jsx(ue,{className:"w-4 h-4"}),value:ne(b,a),valueColor:"text-emerald-400",isOpen:D==="goals-vault",onToggle:()=>A("goals-vault"),children:e.jsx("div",{className:"space-y-3",children:p.map(t=>e.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-800 rounded-xl border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xl",children:t.emoji||"ðŸŽ¯"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-slate-300 block",children:t.name}),e.jsx("span",{className:"text-[9px] text-slate-500 uppercase font-black tracking-widest",children:t.type||"Future Node"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"font-bold text-white tabular-nums block",children:C(t.currentAmount,a)}),e.jsxs("span",{className:"text-[8px] text-slate-500 uppercase tracking-tighter",children:["of ",C(t.targetAmount,a)]})]})]},t.id))})})]})]})]}),e.jsxs("div",{className:"grid-widget mesh-gradient-card group relative",children:[e.jsx("div",{className:"mesh-blob mesh-blob-1 opacity-10"}),e.jsx("div",{className:"mesh-blob mesh-blob-2 opacity-10"}),e.jsx(le,{className:"hero-ghost-icon"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-emerald-500/10 flex items-center justify-center border border-emerald-500/20 rounded-xl",children:e.jsx(le,{className:"text-emerald-400 w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-label text-[10px]",children:"Growth"}),e.jsx("p",{className:"text-[9px] text-slate-500 uppercase font-black tracking-widest",children:"Valuation"})]})]}),e.jsx(O,{title:"Money Growth",subtitle:`${parseFloat(V)>=0?"+":""}${V}% Velocity`,icon:e.jsx(le,{className:"w-4 h-4"}),value:ne(L,a),valueColor:"text-emerald-400",isOpen:D==="invest-growth",onToggle:()=>A("invest-growth"),children:e.jsxs("div",{className:"p-6 bg-slate-800/20 border border-dashed border-white/5 rounded-xl text-center",children:[e.jsx(xe,{className:"w-8 h-8 mx-auto text-slate-700 mb-2"}),e.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-widest",children:"Portfolio Deep Dive"}),e.jsx("p",{className:"text-[10px] text-slate-600 mt-1",children:"Visit Investments tab for detailed node analysis"})]})})]})]}),r.length>0&&e.jsx(Qe,{liabilities:r})]}),(()=>{const t=r.reduce((n,h)=>n+(h.emiAmount||0),0),u=x.filter(n=>n.type==="credit_card").reduce((n,h)=>n+Math.abs(h.balance),0)*.05,S=t+u,Me=x.filter(n=>n.type==="bank").map(n=>n.id),Ce=x.filter(n=>["bank","cash","credit_card"].includes(n.type)).map(n=>n.id),je=B.filter(n=>{const h=new Date(n.date);return h.getMonth()===f&&h.getFullYear()===j&&Me.includes(n.accountId)&&!n.isInternalTransfer}).reduce((n,h)=>n+h.amount,0)||$,De=N.filter(n=>{const h=new Date(n.purchaseDate);return h.getMonth()===f&&h.getFullYear()===j}).reduce((n,h)=>n+h.buyPrice*h.quantity,0),Ie=v.filter(n=>{const h=new Date(n.date);return h.getMonth()===f&&h.getFullYear()===j&&Ce.includes(n.accountId)&&!n.isInternalTransfer}).reduce((n,h)=>n+h.amount,0)+De,Se=je>0?Ie/je:0;return e.jsx(tt,{currency:a,expenses:v,incomes:B,accounts:x,savingsRate:$>0?($-W)/$*100:0,dtiRatio:$>0?S/$:0,outflowRatio:Se})})(),e.jsx("div",{className:"h-24 w-full col-span-full"})]})};export{mt as Dashboard};
