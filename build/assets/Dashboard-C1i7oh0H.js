import{j as e,y as Ae,R as je,aJ as Se,aK as Fe,aL as Te,r as Y,aM as Be,C as Pe,W as ue,aD as be,aN as se,aE as Le,K as fe,Y as xe,aO as $e,af as Oe,$ as ze}from"./ui-qF4dh6YK.js";import{I as D}from"./InteractiveFinancialValue-B4I9em0c.js";import{M as A}from"./MeshBackground-xIWs8Cbc.js";import{C as Ee}from"./CyberButton-Ce0k8WVQ.js";import{m as X,f as ce,a as j,A as qe,i as Ne}from"./index-BB111pBJ.js";import{H as Ye}from"./haptics-C9gh8PRt.js";import{R as me,a as _e,P as Re,b as He,c as Ve,d as Ge,e as Ue,f as We,C as Ke,T as ge,A as Je,X as we,Y as Xe,g as Ze,B as Qe,h as ke}from"./charts-CgMDrE-9.js";import"./vendor-7PqXWhc5.js";import"./motion-DFLNShgk.js";const et=({message:o,loading:i})=>e.jsxs("div",{className:"col-span-full mesh-ghost-blue p-8 mb-8 relative group overflow-hidden sq-2xl",children:[e.jsx(A,{variant:"ghost"}),e.jsxs("div",{className:"flex items-center gap-6 relative z-10",children:[e.jsx("div",{className:"w-14 h-14 bg-indigo-500/10 rounded-2xl flex items-center justify-center border border-indigo-500/20 min-w-[56px] shadow-inner group-hover:scale-105 transition-transform duration-500",children:e.jsx(Ae,{className:"text-indigo-400 w-6 h-6"})}),e.jsx("div",{id:"truth-banner-content",className:"text-sm tracking-tight text-slate-300 font-bold italic leading-relaxed",children:i?e.jsx("span",{className:"animate-pulse text-indigo-400",children:"Initializing Intelligence Nodes..."}):o||"Intelligence Node Active. Analyzing Cash Flow Velocity and Expenditure Entropy..."})]})]}),tt=({liabilities:o})=>{const[i,a]=je.useState("avalanche"),d=[...o].sort((m,N)=>i==="avalanche"?(N.interestRate||0)-(m.interestRate||0):(m.outstanding||0)-(N.outstanding||0))[0],r=d?Math.round(d.outstanding*(d.interestRate/100)*2.5):32400;return o.length===0?null:e.jsxs("div",{className:"segmented-stack col-span-full",children:[e.jsxs("div",{className:"stack-cap flex justify-between items-center border-t-2 border-blue-600/50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-600/10 flex items-center justify-center border border-blue-500/20",children:e.jsx(Se,{className:"text-blue-500 w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white text-xs font-black uppercase tracking-[0.4em]",children:"Your Payoff Path"}),e.jsxs("p",{className:"text-[9px] text-slate-500 uppercase font-bold tracking-widest mt-1",children:["Node: ",i==="avalanche"?"High Interest (Avalanche)":"Smallest Balance (Snowball)"]})]})]}),e.jsx("div",{className:"bg-blue-600/20 text-blue-400 text-[8px] font-black px-4 py-2 rounded-full border border-blue-500/20 uppercase tracking-widest",children:"Active Strategy"})]}),e.jsx("div",{className:"stack-body py-10",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("p",{className:"text-sm text-slate-300 leading-relaxed font-light italic",children:['"Prioritizing your ',e.jsx("span",{className:"text-blue-400 font-bold",children:d?.name})," ",i==="avalanche"?"rate":"balance"," node first will reclaim approximately ",e.jsxs("span",{className:"text-emerald-400 font-bold",children:["â‚¹",r.toLocaleString()]}),' in future money supply."']}),d&&e.jsxs("div",{className:"p-6 bg-slate-800 rounded-2xl border border-blue-500/20 relative overflow-hidden",children:[e.jsx("span",{className:"text-[8px] font-black text-slate-500 uppercase block mb-3 tracking-widest",children:"Target Node"}),e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xl font-bold block text-white",children:d.name}),e.jsxs("span",{className:"text-[10px] text-red-400 font-black uppercase mt-1",children:[d.interestRate,"% APR â€¢ ",i==="avalanche"?"Burn Heavy":"Low Friction"]})]}),e.jsx(Ee,{variant:"blue",className:"w-full sm:w-auto h-12",children:"PAY OFF"})]})]})]}),e.jsxs("div",{className:"space-y-6 flex flex-col justify-center",children:[e.jsxs("div",{className:`flex items-center gap-5 group cursor-pointer p-4 rounded-xl transition-all ${i==="snowball"?"bg-slate-800 border border-blue-500/30":"hover:bg-slate-800"}`,onClick:()=>a(i==="avalanche"?"snowball":"avalanche"),children:[e.jsx("div",{className:`w-10 h-10 rounded-full border flex items-center justify-center transition-colors ${i==="snowball"?"border-blue-500":"border-white/10 group-hover:border-blue-500"}`,children:e.jsx(Fe,{className:`w-4 h-4 transition-colors ${i==="snowball"?"text-blue-500":"text-slate-600 group-hover:text-blue-500"}`})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-bold text-slate-200 block",children:i==="avalanche"?"Switch to Snowball Node":"Switch to Avalanche Node"}),e.jsx("span",{className:"text-[9px] text-slate-600 uppercase font-black tracking-tighter",children:i==="avalanche"?"Prioritize small balances for morale gains":"Prioritize high rates to minimize interest burn"})]})]}),e.jsxs("div",{className:"flex items-center gap-5 group cursor-pointer p-4 hover:bg-slate-800 rounded-xl transition-all opacity-50",children:[e.jsx("div",{className:"w-10 h-10 rounded-full border border-white/10 flex items-center justify-center",children:e.jsx(Te,{className:"w-4 h-4 text-slate-600"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-bold text-slate-200 block",children:"Simulation Sub-Routine"}),e.jsx("span",{className:"text-[9px] text-slate-600 uppercase font-black tracking-tighter",children:"Automated Debt Payoff Projections (Coming Soon)"})]})]})]})]})})]})},he=["#FF3B3B","#3B82F6","#A855F7","#F59E0B"],st=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ie=(o,i,a=!1,p=!0)=>{if(!p)return 50;let d;return a?d=Math.max(0,100-o/i*100):d=Math.min(100,o/i*100),Math.round(d)},at=({currency:o,expenses:i,incomes:a,accounts:p,savingsRate:d,dtiRatio:r,outflowRatio:m})=>{const{healthData:N,overallHealth:x,spendingData:w,peakCategory:P,peakPercentage:b,flowData:y,trendData:M,scoreDebt:k,totalSpent:ae,totalIncome:C,scoreLeakage:_}=Y.useMemo(()=>{const v=new Date,f=v.getMonth(),B=v.getFullYear(),H=i.filter(s=>{const c=new Date(s.date);return c.getMonth()===f&&c.getFullYear()===B&&!s.isInternalTransfer}),le=p.filter(s=>s.type==="bank").map(s=>s.id),V=p.filter(s=>["bank","cash","credit_card"].includes(s.type)).map(s=>s.id),E=a.filter(s=>{const c=new Date(s.date);return c.getMonth()===f&&c.getFullYear()===B&&le.includes(s.accountId)&&!s.isInternalTransfer}).reduce((s,c)=>s+c.amount,0)||1,g=H.filter(s=>V.includes(s.accountId)).reduce((s,c)=>s+c.amount,0),S=Array.from({length:6}).map((s,c)=>{const te=new Date;te.setMonth(te.getMonth()-(5-c));const I=te.getMonth(),O=te.getFullYear(),t=a.filter(u=>{const T=new Date(u.date);return T.getMonth()===I&&T.getFullYear()===O&&!u.isInternalTransfer}).reduce((u,T)=>u+T.amount,0),l=i.filter(u=>{const T=new Date(u.date);return T.getMonth()===I&&T.getFullYear()===O&&!u.isInternalTransfer}).reduce((u,T)=>u+T.amount,0);return{month:st[I],Fuel:t,Burn:l}}),F=S.map(s=>({month:s.month,value:s.Burn})),de=ie(d,30,!1,a.length>0),Z=ie(r,.5,!0,p.some(s=>s.type==="credit_card")||r>0),q=Math.max(0,m-.7),re=E>1||g>0?ie(q,.3,!0,!0):50,Q=re,ne=p.filter(s=>s.type==="bank"||s.type==="cash").reduce((s,c)=>s+c.balance,0),oe=ne>0?g/ne:0;let G=50;(ne>0||g>0)&&(G=ie(oe,1,!0,!0));const L=S.map(s=>s.Burn).filter(s=>s>0);let U=50;if(L.length>1){const s=L.reduce((O,t)=>O+t,0)/L.length,c=L.reduce((O,t)=>O+Math.pow(t-s,2),0)/L.length,I=Math.sqrt(c)/s;U=ie(I,.5,!0,!0)}else L.length===1&&(U=75);const W=[{subject:"Savings",A:de,fullMark:100},{subject:"Debt",A:Z,fullMark:100},{subject:"Leakage",A:Q,fullMark:100},{subject:"Buffer",A:G,fullMark:100},{subject:"Cash Flow Speed",A:U,fullMark:100}],$=Math.round((de+Z+Q+G+U)/5),K=H.reduce((s,c)=>(s[c.category]=(s[c.category]||0)+c.amount,s),{}),J=Object.entries(K).map(([s,c])=>({name:s,value:c})).sort((s,c)=>c.value-s.value).slice(0,4),ee=J[0]?.name||"None",pe=g>0?Math.round(J[0]?.value/g*100):0;return{healthData:W,overallHealth:$,spendingData:J,peakCategory:ee,peakPercentage:pe,flowData:S,trendData:F,scoreDebt:Z,totalSpent:g,totalIncome:E,scoreLeakage:re}},[i,a,p,d,r,m]),R=({active:v,payload:f,label:B})=>{const[H,le]=je.useState(null);return je.useEffect(()=>{v&&B!==H&&(Ye.light(),le(B))},[v,B,H]),v&&f&&f.length?e.jsxs("div",{className:"bg-[#1C1C1E] border border-white/5 p-3 squircle-12 shadow-2xl backdrop-blur-xl",children:[e.jsx("p",{className:"text-[10px] text-slate-500 uppercase font-black mb-2 tracking-widest",children:B}),e.jsx("div",{className:"space-y-1.5",children:f.map((V,E)=>{let g="text-slate-200";const S=V.color?.toUpperCase();return S==="#FF3B3B"?g="text-[#FF453A]":S==="#3B82F6"?g="text-[#0A84FF]":S==="#A855F7"?g="text-[#BF5AF2]":S==="#F59E0B"?g="text-[#FF9F0A]":S==="#10B981"?g="text-[#30D158]":V.name==="Burn"&&(g="text-slate-400"),e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase",children:V.name}),e.jsx("span",{className:`text-xs font-black tabular-nums ${g}`,children:j(V.value,o)})]},E)})})]}):null};return e.jsxs("div",{className:"col-span-full mt-12 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-6 mb-10",children:[e.jsx("div",{className:"h-px bg-white/5 flex-1"}),e.jsx("span",{className:"text-[10px] font-black text-slate-700 uppercase tracking-[0.5em]",children:"Intelligence Center"}),e.jsx("div",{className:"h-px bg-white/5 flex-1"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"segmented-stack mesh-ghost-blue relative",children:[e.jsx(A,{variant:"ghost"}),e.jsxs("div",{className:"stack-cap flex justify-between items-start border-white/5 relative z-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-slate-500 text-[9px] font-bold uppercase tracking-[0.2em] mb-2",children:"Financial Health"}),e.jsxs("div",{className:"text-4xl font-black text-white",children:[x,e.jsx("span",{className:"text-sm text-slate-500 font-normal ml-2",children:"/100"})]})]}),e.jsx("div",{className:`text-[9px] font-black px-3 py-1.5 rounded-full border uppercase tracking-widest ${x>70?"bg-green-500/10 text-green-400 border-green-500/20":"bg-yellow-500/10 text-yellow-400 border-yellow-500/20"}`,children:x>70?"Stable":"Warning"})]}),e.jsx("div",{className:"stack-body px-0 pt-8 pb-4 h-[250px] w-full relative",children:e.jsx(me,{width:"100%",height:"100%",children:e.jsxs(_e,{cx:"50%",cy:"50%",outerRadius:"70%",data:N,children:[e.jsx(Re,{stroke:"rgba(255,255,255,0.1)"}),e.jsx(He,{dataKey:"subject",tick:{fill:"#94A3B8",fontSize:11,fontWeight:900}}),e.jsx(Ve,{angle:30,domain:[0,100],tick:!1,axisLine:!1}),e.jsx(Ge,{name:"Health",dataKey:"A",stroke:"#00FF85",strokeWidth:2,fill:"rgba(0, 255, 133, 0.15)",fillOpacity:.3})]})})})]}),e.jsxs("div",{className:"segmented-stack mesh-ghost-blue relative",children:[e.jsx(A,{variant:"ghost"}),e.jsxs("div",{className:"stack-cap flex justify-between items-center border-white/5 relative z-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-slate-500 text-[9px] font-bold uppercase tracking-[0.2em] mb-1",children:"Spending Power"}),e.jsx("div",{className:"text-2xl font-black text-white",children:P})]}),e.jsx(Be,{className:"text-slate-700 w-4 h-4"})]}),e.jsxs("div",{className:"stack-body px-0 h-[240px] w-full relative",children:[e.jsx(me,{width:"100%",height:"100%",children:e.jsxs(Ue,{children:[e.jsx(We,{data:w,cx:"50%",cy:"50%",innerRadius:62,outerRadius:82,paddingAngle:3,cornerRadius:6,dataKey:"value",stroke:"none",children:w.map((v,f)=>e.jsx(Ke,{fill:he[f%he.length],style:{filter:`drop-shadow(0 0 6px ${he[f%he.length]}88)`},className:"transition-all duration-500 hover:opacity-80"},`cell-${f}`))}),e.jsx(ge,{content:e.jsx(R,{})})]})}),e.jsxs("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-center pointer-events-none",children:[e.jsxs("span",{className:"text-[10px] text-slate-500 block font-bold",children:[b,"%"]}),e.jsx("span",{className:"text-[7px] font-black text-slate-600 uppercase tracking-widest block",children:"BURN"})]})]}),e.jsx("div",{className:"stack-footer py-4",children:e.jsxs("div",{className:"flex justify-between items-center px-2",children:[e.jsx("span",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest",children:"High Power Node identified"}),e.jsx("span",{className:"text-xs font-bold text-blue-400",children:P})]})})]}),e.jsxs("div",{className:"segmented-stack mesh-ghost-blue relative",children:[e.jsx(A,{variant:"ghost"}),e.jsx("div",{className:"stack-cap border-white/5 relative z-10",children:e.jsx("h3",{className:"text-slate-400 text-[9px] font-bold uppercase tracking-[0.2em]",children:"Spending Power Trend"})}),e.jsx("div",{className:"stack-body px-0 pb-0 h-[200px] w-full",children:e.jsx(me,{width:"100%",height:"100%",children:e.jsxs(Je,{data:M,margin:{top:0,right:0,left:0,bottom:0},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorTrend",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#0A84FF",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#0A84FF",stopOpacity:0})]}),e.jsxs("filter",{id:"glow",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx(we,{dataKey:"month",hide:!0}),e.jsx(Xe,{hide:!0}),e.jsx(ge,{content:e.jsx(R,{}),cursor:{stroke:"rgba(255,255,255,0.2)",strokeWidth:1}}),e.jsx(Ze,{type:"monotone",dataKey:"value",stroke:"#0A84FF",strokeWidth:3,fillOpacity:1,fill:"url(#colorTrend)",animationDuration:1500,filter:"url(#glow)"})]})})})]}),e.jsxs("div",{className:"segmented-stack mesh-ghost-blue relative",children:[e.jsx(A,{variant:"ghost"}),e.jsxs("div",{className:"stack-cap flex justify-between items-center border-white/5 relative z-10",children:[e.jsx("h3",{className:"text-slate-500 text-[9px] font-bold uppercase tracking-[0.2em]",children:"Flow Efficiency"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-[#30D158]"}),e.jsx("span",{className:"text-[8px] font-bold text-slate-500",children:"FUEL"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-[#1C1C1E] border border-white/10"}),e.jsx("span",{className:"text-[8px] font-bold text-slate-500",children:"BURN"})]})]})]}),e.jsx("div",{className:"stack-body px-0 pb-0 h-[200px] w-full",children:e.jsx(me,{width:"100%",height:"100%",children:e.jsxs(Qe,{data:y,barGap:8,margin:{top:20,right:0,left:0,bottom:0},children:[e.jsx(we,{dataKey:"month",axisLine:!1,tickLine:!1,tick:{fontSize:9,fill:"#64748B",fontWeight:700}}),e.jsx(ge,{cursor:{fill:"rgba(255,255,255,0.05)"},content:e.jsx(R,{})}),e.jsx(ke,{dataKey:"Fuel",fill:"#30D158",radius:[4,4,0,0],barSize:12}),e.jsx(ke,{dataKey:"Burn",fill:"#2C2C2E",radius:[4,4,0,0],barSize:12})]})})})]}),e.jsxs("div",{className:"segmented-stack col-span-full mesh-ghost-blue relative",children:[e.jsx(A,{variant:"ghost"}),e.jsxs("div",{className:"stack-cap flex justify-between items-start border-white/5 relative z-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-slate-500 text-[9px] font-bold uppercase tracking-[0.2em] mb-2",children:"The Risk Meter (DTI)"}),e.jsxs("div",{className:"text-4xl font-black text-white",children:[(r*100).toFixed(1),"%",e.jsx("span",{className:"text-sm text-slate-500 font-normal ml-2",children:"Debt-to-Income"})]})]}),e.jsx("div",{className:`text-[9px] font-black px-3 py-1.5 rounded-full border uppercase tracking-widest ${r<.2?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":r<.4?"bg-amber-500/10 text-amber-400 border-amber-500/20":"bg-rose-500/10 text-rose-400 border-rose-500/20"}`,children:r<.2?"Safe":r<.4?"Caution":"Danger"})]}),e.jsx("div",{className:"stack-body px-8 py-10",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"relative h-4 w-full bg-slate-900 rounded-full overflow-hidden border border-white/5",children:[e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"h-full flex-1 bg-emerald-500/20"}),e.jsx("div",{className:"h-full flex-1 bg-amber-500/20"}),e.jsx("div",{className:"h-full flex-1 bg-rose-500/20"})]}),e.jsx(X.div,{className:`absolute inset-y-0 left-0 ${r<.2?"bg-emerald-500 shadow-[0_0_15px_rgba(16,185,129,0.5)]":r<.4?"bg-amber-500 shadow-[0_0_15px_rgba(245,158,11,0.5)]":"bg-rose-500 shadow-[0_0_15px_rgba(239,68,68,0.5)]"}`,initial:{width:0},animate:{width:`${Math.min(100,r/.5*100)}%`},transition:{duration:1,ease:"easeOut"}})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-[8px] text-slate-500 uppercase font-black block mb-1",children:"Risk Score"}),e.jsxs("span",{className:`text-xl font-bold ${k>70?"text-emerald-400":k>30?"text-amber-400":"text-rose-400"}`,children:[Math.round(k),"/100"]})]}),e.jsxs("div",{className:"text-center border-x border-white/5",children:[e.jsx("span",{className:"text-[8px] text-slate-500 uppercase font-black block mb-1",children:"Threshold"}),e.jsx("span",{className:"text-xl font-bold text-slate-200",children:"50%"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-[8px] text-slate-500 uppercase font-black block mb-1",children:"Status"}),e.jsx("span",{className:`text-xl font-bold ${r<.36?"text-emerald-400":"text-rose-400"}`,children:r<.36?"Healthy":"Aggressive"})]})]})]})}),e.jsx("div",{className:"stack-footer",children:e.jsx("p",{className:"text-[10px] text-slate-500 text-center italic",children:"Protocol: A DTI below 36% is considered healthy for asset growth management."})})]}),e.jsxs("div",{className:"segmented-stack col-span-full mesh-ghost-blue relative",children:[e.jsx(A,{variant:"ghost"}),e.jsxs("div",{className:"stack-cap flex justify-between items-start border-white/5 relative z-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-slate-500 text-[9px] font-bold uppercase tracking-[0.2em] mb-2",children:"Leakage Tracker"}),e.jsxs("div",{className:"text-4xl font-black text-white",children:[(m*100).toFixed(1),"%",e.jsx("span",{className:"text-sm text-slate-500 font-normal ml-2",children:"Total Outflow"})]})]}),e.jsx("div",{className:`text-[9px] font-black px-3 py-1.5 rounded-full border uppercase tracking-widest ${m<=.7?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":m<.9?"bg-amber-500/10 text-amber-400 border-amber-500/20":"bg-rose-500/10 text-rose-400 border-rose-500/20"}`,children:m<=.7?"Tight":m<.9?"Loose":"Leakage"})]}),e.jsx("div",{className:"stack-body py-10",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-center",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-slate-900 border border-white/5 rounded-xl",children:[e.jsx("span",{className:"text-[8px] text-slate-500 uppercase font-black block mb-1",children:"Monthly Inflow"}),e.jsx("span",{className:"text-sm font-bold text-emerald-400",children:ce(C,o)})]}),e.jsxs("div",{className:"p-4 bg-slate-900 border border-white/5 rounded-xl",children:[e.jsx("span",{className:"text-[8px] text-slate-500 uppercase font-black block mb-1",children:"Total Outflow"}),e.jsx("span",{className:"text-sm font-bold text-rose-400",children:ce(ae,o)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-[8px] text-slate-500 uppercase font-black",children:[e.jsx("span",{children:"Efficiency Status"}),e.jsxs("span",{className:_>70?"text-emerald-400":"text-amber-400",children:[_.toFixed(0),"/100"]})]}),e.jsx("div",{className:"h-1.5 w-full bg-slate-900 rounded-full overflow-hidden border border-white/5",children:e.jsx(X.div,{className:`h-full ${_>70?"bg-emerald-500":_>30?"bg-amber-500":"bg-rose-500"}`,initial:{width:0},animate:{width:`${_}%`},transition:{duration:1.5}})})]})]}),e.jsxs("div",{className:"p-6 bg-blue-500/5 border border-blue-500/10 rounded-xl",children:[e.jsx("h4",{className:"text-[10px] font-black text-blue-400 uppercase tracking-widest mb-3",children:"Protocol Interpretation"}),e.jsx("p",{className:"text-xs text-slate-300 leading-relaxed mb-4",children:m<=.7?"Perfect circulation. Your liquid accumulation (30%+) is optimal for future high-power asset allocation.":m>=1?"Critical Leakage. System is in absolute burn state. No liquid accumulation is occurring. Immediate consolidation needed.":"Standard Circulation. System is functional, but efficiency can be increased by reducing non-essential burn categories."}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-1 w-1 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-[8px] text-slate-500 uppercase font-bold tracking-widest",children:"Efficiency Benchmark: 70.0%"})]})]})]})})]})]})]})},z=({title:o,subtitle:i,icon:a,value:p,valueColor:d="text-white",isOpen:r,onToggle:m,children:N,className:x=""})=>e.jsxs("div",{className:`py-4 ${x}`,children:[e.jsxs(X.div,{whileTap:{scale:.98},onClick:m,className:"flex sm:flex-row flex-col sm:items-center justify-between cursor-pointer group/collapsible gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:`w-8 h-8 rounded-xl flex-shrink-0 flex items-center justify-center transition-colors ${r?"bg-blue-500/20 text-blue-400":"bg-white/5 text-slate-500"}`,children:a}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:"text-[11px] font-black uppercase tracking-widest text-slate-400 group-hover/collapsible:text-slate-200 truncate leading-tight font-sans",children:o}),i&&e.jsx("span",{className:"text-[9px] text-slate-600 uppercase font-bold tracking-widest truncate leading-tight font-sans",children:i})]})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0 sm:ml-4 ml-11",children:[p&&e.jsx("span",{className:`text-sm font-bold tabular-nums font-mono ${d}`,children:p}),e.jsx(X.div,{animate:{rotate:r?180:0},transition:{duration:.3,ease:[.19,1,.22,1]},className:"sm:block hidden",children:e.jsx(Pe,{className:"w-4 h-4 text-slate-600"})})]})]}),e.jsx(qe,{children:r&&e.jsx(X.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:[.19,1,.22,1]},className:"overflow-hidden",children:e.jsx("div",{className:"pt-6",children:N})})})]}),lt=({accounts:o,goals:i,liabilities:a,expenses:p,emergencyFundAmount:d=0})=>{const r=Y.useMemo(()=>o.filter(b=>b.type==="bank"||b.type==="cash").reduce((b,y)=>b+y.balance,0),[o]),m=Y.useMemo(()=>o.filter(b=>b.type==="credit_card").reduce((b,y)=>b+Math.abs(y.balance),0),[o]),N=Y.useMemo(()=>{const b=a.reduce((M,k)=>M+(k.emiAmount||0),0),y=p.filter(M=>M.isRecurring).reduce((M,k)=>M+k.amount,0);return b+y},[a,p]),x=Y.useMemo(()=>i.reduce((y,M)=>y+M.currentAmount,0)+(d||0),[i,d]),w=Y.useMemo(()=>x+N,[x,N]),P=Y.useMemo(()=>{const b=r-w;return Math.max(0,b)},[r,w]);return{totalBankBalance:r,totalCreditUsage:m,totalCommitments:N,shadowWalletTotal:x,totalReserved:w,availableToSpend:P}},ut=({expenses:o,incomes:i=[],currency:a,goals:p=[],emergencyFundAmount:d=0,liabilities:r=[],debts:m=[],investments:N=[],accounts:x=[]})=>{const w=o.map(t=>({...t,isInternalTransfer:t.isInternalTransfer||Ne(t)})),P=i.map(t=>({...t,isInternalTransfer:t.isInternalTransfer||Ne(t)}));w.forEach(t=>{if(t.isInternalTransfer)return;const l=P.find(u=>!u.isInternalTransfer&&u.amount===t.amount&&u.date.split("T")[0]===t.date.split("T")[0]&&u.accountId!==t.accountId);l&&(t.isInternalTransfer=!0,l.isInternalTransfer=!0)});const{shadowWalletTotal:b,totalReserved:y,availableToSpend:M,totalCreditUsage:k,totalCommitments:ae}=lt({accounts:x,goals:p,liabilities:r,expenses:w,emergencyFundAmount:d}),[C,_]=Y.useState(null),R=new Date,v=R.getMonth(),f=R.getFullYear(),B=new Date(f,v-1,1),H=B.getMonth(),le=B.getFullYear(),E=new Date(f,v+1,0).getDate()-R.getDate()+1,g=w.filter(t=>{const l=new Date(t.date);return l.getMonth()===v&&l.getFullYear()===f&&!t.isInternalTransfer}),S=w.filter(t=>{const l=new Date(t.date);return l.getMonth()===H&&l.getFullYear()===le&&!t.isInternalTransfer}),F=t=>{_(C===t?null:t)},de=p.length,Z=r.reduce((t,l)=>t+(l.outstanding||l.principal||0),0),q=m.filter(t=>t.type==="borrowed"&&t.status==="pending"),re=q.reduce((t,l)=>t+l.amount,0),Q=m.filter(t=>t.type==="lent"&&t.status==="pending"),ne=Q.reduce((t,l)=>t+l.amount,0),oe=N.filter(t=>{if(t.accountId&&t.accountId!=="none"){const l=x.find(u=>u.id===t.accountId);if(l&&l.type!=="investment")return!1}return!0}),G=oe.reduce((t,l)=>t+l.buyPrice*l.quantity,0),L=oe.reduce((t,l)=>t+(l.currentPrice||l.buyPrice)*l.quantity,0),U=G>0?((L-G)/G*100).toFixed(1):"0.0",W=x.filter(t=>t.type==="bank"||t.type==="cash").reduce((t,l)=>t+l.balance,0),$=P.filter(t=>!t.isInternalTransfer).reduce((t,l)=>t+l.amount,0)||42500,K=g.reduce((t,l)=>t+l.amount,0),J=S.reduce((t,l)=>t+l.amount,0),ee=J>0?Math.round((K-J)/J*100):0,pe=g.filter(t=>t.category==="Subscription").reduce((t,l)=>t+l.amount,0),s=W>0?K/W:0,c=(s*100).toFixed(1)+"%",I=(t=>t>1?{status:"Aggressive",color:"text-rose-400",bg:"bg-rose-500/10",border:"border-rose-500/20",advice:"High-velocity detected. Spending is outpacing liquid nodes. Priority: Solidify safety buffer.",suggestion:"Consolidate spending and pause growth node transfers for 30 days."}:t<.3?{status:"Stagnant",color:"text-amber-400",bg:"bg-amber-500/10",border:"border-amber-500/20",advice:"Low-velocity detected. Capital is sitting idle in liquid nodes and losing theoretical power.",suggestion:"Highly recommended: Shift "+j(Math.floor(W*.2),a)+" to Money Growth."}:{status:"Optimal",color:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/20",advice:"Optimal circulation. Capital flow is balanced between spending and holding.",suggestion:"Protocol: Continue current flow. System is in high-efficiency state."})(s),O=E>0?Math.floor(M/E):0;return e.jsxs("div",{className:"main-grid",children:[e.jsx(et,{message:`Assessment: ${j(y,a,!0)} reserved. Safe daily spending limit is ${j(O,a,!0)} for the next ${E} days.`}),e.jsxs(X.div,{layout:!0,initial:!1,className:"segmented-stack mesh-gradient-card mesh-invest group transition-all duration-500 col-span-full relative overflow-hidden sq-2xl",children:[e.jsx(A,{variant:"invest"}),e.jsx("div",{className:"stack-cap relative z-10",children:e.jsx("div",{className:"flex justify-between items-start relative z-20",children:e.jsxs("div",{children:[e.jsx("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-2 mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-white/5 flex items-center justify-center border border-white/10 group-hover:scale-110 transition-transform duration-500 sq-lg flex-shrink-0",children:e.jsx(ue,{className:"text-blue-400 w-5 h-5"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-label text-[10px] tracking-widest truncate",children:"Balance Board"}),e.jsx("div",{className:"px-1.5 py-0.5 rounded-full text-[7px] font-black uppercase tracking-tighter border border-blue-500/20 bg-blue-500/10 text-[var(--q-sapphire)] inline-block",children:"Total Liquidity"})]})]})}),e.jsx(X.div,{layoutId:"balance-mount",className:"hero-text text-4xl md:text-6xl lg:text-7xl tabular-nums text-white",children:e.jsx(D,{value:W,currency:a})})]})})}),e.jsxs("div",{className:"stack-body relative z-10",children:[e.jsx("div",{className:"dotted-divider opacity-50 mb-6"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-label text-[10px] mb-1.5 opacity-60 font-black",children:"Daily Spend"}),e.jsx("div",{className:"hero-text text-[clamp(1.5rem,5vw,1.875rem)] text-white tabular-nums font-mono",children:j(O,a)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-label text-[10px] mb-1.5 opacity-60 font-black",children:"Budget Left"}),e.jsx("div",{className:"hero-text text-[clamp(1.5rem,5vw,1.875rem)] text-[var(--q-emerald)] tabular-nums font-mono",children:j(M,a)})]})]}),e.jsx("div",{className:"dotted-divider opacity-50 mb-6"})]}),e.jsxs("div",{className:"stack-footer relative z-10 space-y-2",children:[e.jsx(z,{title:"Liquidity Nodes",subtitle:"Institutional Reservoirs",icon:e.jsx(be,{className:"w-4 h-4"}),value:j(W,a),isOpen:C==="liquidity-group",onToggle:()=>F("liquidity-group"),children:e.jsx("div",{className:"space-y-3",children:x.filter(t=>t.type==="bank"||t.type==="cash").map(t=>e.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-900/50 rounded-2xl border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[t.type==="bank"?e.jsx(be,{className:"w-4 h-4 text-blue-400 flex-shrink-0"}):e.jsx(ue,{className:"w-4 h-4 text-emerald-400 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[11px] font-black text-slate-200 uppercase truncate leading-tight",children:t.name}),e.jsx("p",{className:"text-[9px] text-slate-600 uppercase font-bold tracking-widest truncate leading-tight",children:t.type==="bank"?"Institutional Reservoir":"Physical Cash Node"})]})]}),e.jsx("span",{className:"text-sm font-bold text-white tabular-nums flex-shrink-0 ml-2",children:j(t.balance,a)})]}))})}),e.jsx(z,{title:"Debt & Liability",subtitle:"Capital Sourced",icon:e.jsx(se,{className:"w-4 h-4"}),value:e.jsx(D,{value:Z+re+k,currency:a}),valueColor:"text-rose-400",isOpen:C==="debt-group",onToggle:()=>F("debt-group"),children:e.jsx("div",{className:"space-y-3",children:[...r,...q,...x.filter(t=>t.type==="credit_card"&&t.balance<0)].length===0?e.jsxs("div",{className:"p-6 bg-slate-800/20 border border-dashed border-white/5 squircle-12 text-center",children:[e.jsx(se,{className:"w-8 h-8 mx-auto text-slate-700 mb-2"}),e.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-widest",children:"No active liabilities found"}),e.jsx("p",{className:"text-[10px] text-slate-600 mt-1 whitespace-nowrap",children:"Your financial circulation is debt-free"})]}):e.jsxs(e.Fragment,{children:[r.map(t=>e.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-900/50 rounded-2xl border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(be,{className:"w-4 h-4 text-slate-500"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-200 uppercase truncate",children:t.name}),e.jsx("p",{className:"text-[9px] text-slate-600 uppercase font-black tracking-widest",children:"Loan Reservoir"})]})]}),e.jsx("span",{className:"text-sm font-bold text-rose-400 tabular-nums",children:e.jsx(D,{value:t.outstanding||t.principal,currency:a})})]},t.id)),x.filter(t=>t.type==="credit_card"&&t.balance<0).map(t=>e.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-900/50 rounded-2xl border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Le,{className:"w-4 h-4 text-slate-500"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-200 uppercase truncate",children:t.name}),e.jsx("p",{className:"text-[9px] text-slate-600 uppercase font-black tracking-widest",children:"Card Usage"})]})]}),e.jsx("span",{className:"text-sm font-bold text-rose-400 tabular-nums",children:e.jsx(D,{value:Math.abs(t.balance),currency:a})})]},t.id)),q.map(t=>e.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-900/50 rounded-2xl border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fe,{className:"w-4 h-4 text-slate-500"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-200 uppercase truncate",children:t.personName}),e.jsx("p",{className:"text-[9px] text-slate-600 uppercase font-black tracking-widest",children:"Personal IOU"})]})]}),e.jsx("span",{className:"text-sm font-bold text-rose-400 tabular-nums",children:e.jsx(D,{value:t.amount,currency:a})})]},t.id))]})})}),e.jsx(z,{title:"Lent & Receivables",subtitle:"Capital Displaced",icon:e.jsx(xe,{className:"w-4 h-4"}),value:e.jsx(D,{value:ne,currency:a}),valueColor:"text-emerald-400",isOpen:C==="receivable-group",onToggle:()=>F("receivable-group"),children:e.jsx("div",{className:"space-y-3",children:Q.length===0?e.jsxs("div",{className:"p-6 bg-slate-800/20 border border-dashed border-white/5 squircle-12 text-center",children:[e.jsx(xe,{className:"w-8 h-8 mx-auto text-slate-700 mb-2"}),e.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-widest",children:"No active receivables"}),e.jsx("p",{className:"text-[10px] text-slate-600 mt-1 whitespace-nowrap",children:"You haven't lent money recently"})]}):Q.map(t=>e.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-900/50 rounded-xl border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fe,{className:"w-4 h-4 text-slate-500"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-200 uppercase truncate",children:t.personName}),e.jsx("p",{className:"text-[9px] text-slate-600 uppercase font-black tracking-widest",children:"Receivable Asset"})]})]}),e.jsx("span",{className:"text-sm font-bold text-emerald-400 tabular-nums",children:e.jsx(D,{value:t.amount,currency:a})})]},t.id))})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 col-span-full",children:[e.jsxs("div",{className:"grid-widget mesh-gradient-card mesh-spending relative overflow-hidden h-full",children:[e.jsx(A,{variant:"spending"}),e.jsxs("div",{className:"relative z-10 p-6 h-full flex flex-col",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-500/10 flex items-center justify-center border border-indigo-500/20 sq-md flex-shrink-0",children:e.jsx($e,{className:"text-indigo-400 w-5 h-5"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-white font-black text-[10px] uppercase tracking-[0.2em] truncate",children:"Circulation"}),e.jsx("p",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest mt-0.5 truncate",children:"Active Expense Node"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{title:"Cash Flow Speed",subtitle:I.status,icon:e.jsx(se,{className:"w-4 h-4"}),value:c,valueColor:I.color,isOpen:C==="flow-speed",onToggle:()=>F("flow-speed"),children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-slate-900/50 p-4 sq-md border border-white/5",children:[e.jsx("span",{className:"text-[8px] text-slate-500 uppercase block mb-1",children:"Gross Income (Est)"}),e.jsxs("div",{className:"text-emerald-400 font-bold tabular-nums font-mono",children:["~",e.jsx(D,{value:$,currency:a})]})]}),e.jsxs("div",{className:"bg-slate-900/50 p-4 sq-md border border-white/5",children:[e.jsx("span",{className:"text-[8px] text-slate-500 uppercase block mb-1",children:"Gross Burn"}),e.jsx("div",{className:"text-red-400 font-bold tabular-nums font-mono",children:e.jsx(D,{value:K,currency:a})})]}),e.jsxs("div",{className:"col-span-2 space-y-4",children:[e.jsx("div",{className:`p-5 rounded-xl border ${I.bg} ${I.border}`,children:e.jsx("p",{className:"text-xs text-slate-300 leading-relaxed",children:I.advice})}),e.jsx("div",{className:"p-5 rounded-xl bg-blue-500/5 border border-blue-500/10",children:e.jsx("p",{className:"text-xs text-white font-medium leading-relaxed",children:I.suggestion})})]})]})}),e.jsx(z,{title:"Monthly Spending",subtitle:`${ee>=0?"Increase":"Decrease"} Node`,icon:e.jsx(Oe,{className:"w-4 h-4"}),value:`${ee>0?"+":""}${ee}%`,valueColor:ee>0?"text-rose-400":"text-emerald-400",isOpen:C==="spending-flow",onToggle:()=>F("spending-flow"),children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-slate-800/50 rounded-xl border border-white/5",children:[e.jsx("span",{className:"text-[8px] text-slate-500 uppercase block mb-1",children:"Daily Spend Avg"}),e.jsx("span",{className:"text-sm font-bold tabular-nums",children:j(Math.floor(K/30),a)})]}),e.jsxs("div",{className:"p-4 bg-slate-800/50 rounded-xl border border-white/5",children:[e.jsx("span",{className:"text-[8px] text-slate-500 uppercase block mb-1",children:"Subscriptions"}),e.jsx("span",{className:"text-sm font-bold tabular-nums",children:j(pe,a)})]})]})})]})]})]}),e.jsxs("div",{className:"grid-widget mesh-gradient-card mesh-savings relative overflow-hidden h-full",children:[e.jsx(A,{variant:"savings"}),e.jsxs("div",{className:"relative z-10 p-6 h-full flex flex-col",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-emerald-500/10 flex items-center justify-center border border-emerald-500/20 sq-md flex-shrink-0",children:e.jsx(ze,{className:"text-emerald-400 w-5 h-5"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-white font-black text-[10px] uppercase tracking-[0.2em] truncate",children:"Reserves"}),e.jsx("p",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest mt-0.5 truncate",children:"Capital Accumulation"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{title:"Money Set Aside",subtitle:`${de+(d>0?1:0)+(ae>0?1:0)} Buckets Active`,icon:e.jsx(ue,{className:"w-4 h-4"}),value:ce(y,a),valueColor:"text-blue-400",isOpen:C==="reserve-vault",onToggle:()=>F("reserve-vault"),children:e.jsxs("div",{className:"space-y-4",children:[d>0&&e.jsxs("div",{className:"flex justify-between items-center p-4 bg-white/5 rounded-xl border border-white/5",children:[e.jsx("span",{className:"text-xs text-slate-300 block",children:"Emergency Fund"}),e.jsx("div",{className:"font-bold text-emerald-400 tabular-nums font-mono",children:e.jsx(D,{value:d,currency:a})})]}),ae>0&&e.jsxs("div",{className:"flex justify-between items-center p-4 bg-white/5 rounded-xl border border-white/5",children:[e.jsx("span",{className:"text-xs text-slate-300 block",children:"Upcoming Bills/EMI"}),e.jsx("div",{className:"font-bold text-red-400 tabular-nums font-mono",children:e.jsx(D,{value:ae,currency:a})})]})]})}),e.jsx(z,{title:"Active Goals",subtitle:"Targets Initialized",icon:e.jsx(fe,{className:"w-4 h-4"}),value:ce(b,a),valueColor:"text-emerald-400",isOpen:C==="goals-vault",onToggle:()=>F("goals-vault"),children:e.jsx("div",{className:"space-y-3",children:p.map(t=>e.jsxs("div",{className:"flex justify-between items-center p-4 bg-white/5 rounded-xl border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xl",children:t.emoji||"ðŸŽ¯"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-slate-300 block",children:t.name}),e.jsx("span",{className:"text-[9px] text-slate-500 uppercase font-black tracking-widest",children:t.type||"Future Node"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"font-bold text-white tabular-nums font-mono block",children:j(t.currentAmount,a)}),e.jsxs("span",{className:"text-[8px] text-slate-500 uppercase tracking-tighter",children:["of ",j(t.targetAmount,a)]})]})]},t.id))})})]})]})]}),e.jsxs("div",{className:"grid-widget mesh-gradient-card mesh-debt relative overflow-hidden h-full",children:[e.jsx(A,{variant:"debt"}),e.jsxs("div",{className:"relative z-10 p-6 h-full flex flex-col",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-rose-500/10 flex items-center justify-center border border-rose-500/20 sq-md flex-shrink-0",children:e.jsx(se,{className:"text-rose-400 w-5 h-5"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-white font-black text-[10px] uppercase tracking-[0.2em] truncate",children:"Obligations"}),e.jsx("p",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest mt-0.5 truncate",children:"Institutional Debt"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{title:"Active Liabilities",subtitle:`${r.length+q.length} Active Strings`,icon:e.jsx(se,{className:"w-4 h-4"}),value:e.jsx(D,{value:Z+re+k,currency:a}),valueColor:"text-rose-400",isOpen:C==="debt-widget",onToggle:()=>F("debt-widget"),children:e.jsxs("div",{className:"space-y-3",children:[r.map(t=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/5 rounded-xl border border-white/5",children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase truncate",children:t.name}),e.jsx("span",{className:"text-xs font-bold text-rose-400 tabular-nums font-mono",children:j(t.outstanding||t.principal,a)})]},t.id)),k>0&&e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/5 rounded-xl border border-white/5",children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase",children:"Card Usage"}),e.jsx("span",{className:"text-xs font-bold text-rose-400 tabular-nums font-mono",children:j(k,a)})]}),q.map(t=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/5 rounded-xl border border-white/5",children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase truncate",children:t.personName}),e.jsx("span",{className:"text-xs font-bold text-rose-400 tabular-nums font-mono",children:j(t.amount,a)})]},t.id)),r.length===0&&k===0&&q.length===0&&e.jsx("p",{className:"text-[10px] text-slate-500 text-center py-4",children:"No active obligations detected."})]})}),r.length>0&&e.jsxs("div",{className:"p-4 bg-rose-500/5 border border-rose-500/10 rounded-xl",children:[e.jsx("p",{className:"text-[9px] text-rose-400 font-bold uppercase tracking-widest mb-1",children:"Tactical Mode Active"}),e.jsx("p",{className:"text-[10px] text-slate-400 leading-tight",children:"Payback optimization logic is currently prioritizing high-interest nodes."})]})]})]})]}),e.jsxs("div",{className:"grid-widget mesh-gradient-card mesh-invest relative overflow-hidden h-full",children:[e.jsx(A,{variant:"invest"}),e.jsxs("div",{className:"relative z-10 p-6 h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/10 flex items-center justify-center border border-blue-500/20 sq-md",children:e.jsx(xe,{className:"text-blue-400 w-5 h-5"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-white font-black text-[10px] uppercase tracking-[0.2em]",children:"Growth"}),e.jsx("p",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest mt-0.5",children:"Asset Expansion"})]})]}),e.jsx("div",{className:"space-y-2",children:e.jsx(z,{title:"Money Growth",subtitle:`${parseFloat(U)>=0?"+":""}${U}% Velocity`,icon:e.jsx(xe,{className:"w-4 h-4"}),value:ce(L,a),valueColor:"text-emerald-400",isOpen:C==="invest-growth-widget",onToggle:()=>F("invest-growth-widget"),children:e.jsxs("div",{className:"p-6 bg-white/5 border border-dashed border-white/10 rounded-xl text-center",children:[e.jsx(se,{className:"w-8 h-8 mx-auto text-slate-700 mb-2"}),e.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-widest",children:"Portfolio Deep Dive"}),e.jsx("p",{className:"text-[10px] text-slate-600 mt-1",children:"Visit Investments tab for detailed node analysis"})]})})})]})]})]}),r.length>0&&e.jsx(tt,{liabilities:r}),(()=>{const t=r.reduce((n,h)=>n+(h.emiAmount||0),0),u=x.filter(n=>n.type==="credit_card").reduce((n,h)=>n+Math.abs(h.balance),0)*.05,T=t+u,ye=x.filter(n=>n.type==="bank").map(n=>n.id),Me=x.filter(n=>["bank","cash","credit_card"].includes(n.type)).map(n=>n.id),ve=P.filter(n=>{const h=new Date(n.date);return h.getMonth()===v&&h.getFullYear()===f&&ye.includes(n.accountId)&&!n.isInternalTransfer}).reduce((n,h)=>n+h.amount,0)||$,Ce=N.filter(n=>{const h=new Date(n.purchaseDate);return h.getMonth()===v&&h.getFullYear()===f}).reduce((n,h)=>n+h.buyPrice*h.quantity,0),Ie=w.filter(n=>{const h=new Date(n.date);return h.getMonth()===v&&h.getFullYear()===f&&Me.includes(n.accountId)&&!n.isInternalTransfer}).reduce((n,h)=>n+h.amount,0)+Ce,De=ve>0?Ie/ve:0;return e.jsx(at,{currency:a,expenses:w,incomes:P,accounts:x,savingsRate:$>0?($-K)/$*100:0,dtiRatio:$>0?T/$:0,outflowRatio:De})})(),e.jsx("div",{className:"h-24 w-full col-span-full"})]})};export{ut as Dashboard};
