const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-Cotao1KR.js","assets/ui-DwNC2Rqb.js","assets/vendor-7PqXWhc5.js","assets/InteractiveFinancialValue-k5N6qor8.js","assets/haptics-C9gh8PRt.js","assets/charts-CInRTlJo.js","assets/index-CeDZTw5p.js","assets/motion-BKne_-B1.js","assets/TransactionList-Bmog69cK.js","assets/GoalsTracker-CZzjs7AW.js","assets/EmergencyFundsTab-DUFPozCE.js","assets/InvestmentsTab-D0scCVlE.js","assets/slider-DZwKQyH9.js","assets/LiabilityTab-8koh7B6j.js","assets/LiabilityDashboard-BH8tq6Hl.js"])))=>i.map(i=>d[i]);
import{t as tr,c as sr,j as e,r as v,S as Va,a as Ua,b as ar,d as nr,T as rr,I as ir,C as as,V as or,P as lr,e as cr,f as dr,g as ur,h as mr,i as za,k as hr,l as pr,m as Ga,n as fr,O as Ha,o as qa,p as Wa,q as Ya,s as Ka,D as Ja,u as Xa,R as _,v as gr,H as xr,w as ns,x as Zt,y as Ot,W as Za,A as br,z as Ns,B as Vt,U as ks,E as Ms,F as yr,G as vr,L as Qa,J as wr,K as en,M as jr,N as Nr,Q as kr,X as tn,Y as rs,Z as is,_ as Sr,$ as Cr,a0 as Ar,a1 as Tr,a2 as Er,a3 as Dr,a4 as Ir,a5 as Pr,a6 as Gs,a7 as Rr,a8 as Mr,a9 as Lr,aa as Or,ab as Fr,ac as _r,ad as wt,ae as $r,af as Br,ag as Vr,ah as Ur,ai as zr,aj as Gr,ak as Hr,al as qr,am as Wr,an as sn,ao as Yr,ap as an,aq as Kr,ar as nn,as as Jr,at as Xr,au as Zr,av as Ss,aw as Qr,ax as ei}from"./ui-DwNC2Rqb.js";import{a as ti}from"./vendor-7PqXWhc5.js";import{i as rn,f as Cs,a as on,b as Qt,c as Ls,d as si,e as ai,g as ni,h as ri,j as ii,k as Os,r as oi,s as li,l as ci,o as di,S as ui,H as mi,m as _t,n as ln,v as cn,p as Hs,q as dn,t as un,u as Ue,w as hi,x as nt,y as et,z as mn,A as As,B as pi,C as fi,D as Ts,E as hn,F as Ve,G as gi,I as xi,J as bi,K as qs,L as yi,M as vi,N as es,O as Lt,P as pn,Q as fn,R as gn,T as wi,U as ji,V as Ws,W as Ni,X as ki,Y as Si,Z as Ci,_ as Ai,$ as Ti,a0 as cs,a1 as Dt,a2 as Ht,a3 as qt,a4 as Ys,a5 as Ei,a6 as Di,a7 as Ii,a8 as It,a9 as Pi,aa as Ri,ab as Ks,ac as Mi,ad as Li,ae as Oi}from"./motion-BKne_-B1.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const r of c.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function a(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(i){if(i.ep)return;i.ep=!0;const c=a(i);fetch(i.href,c)}})();var Wt={},Js;function Fi(){if(Js)return Wt;Js=1;var t=ti();return Wt.createRoot=t.createRoot,Wt.hydrateRoot=t.hydrateRoot,Wt}var _i=Fi();const $i="modulepreload",Bi=function(t){return"/"+t},Xs={},kt=function(s,a,n){let i=Promise.resolve();if(a&&a.length>0){let r=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(l=>({status:"fulfilled",value:l}),l=>({status:"rejected",reason:l}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),u=o?.nonce||o?.getAttribute("nonce");i=r(a.map(d=>{if(d=Bi(d),d in Xs)return;Xs[d]=!0;const h=d.endsWith(".css"),l=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${l}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":$i,h||(g.as="script"),g.crossOrigin="",g.href=d,u&&g.setAttribute("nonce",u),document.head.appendChild(g),h)return new Promise((N,b)=>{g.addEventListener("load",N),g.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${d}`)))})}))}function c(r){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=r,window.dispatchEvent(o),!o.defaultPrevented)throw r}return i.then(r=>{for(const o of r||[])o.status==="rejected"&&c(o.reason);return s().catch(c)})};function Ce(...t){return tr(sr(t))}function Ge({className:t,...s}){return e.jsx("div",{"data-slot":"card",className:Ce("segmented-stack",t),...s})}const Vi=Ua("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-xl text-sm font-medium transition-all active:scale-[0.97] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-11 px-6 py-2 has-[>svg]:px-4",sm:"h-9 gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-12 px-8 has-[>svg]:px-6",icon:"size-10"}},defaultVariants:{variant:"default",size:"default"}}),oe=v.forwardRef(({className:t,variant:s,size:a,asChild:n=!1,...i},c)=>{const r=n?Va:"button";return e.jsx(r,{ref:c,"data-slot":"button",className:Ce(Vi({variant:s,size:a,className:t})),...i})});oe.displayName="Button";function Fe({className:t,type:s,...a}){return e.jsx("input",{type:s,"data-slot":"input",className:Ce("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...a})}function Q({className:t,...s}){return e.jsx(ar,{"data-slot":"label",className:Ce("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}function He({...t}){return e.jsx(nr,{"data-slot":"select",...t})}function qe({...t}){return e.jsx(or,{"data-slot":"select-value",...t})}function We({className:t,size:s="default",children:a,...n}){return e.jsxs(rr,{"data-slot":"select-trigger","data-size":s,className:Ce("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n,children:[a,e.jsx(ir,{asChild:!0,children:e.jsx(as,{className:"size-4 opacity-50"})})]})}function Ye({className:t,children:s,position:a="popper",...n}){return e.jsx(lr,{children:e.jsxs(cr,{"data-slot":"select-content",className:Ce("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-[300] max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:a,...n,children:[e.jsx(Ui,{}),e.jsx(dr,{className:Ce("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),e.jsx(zi,{})]})})}function ve({className:t,children:s,...a}){return e.jsxs(ur,{"data-slot":"select-item",className:Ce("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...a,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(mr,{children:e.jsx(za,{className:"size-4"})})}),e.jsx(hr,{children:s})]})}function Ui({className:t,...s}){return e.jsx(pr,{"data-slot":"select-scroll-up-button",className:Ce("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Ga,{className:"size-4"})})}function zi({className:t,...s}){return e.jsx(fr,{"data-slot":"select-scroll-down-button",className:Ce("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(as,{className:"size-4"})})}function St({...t}){return e.jsx(qa,{"data-slot":"dialog",...t})}function Gi({...t}){return e.jsx(Xa,{"data-slot":"dialog-portal",...t})}const xn=v.forwardRef(({className:t,...s},a)=>e.jsx(Ha,{ref:a,"data-slot":"dialog-overlay",className:Ce("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-[200] bg-black/50",t),...s}));xn.displayName="DialogOverlay";function Ct({className:t,children:s,...a}){return e.jsxs(Gi,{"data-slot":"dialog-portal",children:[e.jsx(Wa,{asChild:!0,children:e.jsx(xn,{})}),e.jsx(Ya,{"data-slot":"dialog-content",className:Ce("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-[200] grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...a,children:s})]})}function At({className:t,...s}){return e.jsx("div",{"data-slot":"dialog-header",className:Ce("flex flex-col gap-2 text-center sm:text-left",t),...s})}function Tt({className:t,...s}){return e.jsx(Ka,{"data-slot":"dialog-title",className:Ce("text-lg leading-none font-semibold",t),...s})}function Et({className:t,...s}){return e.jsx(Ja,{"data-slot":"dialog-description",className:Ce("text-muted-foreground text-sm",t),...s})}const bn=[{value:"Food & Dining",emoji:"ðŸ”"},{value:"Transport",emoji:"ðŸš—"},{value:"Shopping",emoji:"ðŸ›ï¸"},{value:"Entertainment",emoji:"ðŸŽ¬"},{value:"Bills & Utilities",emoji:"ðŸ“±"},{value:"Healthcare",emoji:"ðŸ¥"},{value:"Education",emoji:"ðŸ“š"},{value:"Travel",emoji:"âœˆï¸"},{value:"Groceries",emoji:"ðŸ›’"},{value:"Personal Care",emoji:"ðŸ’…"},{value:"EMI",emoji:"ðŸ¦"},{value:"Subscription",emoji:"ðŸ“º"},{value:"Personal IOU",emoji:"ðŸ¤"},{value:"Transfer",emoji:"ðŸ”„"},{value:"Other",emoji:"ðŸ“¦"}],Hi=bn,ds=["#3B82F6","#10B981","#8B5CF6","#F59E0B","#EF4444","#EC4899","#06B6D4","#6366F1"],us=[{value:"ðŸ¦",label:"Bank"},{value:"ðŸ’³",label:"Card"},{value:"ðŸ’°",label:"Cash"},{value:"ðŸ“±",label:"Digital"},{value:"ðŸª",label:"Merchant"},{value:"ðŸ’µ",label:"Money"},{value:"ðŸŽ¯",label:"Target"},{value:"â­",label:"Star"}],ht={INR:"â‚¹",USD:"$",EUR:"â‚¬",GBP:"Â£",AED:"Ø¯.Ø¥",SAR:"ï·¼"},qi="kizvioibwffopuxqggxx",Wi="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtpenZpb2lid2Zmb3B1eHFnZ3h4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk4ODA2NDgsImV4cCI6MjA3NTQ1NjY0OH0.dsTw06FxhPMue2ElbvWD58Zo7ZvFWpRFqjoDS77P55A",le=`https://${qi}.supabase.co/functions/v1/make-server-6e7daf8e`,ce={"Content-Type":"application/json",Authorization:`Bearer ${Wi}`},re={async getSettings(t){return(await fetch(`${le}/user/${t}`,{headers:ce})).json()},async updateSettings(t,s){return(await fetch(`${le}/user/${t}/settings`,{method:"POST",headers:ce,body:JSON.stringify(s)})).json()},async getExpenses(t){return(await fetch(`${le}/user/${t}/expenses`,{headers:ce})).json()},async createExpense(t,s){return(await fetch(`${le}/user/${t}/expenses`,{method:"POST",headers:ce,body:JSON.stringify(s)})).json()},async updateExpense(t,s,a){return(await fetch(`${le}/user/${t}/expenses/${s}`,{method:"PUT",headers:ce,body:JSON.stringify(a)})).json()},async deleteExpense(t,s){return(await fetch(`${le}/user/${t}/expenses/${s}`,{method:"DELETE",headers:ce})).json()},async getIncomes(t){return(await fetch(`${le}/user/${t}/incomes`,{headers:ce})).json()},async createIncome(t,s){return(await fetch(`${le}/user/${t}/incomes`,{method:"POST",headers:ce,body:JSON.stringify(s)})).json()},async updateIncome(t,s,a){return(await fetch(`${le}/user/${t}/incomes/${s}`,{method:"PUT",headers:ce,body:JSON.stringify(a)})).json()},async deleteIncome(t,s){return(await fetch(`${le}/user/${t}/incomes/${s}`,{method:"DELETE",headers:ce})).json()},async getDebts(t){return(await fetch(`${le}/user/${t}/debts`,{headers:ce})).json()},async createDebt(t,s){return(await fetch(`${le}/user/${t}/debts`,{method:"POST",headers:ce,body:JSON.stringify(s)})).json()},async updateDebt(t,s,a){return(await fetch(`${le}/user/${t}/debts/${s}`,{method:"PUT",headers:ce,body:JSON.stringify(a)})).json()},async deleteDebt(t,s){return(await fetch(`${le}/user/${t}/debts/${s}`,{method:"DELETE",headers:ce})).json()},async getGoals(t){return(await fetch(`${le}/user/${t}/goals`,{headers:ce})).json()},async createGoal(t,s){return(await fetch(`${le}/user/${t}/goals`,{method:"POST",headers:ce,body:JSON.stringify(s)})).json()},async updateGoal(t,s,a){return(await fetch(`${le}/user/${t}/goals/${s}`,{method:"PUT",headers:ce,body:JSON.stringify(a)})).json()},async deleteGoal(t,s){return(await fetch(`${le}/user/${t}/goals/${s}`,{method:"DELETE",headers:ce})).json()},async getAccounts(t){return(await fetch(`${le}/user/${t}/accounts`,{headers:ce})).json()},async createAccount(t,s){return(await fetch(`${le}/user/${t}/accounts`,{method:"POST",headers:ce,body:JSON.stringify(s)})).json()},async updateAccount(t,s,a){return(await fetch(`${le}/user/${t}/accounts/${s}`,{method:"PUT",headers:ce,body:JSON.stringify(a)})).json()},async deleteAccount(t,s){return(await fetch(`${le}/user/${t}/accounts/${s}`,{method:"DELETE",headers:ce})).json()},async categorize(t){return(await fetch(`${le}/ai/categorize`,{method:"POST",headers:ce,body:JSON.stringify({description:t})})).json()},async chat(t,s){return(await fetch(`${le}/ai/chat`,{method:"POST",headers:ce,body:JSON.stringify({message:t,context:s})})).json()},async getDashboardFeedback(t){return(await fetch(`${le}/ai/dashboard-feedback`,{method:"POST",headers:ce,body:JSON.stringify({context:t})})).json()},async getRecurring(t){return(await fetch(`${le}/user/${t}/recurring`,{headers:ce})).json()},async createRecurring(t,s){return(await fetch(`${le}/user/${t}/recurring`,{method:"POST",headers:ce,body:JSON.stringify(s)})).json()},async deleteRecurring(t,s){return(await fetch(`${le}/user/${t}/recurring/${s}`,{method:"DELETE",headers:ce})).json()},async processRecurring(t){try{return(await fetch(`${le}/user/${t}/recurring/process`,{method:"POST",headers:ce})).json()}catch(s){return console.warn("Failed to process recurring transactions",s),{success:!1}}},async getInvestments(t){return(await fetch(`${le}/user/${t}/investments`,{headers:ce})).json()},async createInvestment(t,s){return(await fetch(`${le}/user/${t}/investments`,{method:"POST",headers:ce,body:JSON.stringify(s)})).json()},async updateInvestment(t,s,a){return(await fetch(`${le}/user/${t}/investments/${s}`,{method:"PUT",headers:ce,body:JSON.stringify(a)})).json()},async deleteInvestment(t,s){return(await fetch(`${le}/user/${t}/investments/${s}`,{method:"DELETE",headers:ce})).json()},async getLiabilities(t){return(await fetch(`${le}/user/${t}/liabilities`,{headers:ce})).json()},async createLiability(t,s){return(await fetch(`${le}/user/${t}/liabilities`,{method:"POST",headers:ce,body:JSON.stringify(s)})).json()},async updateLiability(t,s,a){return(await fetch(`${le}/user/${t}/liabilities/${s}`,{method:"PUT",headers:ce,body:JSON.stringify(a)})).json()},async deleteLiability(t,s){return(await fetch(`${le}/user/${t}/liabilities/${s}`,{method:"DELETE",headers:ce})).json()},async getExchangeRates(t){return(await fetch(`${le}/currency/rates/${t}`,{headers:ce})).json()}};function Yi(t){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",s.appendChild(a),a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t))}const Ki=t=>{switch(t){case"success":return Zi;case"info":return eo;case"warning":return Qi;case"error":return to;default:return null}},Ji=Array(12).fill(0),Xi=({visible:t,className:s})=>_.createElement("div",{className:["sonner-loading-wrapper",s].filter(Boolean).join(" "),"data-visible":t},_.createElement("div",{className:"sonner-spinner"},Ji.map((a,n)=>_.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),Zi=_.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},_.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Qi=_.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},_.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),eo=_.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},_.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),to=_.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},_.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),so=_.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},_.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),_.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),ao=()=>{const[t,s]=_.useState(document.hidden);return _.useEffect(()=>{const a=()=>{s(document.hidden)};return document.addEventListener("visibilitychange",a),()=>window.removeEventListener("visibilitychange",a)},[]),t};let Es=1;class no{constructor(){this.subscribe=s=>(this.subscribers.push(s),()=>{const a=this.subscribers.indexOf(s);this.subscribers.splice(a,1)}),this.publish=s=>{this.subscribers.forEach(a=>a(s))},this.addToast=s=>{this.publish(s),this.toasts=[...this.toasts,s]},this.create=s=>{var a;const{message:n,...i}=s,c=typeof s?.id=="number"||((a=s.id)==null?void 0:a.length)>0?s.id:Es++,r=this.toasts.find(u=>u.id===c),o=s.dismissible===void 0?!0:s.dismissible;return this.dismissedToasts.has(c)&&this.dismissedToasts.delete(c),r?this.toasts=this.toasts.map(u=>u.id===c?(this.publish({...u,...s,id:c,title:n}),{...u,...s,id:c,dismissible:o,title:n}):u):this.addToast({title:n,...i,dismissible:o,id:c}),c},this.dismiss=s=>(s?(this.dismissedToasts.add(s),requestAnimationFrame(()=>this.subscribers.forEach(a=>a({id:s,dismiss:!0})))):this.toasts.forEach(a=>{this.subscribers.forEach(n=>n({id:a.id,dismiss:!0}))}),s),this.message=(s,a)=>this.create({...a,message:s}),this.error=(s,a)=>this.create({...a,message:s,type:"error"}),this.success=(s,a)=>this.create({...a,type:"success",message:s}),this.info=(s,a)=>this.create({...a,type:"info",message:s}),this.warning=(s,a)=>this.create({...a,type:"warning",message:s}),this.loading=(s,a)=>this.create({...a,type:"loading",message:s}),this.promise=(s,a)=>{if(!a)return;let n;a.loading!==void 0&&(n=this.create({...a,promise:s,type:"loading",message:a.loading,description:typeof a.description!="function"?a.description:void 0}));const i=Promise.resolve(s instanceof Function?s():s);let c=n!==void 0,r;const o=i.then(async d=>{if(r=["resolve",d],_.isValidElement(d))c=!1,this.create({id:n,type:"default",message:d});else if(io(d)&&!d.ok){c=!1;const l=typeof a.error=="function"?await a.error(`HTTP error! status: ${d.status}`):a.error,g=typeof a.description=="function"?await a.description(`HTTP error! status: ${d.status}`):a.description,b=typeof l=="object"&&!_.isValidElement(l)?l:{message:l};this.create({id:n,type:"error",description:g,...b})}else if(d instanceof Error){c=!1;const l=typeof a.error=="function"?await a.error(d):a.error,g=typeof a.description=="function"?await a.description(d):a.description,b=typeof l=="object"&&!_.isValidElement(l)?l:{message:l};this.create({id:n,type:"error",description:g,...b})}else if(a.success!==void 0){c=!1;const l=typeof a.success=="function"?await a.success(d):a.success,g=typeof a.description=="function"?await a.description(d):a.description,b=typeof l=="object"&&!_.isValidElement(l)?l:{message:l};this.create({id:n,type:"success",description:g,...b})}}).catch(async d=>{if(r=["reject",d],a.error!==void 0){c=!1;const h=typeof a.error=="function"?await a.error(d):a.error,l=typeof a.description=="function"?await a.description(d):a.description,N=typeof h=="object"&&!_.isValidElement(h)?h:{message:h};this.create({id:n,type:"error",description:l,...N})}}).finally(()=>{c&&(this.dismiss(n),n=void 0),a.finally==null||a.finally.call(a)}),u=()=>new Promise((d,h)=>o.then(()=>r[0]==="reject"?h(r[1]):d(r[1])).catch(h));return typeof n!="string"&&typeof n!="number"?{unwrap:u}:Object.assign(n,{unwrap:u})},this.custom=(s,a)=>{const n=a?.id||Es++;return this.create({jsx:s(n),id:n,...a}),n},this.getActiveToasts=()=>this.toasts.filter(s=>!this.dismissedToasts.has(s.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Qe=new no,ro=(t,s)=>{const a=s?.id||Es++;return Qe.addToast({title:t,...s,id:a}),a},io=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",oo=ro,lo=()=>Qe.toasts,co=()=>Qe.getActiveToasts(),L=Object.assign(oo,{success:Qe.success,info:Qe.info,warning:Qe.warning,error:Qe.error,custom:Qe.custom,message:Qe.message,promise:Qe.promise,dismiss:Qe.dismiss,loading:Qe.loading},{getHistory:lo,getToasts:co});Yi("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Yt(t){return t.label!==void 0}const uo=3,mo="24px",ho="16px",Zs=4e3,po=356,fo=14,go=45,xo=200;function ut(...t){return t.filter(Boolean).join(" ")}function bo(t){const[s,a]=t.split("-"),n=[];return s&&n.push(s),a&&n.push(a),n}const yo=t=>{var s,a,n,i,c,r,o,u,d;const{invert:h,toast:l,unstyled:g,interacting:N,setHeights:b,visibleToasts:T,heights:C,index:k,toasts:D,expanded:E,removeToast:y,defaultRichColors:M,closeButton:J,style:B,cancelButtonStyle:w,actionButtonStyle:V,className:Z="",descriptionClassName:ae="",duration:ne,position:se,gap:we,expandByDefault:be,classNames:X,icons:W,closeButtonAriaLabel:pe="Close toast"}=t,[je,j]=_.useState(null),[m,R]=_.useState(null),[I,F]=_.useState(!1),[$,Y]=_.useState(!1),[H,z]=_.useState(!1),[de,ge]=_.useState(!1),[ue,me]=_.useState(!1),[Ae,te]=_.useState(0),[Pe,Re]=_.useState(0),Te=_.useRef(l.duration||ne||Zs),Oe=_.useRef(null),De=_.useRef(null),_e=k===0,bt=k+1<=T,Ie=l.type,Ee=l.dismissible!==!1,tt=l.className||"",yt=l.descriptionClassName||"",ye=_.useMemo(()=>C.findIndex(K=>K.toastId===l.id)||0,[C,l.id]),vt=_.useMemo(()=>{var K;return(K=l.closeButton)!=null?K:J},[l.closeButton,J]),pt=_.useMemo(()=>l.duration||ne||Zs,[l.duration,ne]),ct=_.useRef(0),st=_.useRef(0),dt=_.useRef(0),rt=_.useRef(null),[ft,Ft]=se.split("-"),O=_.useMemo(()=>C.reduce((K,ie,p)=>p>=ye?K:K+ie.height,0),[C,ye]),Ne=ao(),Le=l.invert||h,at=Ie==="loading";st.current=_.useMemo(()=>ye*we+O,[ye,O]),_.useEffect(()=>{Te.current=pt},[pt]),_.useEffect(()=>{F(!0)},[]),_.useEffect(()=>{const K=De.current;if(K){const ie=K.getBoundingClientRect().height;return Re(ie),b(p=>[{toastId:l.id,height:ie,position:l.position},...p]),()=>b(p=>p.filter(A=>A.toastId!==l.id))}},[b,l.id]),_.useLayoutEffect(()=>{if(!I)return;const K=De.current,ie=K.style.height;K.style.height="auto";const p=K.getBoundingClientRect().height;K.style.height=ie,Re(p),b(A=>A.find(f=>f.toastId===l.id)?A.map(f=>f.toastId===l.id?{...f,height:p}:f):[{toastId:l.id,height:p,position:l.position},...A])},[I,l.title,l.description,b,l.id,l.jsx,l.action,l.cancel]);const Ke=_.useCallback(()=>{Y(!0),te(st.current),b(K=>K.filter(ie=>ie.toastId!==l.id)),setTimeout(()=>{y(l)},xo)},[l,y,b,st]);_.useEffect(()=>{if(l.promise&&Ie==="loading"||l.duration===1/0||l.type==="loading")return;let K;return E||N||Ne?(()=>{if(dt.current<ct.current){const A=new Date().getTime()-ct.current;Te.current=Te.current-A}dt.current=new Date().getTime()})():(()=>{Te.current!==1/0&&(ct.current=new Date().getTime(),K=setTimeout(()=>{l.onAutoClose==null||l.onAutoClose.call(l,l),Ke()},Te.current))})(),()=>clearTimeout(K)},[E,N,l,Ie,Ne,Ke]),_.useEffect(()=>{l.delete&&(Ke(),l.onDismiss==null||l.onDismiss.call(l,l))},[Ke,l.delete]);function Xe(){var K;if(W?.loading){var ie;return _.createElement("div",{className:ut(X?.loader,l==null||(ie=l.classNames)==null?void 0:ie.loader,"sonner-loader"),"data-visible":Ie==="loading"},W.loading)}return _.createElement(Xi,{className:ut(X?.loader,l==null||(K=l.classNames)==null?void 0:K.loader),visible:Ie==="loading"})}const gt=l.icon||W?.[Ie]||Ki(Ie);var Ze,$e;return _.createElement("li",{tabIndex:0,ref:De,className:ut(Z,tt,X?.toast,l==null||(s=l.classNames)==null?void 0:s.toast,X?.default,X?.[Ie],l==null||(a=l.classNames)==null?void 0:a[Ie]),"data-sonner-toast":"","data-rich-colors":(Ze=l.richColors)!=null?Ze:M,"data-styled":!(l.jsx||l.unstyled||g),"data-mounted":I,"data-promise":!!l.promise,"data-swiped":ue,"data-removed":$,"data-visible":bt,"data-y-position":ft,"data-x-position":Ft,"data-index":k,"data-front":_e,"data-swiping":H,"data-dismissible":Ee,"data-type":Ie,"data-invert":Le,"data-swipe-out":de,"data-swipe-direction":m,"data-expanded":!!(E||be&&I),"data-testid":l.testId,style:{"--index":k,"--toasts-before":k,"--z-index":D.length-k,"--offset":`${$?Ae:st.current}px`,"--initial-height":be?"auto":`${Pe}px`,...B,...l.style},onDragEnd:()=>{z(!1),j(null),rt.current=null},onPointerDown:K=>{K.button!==2&&(at||!Ee||(Oe.current=new Date,te(st.current),K.target.setPointerCapture(K.pointerId),K.target.tagName!=="BUTTON"&&(z(!0),rt.current={x:K.clientX,y:K.clientY})))},onPointerUp:()=>{var K,ie,p;if(de||!Ee)return;rt.current=null;const A=Number(((K=De.current)==null?void 0:K.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),x=Number(((ie=De.current)==null?void 0:ie.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),f=new Date().getTime()-((p=Oe.current)==null?void 0:p.getTime()),S=je==="x"?A:x,U=Math.abs(S)/f;if(Math.abs(S)>=go||U>.11){te(st.current),l.onDismiss==null||l.onDismiss.call(l,l),R(je==="x"?A>0?"right":"left":x>0?"down":"up"),Ke(),ge(!0);return}else{var G,P;(G=De.current)==null||G.style.setProperty("--swipe-amount-x","0px"),(P=De.current)==null||P.style.setProperty("--swipe-amount-y","0px")}me(!1),z(!1),j(null)},onPointerMove:K=>{var ie,p,A;if(!rt.current||!Ee||((ie=window.getSelection())==null?void 0:ie.toString().length)>0)return;const f=K.clientY-rt.current.y,S=K.clientX-rt.current.x;var U;const G=(U=t.swipeDirections)!=null?U:bo(se);!je&&(Math.abs(S)>1||Math.abs(f)>1)&&j(Math.abs(S)>Math.abs(f)?"x":"y");let P={x:0,y:0};const ee=q=>1/(1.5+Math.abs(q)/20);if(je==="y"){if(G.includes("top")||G.includes("bottom"))if(G.includes("top")&&f<0||G.includes("bottom")&&f>0)P.y=f;else{const q=f*ee(f);P.y=Math.abs(q)<Math.abs(f)?q:f}}else if(je==="x"&&(G.includes("left")||G.includes("right")))if(G.includes("left")&&S<0||G.includes("right")&&S>0)P.x=S;else{const q=S*ee(S);P.x=Math.abs(q)<Math.abs(S)?q:S}(Math.abs(P.x)>0||Math.abs(P.y)>0)&&me(!0),(p=De.current)==null||p.style.setProperty("--swipe-amount-x",`${P.x}px`),(A=De.current)==null||A.style.setProperty("--swipe-amount-y",`${P.y}px`)}},vt&&!l.jsx&&Ie!=="loading"?_.createElement("button",{"aria-label":pe,"data-disabled":at,"data-close-button":!0,onClick:at||!Ee?()=>{}:()=>{Ke(),l.onDismiss==null||l.onDismiss.call(l,l)},className:ut(X?.closeButton,l==null||(n=l.classNames)==null?void 0:n.closeButton)},($e=W?.close)!=null?$e:so):null,(Ie||l.icon||l.promise)&&l.icon!==null&&(W?.[Ie]!==null||l.icon)?_.createElement("div",{"data-icon":"",className:ut(X?.icon,l==null||(i=l.classNames)==null?void 0:i.icon)},l.promise||l.type==="loading"&&!l.icon?l.icon||Xe():null,l.type!=="loading"?gt:null):null,_.createElement("div",{"data-content":"",className:ut(X?.content,l==null||(c=l.classNames)==null?void 0:c.content)},_.createElement("div",{"data-title":"",className:ut(X?.title,l==null||(r=l.classNames)==null?void 0:r.title)},l.jsx?l.jsx:typeof l.title=="function"?l.title():l.title),l.description?_.createElement("div",{"data-description":"",className:ut(ae,yt,X?.description,l==null||(o=l.classNames)==null?void 0:o.description)},typeof l.description=="function"?l.description():l.description):null),_.isValidElement(l.cancel)?l.cancel:l.cancel&&Yt(l.cancel)?_.createElement("button",{"data-button":!0,"data-cancel":!0,style:l.cancelButtonStyle||w,onClick:K=>{Yt(l.cancel)&&Ee&&(l.cancel.onClick==null||l.cancel.onClick.call(l.cancel,K),Ke())},className:ut(X?.cancelButton,l==null||(u=l.classNames)==null?void 0:u.cancelButton)},l.cancel.label):null,_.isValidElement(l.action)?l.action:l.action&&Yt(l.action)?_.createElement("button",{"data-button":!0,"data-action":!0,style:l.actionButtonStyle||V,onClick:K=>{Yt(l.action)&&(l.action.onClick==null||l.action.onClick.call(l.action,K),!K.defaultPrevented&&Ke())},className:ut(X?.actionButton,l==null||(d=l.classNames)==null?void 0:d.actionButton)},l.action.label):null)};function Qs(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function vo(t,s){const a={};return[t,s].forEach((n,i)=>{const c=i===1,r=c?"--mobile-offset":"--offset",o=c?ho:mo;function u(d){["top","right","bottom","left"].forEach(h=>{a[`${r}-${h}`]=typeof d=="number"?`${d}px`:d})}typeof n=="number"||typeof n=="string"?u(n):typeof n=="object"?["top","right","bottom","left"].forEach(d=>{n[d]===void 0?a[`${r}-${d}`]=o:a[`${r}-${d}`]=typeof n[d]=="number"?`${n[d]}px`:n[d]}):u(o)}),a}const wo=_.forwardRef(function(s,a){const{id:n,invert:i,position:c="bottom-right",hotkey:r=["altKey","KeyT"],expand:o,closeButton:u,className:d,offset:h,mobileOffset:l,theme:g="light",richColors:N,duration:b,style:T,visibleToasts:C=uo,toastOptions:k,dir:D=Qs(),gap:E=fo,icons:y,containerAriaLabel:M="Notifications"}=s,[J,B]=_.useState([]),w=_.useMemo(()=>n?J.filter(I=>I.toasterId===n):J.filter(I=>!I.toasterId),[J,n]),V=_.useMemo(()=>Array.from(new Set([c].concat(w.filter(I=>I.position).map(I=>I.position)))),[w,c]),[Z,ae]=_.useState([]),[ne,se]=_.useState(!1),[we,be]=_.useState(!1),[X,W]=_.useState(g!=="system"?g:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),pe=_.useRef(null),je=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),j=_.useRef(null),m=_.useRef(!1),R=_.useCallback(I=>{B(F=>{var $;return($=F.find(Y=>Y.id===I.id))!=null&&$.delete||Qe.dismiss(I.id),F.filter(({id:Y})=>Y!==I.id)})},[]);return _.useEffect(()=>Qe.subscribe(I=>{if(I.dismiss){requestAnimationFrame(()=>{B(F=>F.map($=>$.id===I.id?{...$,delete:!0}:$))});return}setTimeout(()=>{gr.flushSync(()=>{B(F=>{const $=F.findIndex(Y=>Y.id===I.id);return $!==-1?[...F.slice(0,$),{...F[$],...I},...F.slice($+1)]:[I,...F]})})})}),[J]),_.useEffect(()=>{if(g!=="system"){W(g);return}if(g==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?W("dark"):W("light")),typeof window>"u")return;const I=window.matchMedia("(prefers-color-scheme: dark)");try{I.addEventListener("change",({matches:F})=>{W(F?"dark":"light")})}catch{I.addListener(({matches:$})=>{try{W($?"dark":"light")}catch(Y){console.error(Y)}})}},[g]),_.useEffect(()=>{J.length<=1&&se(!1)},[J]),_.useEffect(()=>{const I=F=>{var $;if(r.every(z=>F[z]||F.code===z)){var H;se(!0),(H=pe.current)==null||H.focus()}F.code==="Escape"&&(document.activeElement===pe.current||($=pe.current)!=null&&$.contains(document.activeElement))&&se(!1)};return document.addEventListener("keydown",I),()=>document.removeEventListener("keydown",I)},[r]),_.useEffect(()=>{if(pe.current)return()=>{j.current&&(j.current.focus({preventScroll:!0}),j.current=null,m.current=!1)}},[pe.current]),_.createElement("section",{ref:a,"aria-label":`${M} ${je}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},V.map((I,F)=>{var $;const[Y,H]=I.split("-");return w.length?_.createElement("ol",{key:I,dir:D==="auto"?Qs():D,tabIndex:-1,ref:pe,className:d,"data-sonner-toaster":!0,"data-sonner-theme":X,"data-y-position":Y,"data-x-position":H,style:{"--front-toast-height":`${(($=Z[0])==null?void 0:$.height)||0}px`,"--width":`${po}px`,"--gap":`${E}px`,...T,...vo(h,l)},onBlur:z=>{m.current&&!z.currentTarget.contains(z.relatedTarget)&&(m.current=!1,j.current&&(j.current.focus({preventScroll:!0}),j.current=null))},onFocus:z=>{z.target instanceof HTMLElement&&z.target.dataset.dismissible==="false"||m.current||(m.current=!0,j.current=z.relatedTarget)},onMouseEnter:()=>se(!0),onMouseMove:()=>se(!0),onMouseLeave:()=>{we||se(!1)},onDragEnd:()=>se(!1),onPointerDown:z=>{z.target instanceof HTMLElement&&z.target.dataset.dismissible==="false"||be(!0)},onPointerUp:()=>be(!1)},w.filter(z=>!z.position&&F===0||z.position===I).map((z,de)=>{var ge,ue;return _.createElement(yo,{key:z.id,icons:y,index:de,toast:z,defaultRichColors:N,duration:(ge=k?.duration)!=null?ge:b,className:k?.className,descriptionClassName:k?.descriptionClassName,invert:i,visibleToasts:C,closeButton:(ue=k?.closeButton)!=null?ue:u,interacting:we,position:I,style:k?.style,unstyled:k?.unstyled,classNames:k?.classNames,cancelButtonStyle:k?.cancelButtonStyle,actionButtonStyle:k?.actionButtonStyle,closeButtonAriaLabel:k?.closeButtonAriaLabel,removeToast:R,toasts:w.filter(me=>me.position==z.position),heights:Z.filter(me=>me.position==z.position),setHeights:ae,expandByDefault:o,gap:E,expanded:ne,swipeDirections:s.swipeDirections})})):null}))});var Fs={};(function t(s,a,n,i){var c=!!(s.Worker&&s.Blob&&s.Promise&&s.OffscreenCanvas&&s.OffscreenCanvasRenderingContext2D&&s.HTMLCanvasElement&&s.HTMLCanvasElement.prototype.transferControlToOffscreen&&s.URL&&s.URL.createObjectURL),r=typeof Path2D=="function"&&typeof DOMMatrix=="function",o=(function(){if(!s.OffscreenCanvas)return!1;try{var j=new OffscreenCanvas(1,1),m=j.getContext("2d");m.fillRect(0,0,1,1);var R=j.transferToImageBitmap();m.createPattern(R,"no-repeat")}catch{return!1}return!0})();function u(){}function d(j){var m=a.exports.Promise,R=m!==void 0?m:s.Promise;return typeof R=="function"?new R(j):(j(u,u),null)}var h=(function(j,m){return{transform:function(R){if(j)return R;if(m.has(R))return m.get(R);var I=new OffscreenCanvas(R.width,R.height),F=I.getContext("2d");return F.drawImage(R,0,0),m.set(R,I),I},clear:function(){m.clear()}}})(o,new Map),l=(function(){var j=Math.floor(16.666666666666668),m,R,I={},F=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(m=function($){var Y=Math.random();return I[Y]=requestAnimationFrame(function H(z){F===z||F+j-1<z?(F=z,delete I[Y],$()):I[Y]=requestAnimationFrame(H)}),Y},R=function($){I[$]&&cancelAnimationFrame(I[$])}):(m=function($){return setTimeout($,j)},R=function($){return clearTimeout($)}),{frame:m,cancel:R}})(),g=(function(){var j,m,R={};function I(F){function $(Y,H){F.postMessage({options:Y||{},callback:H})}F.init=function(H){var z=H.transferControlToOffscreen();F.postMessage({canvas:z},[z])},F.fire=function(H,z,de){if(m)return $(H,null),m;var ge=Math.random().toString(36).slice(2);return m=d(function(ue){function me(Ae){Ae.data.callback===ge&&(delete R[ge],F.removeEventListener("message",me),m=null,h.clear(),de(),ue())}F.addEventListener("message",me),$(H,ge),R[ge]=me.bind(null,{data:{callback:ge}})}),m},F.reset=function(){F.postMessage({reset:!0});for(var H in R)R[H](),delete R[H]}}return function(){if(j)return j;if(!n&&c){var F=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{j=new Worker(URL.createObjectURL(new Blob([F])))}catch($){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",$),null}I(j)}return j}})(),N={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function b(j,m){return m?m(j):j}function T(j){return j!=null}function C(j,m,R){return b(j&&T(j[m])?j[m]:N[m],R)}function k(j){return j<0?0:Math.floor(j)}function D(j,m){return Math.floor(Math.random()*(m-j))+j}function E(j){return parseInt(j,16)}function y(j){return j.map(M)}function M(j){var m=String(j).replace(/[^0-9a-f]/gi,"");return m.length<6&&(m=m[0]+m[0]+m[1]+m[1]+m[2]+m[2]),{r:E(m.substring(0,2)),g:E(m.substring(2,4)),b:E(m.substring(4,6))}}function J(j){var m=C(j,"origin",Object);return m.x=C(m,"x",Number),m.y=C(m,"y",Number),m}function B(j){j.width=document.documentElement.clientWidth,j.height=document.documentElement.clientHeight}function w(j){var m=j.getBoundingClientRect();j.width=m.width,j.height=m.height}function V(j){var m=document.createElement("canvas");return m.style.position="fixed",m.style.top="0px",m.style.left="0px",m.style.pointerEvents="none",m.style.zIndex=j,m}function Z(j,m,R,I,F,$,Y,H,z){j.save(),j.translate(m,R),j.rotate($),j.scale(I,F),j.arc(0,0,1,Y,H,z),j.restore()}function ae(j){var m=j.angle*(Math.PI/180),R=j.spread*(Math.PI/180);return{x:j.x,y:j.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:j.startVelocity*.5+Math.random()*j.startVelocity,angle2D:-m+(.5*R-Math.random()*R),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:j.color,shape:j.shape,tick:0,totalTicks:j.ticks,decay:j.decay,drift:j.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:j.gravity*3,ovalScalar:.6,scalar:j.scalar,flat:j.flat}}function ne(j,m){m.x+=Math.cos(m.angle2D)*m.velocity+m.drift,m.y+=Math.sin(m.angle2D)*m.velocity+m.gravity,m.velocity*=m.decay,m.flat?(m.wobble=0,m.wobbleX=m.x+10*m.scalar,m.wobbleY=m.y+10*m.scalar,m.tiltSin=0,m.tiltCos=0,m.random=1):(m.wobble+=m.wobbleSpeed,m.wobbleX=m.x+10*m.scalar*Math.cos(m.wobble),m.wobbleY=m.y+10*m.scalar*Math.sin(m.wobble),m.tiltAngle+=.1,m.tiltSin=Math.sin(m.tiltAngle),m.tiltCos=Math.cos(m.tiltAngle),m.random=Math.random()+2);var R=m.tick++/m.totalTicks,I=m.x+m.random*m.tiltCos,F=m.y+m.random*m.tiltSin,$=m.wobbleX+m.random*m.tiltCos,Y=m.wobbleY+m.random*m.tiltSin;if(j.fillStyle="rgba("+m.color.r+", "+m.color.g+", "+m.color.b+", "+(1-R)+")",j.beginPath(),r&&m.shape.type==="path"&&typeof m.shape.path=="string"&&Array.isArray(m.shape.matrix))j.fill(W(m.shape.path,m.shape.matrix,m.x,m.y,Math.abs($-I)*.1,Math.abs(Y-F)*.1,Math.PI/10*m.wobble));else if(m.shape.type==="bitmap"){var H=Math.PI/10*m.wobble,z=Math.abs($-I)*.1,de=Math.abs(Y-F)*.1,ge=m.shape.bitmap.width*m.scalar,ue=m.shape.bitmap.height*m.scalar,me=new DOMMatrix([Math.cos(H)*z,Math.sin(H)*z,-Math.sin(H)*de,Math.cos(H)*de,m.x,m.y]);me.multiplySelf(new DOMMatrix(m.shape.matrix));var Ae=j.createPattern(h.transform(m.shape.bitmap),"no-repeat");Ae.setTransform(me),j.globalAlpha=1-R,j.fillStyle=Ae,j.fillRect(m.x-ge/2,m.y-ue/2,ge,ue),j.globalAlpha=1}else if(m.shape==="circle")j.ellipse?j.ellipse(m.x,m.y,Math.abs($-I)*m.ovalScalar,Math.abs(Y-F)*m.ovalScalar,Math.PI/10*m.wobble,0,2*Math.PI):Z(j,m.x,m.y,Math.abs($-I)*m.ovalScalar,Math.abs(Y-F)*m.ovalScalar,Math.PI/10*m.wobble,0,2*Math.PI);else if(m.shape==="star")for(var te=Math.PI/2*3,Pe=4*m.scalar,Re=8*m.scalar,Te=m.x,Oe=m.y,De=5,_e=Math.PI/De;De--;)Te=m.x+Math.cos(te)*Re,Oe=m.y+Math.sin(te)*Re,j.lineTo(Te,Oe),te+=_e,Te=m.x+Math.cos(te)*Pe,Oe=m.y+Math.sin(te)*Pe,j.lineTo(Te,Oe),te+=_e;else j.moveTo(Math.floor(m.x),Math.floor(m.y)),j.lineTo(Math.floor(m.wobbleX),Math.floor(F)),j.lineTo(Math.floor($),Math.floor(Y)),j.lineTo(Math.floor(I),Math.floor(m.wobbleY));return j.closePath(),j.fill(),m.tick<m.totalTicks}function se(j,m,R,I,F){var $=m.slice(),Y=j.getContext("2d"),H,z,de=d(function(ge){function ue(){H=z=null,Y.clearRect(0,0,I.width,I.height),h.clear(),F(),ge()}function me(){n&&!(I.width===i.width&&I.height===i.height)&&(I.width=j.width=i.width,I.height=j.height=i.height),!I.width&&!I.height&&(R(j),I.width=j.width,I.height=j.height),Y.clearRect(0,0,I.width,I.height),$=$.filter(function(Ae){return ne(Y,Ae)}),$.length?H=l.frame(me):ue()}H=l.frame(me),z=ue});return{addFettis:function(ge){return $=$.concat(ge),de},canvas:j,promise:de,reset:function(){H&&l.cancel(H),z&&z()}}}function we(j,m){var R=!j,I=!!C(m||{},"resize"),F=!1,$=C(m,"disableForReducedMotion",Boolean),Y=c&&!!C(m||{},"useWorker"),H=Y?g():null,z=R?B:w,de=j&&H?!!j.__confetti_initialized:!1,ge=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,ue;function me(te,Pe,Re){for(var Te=C(te,"particleCount",k),Oe=C(te,"angle",Number),De=C(te,"spread",Number),_e=C(te,"startVelocity",Number),bt=C(te,"decay",Number),Ie=C(te,"gravity",Number),Ee=C(te,"drift",Number),tt=C(te,"colors",y),yt=C(te,"ticks",Number),ye=C(te,"shapes"),vt=C(te,"scalar"),pt=!!C(te,"flat"),ct=J(te),st=Te,dt=[],rt=j.width*ct.x,ft=j.height*ct.y;st--;)dt.push(ae({x:rt,y:ft,angle:Oe,spread:De,startVelocity:_e,color:tt[st%tt.length],shape:ye[D(0,ye.length)],ticks:yt,decay:bt,gravity:Ie,drift:Ee,scalar:vt,flat:pt}));return ue?ue.addFettis(dt):(ue=se(j,dt,z,Pe,Re),ue.promise)}function Ae(te){var Pe=$||C(te,"disableForReducedMotion",Boolean),Re=C(te,"zIndex",Number);if(Pe&&ge)return d(function(_e){_e()});R&&ue?j=ue.canvas:R&&!j&&(j=V(Re),document.body.appendChild(j)),I&&!de&&z(j);var Te={width:j.width,height:j.height};H&&!de&&H.init(j),de=!0,H&&(j.__confetti_initialized=!0);function Oe(){if(H){var _e={getBoundingClientRect:function(){if(!R)return j.getBoundingClientRect()}};z(_e),H.postMessage({resize:{width:_e.width,height:_e.height}});return}Te.width=Te.height=null}function De(){ue=null,I&&(F=!1,s.removeEventListener("resize",Oe)),R&&j&&(document.body.contains(j)&&document.body.removeChild(j),j=null,de=!1)}return I&&!F&&(F=!0,s.addEventListener("resize",Oe,!1)),H?H.fire(te,Te,De):me(te,Te,De)}return Ae.reset=function(){H&&H.reset(),ue&&ue.reset()},Ae}var be;function X(){return be||(be=we(null,{useWorker:!0,resize:!0})),be}function W(j,m,R,I,F,$,Y){var H=new Path2D(j),z=new Path2D;z.addPath(H,new DOMMatrix(m));var de=new Path2D;return de.addPath(z,new DOMMatrix([Math.cos(Y)*F,Math.sin(Y)*F,-Math.sin(Y)*$,Math.cos(Y)*$,R,I])),de}function pe(j){if(!r)throw new Error("path confetti are not supported in this browser");var m,R;typeof j=="string"?m=j:(m=j.path,R=j.matrix);var I=new Path2D(m),F=document.createElement("canvas"),$=F.getContext("2d");if(!R){for(var Y=1e3,H=Y,z=Y,de=0,ge=0,ue,me,Ae=0;Ae<Y;Ae+=2)for(var te=0;te<Y;te+=2)$.isPointInPath(I,Ae,te,"nonzero")&&(H=Math.min(H,Ae),z=Math.min(z,te),de=Math.max(de,Ae),ge=Math.max(ge,te));ue=de-H,me=ge-z;var Pe=10,Re=Math.min(Pe/ue,Pe/me);R=[Re,0,0,Re,-Math.round(ue/2+H)*Re,-Math.round(me/2+z)*Re]}return{type:"path",path:m,matrix:R}}function je(j){var m,R=1,I="#000000",F='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof j=="string"?m=j:(m=j.text,R="scalar"in j?j.scalar:R,F="fontFamily"in j?j.fontFamily:F,I="color"in j?j.color:I);var $=10*R,Y=""+$+"px "+F,H=new OffscreenCanvas($,$),z=H.getContext("2d");z.font=Y;var de=z.measureText(m),ge=Math.ceil(de.actualBoundingBoxRight+de.actualBoundingBoxLeft),ue=Math.ceil(de.actualBoundingBoxAscent+de.actualBoundingBoxDescent),me=2,Ae=de.actualBoundingBoxLeft+me,te=de.actualBoundingBoxAscent+me;ge+=me+me,ue+=me+me,H=new OffscreenCanvas(ge,ue),z=H.getContext("2d"),z.font=Y,z.fillStyle=I,z.fillText(m,Ae,te);var Pe=1/R;return{type:"bitmap",bitmap:H.transferToImageBitmap(),matrix:[Pe,0,0,Pe,-ge*Pe/2,-ue*Pe/2]}}a.exports=function(){return X().apply(this,arguments)},a.exports.reset=function(){X().reset()},a.exports.create=we,a.exports.shapeFromPath=pe,a.exports.shapeFromText=je})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),Fs,!1);const Pt=Fs.exports;Fs.exports.create;const _s=[{id:"first_transaction",name:"Getting Started",description:"Add your first transaction",icon:"ðŸŽ¯",condition:t=>t.totalTransactions>=1},{id:"early_bird",name:"Early Bird",description:"Log in for the first time today",icon:"ðŸŒ…",condition:t=>t.dailyLogin===!0},{id:"ten_transactions",name:"Building Habits",description:"Log 10 transactions",icon:"ðŸ“Š",condition:t=>t.totalTransactions>=10},{id:"fifty_transactions",name:"Momentum Builder",description:"Log 50 transactions",icon:"âš¡",condition:t=>t.totalTransactions>=50},{id:"financial_guru",name:"Financial Guru",description:"Complete 100 transactions",icon:"ðŸ§™",condition:t=>t.totalTransactions>=100},{id:"three_day_streak",name:"Streak Starter",description:"Log in for 3 days in a row",icon:"ðŸ”¥",condition:t=>t.currentStreak>=3},{id:"consistent_tracker",name:"Consistent Tracker",description:"Log transactions for 7 days in a row",icon:"ðŸ“…",condition:t=>t.currentStreak>=7},{id:"habit_master",name:"Habit Master",description:"Maintain a 30-day streak",icon:"ðŸ…",condition:t=>t.currentStreak>=30},{id:"dedication_champion",name:"Dedication Champion",description:"Achieve a 100-day streak",icon:"ðŸ‘‘",condition:t=>t.currentStreak>=100},{id:"first_goal",name:"Goal Setter",description:"Create your first savings goal",icon:"ðŸŽ¯",condition:t=>t.totalGoals>=1},{id:"goal_achiever",name:"Goal Achiever",description:"Complete your first savings goal",icon:"ðŸ†",condition:t=>t.completedGoals>=1},{id:"triple_winner",name:"Triple Winner",description:"Complete 3 savings goals",icon:"ðŸŽ–ï¸",condition:t=>t.completedGoals>=3},{id:"goal_crusher",name:"Goal Crusher",description:"Complete 5 savings goals",icon:"ðŸ’Ž",condition:t=>t.completedGoals>=5},{id:"debt_aware",name:"Debt Aware",description:"Track your first debt",icon:"ðŸ“",condition:t=>t.totalDebts>=1},{id:"debt_settler",name:"Debt Settler",description:"Settle your first debt",icon:"âœ…",condition:t=>t.settledDebts>=1},{id:"debt_destroyer",name:"Debt Destroyer",description:"Settle 5 debts",icon:"ðŸ’ª",condition:t=>t.settledDebts>=5},{id:"debt_free_hero",name:"Debt-Free Hero",description:"Maintain zero pending debts",icon:"ðŸ¦¸",condition:t=>t.totalDebts>0&&t.settledDebts===t.totalDebts},{id:"first_saver",name:"First Saver",description:"Achieve 10%+ savings rate",icon:"ðŸŒ±",condition:t=>t.savingsRate>=.1},{id:"super_saver",name:"Super Saver",description:"Maintain a 20%+ savings rate",icon:"ðŸ’°",condition:t=>t.savingsRate>=.2},{id:"elite_saver",name:"Elite Saver",description:"Achieve 30%+ savings rate",icon:"ðŸ’¸",condition:t=>t.savingsRate>=.3},{id:"legendary_saver",name:"Legendary Saver",description:"Maintain 50%+ savings rate",icon:"ðŸ°",condition:t=>t.savingsRate>=.5},{id:"budget_conscious",name:"Budget Conscious",description:"Keep spending under 80% of income",icon:"ðŸ“Š",condition:t=>t.monthlySpendingRatio<=.8},{id:"budget_master",name:"Budget Master",description:"Keep spending under 70% of income",icon:"ðŸ‘‘",condition:t=>t.monthlySpendingRatio<=.7},{id:"frugal_champion",name:"Frugal Champion",description:"Keep spending under 50% of income",icon:"ðŸŒŸ",condition:t=>t.monthlySpendingRatio<=.5},{id:"stay_notified",name:"Stay Notified",description:"Enable notifications",icon:"ðŸ””",condition:t=>t.notificationsEnabled===!0},{id:"ai_curious",name:"AI Curious",description:"Chat with AI Guru for the first time",icon:"ðŸ¤–",condition:t=>t.aiInteractions>=1},{id:"ai_enthusiast",name:"AI Enthusiast",description:"Chat with AI Guru 10 times",icon:"ðŸ§ ",condition:t=>t.aiInteractions>=10},{id:"profile_complete",name:"Profile Complete",description:"Add your name and photo",icon:"ðŸ‘¤",condition:t=>t.profileComplete===!0},{id:"account_organizer",name:"Account Organizer",description:"Create 3 or more accounts",icon:"ðŸ¦",condition:t=>t.totalAccounts>=3}];function jo(t,s){const a=[];return _s.forEach(n=>{!s.includes(n.id)&&n.condition(t)&&a.push(n.id)}),a}function yn(t){return _s.find(s=>s.id===t)}function No(){return _s}function ko(t){const{expenses:s,goals:a,userName:n}=t,i=[],c=new Date,r=new Date(c.getTime()-10080*60*1e3),o=new Date(c.getTime()-720*60*60*1e3),u=s.filter(b=>new Date(b.date)>=r),d=s.filter(b=>{const T=new Date(b.date);return T>=o&&T<r}),h=b=>b.reduce((T,C)=>(T[C.category]=(T[C.category]||0)+C.amount,T),{}),l=h(u),g=h(d),N=Object.keys(g).reduce((b,T)=>(b[T]=g[T]/3,b),{});return Object.keys(l).forEach(b=>{const T=l[b],C=N[b]||0;if(C>500&&T>C*1.2){const k=Math.round((T-C)/C*100),D=a.find(E=>E.currentAmount<E.targetAmount);D?i.push(`${n}, you've spent ${k}% more on ${b} this week. This slows down your '${D.name}' goal. Consider tightening up your protocol!`):i.push(`${n}, your ${b} spending is up ${k}% this week. Watch out before it becomes a habit!`)}}),i}function So(t){return{id:`insight_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"insight",priority:"low",category:"insights",title:"Guruji Insight",message:t,timestamp:new Date,read:!1}}const Co={netflix:"Subscription",spotify:"Subscription",google:"Subscription",apple:"Subscription",icloud:"Subscription",youtube:"Subscription",disney:"Subscription",hotstar:"Subscription","prime video":"Subscription","prime membership":"Subscription",hulu:"Subscription",hbomax:"Subscription",chaisai:"Subscription","google play":"Subscription","google one":"Subscription","app store":"Subscription",jio:"Subscription",airtel:"Subscription",vodafone:"Subscription",idea:"Subscription",bsnl:"Subscription","vi ":"Subscription",broadband:"Subscription",isp:"Subscription","act fiber":"Subscription",hathway:"Subscription","internet bill":"Subscription",telecom:"Subscription",coffee:"Food & Dining",starbucks:"Food & Dining",cafe:"Food & Dining",restaurant:"Food & Dining",lunch:"Food & Dining",dinner:"Food & Dining",pizza:"Food & Dining",burger:"Food & Dining",mcdonalds:"Food & Dining",kfc:"Food & Dining",food:"Food & Dining",zomato:"Food & Dining",swiggy:"Food & Dining",beer:"Food & Dining",bar:"Food & Dining",uber:"Transportation",ola:"Transportation",cab:"Transportation",taxi:"Transportation",bus:"Transportation",train:"Transportation",metro:"Transportation",fuel:"Transportation",petrol:"Transportation",gas:"Transportation",parking:"Transportation",amazon:"Shopping",flipkart:"Shopping",clothes:"Shopping",zara:"Shopping",nike:"Shopping",shoes:"Shopping",mall:"Shopping",grocery:"Groceries",supermarket:"Groceries",vegetables:"Groceries",fruits:"Groceries",milk:"Groceries",electricity:"Bills & Utilities",water:"Bills & Utilities","gas bill":"Bills & Utilities",rent:"Bills & Utilities",maintenance:"Bills & Utilities",movie:"Entertainment",cinema:"Entertainment",game:"Entertainment",steam:"Entertainment",playstation:"Entertainment",xbox:"Entertainment",doctor:"Health & Wellbeing",medical:"Health & Wellbeing",pharmacy:"Health & Wellbeing",medicine:"Health & Wellbeing",gym:"Health & Wellbeing",fitness:"Health & Wellbeing",hospital:"Health & Wellbeing",transfer:"Transfer",payment:"Transfer","cc bill":"Transfer",internal:"Transfer"},Ds=t=>{const s=t.toLowerCase();for(const[a,n]of Object.entries(Co))if(s.includes(a)){const i=[];return s.includes("online")&&i.push("online"),s.includes("subscription")&&i.push("subscription"),{category:n,tags:i}}return null},Se={SETTINGS:"finbase_settings",EXPENSES:"finbase_expenses",INCOMES:"finbase_incomes",DEBTS:"finbase_debts",GOALS:"finbase_goals",ACCOUNTS:"finbase_accounts",INVESTMENTS:"finbase_investments",LIABILITIES:"finbase_liabilities",NOTIFICATIONS:"finbase_notifications",EMERGENCY_FUND:"finbase_emergency_fund",RECURRING:"finbase_recurring",AUTH:"finbase_auth"},vn=v.createContext(void 0),wn=()=>{const t=v.useContext(vn);if(!t)throw new Error("useFinance must be used within a FinanceProvider");return t},Ao=({children:t})=>{const[s]=v.useState("demo-user-001"),[a,n]=v.useState(!0),[i,c]=v.useState(!1),[r,o]=v.useState({theme:"system",currency:"INR",unlockedAchievements:[],name:"",photoURL:"",notificationsEnabled:!1,roundUpEnabled:!0,aiProvider:"openai"}),[u,d]=v.useState([]),[h,l]=v.useState([]),[g,N]=v.useState([]),[b,T]=v.useState([]),[C,k]=v.useState([]),[D,E]=v.useState([]),[y,M]=v.useState([]),[J,B]=v.useState([]),[w,V]=v.useState([]),[Z,ae]=v.useState(0),[ne,se]=v.useState("guest"),[we,be]=v.useState(null),[X,W]=v.useState(!1),[pe,je]=v.useState(""),j=[{mobile:"9447147230",pin:"2255",name:"tin2mon FinHub Node // 0x50.3",userId:"tin2mon-prod-001"}],m=p=>{const A=Array.isArray(p)?p:[p];V(x=>{const f=A.filter(U=>x.some(ee=>ee.id===U.id)?!1:!x.some(ee=>ee.type===U.type&&ee.message===U.message&&!ee.read&&new Date().getTime()-new Date(ee.timestamp).getTime()<1e3*60*60*24));return f.length===0?x:[...f,...x].sort((U,G)=>new Date(G.timestamp).getTime()-new Date(U.timestamp).getTime()).slice(0,100)})};v.useEffect(()=>{const p=()=>{const x=u.length+h.length+g.length,f=g.filter(ke=>ke.status==="settled").length,S=b.filter(ke=>ke.currentAmount>=ke.targetAmount).length,U=h.reduce((ke,Me)=>ke+Me.amount,0),G=u.reduce((ke,Me)=>ke+Me.amount,0),P=U>0?(U-G)/U:0,ee=U>0?G/U:0,q={totalTransactions:x,totalGoals:b.length,completedGoals:S,totalDebts:g.length,settledDebts:f,savingsRate:P,monthlySpendingRatio:ee,notificationsEnabled:r.notificationsEnabled,themeChanged:r.theme!=="system",aiInteractions:0,currentStreak:x>0?Math.min(x,3):0,dailyLogin:!0,profileComplete:r.name!==""&&r.photoURL!=="",totalAccounts:C.length},he=jo(q,r.unlockedAchievements);he.length>0&&(he.forEach(ke=>{const Me=yn(ke);if(Me){const fe={id:`notif_${ke}`,type:"achievement",priority:"low",category:"achievements",title:"Achievement Unlocked!",message:`${Me.icon} ${Me.name}`,timestamp:new Date,read:!1,achievementId:ke};m(fe),L.success(`Achievement Unlocked: ${Me.icon} ${Me.name}!`,{duration:5e3})}}),ue({unlockedAchievements:[...r.unlockedAchievements,...he]}));const ze=ko({expenses:u,goals:b,userName:r.name||"Friend"});if(ze.length>0){const ke=[];ze.forEach(Me=>{const fe=So(Me);fe.priority="low",fe.category="insights",ke.push(fe),L(fe.title,{description:fe.message,icon:"ðŸ§˜"})}),ke.length>0&&m(ke)}A()},A=()=>{const x=new Date;x.setHours(0,0,0,0);const f=C.reduce((P,ee)=>P+(ee.type==="bank"||ee.type==="cash"?ee.balance:0),0),S=b.reduce((P,ee)=>P+ee.currentAmount,0)+Z,U=Math.max(0,f-S),G=[];y.forEach(P=>{const ee=new Date(P.startDate),q=new Date(x.getFullYear(),x.getMonth(),ee.getDate());q<x&&q.setMonth(q.getMonth()+1),Math.ceil((q.getTime()-x.getTime())/(1e3*60*60*24))<=7&&G.push({name:P.name,amount:P.emiAmount,dueDate:q,type:"EMI"})}),J.forEach(P=>{if(P.type==="expense"){const ee=new Date(P.startDate);let q;if(P.frequency==="monthly")q=new Date(x.getFullYear(),x.getMonth(),ee.getDate()),q<x&&q.setMonth(q.getMonth()+1);else if(P.frequency==="weekly"){const ze=(ee.getDay()-x.getDay()+7)%7;q=new Date(x.getTime()+ze*24*60*60*1e3),q<x&&q.setDate(q.getDate()+7)}else return;Math.ceil((q.getTime()-x.getTime())/(1e3*60*60*24))<=7&&G.push({name:P.description||"Subscription",amount:P.amount,dueDate:q,type:"Bill"})}}),G.forEach(P=>{const ee=U<P.amount,q=Math.ceil((P.dueDate.getTime()-x.getTime())/(1e3*60*60*24));if(ee&&q<=3){const he={id:`smart_breach_${P.name}_${P.dueDate.toISOString().split("T")[0]}`,type:"alert",priority:"high",category:"reminders",title:"Liquid Stability Warning",message:`Critical: Your '${P.name}' due on ${P.dueDate.toLocaleDateString()} (â‚¹${P.amount}) exceeds current liquid cash (â‚¹${U}). Clear assets or increase bank balance immediately.`,timestamp:new Date,read:!1};m(he),L.error(he.title,{description:he.message,duration:1e4})}else if(q<=1){const he={id:`reminder_${P.name}_${P.dueDate.toISOString().split("T")[0]}`,type:"reminder",priority:"medium",category:"reminders",title:`${P.type} Due Soon`,message:`Reminder: '${P.name}' payment of â‚¹${P.amount} is due tomorrow (${P.dueDate.toLocaleDateString()}).`,timestamp:new Date,read:!1};m(he),L.info(he.title,{description:he.message})}})};p()},[u.length,h.length,g.length,b.length,r.notificationsEnabled,r.theme]),v.useEffect(()=>{R()},[]),v.useEffect(()=>localStorage.setItem(Se.SETTINGS,JSON.stringify(r)),[r]),v.useEffect(()=>localStorage.setItem(Se.EXPENSES,JSON.stringify(u)),[u]),v.useEffect(()=>localStorage.setItem(Se.INCOMES,JSON.stringify(h)),[h]),v.useEffect(()=>localStorage.setItem(Se.DEBTS,JSON.stringify(g)),[g]),v.useEffect(()=>localStorage.setItem(Se.GOALS,JSON.stringify(b)),[b]),v.useEffect(()=>localStorage.setItem(Se.ACCOUNTS,JSON.stringify(C)),[C]),v.useEffect(()=>localStorage.setItem(Se.INVESTMENTS,JSON.stringify(D)),[D]),v.useEffect(()=>localStorage.setItem(Se.LIABILITIES,JSON.stringify(y)),[y]),v.useEffect(()=>localStorage.setItem(Se.RECURRING,JSON.stringify(J)),[J]),v.useEffect(()=>localStorage.setItem(Se.NOTIFICATIONS,JSON.stringify(w)),[w]),v.useEffect(()=>localStorage.setItem(Se.EMERGENCY_FUND,JSON.stringify(Z)),[Z]);const R=async()=>{n(!0);try{const A=localStorage.getItem(Se.SETTINGS);if(A){const ke=JSON.parse(A);o(ke),Y(ke.theme)}const x=localStorage.getItem(Se.EXPENSES);x&&d(JSON.parse(x));const f=localStorage.getItem(Se.INCOMES);f&&l(JSON.parse(f));const S=localStorage.getItem(Se.DEBTS);S&&N(JSON.parse(S));const U=localStorage.getItem(Se.GOALS);U&&T(JSON.parse(U));const G=localStorage.getItem(Se.ACCOUNTS);G&&k(JSON.parse(G));const P=localStorage.getItem(Se.INVESTMENTS);P&&E(JSON.parse(P));const ee=localStorage.getItem(Se.LIABILITIES);ee&&M(JSON.parse(ee));const q=localStorage.getItem(Se.NOTIFICATIONS);if(q){const Me=JSON.parse(q).filter((fe,Be,mt)=>mt.findIndex(ls=>ls.id===fe.id||ls.message===fe.message&&ls.type===fe.type)===Be);V(Me.slice(0,100))}const he=localStorage.getItem(Se.EMERGENCY_FUND);he&&ae(JSON.parse(he));const ze=localStorage.getItem(Se.RECURRING);ze&&B(JSON.parse(ze))}catch(A){console.error("Error loading specific local data:",A)}await F(),localStorage.getItem("finbase_subscription_migration_v1")||(I(),localStorage.setItem("finbase_subscription_migration_v1","true")),n(!1)},I=()=>{d(p=>{let A=!1;const x=p.map(f=>{if(["other","bills & utilities","entertainment","",void 0].includes(f.category?.toLowerCase())){const U=Ds(f.description);if(U&&U.category==="Subscription"&&f.category!=="Subscription")return A=!0,{...f,category:"Subscription"}}return f});return A&&L.info("Intelligence protocol active: Categorized existing service providers as Subscriptions."),x})},F=async()=>{try{try{await re.processRecurring(s)}catch(q){console.error("Skip recurring process",q)}const[p,A,x,f,S,U,G,P,ee]=await Promise.all([re.getSettings(s).catch(()=>({success:!1,settings:void 0})),re.getAccounts(s).catch(()=>({success:!1,accounts:[]})),re.getExpenses(s).catch(()=>({success:!1,expenses:[]})),re.getIncomes(s).catch(()=>({success:!1,incomes:[]})),re.getDebts(s).catch(()=>({success:!1,debts:[]})),re.getGoals(s).catch(()=>({success:!1,goals:[]})),re.getLiabilities(s).catch(()=>({success:!1,liabilities:[]})),re.getInvestments(s).catch(()=>({success:!1,investments:[]})),re.getRecurring(s).catch(()=>({success:!1,recurring:[]}))]);p.success&&p.settings&&(o(q=>({...q,...p.settings,aiProvider:p.settings.aiProvider||q.aiProvider,apiKeys:{...q.apiKeys,...p.settings.apiKeys}})),Y(p.settings.theme)),A.success&&k(A.accounts||[]),x.success&&d(x.expenses||[]),f.success&&l(f.incomes||[]),S.success&&N(S.debts||[]),U.success&&T(U.goals||[]),G.success&&M(G.liabilities||[]),P.success&&E(P.investments||[]),ee.success&&B(ee.recurring||[]),L.success("Sync complete")}catch(p){console.error("API Sync failed, using local data",p)}},$=async()=>{c(!0),await F(),c(!1)},Y=p=>{if(p==="system"){const A=window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.classList.toggle("dark",A)}else document.documentElement.classList.toggle("dark",p==="dark")},H=async p=>{je(p);const A=j.some(x=>x.mobile===p)||localStorage.getItem(`finbase_user_${p}`)!==null;return W(!0),A},z=async p=>{se("authenticating"),await new Promise(f=>setTimeout(f,2e3));const A=j.find(f=>f.mobile===pe&&f.pin===p);let x=null;if(A)x={id:A.userId,mobile:A.mobile,name:A.name};else{const f=localStorage.getItem(`finbase_user_${pe}`);if(f){const S=JSON.parse(f);S.pin===p&&(x={id:S.userId,mobile:S.mobile,name:S.name})}}return x?(be(x),localStorage.setItem(Se.AUTH,JSON.stringify(x)),se("authenticated"),W(!1),!0):(se("guest"),!1)},de=async(p,A,x)=>{se("authenticating"),await new Promise(U=>setTimeout(U,2e3));const f={id:`user_${Date.now()}`,mobile:p,name:x,pin:A};localStorage.setItem(`finbase_user_${p}`,JSON.stringify(f));const S={id:f.id,mobile:f.mobile,name:f.name};return be(S),localStorage.setItem(Se.AUTH,JSON.stringify(S)),se("authenticated"),W(!1),!0},ge=()=>{be(null),se("guest"),W(!1),je(""),localStorage.removeItem(Se.AUTH)};v.useEffect(()=>{const p=localStorage.getItem(Se.AUTH);p&&(be(JSON.parse(p)),se("authenticated"))},[]);const ue=async p=>{const A={...r,...p};o(A),p.theme&&Y(p.theme);try{const x=await re.updateSettings(s,p);if(x.success)o(f=>({...f,...x.settings,aiProvider:x.settings.aiProvider||f.aiProvider,apiKeys:{...f.apiKeys,...x.settings.apiKeys}}));else throw new Error(x.error)}catch(x){console.error("Failed to sync settings",x),L.error("Settings saved locally only")}},me=async p=>{try{const A=C.reduce((q,he)=>q+(he.type!=="credit_card"?he.balance:0),0),x=b.reduce((q,he)=>q+he.currentAmount,0)+Z,f=y.reduce((q,he)=>q+he.emiAmount,0),S=Math.max(0,A-x-f);let U=p.amount;if(U>S){const q=U-S;console.warn(`âš ï¸ Leakage Detected! Deficit: ${q}. Initiating Shadow Wallet Protocol.`);let he=q;const ze=[];b.forEach(fe=>{const Be=fe.type||"growth";let mt=1;Be==="stability"&&(mt=2),Be==="protection"&&(mt=3),fe.currentAmount>0&&ze.push({id:fe.id,type:"goal",currentAmount:fe.currentAmount,priority:mt,name:fe.name})}),Z>0&&ze.push({id:"emergency-fund",type:"emergency",currentAmount:Z,priority:3,name:"Emergency Fund"}),ze.sort((fe,Be)=>fe.priority-Be.priority);const ke=[],Me=[];for(const fe of ze){if(he<=0)break;const Be=Math.min(fe.currentAmount,he);if(he-=Be,fe.type==="goal"){const mt=fe.currentAmount-Be;ke.push(Ee(fe.id,{currentAmount:mt,status:"leaking"})),Me.push({id:`leak_${fe.id}_${new Date().toISOString().split("T")[0]}`,type:"alert",priority:"medium",category:"transactions",title:"Shadow Wallet Leakage",message:`â‚¹${Be} spent reduced your '${fe.name}' reserve.`,timestamp:new Date,read:!1})}else fe.type==="emergency"&&(ke.push(Promise.resolve(ae(mt=>mt-Be))),Me.push({id:`leak_emergency_${new Date().toISOString().split("T")[0]}`,type:"alert",priority:"medium",category:"transactions",title:"Emergency Fund Alert",message:`Warning: â‚¹${Be} withdrawn from Emergency Fund to cover spending.`,timestamp:new Date,read:!1}))}await Promise.all(ke),Me.length>0&&(m(Me),Me.forEach(fe=>L.error(fe.title,{description:fe.message})))}const G=C.find(q=>q.id===p.accountId);let P={...p};if(G?.type==="credit_card"){const q=G.serviceChargePercentage||0;if(q>0){const Be=p.amount*q/100;P.serviceChargeAmount=Be,console.log(`Credit Service Charge: ${Be}`)}const he=G.creditLimit||0,ze=G.safeLimitPercentage||30,ke=he*ze/100,fe=Math.abs(G.balance)+p.amount;if(fe>ke&&he>0)if(p.isIncomeGenerating)L.info("Strategic Credit Utilization",{description:"Limit exceeded, but marked as income-generating. Proceed with caution."});else{L.warning("High Interest Risk Detected",{description:`This transaction puts your CC usage at ${(fe/he*100).toFixed(1)}%, exceeding your ${ze}% safe limit with no income-justification.`,duration:6e3});const Be={id:`cc_limit_${G.id}_${new Date().toISOString().split("T")[0]}`,type:"alert",priority:"medium",category:"transactions",title:"Credit Stability Breach",message:`Card '${G.name}' usage protocol exceeded ${ze}% threshold. Avoid non-essential outflow.`,timestamp:new Date,read:!1};m(Be)}}if(!P.category||P.category==="Other"){const q=Ds(P.description);q&&q.category==="Subscription"&&(P.category="Subscription",P.tags=Array.from(new Set([...P.tags||[],"auto-detected"])))}const ee=await re.createExpense(s,P);if(ee.success){if(d(q=>[...q,ee.expense]),G){const q=p.amount+(P.serviceChargeAmount||0),he=G.type==="credit_card"?G.balance+q:G.balance-q;await ye(G.id,{balance:he})}if(p.isRecurring){const q={type:"expense",description:p.description,amount:p.amount,category:p.category,accountId:p.accountId,frequency:p.frequency||"monthly",startDate:p.startDate||p.date,endDate:p.endDate,tags:p.tags};await re.createRecurring(s,q),L.success("Recurring expense created!")}else L.success("Expense added!")}}catch(A){console.error("Create expense failed",A);const x={id:`temp_${Date.now()}`,...p,createdAt:new Date().toISOString()};d(f=>[...f,x]),L.warning("Added in offline mode")}},Ae=async(p,A)=>{try{const x=await re.updateExpense(s,p,A);if(x.success){const f=u.find(S=>S.id===p);if(f){const S=C.find(P=>P.id===f.accountId);if(S){const P=f.amount+(f.serviceChargeAmount||0),ee=S.type==="credit_card"?S.balance-P:S.balance+P;await ye(S.id,{balance:ee})}const U=x.expense,G=C.find(P=>P.id===U.accountId);if(G){const P=U.amount+(U.serviceChargeAmount||0),ee=G.type==="credit_card"?G.balance+P:G.balance-P;await ye(G.id,{balance:ee})}}d(S=>S.map(U=>U.id===p?x.expense:U)),L.success("Expense updated")}}catch{d(f=>f.map(S=>S.id===p?{...S,...A}:S)),L.warning("Updated in offline mode")}},te=async p=>{try{if((await re.deleteExpense(s,p)).success){const x=u.find(f=>f.id===p);if(x){const f=C.find(S=>S.id===x.accountId);if(f){const S=x.amount+(x.serviceChargeAmount||0),U=f.type==="credit_card"?f.balance-S:f.balance+S;await ye(f.id,{balance:U})}}d(f=>f.filter(S=>S.id!==p)),L.success("Expense deleted")}}catch{d(x=>x.filter(f=>f.id!==p)),L.warning("Deleted in offline mode")}},Pe=async p=>{try{const A=await re.createIncome(s,p);if(A.success){l(f=>[...f,A.income]);const x=C.find(f=>f.id===p.accountId);if(x){const f=x.type==="credit_card"?x.balance-p.amount:x.balance+p.amount;await ye(x.id,{balance:f})}if(p.isRecurring){const f={type:"income",source:p.source,amount:p.amount,accountId:p.accountId,frequency:p.frequency||"monthly",startDate:p.startDate||p.date,endDate:p.endDate,tags:p.tags};await re.createRecurring(s,f),L.success("Recurring income created!")}else L.success("Income added!")}}catch{const x={id:`temp_${Date.now()}`,...p,createdAt:new Date().toISOString()};l(f=>[...f,x]),L.warning("Added in offline mode")}},Re=async(p,A)=>{try{const x=await re.updateIncome(s,p,A);if(x.success){const f=h.find(S=>S.id===p);if(f){const S=C.find(P=>P.id===f.accountId);if(S){const P=S.type==="credit_card"?S.balance+f.amount:S.balance-f.amount;await ye(S.id,{balance:P})}const U=x.income,G=C.find(P=>P.id===U.accountId);if(G){const P=G.type==="credit_card"?G.balance-U.amount:G.balance+U.amount;await ye(G.id,{balance:P})}}l(S=>S.map(U=>U.id===p?x.income:U)),L.success("Income updated")}}catch{l(f=>f.map(S=>S.id===p?{...S,...A}:S)),L.warning("Updated in offline mode")}},Te=async p=>{try{if((await re.deleteIncome(s,p)).success){const x=h.find(f=>f.id===p);if(x){const f=C.find(S=>S.id===x.accountId);if(f){const S=f.type==="credit_card"?f.balance+x.amount:f.balance-x.amount;await ye(f.id,{balance:S})}}l(f=>f.filter(S=>S.id!==p)),L.success("Income deleted")}}catch{l(x=>x.filter(f=>f.id!==p)),L.warning("Deleted in offline mode")}},Oe=async p=>{try{const A=await re.createDebt(s,p);if(A.success){N(f=>[...f,A.debt]);const x=C.find(f=>f.id===p.accountId);if(x){const f=p.type==="borrowed"?p.amount:-p.amount,S=x.type==="credit_card"?x.balance-f:x.balance+f;await ye(x.id,{balance:S})}L.success("Debt created")}}catch{const x={id:`temp_${Date.now()}`,...p,status:"pending",createdAt:new Date().toISOString()};N(f=>[...f,x]),L.warning("Added in offline mode")}},De=async(p,A)=>{try{const x=await re.updateDebt(s,p,A);if(x.success){const f=g.find(S=>S.id===p);if(f){const S=C.find(P=>P.id===f.accountId);if(S){const P=f.type==="borrowed"?-f.amount:f.amount,ee=S.type==="credit_card"?S.balance-P:S.balance+P;await ye(S.id,{balance:ee})}const U=x.debt,G=C.find(P=>P.id===U.accountId);if(G){const P=U.type==="borrowed"?U.amount:-U.amount,ee=G.type==="credit_card"?G.balance-P:G.balance+P;await ye(G.id,{balance:ee})}}N(S=>S.map(U=>U.id===p?x.debt:U)),L.success("Debt updated")}}catch{N(f=>f.map(S=>S.id===p?{...S,...A}:S)),L.warning("Updated in offline mode")}},_e=async p=>{try{if((await re.deleteDebt(s,p)).success){const x=g.find(f=>f.id===p);if(x){const f=C.find(S=>S.id===x.accountId);if(f){const S=x.type==="borrowed"?-x.amount:x.amount,U=f.type==="credit_card"?f.balance-S:f.balance+S;await ye(f.id,{balance:U})}}N(f=>f.filter(S=>S.id!==p)),L.success("Debt deleted")}}catch{N(x=>x.filter(f=>f.id!==p)),L.warning("Deleted in offline mode")}},bt=async p=>{try{const A=await re.updateDebt(s,p,{status:"settled"});if(A.success){const x=g.find(f=>f.id===p);if(x&&x.status!=="settled"){const f=C.find(S=>S.id===x.accountId);if(f){const S=x.type==="borrowed"?-x.amount:x.amount,U=f.type==="credit_card"?f.balance-S:f.balance+S;await ye(f.id,{balance:U});const G={description:`Debt Settlement: ${x.personName}`,amount:x.amount,category:"Transfer",date:new Date().toISOString().split("T")[0],tags:["debt-settlement"],accountId:x.accountId};if(x.type==="borrowed"){const P=await re.createExpense(s,G);P.success&&d(ee=>[...ee,P.expense])}else{const P=await re.createIncome(s,G);P.success&&l(ee=>[...ee,P.income])}}}N(f=>f.map(S=>S.id===p?A.debt:S)),L.success("ðŸŽ‰ Debt settled! Great job!"),Pt({particleCount:150,spread:100,origin:{y:.6}})}}catch{N(x=>x.map(f=>f.id===p?{...f,status:"settled"}:f)),L.warning("Marked as settled locally")}},Ie=async p=>{try{const A=await re.createGoal(s,p);A.success&&(T(x=>[...x,A.goal]),L.success("Goal created"))}catch{const x={id:`temp_${Date.now()}`,...p,createdAt:new Date().toISOString()};T(f=>[...f,x]),L.warning("Created in offline mode")}},Ee=async(p,A)=>{try{const x=await re.updateGoal(s,p,A);x.success&&(T(f=>f.map(S=>S.id===p?x.goal:S)),x.goal.currentAmount>=x.goal.targetAmount?(L.success(`ðŸŽ‰ Goal "${x.goal.name}" completed!`),Pt({particleCount:200,spread:120,origin:{y:.5}})):L.success("Goal updated"))}catch{T(f=>f.map(S=>S.id===p?{...S,...A}:S)),L.warning("Updated locally")}},tt=async p=>{try{(await re.deleteGoal(s,p)).success&&(T(x=>x.filter(f=>f.id!==p)),L.success("Goal deleted"))}catch{T(x=>x.filter(f=>f.id!==p)),L.warning("Deleted locally")}},yt=async p=>{try{const A=await re.createAccount(s,p);A.success&&(k(x=>[...x,A.account]),L.success("Account created"))}catch{const x={id:`temp_${Date.now()}`,...p,createdAt:new Date().toISOString()};k(f=>[...f,x]),L.warning("Created locally")}},ye=async(p,A)=>{try{const x=await re.updateAccount(s,p,A);x.success&&(k(f=>f.map(S=>S.id===p?x.account:S)),L.success("Account updated"))}catch{k(f=>f.map(S=>S.id===p?{...S,...A}:S)),L.warning("Updated locally")}},vt=async p=>{try{(await re.deleteAccount(s,p)).success&&(k(x=>x.filter(f=>f.id!==p)),L.success("Account deleted"))}catch{k(x=>x.filter(f=>f.id!==p)),L.warning("Deleted locally")}},pt=async p=>{try{const A=await re.createLiability(s,p);A.success&&(M(x=>[...x,A.liability]),L.success("Liability created"))}catch{const x={id:`temp_${Date.now()}`,...p,principal:Number(p.principal),outstanding:Number(p.outstanding),interestRate:Number(p.interestRate),emiAmount:Number(p.emiAmount),tenure:Number(p.tenure),createdAt:new Date().toISOString()};M(f=>[...f,x]),L.warning("Created locally")}},ct=async(p,A)=>{try{const x=await re.updateLiability(s,p,A);x.success&&(M(f=>f.map(S=>S.id===p?x.liability:S)),L.success("Liability updated"))}catch{M(f=>f.map(S=>S.id===p?{...S,...A}:S)),L.warning("Updated locally")}},st=async p=>{try{(await re.deleteLiability(s,p)).success&&(M(x=>x.filter(f=>f.id!==p)),L.success("Liability deleted"))}catch{M(x=>x.filter(f=>f.id!==p)),L.warning("Deleted locally")}},dt=async(p,A)=>{try{const x=await re.createInvestment(s,p);if(x.success){if(E(f=>[...f,x.investment]),A&&A!=="none"){const f=C.find(S=>S.id===A);if(f){const S=p.buyPrice*p.quantity;await ye(A,{balance:f.balance-S});const U={description:`Asset Purchase: ${p.symbol} (${p.quantity} units)`,amount:S,category:"Transfer",date:p.purchaseDate||new Date().toISOString().split("T")[0],tags:["investment","principal",p.symbol],accountId:A},G=await re.createExpense(s,U);G.success&&d(P=>[...P,G.expense])}}L.success("Investment created")}}catch{const f={id:`temp_${Date.now()}`,...p,createdAt:new Date().toISOString()};E(S=>[...S,f]),L.warning("Created locally")}},rt=async(p,A)=>{try{const x=await re.updateInvestment(s,p,A);x.success&&(E(f=>f.map(S=>S.id===p?x.investment:S)),L.success("Investment updated"))}catch{E(f=>f.map(S=>S.id===p?{...S,...A}:S)),L.warning("Updated locally")}},ft=async p=>{try{(await re.deleteInvestment(s,p)).success&&(E(x=>x.filter(f=>f.id!==p)),L.success("Investment deleted"))}catch{E(x=>x.filter(f=>f.id!==p)),L.warning("Deleted locally")}},[Ft,O]=v.useState(!1),[Ne,Le]=v.useState("goal"),at=p=>{Le(p),O(!0)},Ke=()=>{O(!1)},Xe=async p=>{const A=C.find(x=>x.id===p.accountId);if(!A){L.error("Account not found");return}if(A.balance<p.amount){L.error(`Insufficient funds in ${A.name}`);return}if(await ye(p.accountId,{balance:A.balance-p.amount}),p.destinationType==="goal"){const x=b.find(f=>f.id===p.destinationId);x&&await Ee(p.destinationId,{currentAmount:x.currentAmount+p.amount})}else ae(x=>x+p.amount);L.success(`Successfully allocated ${ht[r.currency]}${p.amount.toLocaleString()} from ${A.name}!`,{description:`${p.destinationType==="goal"?"Goal":"Emergency Fund"} balance updated`}),Pt({particleCount:100,spread:70,origin:{y:.6}})},gt=async(p,A)=>{const x=C.find(f=>f.id===p);if(x){if(x.balance<A)throw L.error(`Insufficient funds in ${x.name}`),new Error("Insufficient funds");await ye(p,{balance:x.balance-A})}},Ze=async(p,A,x)=>{const f=C.find(U=>U.id===p),S=C.find(U=>U.id===A);if(!f||!S){L.error("Source or destination account not found");return}if(f.balance<x){L.error(`Insufficient funds in ${f.name}`);return}try{await ye(p,{balance:f.balance-x});const U=S.type==="credit_card"?-x:x;await ye(A,{balance:S.balance+U});const G={description:`Migration: ${f.name} â†’ ${S.name}`,amount:x,category:"Transfer",date:new Date().toISOString().split("T")[0],tags:["internal","migration"],accountId:p},P=await re.createExpense(s,G);P.success&&d(ee=>[...ee,P.expense]),L.success(`Transferred ${ht[r.currency]}${x.toLocaleString()}!`,{description:`From ${f.name} to ${S.name}`}),Pt({particleCount:50,spread:60,origin:{y:.7}})}catch(U){console.error("Transfer failed",U),L.error("Capital migration protocol failed")}},$e=async p=>{try{const A=await re.createRecurring(s,p);A.success&&(B(x=>[...x,A.recurring]),L.success("Recurring transaction created"))}catch(A){console.error("Error creating recurring transaction:",A);const x={id:`temp_${Date.now()}`,...p,createdAt:new Date().toISOString()};B(f=>[...f,x]),L.warning("Created locally")}},K=async p=>{try{(await re.deleteRecurring(s,p)).success&&(B(x=>x.filter(f=>f.id!==p)),L.success("Recurring transaction deleted"))}catch(A){console.error("Error deleting recurring transaction:",A),B(x=>x.filter(f=>f.id!==p)),L.warning("Deleted locally")}},ie=async()=>{try{const p=await re.processRecurring(s);p.success&&(L.success(`Processed ${p.count} transactions`),await F())}catch(p){console.error("Error processing recurring transactions:",p),L.error("Failed to process recurring transactions")}};return e.jsx(vn.Provider,{value:{userId:s,settings:r,currency:r.currency,expenses:u,incomes:h,debts:g,goals:b,accounts:C,investments:D,liabilities:y,recurringTransactions:J,notifications:w,emergencyFundAmount:Z,isLoading:a,isRefreshing:i,isFundAllocationOpen:Ft,fundAllocationType:Ne,authStatus:ne,currentUser:we,isAwaitingPin:X,refreshData:$,updateSettings:ue,checkIdentity:H,login:z,signup:de,logout:ge,createExpense:me,updateExpense:Ae,deleteExpense:te,createIncome:Pe,updateIncome:Re,deleteIncome:Te,createDebt:Oe,updateDebt:De,deleteDebt:_e,settleDebt:bt,createGoal:Ie,updateGoal:Ee,deleteGoal:tt,createAccount:yt,updateAccount:ye,deleteAccount:vt,createLiability:pt,updateLiability:ct,deleteLiability:st,createInvestment:dt,updateInvestment:rt,deleteInvestment:ft,createRecurringTransaction:$e,deleteRecurringTransaction:K,processRecurringTransactions:ie,setEmergencyFundAmount:ae,setNotifications:V,applyTheme:Y,openFundAllocation:at,closeFundAllocation:Ke,performFundAllocation:Xe,deductFromAccount:gt,transferFunds:Ze},children:t})};function xe(t,s="USD",a=!1){const n=typeof t=="string"?parseFloat(t.replace(/,/g,"")):t;if(isNaN(n))return"";const i=s==="INR"?"en-IN":"en-US",c={style:"currency",currency:s,notation:a?"compact":"standard",maximumFractionDigits:a?1:2};try{return new Intl.NumberFormat(i,c).format(n)}catch{return new Intl.NumberFormat(i,{...c,style:"decimal"}).format(n)}}function $s(t,s="en-IN"){const a=typeof t=="string"?parseFloat(t.replace(/,/g,"")):t;return isNaN(a)?"":new Intl.NumberFormat(s).format(a)}const ms=$s;function To(t){return t===""||t==="-"?!0:/^-?\d*\.?\d*$/.test(t)}function ea(t){return t.replace(/,/g,"")}function Ud(t){if(t<=0)return"0 months";const s=Math.floor(t/12),a=t%12,n=[];return s>0&&n.push(`${s} ${s===1?"year":"years"}`),(a>0||s===0)&&n.push(`${a} ${a===1?"month":"months"}`),n.join(", ")}function zd(t,s="INR"){const a=Math.abs(t),n=t<0?"-":"";if(s==="INR"){if(a>=1e7)return`${n}${(a/1e7).toFixed(2).replace(/\.00$/,"")}C`;if(a>=1e5)return`${n}${(a/1e5).toFixed(2).replace(/\.00$/,"")}L`;if(a>=1e4)return`${n}${(a/1e3).toFixed(1).replace(/\.0$/,"")}K`}else{if(a>=1e9)return`${n}${(a/1e9).toFixed(2).replace(/\.00$/,"")}B`;if(a>=1e6)return`${n}${(a/1e6).toFixed(2).replace(/\.00$/,"")}M`;if(a>=1e4)return`${n}${(a/1e3).toFixed(1).replace(/\.0$/,"")}K`}return n+$s(a,s==="INR"?"en-IN":"en-US")}function Gd(t,s="INR"){const a=Math.abs(t),n=t<0?"-":"",i=(c,r)=>{let o=2;return c>=100?o=0:c>=10&&(o=1),`${n}${c.toFixed(o).replace(/\.0+$/,"")}${r}`};if(s==="INR"){if(a>=1e7)return i(a/1e7,"Cr");if(a>=1e5)return i(a/1e5,"L");if(a>=1e3)return i(a/1e3,"K")}else{if(a>=1e9)return i(a/1e9,"B");if(a>=1e6)return i(a/1e6,"M");if(a>=1e3)return i(a/1e3,"K")}return n+$s(a,s==="INR"?"en-IN":"en-US")}function Eo(){const{accounts:t,currency:s,recurringTransactions:a,createRecurringTransaction:n,deleteRecurringTransaction:i,processRecurringTransactions:c}=wn(),r=w=>({daily:"Daily",weekly:"Weekly",monthly:"Monthly",yearly:"Yearly"})[w]||w,o=({rec:w})=>{const V=t.find(Z=>Z.id===w.accountId);return e.jsxs(Ge,{className:"p-6 bg-slate-900/40 border-white/5 rounded-[28px] border hover:bg-slate-900/60 transition-all duration-300 group relative overflow-hidden",children:[e.jsx("div",{className:`absolute top-0 right-0 w-24 h-24 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20 ${w.type==="income"?"bg-emerald-500":"bg-rose-500"}`}),e.jsxs("div",{className:"flex items-start justify-between mb-8 relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-14 h-14 border border-white/5 rounded-2xl flex items-center justify-center shadow-inner group-hover:scale-105 transition-transform text-2xl ${w.type==="income"?"bg-emerald-500/10 text-emerald-400":"bg-rose-500/10 text-rose-400"}`,children:w.type==="income"?"ðŸ’°":"ðŸ’¸"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-base font-bold text-slate-100 truncate flex items-center gap-2",children:w.description||w.source}),e.jsx("p",{className:"text-[10px] uppercase font-black tracking-widest text-slate-600 mt-1",children:r(w.frequency)})]})]}),e.jsx(oe,{variant:"ghost",size:"sm",onClick:()=>i(w.id),className:"w-10 h-10 p-0 rounded-xl hover:bg-rose-500/10 hover:text-rose-400 text-slate-700 opacity-0 group-hover:opacity-100 transition-all",children:e.jsx(Vt,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-6 relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-widest font-black text-slate-600 mb-1",children:"Commitment"}),e.jsxs("span",{className:`text-2xl font-black tabular-nums leading-none ${w.type==="income"?"text-emerald-400":"text-slate-100"}`,children:[w.type==="income"?"+":"-",xe(w.amount,s)]})]}),e.jsxs("div",{className:"text-right flex flex-col items-end",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-widest font-black text-slate-600 mb-1",children:"Wallet"}),e.jsxs("span",{className:"text-xs font-bold text-slate-300 flex items-center gap-1.5 bg-white/5 px-2 py-1 rounded-lg",children:[V?.icon," ",V?.name]})]})]}),e.jsxs("div",{className:"pt-6 border-t border-white/5 flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-500",children:[e.jsx(Ns,{className:"w-3 h-3"}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-wider",children:"Timeline"})]}),e.jsxs("div",{className:"text-[10px] font-bold text-slate-300",children:[new Date(w.startDate).toLocaleDateString(void 0,{month:"short",year:"numeric"}),w.endDate?` â€” ${new Date(w.endDate).toLocaleDateString(void 0,{month:"short",year:"numeric"})}`:" â€” Ongoing"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[w.category&&e.jsx("div",{className:"bg-slate-800/50 px-2.5 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest text-slate-500 border border-white/5",children:w.category}),e.jsx("div",{className:"w-8 h-8 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-lg shadow-inner",children:V?.icon||"ðŸ¦"})]})]})]})]})},[u,d]=v.useState(!1),[h,l]=v.useState(!1),[g,N]=v.useState(!1),[b,T]=v.useState({type:"expense",description:"",source:"",amount:"",category:"",accountId:t.length>0?t[0].id:"",frequency:"monthly",startDate:new Date().toISOString().split("T")[0],endDate:"",tags:[]}),C=async()=>{const w={type:b.type,amount:parseFloat(b.amount),accountId:b.accountId,frequency:b.frequency,startDate:b.startDate,endDate:b.endDate||void 0,tags:b.tags};b.type==="expense"?(w.description=b.description,w.category=b.category):w.source=b.source,await n(w),d(!1),D()},k=async()=>{l(!0),await c(),l(!1)},D=()=>{T({type:"expense",description:"",source:"",amount:"",category:"",accountId:t.length>0?t[0].id:"",frequency:"monthly",startDate:new Date().toISOString().split("T")[0],endDate:"",tags:[]})},E=a.filter(w=>w.amount&&w.amount>0),M=(()=>{const w=E.filter(ne=>ne.category==="EMI"||ne.description?.toLowerCase().includes("loan")),V=E.filter(ne=>ne.category==="Subscription"||ne.description?.toLowerCase().includes("subscription")||["netflix","spotify","prime","youtube","apple","hulu","disney"].some(se=>ne.description?.toLowerCase().includes(se))),Z=E.filter(ne=>ne.type==="income"),ae=E.filter(ne=>!w.some(se=>se.id===ne.id)&&!V.some(se=>se.id===ne.id)&&!Z.some(se=>se.id===ne.id));return{loans:w,subscriptions:V,incomes:Z,others:ae}})(),B=(()=>{const w=X=>{const W=X.amount||0;return X.frequency==="monthly"?W:X.frequency==="yearly"?W/12:X.frequency==="weekly"?W*4:W*30},V=M.loans.reduce((X,W)=>X+w(W),0),Z=M.subscriptions.reduce((X,W)=>X+w(W),0),ae=M.incomes.reduce((X,W)=>X+w(W),0),ne=M.others.reduce((X,W)=>X+w(W),0),se=V+Z+ne,we=ae-se,be=ae>0?Math.max(0,Math.min(100,we/ae*100)):0;return{loanTotal:V,subTotal:Z,incomeTotal:ae,otherTotal:ne,totalOutflow:se,netMonthly:we,healthScore:be,totalActive:E.length}})();return e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[e.jsxs(Ge,{className:"relative overflow-hidden bg-gradient-to-br from-indigo-600 via-purple-600 to-indigo-700 text-white rounded-[32px] border-white/10 shadow-2xl p-8",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 scale-150 rotate-12",children:e.jsx(xr,{className:"w-32 h-32"})}),e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center justify-between gap-12",children:[e.jsxs("div",{className:"space-y-4 text-center md:text-left",children:[e.jsx("p",{className:"text-white/70 text-sm font-bold uppercase tracking-widest mb-1",children:"Monthly Leftover Cash"}),e.jsxs("h1",{className:"text-5xl md:text-6xl font-black tracking-tighter tabular-nums mb-2",children:[B.netMonthly>=0?"+":"",xe(B.netMonthly,s),e.jsx("span",{className:"text-xl text-white/50 ml-2 font-medium italic",children:"/month"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 w-full md:w-auto",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-md px-6 py-4 rounded-3xl border border-white/10 text-center",children:[e.jsx("p",{className:"text-[10px] uppercase font-bold text-white/60 mb-1",children:"Loan EMIs"}),e.jsxs("span",{className:"font-bold text-lg text-rose-300",children:["-",xe(B.loanTotal,s)]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-md px-6 py-4 rounded-3xl border border-white/10 text-center",children:[e.jsx("p",{className:"text-[10px] uppercase font-bold text-white/60 mb-1",children:"Subscriptions"}),e.jsxs("span",{className:"font-bold text-lg text-indigo-200",children:["-",xe(B.subTotal,s)]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-md px-6 py-4 rounded-3xl border border-white/10 text-center",children:[e.jsx("p",{className:"text-[10px] uppercase font-bold text-white/60 mb-1",children:"Recur. Income"}),e.jsxs("span",{className:"font-bold text-lg text-emerald-400",children:["+",xe(B.incomeTotal,s)]})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 sticky top-0 z-30 py-2 bg-slate-950/80 backdrop-blur-md rounded-2xl border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-1.5 h-6 bg-indigo-500 rounded-full shadow-[0_0_15px_rgba(99,102,241,0.5)]"}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-500",children:"Commitment Stream"})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsxs(oe,{variant:"ghost",size:"sm",onClick:k,disabled:h||a.length===0,className:"flex-1 sm:flex-initial rounded-xl border border-white/5 hover:bg-slate-900/40 font-bold text-slate-400 hover:text-slate-100 px-4 h-10 text-xs",children:[e.jsx(ns,{className:`w-3.5 h-3.5 mr-2 ${h?"animate-spin":""}`}),"Sync"]}),e.jsxs(oe,{onClick:()=>d(!0),size:"sm",className:"flex-1 sm:flex-initial bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl px-6 h-10 font-bold shadow-lg shadow-indigo-600/20 transition-all active:scale-95 text-xs",children:[e.jsx(Zt,{className:"w-3.5 h-3.5 mr-2"}),"Add New"]})]})]}),a.length>0&&e.jsxs("div",{className:"px-4",children:[e.jsxs("div",{className:"bg-slate-900/40 border border-white/5 rounded-2xl p-4 flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-500/10 rounded-xl flex items-center justify-center",children:e.jsx(Ot,{className:"w-5 h-5 text-indigo-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500 mb-0.5",children:"Net Monthly Flow"}),e.jsxs("h4",{className:`text-lg font-black tabular-nums leading-none ${B.netMonthly>=0?"text-emerald-400":"text-rose-400"}`,children:[B.netMonthly>=0?"+":"",xe(B.netMonthly,s)]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 border-t sm:border-t-0 sm:border-l border-white/5 pt-4 sm:pt-0 sm:pl-6",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("p",{className:"text-[10px] uppercase font-black text-slate-600",children:"Shadow Health"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`font-black text-lg tabular-nums ${B.healthScore>60?"text-emerald-400":B.healthScore>30?"text-indigo-400":"text-rose-400"}`,children:[Math.round(B.healthScore),"%"]}),e.jsx("div",{className:"px-2 py-0.5 rounded bg-white/5 border border-white/5",children:e.jsx("span",{className:"text-[9px] font-black uppercase tracking-tight text-slate-400",children:B.healthScore>=80?"Elite":B.healthScore>=60?"Strong":B.healthScore>=40?"Stable":B.healthScore>=20?"Warning":"Critical"})}),e.jsx("div",{className:"flex gap-0.5 ml-1",children:[1,2,3,4,5].map(w=>e.jsx("div",{className:`w-1.5 h-3 rounded-full transition-colors duration-500 ${B.healthScore/20>=w?B.healthScore>60?"bg-emerald-500":B.healthScore>30?"bg-indigo-500":"bg-rose-500":"bg-slate-800"}`},w))})]})]}),e.jsx(oe,{variant:"ghost",size:"sm",onClick:()=>N(!g),className:"text-indigo-400 hover:text-indigo-300 hover:bg-indigo-500/10 rounded-xl font-bold",children:g?"Hide Analysis":"Show Analysis"})]})]}),g&&e.jsxs("div",{className:"mt-4 animate-in zoom-in-95 duration-300 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(Ge,{className:"bg-slate-900/40 border-white/5 p-4 rounded-2xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2 opacity-50",children:[e.jsx(Za,{className:"w-4 h-4"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em]",children:"Total Outflow"})]}),e.jsx("p",{className:"text-xl font-black text-rose-400",children:xe(B.totalOutflow,s)})]}),e.jsxs(Ge,{className:"bg-slate-900/40 border-white/5 p-4 rounded-2xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2 opacity-50",children:[e.jsx(br,{className:"w-4 h-4"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em]",children:"Total Inflow"})]}),e.jsx("p",{className:"text-xl font-black text-emerald-400",children:xe(B.incomeTotal,s)})]})]})]}),e.jsx("div",{className:"px-4 pb-20 space-y-12",children:E.length===0?e.jsxs(Ge,{className:"py-24 text-center bg-slate-800/20 rounded-[40px] border border-dashed border-white/10",children:[e.jsx(Ns,{className:"w-20 h-20 mx-auto text-slate-700 mb-6"}),e.jsx("h3",{className:"text-2xl font-black text-slate-200 mb-3",children:"No Active Commitments"}),e.jsx("p",{className:"text-sm text-slate-500 font-bold mb-10 max-w-[320px] mx-auto leading-relaxed",children:"Set up your subscriptions, EMIs, and monthly income to unlock deep financial insights."}),e.jsxs(oe,{onClick:()=>d(!0),className:"bg-indigo-600/10 hover:bg-indigo-600/20 text-indigo-400 border border-indigo-600/20 rounded-2xl px-10 h-14 font-black",children:[e.jsx(Zt,{className:"w-5 h-5 mr-3"}),"Add First Commitment"]})]}):e.jsxs(e.Fragment,{children:[M.incomes.length>0&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 border-l-4 border-emerald-500 pl-4 py-1",children:[e.jsx("h3",{className:"text-xl font-black text-slate-100 uppercase tracking-tight",children:"Recurring Income"}),e.jsxs("span",{className:"bg-emerald-500/10 text-emerald-400 px-2 py-0.5 rounded text-[10px] font-black",children:[M.incomes.length," SOURCE(S)"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:M.incomes.map((w,V)=>e.jsx(o,{rec:w},`${w.id}-${V}`))})]}),M.loans.length>0&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 border-l-4 border-rose-500 pl-4 py-1",children:[e.jsx("h3",{className:"text-xl font-black text-slate-100 uppercase tracking-tight",children:"Loan EMIs"}),e.jsxs("span",{className:"bg-rose-500/10 text-rose-400 px-2 py-0.5 rounded text-[10px] font-black",children:[M.loans.length," COMMITMENT(S)"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:M.loans.map((w,V)=>e.jsx(o,{rec:w},`${w.id}-${V}`))})]}),M.subscriptions.length>0&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 border-l-4 border-indigo-500 pl-4 py-1",children:[e.jsx("h3",{className:"text-xl font-black text-slate-100 uppercase tracking-tight",children:"Active Subscriptions"}),e.jsxs("span",{className:"bg-indigo-500/10 text-indigo-400 px-2 py-0.5 rounded text-[10px] font-black",children:[M.subscriptions.length," SERVICE(S)"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:M.subscriptions.map((w,V)=>e.jsx(o,{rec:w},`${w.id}-${V}`))})]}),M.others.length>0&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 border-l-4 border-slate-500 pl-4 py-1",children:[e.jsx("h3",{className:"text-xl font-black text-slate-100 uppercase tracking-tight",children:"Other Commitments"}),e.jsxs("span",{className:"bg-slate-500/10 text-slate-400 px-2 py-0.5 rounded text-[10px] font-black",children:[M.others.length," ITEM(S)"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:M.others.map((w,V)=>e.jsx(o,{rec:w},`${w.id}-${V}`))})]})]})}),e.jsx(St,{open:u,onOpenChange:d,children:e.jsxs(Ct,{className:"max-w-md bg-slate-950 border-white/10 text-white rounded-[32px]",children:[e.jsxs(At,{children:[e.jsx(Tt,{className:"text-2xl font-black tracking-tight text-white",children:"Create New Commitment"}),e.jsx(Et,{className:"text-slate-400 font-bold",children:"Automate your financial shadow-wallets."})]}),e.jsxs("div",{className:"space-y-6 mt-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:`p-4 rounded-2xl border-2 cursor-pointer transition-all ${b.type==="income"?"border-emerald-500 bg-emerald-500/10":"border-white/5 bg-white/5 hover:border-white/10"}`,onClick:()=>T({...b,type:"income"}),children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-500/20 flex items-center justify-center text-xl mb-2",children:"ðŸ’°"}),e.jsx("p",{className:"text-xs font-black uppercase text-white",children:"Money In"}),e.jsx("p",{className:"text-[10px] text-emerald-400 font-bold",children:"Salary / Gift"})]}),e.jsxs("div",{className:`p-4 rounded-2xl border-2 cursor-pointer transition-all ${b.type==="expense"?"border-indigo-500 bg-indigo-500/10":"border-white/5 bg-white/5 hover:border-white/10"}`,onClick:()=>T({...b,type:"expense"}),children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-500/20 flex items-center justify-center text-xl mb-2",children:"ðŸ’¸"}),e.jsx("p",{className:"text-xs font-black uppercase text-white",children:"Money Out"}),e.jsx("p",{className:"text-[10px] text-indigo-400 font-bold",children:"Rent / Sub"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"group",children:[e.jsx(Q,{htmlFor:"recurring-name",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block",children:"Commitment Name"}),e.jsx(Fe,{id:"recurring-name",name:"description",value:b.type==="expense"?b.description:b.source,onChange:w=>T({...b,[b.type==="expense"?"description":"source"]:w.target.value}),placeholder:b.type==="expense"?"e.g. Netflix, Rent":"e.g. Salary",className:"bg-white/5 border-white/5 rounded-xl h-12 focus:ring-indigo-500/50",autoComplete:"off"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"recurring-amount",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block",children:"Amount"}),e.jsx(Fe,{id:"recurring-amount",name:"amount",type:"number",value:b.amount,onChange:w=>T({...b,amount:w.target.value}),placeholder:"0.00",className:"bg-white/5 border-white/5 rounded-xl h-12",autoComplete:"off"})]}),e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"recurring-frequency",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block",children:"Frequency"}),e.jsxs(He,{value:b.frequency,onValueChange:w=>T({...b,frequency:w}),children:[e.jsx(We,{id:"recurring-frequency",name:"frequency",className:"bg-white/5 border-white/5 rounded-xl h-12",children:e.jsx(qe,{})}),e.jsxs(Ye,{className:"bg-slate-900 border-white/10 text-white",children:[e.jsx(ve,{value:"monthly",children:"Monthly"}),e.jsx(ve,{value:"weekly",children:"Weekly"}),e.jsx(ve,{value:"daily",children:"Daily"}),e.jsx(ve,{value:"yearly",children:"Yearly"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"recurring-account",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block",children:"Funding Wallet"}),e.jsxs(He,{value:b.accountId,onValueChange:w=>T({...b,accountId:w}),children:[e.jsx(We,{id:"recurring-account",name:"accountId",className:"bg-white/5 border-white/5 rounded-xl h-12",children:e.jsx(qe,{placeholder:"Target Account"})}),e.jsx(Ye,{className:"bg-slate-900 border-white/10 text-white",children:t.map(w=>e.jsxs(ve,{value:w.id,children:[w.icon," ",w.name]},w.id))})]})]}),b.type==="expense"&&e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"recurring-category",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block",children:"Category"}),e.jsxs(He,{value:b.category,onValueChange:w=>T({...b,category:w}),children:[e.jsx(We,{id:"recurring-category",name:"category",className:"bg-white/5 border-white/5 rounded-xl h-12",children:e.jsx(qe,{placeholder:"Purpose"})}),e.jsx(Ye,{className:"bg-slate-900 border-white/10 text-white max-h-[200px]",children:bn.map(w=>e.jsxs(ve,{value:w.value,children:[w.emoji," ",w.value]},w.value))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"recurring-start-date",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block",children:"Start Date"}),e.jsx(Fe,{id:"recurring-start-date",name:"startDate",type:"date",value:b.startDate,onChange:w=>T({...b,startDate:w.target.value}),className:"bg-white/5 border-white/5 rounded-xl h-12 text-xs",autoComplete:"off"})]}),e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"recurring-end-date",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block",children:"End Date (Optional)"}),e.jsx(Fe,{id:"recurring-end-date",name:"endDate",type:"date",value:b.endDate,onChange:w=>T({...b,endDate:w.target.value}),className:"bg-white/5 border-white/5 rounded-xl h-12",autoComplete:"off"})]})]})]}),e.jsxs("div",{className:"flex gap-4 pt-4 relative z-10",children:[e.jsx(oe,{variant:"ghost",onClick:()=>d(!1),className:"flex-1 rounded-2xl h-14 font-black text-slate-500 hover:bg-white/5",children:"Discard"}),e.jsx(oe,{onClick:C,className:"flex-1 bg-indigo-600 hover:bg-indigo-500 text-white rounded-2xl h-14 font-black shadow-lg shadow-indigo-600/20",disabled:!b.amount||!b.description&&!b.source||!b.accountId||b.type==="expense"&&!b.category,children:"Activate Flow"})]})]})]})})]})}const Do=({isVisible:t,onNotificationClick:s,onSettingsClick:a,notificationCount:n=0})=>e.jsxs("header",{className:`nav-bar fixed top-0 w-full h-16 flex items-center justify-between px-6 border-b border-white/5 transition-transform duration-300 ease-in-out z-[100] ${t?"translate-y-0":"-translate-y-full"}`,children:[e.jsx("button",{onClick:a,"aria-label":"User Settings",className:"w-10 h-10 rounded-xl bg-[#1C1C1E] border border-white/5 flex items-center justify-center hover:bg-[#2C2C2E] transition-colors",children:e.jsx(ks,{className:"w-5 h-5 text-slate-400"})}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"tracking-[0.4em] font-black text-sm italic text-white leading-none",children:"FINHUB"}),e.jsx("div",{className:"h-[2px] w-6 bg-blue-600 rounded-full mt-1.5 shadow-[0_0_10px_#2563EB]"})]}),e.jsx("button",{onClick:s,"aria-label":"Notifications",className:"w-10 h-10 flex items-center justify-center text-slate-400 hover:text-white transition-colors relative",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ms,{className:"w-5 h-5"}),n>0&&e.jsx("span",{className:"absolute top-0 right-0 w-2 h-2 bg-[#FF453A] rounded-full ring-2 ring-[#000000]"})]})})]}),Io=({isVisible:t,activeTab:s,onTabChange:a})=>e.jsxs("nav",{className:`nav-bar fixed bottom-0 w-full h-20 flex items-center justify-around px-4 border-t border-white/5 transition-transform duration-300 ease-in-out z-[100] ${t?"translate-y-0":"translate-y-full"}`,children:[e.jsxs("div",{className:`flex flex-col items-center relative py-4 cursor-pointer transition-colors ${s==="dashboard"?"text-[#0A84FF]":"text-[#8E8E93] hover:text-white"}`,onClick:()=>a("dashboard"),children:[s==="dashboard"&&e.jsx("div",{className:"absolute top-0 w-8 h-0.5 bg-[#0A84FF] shadow-[0_0_15px_#0A84FF] rounded-full"}),e.jsx(yr,{className:"w-6 h-6"}),e.jsx("span",{className:"text-[9px] font-black uppercase mt-2 tracking-[0.3em]",children:"Home"})]}),e.jsxs("div",{className:`flex flex-col items-center transition-all cursor-pointer ${s==="transactions"?"text-[#0A84FF]":"text-[#8E8E93] hover:text-white"}`,onClick:()=>a("transactions"),children:[e.jsx(vr,{className:"w-6 h-6"}),e.jsx("span",{className:"text-[9px] font-black uppercase mt-2 tracking-[0.3em]",children:"History"})]}),e.jsxs("div",{className:`flex flex-col items-center transition-all cursor-pointer ${s==="liability"?"text-[#0A84FF]":"text-[#8E8E93] hover:text-white"}`,onClick:()=>a("liability"),children:[e.jsx(Qa,{className:"w-6 h-6"}),e.jsx("span",{className:"text-[9px] font-black uppercase mt-2 tracking-[0.3em]",children:"Bills"})]}),e.jsxs("div",{className:`flex flex-col items-center transition-all cursor-pointer ${s==="investments"?"text-[#0A84FF]":"text-[#8E8E93] hover:text-white"}`,onClick:()=>a("investments"),children:[e.jsx(wr,{className:"w-6 h-6"}),e.jsx("span",{className:"text-[9px] font-black uppercase mt-2 tracking-[0.3em]",children:"Growth"})]}),e.jsxs("div",{className:`flex flex-col items-center transition-all cursor-pointer ${s==="goals"?"text-[#0A84FF]":"text-[#8E8E93] hover:text-white"}`,onClick:()=>a("goals"),children:[e.jsx(en,{className:"w-6 h-6"}),e.jsx("span",{className:"text-[9px] font-black uppercase mt-2 tracking-[0.3em]",children:"Goals"})]}),e.jsxs("div",{className:`flex flex-col items-center transition-all cursor-pointer ${s==="more"?"text-[#0A84FF]":"text-[#8E8E93] hover:text-white"}`,onClick:()=>a("more"),children:[e.jsx(jr,{className:"w-6 h-6"}),e.jsx("span",{className:"text-[9px] font-black uppercase mt-2 tracking-[0.3em]",children:"More"})]})]}),Po=({children:t,activeTab:s,onTabChange:a,notificationCount:n,onNotificationClick:i,onSettingsClick:c,renderFab:r,forceHide:o=!1})=>{const[u,d]=v.useState(!0),h=v.useRef(0),l=20,g=u&&!o;return v.useEffect(()=>{const N=()=>{if(o)return;const b=window.scrollY;if(b<10){d(!0),h.current=b;return}const T=b-h.current;Math.abs(T)>l&&(T>0?d(!1):d(!0),h.current=b)};return window.addEventListener("scroll",N,{passive:!0}),()=>window.removeEventListener("scroll",N)},[o]),e.jsxs("div",{className:"min-h-screen bg-bg-primary text-text-primary",children:[e.jsx(Do,{isVisible:g,notificationCount:n,onNotificationClick:i,onSettingsClick:c}),e.jsx("main",{className:"pt-[80px] pb-[140px] px-4 w-full md:max-w-3xl lg:max-w-5xl mx-auto min-h-screen",children:t}),e.jsx(Io,{isVisible:g,activeTab:s,onTabChange:a}),r&&r(g)]})},Rt=v.forwardRef(({value:t,onChange:s,allowDecimals:a=!0,maxDecimals:n=2,className:i,...c},r)=>{const[o,u]=v.useState("");v.useEffect(()=>{if(t===""||t===void 0||t===null)u("");else{const l=t.toString();u(ms(l))}},[t]);const d=l=>{let g=l.target.value;const N=ea(g);if(To(N)&&!(!a&&N.includes("."))){if(a&&N.includes(".")){const b=N.split(".");if(b[1]&&b[1].length>n)return}u(ms(N)),s(N)}},h=l=>{const g=ea(o);g&&u(ms(g)),c.onBlur&&c.onBlur(l)};return e.jsx(Fe,{...c,ref:r,type:"text",inputMode:"decimal",value:o,onChange:d,onBlur:h,className:i})});Rt.displayName="NumberInput";const Ro=Ua("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function ta({className:t,variant:s,asChild:a=!1,...n}){const i=a?Va:"span";return e.jsx(i,{"data-slot":"badge",className:Ce(Ro({variant:s}),t),...n})}const Mo=t=>{if(t.category?.toLowerCase().includes("transfer"))return!0;const s=(t.description||t.source||"").toLowerCase();return!!(s.includes("transfer")||s.includes("payment")||s.includes("cc bill")||s.includes("credit card bill")||s.includes("migration")||t.tags&&Array.isArray(t.tags)&&t.tags.some(a=>a.toLowerCase()==="transfer"||a.toLowerCase()==="internal"))};function hs({className:t,...s}){return e.jsx(Nr,{"data-slot":"checkbox",className:Ce("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(kr,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(za,{className:"size-3.5"})})})}const Lo=({isOpen:t,onClose:s,type:a,onSubmit:n,initialData:i,accounts:c,roundUpEnabled:r=!0})=>{const[o,u]=v.useState({description:"",amount:"",category:"",source:"",personName:"",debtType:"borrowed",accountId:"",date:new Date().toISOString().split("T")[0],tags:[],isRecurring:!1,frequency:"monthly",endDate:"",isIncomeGenerating:!1,justification:"",debtDueDate:""}),[d,h]=v.useState(""),[l,g]=v.useState(null),[N,b]=v.useState([]);v.useEffect(()=>{i?u({description:i.description||"",amount:i.amount?.toString()||"",category:i.category||"",source:i.source||"",personName:i.personName||"",debtType:i.type||"borrowed",accountId:i.accountId||"",date:i.date||new Date().toISOString().split("T")[0],tags:i.tags||[],isRecurring:i.isRecurring||!1,frequency:i.frequency||"monthly",endDate:i.endDate||"",isIncomeGenerating:i.isIncomeGenerating||!1,justification:i.justification||"",debtDueDate:i.dueDate||""}):c.length>0&&!o.accountId&&u(w=>({...w,accountId:c[0].id}))},[i]),v.useEffect(()=>{const w=a==="expense"||a==="income"?o.description:o.personName;if(w.length>2&&!i){const V=Ds(w);V?(g(V.category),b(V.tags)):(g(null),b([]))}},[o.description,o.personName,a]);const T=w=>{if(w.preventDefault(),!o.accountId&&c.length>0){alert("Please select an account");return}let V={amount:parseFloat(o.amount),date:o.date,tags:o.tags,accountId:o.accountId||(c.length>0?c[0].id:""),isRecurring:o.isRecurring,frequency:o.frequency,startDate:o.date,endDate:o.endDate||void 0,isIncomeGenerating:o.isIncomeGenerating,justification:o.justification};a==="expense"?V={...V,description:o.description,category:o.category,roundUpAmount:o.roundUpAmount}:a==="income"?V={...V,source:o.description}:a==="debt"&&(V={...V,personName:o.personName,type:o.debtType,dueDate:o.debtDueDate||void 0});const Z=c.find(ae=>ae.id===o.accountId);a==="expense"&&Z?.type==="credit_card"&&Mo({description:o.description,category:o.category})&&(V.category="Transfer"),n(V),C()},C=()=>{u({description:"",amount:"",category:"",source:"",personName:"",debtType:"borrowed",accountId:c.length>0?c[0].id:"",date:new Date().toISOString().split("T")[0],tags:[],isRecurring:!1,frequency:"monthly",endDate:"",isIncomeGenerating:!1,justification:"",debtDueDate:""}),h(""),g(null),b([]),s()},k=()=>{d.trim()&&!o.tags.includes(d.trim())&&(u({...o,tags:[...o.tags,d.trim()]}),h(""))},D=w=>{if(w.includes(",")){const V=w.split(",").map(Z=>Z.trim()).filter(Z=>Z&&!o.tags.includes(Z));V.length>0&&(u({...o,tags:[...o.tags,...V]}),h(""))}else h(w)},E=w=>{u({...o,tags:o.tags.filter(V=>V!==w)})},y=()=>{l&&(u({...o,category:l,tags:[...new Set([...o.tags,...N])]}),g(null),b([]))},M=async()=>{if("contacts"in navigator&&"ContactsManager"in window)try{const w=["name"],V={multiple:!1},Z=await navigator.contacts.select(w,V);if(Z.length>0&&Z[0].name?.length>0){const ae=Z[0].name[0];u(ne=>({...ne,personName:ae})),window.navigator.vibrate&&window.navigator.vibrate(20)}}catch(w){console.error("Contact picker error:",w)}else alert("Contact Selection is only available on supported mobile browsers.")},J=[100,500,1e3,5e3],B=w=>{const Z=(o.amount||"0")+"0".repeat(w);u({...o,amount:Z})};return e.jsx(St,{open:t,onOpenChange:C,children:e.jsxs(Ct,{className:"max-w-md max-h-[90vh] overflow-y-auto bg-[#020408] border-white/5 p-0 shadow-2xl custom-scrollbar",children:[e.jsxs("div",{className:`px-8 pt-10 pb-8 border-b border-white/5 relative overflow-hidden ${a==="expense"?"bg-rose-500/5":a==="income"?"bg-emerald-500/5":"bg-yellow-500/5"}`,children:[e.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 blur-[60px] opacity-20 -mr-16 -mt-16 ${a==="expense"?"bg-rose-500":a==="income"?"bg-emerald-500":"bg-yellow-500"}`}),e.jsxs(At,{className:"relative z-10",children:[e.jsxs(Tt,{className:"text-2xl font-black tracking-tighter text-slate-100",children:[i?"Update":"Add"," ",a==="expense"?"Money Out":a==="income"?"Money In":"Personal IOU"]}),e.jsx(Et,{className:"text-slate-500 font-bold text-[10px] uppercase tracking-[0.2em] mt-1",children:a==="debt"?"Protocol for personal liquidity exchange":`Recording ${a==="expense"?"capital depletion":"capital injection"} event`})]})]}),e.jsx("div",{className:"p-8",children:e.jsxs("form",{onSubmit:T,className:"space-y-6",children:[c.length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsx(Q,{htmlFor:"transaction-account",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Account Reservoir"}),e.jsxs(He,{value:o.accountId,onValueChange:w=>u({...o,accountId:w}),children:[e.jsx(We,{id:"transaction-account",name:"accountId",className:"h-12 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-white/10 text-slate-200 font-bold",children:e.jsx(qe,{placeholder:"Select account"})}),e.jsx(Ye,{className:"bg-slate-900 border-white/5",children:c.map(w=>e.jsx(ve,{value:w.id,className:"focus:bg-white/5 focus:text-white",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:w.icon}),e.jsx("span",{className:"font-bold",children:w.name})]})},w.id))})]})]}):e.jsx("div",{className:"p-4 bg-amber-500/10 border border-amber-500/20 rounded-2xl text-[10px] font-black uppercase tracking-widest text-amber-400",children:"âš ï¸ Protocol Failure: No accounts detected"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Q,{htmlFor:"transaction-description",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",children:a==="expense"?"Description":a==="income"?"Source":"Person Name"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Fe,{id:"transaction-description",name:"description",value:a==="debt"?o.personName:o.description,onChange:w=>u({...o,[a==="debt"?"personName":"description"]:w.target.value}),placeholder:a==="expense"?"Starbucks Coffee, Netflix...":a==="income"?"Salary, Freelance...":"John Doe",required:!0,className:"h-12 bg-slate-900 border-white/5 rounded-2xl focus:border-white/10 text-slate-200 font-bold placeholder:text-slate-600 flex-1",autoComplete:"off"}),a==="debt"&&e.jsx(oe,{type:"button",variant:"ghost",onClick:M,className:"h-12 w-12 bg-white/5 border border-white/5 rounded-2xl flex items-center justify-center p-0 text-slate-400 hover:text-white",title:"Select from Contacts",children:e.jsx(tn,{className:"w-5 h-5"})})]}),l&&e.jsxs("div",{className:"mt-3 p-4 bg-indigo-500/5 border border-indigo-500/10 rounded-2xl flex items-start gap-3 animate-in fade-in zoom-in-95 duration-300",children:[e.jsx(Ot,{className:"w-4 h-4 text-indigo-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-indigo-300 leading-tight",children:"Intelligence Suggested"}),e.jsxs("p",{className:"text-xs text-slate-400 mt-1 font-bold",children:[a==="expense"&&e.jsxs(e.Fragment,{children:["Category: ",e.jsx("span",{className:"text-slate-100 uppercase",children:l})]}),N.length>0&&e.jsxs(e.Fragment,{children:[" â€¢ Tags: ",e.jsx("span",{className:"text-slate-100",children:N.join(", ")})]})]}),e.jsx(oe,{type:"button",size:"sm",variant:"ghost",onClick:y,className:"mt-3 h-8 bg-indigo-500/10 text-indigo-300 hover:bg-indigo-500/20 rounded-xl text-[10px] font-black uppercase tracking-widest w-full",children:"Auto-Configure Form"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Q,{htmlFor:"transaction-amount",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Capital Value"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Rt,{id:"transaction-amount",name:"amount",value:o.amount,onChange:w=>u({...o,amount:w}),placeholder:"0.00",step:"any",min:"0",required:!0,className:"flex-1 h-14 bg-slate-900 border-white/5 rounded-2xl focus:border-white/10 text-xl font-black text-slate-100 placeholder:text-slate-800",autoComplete:"off"}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(oe,{type:"button",variant:"ghost",size:"sm",onClick:()=>B(2),className:"px-3 h-[25px] bg-white/5 text-[10px] font-black text-slate-400 hover:text-white rounded-lg border border-white/5",title:"Add 00",children:"+00"}),e.jsx(oe,{type:"button",variant:"ghost",size:"sm",onClick:()=>B(3),className:"px-3 h-[25px] bg-white/5 text-[10px] font-black text-slate-400 hover:text-white rounded-lg border border-white/5",title:"Add 000",children:"+000"})]})]}),e.jsx("div",{className:"flex gap-2 mt-3",children:J.map(w=>e.jsx("button",{type:"button",onClick:()=>u({...o,amount:w.toString()}),className:"flex-1 py-2 text-[10px] font-black bg-slate-900 border border-white/5 text-slate-500 rounded-xl hover:bg-white/5 hover:text-slate-200 transition-all uppercase tracking-widest",children:w},w))}),r&&a==="expense"&&o.amount&&parseFloat(o.amount)>0&&(()=>{const w=parseFloat(o.amount),V=w<100?Math.ceil(w/10)*10:Math.ceil(w/100)*100,Z=V-w;return Z>0&&Z>=1?e.jsxs("div",{className:"flex items-center space-x-3 mt-4 p-4 bg-indigo-500/5 border border-indigo-500/10 rounded-2xl animate-in fade-in duration-500",children:[e.jsx(hs,{id:"roundUp",name:"roundUp",className:"border-white/20 data-[state=checked]:bg-indigo-500 data-[state=checked]:border-indigo-500",onCheckedChange:ae=>{u(ne=>({...ne,roundUpAmount:ae?Z:void 0}))}}),e.jsxs("div",{className:"grid gap-1.5 leading-none",children:[e.jsxs(Q,{htmlFor:"roundUp",className:"text-[10px] font-black uppercase tracking-widest text-slate-100 flex items-center gap-2 cursor-pointer",children:[e.jsx(rs,{className:"w-3 h-3 text-indigo-400"}),"Reserve ",Z.toFixed(2)," to Goals"]}),e.jsxs("p",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-tighter",children:["Round up capital to nearest 100 (",V,")"]})]})]}):null})()]}),a==="expense"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Q,{htmlFor:"transaction-category",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Spending Domain"}),e.jsxs(He,{value:o.category,onValueChange:w=>u({...o,category:w}),children:[e.jsx(We,{id:"transaction-category",name:"category",className:"h-12 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-white/10 text-slate-200 font-bold",children:e.jsx(qe,{placeholder:"Select domain"})}),e.jsx(Ye,{className:"bg-slate-900 border-white/5 max-h-[300px]",children:Hi.map(w=>e.jsxs(ve,{value:w.value,className:"focus:bg-white/5 focus:text-white",children:[e.jsx("span",{className:"mr-2",children:w.emoji}),e.jsx("span",{className:"font-bold",children:w.value})]},w.value))})]})]}),(()=>{const w=c.find(be=>be.id===o.accountId);if(w?.type!=="credit_card"||a!=="expense")return null;const V=w.creditLimit||0,Z=V*(w.safeLimitPercentage||30)/100,ae=Math.abs(w.balance),ne=parseFloat(o.amount||"0"),we=ae+ne>Z&&V>0;return e.jsxs("div",{className:"space-y-4 p-4 bg-slate-900 border border-white/5 rounded-2xl animate-in slide-in-from-top-2 duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Q,{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Credit Protocol"}),we&&e.jsx(ta,{variant:"destructive",className:"bg-rose-500/10 text-rose-400 border-rose-500/20 text-[8px] font-black uppercase",children:"Limit Breach Risk"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(hs,{id:"incomeGenerating",name:"isIncomeGenerating",checked:o.isIncomeGenerating,onCheckedChange:be=>u(X=>({...X,isIncomeGenerating:!!be}))}),e.jsx(Q,{htmlFor:"incomeGenerating",className:"text-xs font-bold text-slate-300 cursor-pointer",children:"This expense generates additional income"})]}),we&&!o.isIncomeGenerating&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(Q,{htmlFor:"justification",className:"text-[9px] font-black uppercase tracking-widest text-rose-400",children:"Security Justification Required"}),e.jsx(Fe,{id:"justification",name:"justification",placeholder:"Why is this credit use essential?",value:o.justification,onChange:be=>u(X=>({...X,justification:be.target.value})),className:"bg-white/5 border-rose-500/20 focus:border-rose-500/50 rounded-xl h-12 text-sm",required:we,autoComplete:"off"}),e.jsx("p",{className:"text-[8px] font-bold text-slate-500 uppercase leading-relaxed",children:"Strategic credit use is prohibited beyond the safe threshold unless it manifests capital growth."})]})]})})(),a==="debt"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(Q,{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Asset Direction"}),e.jsxs("div",{className:"flex gap-2 p-1.5 bg-slate-900 border border-white/5 rounded-2xl",children:[e.jsx("button",{type:"button",onClick:()=>u({...o,debtType:"lent"}),className:`flex-1 py-3 px-4 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${o.debtType==="lent"?"bg-emerald-600 text-white shadow-lg":"text-slate-500 hover:text-slate-200 hover:bg-white/5"} `,children:"I Lent Capital"}),e.jsx("button",{type:"button",onClick:()=>u({...o,debtType:"borrowed"}),className:`flex-1 py-3 px-4 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${o.debtType==="borrowed"?"bg-rose-600 text-white shadow-lg":"text-slate-500 hover:text-slate-200 hover:bg-white/5"} `,children:"I Borrowed"})]})]}),a==="debt"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Q,{htmlFor:"debt-due-date",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Repayment Date (Optional)"}),e.jsx(Fe,{id:"debt-due-date",name:"debtDueDate",type:"date",value:o.debtDueDate,onChange:w=>u({...o,debtDueDate:w.target.value}),className:"h-12 bg-slate-900 border-white/5 rounded-2xl focus:border-white/10 text-slate-200 font-bold"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Q,{htmlFor:"transaction-date",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Event Timestamp"}),e.jsx(Fe,{id:"transaction-date",name:"date",type:"date",value:o.date,onChange:w=>u({...o,date:w.target.value}),required:!0,className:"h-12 bg-slate-900 border-white/5 rounded-2xl focus:border-white/10 text-slate-200 font-bold"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Q,{htmlFor:"transaction-tags",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Protocol Tags"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Fe,{id:"transaction-tags",name:"tags",value:d,onChange:w=>D(w.target.value),onKeyPress:w=>w.key==="Enter"&&(w.preventDefault(),k()),placeholder:"urgent, recurring, etc...",autoComplete:"off",className:"h-12 bg-slate-900 border-white/5 rounded-2xl focus:border-white/10 text-slate-200 font-bold placeholder:text-slate-800"}),e.jsx(oe,{type:"button",onClick:k,variant:"ghost",size:"sm",className:"h-12 px-6 bg-white/5 text-[10px] font-black uppercase tracking-widest text-slate-400 hover:text-white rounded-2xl border border-white/5",children:"Index"})]}),o.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:o.tags.map(w=>e.jsxs(ta,{variant:"secondary",className:"gap-2 bg-slate-900 border border-white/5 text-slate-300 font-bold px-3 py-1 rounded-xl",children:["#",w,e.jsx("button",{type:"button",onClick:()=>E(w),"aria-label":`Remove tag ${w}`,className:"hover:text-rose-400 transition-colors",children:e.jsx(is,{className:"w-3 h-3"})})]},w))})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-slate-900 border border-white/5 rounded-2xl group cursor-pointer",onClick:()=>u({...o,isRecurring:!o.isRecurring}),children:[e.jsx(hs,{id:"recurring",name:"isRecurring",checked:o.isRecurring,onCheckedChange:w=>u({...o,isRecurring:!!w}),className:"border-white/20 data-[state=checked]:bg-indigo-500 data-[state=checked]:border-indigo-500"}),e.jsx(Q,{htmlFor:"recurring",className:"text-[10px] font-black uppercase tracking-widest text-slate-100 cursor-pointer",children:"Cyclical Routine Entry"})]}),o.isRecurring&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-in slide-in-from-top-2 duration-300",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Q,{htmlFor:"transaction-frequency",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Period"}),e.jsxs(He,{value:o.frequency,onValueChange:w=>u({...o,frequency:w}),children:[e.jsx(We,{id:"transaction-frequency",name:"frequency",className:"bg-slate-900 border-white/5 h-12 rounded-2xl text-slate-200 font-bold",children:e.jsx(qe,{})}),e.jsxs(Ye,{className:"bg-slate-900 border-white/5",children:[e.jsx(ve,{value:"daily",children:"Daily"}),e.jsx(ve,{value:"weekly",children:"Weekly"}),e.jsx(ve,{value:"monthly",children:"Monthly"}),e.jsx(ve,{value:"yearly",children:"Yearly"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Q,{htmlFor:"transaction-end-date",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Termination"}),e.jsx(Fe,{id:"transaction-end-date",name:"endDate",type:"date",value:o.endDate,onChange:w=>u({...o,endDate:w.target.value}),className:"bg-slate-900 border-white/5 h-12 rounded-2xl text-slate-200 font-bold"})]})]}),e.jsxs("div",{className:"flex gap-4 pt-6",children:[e.jsx(oe,{type:"button",variant:"ghost",onClick:C,className:"flex-1 h-14 rounded-2xl text-[10px] font-black uppercase tracking-widest text-slate-500 hover:text-slate-100 hover:bg-white/5 border border-white/5",children:"Abort"}),e.jsx(oe,{type:"submit",className:`flex-1 h-14 rounded-2xl text-[10px] font-black uppercase tracking-widest shadow-xl active:scale-[0.98] transition-all ${a==="expense"?"bg-rose-600 hover:bg-rose-500 shadow-rose-900/20":a==="income"?"bg-emerald-600 hover:bg-emerald-500 shadow-emerald-900/20":"bg-yellow-600 hover:bg-yellow-500 shadow-yellow-900/20"}`,disabled:c.length===0,children:i?"Update Matrix":"Record Transaction"})]})]})})]})})},Oo=({isOpen:t,onClose:s,onConfirm:a,expenseAmount:n,roundedAmount:i,currency:c,goals:r,onMute:o})=>{const[u,d]=v.useState("emergency"),[h,l]=v.useState(""),g=i-n,N=()=>{if(u==="goal"&&r.length>0&&!h){L.error("Please select a goal to save into.");return}a(u==="goal"?h:"emergency",u)};return e.jsx(St,{open:t,onOpenChange:s,children:e.jsxs(Ct,{className:"sm:max-w-md max-h-[90vh] overflow-y-auto bg-slate-950 border-white/5 p-0 shadow-2xl custom-scrollbar",children:[e.jsxs("div",{className:"px-8 pt-10 pb-8 border-b border-white/5 relative overflow-hidden bg-emerald-500/5",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-emerald-500 blur-[80px] opacity-20 -mr-16 -mt-16"}),e.jsxs(At,{className:"relative z-10",children:[e.jsxs(Tt,{className:"flex items-center gap-3 text-2xl font-black tracking-tighter text-slate-100",children:[e.jsx(Sr,{className:"w-7 h-7 text-emerald-500"}),"Wealth Multiplier"]}),e.jsx(Et,{className:"text-slate-500 font-bold text-[10px] uppercase tracking-[0.2em] mt-1",children:"System detected idle capital in transaction"})]})]}),e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-sm font-bold text-slate-300 leading-relaxed text-center px-4",children:["Transaction of ",e.jsx("span",{className:"text-slate-100",children:xe(n,c)})," processed. Initialize round-up to ",e.jsx("span",{className:"text-emerald-400",children:xe(i,c)}),"?"]}),e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 bg-slate-900 border border-white/5 rounded-[32px] relative overflow-hidden group",children:[e.jsx("div",{className:"absolute inset-0 bg-emerald-500/5 opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-emerald-500 mb-1",children:"Leftover Cash"}),e.jsx("p",{className:"text-5xl font-black text-white tracking-tighter",children:xe(g,c)})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Q,{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Asset Allocation Target"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{type:"button",onClick:()=>d("emergency"),className:`p-5 rounded-3xl border transition-all duration-300 flex flex-col items-center gap-3 ${u==="emergency"?"bg-emerald-600 border-emerald-500 text-white shadow-lg shadow-emerald-900/40":"bg-slate-900 border-white/5 text-slate-500 hover:text-slate-300 hover:bg-white/5"}`,children:[e.jsx(Cr,{className:`w-6 h-6 ${u==="emergency"?"text-white":"text-slate-500"}`}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Stability"})]}),e.jsxs("button",{type:"button",onClick:()=>{d("goal"),r.length>0&&!h&&l(r[0].id)},className:`p-5 rounded-3xl border transition-all duration-300 flex flex-col items-center gap-3 ${u==="goal"?"bg-indigo-600 border-indigo-500 text-white shadow-lg shadow-indigo-900/40":"bg-slate-900 border-white/5 text-slate-500 hover:text-slate-300 hover:bg-white/5"}`,children:[e.jsx(Ar,{className:`w-6 h-6 ${u==="goal"?"text-white":"text-slate-500"}`}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Growth"})]})]}),u==="goal"&&r.length>0&&e.jsx("div",{className:"mt-4 animate-in slide-in-from-top-2 duration-300",children:e.jsxs(He,{value:h,onValueChange:l,children:[e.jsx(We,{id:"round-up-goal-select",name:"goalId",className:"h-12 bg-slate-900 border-white/5 rounded-2xl text-slate-200 font-bold focus:ring-1 focus:ring-white/10",children:e.jsx(qe,{placeholder:"Select Growth Target"})}),e.jsx(Ye,{className:"bg-slate-900 border-white/5",children:r.map(b=>e.jsxs(ve,{value:b.id,className:"focus:bg-white/5 focus:text-white font-bold",children:[b.emoji," ",b.name]},b.id))})]})}),u==="goal"&&r.length===0&&e.jsx("div",{className:"p-4 bg-amber-500/10 border border-amber-500/20 rounded-2xl text-[10px] font-black uppercase tracking-widest text-amber-400 text-center",children:"No active targets. Defaulting to General Reservoirs."})]}),e.jsxs("div",{className:"pt-2 space-y-4",children:[e.jsx(oe,{onClick:N,className:"w-full text-[10px] font-black uppercase tracking-widest h-14 bg-emerald-600 hover:bg-emerald-500 text-white rounded-2xl shadow-xl shadow-emerald-900/20 active:scale-[0.98] transition-all",children:"Initialize Savings Event"}),e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx(oe,{variant:"ghost",size:"sm",onClick:s,className:"h-10 px-6 rounded-xl text-[10px] font-black uppercase tracking-widest text-slate-500 hover:text-slate-300 hover:bg-white/5 border border-white/5",children:"Abort"}),e.jsx("div",{className:"flex-1",children:e.jsxs(He,{onValueChange:b=>o(b),children:[e.jsx(We,{id:"mute-duration",name:"muteDuration",className:"h-10 bg-transparent border border-white/5 hover:bg-white/5 rounded-xl text-[9px] font-black uppercase tracking-widest text-slate-500 justify-center gap-2 px-4 focus:ring-0",children:e.jsx(qe,{placeholder:"Protocol Mute"})}),e.jsxs(Ye,{align:"end",className:"bg-slate-900 border-white/5",children:[e.jsx(ve,{value:"today",className:"text-[10px] font-bold py-2",children:"Mute 24h"}),e.jsx(ve,{value:"week",className:"text-[10px] font-bold py-2",children:"Mute 7d"}),e.jsx(ve,{value:"month",className:"text-[10px] font-bold py-2",children:"Mute 30d"})]})]})})]})]})]})]})})};var Fo=(t,s,a,n,i,c,r,o)=>{let u=document.documentElement,d=["light","dark"];function h(N){(Array.isArray(t)?t:[t]).forEach(b=>{let T=b==="class",C=T&&c?i.map(k=>c[k]||k):i;T?(u.classList.remove(...C),u.classList.add(c&&c[N]?c[N]:N)):u.setAttribute(b,N)}),l(N)}function l(N){o&&d.includes(N)&&(u.style.colorScheme=N)}function g(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(n)h(n);else try{let N=localStorage.getItem(s)||a,b=r&&N==="system"?g():N;h(b)}catch{}},sa=["light","dark"],jn="(prefers-color-scheme: dark)",_o=typeof window>"u",Bs=v.createContext(void 0),$o={setTheme:t=>{},themes:[]},Bo=()=>{var t;return(t=v.useContext(Bs))!=null?t:$o},Vo=t=>v.useContext(Bs)?v.createElement(v.Fragment,null,t.children):v.createElement(zo,{...t}),Uo=["light","dark"],zo=({forcedTheme:t,disableTransitionOnChange:s=!1,enableSystem:a=!0,enableColorScheme:n=!0,storageKey:i="theme",themes:c=Uo,defaultTheme:r=a?"system":"light",attribute:o="data-theme",value:u,children:d,nonce:h,scriptProps:l})=>{let[g,N]=v.useState(()=>Ho(i,r)),[b,T]=v.useState(()=>g==="system"?ps():g),C=u?Object.values(u):c,k=v.useCallback(M=>{let J=M;if(!J)return;M==="system"&&a&&(J=ps());let B=u?u[J]:J,w=s?qo(h):null,V=document.documentElement,Z=ae=>{ae==="class"?(V.classList.remove(...C),B&&V.classList.add(B)):ae.startsWith("data-")&&(B?V.setAttribute(ae,B):V.removeAttribute(ae))};if(Array.isArray(o)?o.forEach(Z):Z(o),n){let ae=sa.includes(r)?r:null,ne=sa.includes(J)?J:ae;V.style.colorScheme=ne}w?.()},[h]),D=v.useCallback(M=>{let J=typeof M=="function"?M(g):M;N(J);try{localStorage.setItem(i,J)}catch{}},[g]),E=v.useCallback(M=>{let J=ps(M);T(J),g==="system"&&a&&!t&&k("system")},[g,t]);v.useEffect(()=>{let M=window.matchMedia(jn);return M.addListener(E),E(M),()=>M.removeListener(E)},[E]),v.useEffect(()=>{let M=J=>{J.key===i&&(J.newValue?N(J.newValue):D(r))};return window.addEventListener("storage",M),()=>window.removeEventListener("storage",M)},[D]),v.useEffect(()=>{k(t??g)},[t,g]);let y=v.useMemo(()=>({theme:g,setTheme:D,forcedTheme:t,resolvedTheme:g==="system"?b:g,themes:a?[...c,"system"]:c,systemTheme:a?b:void 0}),[g,D,t,b,a,c]);return v.createElement(Bs.Provider,{value:y},v.createElement(Go,{forcedTheme:t,storageKey:i,attribute:o,enableSystem:a,enableColorScheme:n,defaultTheme:r,value:u,themes:c,nonce:h,scriptProps:l}),d)},Go=v.memo(({forcedTheme:t,storageKey:s,attribute:a,enableSystem:n,enableColorScheme:i,defaultTheme:c,value:r,themes:o,nonce:u,scriptProps:d})=>{let h=JSON.stringify([a,s,c,t,o,r,n,i]).slice(1,-1);return v.createElement("script",{...d,suppressHydrationWarning:!0,nonce:typeof window>"u"?u:"",dangerouslySetInnerHTML:{__html:`(${Fo.toString()})(${h})`}})}),Ho=(t,s)=>{if(_o)return;let a;try{a=localStorage.getItem(t)||void 0}catch{}return a||s},qo=t=>{let s=document.createElement("style");return t&&s.setAttribute("nonce",t),s.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(s),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(s)},1)}},ps=t=>(t||(t=window.matchMedia(jn)),t.matches?"dark":"light");function Nn({...t}){return e.jsx(qa,{"data-slot":"sheet",...t})}function Wo({...t}){return e.jsx(Xa,{"data-slot":"sheet-portal",...t})}const kn=v.forwardRef(({className:t,...s},a)=>e.jsx(Ha,{ref:a,"data-slot":"sheet-overlay",className:Ce("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-[200] bg-black/50",t),...s}));kn.displayName="SheetOverlay";function Sn({className:t,children:s,side:a="right",...n}){return e.jsxs(Wo,{children:[e.jsx(Wa,{asChild:!0,children:e.jsx(kn,{})}),e.jsx(Ya,{"data-slot":"sheet-content",className:Ce("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-[200] flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-200 data-[state=open]:duration-300",a==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",a==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",a==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",a==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...n,children:s})]})}function Cn({className:t,...s}){return e.jsx(Ka,{"data-slot":"sheet-title",className:Ce("text-foreground font-semibold",t),...s})}function An({className:t,...s}){return e.jsx(Ja,{"data-slot":"sheet-description",className:Ce("text-muted-foreground text-sm",t),...s})}function Yo({...t}){return e.jsx(Tr,{"data-slot":"collapsible",...t})}function Ko({...t}){return e.jsx(Er,{"data-slot":"collapsible-trigger",...t})}function Jo({...t}){return e.jsx(Dr,{"data-slot":"collapsible-content",...t})}function Xo({className:t,orientation:s="horizontal",decorative:a=!0,...n}){return e.jsx(Ir,{"data-slot":"separator-root",decorative:a,orientation:s,className:Ce("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...n})}const Zo=t=>{const s=new Map;return t.forEach(a=>{const n=s.get(a.category)||0;s.set(a.category,n+a.amount)}),Array.from(s.entries()).map(([a,n])=>({category:a,amount:n})).sort((a,n)=>n.amount-a.amount).slice(0,5)},Qo=t=>{const s=t.expenses,a=t.incomes,n=t.totalIncome,i=a.some(k=>k.isRecurring)?"salary":"fluctuating",c=["Bills & Utilities","EMI","Rent","Education","Insurance"],r=s.filter(k=>c.includes(k.category)||k.isRecurring).reduce((k,D)=>k+D.amount,0),o=t.totalExpenses-r,u=n>0?((n-t.totalExpenses)/n*100).toFixed(0)+"%":"0%",d=s.filter(k=>k.category==="EMI"||k.category==="Debt").reduce((k,D)=>k+D.amount,0),h=n>0?(d/n*100).toFixed(1)+"%":"0%",l=(t.healthScore/10).toFixed(1),g=Zo(s).slice(0,3),N=s.filter(k=>k.category==="Subscription").reduce((k,D)=>k+D.amount,0),b=new Map;[...s,...a].forEach(k=>{k.tags?.forEach(D=>{const E=b.get(D)||0;b.set(D,E+1)})});const T=Array.from(b.entries()).sort((k,D)=>D[1]-k[1]).slice(0,5).map(([k])=>k),C={user_profile:{monthly_income:n,income_type:i,emergency_fund_months:l},current_month_stats:{total_expenses:t.totalExpenses,fixed_expenses:r,variable_expenses:o,top_category:g[0]?.category||"None",savings_rate:u},liabilities:{total_debt:t.activeDebts>0?"Present":"None",monthly_debt_payment:d,debt_ratio:h},behavioral:{top_3_categories:g.map(k=>k.category),subscription_burden:N,frequent_tags:T},portfolio_analysis:{aggregation_rule:"Source Independence (Calculated on 'investment' accounts only)",growth_formula:"((Sum Current Values / Sum Principals) - 1) * 100",total_investments:t.investments.length,linked_nodes:t.investments.filter(k=>k.accountId).length,rule_based_metrics:{total_principal:t.investments.filter(k=>t.accounts.find(E=>E.id===k.accountId)?.type==="investment").reduce((k,D)=>k+D.buyPrice*D.quantity,0),current_market_value:t.investments.filter(k=>t.accounts.find(E=>E.id===k.accountId)?.type==="investment").reduce((k,D)=>k+(D.currentPrice||0)*D.quantity,0)}}};return JSON.stringify(C,null,2)},el=(t,s,a)=>{const i=`Context: "The user is looking at the ${a==="dashboard"?"Balance Board":a==="investments"?"Investment":a==="liability"?"Liability":a==="goals"?"Goal":"Financial"} Stack."`,c=t.accounts.reduce((g,N)=>g+(N.balance||0),0),r=t.investments.reduce((g,N)=>g+(N.currentPrice||N.buyPrice)*N.quantity,0),o=c+r,u=g=>new Intl.NumberFormat(s==="INR"?"en-IN":"en-US",{style:"currency",currency:s,maximumFractionDigits:0}).format(g),d=t.healthScore>70?"5%":t.healthScore>50?"2%":"stable",h=`Insight: "Net worth is ${u(o)}, showing a ${d} growth trend."`;let l="";return t.investments.length>0&&a!=="investments"?l=`Action: "Suggest a 2x2 Grid update for the 'Investment' category."`:t.activeDebts>0?l='Action: "Propose a tactical recovery plan for pending liabilities."':t.savingsRate<.2?l='Action: "Suggest optimizing the spending body to increase savings velocity."':l='Action: "Maintain current protocol and monitor the Wealth Builder Stack."',`${i}

${h}

${l}`},tl=t=>Qo(t),sl={ANALYST:`You are an elite Financial Health Advisor.
Analyze the provided user data which is presented in a structured JSON format. 
Your goal is to:
1. Identify the single biggest risk to the user's financial health.
2. Provide one actionable 'Smart Suggestion' to improve their savings rate by 5% this month.
- Be direct, professional, and data-driven.
- Do not mention the user's name or specific account details.
- Use the structured vital signs (Savings Rate, DTI, etc.) for your analysis.`,MOTIVATOR:`You are a Wise Financial Coach.
Your goal is to provide a single, short, impactful quote or advice snippet based on the user's financial mood.
- If financial health is low: Provide hope, discipline, and "small steps" advice.
- If financial health is high: Provide advice on legacy, giving, or wisdom.
- Maximum 2 sentences.
- Tone: Stoic, encouraging, profound.`,ASSISTANT:`You are FinHub's AI Assistant.
You help users navigate the app and understand their finances.
- Be friendly and emoji-aware (ðŸ’°, ðŸ“ˆ).
- Explain financial terms simply.
- If asked about specific app features, explain them.`},al="https://api.openai.com/v1/chat/completions",nl="https://api.anthropic.com/v1/messages",rl="https://generativelanguage.googleapis.com/v1/models/gemini-2.0-flash:generateContent",il="https://api.deepseek.com/chat/completions",ol="https://api.perplexity.ai/chat/completions",ll=(t,s)=>{let a=t.message||"Failed to generate response.";if(a.toLowerCase().includes("failed to fetch")&&(a="Network Error: Possible CORS blockage. Most AI providers (OpenAI, DeepSeek, etc.) do not allow direct browser calls. Use Gemini or verify your environment."),s){const n=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),i=new RegExp(n,"g");a=a.replace(i,"***REDACTED***")}return a=a.replace(/key=[a-zA-Z0-9_-]+/g,"key=***REDACTED***"),a=a.trim(),a},Tn=async(t,s,a,n="ASSISTANT")=>{if(!s)return{text:"",error:"API key is missing. Please configure it in Settings."};const i=sl[n];try{switch(t){case"openai":return await cl(s,a,i);case"anthropic":return await dl(s,a,i);case"gemini":return await ul(s,a,i);case"deepseek":return await ml(s,a,i);case"perplexity":return await hl(s,a,i);default:return{text:"",error:"Unsupported provider."}}}catch(c){const r=ll(c,s);return console.error("AI Service Error (Scrubbed):",r),{text:"",error:r}}},cl=async(t,s,a)=>{const n=await fetch(al,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"system",content:a},{role:"user",content:s}],temperature:.7})}),i=await n.json();if(!n.ok)throw new Error(i.error?.message||"OpenAI API Error");return{text:i.choices[0].message.content}},dl=async(t,s,a)=>{const n=await fetch(nl,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":t,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:"claude-3-haiku-20240307",system:a,messages:[{role:"user",content:s}],max_tokens:1024})}),i=await n.json();if(!n.ok)throw new Error(i.error?.message||"Anthropic API Error");return{text:i.content[0].text}},ul=async(t,s,a)=>{const n=`${rl}?key=${t}`,i=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:`${a}

User Question: ${s}`}]}]})}),c=await i.json();if(!i.ok)throw new Error(c.error?.message||`Gemini Error ${i.status}: ${i.statusText}`);if(!c.candidates?.[0]?.content?.parts?.[0]?.text)throw new Error("Gemini returned an empty response. Check safety filters or prompt.");return{text:c.candidates[0].content.parts[0].text}},ml=async(t,s,a)=>{const n=await fetch(il,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:"deepseek-chat",messages:[{role:"system",content:a},{role:"user",content:s}],temperature:.7})}),i=await n.json();if(!n.ok)throw new Error(i.error?.message||"DeepSeek API Error");return{text:i.choices[0].message.content}},hl=async(t,s,a)=>{const n=await fetch(ol,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:"sonar-small-online",messages:[{role:"system",content:a},{role:"user",content:s}]})}),i=await n.json();if(!n.ok)throw new Error(i.error?.message||"Perplexity API Error");return{text:i.choices[0].message.content}},pl={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Ut=(t,s)=>{const a=s.apiKeys?.[t];if(a&&a.trim()!=="")return a;const n=`VITE_${t.toUpperCase()}_API_KEY`,i=pl[n];return i&&i.trim()!==""?i:null},fl=async({userPrompt:t,context:s,settings:a,persona:n="ASSISTANT",provider:i})=>{const c=i||xl(a);if(!c)return{text:"",error:"No AI Provider configured. Please add an API Key in Settings."};const r=Ut(c,a);if(!r)return{text:"",error:`Missing API Key for ${c}. Please check Settings or ENV.`};const o=tl(s),u=s.brainSummary?`
IMPORTANT LOCAL CONTEXT:
${s.brainSummary}
`:"",d=`
${o}
${u}
User Query: ${t}
  `.trim();return await Tn(c,r,d,n)},gl=async(t,s)=>await Tn(t,s,"Respond with only the word 'OK' to verify connectivity.","ASSISTANT"),xl=t=>{if(t.aiProvider&&Ut(t.aiProvider,t))return t.aiProvider;const s=["openai","anthropic","gemini","deepseek","perplexity"];for(const a of s)if(Ut(a,t))return a;return null},aa={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},bl=({isOpen:t,onClose:s,settings:a,onUpdateSettings:n,onAchievementClick:i})=>{const[c,r]=v.useState(a.name||""),[o,u]=v.useState(a.photoURL||""),[d,h]=v.useState(!1),[l,g]=v.useState("USD"),[N,b]=v.useState("100"),[T,C]=v.useState(null),[k,D]=v.useState({}),E=["INR","USD","EUR","GBP","AED","SAR"],y=a.currency;v.useEffect(()=>{r(a.name||""),u(a.photoURL||"")},[a]),v.useEffect(()=>{t&&M()},[t,l]);const M=async()=>{try{const R=await(await fetch(`https://api.exchangerate-api.com/v4/latest/${l}`)).json();D(R.rates||{}),N&&J(N,R.rates)}catch(m){console.error("Error loading exchange rates:",m)}},J=(m,R)=>{const I=parseFloat(m);if(!isNaN(I)&&I>0){const $=(R||k)[y]||1;C(I*$)}else C(null)},B=m=>{b(m),J(m)},{setTheme:w}=Bo();v.useEffect(()=>{a.theme!=="dark"&&(w("dark"),n({theme:"dark"}))},[]);const V=()=>{n({name:c,photoURL:o}),h(!1)},Z=m=>{const R=m.target.files?.[0];if(R){const I=new FileReader;I.onloadend=()=>{u(I.result)},I.readAsDataURL(R)}},ae=No(),ne=new Set(a.unlockedAchievements),se=a.aiProvider||"openai",we=[{id:"openai",label:"OpenAI",placeholder:"sk-..."},{id:"anthropic",label:"Anthropic",placeholder:"sk-ant-..."},{id:"gemini",label:"Gemini",placeholder:"AIza..."},{id:"deepseek",label:"Deepseek",placeholder:"sk-..."},{id:"perplexity",label:"Perplexity",placeholder:"pplx-..."}],[be,X]=v.useState(!1),[W,pe]=v.useState(null),je=v.useCallback((m,R)=>{n({[m]:R})},[n]),j=async()=>{const m=Ut(se,a);if(!m){L.error("No API key found in Settings or System Environment");return}X(!0),pe(null);try{const R=await gl(se,m);R.error?(pe({success:!1,message:R.error}),L.error(`Connection failed: ${R.error}`)):(pe({success:!0,message:"Neural link established."}),L.success("Connection successful!"))}catch(R){const I=R.message||"Unknown protocol error";pe({success:!1,message:I}),L.error(`Protocol breach: ${I}`)}finally{X(!1)}};return e.jsx(Nn,{open:t,onOpenChange:s,children:e.jsxs(Sn,{side:"left",className:"w-full sm:max-w-lg overflow-y-auto px-0 bg-slate-950 border-white/5 text-slate-100 h-dvh",children:[e.jsx(Cn,{className:"sr-only",children:"Settings"}),e.jsx(An,{className:"sr-only",children:"Customize your FinHub core experience."}),e.jsxs("div",{className:"space-y-12 animate-in fade-in slide-in-from-left-4 duration-500 px-8 pt-12 pb-10 text-white relative",children:[e.jsx("div",{className:"absolute top-4 right-4 z-20",children:e.jsx(oe,{variant:"ghost",size:"icon",onClick:s,className:"w-10 h-10 rounded-full bg-white/5 text-slate-400 hover:text-white hover:bg-white/10",children:e.jsx(is,{className:"w-5 h-5"})})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-1.5 h-8 bg-indigo-500 rounded-full shadow-[0_0_15px_rgba(99,102,241,0.5)]"}),e.jsx("h2",{className:"text-3xl font-black text-slate-100 tracking-tight leading-none text-white",children:"System Config"})]}),e.jsx("p",{className:"text-slate-500 font-bold ml-4 text-sm",children:"Customize your FinHub core experience."})]}),e.jsxs("div",{className:"space-y-10",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2",children:[e.jsx(ks,{className:"w-3.5 h-3.5"}),"User Identity"]}),e.jsx(oe,{variant:"ghost",size:"sm",onClick:()=>h(!d),className:"text-[10px] font-black uppercase tracking-widest text-indigo-400 hover:text-indigo-300 hover:bg-white/5",children:d?"Abort":"Refine"})]}),e.jsxs("div",{className:"flex items-center gap-8 bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-indigo-500 blur-3xl opacity-5 -mr-12 -mt-12"}),e.jsxs("div",{className:"relative",children:[o?e.jsx("img",{src:o,alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-4 border-slate-800 shadow-2xl"}):e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-indigo-600 to-purple-700 rounded-full flex items-center justify-center shadow-2xl",children:e.jsx(ks,{className:"w-12 h-12 text-white/90"})}),d&&e.jsxs("label",{className:"absolute bottom-0 right-0 w-9 h-9 bg-indigo-600 rounded-full flex items-center justify-center cursor-pointer hover:bg-indigo-500 shadow-lg border-4 border-slate-900 transition-transform active:scale-90",children:[e.jsx(Pr,{className:"w-4 h-4 text-white"}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Z,"aria-label":"Upload profile picture"})]})]}),e.jsx("div",{className:"flex-1 min-w-0",children:d?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(Q,{htmlFor:"settings-profile-name",className:"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Alias"}),e.jsx(Fe,{id:"settings-profile-name",name:"name",placeholder:"e.g. Maverick",value:c,onChange:m=>r(m.target.value),className:"bg-white/5 border-white/5 rounded-xl h-12 text-white placeholder:text-slate-700 font-bold",autoComplete:"name"})]}),e.jsx(oe,{size:"sm",onClick:V,className:"w-full h-12 bg-indigo-600 hover:bg-indigo-500 text-white font-black rounded-xl",children:"Commit Identity"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"text-2xl font-black text-slate-100 tracking-tight",children:c||"Guest User"}),e.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-widest mt-1",children:"FinHub Node // 0x50.3"})]})})]})]}),e.jsx("div",{className:"h-px bg-white/5"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("button",{onClick:()=>n({roundUpEnabled:!a.roundUpEnabled}),className:`w-full flex items-center justify-between p-6 rounded-[32px] border transition-all relative overflow-hidden group ${a.roundUpEnabled?"bg-emerald-500/10 border-emerald-500/50 shadow-[0_0_20px_rgba(16,185,129,0.1)]":"bg-slate-900/40 border-white/5 grayscale opacity-60 hover:opacity-100 hover:grayscale-0"}`,children:[e.jsx("div",{className:`absolute top-0 right-0 w-24 h-24 blur-3xl opacity-10 -mr-12 -mt-12 transition-colors ${a.roundUpEnabled?"bg-emerald-500":"bg-slate-500"}`}),e.jsxs("div",{className:"space-y-1 relative z-10 flex-1 pr-4 text-left",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-black text-slate-100 uppercase tracking-tight",children:[e.jsx(rs,{className:`w-4 h-4 ${a.roundUpEnabled?"text-emerald-500":"text-slate-500"}`}),"Virtual Round-Ups"]}),e.jsx("p",{className:"text-[10px] text-slate-500 font-bold leading-relaxed uppercase tracking-widest",children:"Build your fortress automatically via expense spillover."})]}),e.jsx("div",{className:`relative z-10 px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${a.roundUpEnabled?"bg-emerald-500 text-white shadow-lg shadow-emerald-500/20":"bg-slate-800 text-slate-500"}`,children:a.roundUpEnabled?"Active":"Offline"})]})}),e.jsx("div",{className:"h-px bg-white/5"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(Q,{htmlFor:"settings-currency",className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2",children:[e.jsx(Gs,{className:"w-3.5 h-3.5"}),"Standard Denomination"]}),e.jsxs("div",{className:"bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-indigo-500 blur-3xl opacity-5 -mr-12 -mt-12"}),e.jsx("div",{className:"space-y-2 relative z-10",children:e.jsxs(He,{value:a.currency,onValueChange:m=>n({currency:m}),children:[e.jsx(We,{id:"settings-currency",name:"currency",className:"bg-white/5 border-white/5 rounded-2xl h-14 font-black",children:e.jsx(qe,{})}),e.jsxs(Ye,{className:"bg-slate-900 border-white/10 text-white",children:[e.jsx(ve,{value:"USD",children:"USD ($) - US Dollar"}),e.jsx(ve,{value:"EUR",children:"EUR (â‚¬) - Euro"}),e.jsx(ve,{value:"GBP",children:"GBP (Â£) - British Pound"}),e.jsx(ve,{value:"INR",children:"INR (â‚¹) - Indian Rupee"}),e.jsx(ve,{value:"AED",children:"AED (Ø¯.Ø¥) - UAE Dirham"}),e.jsx(ve,{value:"SAR",children:"SAR (ï·¼) - Saudi Riyal"})]})]})})]})]}),e.jsx("div",{className:"h-px bg-white/5"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Q,{className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2",children:[e.jsx(Gs,{className:"w-3.5 h-3.5"}),"Foreign Exchange Probe"]}),e.jsxs("div",{className:"space-y-6 p-6 bg-slate-900/40 rounded-[32px] border border-white/5 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-blue-500 blur-3xl opacity-5 -mr-12 -mt-12"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 relative z-10",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(Q,{htmlFor:"converter-from-currency",className:"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Source"}),e.jsxs(He,{value:l,onValueChange:m=>{g(m)},children:[e.jsx(We,{id:"converter-from-currency",name:"fromCurrency",className:"bg-white/5 border-white/5 rounded-2xl h-12",children:e.jsx(qe,{})}),e.jsx(Ye,{className:"bg-slate-900 border-white/10 text-white",children:E.map(m=>e.jsxs(ve,{value:m,children:[ht[m]," ",m]},m))})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(Q,{className:"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Target"}),e.jsxs("div",{className:"h-12 flex items-center justify-center bg-indigo-500/10 rounded-2xl border border-indigo-500/20 text-xs font-black text-indigo-400",children:[ht[y]," ",y]})]})]}),e.jsxs("div",{className:"space-y-1.5 relative z-10",children:[e.jsx(Q,{htmlFor:"converter-amount",className:"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Capital Amount"}),e.jsx(Fe,{id:"converter-amount",name:"amount",type:"number",placeholder:"Enter amount",value:N,onChange:m=>{const R=m.target.value;parseFloat(R)<0||B(R)},min:"0",className:"bg-white/5 border-white/5 rounded-2xl h-14 font-black text-lg",autoComplete:"off"})]}),T!==null&&e.jsxs("div",{className:"p-6 bg-white/5 rounded-2xl border border-white/5 animate-in fade-in slide-in-from-top-2 relative z-10",children:[e.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest text-slate-500 mb-2",children:"Calculated Projection"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("p",{className:"text-2xl font-black text-emerald-400 tabular-nums",children:[ht[y],T.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("p",{className:"text-[10px] text-slate-600 font-bold uppercase tracking-widest",children:"ESTIMATED VALUATION"})]}),k[y]&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-white/5 flex items-center justify-between",children:[e.jsx("span",{className:"text-[8px] font-black uppercase tracking-[0.2em] text-slate-700",children:"Protocol Rate"}),e.jsxs("span",{className:"text-[10px] font-black text-slate-500 tabular-nums",children:["1 ",l," = ",k[y].toFixed(4)," ",y]})]})]})]})]}),e.jsx("div",{className:"h-px bg-white/5"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Q,{className:"text-[10px] font-bold uppercase tracking-[0.2em] text-slate-500 flex items-center gap-2",children:[e.jsx(Rr,{className:"w-3.5 h-3.5 text-indigo-400"}),"AI Assistant Config"]}),e.jsxs("div",{className:"space-y-6 bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden group",children:[e.jsxs("div",{className:"space-y-1.5 relative z-10",children:[e.jsx(Q,{htmlFor:"ai-provider-select",className:"text-[9px] font-bold uppercase tracking-widest text-slate-500 ml-1",children:"Preferred Provider"}),e.jsxs(He,{value:se,onValueChange:m=>n({aiProvider:m}),children:[e.jsx(We,{id:"ai-provider-select",name:"aiProvider",className:"bg-slate-900 border-white/5 rounded-xl h-11 text-[10px] font-bold uppercase tracking-widest",children:e.jsx(qe,{})}),e.jsx(Ye,{className:"bg-slate-900 border-white/10 text-white",children:we.map(m=>e.jsx(ve,{value:m.id,className:"text-[10px] font-bold uppercase tracking-widest",children:m.label},m.id))})]})]}),e.jsxs("div",{className:"space-y-4 pt-2 relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsx(Q,{className:"text-[9px] font-bold uppercase tracking-widest text-slate-500",children:"Active Credential"}),e.jsx("div",{className:"flex items-center gap-1.5",children:e.jsx("span",{className:"text-[8px] font-bold text-indigo-400/70 uppercase tracking-tighter",children:we.find(m=>m.id===se)?.label})})]}),we.filter(m=>m.id===se).map(m=>{const R=a.apiKeys?.[m.id],I=`VITE_${m.id.toUpperCase()}_API_KEY`,F=!!aa[I];return e.jsxs("div",{className:"flex items-center gap-3 bg-indigo-500/5 p-4 rounded-2xl border border-indigo-500/20 group/active transition-all",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"relative group/input",children:[e.jsx(Fe,{type:"password",value:R||"",onChange:$=>je("apiKeys",{...a.apiKeys,[m.id]:$.target.value}),placeholder:F?"Using System Environment Key":`Enter ${m.label} Key`,className:`bg-transparent border-none p-0 h-auto text-sm font-bold text-white placeholder:text-slate-700 focus-visible:ring-0 shadow-none ${F&&!R?"opacity-40 italic font-medium":""}`,disabled:F&&!R}),F&&!R&&e.jsx("div",{className:"flex items-center gap-1 mt-1",children:e.jsx("span",{className:"text-[7px] font-black text-emerald-500 uppercase tracking-widest bg-emerald-500/10 px-1 py-0.5 rounded",children:"System Linked"})})]})}),R&&e.jsx("button",{onClick:()=>je("apiKeys",{...a.apiKeys,[m.id]:""}),className:"text-slate-600 hover:text-rose-500 transition-colors p-1",title:"Clear saved key","aria-label":`Clear saved key for ${m.label}`,children:e.jsx(Vt,{className:"w-3.5 h-3.5"})})]},m.id)}),e.jsx(oe,{onClick:j,disabled:be||!Ut(se,a),className:`w-full h-11 transition-all font-bold uppercase tracking-[0.2em] text-[10px] rounded-xl ${W?.success?"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20":W?.success===!1?"bg-rose-500/10 text-rose-400 border border-rose-500/20":"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20"}`,children:be?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Mr,{className:"w-3.5 h-3.5 animate-spin"}),"Verifying..."]}):W?.success?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Lr,{className:"w-3.5 h-3.5"}),"Link Stable"]}):"Validate Connection"})]}),e.jsxs(Yo,{className:"relative z-10",children:[e.jsx(Ko,{asChild:!0,children:e.jsxs(oe,{variant:"ghost",className:"w-full h-8 hover:bg-white/5 text-slate-500 hover:text-slate-300 text-[8px] font-bold uppercase tracking-widest group/trigger flex items-center justify-between px-2 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Or,{className:"w-3 h-3 text-slate-600 group-hover/trigger:text-slate-400"}),"Alternative Nodes"]}),e.jsx(as,{className:"w-3 h-3 transition-transform duration-300 group-data-[state=open]/trigger:rotate-180"})]})}),e.jsx(Jo,{className:"pt-4 space-y-3 animate-in fade-in slide-in-from-top-2 duration-300",children:e.jsx("div",{className:"grid gap-2",children:we.filter(m=>m.id!==se).map(m=>{const R=a.apiKeys?.[m.id],I=`VITE_${m.id.toUpperCase()}_API_KEY`,F=!!aa[I];return e.jsxs("div",{className:"flex items-center gap-3 bg-slate-950/40 p-3 rounded-xl border border-white/5 hover:border-white/10 transition-colors",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-[8px] font-bold uppercase tracking-wider text-slate-500",children:m.label}),F&&!R&&e.jsx("span",{className:"text-[7px] font-bold text-emerald-500/50 uppercase tracking-tighter",children:"System"})]}),e.jsx(Fe,{type:"password",value:R||"",onChange:$=>je("apiKeys",{...a.apiKeys,[m.id]:$.target.value}),placeholder:F?"Using System Default":"Key not found",className:"bg-transparent border-none p-0 h-auto text-[10px] text-slate-400 placeholder:text-slate-800 focus-visible:ring-0 shadow-none italic font-medium cursor-not-allowed",disabled:F&&!R})]}),R&&e.jsx("button",{onClick:()=>je("apiKeys",{...a.apiKeys,[m.id]:""}),className:"text-slate-800 hover:text-rose-500 transition-colors p-1",title:"Clear saved key","aria-label":`Clear saved key for ${m.label}`,children:e.jsx(Vt,{className:"w-3 h-3"})})]},m.id)})})})]})]})]})]}),e.jsx("div",{className:"h-px bg-white/5"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Q,{className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2",children:[e.jsx(Fr,{className:"w-3.5 h-3.5 text-amber-500"}),"Reputation Rank (",a.unlockedAchievements.length,"/",ae.length,")"]}),e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-3",children:ae.map(m=>{const R=ne.has(m.id);return e.jsx("button",{onClick:()=>{R&&i&&i(m.id)},disabled:!R,className:`w-12 h-12 rounded-xl border flex items-center justify-center text-xl transition-all ${R?"border-amber-500/50 bg-amber-500/10 grayscale-0 hover:scale-110 hover:shadow-lg hover:shadow-amber-500/20 active:scale-95":"border-white/5 bg-white/5 grayscale opacity-20 cursor-not-allowed"}`,children:m.icon},m.id)})}),e.jsx("p",{className:"text-[10px] text-slate-500 font-bold text-center leading-relaxed",children:a.unlockedAchievements.length>0?"Select a sigil to view the record of your triumph.":"Initiate financial protocols to manifest higher ranks."})]}),e.jsx(Xo,{className:"bg-white/5"}),e.jsxs("div",{className:"text-center pt-8 space-y-2 opacity-40 hover:opacity-100 transition-opacity duration-700 pb-20",children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.5em] text-slate-100",children:"Obsidian System Node"}),e.jsx("p",{className:"text-[8px] font-bold text-slate-500 uppercase tracking-widest",children:"Architect: Sijo Joseph // BUILD 50.3.0 // QUANTUM CORE"}),e.jsx("p",{className:"text-[8px] font-bold text-slate-700 uppercase tracking-widest mt-4",children:"Â© 2025 NEURAL FINBASE FABRIC"})]})]})]})})};function yl({onNavigate:t,onOpenSettings:s,onOpenNotifications:a,emergencyFundAmount:n,bankAccountsCount:i,cardsCount:c,currency:r}){return e.jsxs("div",{className:"space-y-12 animate-in fade-in slide-in-from-bottom-4 duration-700 px-4 pb-20",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-slate-100 tracking-tight leading-none mb-3",children:"Settings & Assets"}),e.jsx("p",{className:"text-slate-500 font-bold max-w-md",children:"Configure your financial universe and manage core system components."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs(Ge,{className:"p-8 cursor-pointer bg-slate-900/40 border-white/5 rounded-[32px] border hover:bg-slate-900/60 transition-all duration-300 group relative overflow-hidden",onClick:()=>t("emergency"),children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-blue-500 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-500/10 border border-blue-500/20 rounded-2xl flex items-center justify-center text-blue-400 mb-8 group-hover:scale-110 transition-transform duration-500",children:e.jsx(_r,{className:"w-8 h-8"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-black text-slate-100",children:"Emergency Fund"}),e.jsx("p",{className:"text-2xl font-black tabular-nums text-blue-400",children:xe(n,r)})]}),e.jsxs("div",{className:"mt-8 flex items-center justify-between text-slate-500",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Financial Safety Net"}),e.jsx(wt,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})]})]}),e.jsxs(Ge,{className:"p-8 cursor-pointer bg-slate-900/40 border-white/5 rounded-[32px] border hover:bg-slate-900/60 transition-all duration-300 group relative overflow-hidden",onClick:()=>t("accounts"),children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-emerald-500 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"w-16 h-16 bg-emerald-500/10 border border-emerald-500/20 rounded-2xl flex items-center justify-center text-emerald-400 mb-8 group-hover:scale-110 transition-transform duration-500",children:e.jsx(Qa,{className:"w-8 h-8"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-black text-slate-100",children:"Accounts & Cards"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("p",{className:"text-2xl font-black tabular-nums text-emerald-400",children:i}),e.jsx("p",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-wider",children:"Banks"})]}),e.jsx("div",{className:"w-px h-8 bg-white/5 self-center mt-2"}),e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("p",{className:"text-2xl font-black tabular-nums text-emerald-400",children:c}),e.jsx("p",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-wider",children:"Cards"})]})]})]}),e.jsxs("div",{className:"mt-8 flex items-center justify-between text-slate-500",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Manage Liquidity"}),e.jsx(wt,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})]})]}),e.jsxs(Ge,{className:"p-8 cursor-pointer bg-slate-900/40 border-white/5 rounded-[32px] border hover:bg-slate-900/60 transition-all duration-300 group relative overflow-hidden",onClick:()=>t("recurring"),children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-indigo-500 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"w-16 h-16 bg-indigo-500/10 border border-indigo-500/20 rounded-2xl flex items-center justify-center text-indigo-400 mb-8 group-hover:scale-110 transition-transform duration-500",children:e.jsx(ns,{className:"w-8 h-8"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-black text-slate-100",children:"Recurring Flow"}),e.jsx("p",{className:"text-sm font-bold text-slate-400 uppercase tracking-tight",children:"Subscriptions & EMIs"})]}),e.jsxs("div",{className:"mt-11 flex items-center justify-between text-slate-500",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Active Commitments"}),e.jsx(wt,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})]})]})]}),e.jsxs("div",{className:"pt-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"w-1.5 h-6 bg-slate-700 rounded-full"}),e.jsx("h3",{className:"text-xs font-black uppercase tracking-[0.3em] text-slate-600",children:"System Configuration"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(Ge,{className:"p-6 cursor-pointer bg-slate-900/20 border-white/5 rounded-[24px] border hover:bg-slate-900/40 transition-all group",onClick:s,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-slate-800 rounded-xl flex items-center justify-center text-slate-400 group-hover:text-white transition-colors",children:e.jsx($r,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-black text-slate-200 uppercase tracking-tight",children:"App Settings"}),e.jsx("p",{className:"text-[10px] text-slate-600 font-bold",children:"Preferences & Display"})]})]}),e.jsx(wt,{className:"w-5 h-5 text-slate-700 group-hover:text-slate-400 transition-colors"})]})}),e.jsx(Ge,{className:"p-6 cursor-pointer bg-slate-900/20 border-white/5 rounded-[24px] border hover:bg-slate-900/40 transition-all group",onClick:a,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-slate-800 rounded-xl flex items-center justify-center text-slate-400 group-hover:text-white transition-colors",children:e.jsx(Ms,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-black text-slate-200 uppercase tracking-tight",children:"Alert Center"}),e.jsx("p",{className:"text-[10px] text-slate-600 font-bold",children:"System Notifications"})]})]}),e.jsx(wt,{className:"w-5 h-5 text-slate-700 group-hover:text-slate-400 transition-colors"})]})}),e.jsx(Ge,{className:"p-6 cursor-pointer bg-slate-900/20 border-white/5 rounded-[24px] border hover:bg-slate-900/40 transition-all group opacity-60 hover:opacity-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-slate-800 rounded-xl flex items-center justify-center text-slate-400",children:e.jsx(Br,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-black text-slate-200 uppercase tracking-tight",children:"Support"}),e.jsx("p",{className:"text-[10px] text-slate-600 font-bold",children:"Documentation & Help"})]})]}),e.jsx(wt,{className:"w-5 h-5 text-slate-700 transition-colors"})]})}),e.jsx(Ge,{className:"p-6 cursor-pointer bg-slate-900/20 border-white/5 rounded-[24px] border hover:bg-slate-900/40 transition-all group opacity-60 hover:opacity-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-slate-800 rounded-xl flex items-center justify-center text-slate-400",children:e.jsx(Vr,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-black text-slate-200 uppercase tracking-tight",children:"About"}),e.jsx("p",{className:"text-[10px] text-slate-600 font-bold",children:"Version 5.0 Stable Release"})]})]}),e.jsx(wt,{className:"w-5 h-5 text-slate-700 transition-colors"})]})})]})]}),e.jsxs("div",{className:"text-center pt-8 border-t border-white/5",children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.5em] text-slate-700 mb-1",children:"Finbase Obsidian System"}),e.jsx("p",{className:"text-[9px] font-bold text-slate-800",children:"BUILD 50.3.0 // QUANTUM CORE"})]})]})}function vl({className:t,children:s,...a}){return e.jsxs(Ur,{"data-slot":"scroll-area",className:Ce("relative",t),...a,children:[e.jsx(zr,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:s}),e.jsx(wl,{}),e.jsx(Gr,{})]})}function wl({className:t,orientation:s="vertical",...a}){return e.jsx(Hr,{"data-slot":"scroll-area-scrollbar",orientation:s,className:Ce("flex touch-none p-px transition-colors select-none",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",t),...a,children:e.jsx(qr,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function jl({isOpen:t,onClose:s,notifications:a,onNotificationClick:n,onMarkAsRead:i,onClearRead:c}){const r=a.filter(T=>!T.read).length,o=a.filter(T=>T.read).length,u=T=>{switch(T){case"achievement":return e.jsx(Yr,{className:"w-5 h-5 text-yellow-500"});case"goal":return e.jsx(en,{className:"w-5 h-5 text-green-500"});case"insight":return e.jsx(rs,{className:"w-5 h-5 text-blue-500"});case"alert":return e.jsx(sn,{className:"w-5 h-5 text-red-500"});case"reminder":return e.jsx(Ns,{className:"w-5 h-5 text-indigo-500"})}},d=T=>{const C=new Date(T),D=new Date().getTime()-C.getTime(),E=Math.floor(D/6e4),y=Math.floor(D/36e5),M=Math.floor(D/864e5);return E<60?`${E}m ago`:y<24?`${y}h ago`:`${M}d ago`},[h,l]=v.useState({reminders:!0,transactions:!0,achievements:!1,insights:!1}),g=T=>{l(C=>({...C,[T]:!C[T]}))},N=["reminders","transactions","insights","achievements"],b=a.reduce((T,C)=>{const k=C.category||"insights";return T[k]||(T[k]=[]),T[k].push(C),T},{});return Object.keys(b).forEach(T=>{b[T].sort((C,k)=>C.read!==k.read?C.read?1:-1:new Date(k.timestamp).getTime()-new Date(C.timestamp).getTime())}),e.jsx(Nn,{open:t,onOpenChange:s,children:e.jsxs(Sn,{side:"right",className:"w-full sm:max-w-lg p-0 flex flex-col h-dvh max-h-dvh bg-slate-950 border-white/5 text-slate-100 overflow-hidden",children:[e.jsx(Cn,{className:"sr-only",children:"Notifications"}),e.jsx(An,{className:"sr-only",children:"Protocol Intelligence Pulse"}),e.jsxs("div",{className:"px-8 pt-28 pb-10 border-b border-white/5 bg-[#020408] relative overflow-hidden animate-in fade-in slide-in-from-right-4 duration-500",children:[e.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-indigo-500 blur-[120px] opacity-10 -mr-24 -mt-24"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-blue-500 blur-[80px] opacity-5 -ml-12 -mb-12"}),e.jsx("div",{className:"absolute top-8 right-8 z-30",children:e.jsx(oe,{variant:"ghost",size:"icon",onClick:s,className:"w-10 h-10 rounded-full bg-white/5 text-slate-400 hover:text-white hover:bg-white/10",children:e.jsx(is,{className:"w-5 h-5"})})}),e.jsxs("div",{className:"flex items-center justify-between relative z-10",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("h2",{className:"text-3xl font-black text-slate-100 tracking-tighter leading-none flex items-center gap-4",children:["Pulse",r>0&&e.jsx("span",{className:"flex items-center justify-center min-w-[24px] h-6 px-2 text-[10px] font-black bg-indigo-600 text-white rounded-full shadow-[0_0_15px_rgba(79,70,229,0.4)]",children:r})]})}),e.jsx("p",{className:"text-slate-500 font-black text-[10px] uppercase tracking-[0.3em] leading-none ml-0.5",children:"System Intelligence Stack"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[r>0&&e.jsx(oe,{variant:"ghost",size:"icon",title:"Mark all as read",onClick:()=>{a.forEach(T=>{T.read||i?.(T.id)})},className:"w-11 h-11 rounded-2xl bg-white/5 text-slate-400 hover:text-indigo-400 hover:bg-white/10 transition-all duration-300 border border-white/5 active:scale-90",children:e.jsx(Wr,{className:"w-5 h-5"})}),o>0&&e.jsx(oe,{variant:"ghost",size:"icon",title:"Clear history",onClick:()=>{confirm(`Purge ${o} recorded protocol entries?`)&&c?.()},className:"w-11 h-11 rounded-2xl bg-white/5 text-slate-400 hover:text-rose-400 hover:bg-rose-500/10 transition-all duration-300 border border-white/5 active:scale-90",children:e.jsx(Vt,{className:"w-5 h-5"})})]})]})]}),e.jsx(vl,{className:"flex-1 w-full bg-[#020408] overflow-hidden custom-scrollbar",children:e.jsx("div",{className:"px-6 space-y-12 py-8 pb-32",children:a.length===0?e.jsxs("div",{className:"text-center py-32 flex flex-col items-center animate-in fade-in zoom-in duration-700",children:[e.jsxs("div",{className:"w-24 h-24 bg-slate-900 border border-white/5 rounded-[40px] flex items-center justify-center text-slate-800 mb-8 shadow-inner relative group",children:[e.jsx("div",{className:"absolute inset-0 bg-indigo-500/5 blur-2xl rounded-full group-hover:bg-indigo-500/10 transition-colors"}),e.jsx(Ms,{className:"w-10 h-10 relative z-10"})]}),e.jsx("h4",{className:"text-2xl font-black text-slate-100 mb-3 tracking-tight",children:"Signal Silence"}),e.jsx("p",{className:"text-[10px] text-slate-600 font-black uppercase tracking-[0.3em] max-w-[260px] leading-relaxed",children:"The protocol pulse is flat. We will alert you upon system breakthroughs."})]}):N.map(T=>{const C=b[T]||[];if(C.length===0)return null;const k=h[T],D=k?C.length:1,E=C.filter(y=>!y.read).length;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:()=>g(T),className:"w-full flex items-center justify-between px-2 group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-slate-500 group-hover:text-slate-300 transition-colors",children:T}),E>0&&e.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-pulse shadow-[0_0_10px_rgba(99,102,241,0.6)]"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] font-black text-slate-700",children:C.length}),k?e.jsx(Ga,{className:"w-3 h-3 text-slate-700"}):e.jsx(as,{className:"w-3 h-3 text-slate-700"})]})]}),e.jsxs("div",{className:"space-y-3 relative",children:[!k&&C.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute top-2 left-2 right-2 h-full bg-slate-900/40 rounded-[24px] -z-10 border border-white/5 translate-y-2 scale-[0.98]"}),e.jsx("div",{className:"absolute top-4 left-4 right-4 h-full bg-slate-900/20 rounded-[24px] -z-20 border border-white/5 translate-y-4 scale-[0.96]"})]}),C.slice(0,D).map((y,M)=>{const J={style:{"--anim-delay":`${M*50}ms`,"--z-index":100-M}};return e.jsxs("div",{...J,className:`p-6 rounded-[24px] border transition-all duration-500 group relative overflow-hidden cursor-pointer active:scale-[0.98] animate-in fade-in slide-in-from-right-4 fill-mode-both [animation-delay:var(--anim-delay)] z-[var(--z-index)] ${y.read?"bg-slate-900 border-white/5":"bg-slate-900 border-indigo-500/30 shadow-lg shadow-indigo-500/5 hover:border-indigo-500/50"}`,onClick:B=>{B.stopPropagation(),n?.(y),y.read||i?.(y.id)},children:[y.priority==="high"&&!y.read&&e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-red-500 blur-[80px] opacity-10 -mr-16 -mt-16"}),!y.read&&y.priority!=="high"&&e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-500 blur-[80px] opacity-10 -mr-16 -mt-16 group-hover:opacity-20 transition-opacity"}),e.jsxs("div",{className:"flex gap-4 relative z-10",children:[e.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center shrink-0 border border-white/5 transition-all duration-500 ${y.read?"bg-slate-800/50 text-slate-600":y.priority==="high"?"bg-red-500/10 text-red-400":"bg-indigo-500/10 text-indigo-400 shadow-inner"}`,children:u(y.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsx("h4",{className:`text-sm font-black tracking-tight leading-tight ${y.read?"text-slate-500":"text-slate-100"}`,children:y.title}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-700 whitespace-nowrap pt-1",children:d(y.timestamp)})]}),e.jsx("p",{className:`text-xs mt-2 leading-relaxed font-bold tracking-tight ${y.read?"text-slate-700":"text-slate-400"}`,children:y.message}),y.priority==="high"&&!y.read&&e.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-red-400 rounded-full animate-ping"}),e.jsx("span",{className:"text-[10px] font-black text-red-400 uppercase tracking-[0.2em]",children:"Critical Stability Alert"})]})]})]})]},y.id)})]})]},T)})})})]})})}const En=v.createContext({});function Nl(t){const s=v.useRef(null);return s.current===null&&(s.current=t()),s.current}const kl=rn?v.useLayoutEffect:v.useEffect,Vs=v.createContext(null),Dn=v.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Sl(t=!0){const s=v.useContext(Vs);if(s===null)return[!0,null];const{isPresent:a,onExitComplete:n,register:i}=s,c=v.useId();v.useEffect(()=>{if(t)return i(c)},[t]);const r=v.useCallback(()=>t&&n&&n(c),[c,n,t]);return!a&&n?[!1,r]:[!0]}const In=v.createContext({strict:!1});function Cl(t){for(const s in t)Cs[s]={...Cs[s],...t[s]}}const Al=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ts(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Al.has(t)}let Pn=t=>!ts(t);function Tl(t){typeof t=="function"&&(Pn=s=>s.startsWith("on")?!ts(s):t(s))}try{Tl(require("@emotion/is-prop-valid").default)}catch{}function El(t,s,a){const n={};for(const i in t)i==="values"&&typeof t.values=="object"||(Pn(i)||a===!0&&ts(i)||!s&&!ts(i)||t.draggable&&i.startsWith("onDrag"))&&(n[i]=t[i]);return n}const os=v.createContext({});function Dl(t,s){if(on(t)){const{initial:a,animate:n}=t;return{initial:a===!1||Qt(a)?a:void 0,animate:Qt(n)?n:void 0}}return t.inherit!==!1?s:{}}function Il(t){const{initial:s,animate:a}=Dl(t,v.useContext(os));return v.useMemo(()=>({initial:s,animate:a}),[na(s),na(a)])}function na(t){return Array.isArray(t)?t.join(" "):t}const Us=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Rn(t,s,a){for(const n in s)!Ls(s[n])&&!si(n,a)&&(t[n]=s[n])}function Pl({transformTemplate:t},s){return v.useMemo(()=>{const a=Us();return ai(a,s,t),Object.assign({},a.vars,a.style)},[s])}function Rl(t,s){const a=t.style||{},n={};return Rn(n,a,t),Object.assign(n,Pl(t,s)),n}function Ml(t,s){const a={},n=Rl(t,s);return t.drag&&t.dragListener!==!1&&(a.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(a.tabIndex=0),a.style=n,a}const Mn=()=>({...Us(),attrs:{}});function Ll(t,s,a,n){const i=v.useMemo(()=>{const c=Mn();return ni(c,s,ri(n),t.transformTemplate,t.style),{...c.attrs,style:{...c.style}}},[s]);if(t.style){const c={};Rn(c,t.style,t),i.style={...c,...i.style}}return i}const Ol=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function zs(t){return typeof t!="string"||t.includes("-")?!1:!!(Ol.indexOf(t)>-1||/[A-Z]/u.test(t))}function Fl(t,s,a,{latestValues:n},i,c=!1){const o=(zs(t)?Ll:Ml)(s,n,i,t),u=El(s,typeof t=="string",c),d=t!==v.Fragment?{...u,...o,ref:a}:{},{children:h}=s,l=v.useMemo(()=>Ls(h)?h.get():h,[h]);return v.createElement(t,{...d,children:l})}function Jt(t){return Ls(t)?t.get():t}function _l({scrapeMotionValuesFromProps:t,createRenderState:s},a,n,i){return{latestValues:$l(a,n,i,t),renderState:s()}}function $l(t,s,a,n){const i={},c=n(t,{});for(const g in c)i[g]=Jt(c[g]);let{initial:r,animate:o}=t;const u=on(t),d=ii(t);s&&d&&!u&&t.inherit!==!1&&(r===void 0&&(r=s.initial),o===void 0&&(o=s.animate));let h=a?a.initial===!1:!1;h=h||r===!1;const l=h?o:r;if(l&&typeof l!="boolean"&&!Os(l)){const g=Array.isArray(l)?l:[l];for(let N=0;N<g.length;N++){const b=oi(t,g[N]);if(b){const{transitionEnd:T,transition:C,...k}=b;for(const D in k){let E=k[D];if(Array.isArray(E)){const y=h?E.length-1:0;E=E[y]}E!==null&&(i[D]=E)}for(const D in T)i[D]=T[D]}}}return i}const Ln=t=>(s,a)=>{const n=v.useContext(os),i=v.useContext(Vs),c=()=>_l(t,s,n,i);return a?c():Nl(c)},Bl=Ln({scrapeMotionValuesFromProps:li,createRenderState:Us}),Vl=Ln({scrapeMotionValuesFromProps:ci,createRenderState:Mn}),Ul=Symbol.for("motionComponentSymbol");function Mt(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function zl(t,s,a){return v.useCallback(n=>{n&&t.onMount&&t.onMount(n),s&&(n?s.mount(n):s.unmount()),a&&(typeof a=="function"?a(n):Mt(a)&&(a.current=n))},[s])}const On=v.createContext({});function Gl(t,s,a,n,i){const{visualElement:c}=v.useContext(os),r=v.useContext(In),o=v.useContext(Vs),u=v.useContext(Dn).reducedMotion,d=v.useRef(null);n=n||r.renderer,!d.current&&n&&(d.current=n(t,{visualState:s,parent:c,props:a,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:u}));const h=d.current,l=v.useContext(On);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&Hl(d.current,a,i,l);const g=v.useRef(!1);v.useInsertionEffect(()=>{h&&g.current&&h.update(a,o)});const N=a[di],b=v.useRef(!!N&&!window.MotionHandoffIsComplete?.(N)&&window.MotionHasOptimisedAnimation?.(N));return kl(()=>{h&&(g.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),b.current&&h.animationState&&h.animationState.animateChanges())}),v.useEffect(()=>{h&&(!b.current&&h.animationState&&h.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(N)}),b.current=!1),h.enteringChildren=void 0)}),h}function Hl(t,s,a,n){const{layoutId:i,layout:c,drag:r,dragConstraints:o,layoutScroll:u,layoutRoot:d,layoutCrossfade:h}=s;t.projection=new a(t.latestValues,s["data-framer-portal-id"]?void 0:Fn(t.parent)),t.projection.setOptions({layoutId:i,layout:c,alwaysMeasureLayout:!!r||o&&Mt(o),visualElement:t,animationType:typeof c=="string"?c:"both",initialPromotionConfig:n,crossfade:h,layoutScroll:u,layoutRoot:d})}function Fn(t){if(t)return t.options.allowProjection!==!1?t.projection:Fn(t.parent)}function fs(t,{forwardMotionProps:s=!1}={},a,n){a&&Cl(a);const i=zs(t)?Vl:Bl;function c(o,u){let d;const h={...v.useContext(Dn),...o,layoutId:ql(o)},{isStatic:l}=h,g=Il(o),N=i(o,l);if(!l&&rn){Wl();const b=Yl(h);d=b.MeasureLayout,g.visualElement=Gl(t,N,h,n,b.ProjectionNode)}return e.jsxs(os.Provider,{value:g,children:[d&&g.visualElement?e.jsx(d,{visualElement:g.visualElement,...h}):null,Fl(t,o,zl(N,g.visualElement,u),N,l,s)]})}c.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const r=v.forwardRef(c);return r[Ul]=t,r}function ql({layoutId:t}){const s=v.useContext(En).id;return s&&t!==void 0?s+"-"+t:t}function Wl(t,s){v.useContext(In).strict}function Yl(t){const{drag:s,layout:a}=Cs;if(!s&&!a)return{};const n={...s,...a};return{MeasureLayout:s?.isEnabled(t)||a?.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function Kl(t,s){if(typeof Proxy>"u")return fs;const a=new Map,n=(c,r)=>fs(c,r,t,s),i=(c,r)=>n(c,r);return new Proxy(i,{get:(c,r)=>r==="create"?n:(a.has(r)||a.set(r,fs(r,void 0,t,s)),a.get(r))})}const Jl=(t,s)=>zs(t)?new ui(s):new mi(s,{allowProjection:t!==v.Fragment});function _n(t,s,a,n=0,i=1){const c=Array.from(t).sort((d,h)=>d.sortNodePosition(h)).indexOf(s),r=t.size,o=(r-1)*n;return typeof a=="function"?a(c,r):i===1?c*n:o-c*n}function Is(t,s,a={}){const n=_t(t,s,a.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=n||{};a.transitionOverride&&(i=a.transitionOverride);const c=n?()=>Promise.all(ln(t,n,a)):()=>Promise.resolve(),r=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:l}=i;return Xl(t,s,u,d,h,l,a)}:()=>Promise.resolve(),{when:o}=i;if(o){const[u,d]=o==="beforeChildren"?[c,r]:[r,c];return u().then(()=>d())}else return Promise.all([c(),r(a.delay)])}function Xl(t,s,a=0,n=0,i=0,c=1,r){const o=[];for(const u of t.variantChildren)u.notify("AnimationStart",s),o.push(Is(u,s,{...r,delay:a+(typeof n=="function"?0:n)+_n(t.variantChildren,u,n,i,c)}).then(()=>u.notify("AnimationComplete",s)));return Promise.all(o)}function Zl(t,s,a={}){t.notify("AnimationStart",s);let n;if(Array.isArray(s)){const i=s.map(c=>Is(t,c,a));n=Promise.all(i)}else if(typeof s=="string")n=Is(t,s,a);else{const i=typeof s=="function"?_t(t,s,a.custom):s;n=Promise.all(ln(t,i,a))}return n.then(()=>{t.notify("AnimationComplete",s)})}function $n(t,s){if(!Array.isArray(s))return!1;const a=s.length;if(a!==t.length)return!1;for(let n=0;n<a;n++)if(s[n]!==t[n])return!1;return!0}const Ql=cn.length;function Bn(t){if(!t)return;if(!t.isControllingVariants){const a=t.parent?Bn(t.parent)||{}:{};return t.props.initial!==void 0&&(a.initial=t.props.initial),a}const s={};for(let a=0;a<Ql;a++){const n=cn[a],i=t.props[n];(Qt(i)||i===!1)&&(s[n]=i)}return s}const ec=[...dn].reverse(),tc=dn.length;function sc(t){return s=>Promise.all(s.map(({animation:a,options:n})=>Zl(t,a,n)))}function ac(t){let s=sc(t),a=ra(),n=!0;const i=u=>(d,h)=>{const l=_t(t,h,u==="exit"?t.presenceContext?.custom:void 0);if(l){const{transition:g,transitionEnd:N,...b}=l;d={...d,...b,...N}}return d};function c(u){s=u(t)}function r(u){const{props:d}=t,h=Bn(t.parent)||{},l=[],g=new Set;let N={},b=1/0;for(let C=0;C<tc;C++){const k=ec[C],D=a[k],E=d[k]!==void 0?d[k]:h[k],y=Qt(E),M=k===u?D.isActive:null;M===!1&&(b=C);let J=E===h[k]&&E!==d[k]&&y;if(J&&n&&t.manuallyAnimateOnMount&&(J=!1),D.protectedKeys={...N},!D.isActive&&M===null||!E&&!D.prevProp||Os(E)||typeof E=="boolean")continue;const B=nc(D.prevProp,E);let w=B||k===u&&D.isActive&&!J&&y||C>b&&y,V=!1;const Z=Array.isArray(E)?E:[E];let ae=Z.reduce(i(k),{});M===!1&&(ae={});const{prevResolvedValues:ne={}}=D,se={...ne,...ae},we=W=>{w=!0,g.has(W)&&(V=!0,g.delete(W)),D.needsAnimating[W]=!0;const pe=t.getValue(W);pe&&(pe.liveStyle=!1)};for(const W in se){const pe=ae[W],je=ne[W];if(N.hasOwnProperty(W))continue;let j=!1;Hs(pe)&&Hs(je)?j=!$n(pe,je):j=pe!==je,j?pe!=null?we(W):g.add(W):pe!==void 0&&g.has(W)?we(W):D.protectedKeys[W]=!0}D.prevProp=E,D.prevResolvedValues=ae,D.isActive&&(N={...N,...ae}),n&&t.blockInitialAnimation&&(w=!1);const be=J&&B;w&&(!be||V)&&l.push(...Z.map(W=>{const pe={type:k};if(typeof W=="string"&&n&&!be&&t.manuallyAnimateOnMount&&t.parent){const{parent:je}=t,j=_t(je,W);if(je.enteringChildren&&j){const{delayChildren:m}=j.transition||{};pe.delay=_n(je.enteringChildren,t,m)}}return{animation:W,options:pe}}))}if(g.size){const C={};if(typeof d.initial!="boolean"){const k=_t(t,Array.isArray(d.initial)?d.initial[0]:d.initial);k&&k.transition&&(C.transition=k.transition)}g.forEach(k=>{const D=t.getBaseTarget(k),E=t.getValue(k);E&&(E.liveStyle=!0),C[k]=D??null}),l.push({animation:C})}let T=!!l.length;return n&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(T=!1),n=!1,T?s(l):Promise.resolve()}function o(u,d){if(a[u].isActive===d)return Promise.resolve();t.variantChildren?.forEach(l=>l.animationState?.setActive(u,d)),a[u].isActive=d;const h=r(u);for(const l in a)a[l].protectedKeys={};return h}return{animateChanges:r,setActive:o,setAnimateFunction:c,getState:()=>a,reset:()=>{a=ra()}}}function nc(t,s){return typeof s=="string"?s!==t:Array.isArray(s)?!$n(s,t):!1}function jt(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ra(){return{animate:jt(!0),whileInView:jt(),whileHover:jt(),whileTap:jt(),whileDrag:jt(),whileFocus:jt(),exit:jt()}}class xt{constructor(s){this.isMounted=!1,this.node=s}update(){}}class rc extends xt{constructor(s){super(s),s.animationState||(s.animationState=ac(s))}updateAnimationControlsSubscription(){const{animate:s}=this.node.getProps();Os(s)&&(this.unmountControls=s.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:s}=this.node.getProps(),{animate:a}=this.node.prevProps||{};s!==a&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let ic=0;class oc extends xt{constructor(){super(...arguments),this.id=ic++}update(){if(!this.node.presenceContext)return;const{isPresent:s,onExitComplete:a}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||s===n)return;const i=this.node.animationState.setActive("exit",!s);a&&!s&&i.then(()=>{a(this.id)})}mount(){const{register:s,onExitComplete:a}=this.node.presenceContext||{};a&&a(this.id),s&&(this.unmount=s(this.id))}unmount(){}}const lc={animation:{Feature:rc},exit:{Feature:oc}};function zt(t,s,a,n={passive:!0}){return t.addEventListener(s,a,n),()=>t.removeEventListener(s,a)}function Gt(t){return{point:{x:t.pageX,y:t.pageY}}}const cc=t=>s=>un(s)&&t(s,Gt(s));function $t(t,s,a,n){return zt(t,s,cc(a),n)}const Vn=1e-4,dc=1-Vn,uc=1+Vn,Un=.01,mc=0-Un,hc=0+Un;function Je(t){return t.max-t.min}function pc(t,s,a){return Math.abs(t-s)<=a}function ia(t,s,a,n=.5){t.origin=n,t.originPoint=Ue(s.min,s.max,t.origin),t.scale=Je(a)/Je(s),t.translate=Ue(a.min,a.max,t.origin)-t.originPoint,(t.scale>=dc&&t.scale<=uc||isNaN(t.scale))&&(t.scale=1),(t.translate>=mc&&t.translate<=hc||isNaN(t.translate))&&(t.translate=0)}function Bt(t,s,a,n){ia(t.x,s.x,a.x,n?n.originX:void 0),ia(t.y,s.y,a.y,n?n.originY:void 0)}function oa(t,s,a){t.min=a.min+s.min,t.max=t.min+Je(s)}function fc(t,s,a){oa(t.x,s.x,a.x),oa(t.y,s.y,a.y)}function la(t,s,a){t.min=s.min-a.min,t.max=t.min+Je(s)}function ss(t,s,a){la(t.x,s.x,a.x),la(t.y,s.y,a.y)}function it(t){return[t("x"),t("y")]}const zn=({current:t})=>t?t.ownerDocument.defaultView:null;class Gn{constructor(s,a,{transformPagePoint:n,contextWindow:i=window,dragSnapToOrigin:c=!1,distanceThreshold:r=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=xs(this.lastMoveEventInfo,this.history),N=this.startEvent!==null,b=hi(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!N&&!b)return;const{point:T}=g,{timestamp:C}=nt;this.history.push({...T,timestamp:C});const{onStart:k,onMove:D}=this.handlers;N||(k&&k(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),D&&D(this.lastMoveEvent,g)},this.handlePointerMove=(g,N)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=gs(N,this.transformPagePoint),et.update(this.updatePoint,!0)},this.handlePointerUp=(g,N)=>{this.end();const{onEnd:b,onSessionEnd:T,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=xs(g.type==="pointercancel"?this.lastMoveEventInfo:gs(N,this.transformPagePoint),this.history);this.startEvent&&b&&b(g,k),T&&T(g,k)},!un(s))return;this.dragSnapToOrigin=c,this.handlers=a,this.transformPagePoint=n,this.distanceThreshold=r,this.contextWindow=i||window;const o=Gt(s),u=gs(o,this.transformPagePoint),{point:d}=u,{timestamp:h}=nt;this.history=[{...d,timestamp:h}];const{onSessionStart:l}=a;l&&l(s,xs(u,this.history)),this.removeListeners=mn($t(this.contextWindow,"pointermove",this.handlePointerMove),$t(this.contextWindow,"pointerup",this.handlePointerUp),$t(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(s){this.handlers=s}end(){this.removeListeners&&this.removeListeners(),As(this.updatePoint)}}function gs(t,s){return s?{point:s(t.point)}:t}function ca(t,s){return{x:t.x-s.x,y:t.y-s.y}}function xs({point:t},s){return{point:t,delta:ca(t,Hn(s)),offset:ca(t,gc(s)),velocity:xc(s,.1)}}function gc(t){return t[0]}function Hn(t){return t[t.length-1]}function xc(t,s){if(t.length<2)return{x:0,y:0};let a=t.length-1,n=null;const i=Hn(t);for(;a>=0&&(n=t[a],!(i.timestamp-n.timestamp>pi(s)));)a--;if(!n)return{x:0,y:0};const c=fi(i.timestamp-n.timestamp);if(c===0)return{x:0,y:0};const r={x:(i.x-n.x)/c,y:(i.y-n.y)/c};return r.x===1/0&&(r.x=0),r.y===1/0&&(r.y=0),r}function bc(t,{min:s,max:a},n){return s!==void 0&&t<s?t=n?Ue(s,t,n.min):Math.max(t,s):a!==void 0&&t>a&&(t=n?Ue(a,t,n.max):Math.min(t,a)),t}function da(t,s,a){return{min:s!==void 0?t.min+s:void 0,max:a!==void 0?t.max+a-(t.max-t.min):void 0}}function yc(t,{top:s,left:a,bottom:n,right:i}){return{x:da(t.x,a,i),y:da(t.y,s,n)}}function ua(t,s){let a=s.min-t.min,n=s.max-t.max;return s.max-s.min<t.max-t.min&&([a,n]=[n,a]),{min:a,max:n}}function vc(t,s){return{x:ua(t.x,s.x),y:ua(t.y,s.y)}}function wc(t,s){let a=.5;const n=Je(t),i=Je(s);return i>n?a=Ts(s.min,s.max-n,t.min):n>i&&(a=Ts(t.min,t.max-i,s.min)),hn(0,1,a)}function jc(t,s){const a={};return s.min!==void 0&&(a.min=s.min-t.min),s.max!==void 0&&(a.max=s.max-t.min),a}const Ps=.35;function Nc(t=Ps){return t===!1?t=0:t===!0&&(t=Ps),{x:ma(t,"left","right"),y:ma(t,"top","bottom")}}function ma(t,s,a){return{min:ha(t,s),max:ha(t,a)}}function ha(t,s){return typeof t=="number"?t:t[s]||0}const kc=new WeakMap;class Sc{constructor(s){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ve(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=s}start(s,{snapToCursor:a=!1,distanceThreshold:n}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const c=l=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),a&&this.snapToCursor(Gt(l).point)},r=(l,g)=>{const{drag:N,dragPropagation:b,onDragStart:T}=this.getProps();if(N&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=vi(N),!this.openDragLock))return;this.latestPointerEvent=l,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),it(k=>{let D=this.getAxisMotionValue(k).get()||0;if(es.test(D)){const{projection:E}=this.visualElement;if(E&&E.layout){const y=E.layout.layoutBox[k];y&&(D=Je(y)*(parseFloat(D)/100))}}this.originPoint[k]=D}),T&&et.postRender(()=>T(l,g)),qs(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},o=(l,g)=>{this.latestPointerEvent=l,this.latestPanInfo=g;const{dragPropagation:N,dragDirectionLock:b,onDirectionLock:T,onDrag:C}=this.getProps();if(!N&&!this.openDragLock)return;const{offset:k}=g;if(b&&this.currentDirection===null){this.currentDirection=Cc(k),this.currentDirection!==null&&T&&T(this.currentDirection);return}this.updateAxis("x",g.point,k),this.updateAxis("y",g.point,k),this.visualElement.render(),C&&C(l,g)},u=(l,g)=>{this.latestPointerEvent=l,this.latestPanInfo=g,this.stop(l,g),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>it(l=>this.getAnimationState(l)==="paused"&&this.getAxisMotionValue(l).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new Gn(s,{onSessionStart:c,onStart:r,onMove:o,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:n,contextWindow:zn(this.visualElement)})}stop(s,a){const n=s||this.latestPointerEvent,i=a||this.latestPanInfo,c=this.isDragging;if(this.cancel(),!c||!i||!n)return;const{velocity:r}=i;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&et.postRender(()=>o(n,i))}cancel(){this.isDragging=!1;const{projection:s,animationState:a}=this.visualElement;s&&(s.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),a&&a.setActive("whileDrag",!1)}updateAxis(s,a,n){const{drag:i}=this.getProps();if(!n||!Kt(s,i,this.currentDirection))return;const c=this.getAxisMotionValue(s);let r=this.originPoint[s]+n[s];this.constraints&&this.constraints[s]&&(r=bc(r,this.constraints[s],this.elastic[s])),c.set(r)}resolveConstraints(){const{dragConstraints:s,dragElastic:a}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;s&&Mt(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&n?this.constraints=yc(n.layoutBox,s):this.constraints=!1,this.elastic=Nc(a),i!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&it(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=jc(n.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:s,onMeasureDragConstraints:a}=this.getProps();if(!s||!Mt(s))return!1;const n=s.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const c=gi(n,i.root,this.visualElement.getTransformPagePoint());let r=vc(i.layout.layoutBox,c);if(a){const o=a(xi(r));this.hasMutatedConstraints=!!o,o&&(r=bi(o))}return r}startAnimation(s){const{drag:a,dragMomentum:n,dragElastic:i,dragTransition:c,dragSnapToOrigin:r,onDragTransitionEnd:o}=this.getProps(),u=this.constraints||{},d=it(h=>{if(!Kt(h,a,this.currentDirection))return;let l=u&&u[h]||{};r&&(l={min:0,max:0});const g=i?200:1e6,N=i?40:1e7,b={type:"inertia",velocity:n?s[h]:0,bounceStiffness:g,bounceDamping:N,timeConstant:750,restDelta:1,restSpeed:10,...c,...l};return this.startAxisValueAnimation(h,b)});return Promise.all(d).then(o)}startAxisValueAnimation(s,a){const n=this.getAxisMotionValue(s);return qs(this.visualElement,s),n.start(yi(s,n,0,a,this.visualElement,!1))}stopAnimation(){it(s=>this.getAxisMotionValue(s).stop())}pauseAnimation(){it(s=>this.getAxisMotionValue(s).animation?.pause())}getAnimationState(s){return this.getAxisMotionValue(s).animation?.state}getAxisMotionValue(s){const a=`_drag${s.toUpperCase()}`,n=this.visualElement.getProps(),i=n[a];return i||this.visualElement.getValue(s,(n.initial?n.initial[s]:void 0)||0)}snapToCursor(s){it(a=>{const{drag:n}=this.getProps();if(!Kt(a,n,this.currentDirection))return;const{projection:i}=this.visualElement,c=this.getAxisMotionValue(a);if(i&&i.layout){const{min:r,max:o}=i.layout.layoutBox[a];c.set(s[a]-Ue(r,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:s,dragConstraints:a}=this.getProps(),{projection:n}=this.visualElement;if(!Mt(a)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};it(r=>{const o=this.getAxisMotionValue(r);if(o&&this.constraints!==!1){const u=o.get();i[r]=wc({min:u,max:u},this.constraints[r])}});const{transformTemplate:c}=this.visualElement.getProps();this.visualElement.current.style.transform=c?c({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),it(r=>{if(!Kt(r,s,null))return;const o=this.getAxisMotionValue(r),{min:u,max:d}=this.constraints[r];o.set(Ue(u,d,i[r]))})}addListeners(){if(!this.visualElement.current)return;kc.set(this.visualElement,this);const s=this.visualElement.current,a=$t(s,"pointerdown",u=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(u)}),n=()=>{const{dragConstraints:u}=this.getProps();Mt(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,c=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),et.read(n);const r=zt(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(it(h=>{const l=this.getAxisMotionValue(h);l&&(this.originPoint[h]+=u[h].translate,l.set(l.get()+u[h].translate))}),this.visualElement.render())}));return()=>{r(),a(),c(),o&&o()}}getProps(){const s=this.visualElement.getProps(),{drag:a=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:c=!1,dragElastic:r=Ps,dragMomentum:o=!0}=s;return{...s,drag:a,dragDirectionLock:n,dragPropagation:i,dragConstraints:c,dragElastic:r,dragMomentum:o}}}function Kt(t,s,a){return(s===!0||s===t)&&(a===null||a===t)}function Cc(t,s=10){let a=null;return Math.abs(t.y)>s?a="y":Math.abs(t.x)>s&&(a="x"),a}class Ac extends xt{constructor(s){super(s),this.removeGroupControls=Lt,this.removeListeners=Lt,this.controls=new Sc(s)}mount(){const{dragControls:s}=this.node.getProps();s&&(this.removeGroupControls=s.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Lt}unmount(){this.removeGroupControls(),this.removeListeners()}}const pa=t=>(s,a)=>{t&&et.postRender(()=>t(s,a))};class Tc extends xt{constructor(){super(...arguments),this.removePointerDownListener=Lt}onPointerDown(s){this.session=new Gn(s,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:zn(this.node)})}createPanHandlers(){const{onPanSessionStart:s,onPanStart:a,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:pa(s),onStart:pa(a),onMove:n,onEnd:(c,r)=>{delete this.session,i&&et.postRender(()=>i(c,r))}}}mount(){this.removePointerDownListener=$t(this.node.current,"pointerdown",s=>this.onPointerDown(s))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Xt={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let bs=!1;class Ec extends v.Component{componentDidMount(){const{visualElement:s,layoutGroup:a,switchLayoutGroup:n,layoutId:i}=this.props,{projection:c}=s;c&&(a.group&&a.group.add(c),n&&n.register&&i&&n.register(c),bs&&c.root.didUpdate(),c.addEventListener("animationComplete",()=>{this.safeToRemove()}),c.setOptions({...c.options,onExitComplete:()=>this.safeToRemove()})),Xt.hasEverUpdated=!0}getSnapshotBeforeUpdate(s){const{layoutDependency:a,visualElement:n,drag:i,isPresent:c}=this.props,{projection:r}=n;return r&&(r.isPresent=c,bs=!0,i||s.layoutDependency!==a||a===void 0||s.isPresent!==c?r.willUpdate():this.safeToRemove(),s.isPresent!==c&&(c?r.promote():r.relegate()||et.postRender(()=>{const o=r.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:s}=this.props.visualElement;s&&(s.root.didUpdate(),pn.postRender(()=>{!s.currentAnimation&&s.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:s,layoutGroup:a,switchLayoutGroup:n}=this.props,{projection:i}=s;bs=!0,i&&(i.scheduleCheckAfterUnmount(),a&&a.group&&a.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:s}=this.props;s&&s()}render(){return null}}function qn(t){const[s,a]=Sl(),n=v.useContext(En);return e.jsx(Ec,{...t,layoutGroup:n,switchLayoutGroup:v.useContext(On),isPresent:s,safeToRemove:a})}const Dc=(t,s)=>t.depth-s.depth;class Ic{constructor(){this.children=[],this.isDirty=!1}add(s){fn(this.children,s),this.isDirty=!0}remove(s){gn(this.children,s),this.isDirty=!0}forEach(s){this.isDirty&&this.children.sort(Dc),this.isDirty=!1,this.children.forEach(s)}}const Wn=["TopLeft","TopRight","BottomLeft","BottomRight"],Pc=Wn.length,fa=t=>typeof t=="string"?parseFloat(t):t,ga=t=>typeof t=="number"||wi.test(t);function Rc(t,s,a,n,i,c){i?(t.opacity=Ue(0,a.opacity??1,Mc(n)),t.opacityExit=Ue(s.opacity??1,0,Lc(n))):c&&(t.opacity=Ue(s.opacity??1,a.opacity??1,n));for(let r=0;r<Pc;r++){const o=`border${Wn[r]}Radius`;let u=xa(s,o),d=xa(a,o);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||ga(u)===ga(d)?(t[o]=Math.max(Ue(fa(u),fa(d),n),0),(es.test(d)||es.test(u))&&(t[o]+="%")):t[o]=d}(s.rotate||a.rotate)&&(t.rotate=Ue(s.rotate||0,a.rotate||0,n))}function xa(t,s){return t[s]!==void 0?t[s]:t.borderRadius}const Mc=Yn(0,.5,ji),Lc=Yn(.5,.95,Lt);function Yn(t,s,a){return n=>n<t?0:n>s?1:a(Ts(t,s,n))}function ba(t,s){t.min=s.min,t.max=s.max}function ot(t,s){ba(t.x,s.x),ba(t.y,s.y)}function ya(t,s){t.translate=s.translate,t.scale=s.scale,t.originPoint=s.originPoint,t.origin=s.origin}function va(t,s,a,n,i){return t-=s,t=Ws(t,1/a,n),i!==void 0&&(t=Ws(t,1/i,n)),t}function Oc(t,s=0,a=1,n=.5,i,c=t,r=t){if(es.test(s)&&(s=parseFloat(s),s=Ue(r.min,r.max,s/100)-r.min),typeof s!="number")return;let o=Ue(c.min,c.max,n);t===c&&(o-=s),t.min=va(t.min,s,a,o,i),t.max=va(t.max,s,a,o,i)}function wa(t,s,[a,n,i],c,r){Oc(t,s[a],s[n],s[i],s.scale,c,r)}const Fc=["x","scaleX","originX"],_c=["y","scaleY","originY"];function ja(t,s,a,n){wa(t.x,s,Fc,a?a.x:void 0,n?n.x:void 0),wa(t.y,s,_c,a?a.y:void 0,n?n.y:void 0)}function Na(t){return t.translate===0&&t.scale===1}function Kn(t){return Na(t.x)&&Na(t.y)}function ka(t,s){return t.min===s.min&&t.max===s.max}function $c(t,s){return ka(t.x,s.x)&&ka(t.y,s.y)}function Sa(t,s){return Math.round(t.min)===Math.round(s.min)&&Math.round(t.max)===Math.round(s.max)}function Jn(t,s){return Sa(t.x,s.x)&&Sa(t.y,s.y)}function Ca(t){return Je(t.x)/Je(t.y)}function Aa(t,s){return t.translate===s.translate&&t.scale===s.scale&&t.originPoint===s.originPoint}class Bc{constructor(){this.members=[]}add(s){fn(this.members,s),s.scheduleRender()}remove(s){if(gn(this.members,s),s===this.prevLead&&(this.prevLead=void 0),s===this.lead){const a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(s){const a=this.members.findIndex(i=>s===i);if(a===0)return!1;let n;for(let i=a;i>=0;i--){const c=this.members[i];if(c.isPresent!==!1){n=c;break}}return n?(this.promote(n),!0):!1}promote(s,a){const n=this.lead;if(s!==n&&(this.prevLead=n,this.lead=s,s.show(),n)){n.instance&&n.scheduleRender(),s.scheduleRender(),s.resumeFrom=n,a&&(s.resumeFrom.preserveOpacity=!0),n.snapshot&&(s.snapshot=n.snapshot,s.snapshot.latestValues=n.animationValues||n.latestValues),s.root&&s.root.isUpdating&&(s.isLayoutDirty=!0);const{crossfade:i}=s.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(s=>{const{options:a,resumingFrom:n}=s;a.onExitComplete&&a.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(s=>{s.instance&&s.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Vc(t,s,a){let n="";const i=t.x.translate/s.x,c=t.y.translate/s.y,r=a?.z||0;if((i||c||r)&&(n=`translate3d(${i}px, ${c}px, ${r}px) `),(s.x!==1||s.y!==1)&&(n+=`scale(${1/s.x}, ${1/s.y}) `),a){const{transformPerspective:d,rotate:h,rotateX:l,rotateY:g,skewX:N,skewY:b}=a;d&&(n=`perspective(${d}px) ${n}`),h&&(n+=`rotate(${h}deg) `),l&&(n+=`rotateX(${l}deg) `),g&&(n+=`rotateY(${g}deg) `),N&&(n+=`skewX(${N}deg) `),b&&(n+=`skewY(${b}deg) `)}const o=t.x.scale*s.x,u=t.y.scale*s.y;return(o!==1||u!==1)&&(n+=`scale(${o}, ${u})`),n||"none"}const ys=["","X","Y","Z"],Uc=1e3;let zc=0;function vs(t,s,a,n){const{latestValues:i}=s;i[t]&&(a[t]=i[t],s.setStaticValue(t,0),n&&(n[t]=0))}function Xn(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:s}=t.options;if(!s)return;const a=Mi(s);if(window.MotionHasOptimisedAnimation(a,"transform")){const{layout:i,layoutId:c}=t.options;window.MotionCancelOptimisedAnimation(a,"transform",et,!(i||c))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&Xn(n)}function Zn({attachResizeListener:t,defaultParent:s,measureScroll:a,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(r={},o=s?.()){this.id=zc++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(qc),this.nodes.forEach(Jc),this.nodes.forEach(Xc),this.nodes.forEach(Wc)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=r,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ic)}addEventListener(r,o){return this.eventHandlers.has(r)||this.eventHandlers.set(r,new Ni),this.eventHandlers.get(r).add(o)}notifyListeners(r,...o){const u=this.eventHandlers.get(r);u&&u.notify(...o)}hasListeners(r){return this.eventHandlers.has(r)}mount(r){if(this.instance)return;this.isSVG=ki(r)&&!Si(r),this.instance=r;const{layoutId:o,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(r),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||o)&&(this.isLayoutDirty=!0),t){let h,l=0;const g=()=>this.root.updateBlockedByResize=!1;et.read(()=>{l=window.innerWidth}),t(r,()=>{const N=window.innerWidth;N!==l&&(l=N,this.root.updateBlockedByResize=!0,h&&h(),h=Ci(g,250),Xt.hasAnimatedSinceResize&&(Xt.hasAnimatedSinceResize=!1,this.nodes.forEach(Da)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&d&&(o||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:l,hasRelativeLayoutChanged:g,layout:N})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||d.getDefaultTransition()||sd,{onLayoutAnimationStart:T,onLayoutAnimationComplete:C}=d.getProps(),k=!this.targetLayout||!Jn(this.targetLayout,N),D=!l&&g;if(this.options.layoutRoot||this.resumeFrom||D||l&&(k||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const E={...Ai(b,"layout"),onPlay:T,onComplete:C};(d.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E),this.setAnimationOrigin(h,D)}else l||Da(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=N})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const r=this.getStack();r&&r.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),As(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Zc),this.animationId++)}getTransformTemplate(){const{visualElement:r}=this.options;return r&&r.getProps().transformTemplate}willUpdate(r=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Xn(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const l=this.path[h];l.shouldResetTransform=!0,l.updateScroll("snapshot"),l.options.layoutRoot&&l.willUpdate(!1)}const{layoutId:o,layout:u}=this.options;if(o===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),r&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ta);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Ea);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Kc),this.nodes.forEach(Gc),this.nodes.forEach(Hc)):this.nodes.forEach(Ea),this.clearAllSnapshots();const o=Ti.now();nt.delta=hn(0,1e3/60,o-nt.timestamp),nt.timestamp=o,nt.isProcessing=!0,cs.update.process(nt),cs.preRender.process(nt),cs.render.process(nt),nt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,pn.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Yc),this.sharedNodes.forEach(Qc)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,et.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){et.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Je(this.snapshot.measuredBox.x)&&!Je(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const r=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Ve(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,r?r.layoutBox:void 0)}updateScroll(r="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===r&&(o=!1),o&&this.instance){const u=n(this.instance);this.scroll={animationId:this.root.animationId,phase:r,isRoot:u,offset:a(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const r=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!Kn(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;r&&this.instance&&(o||Dt(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(r=!0){const o=this.measurePageBox();let u=this.removeElementScroll(o);return r&&(u=this.removeTransform(u)),ad(u),{animationId:this.root.animationId,measuredBox:o,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:r}=this.options;if(!r)return Ve();const o=r.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(nd))){const{scroll:d}=this.root;d&&(Ht(o.x,d.offset.x),Ht(o.y,d.offset.y))}return o}removeElementScroll(r){const o=Ve();if(ot(o,r),this.scroll?.wasRoot)return o;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:l}=d;d!==this.root&&h&&l.layoutScroll&&(h.wasRoot&&ot(o,r),Ht(o.x,h.offset.x),Ht(o.y,h.offset.y))}return o}applyTransform(r,o=!1){const u=Ve();ot(u,r);for(let d=0;d<this.path.length;d++){const h=this.path[d];!o&&h.options.layoutScroll&&h.scroll&&h!==h.root&&qt(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Dt(h.latestValues)&&qt(u,h.latestValues)}return Dt(this.latestValues)&&qt(u,this.latestValues),u}removeTransform(r){const o=Ve();ot(o,r);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!Dt(d.latestValues))continue;Ys(d.latestValues)&&d.updateSnapshot();const h=Ve(),l=d.measurePageBox();ot(h,l),ja(o,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return Dt(this.latestValues)&&ja(o,this.latestValues),o}setTargetDelta(r){this.targetDelta=r,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(r){this.options={...this.options,...r,crossfade:r.crossfade!==void 0?r.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==nt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(r=!1){const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==o;if(!(r||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:l}=this.options;if(!this.layout||!(h||l))return;this.resolvedRelativeTargetAt=nt.timestamp;const g=this.getClosestProjectingParent();g&&this.linkedParentVersion!==g.layoutVersion&&!g.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(g&&g.layout?this.createRelativeTarget(g,this.layout.layoutBox,g.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ve(),this.targetWithTransforms=Ve()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),fc(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ot(this.target,this.layout.layoutBox),Ei(this.target,this.targetDelta)):ot(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?this.createRelativeTarget(g,this.target,g.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Ys(this.parent.latestValues)||Di(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(r,o,u){this.relativeParent=r,this.linkedParentVersion=r.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ve(),this.relativeTargetOrigin=Ve(),ss(this.relativeTargetOrigin,o,u),ot(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const r=this.getLead(),o=!!this.resumingFrom||this!==r;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===nt.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;ot(this.layoutCorrected,this.layout.layoutBox);const l=this.treeScale.x,g=this.treeScale.y;Ii(this.layoutCorrected,this.treeScale,this.path,o),r.layout&&!r.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(r.target=r.layout.layoutBox,r.targetWithTransforms=Ve());const{target:N}=r;if(!N){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ya(this.prevProjectionDelta.x,this.projectionDelta.x),ya(this.prevProjectionDelta.y,this.projectionDelta.y)),Bt(this.projectionDelta,this.layoutCorrected,N,this.latestValues),(this.treeScale.x!==l||this.treeScale.y!==g||!Aa(this.projectionDelta.x,this.prevProjectionDelta.x)||!Aa(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",N))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(r=!0){if(this.options.visualElement?.scheduleRender(),r){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=It(),this.projectionDelta=It(),this.projectionDeltaWithTransform=It()}setAnimationOrigin(r,o=!1){const u=this.snapshot,d=u?u.latestValues:{},h={...this.latestValues},l=It();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const g=Ve(),N=u?u.source:void 0,b=this.layout?this.layout.source:void 0,T=N!==b,C=this.getStack(),k=!C||C.members.length<=1,D=!!(T&&!k&&this.options.crossfade===!0&&!this.path.some(td));this.animationProgress=0;let E;this.mixTargetDelta=y=>{const M=y/1e3;Ia(l.x,r.x,M),Ia(l.y,r.y,M),this.setTargetDelta(l),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ss(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),ed(this.relativeTarget,this.relativeTargetOrigin,g,M),E&&$c(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=Ve()),ot(E,this.relativeTarget)),T&&(this.animationValues=h,Rc(h,d,this.latestValues,M,D,k)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=M},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(r){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(As(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=et.update(()=>{Xt.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Pi(0)),this.currentAnimation=Ri(this.motionValue,[0,1e3],{...r,velocity:0,isSync:!0,onUpdate:o=>{this.mixTargetDelta(o),r.onUpdate&&r.onUpdate(o)},onStop:()=>{},onComplete:()=>{r.onComplete&&r.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const r=this.getStack();r&&r.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Uc),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const r=this.getLead();let{targetWithTransforms:o,target:u,layout:d,latestValues:h}=r;if(!(!o||!u||!d)){if(this!==r&&this.layout&&d&&Qn(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||Ve();const l=Je(this.layout.layoutBox.x);u.x.min=r.target.x.min,u.x.max=u.x.min+l;const g=Je(this.layout.layoutBox.y);u.y.min=r.target.y.min,u.y.max=u.y.min+g}ot(o,u),qt(o,h),Bt(this.projectionDeltaWithTransform,this.layoutCorrected,o,h)}}registerSharedNode(r,o){this.sharedNodes.has(r)||this.sharedNodes.set(r,new Bc),this.sharedNodes.get(r).add(o);const d=o.options.initialPromotionConfig;o.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(o):void 0})}isLead(){const r=this.getStack();return r?r.lead===this:!0}getLead(){const{layoutId:r}=this.options;return r?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:r}=this.options;return r?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:r}=this.options;if(r)return this.root.sharedNodes.get(r)}promote({needsReset:r,transition:o,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),r&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const r=this.getStack();return r?r.relegate(this):!1}resetSkewAndRotation(){const{visualElement:r}=this.options;if(!r)return;let o=!1;const{latestValues:u}=r;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(o=!0),!o)return;const d={};u.z&&vs("z",r,d,this.animationValues);for(let h=0;h<ys.length;h++)vs(`rotate${ys[h]}`,r,d,this.animationValues),vs(`skew${ys[h]}`,r,d,this.animationValues);r.render();for(const h in d)r.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);r.scheduleRender()}applyProjectionStyles(r,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){r.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,r.visibility="",r.opacity="",r.pointerEvents=Jt(o?.pointerEvents)||"",r.transform=u?u(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(r.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,r.pointerEvents=Jt(o?.pointerEvents)||""),this.hasProjected&&!Dt(this.latestValues)&&(r.transform=u?u({},""):"none",this.hasProjected=!1);return}r.visibility="";const h=d.animationValues||d.latestValues;this.applyTransformsToTarget();let l=Vc(this.projectionDeltaWithTransform,this.treeScale,h);u&&(l=u(h,l)),r.transform=l;const{x:g,y:N}=this.projectionDelta;r.transformOrigin=`${g.origin*100}% ${N.origin*100}% 0`,d.animationValues?r.opacity=d===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:r.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const b in Ks){if(h[b]===void 0)continue;const{correct:T,applyTo:C,isCSSVariable:k}=Ks[b],D=l==="none"?h[b]:T(h[b],d);if(C){const E=C.length;for(let y=0;y<E;y++)r[C[y]]=D}else k?this.options.visualElement.renderState.vars[b]=D:r[b]=D}this.options.layoutId&&(r.pointerEvents=d===this?Jt(o?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(r=>r.currentAnimation?.stop()),this.root.nodes.forEach(Ta),this.root.sharedNodes.clear()}}}function Gc(t){t.updateLayout()}function Hc(t){const s=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&s&&t.hasListeners("didUpdate")){const{layoutBox:a,measuredBox:n}=t.layout,{animationType:i}=t.options,c=s.source!==t.layout.source;i==="size"?it(h=>{const l=c?s.measuredBox[h]:s.layoutBox[h],g=Je(l);l.min=a[h].min,l.max=l.min+g}):Qn(i,s.layoutBox,a)&&it(h=>{const l=c?s.measuredBox[h]:s.layoutBox[h],g=Je(a[h]);l.max=l.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+g)});const r=It();Bt(r,a,s.layoutBox);const o=It();c?Bt(o,t.applyTransform(n,!0),s.measuredBox):Bt(o,a,s.layoutBox);const u=!Kn(r);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:l,layout:g}=h;if(l&&g){const N=Ve();ss(N,s.layoutBox,l.layoutBox);const b=Ve();ss(b,a,g.layoutBox),Jn(N,b)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=N,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:a,snapshot:s,delta:o,layoutDelta:r,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:a}=t.options;a&&a()}t.options.transition=void 0}function qc(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Wc(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Yc(t){t.clearSnapshot()}function Ta(t){t.clearMeasurements()}function Ea(t){t.isLayoutDirty=!1}function Kc(t){const{visualElement:s}=t.options;s&&s.getProps().onBeforeLayoutMeasure&&s.notify("BeforeLayoutMeasure"),t.resetTransform()}function Da(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Jc(t){t.resolveTargetDelta()}function Xc(t){t.calcProjection()}function Zc(t){t.resetSkewAndRotation()}function Qc(t){t.removeLeadSnapshot()}function Ia(t,s,a){t.translate=Ue(s.translate,0,a),t.scale=Ue(s.scale,1,a),t.origin=s.origin,t.originPoint=s.originPoint}function Pa(t,s,a,n){t.min=Ue(s.min,a.min,n),t.max=Ue(s.max,a.max,n)}function ed(t,s,a,n){Pa(t.x,s.x,a.x,n),Pa(t.y,s.y,a.y,n)}function td(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const sd={duration:.45,ease:[.4,0,.1,1]},Ra=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Ma=Ra("applewebkit/")&&!Ra("chrome/")?Math.round:Lt;function La(t){t.min=Ma(t.min),t.max=Ma(t.max)}function ad(t){La(t.x),La(t.y)}function Qn(t,s,a){return t==="position"||t==="preserve-aspect"&&!pc(Ca(s),Ca(a),.2)}function nd(t){return t!==t.root&&t.scroll?.wasRoot}const rd=Zn({attachResizeListener:(t,s)=>zt(t,"resize",s),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ws={current:void 0},er=Zn({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!ws.current){const t=new rd({});t.mount(window),t.setOptions({layoutScroll:!0}),ws.current=t}return ws.current},resetTransform:(t,s)=>{t.style.transform=s!==void 0?s:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),id={pan:{Feature:Tc},drag:{Feature:Ac,ProjectionNode:er,MeasureLayout:qn}};function Oa(t,s,a){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",a==="Start");const i="onHover"+a,c=n[i];c&&et.postRender(()=>c(s,Gt(s)))}class od extends xt{mount(){const{current:s}=this.node;s&&(this.unmount=Li(s,(a,n)=>(Oa(this.node,n,"Start"),i=>Oa(this.node,i,"End"))))}unmount(){}}class ld extends xt{constructor(){super(...arguments),this.isActive=!1}onFocus(){let s=!1;try{s=this.node.current.matches(":focus-visible")}catch{s=!0}!s||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=mn(zt(this.node.current,"focus",()=>this.onFocus()),zt(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Fa(t,s,a){const{props:n}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",a==="Start");const i="onTap"+(a==="End"?"":a),c=n[i];c&&et.postRender(()=>c(s,Gt(s)))}class cd extends xt{mount(){const{current:s}=this.node;s&&(this.unmount=Oi(s,(a,n)=>(Fa(this.node,n,"Start"),(i,{success:c})=>Fa(this.node,i,c?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Rs=new WeakMap,js=new WeakMap,dd=t=>{const s=Rs.get(t.target);s&&s(t)},ud=t=>{t.forEach(dd)};function md({root:t,...s}){const a=t||document;js.has(a)||js.set(a,{});const n=js.get(a),i=JSON.stringify(s);return n[i]||(n[i]=new IntersectionObserver(ud,{root:t,...s})),n[i]}function hd(t,s,a){const n=md(s);return Rs.set(t,a),n.observe(t),()=>{Rs.delete(t),n.unobserve(t)}}const pd={some:0,all:1};class fd extends xt{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:s={}}=this.node.getProps(),{root:a,margin:n,amount:i="some",once:c}=s,r={root:a?a.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:pd[i]},o=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,c&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:l}=this.node.getProps(),g=d?h:l;g&&g(u)};return hd(this.node.current,r,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:s,prevProps:a}=this.node;["amount","margin","root"].some(gd(s,a))&&this.startObserver()}unmount(){}}function gd({viewport:t={}},{viewport:s={}}={}){return a=>t[a]!==s[a]}const xd={inView:{Feature:fd},tap:{Feature:cd},focus:{Feature:ld},hover:{Feature:od}},bd={layout:{ProjectionNode:er,MeasureLayout:qn}},yd={...lc,...xd,...id,...bd},lt=Kl(yd,Jl),_a=[{text:"An investment in knowledge pays the best interest.",author:"Benjamin Franklin",category:"financial-literacy"},{text:"It's not how much money you make, but how much money you keep, how hard it works for you, and how many generations you keep it for.",author:"Robert Kiyosaki",category:"financial-literacy"},{text:"Financial peace isn't the acquisition of stuff. It's learning to live on less than you make, so you can give money back and have money to invest.",author:"Dave Ramsey",category:"financial-literacy"},{text:"Do not save what is left after spending; instead spend what is left after saving.",author:"Warren Buffett",category:"financial-literacy"},{text:"The stock market is a device for transferring money from the impatient to the patient.",author:"Warren Buffett",category:"financial-literacy"},{text:"Know what you own, and know why you own it.",author:"Peter Lynch",category:"financial-literacy"},{text:"The individual investor should act consistently as an investor and not as a speculator.",author:"Ben Graham",category:"financial-literacy"},{text:"Price is what you pay. Value is what you get.",author:"Warren Buffett",category:"financial-literacy"},{text:"The goal isn't more money. The goal is living life on your terms.",author:"Chris Brogan",category:"financial-freedom"},{text:"Financial freedom is available to those who learn about it and work for it.",author:"Robert Kiyosaki",category:"financial-freedom"},{text:"The rich invest in time, the poor invest in money.",author:"Warren Buffett",category:"financial-freedom"},{text:"Wealth is the ability to fully experience life.",author:"Henry David Thoreau",category:"financial-freedom"},{text:"It's not about having lots of money. It's about knowing how to manage the money you do have.",author:"Dave Ramsey",category:"financial-freedom"},{text:"Money is a terrible master but an excellent servant.",author:"P.T. Barnum",category:"financial-freedom"},{text:"The quickest way to double your money is to fold it in half and put it in your back pocket.",author:"Will Rogers",category:"financial-freedom"},{text:"The best time to plant a tree was 20 years ago. The second best time is now.",author:"Chinese Proverb",category:"motivation"},{text:"A journey of a thousand miles begins with a single step.",author:"Lao Tzu",category:"motivation"},{text:"Success is not final, failure is not fatal: it is the courage to continue that counts.",author:"Winston Churchill",category:"motivation"},{text:"The only way to do great work is to love what you do.",author:"Steve Jobs",category:"motivation"},{text:"Don't watch the clock; do what it does. Keep going.",author:"Sam Levenson",category:"motivation"},{text:"Wealth is not about having a lot of money; it's about having a lot of options.",author:"Chris Rock",category:"motivation"},{text:"Every time you borrow money, you're robbing your future self.",author:"Nathan W. Morris",category:"motivation"},{text:"The habit of saving is itself an education; it fosters every virtue, teaches self-denial, cultivates the sense of order, trains to forethought, and so broadens the mind.",author:"T.T. Munger",category:"motivation"},{text:"Too many people spend money they haven't earned, to buy things they don't want, to impress people they don't like.",author:"Will Rogers",category:"motivation"},{text:"A budget is telling your money where to go instead of wondering where it went.",author:"Dave Ramsey",category:"motivation"},{text:"Beware of little expenses. A small leak will sink a great ship.",author:"Benjamin Franklin",category:"motivation"},{text:"Never spend your money before you have earned it.",author:"Thomas Jefferson",category:"motivation"}];function $a(){return _a[Math.floor(Math.random()*_a.length)]}function vd({isOpen:t,onClose:s,achievementId:a}){const[n,i]=v.useState($a());if(v.useEffect(()=>{t&&a&&(i($a()),Pt({particleCount:150,spread:100,origin:{y:.6},colors:["#FFD700","#FFA500","#FF6347","#9370DB","#3CB371"]}))},[t,a]),!a)return null;const c=yn(a);return c?e.jsx(St,{open:t,onOpenChange:s,children:e.jsxs(Ct,{className:"w-[270px] sm:w-full sm:max-w-md bg-slate-950 border-[#38383A] p-0 overflow-hidden rounded-[32px] shadow-2xl transition-all duration-500",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 sm:w-64 sm:h-64 bg-yellow-500 blur-[60px] sm:blur-[120px] opacity-10 -mr-16 -mt-16 sm:-mr-32 sm:-mt-32"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 sm:w-48 sm:h-48 bg-indigo-500 blur-[50px] sm:blur-[100px] opacity-5 -ml-12 -mb-12 sm:-ml-24 sm:-mb-24"}),e.jsxs(At,{className:"px-6 sm:px-10 pt-8 sm:pt-12 pb-0 relative z-10",children:[e.jsx(Tt,{className:"text-center text-xl sm:text-3xl font-black text-white tracking-tight transition-all",children:"Achievement Unlocked"}),e.jsx(Et,{className:"text-center text-[8px] sm:text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] sm:tracking-[0.3em] mt-1 sm:mt-2 transition-all",children:"Protocol Milestone Verified"})]}),e.jsxs("div",{className:"space-y-6 sm:space-y-10 py-8 sm:py-12 px-6 sm:px-10 relative z-10",children:[e.jsxs("div",{className:"relative flex justify-center",children:[e.jsx(lt.div,{className:"relative z-10",initial:{scale:0,rotateY:0},animate:{scale:1,rotateY:[0,1080],transition:{scale:{duration:.8,ease:"backOut"},rotateY:{duration:4,ease:"easeInOut"}}},children:e.jsxs("div",{className:"relative",children:[e.jsx(lt.div,{className:"absolute inset-0 bg-yellow-400 blur-3xl opacity-20 rounded-full",animate:{scale:[1,1.3,1],opacity:[.2,.4,.2]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}),e.jsxs("div",{className:"relative w-32 h-32 sm:w-44 sm:h-44 bg-gradient-to-br from-yellow-400 via-orange-500 to-yellow-600 rounded-[32px] sm:rounded-[48px] flex items-center justify-center shadow-[0_15px_40px_rgba(234,179,8,0.25)] border-4 border-white/20 transition-all",children:[e.jsx("span",{className:"text-5xl sm:text-7xl drop-shadow-2xl transition-all",children:c.icon}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-white/10 to-transparent pointer-events-none rounded-[28px] sm:rounded-[44px]"})]})]})}),e.jsxs("div",{className:"absolute inset-0 z-20 flex justify-center items-center pointer-events-none",children:[e.jsx(lt.div,{className:"absolute w-32 h-32 sm:w-48 sm:h-48 bg-yellow-500/40 blur-[40px] sm:blur-[60px] rounded-full",initial:{scale:0,opacity:0},animate:{scale:1.4,opacity:1},transition:{delay:.3,duration:1.2,ease:"easeOut"}}),e.jsx(lt.div,{className:"absolute w-24 h-24 sm:w-36 sm:h-36 bg-indigo-500/30 blur-[30px] sm:blur-[45px] rounded-full -ml-8 -mt-6 sm:-ml-12 sm:-mt-10",initial:{scale:0,opacity:0},animate:{scale:1.8,opacity:.8},transition:{delay:.4,duration:1.2,ease:"easeOut"}}),e.jsx(lt.div,{className:"absolute w-20 h-20 sm:w-32 sm:h-32 bg-rose-500/30 blur-[25px] sm:blur-[40px] rounded-full ml-10 mt-8 sm:ml-16 sm:mt-12",initial:{scale:0,opacity:0},animate:{scale:1.6,opacity:.8},transition:{delay:.5,duration:1.2,ease:"easeOut"}})]})]}),e.jsxs(lt.div,{className:"text-center space-y-2 sm:space-y-4",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:.6},children:[e.jsx("h3",{className:"text-lg sm:text-3xl font-black bg-gradient-to-r from-yellow-200 via-yellow-500 to-yellow-200 bg-clip-text text-transparent tracking-tight transition-all",children:c.name}),e.jsx("p",{className:"text-slate-400 font-bold text-[11px] sm:text-sm leading-relaxed max-w-[200px] sm:max-w-[280px] mx-auto transition-all",children:c.description})]}),e.jsx(lt.div,{className:"flex justify-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},children:e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"h-px w-12 sm:w-20 bg-gradient-to-r from-transparent via-white/10 to-transparent"}),e.jsx("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full bg-yellow-500/50 blur-[1px] animate-pulse"}),e.jsx("div",{className:"h-px w-12 sm:w-20 bg-gradient-to-r from-transparent via-white/10 to-transparent"})]})}),e.jsxs(lt.div,{className:"p-4 sm:p-8 bg-white/5 rounded-2xl sm:rounded-[32px] border border-white/5 relative overflow-hidden transition-all",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:1},children:[e.jsx("div",{className:"absolute top-0 left-0 w-12 h-12 bg-indigo-500 blur-2xl opacity-5"}),e.jsxs("div",{className:"flex items-start gap-3 sm:gap-6 relative z-10 text-left",children:[e.jsx("span",{className:"text-xl sm:text-3xl pt-0 opacity-40",children:'"'}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-[10px] sm:text-sm font-bold italic text-slate-300 leading-snug sm:leading-relaxed tracking-tight transition-all",children:n.text}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 mt-3 sm:mt-6 transition-all",children:[e.jsx("div",{className:"h-px flex-1 bg-white/5"}),e.jsxs("p",{className:"text-[8px] sm:text-[10px] font-black text-slate-500 uppercase tracking-widest shrink-0",children:["â€” ",n.author]})]})]})]})]})]})]})}):null}function wd({isOpen:t,onClose:s,accounts:a,goals:n,currency:i,destinationType:c,emergencyFund:r,onAllocate:o}){const[u,d]=v.useState(""),[h,l]=v.useState(""),[g,N]=v.useState(""),[b,T]=v.useState(!1),C=a.find(B=>B.id===u),k=n.find(B=>B.id===h),D=parseFloat(g)||0,E=()=>{if(!u){L.error("Please select an account");return}if(c==="goal"&&!h){L.error("Please select a goal");return}if(!g||D<=0){L.error("Please enter a valid amount");return}if(C&&D>C.balance){L.error("Insufficient balance in selected account");return}T(!0)},y=()=>{o({accountId:u,destinationId:c==="goal"?h:"emergency-fund",amount:D,destinationType:c}),d(""),l(""),N(""),T(!1),s()},M=()=>{T(!1)},J=()=>{d(""),l(""),N(""),T(!1),s()};return e.jsx(St,{open:t,onOpenChange:J,children:e.jsxs(Ct,{className:"max-w-md",children:[e.jsxs(At,{children:[e.jsx(Tt,{children:c==="goal"?"ðŸŽ¯ Allocate to Goal":"ðŸ›¡ï¸ Allocate to Emergency Fund"}),e.jsxs(Et,{children:["Move funds from your account to ",c==="goal"?"a savings goal":"emergency fund"]})]}),b?e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Review your allocation"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border-2 border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"FROM"}),e.jsx("p",{className:"font-medium",children:C?.name}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Current Balance:"}),e.jsx("span",{className:"font-medium",children:xe(C?.balance||0,i)})]}),e.jsxs("div",{className:"flex justify-between text-sm text-red-600 dark:text-red-400",children:[e.jsx("span",{children:"Allocation:"}),e.jsxs("span",{children:["-",xe(D,i)]})]}),e.jsx("div",{className:"h-px bg-gray-300 dark:bg-gray-600"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"New Balance:"}),e.jsx("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:xe((C?.balance||0)-D,i)})]})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:e.jsx(Kr,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})})}),e.jsxs("div",{className:`p-4 rounded-lg border-2 ${c==="goal"?"bg-purple-50 dark:bg-purple-900/20 border-purple-200 dark:border-purple-800":"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"}`,children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"TO"}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-xl",children:c==="goal"?k?.emoji:"ðŸ›¡ï¸"}),e.jsx("p",{className:"font-medium",children:c==="goal"?k?.name:"Emergency Fund"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Current Amount:"}),e.jsx("span",{className:"font-medium",children:xe((c==="goal"?k?.currentAmount:r?.currentAmount)||0,i)})]}),e.jsxs("div",{className:"flex justify-between text-sm text-green-600 dark:text-green-400",children:[e.jsx("span",{children:"Adding:"}),e.jsxs("span",{children:["+",xe(D,i)]})]}),e.jsx("div",{className:"h-px bg-gray-300 dark:bg-gray-600"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"New Amount:"}),e.jsx("span",{className:"font-medium text-green-600 dark:text-green-400",children:xe(((c==="goal"?k?.currentAmount:r?.currentAmount)||0)+D,i)})]})]})]})]}),e.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(nn,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-yellow-900 dark:text-yellow-100 mb-1",children:"Dashboard Balance Impact"}),e.jsxs("p",{className:"text-yellow-700 dark:text-yellow-300",children:["Your Net Balance and ",C?.name," balance will be reduced by ",xe(D,i)," immediately."]})]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(oe,{variant:"outline",onClick:M,className:"flex-1",children:"Back"}),e.jsx(oe,{onClick:y,className:"flex-1 bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700",children:"Confirm Allocation"})]})]}):e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Q,{htmlFor:"allocate-from-account",children:"From Account"}),e.jsxs(He,{value:u,onValueChange:d,children:[e.jsx(We,{id:"allocate-from-account",name:"fromAccountId",children:e.jsx(qe,{placeholder:"Select account"})}),e.jsx(Ye,{children:a.map(B=>e.jsx(ve,{value:B.id,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:B.name}),e.jsx("span",{className:"text-sm text-gray-500 ml-4",children:xe(B.balance,i)})]})},B.id))})]}),C&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Available: ",xe(C.balance,i)]})]}),c==="goal"?e.jsxs("div",{className:"space-y-2",children:[e.jsx(Q,{htmlFor:"allocate-to-goal",children:"To Goal"}),e.jsxs(He,{value:h,onValueChange:l,children:[e.jsx(We,{id:"allocate-to-goal",name:"toGoalId",children:e.jsx(qe,{placeholder:"Select goal"})}),e.jsx(Ye,{children:n.map(B=>{const w=B.currentAmount/B.targetAmount*100;return e.jsx(ve,{value:B.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:B.emoji}),e.jsxs("div",{children:[e.jsx("div",{children:B.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[Math.round(w),"% â€¢ ",xe(B.currentAmount,i)," / ",xe(B.targetAmount,i)]})]})]})},B.id)})})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(Q,{children:"To Emergency Fund"}),e.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center",children:"ðŸ›¡ï¸"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:"Emergency Fund"}),r&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[xe(r.currentAmount,i)," / ",xe(r.targetAmount,i)]})]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Q,{htmlFor:"allocate-amount",children:"Amount to Allocate"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:i==="INR"?"â‚¹":"$"}),e.jsx(Fe,{id:"allocate-amount",name:"amount",type:"number",placeholder:"0",value:g,onChange:B=>N(B.target.value),className:"pl-8",min:"0",step:"0.01"})]}),C&&D>C.balance&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600",children:[e.jsx(an,{className:"w-4 h-4"}),e.jsx("span",{children:"Amount exceeds available balance"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(oe,{variant:"outline",onClick:J,className:"flex-1",children:"Cancel"}),e.jsx(oe,{onClick:E,className:"flex-1",children:"Preview"})]})]})]})})}const jd=[{name:"HDFC Bank",icon:"ðŸ¦",color:"#1d4ed8",type:"bank"},{name:"ICICI Bank",icon:"ðŸ¦",color:"#ea580c",type:"bank"},{name:"State Bank of India",icon:"ðŸ¦",color:"#2563eb",type:"bank"},{name:"Axis Bank",icon:"ðŸ¦",color:"#9d174d",type:"bank"},{name:"Kotak Mahindra Bank",icon:"ðŸ¦",color:"#dc2626",type:"bank"},{name:"Bank of America",icon:"ðŸ¦",color:"#0033aa",type:"bank"},{name:"Chase Bank",icon:"ðŸ¦",color:"#117aca",type:"bank"},{name:"Wells Fargo",icon:"ðŸ¦",color:"#d71e28",type:"bank"},{name:"HSBC",icon:"ðŸ¦",color:"#db0011",type:"bank"},{name:"Barclays",icon:"ðŸ¦",color:"#00aeef",type:"bank"},{name:"Standard Chartered",icon:"ðŸ¦",color:"#00945e",type:"bank"},{name:"Citibank",icon:"ðŸ¦",color:"#003b70",type:"bank"},{name:"DBS Bank",icon:"ðŸ¦",color:"#ff0000",type:"bank"},{name:"Federal Bank",icon:"ðŸ¦",color:"#0b5a91",type:"bank"},{name:"American Express",icon:"ðŸ’³",color:"#006fcf",type:"credit_card"},{name:"Discover",icon:"ðŸ’³",color:"#ff6600",type:"credit_card"},{name:"Capital One",icon:"ðŸ’³",color:"#d22e2e",type:"credit_card"},{name:"Goldman Sachs",icon:"ðŸ¦",color:"#725a34",type:"bank"},{name:"Morgan Stanley",icon:"ðŸ¦",color:"#000033",type:"bank"},{name:"Apple Card",icon:"ðŸ’³",color:"#000000",type:"credit_card"},{name:"PayPal",icon:"ðŸ’³",color:"#003087",type:"credit_card"},{name:"Revolut",icon:"ðŸ’³",color:"#000000",type:"credit_card"},{name:"Monzo",icon:"ðŸ’³",color:"#ff4d4f",type:"credit_card"}];function Nd({accounts:t,currency:s,onCreateAccount:a,onUpdateAccount:n,onDeleteAccount:i}){const[c,r]=v.useState(!1),[o,u]=v.useState(null),[d,h]=v.useState({name:"",type:"bank",balance:0,color:ds[0],icon:us[0].value,creditLimit:0,safeLimitPercentage:30,serviceChargePercentage:0,statementDate:1}),[l,g]=v.useState([]),N=y=>{y?(u(y),h({name:y.name,type:y.type,balance:y.balance,color:y.color,icon:y.icon,creditLimit:y.creditLimit||0,safeLimitPercentage:y.safeLimitPercentage||30,serviceChargePercentage:y.serviceChargePercentage||0,statementDate:y.statementDate||1})):(u(null),h({name:"",type:"bank",balance:0,color:ds[0],icon:us[0].value,creditLimit:0,safeLimitPercentage:30,serviceChargePercentage:0,statementDate:1})),g([]),r(!0)},b=y=>{if(h({...d,name:y}),y.length>1){const M=jd.filter(J=>J.name.toLowerCase().includes(y.toLowerCase())).slice(0,4);g(M)}else g([])},T=y=>{h({...d,name:y.name,type:y.type,icon:y.icon,color:y.color}),g([])},C=async y=>{if(y.preventDefault(),!d.name.trim()){L.error("Please enter an account name");return}try{o?await n(o.id,d):await a(d),r(!1)}catch(M){console.error("Error saving account:",M)}},k=async y=>{if(confirm("Are you sure you want to delete this account? This action cannot be undone."))try{await i(y)}catch(M){console.error("Error deleting account:",M)}};return e.jsxs("div",{className:"space-y-12 animate-in fade-in slide-in-from-bottom-4 duration-700 px-4 pb-24",children:[e.jsxs("div",{className:"flex items-end justify-between gap-6",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-3xl font-black text-slate-100 tracking-tight leading-none mb-3 truncate",children:"Accounts & Cards"}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.jsxs("span",{className:"text-[8px] font-black uppercase tracking-widest text-emerald-500 bg-emerald-500/10 px-2 py-0.5 rounded-lg border border-emerald-500/20 whitespace-nowrap",children:[t.filter(y=>y.type==="bank").length," Banks"]}),e.jsxs("span",{className:"text-[8px] font-black uppercase tracking-widest text-rose-500 bg-rose-500/10 px-2 py-0.5 rounded-lg border border-rose-500/20 whitespace-nowrap",children:[t.filter(y=>y.type==="credit_card").length," Credit"]}),e.jsxs("span",{className:"text-[8px] font-black uppercase tracking-widest text-amber-500 bg-amber-500/10 px-2 py-0.5 rounded-lg border border-amber-500/20 whitespace-nowrap",children:[t.filter(y=>y.type==="cash").length," Cash"]}),e.jsxs("span",{className:"text-[8px] font-black uppercase tracking-widest text-blue-500 bg-blue-500/10 px-2 py-0.5 rounded-lg border border-blue-500/20 whitespace-nowrap",children:[t.filter(y=>y.type==="investment").length," Holding"]})]}),e.jsx("p",{className:"text-slate-500 font-bold max-w-md text-[10px] truncate",children:"Monitor liquidity across core reservoirs and credit pools."})]}),e.jsxs(oe,{onClick:()=>N(),className:"bg-emerald-600 hover:bg-emerald-500 text-white rounded-xl px-6 h-12 font-bold shadow-lg shadow-emerald-600/20 transition-all active:scale-95 shrink-0",children:[e.jsx(Zt,{className:"w-4 h-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Account"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2",children:[e.jsx(Jr,{className:"w-3.5 h-3.5"}),"Bank Accounts"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.filter(y=>y.type==="bank").map(y=>e.jsx(D,{account:y},y.id)),t.filter(y=>y.type==="bank").length===0&&e.jsx(E,{message:"No bank accounts detected."})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2",children:[e.jsx(Xr,{className:"w-3.5 h-3.5"}),"Credit Pools (Cards)"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.filter(y=>y.type==="credit_card").map(y=>e.jsx(D,{account:y},y.id)),t.filter(y=>y.type==="credit_card").length===0&&e.jsx(E,{message:"No credit pools detected."})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2",children:[e.jsx(Za,{className:"w-3.5 h-3.5"}),"Cash in Hand"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.filter(y=>y.type==="cash").map(y=>e.jsx(D,{account:y},y.id)),t.filter(y=>y.type==="cash").length===0&&e.jsx(E,{message:"No physical liquid reservoirs detected."})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2",children:[e.jsx(rs,{className:"w-3.5 h-3.5"}),"Investment Holding Nodes"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.filter(y=>y.type==="investment").map(y=>e.jsx(D,{account:y},y.id)),t.filter(y=>y.type==="investment").length===0&&e.jsx("div",{className:"md:col-span-2 lg:col-span-3 p-8 border border-dashed border-white/5 squircle-22 flex items-center justify-center text-slate-600 font-bold text-xs",children:"No investment nodes detected. Link them to track growth separately."})]})]}),e.jsx(St,{open:c,onOpenChange:r,children:e.jsxs(Ct,{className:"max-w-md max-h-[90vh] overflow-y-auto bg-slate-950 border-white/10 text-white squircle-22 p-8 custom-scrollbar",children:[e.jsxs(At,{children:[e.jsx(Tt,{className:"text-3xl font-black tracking-tight text-white mb-2",children:o?"Refine Account":"New Liquidity Reservoir"}),e.jsx(Et,{className:"text-slate-500 font-bold mb-6",children:"Establish a new liquidity pool in the Obsidian system."})]}),e.jsxs("form",{onSubmit:C,className:"space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"name",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Account Identity"}),e.jsx(Fe,{id:"name",name:"name",value:d.name,onChange:y=>b(y.target.value),placeholder:"e.g. Mercury Checking",required:!0,className:"bg-white/5 border-white/5 squircle-12 h-14 text-white focus:ring-emerald-500/50",autoComplete:"off"}),l.length>0&&e.jsxs("div",{className:"mt-3 p-4 bg-indigo-500/5 border border-indigo-500/10 squircle-12 flex items-start gap-4 animate-in fade-in zoom-in-95 duration-300",children:[e.jsx(Ot,{className:"w-4 h-4 text-indigo-400 mt-1 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-indigo-300 mb-3 opacity-60",children:"Intelligence Suggested"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:l.map(y=>e.jsxs("button",{type:"button",onClick:()=>T(y),className:"flex items-center gap-3 p-2.5 squircle-12 bg-white/5 hover:bg-white/10 transition-all group border border-white/5",children:[e.jsx("span",{className:"text-lg group-hover:scale-110 transition-transform",children:y.icon}),e.jsx("span",{className:"text-xs font-bold text-slate-300 group-hover:text-white transition-colors",children:y.name})]},y.name))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${d.type==="bank"?"border-emerald-500 bg-emerald-500/10":"border-white/5 bg-white/5 hover:border-white/10"}`,onClick:()=>h({...d,type:"bank"}),children:[e.jsx("div",{className:"w-10 h-10 squircle-12 bg-emerald-500/20 flex items-center justify-center text-xl mb-2",children:"ðŸ¦"}),e.jsx("p",{className:"text-[9px] font-black uppercase text-white leading-tight",children:"Bank Reservoir"})]}),e.jsxs("div",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${d.type==="credit_card"?"border-rose-500 bg-rose-500/10":"border-white/5 bg-white/5 hover:border-white/10"}`,onClick:()=>h({...d,type:"credit_card"}),children:[e.jsx("div",{className:"w-10 h-10 squircle-12 bg-rose-500/20 flex items-center justify-center text-xl mb-2",children:"ðŸ’³"}),e.jsx("p",{className:"text-[9px] font-black uppercase text-white leading-tight",children:"Credit Pool"})]}),e.jsxs("div",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${d.type==="cash"?"border-amber-500 bg-amber-500/10":"border-white/5 bg-white/5 hover:border-white/10"}`,onClick:()=>h({...d,type:"cash"}),children:[e.jsx("div",{className:"w-10 h-10 squircle-12 bg-amber-500/20 flex items-center justify-center text-xl mb-2",children:"ðŸ’µ"}),e.jsx("p",{className:"text-[9px] font-black uppercase text-white leading-tight",children:"Cash in Hand"})]}),e.jsxs("div",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${d.type==="investment"?"border-blue-500 bg-blue-500/10":"border-white/5 bg-white/5 hover:border-white/10"}`,onClick:()=>h({...d,type:"investment"}),children:[e.jsx("div",{className:"w-10 h-10 squircle-12 bg-blue-500/20 flex items-center justify-center text-xl mb-2",children:"ðŸ“ˆ"}),e.jsx("p",{className:"text-[9px] font-black uppercase text-white leading-tight",children:"Growth Node"})]})]}),e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"balance",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:d.type==="bank"||d.type==="cash"||d.type==="investment"?"Initial Liquidity":"Current Spent Balance"}),e.jsx(Rt,{id:"balance",name:"balance",value:d.balance,onChange:y=>h({...d,balance:parseFloat(y)||0}),placeholder:"0.00",className:"bg-white/5 border-white/5 squircle-12 h-14 text-white",autoComplete:"off"})]}),d.type==="credit_card"&&e.jsxs("div",{className:"space-y-6 animate-in slide-in-from-top-4 duration-500",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"creditLimit",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Total Credit Limit"}),e.jsx(Rt,{id:"creditLimit",name:"creditLimit",value:d.creditLimit,onChange:y=>h({...d,creditLimit:parseFloat(y)||0}),placeholder:"e.g. 100000",className:"bg-white/5 border-white/5 squircle-12 h-14 text-white",autoComplete:"off"})]}),e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"safeLimit",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Safe Use Threshold (%)"}),e.jsx(Rt,{id:"safeLimit",name:"safeLimitPercentage",value:d.safeLimitPercentage,onChange:y=>h({...d,safeLimitPercentage:parseFloat(y)||30}),placeholder:"30",className:"bg-white/5 border-white/5 squircle-12 h-14 text-white",autoComplete:"off"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"serviceCharge",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Svc Charge (%)"}),e.jsx(Rt,{id:"serviceCharge",name:"serviceChargePercentage",value:d.serviceChargePercentage,onChange:y=>h({...d,serviceChargePercentage:parseFloat(y)||0}),placeholder:"0.0",className:"bg-white/5 border-white/5 squircle-12 h-14 text-white",autoComplete:"off"})]}),e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"statementDate",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Statement Date"}),e.jsxs(He,{value:d.statementDate.toString(),onValueChange:y=>h({...d,statementDate:parseInt(y)}),children:[e.jsx(We,{id:"statementDate",name:"statementDate",className:"bg-white/5 border-white/5 squircle-12 h-14 text-white",children:e.jsx(qe,{})}),e.jsx(Ye,{className:"bg-slate-900 border-white/10 text-white",children:[...Array(31)].map((y,M)=>e.jsx(ve,{value:(M+1).toString(),children:M+1},M+1))})]})]})]})]}),e.jsxs("div",{children:[e.jsx(Q,{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"System Icon"}),e.jsx("div",{className:"grid grid-cols-6 sm:grid-cols-9 gap-2",children:us.map(y=>e.jsx("button",{type:"button",onClick:()=>h({...d,icon:y.value}),className:`w-10 h-10 squircle-12 flex items-center justify-center text-lg border-2 transition-all ${d.icon===y.value?"border-emerald-500 bg-emerald-500/10":"border-white/5 bg-white/5 hover:border-white/10"}`,children:y.value},y.value))})]}),e.jsxs("div",{children:[e.jsx(Q,{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Brand Color"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:ds.map(y=>{const M={style:{"--btn-color":y}};return e.jsx("button",{type:"button",onClick:()=>h({...d,color:y}),"aria-label":`Select color ${y}`,className:`w-8 h-8 rounded-full border-4 transition-all bg-[length:100%_100%] bg-[var(--btn-color)] ${d.color===y?"border-white scale-110 shadow-lg shadow-white/20":"border-transparent hover:scale-105"}`,...M},y)})})]})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx(oe,{type:"button",variant:"ghost",onClick:()=>r(!1),className:"flex-1 h-14 squircle-12 font-bold text-slate-500 hover:text-white",children:"Abort"}),e.jsx(oe,{type:"submit",className:"flex-1 h-14 squircle-12 bg-emerald-600 hover:bg-emerald-500 text-white font-black shadow-lg shadow-emerald-600/20",children:o?"Update Account":"Ignite Account"})]})]})]})})]});function D({account:y}){const M=y.type==="credit_card",J=M?(y.creditLimit||0)*(y.safeLimitPercentage||30)/100:0,B=M&&y.creditLimit?Math.abs(y.balance)/y.creditLimit*100:0,w=M&&B<=(y.safeLimitPercentage||30);return e.jsxs(Ge,{className:"p-6 bg-slate-900/40 border-white/5 squircle-22 border hover:bg-slate-900/60 transition-all duration-300 group relative overflow-hidden",children:[(()=>{const V={style:{"--card-glow":y.color}};return e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20 bg-[var(--card-glow)]",...V})})(),e.jsxs("div",{className:"flex items-start justify-between mb-8 relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[(()=>{const V={style:{"--icon-bg":y.color+"15"}};return e.jsx("div",{className:"w-16 h-16 squircle-12 flex items-center justify-center text-3xl shadow-inner border border-white/5 group-hover:scale-105 transition-transform bg-[var(--icon-bg)]",...V,children:y.icon})})(),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-xl font-black text-slate-100 truncate",children:y.name}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${M?w?"bg-indigo-500":"bg-rose-500":"bg-emerald-500"}`}),e.jsx("span",{className:"text-[10px] uppercase font-black tracking-widest text-slate-500",children:M?"Credit Pool":"Bank Account"})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(oe,{variant:"ghost",title:"Edit Account",size:"sm",onClick:()=>N(y),className:"w-8 h-8 p-0 squircle-12 hover:bg-white/5 text-slate-600 hover:text-white transition-all",children:e.jsx(Zr,{className:"w-3.5 h-3.5"})}),e.jsx(oe,{variant:"ghost",title:"Delete Account",size:"sm",onClick:()=>k(y.id),className:"w-8 h-8 p-0 squircle-12 hover:bg-rose-500/10 text-slate-600 hover:text-rose-400 transition-all",children:e.jsx(Vt,{className:"w-3.5 h-3.5"})})]})]}),e.jsxs("div",{className:"pt-6 border-t border-white/5 relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[10px] uppercase font-black tracking-widest text-slate-600",children:M?"Current Obligation":"Available Liquidity"}),(()=>{const V={style:{"--balance-color":y.color}};return e.jsx("h4",{className:"text-2xl font-black tabular-nums tracking-tight text-[var(--balance-color)]",...V,children:xe(y.balance,s)})})()]}),M&&y.creditLimit?e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[9px] font-black text-slate-600 uppercase mb-1",children:"Limit Use"}),e.jsxs("p",{className:`text-xs font-black tabular-nums ${w?"text-indigo-400":"text-rose-400"}`,children:[B.toFixed(1),"%"]})]}):e.jsx("div",{className:"bg-white/5 px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest text-slate-500 border border-white/5",children:"Synced"})]}),M&&y.creditLimit&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-white/5 flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[8px] font-black text-slate-700 uppercase",children:"Safe Threshold"}),e.jsx("p",{className:"text-[10px] font-black text-slate-500",children:xe(J,s)})]}),y.serviceChargePercentage?e.jsxs("div",{className:"text-right space-y-1",children:[e.jsx("p",{className:"text-[8px] font-black text-slate-700 uppercase",children:"Svc Charge"}),e.jsxs("p",{className:"text-[10px] font-black text-slate-500",children:[y.serviceChargePercentage,"%"]})]}):null,M&&y.statementDate&&e.jsxs("div",{className:"text-right space-y-1 ml-auto",children:[e.jsx("p",{className:"text-[8px] font-black text-slate-700 uppercase",children:"Statement"}),e.jsxs("p",{className:"text-[10px] font-black text-slate-500",children:["Day ",y.statementDate]})]})]})]})]})}function E({message:y}){return e.jsx("div",{className:"py-12 text-center bg-slate-800/20 squircle-22 border border-dashed border-white/10 col-span-full",children:e.jsx("p",{className:"text-sm text-slate-500 font-bold",children:y})})}}function kd({isOpen:t,onClose:s,accounts:a,currency:n,onTransfer:i}){const[c,r]=v.useState(""),[o,u]=v.useState(""),[d,h]=v.useState(""),[l,g]=v.useState(!1),N=a.find(E=>E.id===c),b=a.find(E=>E.id===o),T=parseFloat(d)||0,C=()=>{if(!c){L.error("Please select source reservoir");return}if(!o){L.error("Please select destination reservoir");return}if(c===o){L.error("Source and destination must be different");return}if(!d||T<=0){L.error("Please enter a valid amount");return}if(N&&T>N.balance){L.error("Insufficient funds in source reservoir");return}g(!0)},k=()=>{i(c,o,T),D()},D=()=>{r(""),u(""),h(""),g(!1),s()};return e.jsx(St,{open:t,onOpenChange:D,children:e.jsxs(Ct,{className:"max-w-md max-h-[90vh] overflow-y-auto bg-[#020408] border-white/5 p-0 shadow-2xl custom-scrollbar text-white",children:[e.jsxs("div",{className:"px-8 pt-10 pb-8 border-b border-white/5 relative overflow-hidden bg-indigo-500/5",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 blur-[60px] opacity-20 -mr-16 -mt-16 bg-indigo-500"}),e.jsxs(At,{className:"relative z-10",children:[e.jsxs(Tt,{className:"text-2xl font-black tracking-tighter text-slate-100 flex items-center gap-3",children:[e.jsx(Ss,{className:"w-6 h-6 text-indigo-400"}),"Capital Migration"]}),e.jsx(Et,{className:"text-slate-500 font-bold text-[10px] uppercase tracking-[0.2em] mt-1",children:"Transfer between core liquidity reservoirs"})]})]}),e.jsx("div",{className:"p-8",children:l?e.jsxs("div",{className:"space-y-6 animate-in fade-in zoom-in-95 duration-300",children:[e.jsxs("div",{className:"p-6 bg-slate-900/50 border border-white/5 rounded-3xl space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 text-center space-y-2",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-slate-800 border border-white/10 flex items-center justify-center text-2xl mx-auto",children:N?.icon}),e.jsx("p",{className:"text-[10px] font-black uppercase text-slate-500 truncate",children:N?.name})]}),e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx(Ss,{className:"w-6 h-6 text-indigo-400 animate-pulse"}),e.jsx("p",{className:"text-[10px] font-black text-indigo-400",children:xe(T,n)})]}),e.jsxs("div",{className:"flex-1 text-center space-y-2",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-slate-800 border border-white/10 flex items-center justify-center text-2xl mx-auto",children:b?.icon}),e.jsx("p",{className:"text-[10px] font-black uppercase text-slate-500 truncate",children:b?.name})]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/5",children:[e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:"text-slate-500 font-bold",children:"Source New Balance"}),e.jsx("span",{className:"text-rose-400 font-black",children:xe((N?.balance||0)-T,n)})]}),e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:"text-slate-500 font-bold",children:"Dest. New Balance"}),e.jsx("span",{className:"text-emerald-400 font-black",children:xe((b?.balance||0)+T,n)})]})]})]}),e.jsxs("div",{className:"p-4 bg-amber-500/5 border border-amber-500/10 rounded-2xl flex gap-3",children:[e.jsx(nn,{className:"w-5 h-5 text-amber-500 flex-shrink-0"}),e.jsx("p",{className:"text-[10px] text-amber-200/60 font-medium leading-relaxed",children:"Notice: This migration will instantly adjust the liquidity status of both reservoirs. This action is recorded in the central protocol."})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx(oe,{variant:"ghost",onClick:()=>g(!1),className:"flex-1 h-12 rounded-2xl text-slate-500 font-bold hover:bg-white/5",children:"Back"}),e.jsx(oe,{onClick:k,className:"flex-1 h-12 rounded-2xl bg-indigo-600 hover:bg-indigo-500 text-white font-black shadow-lg shadow-indigo-600/20 transition-all active:scale-95",children:"Confirm Migration"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(Q,{htmlFor:"source-reservoir",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Source Reservoir"}),e.jsxs(He,{value:c,onValueChange:r,children:[e.jsx(We,{id:"source-reservoir",className:"h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-200 font-bold",children:e.jsx(qe,{placeholder:"Select source"})}),e.jsx(Ye,{className:"bg-slate-900 border-white/5 max-h-[40vh]",children:a.map(E=>e.jsx(ve,{value:E.id,className:"focus:bg-white/5 focus:text-white",children:e.jsxs("div",{className:"flex items-center justify-between w-full pr-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xl",children:E.icon}),e.jsx("span",{children:E.name})]}),e.jsx("span",{className:"text-xs font-black text-slate-500",children:xe(E.balance,n)})]})},E.id))})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Q,{htmlFor:"dest-reservoir",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Destination Reservoir"}),e.jsxs(He,{value:o,onValueChange:u,children:[e.jsx(We,{id:"dest-reservoir",className:"h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-200 font-bold",children:e.jsx(qe,{placeholder:"Select destination"})}),e.jsx(Ye,{className:"bg-slate-900 border-white/5 max-h-[40vh]",children:a.map(E=>e.jsx(ve,{value:E.id,className:"focus:bg-white/5 focus:text-white",disabled:E.id===c,children:e.jsxs("div",{className:"flex items-center justify-between w-full pr-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xl",children:E.icon}),e.jsx("span",{children:E.name})]}),e.jsx("span",{className:"text-xs font-black text-slate-500",children:xe(E.balance,n)})]})},E.id))})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Q,{htmlFor:"migration-amount",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Capital Amount"}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-500 font-bold group-focus-within:text-indigo-400 transition-colors",children:n==="INR"?"â‚¹":"$"}),e.jsx(Fe,{id:"migration-amount",name:"amount",type:"number",placeholder:"0.00",value:d,onChange:E=>h(E.target.value),className:"pl-12 h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-100 font-black text-xl"})]}),N&&T>N.balance&&e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-rose-400 ml-1 animate-in slide-in-from-top-1",children:[e.jsx(an,{className:"w-3 h-3"}),e.jsx("span",{children:"Insufficient stability in source reservoir"})]})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx(oe,{variant:"ghost",onClick:D,className:"flex-1 h-12 rounded-2xl text-slate-500 font-bold hover:bg-white/5",children:"Cancel"}),e.jsx(oe,{onClick:C,className:"flex-1 h-12 rounded-2xl bg-indigo-600 hover:bg-indigo-500 text-white font-black shadow-lg shadow-indigo-600/20 transition-all active:scale-95",children:"Verify Migration"})]})]})})]})})}function Sd({onRefresh:t,children:s}){const a=v.useRef(0),[n,i]=v.useState(0),[c,r]=v.useState(!1),o=v.useRef(null),u=80,d=l=>{o.current&&o.current.scrollTop===0&&(a.current=l.touches[0].clientY)};v.useEffect(()=>{const l=N=>{if(a.current===0)return;const T=N.touches[0].clientY-a.current;if(T>0&&o.current&&o.current.scrollTop===0){N.cancelable&&N.preventDefault();const C=Math.min(T,u*1.5);C>=u&&n<u&&window.navigator.vibrate&&window.navigator.vibrate(10),i(C)}},g=o.current;return g&&g.addEventListener("touchmove",l,{passive:!1}),()=>{g&&g.removeEventListener("touchmove",l)}},[]);const h=async()=>{n>=u&&!c&&(r(!0),await t(),r(!1)),i(0),a.current=0};return e.jsxs("div",{ref:o,className:"relative overflow-y-auto",onTouchStart:d,onTouchEnd:h,children:[e.jsx(lt.div,{className:"absolute top-0 left-0 right-0 flex justify-center items-center",style:{height:n,opacity:n/u},animate:{y:c?0:-u},children:e.jsxs("div",{className:"flex flex-col items-center gap-2 py-4",children:[e.jsx(lt.div,{animate:{rotate:c?360:n/u*180},transition:{rotate:{duration:c?1:0,repeat:c?1/0:0,ease:"linear"}},children:e.jsx(ns,{className:"w-6 h-6 text-[#0A84FF]"})}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-[#8E8E93]",children:c?"Synchronizing...":n>=u?"Relinquish to Sync":"Pull to Synchronize"})]})}),e.jsx(lt.div,{animate:{y:c?60:0},transition:{duration:.2},children:s})]})}function Nt({className:t,...s}){return e.jsx("div",{"data-slot":"skeleton",className:Ce("bg-accent animate-pulse rounded-md",t),...s})}function Ba(){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Ge,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Nt,{className:"w-12 h-12 rounded-lg"}),e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx(Nt,{className:"h-5 w-32"}),e.jsx(Nt,{className:"h-4 w-48"})]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[1,2,3].map(t=>e.jsx("div",{className:"space-y-2",children:e.jsx(Nt,{className:"h-20 w-full rounded-lg"})},t))})]}),[1,2,3].map(t=>e.jsx(Ge,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(Nt,{className:"h-6 w-48"}),e.jsx(Nt,{className:"h-4 w-full"}),e.jsx(Nt,{className:"h-4 w-3/4"})]})},t))]})}function Cd(t,s,a=30){let n=0;const i=r=>{n=r.touches[0].clientX},c=r=>{const u=r.touches[0].clientX-n;n<a&&u>30&&(r.cancelable&&r.preventDefault(),window.navigator.vibrate&&window.navigator.vibrate(20),t(),n=window.innerWidth),n>window.innerWidth-a&&u<-30&&(r.cancelable&&r.preventDefault(),window.navigator.vibrate&&window.navigator.vibrate(20),s(),n=0)};return document.addEventListener("touchstart",i,{passive:!0}),document.addEventListener("touchmove",c,{passive:!1}),()=>{document.removeEventListener("touchstart",i),document.removeEventListener("touchmove",c)}}const Ad=({onOpenAI:t,onAddTransaction:s,onMigrate:a,isVisible:n})=>e.jsxs("div",{id:"fab-dock",className:`fixed right-5 bottom-[110px] flex flex-col gap-3.5 z-[110] transition-all duration-500 ease-[cubic-bezier(0.2,1,0.3,1)] ${n?"translate-x-0 opacity-100":"translate-x-[100px] opacity-0"}`,children:[e.jsx("div",{onClick:t,title:"AI Assistant",className:"w-[52px] h-[52px] rounded-[18px] flex items-center justify-center bg-[#1E293B] border border-[#a855f74d] shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-[#A855F7] hover:scale-110 active:scale-95 transition-all duration-300 group",children:e.jsx(Ot,{className:"w-5 h-5 group-hover:rotate-12 transition-transform"})}),e.jsx("div",{onClick:a,title:"Migrate Capital",className:"w-[52px] h-[52px] rounded-[18px] flex items-center justify-center bg-[#1E293B] border border-indigo-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-indigo-400 hover:scale-110 active:scale-95 transition-all duration-300 group",children:e.jsx(Ss,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})}),e.jsx("div",{onClick:()=>s("debt"),title:"Added Personal IOU",className:"w-[52px] h-[52px] rounded-[18px] flex items-center justify-center bg-[#1E293B] border border-yellow-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-yellow-500 hover:scale-110 active:scale-95 transition-all duration-300 group",children:e.jsx(tn,{className:"w-5 h-5 group-hover:-translate-y-0.5 transition-transform"})}),e.jsx("div",{onClick:()=>s("income"),title:"Add Money In",className:"w-[52px] h-[52px] rounded-[18px] flex items-center justify-center bg-[#1E293B] border border-emerald-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-emerald-500 hover:scale-110 active:scale-95 transition-all duration-300 group",children:e.jsx(Zt,{className:"w-5 h-5 group-hover:rotate-90 transition-transform"})}),e.jsx("div",{onClick:()=>s("expense"),title:"Add Money Out",className:"w-[52px] h-[52px] rounded-[18px] flex items-center justify-center bg-[#1E293B] border border-rose-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-rose-500 hover:scale-110 active:scale-95 transition-all duration-300 group",children:e.jsx(Qr,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})})]}),Td=({isOpen:t,onClose:s,context:a,settings:n})=>{const[i,c]=v.useState(""),[r,o]=v.useState([{text:"Hello! I've analyzed your cash flow. How can I assist with your goals?",type:"ai"}]),[u,d]=v.useState(!1),h=v.useRef(null);v.useEffect(()=>{h.current&&h.current.scrollIntoView({behavior:"smooth"})},[r]);const l=async()=>{if(!i.trim()||u)return;const g=i.trim();c(""),o(N=>[...N,{text:g,type:"user"}]),d(!0);try{const N=await fl({userPrompt:g,context:a,settings:n,persona:"ANALYST"});o(b=>[...b,{text:N.text||"I'm analyzing that...",type:"ai"}])}catch{o(b=>[...b,{text:"Connection error. Please try again.",type:"ai"}])}finally{d(!1)}};return t?e.jsxs("div",{id:"ai-chat-overlay",className:"fixed inset-0 bg-[#020408] z-[200] flex flex-col p-6 animate-in fade-in zoom-in-95 duration-300",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-indigo-500/10 via-transparent to-transparent opacity-50"}),e.jsxs("div",{className:"flex justify-between items-center mb-10 relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-indigo-500/10 rounded-2xl flex items-center justify-center border border-indigo-500/20",children:e.jsx(Ot,{className:"text-indigo-400 w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-black text-2xl text-white tracking-tight leading-none",children:"AI Analyst"}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mt-1",children:"Neural Core Context"})]})]}),e.jsx("button",{onClick:s,"aria-label":"Close Chat",className:"bg-white/5 w-12 h-12 rounded-full flex items-center justify-center hover:bg-white/10 hover:text-white text-slate-400 transition-all active:scale-95",children:e.jsx(is,{className:"w-6 h-6"})})]}),e.jsxs("div",{id:"chat-messages",className:"flex-1 overflow-y-auto space-y-4 pr-2 custom-scrollbar",children:[r.map((g,N)=>e.jsxs("div",{className:Ce("p-4 rounded-[24px] text-sm leading-relaxed",g.type==="ai"?"bg-slate-900 border border-white/5 text-slate-200 self-start max-w-[85%]":"bg-indigo-600 text-white font-medium shadow-lg shadow-indigo-600/20 self-end max-w-[85%]"),children:[g.type==="ai"&&e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ot,{className:"w-3 h-3 text-indigo-400 font-black"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Guru Analysis"})]}),g.text]},N)),u&&e.jsx("div",{className:"p-4 bg-slate-900 border border-white/5 rounded-[24px] self-start animate-pulse",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:0ms]"}),e.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:150ms]"}),e.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:300ms]"})]})}),e.jsx("div",{ref:h})]}),e.jsxs("div",{className:"mt-8 flex gap-3 p-2 bg-slate-900/40 rounded-[28px] border border-white/5 relative z-10",children:[e.jsx("input",{type:"text",value:i,onChange:g=>c(g.target.value),onKeyDown:g=>g.key==="Enter"&&l(),placeholder:"Ask the analyst...",className:"flex-1 bg-transparent border-none px-6 py-4 text-white focus:outline-none placeholder:text-slate-600 font-bold"}),e.jsx("button",{onClick:l,disabled:u||!i.trim(),"aria-label":"Send Message",className:"w-14 h-14 bg-indigo-600 rounded-[22px] flex items-center justify-center shadow-lg shadow-indigo-900/30 hover:bg-indigo-500 transition-all active:scale-90 disabled:opacity-50 disabled:cursor-not-allowed group",children:e.jsx(ei,{className:"w-6 h-6 text-white group-hover:-translate-y-1 transition-transform"})})]}),e.jsx("p",{className:"text-[9px] font-bold text-slate-600 text-center uppercase tracking-widest mt-4",children:"Encryption Verified // Neural Fabric Link Stable"})]}):null};class Ed extends v.Component{state={hasError:!1};static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,a){console.error("Uncaught error:",s,a)}render(){return this.state.hasError?e.jsx("div",{className:"min-h-[400px] flex items-center justify-center p-6",children:e.jsxs(Ge,{className:"max-w-md w-full p-8 bg-slate-900 border-white/10 text-center space-y-6 rounded-[32px]",children:[e.jsx("div",{className:"w-16 h-16 bg-rose-500/10 rounded-full flex items-center justify-center mx-auto",children:e.jsx(sn,{className:"w-8 h-8 text-rose-500"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-tight",children:"System Glitch Detected"}),e.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"The neural link to this component was interrupted. This usually happens during background updates."})]}),this.state.error&&e.jsx("pre",{className:"text-[10px] bg-black/40 p-3 rounded-xl text-rose-400/80 overflow-x-auto text-left font-mono",children:this.state.error.message}),e.jsxs(oe,{onClick:()=>window.location.reload(),className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-black py-6 rounded-2xl gap-2 h-auto",children:[e.jsx(ns,{className:"w-4 h-4"}),"Re-establish Connection"]})]})}):this.props.children}}const Dd=v.lazy(()=>kt(()=>import("./Dashboard-Cotao1KR.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])).then(t=>({default:t.Dashboard}))),Id=v.lazy(()=>kt(()=>import("./TransactionList-Bmog69cK.js"),__vite__mapDeps([8,1,2,6,7,4])).then(t=>({default:t.TransactionList}))),Pd=v.lazy(()=>kt(()=>import("./GoalsTracker-CZzjs7AW.js"),__vite__mapDeps([9,1,2,7])).then(t=>({default:t.GoalsTracker}))),Rd=v.lazy(()=>kt(()=>import("./EmergencyFundsTab-DUFPozCE.js"),__vite__mapDeps([10,1,2,7])).then(t=>({default:t.EmergencyFundsTab}))),Md=v.lazy(()=>kt(()=>import("./InvestmentsTab-D0scCVlE.js"),__vite__mapDeps([11,1,2,3,4,12,5,7])).then(t=>({default:t.InvestmentsTab}))),Ld=v.lazy(()=>kt(()=>import("./LiabilityTab-8koh7B6j.js"),__vite__mapDeps([13,1,2,7])).then(t=>({default:t.LiabilityTab}))),Od=v.lazy(()=>kt(()=>import("./LiabilityDashboard-BH8tq6Hl.js"),__vite__mapDeps([14,1,2,12,6,7])).then(t=>({default:t.LiabilityDashboard})));function Fd(){const{settings:t,expenses:s,incomes:a,debts:n,goals:i,accounts:c,liabilities:r,notifications:o,emergencyFundAmount:u,investments:d,isLoading:h,refreshData:l,updateSettings:g,userId:N,createExpense:b,updateExpense:T,deleteExpense:C,createIncome:k,updateIncome:D,deleteIncome:E,createDebt:y,updateDebt:M,deleteDebt:J,settleDebt:B,createGoal:w,updateGoal:V,deleteGoal:Z,createAccount:ae,updateAccount:ne,deleteAccount:se,setEmergencyFundAmount:we,setNotifications:be,isFundAllocationOpen:X,fundAllocationType:W,closeFundAllocation:pe,performFundAllocation:je,transferFunds:j}=wn(),[m,R]=v.useState("dashboard"),[I,F]=v.useState(!1),[$,Y]=v.useState("expense"),[H,z]=v.useState(null),[de,ge]=v.useState(!1),[ue,me]=v.useState(!1),[Ae,te]=v.useState(!1),[Pe,Re]=v.useState(null),[Te,Oe]=v.useState(!1),[De,_e]=v.useState(!1),[bt,Ie]=v.useState(!1),[Ee]=v.useState(null);v.useEffect(()=>Cd(()=>me(!0),()=>te(!0)),[]),v.useEffect(()=>{t.theme==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t.theme]);const tt=v.useMemo(()=>{const O=a.reduce((p,A)=>p+A.amount,0),Ne=s.reduce((p,A)=>p+A.amount,0),Le=n.reduce((p,A)=>p+A.amount,0);if(O===0&&Le===0)return{score:50,savingsRate:0,debtRatio:0,spendingRatio:0};const at=[...a,...s,...n];let Ke=1;if(at.length>0){const p=at.map(U=>new Date(U.date).getTime()),A=new Date(Math.min(...p)),f=Math.abs(new Date().getTime()-A.getTime()),S=Math.ceil(f/(1e3*60*60*24*30));Ke=Math.max(1,S)}const gt=O/Ke*12,Ze=O>0?(O-Ne)/O:0,$e=O>0?Ne/O:0,K=gt>0?Le/gt:Le>0?1/0:0;let ie=50;return Ze>=.4?ie+=30:Ze>=.2?ie+=20:Ze>=.1?ie+=10:Ze>0?ie+=5:ie-=20,K===0?ie+=20:K<=.3?ie+=10:K<=.6?ie-=10:K<=1?ie-=30:ie-=50,$e<=.5?ie+=20:$e<=.7?ie+=10:$e<=.9?ie+=0:ie-=10,{score:Math.max(0,Math.min(100,Math.round(ie))),savingsRate:Ze,debtRatio:K,spendingRatio:$e}},[a,s,n]),yt=v.useMemo(()=>({totalIncome:a.reduce((O,Ne)=>O+Ne.amount,0),totalExpenses:s.reduce((O,Ne)=>O+Ne.amount,0),activeDebts:n.filter(O=>O.status==="pending").length,goalsCount:i.length,recentTransactions:[...s.slice(0,5).map(O=>({type:"expense",...O})),...a.slice(0,5).map(O=>({type:"income",...O}))],expenses:s,incomes:a,accounts:c,investments:d,savingsRate:tt.savingsRate,healthScore:tt.score,brainSummary:el({investments:d,accounts:c,healthScore:tt.score,savingsRate:tt.savingsRate,totalIncome:a.reduce((O,Ne)=>O+Ne.amount,0),totalExpenses:s.reduce((O,Ne)=>O+Ne.amount,0),activeDebts:n.filter(O=>O.status==="pending").length,goalsCount:i.length},t.currency,m)}),[a,s,n,i.length,tt.savingsRate,tt.score,c,d,t.currency,m]),ye=v.useMemo(()=>a.reduce((O,Ne)=>O+Ne.amount,0),[a]);if(h)return e.jsx("div",{className:"min-h-screen bg-background p-4 pb-24 font-sans text-foreground transition-colors duration-200",children:e.jsx("div",{className:"max-w-md mx-auto space-y-6 pt-12",children:e.jsx(Ba,{})})});const vt=async()=>{await l()},pt=O=>{Y(O),z(null),F(!0)},ct=O=>{Y("expense"),z(O),F(!0)},st=O=>{Y("income"),z(O),F(!0)},dt=O=>{Y("debt"),z(O),F(!0)},rt=O=>{H?$==="expense"?T(H.id,O):$==="income"?D(H.id,O):$==="debt"&&M(H.id,O):$==="expense"?(b(O),O.roundUpAmount&&ft(i.length>0?i[0].id:"general","goal",void 0,O.roundUpAmount,O.accountId)):$==="income"?k(O):$==="debt"&&y(O)},ft=async(O,Ne,Le,at,Ke)=>{if(!at&&!Ee)return;const Xe=at||(Ee?Ee.roundedAmount-Ee.expenseAmount:0),gt=Ke||(Ee?Ee.accountId:""),Ze=c.find($e=>$e.id===gt);if(Ze&&await ne(Ze.id,{balance:Ze.balance-Xe}),Ne==="goal"){const $e=i.find(K=>K.id===O);if($e)await V(O,{currentAmount:$e.currentAmount+Xe}),L.success(`Saved ${ht[t.currency]}${Xe} to ${$e.name}!`);else{const K=i.find(ie=>ie.name==="General Savings");if(K)await V(K.id,{currentAmount:K.currentAmount+Xe}),L.success(`Saved ${ht[t.currency]}${Xe} to General Savings!`);else{const ie={name:"General Savings",targetAmount:1e4,currentAmount:Xe,targetDate:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString(),emoji:"ðŸ·"};w(ie),L.success(`Created "General Savings" and saved ${ht[t.currency]}${Xe}!`)}}}else we($e=>$e+Xe),L.success(`Saved ${ht[t.currency]}${Xe} to Emergency Fund!`);Ie(!1),Pt({particleCount:50,spread:60,origin:{y:.7}})},Ft=O=>{const Ne={today:1,week:7,month:30},Le=new Date;Le.setDate(Le.getDate()+Ne[O]),localStorage.setItem("roundUpMutedUntil",Le.toISOString()),Ie(!1),L.info(`Round ups muted for ${O==="today"?"today":O==="week"?"a week":"a month"}`)};return e.jsxs("div",{className:"min-h-screen bg-bg-secondary text-foreground transition-colors font-sans",children:[e.jsx(Po,{activeTab:m,onTabChange:O=>R(O),notificationCount:o.filter(O=>!O.read).length,onNotificationClick:()=>te(!Ae),onSettingsClick:()=>me(!ue),forceHide:Te,renderFab:O=>e.jsx(Ad,{isVisible:O&&!ue&&!Ae&&!Te,onOpenAI:()=>ge(!0),onAddTransaction:pt,onMigrate:()=>_e(!0)}),children:e.jsx(Sd,{onRefresh:vt,children:e.jsx(Ed,{children:e.jsxs(v.Suspense,{fallback:e.jsxs("div",{className:"space-y-6 pt-12",children:[e.jsx(Ba,{}),e.jsx("p",{className:"text-center text-slate-500 text-sm",children:"Loading Component..."})]}),children:[m==="dashboard"&&e.jsx("div",{className:"space-y-6",children:e.jsx(Dd,{expenses:s,incomes:a,currency:t.currency,goals:i,liabilities:r,debts:n,investments:d,accounts:c,emergencyFundAmount:u})}),m==="transactions"&&e.jsx(Id,{expenses:s,incomes:a,debts:n,accounts:c,currency:t.currency,onEditExpense:ct,onDeleteExpense:C,onEditIncome:st,onDeleteIncome:E,onEditDebt:dt,onDeleteDebt:J,onSettleDebt:B}),m==="goals"&&e.jsx(Pd,{goals:i,currency:t.currency,accounts:c,expenses:s,incomes:a,onCreateGoal:w,onUpdateGoal:V,onDeleteGoal:Z,onDeductFromAccount:async(O,Ne)=>{const Le=c.find(at=>at.id===O);Le&&await ne(O,{balance:Le.balance-Ne})}}),m==="accounts"&&e.jsx(Nd,{accounts:c,currency:t.currency,onCreateAccount:ae,onUpdateAccount:ne,onDeleteAccount:se}),m==="investments"&&e.jsx(Md,{}),m==="emergency"&&e.jsx(Rd,{currency:t.currency,userId:N,expenses:s,incomes:a,accounts:c,onEmergencyFundUpdate:O=>we(O)}),m==="liability"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(Od,{liabilities:r,currency:t.currency,totalMonthlyIncome:ye}),e.jsx(Ld,{currency:t.currency,expenses:s,accounts:c})]}),m==="recurring"&&e.jsx(Eo,{}),m==="more"&&e.jsx(yl,{onNavigate:O=>R(O),onOpenSettings:()=>me(!0),onOpenNotifications:()=>te(!0),emergencyFundAmount:u,bankAccountsCount:c.filter(O=>O.type==="bank").length,cardsCount:c.filter(O=>O.type==="credit_card").length,currency:t.currency})]})})})}),e.jsx(Lo,{isOpen:I,onClose:()=>{F(!1),z(null)},type:$,onSubmit:rt,initialData:H,accounts:c,roundUpEnabled:t.roundUpEnabled}),Ee&&e.jsx(Oo,{isOpen:bt,onClose:()=>Ie(!1),onConfirm:ft,expenseAmount:Ee.expenseAmount,roundedAmount:Ee.roundedAmount,currency:t.currency,goals:i,onMute:Ft}),e.jsx(Td,{isOpen:de,onClose:()=>ge(!1),context:yt,settings:t}),e.jsx(bl,{isOpen:ue,onClose:()=>me(!1),settings:t,onUpdateSettings:g,onAchievementClick:O=>{Re(O),Oe(!0),me(!1)}}),e.jsx(jl,{isOpen:Ae,onClose:()=>te(!1),notifications:o,onNotificationClick:O=>{O.achievementId&&(Re(O.achievementId),Oe(!0)),te(!1)},onMarkAsRead:O=>{be(Ne=>Ne.map(Le=>Le.id===O?{...Le,read:!0}:Le))},onClearRead:()=>{be(O=>O.filter(Ne=>!Ne.read)),L.success("Read notifications cleared")}}),e.jsx(vd,{isOpen:Te,onClose:()=>{Oe(!1),Re(null)},achievementId:Pe}),e.jsx(wd,{isOpen:X,onClose:pe,accounts:c,goals:i,currency:t.currency,destinationType:W,emergencyFund:{currentAmount:u,targetAmount:1e5},onAllocate:je}),e.jsx(kd,{isOpen:De,onClose:()=>_e(!1),accounts:c,currency:t.currency,onTransfer:j}),e.jsx(wo,{position:"bottom-center",richColors:!0,theme:"dark",toastOptions:{style:{background:"#1C1C1E",border:"1px solid rgba(255, 255, 255, 0.1)",color:"#FFFFFF",borderRadius:"20px",backdropFilter:"none"}}})]})}function _d({children:t,...s}){return e.jsx(Vo,{...s,children:t})}_i.createRoot(document.getElementById("root")).render(e.jsx(Ao,{children:e.jsx(_d,{attribute:"class",defaultTheme:"dark",forcedTheme:"dark",children:e.jsx(Fd,{})})}));export{oe as B,Ge as C,St as D,Fe as I,Q as L,Dn as M,Rt as N,Vs as P,He as S,xe as a,Zl as b,kl as c,Ce as d,ta as e,zd as f,Ct as g,At as h,Mo as i,Tt as j,Et as k,hs as l,lt as m,We as n,qe as o,Ye as p,ve as q,wn as r,Gd as s,L as t,Nl as u,Ud as v,Sl as w,En as x};
