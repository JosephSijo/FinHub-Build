import{r as p,j as e,y as We,Y as Z,R as de,x as ve,aF as ze,Z as Ke,w as Ge,A as Qe,aQ as ye,z as je,ah as Q}from"./ui-qF4dh6YK.js";import{q as ke,C as W,L as u,a as A,B as C,S as L,l as B,n as q,o as M,p as m,D as le,e as re,g as ne,h as ce,j as ie,I as Y,N as R,t as S}from"./index-BB111pBJ.js";import{I as V}from"./InteractiveFinancialValue-B4I9em0c.js";import{C as $e}from"./CyberButton-Ce0k8WVQ.js";import{S as oe}from"./slider-7kqvJGP8.js";import{H as Se}from"./haptics-C9gh8PRt.js";import{R as Ce,A as Xe,X as Ze,Y as Je,i as et,T as Ae,g as Ne,e as tt,f as st,C as at,L as lt}from"./charts-CgMDrE-9.js";import{M as rt}from"./MeshBackground-xIWs8Cbc.js";import"./vendor-7PqXWhc5.js";import"./motion-DFLNShgk.js";const J=[{symbol:"AAPL",name:"Apple Inc.",type:"stock",exchange:"NASDAQ"},{symbol:"GOOGL",name:"Alphabet Inc.",type:"stock",exchange:"NASDAQ"},{symbol:"MSFT",name:"Microsoft Corporation",type:"stock",exchange:"NASDAQ"},{symbol:"AMZN",name:"Amazon.com Inc.",type:"stock",exchange:"NASDAQ"},{symbol:"TSLA",name:"Tesla Inc.",type:"stock",exchange:"NASDAQ"},{symbol:"META",name:"Meta Platforms Inc.",type:"stock",exchange:"NASDAQ"},{symbol:"NVDA",name:"NVIDIA Corporation",type:"stock",exchange:"NASDAQ"},{symbol:"NFLX",name:"Netflix Inc.",type:"stock",exchange:"NASDAQ"}],ee=[{symbol:"TCS",name:"Tata Consultancy Services",type:"stock",exchange:"NSE"},{symbol:"INFY",name:"Infosys Limited",type:"stock",exchange:"NSE"},{symbol:"RELIANCE",name:"Reliance Industries",type:"stock",exchange:"NSE"},{symbol:"HDFCBANK",name:"HDFC Bank Limited",type:"stock",exchange:"NSE"},{symbol:"ICICIBANK",name:"ICICI Bank Limited",type:"stock",exchange:"NSE"},{symbol:"WIPRO",name:"Wipro Limited",type:"stock",exchange:"NSE"},{symbol:"SBIN",name:"State Bank of India",type:"stock",exchange:"NSE"},{symbol:"BHARTIARTL",name:"Bharti Airtel",type:"stock",exchange:"NSE"},{symbol:"ITC",name:"ITC Limited",type:"stock",exchange:"NSE"},{symbol:"HINDUNILVR",name:"Hindustan Unilever",type:"stock",exchange:"NSE"}],nt=[{symbol:"TCS",name:"Tata Consultancy Services",type:"stock",exchange:"BSE"},{symbol:"INFY",name:"Infosys Limited",type:"stock",exchange:"BSE"},{symbol:"RELIANCE",name:"Reliance Industries",type:"stock",exchange:"BSE"},{symbol:"HDFCBANK",name:"HDFC Bank Limited",type:"stock",exchange:"BSE"},{symbol:"ICICIBANK",name:"ICICI Bank Limited",type:"stock",exchange:"BSE"},{symbol:"WIPRO",name:"Wipro Limited",type:"stock",exchange:"BSE"},{symbol:"SBIN",name:"State Bank of India",type:"stock",exchange:"BSE"},{symbol:"BHARTIARTL",name:"Bharti Airtel",type:"stock",exchange:"BSE"},{symbol:"ITC",name:"ITC Limited",type:"stock",exchange:"BSE"},{symbol:"HINDUNILVR",name:"Hindustan Unilever",type:"stock",exchange:"BSE"}],Ie=[{symbol:"BTC-USD",name:"Bitcoin",type:"crypto",exchange:"Crypto"},{symbol:"ETH-USD",name:"Ethereum",type:"crypto",exchange:"Crypto"},{symbol:"BNB-USD",name:"Binance Coin",type:"crypto",exchange:"Crypto"},{symbol:"XRP-USD",name:"Ripple",type:"crypto",exchange:"Crypto"},{symbol:"SOL-USD",name:"Solana",type:"crypto",exchange:"Crypto"}],ct=[...J,...ee,...Ie],De=[{symbol:"AXISBLUECHIP",name:"Axis Bluechip Fund",type:"mutual_fund",exchange:"MF"},{symbol:"ICICIPRUTOP100",name:"ICICI Prudential Top 100 Fund",type:"mutual_fund",exchange:"MF"},{symbol:"SBISMALLCAP",name:"SBI Small Cap Fund",type:"mutual_fund",exchange:"MF"},{symbol:"HDFC500",name:"HDFC Index Fund Nifty 50",type:"mutual_fund",exchange:"MF"},{symbol:"UTINIFTY",name:"UTI Nifty Index Fund",type:"mutual_fund",exchange:"MF"}];function it(a){if(!a||a.length<1)return[];const r=a.toUpperCase();return[...ct,...De].filter(d=>d.symbol.includes(r)||d.name.toUpperCase().includes(r)).slice(0,10)}function Fe(){const a=Intl.DateTimeFormat().resolvedOptions().timeZone;return a.includes("Asia/Kolkata")||a.includes("Asia/Calcutta")?"IN":a.includes("America/")?"US":"OTHER"}function $(a,r){const o=r==="INR"?"IN":Fe();return a==="mutual_fund"||a==="sip"?De.slice(0,5):a==="crypto"?Ie:o==="IN"?[...ee.slice(0,10),...J.slice(0,5)]:[...J,...ee.slice(0,5)]}function _(a){switch(a){case"NSE":return ee;case"BSE":return nt;case"NASDAQ":return J;default:return[]}}async function we(a,r){try{await new Promise(y=>setTimeout(y,500));const d={AAPL:150,GOOGL:2800,MSFT:350,AMZN:3200,TSLA:800,META:350,NVDA:500,NFLX:450,TCS:3500,INFY:1500,RELIANCE:2400,HDFCBANK:1600,ICICIBANK:950,WIPRO:450,SBIN:550,"BTC-USD":45e3,"ETH-USD":3e3,"BNB-USD":400}[a]||100,c=new Date(r),g=Math.floor((new Date().getTime()-c.getTime())/(1e3*60*60*24)),w=(Math.random()-.5)*.2,I=d*(1-g/365*.1+w);return{price:Math.max(1,parseFloat(I.toFixed(2))),date:r}}catch(o){return console.error("Error fetching historical price:",o),null}}async function Pe(a){try{await new Promise(d=>setTimeout(d,500));const o={AAPL:175,GOOGL:2950,MSFT:380,AMZN:3400,TSLA:850,META:380,NVDA:550,NFLX:480,TCS:3700,INFY:1600,RELIANCE:2500,HDFCBANK:1650,ICICIBANK:1e3,WIPRO:470,SBIN:580,"BTC-USD":52e3,"ETH-USD":3500,"BNB-USD":450}[a]||100;return parseFloat(o.toFixed(2))}catch(r){return console.error("Error fetching current price:",r),null}}async function ot(a){const r={};return await Promise.all(a.map(async o=>{const d=await Pe(o);d!==null&&(r[o]=d)})),r}const dt=({active:a,payload:r,label:o,currency:d})=>{const[c,n]=de.useState(null);return de.useEffect(()=>{a&&o!==c&&(Se.light(),n(o))},[a,o,c]),a&&r&&r.length?e.jsxs("div",{className:"bg-[#1C1C1E] border border-white/5 p-4 rounded-xl shadow-2xl backdrop-blur-xl min-w-[160px]",children:[e.jsxs("p",{className:"text-[10px] text-slate-500 uppercase font-black mb-3 tracking-widest",children:["Year ",o]}),e.jsx("div",{className:"space-y-3",children:r.map((g,w)=>e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("span",{className:"text-[9px] text-slate-500 font-bold uppercase",children:g.name}),e.jsx("span",{className:`text-sm font-black tabular-nums ${g.name==="Total Wealth"?"text-[#0A84FF]":"text-slate-200"}`,children:A(g.value,d)})]},w))})]}):null};function xt(){const{settings:a}=ke(),[r,o]=p.useState(5e3),[d,c]=p.useState(12),[n,g]=p.useState(10),[w,I]=p.useState([]),[y,E]=p.useState({invested:0,wealth:0,returns:0});p.useEffect(()=>{te()},[r,d,n]);const te=()=>{const f=[];let j=0,x=0;const O=d/12/100,H=n*12;for(let F=1;F<=H;F++)j=(j+r)*(1+O),x+=r,F%12===0&&f.push({year:F/12,invested:Math.round(x),wealth:Math.round(j),returns:Math.round(j-x)});I(f),E({invested:x,wealth:j,returns:j-x})},D=f=>A(f,a.currency,!0);return e.jsxs(W,{className:"p-6 bg-black border border-white/5 shadow-xl rounded-2xl",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx("div",{className:"w-14 h-14 bg-[#0A84FF]/10 rounded-xl flex items-center justify-center border border-[#0A84FF]/20",children:e.jsx(We,{className:"w-7 h-7 text-[#0A84FF]"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-balance text-xl text-white",children:"Wealth Builder"}),e.jsx("p",{className:"text-label text-[10px] opacity-60",children:"See how small investments grow into massive wealth"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[e.jsxs("div",{className:"lg:col-span-4 space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-baseline",children:[e.jsx(u,{htmlFor:"monthly-investment",className:"text-label text-[10px] opacity-60",children:"Monthly Investment"}),e.jsx("span",{className:"text-balance text-xl text-[#0A84FF]",children:A(r,a.currency)})]}),e.jsx(oe,{id:"monthly-investment",value:[r],min:500,max:1e5,step:500,onValueChange:f=>o(f[0]),className:"py-2"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[e.jsx("span",{children:A(500,a.currency,!0)}),e.jsx("span",{children:A(1e5,a.currency,!0)})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-baseline",children:[e.jsx(u,{htmlFor:"expected-return",className:"text-label text-[10px] opacity-60",children:"Expected Return (Annually)"}),e.jsxs("span",{className:"text-balance text-xl text-[#30D158]",children:[d,"%"]})]}),e.jsx(oe,{id:"expected-return",value:[d],min:4,max:30,step:.5,onValueChange:f=>c(f[0]),className:"py-2"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[e.jsx("span",{children:"FD (6%)"}),e.jsx("span",{children:"Index (12%)"}),e.jsx("span",{children:"Small Cap (20%)"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-baseline",children:[e.jsx(u,{htmlFor:"time-period",className:"text-label text-[10px] opacity-60",children:"Time Period"}),e.jsxs("span",{className:"text-balance text-xl text-white",children:[n," Years"]})]}),e.jsx(oe,{id:"time-period",value:[n],min:1,max:50,step:1,onValueChange:f=>g(f[0]),className:"py-2"})]}),e.jsx(W,{className:"p-6 bg-[#1C1C1E] border border-white/5 rounded-xl shadow-lg",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-label text-[10px] opacity-60 uppercase",children:"Total Invested"}),e.jsx("span",{className:"text-sm font-bold text-white",children:D(y.invested)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-[#30D158] text-[10px] font-black uppercase flex items-center gap-2",children:[e.jsx(Z,{className:"w-3 h-3"})," Wealth Generated"]}),e.jsx("span",{className:"text-lg font-black text-[#30D158]",children:D(y.returns)})]}),e.jsxs("div",{className:"pt-4 border-t border-white/5 flex justify-between items-center",children:[e.jsx("span",{className:"text-label text-[10px] opacity-60 uppercase",children:"Final Wealth"}),e.jsx("span",{className:"text-2xl font-black text-[#0A84FF]",children:D(y.wealth)})]})]})})]}),e.jsxs("div",{className:"lg:col-span-8 min-h-[350px]",children:[e.jsx(Ce,{width:"100%",height:350,children:e.jsxs(Xe,{data:w,margin:{top:10,right:10,left:10,bottom:0},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorWealth",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#0A84FF",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#0A84FF",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorInvested",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#8E8E93",stopOpacity:.1}),e.jsx("stop",{offset:"95%",stopColor:"#8E8E93",stopOpacity:0})]}),e.jsxs("filter",{id:"glow-wealth",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx(Ze,{dataKey:"year",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"#8E8E93",fontWeight:700}}),e.jsx(Je,{hide:!0}),e.jsx(et,{y:0,stroke:"rgba(255,255,255,0.1)",strokeWidth:1}),e.jsx(Ae,{cursor:{stroke:"rgba(255,255,255,0.2)",strokeWidth:1,strokeDasharray:"4 4"},content:f=>e.jsx(dt,{...f,currency:a.currency})}),e.jsx(Ne,{type:"monotone",dataKey:"wealth",stroke:"#0A84FF",fillOpacity:1,fill:"url(#colorWealth)",name:"Total Wealth",strokeWidth:4,animationDuration:1500,filter:"url(#glow-wealth)"}),e.jsx(Ne,{type:"monotone",dataKey:"invested",stroke:"#8E8E93",fillOpacity:1,fill:"url(#colorInvested)",name:"Invested Amount",strokeWidth:2,strokeDasharray:"5 5",animationDuration:1e3})]})}),e.jsx("div",{className:"mt-6 p-4 bg-[#30D158]/5 rounded-xl border border-[#30D158]/10 text-center",children:e.jsxs("p",{className:"text-xs text-slate-300 leading-relaxed",children:["By investing ",e.jsx("span",{className:"text-white font-black",children:A(r,a.currency)})," monthly for ",e.jsxs("span",{className:"text-white font-black",children:[n," years"]})," at ",e.jsxs("span",{className:"text-[#30D158] font-black",children:[d,"%"]}),", you earn ",e.jsx("span",{className:"font-black text-[#30D158] text-lg",children:D(y.returns)})," in pure profit! ðŸš€"]})})]})]})]})}const X=["#0A84FF","#64D2FF","#007AFF","#5E5CE6","#BF5AF2","#00B0FF","#003366"];function ht({investments:a,currency:r}){const o=a.map(c=>({name:c.symbol,value:(c.currentPrice||0)*c.quantity})),d=({active:c,payload:n})=>(de.useEffect(()=>{c&&Se.light()},[c]),c&&n&&n.length?e.jsxs("div",{className:"bg-[#1C1C1E] border border-white/5 p-3 squircle-12 shadow-2xl backdrop-blur-xl",children:[e.jsx("p",{className:"text-[10px] text-slate-500 uppercase font-black mb-1",children:n[0].name}),e.jsx("p",{className:"text-sm font-black text-white tabular-nums",children:A(n[0].value,r)})]}):null);return e.jsxs("div",{className:"chart-container-solid rounded-3xl p-6 relative overflow-hidden",children:[e.jsx("div",{className:"chart-atmosphere bg-[#0A84FF]"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("h3",{className:"text-white font-black text-xs uppercase tracking-[0.2em] mb-6 px-2",children:"Allocation Matrix"}),e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(Ce,{width:"100%",height:"100%",children:e.jsxs(tt,{children:[e.jsx(st,{data:o,cx:"50%",cy:"50%",innerRadius:75,outerRadius:100,paddingAngle:3,cornerRadius:6,stroke:"none",dataKey:"value",children:o.map((c,n)=>e.jsx(at,{fill:X[n%X.length],style:{filter:`drop-shadow(0 0 6px ${X[n%X.length]}88)`},className:"transition-all duration-500 hover:opacity-80"},`cell-${n}`))}),e.jsx(Ae,{content:e.jsx(d,{})}),e.jsx(lt,{verticalAlign:"bottom",height:36,iconType:"circle",formatter:c=>e.jsx("span",{className:"text-[10px] font-black uppercase text-slate-500 tracking-widest",children:c})})]})})})]})]})}function mt({investments:a,onAdd:r,onEdit:o,onClose:d,currency:c}){return e.jsxs("div",{className:"frosted-plate rounded-3xl border border-white/5 p-6 bg-transparent",children:[e.jsx("div",{className:`flex items-center justify-between mb-8 px-2 ${a.length===0?"opacity-40":""}`,children:e.jsx("h3",{className:"text-white font-black text-xs uppercase tracking-[0.2em]",children:"Asset Registry"})}),a.length===0?e.jsxs("div",{onClick:r,className:"group cursor-pointer p-8 bg-slate-800/10 border-2 border-dashed border-slate-700/30 rounded-[32px] hover:border-slate-600/50 hover:bg-slate-800/20 transition-all duration-300 flex flex-col items-center justify-center space-y-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-slate-800/50 flex items-center justify-center border border-white/5 opacity-50 group-hover:scale-105 transition-transform",children:e.jsx(ve,{className:"w-6 h-6 text-slate-500"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-slate-400 font-bold",children:"No investments tracked yet. Want to see your growth here?"}),e.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-widest mt-2 font-black",children:"Tap to Initialize Portfolio"})]})]}):e.jsx("div",{className:"space-y-4",children:a.map(n=>{const g=n.buyPrice*n.quantity,w=(n.currentPrice||0)*n.quantity,I=w-g,y=g===0?0:I/g*100;return e.jsxs("div",{className:"group relative flex flex-col sm:flex-row sm:items-center justify-between p-4 bg-black/40 border border-white/5 rounded-[28px] hover:bg-black/60 transition-all duration-300 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0 relative z-10",children:[e.jsx("div",{className:"w-10 h-10 bg-white/5 border border-white/10 rounded-xl flex items-center justify-center shrink-0 group-hover:border-blue-500/30 group-hover:bg-blue-500/10 transition-all duration-500",children:e.jsx("span",{className:"text-xs font-black text-blue-400 font-mono",children:n.symbol.substring(0,2).toUpperCase()})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[e.jsx("h4",{className:"font-black text-xs uppercase tracking-tight text-white truncate",children:n.symbol}),e.jsx("span",{className:"text-[8px] px-1.5 py-0.5 bg-white/5 border border-white/10 rounded uppercase tracking-widest text-slate-500 font-black shrink-0 group-hover:text-blue-400 group-hover:border-blue-500/20 transition-colors",children:n.type.replace("_"," ")})]}),e.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-tighter truncate opacity-60",children:[n.name," // ",n.quantity," UNITS"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between sm:justify-end gap-6 shrink-0",children:[e.jsxs("div",{className:"text-right flex flex-col justify-center",children:[e.jsx("div",{className:"text-balance text-sm font-bold text-slate-200",children:e.jsx(V,{value:w,currency:c})}),e.jsx("div",{className:"flex items-center gap-2 justify-end mt-1",children:e.jsxs("div",{className:`text-[10px] font-bold tabular-nums px-2 py-0.5 rounded-lg ${I>=0?"bg-[#30D158]/10 text-[#30D158]":"bg-[#FF453A]/10 text-[#FF453A]"}`,children:[I>=0?"+":"",y.toFixed(2),"%"]})})]}),e.jsxs("div",{className:"flex gap-1.5 sm:opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>o(n),className:"w-9 h-9 p-0 bg-white/5 rounded-xl hover:bg-blue-500/10 hover:text-blue-400 text-slate-400",children:e.jsx(ze,{className:"w-4 h-4"})}),e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>d(n),className:"w-9 h-9 p-0 bg-white/5 rounded-xl hover:bg-rose-500/10 hover:text-rose-400 text-slate-400",children:e.jsx(Ke,{className:"w-4 h-4"})})]})]})]},n.id)})})]})}function ut({icon:a,title:r,description:o,actionLabel:d,onAction:c,illustration:n}){return e.jsx(W,{className:"p-12 text-center flex flex-col items-center justify-center h-full min-h-[400px]",children:e.jsxs("div",{className:"flex flex-col items-center gap-6 max-w-sm mx-auto",children:[n?e.jsx("div",{className:"text-6xl mb-2 animate-bounce-slow",children:n}):e.jsx("div",{className:"w-20 h-20 bg-gray-50 dark:bg-gray-800 rounded-full flex items-center justify-center mb-2 shadow-sm",children:e.jsx(a,{className:"w-10 h-10 text-gray-400 dark:text-gray-500"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 font-display tracking-tight",children:r}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 leading-relaxed",children:o})]}),d&&c&&e.jsx(C,{onClick:c,className:"mt-2",size:"lg",children:d})]})})}function St(){const{settings:{currency:a},accounts:r,expenses:o,incomes:d,investments:c,createInvestment:n,updateInvestment:g,deleteInvestment:w,createIncome:I}=ke(),[y,E]=p.useState(!1),[te,D]=p.useState(!1),[f,j]=p.useState(!1),[x,O]=p.useState(null),[H,F]=p.useState(""),[v,z]=p.useState(!1),[xe,he]=p.useState(!1),[K,N]=p.useState([]),[me,P]=p.useState(!1),[k,Ee]=p.useState("All"),[s,h]=p.useState({symbol:"",name:"",type:"stock",quantity:"",buyPrice:"",currentPrice:"",totalYield:"0",purchaseDate:new Date().toISOString().split("T")[0],exchange:"NSE",isPhysicalAsset:!1,sourceAccountId:""}),Te=Fe(),U=a==="INR"||Te==="IN";p.useEffect(()=>{y&&!s.symbol&&(s.type==="stock"&&U?N(_(s.exchange)):N($(s.type,a)),P(!0))},[y,s.type,s.symbol,s.exchange,a,U]);const ue=t=>{if(h({...s,symbol:t}),t.length>0){const l=it(t);N(l),P(!0)}else s.type==="stock"&&U?N(_(s.exchange)):N($(s.type,a)),P(!0)},pe=async t=>{h({...s,symbol:t.symbol,name:t.name,type:t.type}),P(!1),await Le(t.symbol)},Le=async t=>{if(!(!t||!s.purchaseDate)){z(!0);try{const l=await we(t,s.purchaseDate);l&&h(b=>({...b,buyPrice:l.price.toString()}));const i=await Pe(t);i&&h(b=>({...b,currentPrice:i.toString()})),S.success("Prices fetched successfully!")}catch(l){console.error("Error fetching prices:",l),S.error("Failed to fetch prices. Please enter manually.")}finally{z(!1)}}},be=async t=>{if(h({...s,purchaseDate:t}),s.symbol){z(!0);try{const l=await we(s.symbol,t);l&&(h(i=>({...i,buyPrice:l.price.toString()})),S.success(`Buy price updated for ${t}`))}catch(l){console.error("Error fetching historical price:",l)}finally{z(!1)}}},Be=async()=>{if(!s.symbol||!s.name||!s.quantity||!s.buyPrice||!s.currentPrice||!s.purchaseDate){S.error("Please fill in all fields");return}const t={symbol:s.symbol.toUpperCase(),name:s.name,type:s.type,quantity:parseFloat(s.quantity.toString()),buyPrice:parseFloat(s.buyPrice.toString()),currentPrice:parseFloat(s.currentPrice.toString()),totalYield:parseFloat(s.totalYield.toString())||0,isPhysicalAsset:s.type==="physical_asset",accountId:s.sourceAccountId,purchaseDate:s.purchaseDate,currency:a};try{await n(t,s.sourceAccountId),E(!1),G()}catch(l){console.error("Error creating investment:",l)}},G=()=>{h({symbol:"",name:"",type:"stock",quantity:"",buyPrice:"",currentPrice:"",totalYield:"0",purchaseDate:new Date().toISOString().split("T")[0],exchange:"NSE",isPhysicalAsset:!1,sourceAccountId:""}),P(!1)},qe=async()=>{if(c.length===0){S.error("No investments to refresh");return}he(!0);try{const t=c.map(i=>i.symbol),l=await ot(t);await Promise.all(c.map(i=>{const b=l[i.symbol];return b&&b!==i.currentPrice?g(i.id,{currentPrice:b}):Promise.resolve()})),S.success("Prices refreshed successfully!")}catch(t){console.error("Error refreshing prices:",t),S.error("Failed to refresh prices")}finally{he(!1)}},Me=t=>{O(t),h({symbol:t.symbol,name:t.name,type:t.type,quantity:t.quantity.toString(),buyPrice:t.buyPrice.toString(),currentPrice:(t.currentPrice||0).toString(),totalYield:(t.totalYield||0).toString(),purchaseDate:t.purchaseDate,exchange:"NSE",isPhysicalAsset:t.type==="physical_asset",sourceAccountId:t.accountId||""}),D(!0)},Re=async()=>{if(!x||!s.symbol||!s.name||!s.quantity||!s.buyPrice||!s.currentPrice||!s.purchaseDate){S.error("Please fill in all fields");return}const t={symbol:s.symbol.toUpperCase(),name:s.name,type:s.type,quantity:parseFloat(s.quantity.toString()),buyPrice:parseFloat(s.buyPrice.toString()),currentPrice:parseFloat(s.currentPrice.toString()),totalYield:parseFloat(s.totalYield.toString())||0,isPhysicalAsset:s.type==="physical_asset",purchaseDate:s.purchaseDate,currency:a};try{await g(x.id,t),D(!1),O(null),G()}catch(l){console.error("Error updating investment:",l)}},Oe=t=>{O(t),F(r.length>0?r[0].id:""),j(!0)},Ue=async()=>{if(!x||!H){S.error("Please select an account");return}const t=(x.currentPrice||0)*x.quantity,l=t-x.buyPrice*x.quantity;try{await I({source:`Sold ${x.symbol} (${x.quantity} ${x.type==="stock"?"shares":"units"})`,amount:t,date:new Date().toISOString().split("T")[0],category:l>=0?"Capital Gain":"Capital Loss",accountId:H}),await w(x.id),j(!1),O(null),F(""),S.success(l>=0?`Investment closed! Profit: ${A(l,a)}`:`Investment closed. Loss: ${A(Math.abs(l),a)}`)}catch(i){console.error("Error closing investment:",i)}},se=()=>c.filter(t=>{if(t.accountId&&t.accountId!=="none"){const l=r.find(i=>i.id===t.accountId);if(l&&l.type!=="investment")return!1}if(k!=="All"){const l=new Date(t.purchaseDate),i=new Date,b=(i.getFullYear()-l.getFullYear())*12+(i.getMonth()-l.getMonth());if(k==="1M"&&b>0||k==="3M"&&b>2)return!1}return!0}).reduce((t,l)=>t+(l.currentPrice||0)*l.quantity,0),ae=()=>c.filter(t=>{if(t.accountId&&t.accountId!=="none"){const l=r.find(i=>i.id===t.accountId);if(l&&l.type!=="investment")return!1}if(k!=="All"){const l=new Date(t.purchaseDate),i=new Date,b=(i.getFullYear()-l.getFullYear())*12+(i.getMonth()-l.getMonth());if(k==="1M"&&b>0||k==="3M"&&b>2)return!1}return!0}).reduce((t,l)=>t+l.buyPrice*l.quantity,0),ge=()=>c.filter(t=>{if(t.accountId&&t.accountId!=="none"){const l=r.find(i=>i.id===t.accountId);if(l&&l.type!=="investment")return!1}if(k!=="All"){const l=new Date(t.purchaseDate),i=new Date,b=(i.getFullYear()-l.getFullYear())*12+(i.getMonth()-l.getMonth());if(k==="1M"&&b>0||k==="3M"&&b>2)return!1}return!0}).reduce((t,l)=>t+(l.totalYield||0),0),Ye=()=>se()+ge()-ae(),_e=()=>{const t=ae();return t===0?0:(se()/t-1)*100},Ve=se(),T=Ye(),He=_e(),fe=[...o.filter(t=>t.category==="Investment"||t.description&&(t.description.toLowerCase().includes("invest")||t.description.toLowerCase().includes("stock")||t.description.toLowerCase().includes("mutual fund")||t.description.toLowerCase().includes("crypto"))),...d.filter(t=>t.source&&(t.source.toLowerCase().includes("dividend")||t.source.toLowerCase().includes("investment")||t.source.toLowerCase().includes("capital gain")))].sort((t,l)=>new Date(l.date).getTime()-new Date(t.date).getTime()).slice(0,5);return e.jsxs("div",{className:"space-y-6 pb-24",children:[e.jsxs("div",{className:"mesh-gradient-card sq-2xl overflow-hidden group relative",children:[e.jsx(rt,{variant:"invest"}),e.jsxs("div",{className:"bg-transparent p-0 relative z-10",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/graphy-dark.png')] opacity-[0.03] pointer-events-none z-0"}),e.jsxs("div",{className:"p-6 flex items-center justify-between gap-4 relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500/10 sq-md flex items-center justify-center border border-blue-500/20 shadow-[0_0_15px_rgba(59,130,246,0.1)]",children:e.jsx(Z,{className:"w-6 h-6 text-blue-400"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-white font-black text-xs uppercase tracking-[0.3em]",children:"Growth Node"}),e.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest mt-1",children:"Active Capital Projection"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[9px] text-slate-500 uppercase font-black tracking-[0.2em] mb-1",children:"Portfolio Valuation"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"text-xl font-black text-white tabular-nums font-mono",children:e.jsx(V,{value:Ve,currency:a})}),e.jsx("div",{className:"absolute inset-0 bg-blue-500/20 blur-xl -z-10 animate-pulse"})]})]})]}),e.jsxs("div",{className:"py-4 px-6 relative z-10 border-t border-white/5",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[9px] text-slate-500 uppercase font-bold tracking-widest",children:"Aggregate P&L"}),e.jsxs("div",{className:`text-xl font-black font-mono tabular-nums ${T>=0?"text-emerald-400":"text-rose-500"}`,children:[T>=0?"+":"",e.jsx(V,{value:T,currency:a})]})]}),e.jsxs("div",{className:`px-4 py-2 sq-md text-[10px] font-black tracking-widest border transition-all ${T>=0?"bg-emerald-500/10 border-emerald-500/20 text-emerald-400 shadow-[0_0_10px_rgba(16,185,129,0.1)]":"bg-rose-500/10 border-rose-500/20 text-rose-400 shadow-[0_0_10px_rgba(244,63,94,0.1)]"}`,children:[T>=0?"â–²":"â–¼"," ",He.toFixed(2),"% ROI"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-white/5 mb-6",children:[e.jsxs("div",{className:"bg-white/5 p-3 sq-md border border-white/5",children:[e.jsx("p",{className:"text-[9px] text-slate-500 uppercase font-black tracking-widest mb-1.5 opacity-60",children:"Locked Capital"}),e.jsx("div",{className:"text-sm font-black text-slate-200 font-mono tabular-nums",children:e.jsx(V,{value:ae(),currency:a})})]}),e.jsxs("div",{className:"bg-white/5 p-3 sq-md border border-white/5",children:[e.jsx("p",{className:"text-[9px] text-slate-500 uppercase font-black tracking-widest mb-1.5 opacity-60",children:"Yield Injection"}),e.jsx("div",{className:"text-sm font-black text-blue-400 font-mono tabular-nums",children:e.jsx(V,{value:ge(),currency:a})})]})]}),fe.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-label text-[8px] opacity-50 uppercase font-black tracking-widest mb-3",children:"Audit Trail"}),fe.map((t,l)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-white/5 last:border-0 hover:bg-white/5 transition-colors px-2 -mx-2 rounded-lg",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-bold text-slate-200 truncate",children:t.description||t.source}),e.jsxs("p",{className:"text-label text-[8px] mt-0.5 opacity-50",children:[t.category," â€¢ ",new Date(t.date).toLocaleDateString()]})]}),e.jsxs("div",{className:`text-balance text-xs font-bold shrink-0 ${t.source?"text-[#30D158]":"text-zinc-400"}`,children:[t.source?"+":"-",e.jsx(V,{value:t.amount,currency:a})]})]},l))]})]}),e.jsx("div",{className:"stack-footer",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs(L,{value:k,onValueChange:t=>Ee(t),children:[e.jsx(B,{className:"h-9 w-32 bg-black/20 border-white/5 text-label text-[10px] sq-md",children:e.jsx(q,{placeholder:"Period"})}),e.jsxs(M,{className:"bg-black border-white/10 text-white",children:[e.jsx(m,{value:"1M",children:"30 Days"}),e.jsx(m,{value:"3M",children:"90 Days"}),e.jsx(m,{value:"All",children:"All Time"})]})]}),e.jsxs(C,{variant:"ghost",size:"sm",onClick:qe,disabled:xe||c.length===0,className:"h-9 px-4 text-label text-[10px] text-[#0A84FF] hover:text-[#007AFF] hover:bg-[#0A84FF]/10 sq-md",children:[e.jsx(Ge,{className:`w-3.5 h-3.5 mr-2 ${xe?"animate-spin":""}`}),"Sync Market"]})]})})]})]}),e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-100 tracking-tight truncate",children:"Active Portfolio"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1 truncate",children:"Manage stocks, mutual funds and assets"})]}),e.jsx($e,{onClick:()=>E(!0),icon:ve,className:"h-12",children:"Add Asset"})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-1 gap-6",children:c.length===0?e.jsx("div",{className:"h-full flex flex-col items-center justify-center py-20 bg-black sq-2xl border border-dashed border-white/10",children:e.jsx(ut,{icon:Z,title:"No assets tracked yet",description:"Start building your portfolio by adding your first investment.",illustration:"ðŸŒ¿",actionLabel:"Add Investment",onAction:()=>E(!0)})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(mt,{investments:c,onAdd:()=>E(!0),onEdit:Me,onClose:Oe,currency:a}),e.jsx(ht,{investments:c,currency:a}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(W,{className:"p-6 bg-black border border-white/5 sq-xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#30D158]/10 flex items-center justify-center",children:e.jsx(Qe,{className:"w-4 h-4 text-[#30D158]"})}),e.jsx("h4",{className:"text-label text-[8px] opacity-60",children:"Market Insight"})]}),e.jsx("p",{className:"text-sm text-slate-300 leading-relaxed font-medium",children:"FinHub automatically suggests prices based on your purchase date and fetches real-time quotes for accurate tracking."})]}),e.jsxs(W,{className:"p-6 bg-black border border-white/5 sq-xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-500/20 flex items-center justify-center",children:e.jsx(Z,{className:"w-4 h-4 text-purple-400"})}),e.jsx("h4",{className:"text-label text-[8px] opacity-60",children:"Portfolio Health"})]}),e.jsxs("p",{className:"text-sm text-slate-300 leading-relaxed font-medium",children:["Keep your data fresh using the ",e.jsx("span",{className:"text-[#0A84FF] font-black",children:"Sync"})," button to update all holdings with the latest market activity."]})]})]})]})}),e.jsx(le,{open:y,onOpenChange:t=>{E(t),t||G()},children:e.jsxs(re,{className:"max-w-md max-h-[90vh] overflow-y-auto bg-black border-white/10 text-white p-0 sq-2xl",children:[e.jsx("div",{className:"p-8 border-b border-white/5",children:e.jsxs(ne,{className:"p-0",children:[e.jsx(ce,{className:"text-xl font-bold tracking-tight text-white",children:"Add Investment"}),e.jsx(ie,{className:"text-slate-500 text-xs mt-1",children:"Add a new stock, mutual fund, or SIP to your portfolio"})]})}),e.jsxs("div",{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"add-investment-type",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Type"}),e.jsxs(L,{value:s.type,onValueChange:t=>{h({...s,type:t}),N(t==="stock"&&U?_(s.exchange):$(t,a))},children:[e.jsx(B,{id:"add-investment-type",name:"type",className:"bg-white/5 border-white/5 sq-md h-14 text-white",children:e.jsx(q,{})}),e.jsxs(M,{className:"bg-black border-white/10 text-white",children:[e.jsx(m,{value:"stock",children:"Stock"}),e.jsx(m,{value:"mutual_fund",children:"Mutual Fund"}),e.jsx(m,{value:"sip",children:"SIP"}),e.jsx(m,{value:"crypto",children:"Cryptocurrency"}),e.jsx(m,{value:"physical_asset",children:"Physical Asset (Gold, Real Estate, etc.)"})]})]})]}),U&&s.type==="stock"&&e.jsxs("div",{children:[e.jsx(u,{htmlFor:"add-investment-exchange",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Exchange"}),e.jsxs(L,{value:s.exchange,onValueChange:t=>{h({...s,exchange:t}),N(_(t))},children:[e.jsx(B,{id:"add-investment-exchange",name:"exchange",className:"bg-white/5 border-white/5 sq-md h-14 text-white",children:e.jsx(q,{})}),e.jsxs(M,{className:"bg-black border-white/10 text-white",children:[e.jsx(m,{value:"NSE",children:"NSE (National Stock Exchange)"}),e.jsx(m,{value:"BSE",children:"BSE (Bombay Stock Exchange)"}),e.jsx(m,{value:"NASDAQ",children:"NASDAQ (US)"})]})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(u,{htmlFor:"add-investment-symbol",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Symbol/Code"}),e.jsxs("div",{className:"relative",children:[e.jsx(Y,{id:"add-investment-symbol",name:"symbol",value:s.symbol,onChange:t=>ue(t.target.value),onFocus:()=>P(!0),onBlur:()=>{setTimeout(()=>P(!1),200)},className:"bg-white/5 border-white/5 sq-md h-14 text-white pr-10",placeholder:"Search for symbol...",autoComplete:"off"}),e.jsx(ye,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500"})]}),me&&K.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-2 bg-black border border-white/10 sq-md shadow-2xl max-h-60 overflow-y-auto overflow-x-hidden",children:K.map((t,l)=>e.jsx("button",{onMouseDown:i=>{i.preventDefault(),pe(t)},className:"w-full text-left px-5 py-4 hover:bg-white/5 transition-colors border-b border-white/5 last:border-0 group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-white group-hover:text-blue-400 transition-colors",children:t.symbol}),e.jsx("p",{className:"text-[10px] text-slate-500 mt-0.5",children:t.name})]}),e.jsx("span",{className:"text-[9px] font-black px-2 py-1 bg-blue-500/10 text-blue-400 rounded-lg uppercase tracking-widest border border-blue-500/10",children:t.exchange})]})},l))})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"add-investment-account",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Source/Holding Account"}),e.jsxs(L,{value:s.sourceAccountId,onValueChange:t=>h({...s,sourceAccountId:t}),children:[e.jsx(B,{id:"add-investment-account",className:"bg-white/5 border-white/5 sq-md h-14 text-white",children:e.jsx(q,{placeholder:"Select account..."})}),e.jsxs(M,{className:"bg-black border-white/10 text-white",children:[e.jsx(m,{value:"none",children:"No Linking (Physical Only)"}),r.map(t=>e.jsxs(m,{value:t.id,children:[t.name," (",t.type,")"]},t.id))]})]}),e.jsx("p",{className:"text-[10px] text-slate-500 mt-2 italic px-1",children:"Linking an account enables Principal tracking via Transfers."})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"add-investment-name",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Name"}),e.jsx(Y,{id:"add-investment-name",name:"name",value:s.name,onChange:t=>h({...s,name:t.target.value}),className:"bg-white/5 border-white/5 sq-md h-14 text-white",placeholder:"e.g., Apple Inc.",autoComplete:"off"})]}),e.jsxs("div",{children:[e.jsxs(u,{htmlFor:"add-investment-date",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 flex items-center gap-2",children:[e.jsx(je,{className:"w-3 h-3 text-blue-400"}),"Purchase Date"]}),e.jsx(Y,{id:"add-investment-date",name:"purchaseDate",type:"date",value:s.purchaseDate,onChange:t=>be(t.target.value),className:"bg-white/5 border-white/5 sq-md h-14 text-white",max:new Date().toISOString().split("T")[0],autoComplete:"off"}),e.jsx("p",{className:"text-[10px] text-slate-500 mt-2 italic px-1",children:"Buy price will be fetched based on this date"})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"add-investment-quantity",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Quantity/Units"}),e.jsx(R,{id:"add-investment-quantity",name:"quantity",value:s.quantity,onChange:t=>h({...s,quantity:t}),className:"bg-white/5 border-white/5 sq-md h-14 text-white",placeholder:"Number of shares/units",autoComplete:"off"})]}),e.jsxs("div",{children:[e.jsxs(u,{htmlFor:"add-investment-buy-price",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 flex items-center justify-between",children:[e.jsx("span",{children:"Buy Price (Avg)"}),v&&e.jsxs("span",{className:"text-[9px] text-blue-400 flex items-center gap-1 font-black uppercase tracking-widest",children:[e.jsx(Q,{className:"w-3 h-3 animate-spin"}),"Fetching..."]})]}),e.jsx(R,{id:"add-investment-buy-price",name:"buyPrice",value:s.buyPrice,onChange:t=>h({...s,buyPrice:t}),className:"bg-white/5 border-white/5 sq-md h-14 text-white",placeholder:"Auto-filled based on purchase date",disabled:v,autoComplete:"off"})]}),e.jsxs("div",{children:[e.jsxs(u,{htmlFor:"add-investment-current-price",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 flex items-center justify-between",children:[e.jsx("span",{children:"Current Market Value (Per Unit)"}),v&&e.jsxs("span",{className:"text-[9px] text-blue-400 flex items-center gap-1 font-black uppercase tracking-widest",children:[e.jsx(Q,{className:"w-3 h-3 animate-spin"}),"Fetching..."]})]}),e.jsx(R,{id:"add-investment-current-price",name:"currentPrice",value:s.currentPrice,onChange:t=>h({...s,currentPrice:t}),className:"bg-white/5 border-white/5 rounded-2xl h-14 text-white",placeholder:"Auto-filled from market",disabled:v,autoComplete:"off"})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"add-investment-total-yield",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Total Yield (Dividends/Interest)"}),e.jsx(R,{id:"add-investment-total-yield",name:"totalYield",value:s.totalYield,onChange:t=>h({...s,totalYield:t}),className:"bg-white/5 border-white/5 rounded-2xl h-14 text-white",placeholder:"Total extra cash generated",autoComplete:"off"})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx(C,{variant:"outline",onClick:()=>E(!1),className:"flex-1 rounded-2xl h-12 border-white/10 hover:bg-white/5 text-slate-400",children:"Cancel"}),e.jsx(C,{onClick:Be,className:"flex-1 rounded-2xl h-12 bg-blue-600 hover:bg-blue-500 text-white font-bold",disabled:v,children:"Add Investment"})]})]})]})}),e.jsx(le,{open:te,onOpenChange:t=>{D(t),t||G()},children:e.jsxs(re,{className:"max-w-md max-h-[90vh] overflow-y-auto bg-black border-white/10 text-white p-0 sq-2xl",children:[e.jsx("div",{className:"p-8 border-b border-white/5",children:e.jsxs(ne,{className:"p-0",children:[e.jsx(ce,{className:"text-xl font-bold tracking-tight text-white",children:"Edit Asset"}),e.jsx(ie,{className:"text-slate-500 text-xs mt-1",children:"Update details of your existing investment node"})]})}),e.jsxs("div",{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"edit-investment-type",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Type"}),e.jsxs(L,{value:s.type,onValueChange:t=>{h({...s,type:t}),N(t==="stock"&&U?_(s.exchange):$(t,a))},children:[e.jsx(B,{id:"edit-investment-type",name:"type",className:"bg-white/5 border-white/5 rounded-2xl h-14 text-white",children:e.jsx(q,{})}),e.jsxs(M,{className:"bg-slate-900 border-white/10 text-white",children:[e.jsx(m,{value:"stock",children:"Stock"}),e.jsx(m,{value:"mutual_fund",children:"Mutual Fund"}),e.jsx(m,{value:"sip",children:"SIP"}),e.jsx(m,{value:"crypto",children:"Cryptocurrency"}),e.jsx(m,{value:"physical_asset",children:"Physical Asset (Gold, Real Estate, etc.)"})]})]})]}),U&&s.type==="stock"&&e.jsxs("div",{children:[e.jsx(u,{htmlFor:"edit-investment-exchange",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Exchange"}),e.jsxs(L,{value:s.exchange,onValueChange:t=>{h({...s,exchange:t}),N(_(t))},children:[e.jsx(B,{id:"edit-investment-exchange",name:"exchange",className:"bg-white/5 border-white/5 rounded-2xl h-14 text-white",children:e.jsx(q,{})}),e.jsxs(M,{className:"bg-slate-900 border-white/10 text-white",children:[e.jsx(m,{value:"NSE",children:"NSE (National Stock Exchange)"}),e.jsx(m,{value:"BSE",children:"BSE (Bombay Stock Exchange)"}),e.jsx(m,{value:"NASDAQ",children:"NASDAQ (US)"})]})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(u,{htmlFor:"edit-investment-symbol",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Symbol/Code"}),e.jsxs("div",{className:"relative",children:[e.jsx(Y,{id:"edit-investment-symbol",name:"symbol",value:s.symbol,onChange:t=>ue(t.target.value),onFocus:()=>P(!0),onBlur:()=>{setTimeout(()=>P(!1),200)},className:"bg-white/5 border-white/5 sq-md h-14 text-white pr-10",placeholder:"Search for symbol...",autoComplete:"off"}),e.jsx(ye,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500"})]}),me&&K.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-2 bg-black border border-white/10 sq-md shadow-2xl max-h-60 overflow-y-auto overflow-x-hidden",children:K.map((t,l)=>e.jsx("button",{onMouseDown:i=>{i.preventDefault(),pe(t)},className:"w-full text-left px-5 py-4 hover:bg-white/5 transition-colors border-b border-white/5 last:border-0 group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-white group-hover:text-blue-400 transition-colors",children:t.symbol}),e.jsx("p",{className:"text-[10px] text-slate-500 mt-0.5",children:t.name})]}),e.jsx("span",{className:"text-[9px] font-black px-2 py-1 bg-blue-500/10 text-blue-400 rounded-lg uppercase tracking-widest border border-blue-500/10",children:t.exchange})]})},l))})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"edit-investment-account",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Source/Holding Account"}),e.jsxs(L,{value:s.sourceAccountId,onValueChange:t=>h({...s,sourceAccountId:t}),children:[e.jsx(B,{id:"edit-investment-account",className:"bg-white/5 border-white/5 rounded-2xl h-14 text-white",children:e.jsx(q,{placeholder:"Select account..."})}),e.jsxs(M,{className:"bg-slate-900 border-white/10 text-white",children:[e.jsx(m,{value:"none",children:"No Linking (Physical Only)"}),r.map(t=>e.jsxs(m,{value:t.id,children:[t.name," (",t.type,")"]},t.id))]})]})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"edit-investment-name",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Name"}),e.jsx(Y,{id:"edit-investment-name",name:"name",value:s.name,onChange:t=>h({...s,name:t.target.value}),className:"bg-white/5 border-white/5 sq-md h-14 text-white",placeholder:"e.g., Apple Inc.",autoComplete:"off"})]}),e.jsxs("div",{children:[e.jsxs(u,{htmlFor:"edit-investment-date",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 flex items-center gap-2",children:[e.jsx(je,{className:"w-3 h-3 text-blue-400"}),"Purchase Date"]}),e.jsx(Y,{id:"edit-investment-date",name:"purchaseDate",type:"date",value:s.purchaseDate,onChange:t=>be(t.target.value),className:"bg-white/5 border-white/5 sq-md h-14 text-white",max:new Date().toISOString().split("T")[0],autoComplete:"off"}),e.jsx("p",{className:"text-[10px] text-slate-500 mt-2 italic px-1",children:"Buy price will be fetched based on this date"})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"edit-investment-quantity",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Quantity/Units"}),e.jsx(R,{id:"edit-investment-quantity",name:"quantity",value:s.quantity,onChange:t=>h({...s,quantity:t}),className:"bg-white/5 border-white/5 sq-md h-14 text-white",placeholder:"Number of shares/units",autoComplete:"off"})]}),e.jsxs("div",{children:[e.jsxs(u,{htmlFor:"edit-investment-buy-price",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 flex items-center justify-between",children:[e.jsx("span",{children:"Buy Price (Avg)"}),v&&e.jsxs("span",{className:"text-[9px] text-blue-400 flex items-center gap-1 font-black uppercase tracking-widest",children:[e.jsx(Q,{className:"w-3 h-3 animate-spin"}),"Fetching..."]})]}),e.jsx(R,{id:"edit-investment-buy-price",name:"buyPrice",value:s.buyPrice,onChange:t=>h({...s,buyPrice:t}),className:"bg-white/5 border-white/5 sq-md h-14 text-white",placeholder:"Auto-filled based on purchase date",disabled:v,autoComplete:"off"})]}),e.jsxs("div",{children:[e.jsxs(u,{htmlFor:"edit-investment-current-price",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 flex items-center justify-between",children:[e.jsx("span",{children:"Current Market Value (Per Unit)"}),v&&e.jsxs("span",{className:"text-[9px] text-blue-400 flex items-center gap-1 font-black uppercase tracking-widest",children:[e.jsx(Q,{className:"w-3 h-3 animate-spin"}),"Fetching..."]})]}),e.jsx(R,{id:"edit-investment-current-price",name:"currentPrice",value:s.currentPrice,onChange:t=>h({...s,currentPrice:t}),className:"bg-white/5 border-white/5 rounded-2xl h-14 text-white",placeholder:"Auto-filled from market",disabled:v,autoComplete:"off"})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"edit-investment-total-yield",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Total Yield (Dividends/Interest)"}),e.jsx(R,{id:"edit-investment-total-yield",name:"totalYield",value:s.totalYield,onChange:t=>h({...s,totalYield:t}),className:"bg-white/5 border-white/5 rounded-2xl h-14 text-white",placeholder:"Total extra cash generated",autoComplete:"off"})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx(C,{variant:"outline",onClick:()=>D(!1),className:"flex-1 rounded-2xl h-12 border-white/10 hover:bg-white/5 text-slate-400",children:"Cancel"}),e.jsx(C,{onClick:Re,className:"flex-1 rounded-2xl h-12 bg-blue-600 hover:bg-blue-500 text-white font-bold",disabled:v,children:"Update Asset"})]})]})]})}),e.jsx(le,{open:f,onOpenChange:t=>{j(t),t||(O(null),F(""))},children:e.jsxs(re,{className:"max-w-md max-h-[90vh] overflow-y-auto bg-black border-white/10 text-white p-0 sq-2xl",children:[e.jsx("div",{className:"p-8 border-b border-white/5",children:e.jsxs(ne,{className:"p-0",children:[e.jsx(ce,{className:"text-xl font-bold tracking-tight text-white",children:"Full Exit Protocol"}),e.jsx(ie,{className:"text-slate-500 text-xs mt-1",children:"Liquidate your position and distribute proceeds"})]})}),e.jsxs("div",{className:"p-8 space-y-6",children:[x&&e.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-slate-800 rounded-xl flex items-center justify-center border border-white/5",children:e.jsx("span",{className:"text-xs font-black text-blue-400",children:x.symbol.substring(0,2)})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white tracking-tight",children:x.symbol}),e.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:x.name})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:`text-[10px] font-black px-2 py-1 rounded-lg uppercase tracking-widest border ${T>=0?"bg-emerald-500/10 text-emerald-400 border-emerald-500/10":"bg-rose-500/10 text-rose-400 border-rose-500/10"}`,children:[T>=0?"+":"",T.toFixed(2),"%"]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-white/5",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest mb-1",children:"Position Size"}),e.jsxs("p",{className:"text-sm font-bold text-white",children:[x.quantity," ",x.type==="stock"?"shares":"units"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest mb-1",children:"Exit Est."}),e.jsx("p",{className:"text-sm font-bold text-blue-400",children:A((x.currentPrice||0)*x.quantity,a)})]})]})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"close-account",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Destination Account"}),e.jsxs(L,{value:H,onValueChange:t=>{F(t)},children:[e.jsx(B,{id:"close-account",name:"accountId",className:"bg-white/5 border-white/5 rounded-2xl h-14 text-white",children:e.jsx(q,{placeholder:"Select destination account..."})}),e.jsx(M,{className:"bg-slate-900 border-white/10 text-white",children:r.map(t=>e.jsx(m,{value:t.id,children:t.name},t.id))})]})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx(C,{variant:"outline",onClick:()=>j(!1),className:"flex-1 rounded-2xl h-12 border-white/10 hover:bg-white/5 text-slate-400",children:"Abort"}),e.jsx(C,{onClick:Ue,className:"flex-1 rounded-2xl h-12 bg-rose-600 hover:bg-rose-500 text-white font-black uppercase tracking-widest shadow-lg shadow-rose-900/20",children:"Confirm Exit"})]})]})]})}),e.jsx("div",{className:"mt-8",children:e.jsx(xt,{})})]})}export{St as InvestmentsTab};
