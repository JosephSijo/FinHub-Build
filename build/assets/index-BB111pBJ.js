const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-C1i7oh0H.js","assets/ui-qF4dh6YK.js","assets/vendor-7PqXWhc5.js","assets/InteractiveFinancialValue-B4I9em0c.js","assets/haptics-C9gh8PRt.js","assets/MeshBackground-xIWs8Cbc.js","assets/CyberButton-Ce0k8WVQ.js","assets/charts-CgMDrE-9.js","assets/motion-DFLNShgk.js","assets/TransactionList-DsqnMdp7.js","assets/GoalsTracker-B4Iv0hu4.js","assets/EmergencyFundsTab-Bt_DgQA4.js","assets/InvestmentsTab-Ca24v_Sg.js","assets/slider-7kqvJGP8.js","assets/LiabilityTab-CfskdUpQ.js","assets/LiabilityDashboard-DI2v1MTE.js"])))=>i.map(i=>d[i]);
import{t as ki,c as Si,j as e,r as f,S as dn,a as un,b as Ci,d as Ai,T as Ei,I as Ti,C as fs,V as Di,P as Ii,e as Pi,f as Ri,g as Mi,h as Li,i as mn,k as Oi,l as _i,m as hn,n as Fi,O as pn,o as fn,p as gn,q as xn,s as bn,D as yn,u as vn,R as V,v as $i,H as Bi,w as gs,x as ds,y as Ht,W as wn,A as Vi,z as _s,B as Jt,U as Fs,E as Ks,F as Ui,G as zi,L as jn,J as qi,K as Xt,M as Gi,N as Hi,Q as Wi,X as Nn,Y as xs,Z as bs,_ as Yi,$ as Ki,a0 as Ji,a1 as Xi,a2 as Zi,a3 as Qi,a4 as er,a5 as tr,a6 as sr,a7 as ar,a8 as nr,a9 as ir,aa as rr,ab as or,ac as lr,ad as cr,ae as dr,af as ca,ag as ur,ah as mr,ai as $s,aj as hr,ak as pr,al as fr,am as da,an as Js,ao as Tt,ap as gr,aq as xr,ar as br,as as yr,at as vr,au as wr,av as jr,aw as Nr,ax as kr,ay as kn,az as Sr,aA as Sn,aB as Cn,aC as An,aD as Cr,aE as Ar,aF as Er,aG as Bs,aH as Tr,aI as Dr}from"./ui-qF4dh6YK.js";import{a as Ir}from"./vendor-7PqXWhc5.js";import{i as En,a as Pr,f as Vs,b as Tn,c as us,d as Xs,e as Rr,g as Mr,h as Lr,j as Or,k as _r,l as Zs,r as Fr,s as $r,m as Br,o as Vr,S as Ur,H as zr,n as Wt,p as Dn,v as In,q as ua,t as Pn,u as Rn,w as Ge,x as qr,y as ut,z as lt,A as Mn,B as Us,C as Gr,D as Hr,E as zs,F as Ln,G as qe,I as Wr,J as Yr,K as Kr,L as ma,M as Jr,N as Xr,O as ms,P as qt,Q as On,R as _n,T as Fn,U as Zr,V as Qr,W as ha,X as eo,Y as to,Z as so,_ as ao,$ as no,a0 as io,a1 as Ns,a2 as $t,a3 as ss,a4 as as,a5 as pa,a6 as ro,a7 as oo,a8 as lo,a9 as Bt,aa as co,ab as uo,ac as fa,ad as mo,ae as ho,af as po}from"./motion-DFLNShgk.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const d of r)if(d.type==="childList")for(const i of d.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function a(r){const d={};return r.integrity&&(d.integrity=r.integrity),r.referrerPolicy&&(d.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?d.credentials="include":r.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function n(r){if(r.ep)return;r.ep=!0;const d=a(r);fetch(r.href,d)}})();var ns={},ga;function fo(){if(ga)return ns;ga=1;var t=Ir();return ns.createRoot=t.createRoot,ns.hydrateRoot=t.hydrateRoot,ns}var go=fo();const xo="modulepreload",bo=function(t){return"/"+t},xa={},Pt=function(s,a,n){let r=Promise.resolve();if(a&&a.length>0){let i=function(l){return Promise.all(l.map(m=>Promise.resolve(m).then(c=>({status:"fulfilled",value:c}),c=>({status:"rejected",reason:c}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),o=u?.nonce||u?.getAttribute("nonce");r=i(a.map(l=>{if(l=bo(l),l in xa)return;xa[l]=!0;const m=l.endsWith(".css"),c=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const h=document.createElement("link");if(h.rel=m?"stylesheet":xo,m||(h.as="script"),h.crossOrigin="",h.href=l,o&&h.setAttribute("nonce",o),document.head.appendChild(h),m)return new Promise((w,x)=>{h.addEventListener("load",w),h.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${l}`)))})}))}function d(i){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=i,window.dispatchEvent(u),!u.defaultPrevented)throw i}return r.then(i=>{for(const u of i||[])u.status==="rejected"&&d(u.reason);return s().catch(d)})};function ge(...t){return ki(Si(t))}function Ke({className:t,...s}){return e.jsx("div",{"data-slot":"card",className:ge("segmented-stack",t),...s})}const Qs=un("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-xl text-sm font-medium transition-all active:scale-[0.97] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-11 px-6 py-2 has-[>svg]:px-4",sm:"h-9 gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-12 px-8 has-[>svg]:px-6",icon:"size-10"}},defaultVariants:{variant:"default",size:"default"}}),oe=f.forwardRef(({className:t,variant:s,size:a,asChild:n=!1,...r},d)=>{const i=n?dn:"button";return e.jsx(i,{ref:d,"data-slot":"button",className:ge(Qs({variant:s,size:a,className:t})),...r})});oe.displayName="Button";function Ue({className:t,type:s,...a}){return e.jsx("input",{type:s,"data-slot":"input",className:ge("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...a})}function ee({className:t,...s}){return e.jsx(Ci,{"data-slot":"label",className:ge("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}function Je({...t}){return e.jsx(Ai,{"data-slot":"select",...t})}function Xe({...t}){return e.jsx(Di,{"data-slot":"select-value",...t})}function Ze({className:t,size:s="default",children:a,...n}){return e.jsxs(Ei,{"data-slot":"select-trigger","data-size":s,className:ge("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n,children:[a,e.jsx(Ti,{asChild:!0,children:e.jsx(fs,{className:"size-4 opacity-50"})})]})}function Qe({className:t,children:s,position:a="popper",...n}){return e.jsx(Ii,{children:e.jsxs(Pi,{"data-slot":"select-content",className:ge("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-[300] max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:a,...n,children:[e.jsx(yo,{}),e.jsx(Ri,{className:ge("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),e.jsx(vo,{})]})})}function Ne({className:t,children:s,...a}){return e.jsxs(Mi,{"data-slot":"select-item",className:ge("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...a,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(Li,{children:e.jsx(mn,{className:"size-4"})})}),e.jsx(Oi,{children:s})]})}function yo({className:t,...s}){return e.jsx(_i,{"data-slot":"select-scroll-up-button",className:ge("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(hn,{className:"size-4"})})}function vo({className:t,...s}){return e.jsx(Fi,{"data-slot":"select-scroll-down-button",className:ge("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(fs,{className:"size-4"})})}function Rt({...t}){return e.jsx(fn,{"data-slot":"dialog",...t})}function wo({...t}){return e.jsx(vn,{"data-slot":"dialog-portal",...t})}const $n=f.forwardRef(({className:t,...s},a)=>e.jsx(pn,{ref:a,"data-slot":"dialog-overlay",className:ge("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-[200] bg-black/50",t),...s}));$n.displayName="DialogOverlay";function Mt({className:t,children:s,...a}){return e.jsxs(wo,{"data-slot":"dialog-portal",children:[e.jsx(gn,{asChild:!0,children:e.jsx($n,{})}),e.jsx(xn,{"data-slot":"dialog-content",className:ge("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-[200] grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...a,children:s})]})}function Lt({className:t,...s}){return e.jsx("div",{"data-slot":"dialog-header",className:ge("flex flex-col gap-2 text-center sm:text-left",t),...s})}function Ot({className:t,...s}){return e.jsx(bn,{"data-slot":"dialog-title",className:ge("text-lg leading-none font-semibold",t),...s})}function _t({className:t,...s}){return e.jsx(yn,{"data-slot":"dialog-description",className:ge("text-muted-foreground text-sm",t),...s})}const Bn=[{value:"Food & Dining",emoji:"ðŸ”"},{value:"Transport",emoji:"ðŸš—"},{value:"Shopping",emoji:"ðŸ›ï¸"},{value:"Entertainment",emoji:"ðŸŽ¬"},{value:"Bills & Utilities",emoji:"ðŸ“±"},{value:"Healthcare",emoji:"ðŸ¥"},{value:"Education",emoji:"ðŸ“š"},{value:"Travel",emoji:"âœˆï¸"},{value:"Groceries",emoji:"ðŸ›’"},{value:"Personal Care",emoji:"ðŸ’…"},{value:"EMI",emoji:"ðŸ¦"},{value:"Subscription",emoji:"ðŸ“º"},{value:"Personal IOU",emoji:"ðŸ¤"},{value:"Transfer",emoji:"ðŸ”„"},{value:"Other",emoji:"ðŸ“¦"}],jo=Bn,ks=["#3B82F6","#10B981","#8B5CF6","#F59E0B","#EF4444","#EC4899","#06B6D4","#6366F1"],Ss=[{value:"ðŸ¦",label:"Bank"},{value:"ðŸ’³",label:"Card"},{value:"ðŸ’°",label:"Cash"},{value:"ðŸ“±",label:"Digital"},{value:"ðŸª",label:"Merchant"},{value:"ðŸ’µ",label:"Money"},{value:"ðŸŽ¯",label:"Target"},{value:"â­",label:"Star"}],wt={INR:"â‚¹",USD:"$",EUR:"â‚¬",GBP:"Â£",AED:"Ø¯.Ø¥",SAR:"ï·¼"},No="kizvioibwffopuxqggxx",ko="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtpenZpb2lid2Zmb3B1eHFnZ3h4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk4ODA2NDgsImV4cCI6MjA3NTQ1NjY0OH0.dsTw06FxhPMue2ElbvWD58Zo7ZvFWpRFqjoDS77P55A",de=`https://${No}.supabase.co/functions/v1/make-server-6e7daf8e`,ue={"Content-Type":"application/json",Authorization:`Bearer ${ko}`},re={async getSettings(t){return(await fetch(`${de}/user/${t}`,{headers:ue})).json()},async updateSettings(t,s){return(await fetch(`${de}/user/${t}/settings`,{method:"POST",headers:ue,body:JSON.stringify(s)})).json()},async getExpenses(t){return(await fetch(`${de}/user/${t}/expenses`,{headers:ue})).json()},async createExpense(t,s){return(await fetch(`${de}/user/${t}/expenses`,{method:"POST",headers:ue,body:JSON.stringify(s)})).json()},async updateExpense(t,s,a){return(await fetch(`${de}/user/${t}/expenses/${s}`,{method:"PUT",headers:ue,body:JSON.stringify(a)})).json()},async deleteExpense(t,s){return(await fetch(`${de}/user/${t}/expenses/${s}`,{method:"DELETE",headers:ue})).json()},async getIncomes(t){return(await fetch(`${de}/user/${t}/incomes`,{headers:ue})).json()},async createIncome(t,s){return(await fetch(`${de}/user/${t}/incomes`,{method:"POST",headers:ue,body:JSON.stringify(s)})).json()},async updateIncome(t,s,a){return(await fetch(`${de}/user/${t}/incomes/${s}`,{method:"PUT",headers:ue,body:JSON.stringify(a)})).json()},async deleteIncome(t,s){return(await fetch(`${de}/user/${t}/incomes/${s}`,{method:"DELETE",headers:ue})).json()},async getDebts(t){return(await fetch(`${de}/user/${t}/debts`,{headers:ue})).json()},async createDebt(t,s){return(await fetch(`${de}/user/${t}/debts`,{method:"POST",headers:ue,body:JSON.stringify(s)})).json()},async updateDebt(t,s,a){return(await fetch(`${de}/user/${t}/debts/${s}`,{method:"PUT",headers:ue,body:JSON.stringify(a)})).json()},async deleteDebt(t,s){return(await fetch(`${de}/user/${t}/debts/${s}`,{method:"DELETE",headers:ue})).json()},async getGoals(t){return(await fetch(`${de}/user/${t}/goals`,{headers:ue})).json()},async createGoal(t,s){return(await fetch(`${de}/user/${t}/goals`,{method:"POST",headers:ue,body:JSON.stringify(s)})).json()},async updateGoal(t,s,a){return(await fetch(`${de}/user/${t}/goals/${s}`,{method:"PUT",headers:ue,body:JSON.stringify(a)})).json()},async deleteGoal(t,s){return(await fetch(`${de}/user/${t}/goals/${s}`,{method:"DELETE",headers:ue})).json()},async getAccounts(t){return(await fetch(`${de}/user/${t}/accounts`,{headers:ue})).json()},async createAccount(t,s){return(await fetch(`${de}/user/${t}/accounts`,{method:"POST",headers:ue,body:JSON.stringify(s)})).json()},async updateAccount(t,s,a){return(await fetch(`${de}/user/${t}/accounts/${s}`,{method:"PUT",headers:ue,body:JSON.stringify(a)})).json()},async deleteAccount(t,s){return(await fetch(`${de}/user/${t}/accounts/${s}`,{method:"DELETE",headers:ue})).json()},async categorize(t){return(await fetch(`${de}/ai/categorize`,{method:"POST",headers:ue,body:JSON.stringify({description:t})})).json()},async chat(t,s){return(await fetch(`${de}/ai/chat`,{method:"POST",headers:ue,body:JSON.stringify({message:t,context:s})})).json()},async getDashboardFeedback(t){return(await fetch(`${de}/ai/dashboard-feedback`,{method:"POST",headers:ue,body:JSON.stringify({context:t})})).json()},async getRecurring(t){return(await fetch(`${de}/user/${t}/recurring`,{headers:ue})).json()},async createRecurring(t,s){return(await fetch(`${de}/user/${t}/recurring`,{method:"POST",headers:ue,body:JSON.stringify(s)})).json()},async deleteRecurring(t,s){return(await fetch(`${de}/user/${t}/recurring/${s}`,{method:"DELETE",headers:ue})).json()},async processRecurring(t){try{return(await fetch(`${de}/user/${t}/recurring/process`,{method:"POST",headers:ue})).json()}catch(s){return console.warn("Failed to process recurring transactions",s),{success:!1}}},async getInvestments(t){return(await fetch(`${de}/user/${t}/investments`,{headers:ue})).json()},async createInvestment(t,s){return(await fetch(`${de}/user/${t}/investments`,{method:"POST",headers:ue,body:JSON.stringify(s)})).json()},async updateInvestment(t,s,a){return(await fetch(`${de}/user/${t}/investments/${s}`,{method:"PUT",headers:ue,body:JSON.stringify(a)})).json()},async deleteInvestment(t,s){return(await fetch(`${de}/user/${t}/investments/${s}`,{method:"DELETE",headers:ue})).json()},async getLiabilities(t){return(await fetch(`${de}/user/${t}/liabilities`,{headers:ue})).json()},async createLiability(t,s){return(await fetch(`${de}/user/${t}/liabilities`,{method:"POST",headers:ue,body:JSON.stringify(s)})).json()},async updateLiability(t,s,a){return(await fetch(`${de}/user/${t}/liabilities/${s}`,{method:"PUT",headers:ue,body:JSON.stringify(a)})).json()},async deleteLiability(t,s){return(await fetch(`${de}/user/${t}/liabilities/${s}`,{method:"DELETE",headers:ue})).json()},async getExchangeRates(t){return(await fetch(`${de}/currency/rates/${t}`,{headers:ue})).json()}};function So(t){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",s.appendChild(a),a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t))}const Co=t=>{switch(t){case"success":return To;case"info":return Io;case"warning":return Do;case"error":return Po;default:return null}},Ao=Array(12).fill(0),Eo=({visible:t,className:s})=>V.createElement("div",{className:["sonner-loading-wrapper",s].filter(Boolean).join(" "),"data-visible":t},V.createElement("div",{className:"sonner-spinner"},Ao.map((a,n)=>V.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),To=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Do=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Io=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Po=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Ro=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},V.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),V.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Mo=()=>{const[t,s]=V.useState(document.hidden);return V.useEffect(()=>{const a=()=>{s(document.hidden)};return document.addEventListener("visibilitychange",a),()=>window.removeEventListener("visibilitychange",a)},[]),t};let qs=1;class Lo{constructor(){this.subscribe=s=>(this.subscribers.push(s),()=>{const a=this.subscribers.indexOf(s);this.subscribers.splice(a,1)}),this.publish=s=>{this.subscribers.forEach(a=>a(s))},this.addToast=s=>{this.publish(s),this.toasts=[...this.toasts,s]},this.create=s=>{var a;const{message:n,...r}=s,d=typeof s?.id=="number"||((a=s.id)==null?void 0:a.length)>0?s.id:qs++,i=this.toasts.find(o=>o.id===d),u=s.dismissible===void 0?!0:s.dismissible;return this.dismissedToasts.has(d)&&this.dismissedToasts.delete(d),i?this.toasts=this.toasts.map(o=>o.id===d?(this.publish({...o,...s,id:d,title:n}),{...o,...s,id:d,dismissible:u,title:n}):o):this.addToast({title:n,...r,dismissible:u,id:d}),d},this.dismiss=s=>(s?(this.dismissedToasts.add(s),requestAnimationFrame(()=>this.subscribers.forEach(a=>a({id:s,dismiss:!0})))):this.toasts.forEach(a=>{this.subscribers.forEach(n=>n({id:a.id,dismiss:!0}))}),s),this.message=(s,a)=>this.create({...a,message:s}),this.error=(s,a)=>this.create({...a,message:s,type:"error"}),this.success=(s,a)=>this.create({...a,type:"success",message:s}),this.info=(s,a)=>this.create({...a,type:"info",message:s}),this.warning=(s,a)=>this.create({...a,type:"warning",message:s}),this.loading=(s,a)=>this.create({...a,type:"loading",message:s}),this.promise=(s,a)=>{if(!a)return;let n;a.loading!==void 0&&(n=this.create({...a,promise:s,type:"loading",message:a.loading,description:typeof a.description!="function"?a.description:void 0}));const r=Promise.resolve(s instanceof Function?s():s);let d=n!==void 0,i;const u=r.then(async l=>{if(i=["resolve",l],V.isValidElement(l))d=!1,this.create({id:n,type:"default",message:l});else if(_o(l)&&!l.ok){d=!1;const c=typeof a.error=="function"?await a.error(`HTTP error! status: ${l.status}`):a.error,h=typeof a.description=="function"?await a.description(`HTTP error! status: ${l.status}`):a.description,x=typeof c=="object"&&!V.isValidElement(c)?c:{message:c};this.create({id:n,type:"error",description:h,...x})}else if(l instanceof Error){d=!1;const c=typeof a.error=="function"?await a.error(l):a.error,h=typeof a.description=="function"?await a.description(l):a.description,x=typeof c=="object"&&!V.isValidElement(c)?c:{message:c};this.create({id:n,type:"error",description:h,...x})}else if(a.success!==void 0){d=!1;const c=typeof a.success=="function"?await a.success(l):a.success,h=typeof a.description=="function"?await a.description(l):a.description,x=typeof c=="object"&&!V.isValidElement(c)?c:{message:c};this.create({id:n,type:"success",description:h,...x})}}).catch(async l=>{if(i=["reject",l],a.error!==void 0){d=!1;const m=typeof a.error=="function"?await a.error(l):a.error,c=typeof a.description=="function"?await a.description(l):a.description,w=typeof m=="object"&&!V.isValidElement(m)?m:{message:m};this.create({id:n,type:"error",description:c,...w})}}).finally(()=>{d&&(this.dismiss(n),n=void 0),a.finally==null||a.finally.call(a)}),o=()=>new Promise((l,m)=>u.then(()=>i[0]==="reject"?m(i[1]):l(i[1])).catch(m));return typeof n!="string"&&typeof n!="number"?{unwrap:o}:Object.assign(n,{unwrap:o})},this.custom=(s,a)=>{const n=a?.id||qs++;return this.create({jsx:s(n),id:n,...a}),n},this.getActiveToasts=()=>this.toasts.filter(s=>!this.dismissedToasts.has(s.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ot=new Lo,Oo=(t,s)=>{const a=s?.id||qs++;return ot.addToast({title:t,...s,id:a}),a},_o=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Fo=Oo,$o=()=>ot.toasts,Bo=()=>ot.getActiveToasts(),L=Object.assign(Fo,{success:ot.success,info:ot.info,warning:ot.warning,error:ot.error,custom:ot.custom,message:ot.message,promise:ot.promise,dismiss:ot.dismiss,loading:ot.loading},{getHistory:$o,getToasts:Bo});So("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function is(t){return t.label!==void 0}const Vo=3,Uo="24px",zo="16px",ba=4e3,qo=356,Go=14,Ho=45,Wo=200;function yt(...t){return t.filter(Boolean).join(" ")}function Yo(t){const[s,a]=t.split("-"),n=[];return s&&n.push(s),a&&n.push(a),n}const Ko=t=>{var s,a,n,r,d,i,u,o,l;const{invert:m,toast:c,unstyled:h,interacting:w,setHeights:x,visibleToasts:S,heights:k,index:j,toasts:I,expanded:D,removeToast:v,defaultRichColors:R,closeButton:W,style:M,cancelButtonStyle:A,actionButtonStyle:T,className:Y="",descriptionClassName:K="",duration:se,position:ae,gap:Me,expandByDefault:je,classNames:Z,icons:G,closeButtonAriaLabel:me="Close toast"}=t,[Ae,N]=V.useState(null),[g,z]=V.useState(null),[_,H]=V.useState(!1),[E,O]=V.useState(!1),[B,U]=V.useState(!1),[te,xe]=V.useState(!1),[he,le]=V.useState(!1),[ke,ie]=V.useState(0),[Ee,_e]=V.useState(0),De=V.useRef(c.duration||se||ba),Fe=V.useRef(null),Ie=V.useRef(null),ze=j===0,jt=j+1<=S,$e=c.type,st=c.dismissible!==!1,He=c.className||"",mt=c.descriptionClassName||"",pt=V.useMemo(()=>k.findIndex(J=>J.toastId===c.id)||0,[k,c.id]),At=V.useMemo(()=>{var J;return(J=c.closeButton)!=null?J:W},[c.closeButton,W]),Nt=V.useMemo(()=>c.duration||se||ba,[c.duration,se]),xt=V.useRef(0),ct=V.useRef(0),bt=V.useRef(0),at=V.useRef(null),[Et,Ft]=ae.split("-"),Te=V.useMemo(()=>k.reduce((J,ve,ce)=>ce>=pt?J:J+ve.height,0),[k,pt]),$=Mo(),Se=c.invert||m,Le=$e==="loading";ct.current=V.useMemo(()=>pt*Me+Te,[pt,Te]),V.useEffect(()=>{De.current=Nt},[Nt]),V.useEffect(()=>{H(!0)},[]),V.useEffect(()=>{const J=Ie.current;if(J){const ve=J.getBoundingClientRect().height;return _e(ve),x(ce=>[{toastId:c.id,height:ve,position:c.position},...ce]),()=>x(ce=>ce.filter(Pe=>Pe.toastId!==c.id))}},[x,c.id]),V.useLayoutEffect(()=>{if(!_)return;const J=Ie.current,ve=J.style.height;J.style.height="auto";const ce=J.getBoundingClientRect().height;J.style.height=ve,_e(ce),x(Pe=>Pe.find(Oe=>Oe.toastId===c.id)?Pe.map(Oe=>Oe.toastId===c.id?{...Oe,height:ce}:Oe):[{toastId:c.id,height:ce,position:c.position},...Pe])},[_,c.title,c.description,x,c.id,c.jsx,c.action,c.cancel]);const Be=V.useCallback(()=>{O(!0),ie(ct.current),x(J=>J.filter(ve=>ve.toastId!==c.id)),setTimeout(()=>{v(c)},Wo)},[c,v,x,ct]);V.useEffect(()=>{if(c.promise&&$e==="loading"||c.duration===1/0||c.type==="loading")return;let J;return D||w||$?(()=>{if(bt.current<xt.current){const Pe=new Date().getTime()-xt.current;De.current=De.current-Pe}bt.current=new Date().getTime()})():(()=>{De.current!==1/0&&(xt.current=new Date().getTime(),J=setTimeout(()=>{c.onAutoClose==null||c.onAutoClose.call(c,c),Be()},De.current))})(),()=>clearTimeout(J)},[D,w,c,$e,$,Be]),V.useEffect(()=>{c.delete&&(Be(),c.onDismiss==null||c.onDismiss.call(c,c))},[Be,c.delete]);function kt(){var J;if(G?.loading){var ve;return V.createElement("div",{className:yt(Z?.loader,c==null||(ve=c.classNames)==null?void 0:ve.loader,"sonner-loader"),"data-visible":$e==="loading"},G.loading)}return V.createElement(Eo,{className:yt(Z?.loader,c==null||(J=c.classNames)==null?void 0:J.loader),visible:$e==="loading"})}const nt=c.icon||G?.[$e]||Co($e);var vt,it;return V.createElement("li",{tabIndex:0,ref:Ie,className:yt(Y,He,Z?.toast,c==null||(s=c.classNames)==null?void 0:s.toast,Z?.default,Z?.[$e],c==null||(a=c.classNames)==null?void 0:a[$e]),"data-sonner-toast":"","data-rich-colors":(vt=c.richColors)!=null?vt:R,"data-styled":!(c.jsx||c.unstyled||h),"data-mounted":_,"data-promise":!!c.promise,"data-swiped":he,"data-removed":E,"data-visible":jt,"data-y-position":Et,"data-x-position":Ft,"data-index":j,"data-front":ze,"data-swiping":B,"data-dismissible":st,"data-type":$e,"data-invert":Se,"data-swipe-out":te,"data-swipe-direction":g,"data-expanded":!!(D||je&&_),"data-testid":c.testId,style:{"--index":j,"--toasts-before":j,"--z-index":I.length-j,"--offset":`${E?ke:ct.current}px`,"--initial-height":je?"auto":`${Ee}px`,...M,...c.style},onDragEnd:()=>{U(!1),N(null),at.current=null},onPointerDown:J=>{J.button!==2&&(Le||!st||(Fe.current=new Date,ie(ct.current),J.target.setPointerCapture(J.pointerId),J.target.tagName!=="BUTTON"&&(U(!0),at.current={x:J.clientX,y:J.clientY})))},onPointerUp:()=>{var J,ve,ce;if(te||!st)return;at.current=null;const Pe=Number(((J=Ie.current)==null?void 0:J.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),rt=Number(((ve=Ie.current)==null?void 0:ve.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Oe=new Date().getTime()-((ce=Fe.current)==null?void 0:ce.getTime()),We=Ae==="x"?Pe:rt,St=Math.abs(We)/Oe;if(Math.abs(We)>=Ho||St>.11){ie(ct.current),c.onDismiss==null||c.onDismiss.call(c,c),z(Ae==="x"?Pe>0?"right":"left":rt>0?"down":"up"),Be(),xe(!0);return}else{var et,dt;(et=Ie.current)==null||et.style.setProperty("--swipe-amount-x","0px"),(dt=Ie.current)==null||dt.style.setProperty("--swipe-amount-y","0px")}le(!1),U(!1),N(null)},onPointerMove:J=>{var ve,ce,Pe;if(!at.current||!st||((ve=window.getSelection())==null?void 0:ve.toString().length)>0)return;const Oe=J.clientY-at.current.y,We=J.clientX-at.current.x;var St;const et=(St=t.swipeDirections)!=null?St:Yo(ae);!Ae&&(Math.abs(We)>1||Math.abs(Oe)>1)&&N(Math.abs(We)>Math.abs(Oe)?"x":"y");let dt={x:0,y:0};const ts=p=>1/(1.5+Math.abs(p)/20);if(Ae==="y"){if(et.includes("top")||et.includes("bottom"))if(et.includes("top")&&Oe<0||et.includes("bottom")&&Oe>0)dt.y=Oe;else{const p=Oe*ts(Oe);dt.y=Math.abs(p)<Math.abs(Oe)?p:Oe}}else if(Ae==="x"&&(et.includes("left")||et.includes("right")))if(et.includes("left")&&We<0||et.includes("right")&&We>0)dt.x=We;else{const p=We*ts(We);dt.x=Math.abs(p)<Math.abs(We)?p:We}(Math.abs(dt.x)>0||Math.abs(dt.y)>0)&&le(!0),(ce=Ie.current)==null||ce.style.setProperty("--swipe-amount-x",`${dt.x}px`),(Pe=Ie.current)==null||Pe.style.setProperty("--swipe-amount-y",`${dt.y}px`)}},At&&!c.jsx&&$e!=="loading"?V.createElement("button",{"aria-label":me,"data-disabled":Le,"data-close-button":!0,onClick:Le||!st?()=>{}:()=>{Be(),c.onDismiss==null||c.onDismiss.call(c,c)},className:yt(Z?.closeButton,c==null||(n=c.classNames)==null?void 0:n.closeButton)},(it=G?.close)!=null?it:Ro):null,($e||c.icon||c.promise)&&c.icon!==null&&(G?.[$e]!==null||c.icon)?V.createElement("div",{"data-icon":"",className:yt(Z?.icon,c==null||(r=c.classNames)==null?void 0:r.icon)},c.promise||c.type==="loading"&&!c.icon?c.icon||kt():null,c.type!=="loading"?nt:null):null,V.createElement("div",{"data-content":"",className:yt(Z?.content,c==null||(d=c.classNames)==null?void 0:d.content)},V.createElement("div",{"data-title":"",className:yt(Z?.title,c==null||(i=c.classNames)==null?void 0:i.title)},c.jsx?c.jsx:typeof c.title=="function"?c.title():c.title),c.description?V.createElement("div",{"data-description":"",className:yt(K,mt,Z?.description,c==null||(u=c.classNames)==null?void 0:u.description)},typeof c.description=="function"?c.description():c.description):null),V.isValidElement(c.cancel)?c.cancel:c.cancel&&is(c.cancel)?V.createElement("button",{"data-button":!0,"data-cancel":!0,style:c.cancelButtonStyle||A,onClick:J=>{is(c.cancel)&&st&&(c.cancel.onClick==null||c.cancel.onClick.call(c.cancel,J),Be())},className:yt(Z?.cancelButton,c==null||(o=c.classNames)==null?void 0:o.cancelButton)},c.cancel.label):null,V.isValidElement(c.action)?c.action:c.action&&is(c.action)?V.createElement("button",{"data-button":!0,"data-action":!0,style:c.actionButtonStyle||T,onClick:J=>{is(c.action)&&(c.action.onClick==null||c.action.onClick.call(c.action,J),!J.defaultPrevented&&Be())},className:yt(Z?.actionButton,c==null||(l=c.classNames)==null?void 0:l.actionButton)},c.action.label):null)};function ya(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function Jo(t,s){const a={};return[t,s].forEach((n,r)=>{const d=r===1,i=d?"--mobile-offset":"--offset",u=d?zo:Uo;function o(l){["top","right","bottom","left"].forEach(m=>{a[`${i}-${m}`]=typeof l=="number"?`${l}px`:l})}typeof n=="number"||typeof n=="string"?o(n):typeof n=="object"?["top","right","bottom","left"].forEach(l=>{n[l]===void 0?a[`${i}-${l}`]=u:a[`${i}-${l}`]=typeof n[l]=="number"?`${n[l]}px`:n[l]}):o(u)}),a}const Xo=V.forwardRef(function(s,a){const{id:n,invert:r,position:d="bottom-right",hotkey:i=["altKey","KeyT"],expand:u,closeButton:o,className:l,offset:m,mobileOffset:c,theme:h="light",richColors:w,duration:x,style:S,visibleToasts:k=Vo,toastOptions:j,dir:I=ya(),gap:D=Go,icons:v,containerAriaLabel:R="Notifications"}=s,[W,M]=V.useState([]),A=V.useMemo(()=>n?W.filter(_=>_.toasterId===n):W.filter(_=>!_.toasterId),[W,n]),T=V.useMemo(()=>Array.from(new Set([d].concat(A.filter(_=>_.position).map(_=>_.position)))),[A,d]),[Y,K]=V.useState([]),[se,ae]=V.useState(!1),[Me,je]=V.useState(!1),[Z,G]=V.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),me=V.useRef(null),Ae=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),N=V.useRef(null),g=V.useRef(!1),z=V.useCallback(_=>{M(H=>{var E;return(E=H.find(O=>O.id===_.id))!=null&&E.delete||ot.dismiss(_.id),H.filter(({id:O})=>O!==_.id)})},[]);return V.useEffect(()=>ot.subscribe(_=>{if(_.dismiss){requestAnimationFrame(()=>{M(H=>H.map(E=>E.id===_.id?{...E,delete:!0}:E))});return}setTimeout(()=>{$i.flushSync(()=>{M(H=>{const E=H.findIndex(O=>O.id===_.id);return E!==-1?[...H.slice(0,E),{...H[E],..._},...H.slice(E+1)]:[_,...H]})})})}),[W]),V.useEffect(()=>{if(h!=="system"){G(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?G("dark"):G("light")),typeof window>"u")return;const _=window.matchMedia("(prefers-color-scheme: dark)");try{_.addEventListener("change",({matches:H})=>{G(H?"dark":"light")})}catch{_.addListener(({matches:E})=>{try{G(E?"dark":"light")}catch(O){console.error(O)}})}},[h]),V.useEffect(()=>{W.length<=1&&ae(!1)},[W]),V.useEffect(()=>{const _=H=>{var E;if(i.every(U=>H[U]||H.code===U)){var B;ae(!0),(B=me.current)==null||B.focus()}H.code==="Escape"&&(document.activeElement===me.current||(E=me.current)!=null&&E.contains(document.activeElement))&&ae(!1)};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[i]),V.useEffect(()=>{if(me.current)return()=>{N.current&&(N.current.focus({preventScroll:!0}),N.current=null,g.current=!1)}},[me.current]),V.createElement("section",{ref:a,"aria-label":`${R} ${Ae}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},T.map((_,H)=>{var E;const[O,B]=_.split("-");return A.length?V.createElement("ol",{key:_,dir:I==="auto"?ya():I,tabIndex:-1,ref:me,className:l,"data-sonner-toaster":!0,"data-sonner-theme":Z,"data-y-position":O,"data-x-position":B,style:{"--front-toast-height":`${((E=Y[0])==null?void 0:E.height)||0}px`,"--width":`${qo}px`,"--gap":`${D}px`,...S,...Jo(m,c)},onBlur:U=>{g.current&&!U.currentTarget.contains(U.relatedTarget)&&(g.current=!1,N.current&&(N.current.focus({preventScroll:!0}),N.current=null))},onFocus:U=>{U.target instanceof HTMLElement&&U.target.dataset.dismissible==="false"||g.current||(g.current=!0,N.current=U.relatedTarget)},onMouseEnter:()=>ae(!0),onMouseMove:()=>ae(!0),onMouseLeave:()=>{Me||ae(!1)},onDragEnd:()=>ae(!1),onPointerDown:U=>{U.target instanceof HTMLElement&&U.target.dataset.dismissible==="false"||je(!0)},onPointerUp:()=>je(!1)},A.filter(U=>!U.position&&H===0||U.position===_).map((U,te)=>{var xe,he;return V.createElement(Ko,{key:U.id,icons:v,index:te,toast:U,defaultRichColors:w,duration:(xe=j?.duration)!=null?xe:x,className:j?.className,descriptionClassName:j?.descriptionClassName,invert:r,visibleToasts:k,closeButton:(he=j?.closeButton)!=null?he:o,interacting:Me,position:_,style:j?.style,unstyled:j?.unstyled,classNames:j?.classNames,cancelButtonStyle:j?.cancelButtonStyle,actionButtonStyle:j?.actionButtonStyle,closeButtonAriaLabel:j?.closeButtonAriaLabel,removeToast:z,toasts:A.filter(le=>le.position==U.position),heights:Y.filter(le=>le.position==U.position),setHeights:K,expandByDefault:u,gap:D,expanded:se,swipeDirections:s.swipeDirections})})):null}))});var ea={};(function t(s,a,n,r){var d=!!(s.Worker&&s.Blob&&s.Promise&&s.OffscreenCanvas&&s.OffscreenCanvasRenderingContext2D&&s.HTMLCanvasElement&&s.HTMLCanvasElement.prototype.transferControlToOffscreen&&s.URL&&s.URL.createObjectURL),i=typeof Path2D=="function"&&typeof DOMMatrix=="function",u=(function(){if(!s.OffscreenCanvas)return!1;try{var N=new OffscreenCanvas(1,1),g=N.getContext("2d");g.fillRect(0,0,1,1);var z=N.transferToImageBitmap();g.createPattern(z,"no-repeat")}catch{return!1}return!0})();function o(){}function l(N){var g=a.exports.Promise,z=g!==void 0?g:s.Promise;return typeof z=="function"?new z(N):(N(o,o),null)}var m=(function(N,g){return{transform:function(z){if(N)return z;if(g.has(z))return g.get(z);var _=new OffscreenCanvas(z.width,z.height),H=_.getContext("2d");return H.drawImage(z,0,0),g.set(z,_),_},clear:function(){g.clear()}}})(u,new Map),c=(function(){var N=Math.floor(16.666666666666668),g,z,_={},H=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(g=function(E){var O=Math.random();return _[O]=requestAnimationFrame(function B(U){H===U||H+N-1<U?(H=U,delete _[O],E()):_[O]=requestAnimationFrame(B)}),O},z=function(E){_[E]&&cancelAnimationFrame(_[E])}):(g=function(E){return setTimeout(E,N)},z=function(E){return clearTimeout(E)}),{frame:g,cancel:z}})(),h=(function(){var N,g,z={};function _(H){function E(O,B){H.postMessage({options:O||{},callback:B})}H.init=function(B){var U=B.transferControlToOffscreen();H.postMessage({canvas:U},[U])},H.fire=function(B,U,te){if(g)return E(B,null),g;var xe=Math.random().toString(36).slice(2);return g=l(function(he){function le(ke){ke.data.callback===xe&&(delete z[xe],H.removeEventListener("message",le),g=null,m.clear(),te(),he())}H.addEventListener("message",le),E(B,xe),z[xe]=le.bind(null,{data:{callback:xe}})}),g},H.reset=function(){H.postMessage({reset:!0});for(var B in z)z[B](),delete z[B]}}return function(){if(N)return N;if(!n&&d){var H=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{N=new Worker(URL.createObjectURL(new Blob([H])))}catch(E){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",E),null}_(N)}return N}})(),w={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function x(N,g){return g?g(N):N}function S(N){return N!=null}function k(N,g,z){return x(N&&S(N[g])?N[g]:w[g],z)}function j(N){return N<0?0:Math.floor(N)}function I(N,g){return Math.floor(Math.random()*(g-N))+N}function D(N){return parseInt(N,16)}function v(N){return N.map(R)}function R(N){var g=String(N).replace(/[^0-9a-f]/gi,"");return g.length<6&&(g=g[0]+g[0]+g[1]+g[1]+g[2]+g[2]),{r:D(g.substring(0,2)),g:D(g.substring(2,4)),b:D(g.substring(4,6))}}function W(N){var g=k(N,"origin",Object);return g.x=k(g,"x",Number),g.y=k(g,"y",Number),g}function M(N){N.width=document.documentElement.clientWidth,N.height=document.documentElement.clientHeight}function A(N){var g=N.getBoundingClientRect();N.width=g.width,N.height=g.height}function T(N){var g=document.createElement("canvas");return g.style.position="fixed",g.style.top="0px",g.style.left="0px",g.style.pointerEvents="none",g.style.zIndex=N,g}function Y(N,g,z,_,H,E,O,B,U){N.save(),N.translate(g,z),N.rotate(E),N.scale(_,H),N.arc(0,0,1,O,B,U),N.restore()}function K(N){var g=N.angle*(Math.PI/180),z=N.spread*(Math.PI/180);return{x:N.x,y:N.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:N.startVelocity*.5+Math.random()*N.startVelocity,angle2D:-g+(.5*z-Math.random()*z),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:N.color,shape:N.shape,tick:0,totalTicks:N.ticks,decay:N.decay,drift:N.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:N.gravity*3,ovalScalar:.6,scalar:N.scalar,flat:N.flat}}function se(N,g){g.x+=Math.cos(g.angle2D)*g.velocity+g.drift,g.y+=Math.sin(g.angle2D)*g.velocity+g.gravity,g.velocity*=g.decay,g.flat?(g.wobble=0,g.wobbleX=g.x+10*g.scalar,g.wobbleY=g.y+10*g.scalar,g.tiltSin=0,g.tiltCos=0,g.random=1):(g.wobble+=g.wobbleSpeed,g.wobbleX=g.x+10*g.scalar*Math.cos(g.wobble),g.wobbleY=g.y+10*g.scalar*Math.sin(g.wobble),g.tiltAngle+=.1,g.tiltSin=Math.sin(g.tiltAngle),g.tiltCos=Math.cos(g.tiltAngle),g.random=Math.random()+2);var z=g.tick++/g.totalTicks,_=g.x+g.random*g.tiltCos,H=g.y+g.random*g.tiltSin,E=g.wobbleX+g.random*g.tiltCos,O=g.wobbleY+g.random*g.tiltSin;if(N.fillStyle="rgba("+g.color.r+", "+g.color.g+", "+g.color.b+", "+(1-z)+")",N.beginPath(),i&&g.shape.type==="path"&&typeof g.shape.path=="string"&&Array.isArray(g.shape.matrix))N.fill(G(g.shape.path,g.shape.matrix,g.x,g.y,Math.abs(E-_)*.1,Math.abs(O-H)*.1,Math.PI/10*g.wobble));else if(g.shape.type==="bitmap"){var B=Math.PI/10*g.wobble,U=Math.abs(E-_)*.1,te=Math.abs(O-H)*.1,xe=g.shape.bitmap.width*g.scalar,he=g.shape.bitmap.height*g.scalar,le=new DOMMatrix([Math.cos(B)*U,Math.sin(B)*U,-Math.sin(B)*te,Math.cos(B)*te,g.x,g.y]);le.multiplySelf(new DOMMatrix(g.shape.matrix));var ke=N.createPattern(m.transform(g.shape.bitmap),"no-repeat");ke.setTransform(le),N.globalAlpha=1-z,N.fillStyle=ke,N.fillRect(g.x-xe/2,g.y-he/2,xe,he),N.globalAlpha=1}else if(g.shape==="circle")N.ellipse?N.ellipse(g.x,g.y,Math.abs(E-_)*g.ovalScalar,Math.abs(O-H)*g.ovalScalar,Math.PI/10*g.wobble,0,2*Math.PI):Y(N,g.x,g.y,Math.abs(E-_)*g.ovalScalar,Math.abs(O-H)*g.ovalScalar,Math.PI/10*g.wobble,0,2*Math.PI);else if(g.shape==="star")for(var ie=Math.PI/2*3,Ee=4*g.scalar,_e=8*g.scalar,De=g.x,Fe=g.y,Ie=5,ze=Math.PI/Ie;Ie--;)De=g.x+Math.cos(ie)*_e,Fe=g.y+Math.sin(ie)*_e,N.lineTo(De,Fe),ie+=ze,De=g.x+Math.cos(ie)*Ee,Fe=g.y+Math.sin(ie)*Ee,N.lineTo(De,Fe),ie+=ze;else N.moveTo(Math.floor(g.x),Math.floor(g.y)),N.lineTo(Math.floor(g.wobbleX),Math.floor(H)),N.lineTo(Math.floor(E),Math.floor(O)),N.lineTo(Math.floor(_),Math.floor(g.wobbleY));return N.closePath(),N.fill(),g.tick<g.totalTicks}function ae(N,g,z,_,H){var E=g.slice(),O=N.getContext("2d"),B,U,te=l(function(xe){function he(){B=U=null,O.clearRect(0,0,_.width,_.height),m.clear(),H(),xe()}function le(){n&&!(_.width===r.width&&_.height===r.height)&&(_.width=N.width=r.width,_.height=N.height=r.height),!_.width&&!_.height&&(z(N),_.width=N.width,_.height=N.height),O.clearRect(0,0,_.width,_.height),E=E.filter(function(ke){return se(O,ke)}),E.length?B=c.frame(le):he()}B=c.frame(le),U=he});return{addFettis:function(xe){return E=E.concat(xe),te},canvas:N,promise:te,reset:function(){B&&c.cancel(B),U&&U()}}}function Me(N,g){var z=!N,_=!!k(g||{},"resize"),H=!1,E=k(g,"disableForReducedMotion",Boolean),O=d&&!!k(g||{},"useWorker"),B=O?h():null,U=z?M:A,te=N&&B?!!N.__confetti_initialized:!1,xe=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,he;function le(ie,Ee,_e){for(var De=k(ie,"particleCount",j),Fe=k(ie,"angle",Number),Ie=k(ie,"spread",Number),ze=k(ie,"startVelocity",Number),jt=k(ie,"decay",Number),$e=k(ie,"gravity",Number),st=k(ie,"drift",Number),He=k(ie,"colors",v),mt=k(ie,"ticks",Number),pt=k(ie,"shapes"),At=k(ie,"scalar"),Nt=!!k(ie,"flat"),xt=W(ie),ct=De,bt=[],at=N.width*xt.x,Et=N.height*xt.y;ct--;)bt.push(K({x:at,y:Et,angle:Fe,spread:Ie,startVelocity:ze,color:He[ct%He.length],shape:pt[I(0,pt.length)],ticks:mt,decay:jt,gravity:$e,drift:st,scalar:At,flat:Nt}));return he?he.addFettis(bt):(he=ae(N,bt,U,Ee,_e),he.promise)}function ke(ie){var Ee=E||k(ie,"disableForReducedMotion",Boolean),_e=k(ie,"zIndex",Number);if(Ee&&xe)return l(function(ze){ze()});z&&he?N=he.canvas:z&&!N&&(N=T(_e),document.body.appendChild(N)),_&&!te&&U(N);var De={width:N.width,height:N.height};B&&!te&&B.init(N),te=!0,B&&(N.__confetti_initialized=!0);function Fe(){if(B){var ze={getBoundingClientRect:function(){if(!z)return N.getBoundingClientRect()}};U(ze),B.postMessage({resize:{width:ze.width,height:ze.height}});return}De.width=De.height=null}function Ie(){he=null,_&&(H=!1,s.removeEventListener("resize",Fe)),z&&N&&(document.body.contains(N)&&document.body.removeChild(N),N=null,te=!1)}return _&&!H&&(H=!0,s.addEventListener("resize",Fe,!1)),B?B.fire(ie,De,Ie):le(ie,De,Ie)}return ke.reset=function(){B&&B.reset(),he&&he.reset()},ke}var je;function Z(){return je||(je=Me(null,{useWorker:!0,resize:!0})),je}function G(N,g,z,_,H,E,O){var B=new Path2D(N),U=new Path2D;U.addPath(B,new DOMMatrix(g));var te=new Path2D;return te.addPath(U,new DOMMatrix([Math.cos(O)*H,Math.sin(O)*H,-Math.sin(O)*E,Math.cos(O)*E,z,_])),te}function me(N){if(!i)throw new Error("path confetti are not supported in this browser");var g,z;typeof N=="string"?g=N:(g=N.path,z=N.matrix);var _=new Path2D(g),H=document.createElement("canvas"),E=H.getContext("2d");if(!z){for(var O=1e3,B=O,U=O,te=0,xe=0,he,le,ke=0;ke<O;ke+=2)for(var ie=0;ie<O;ie+=2)E.isPointInPath(_,ke,ie,"nonzero")&&(B=Math.min(B,ke),U=Math.min(U,ie),te=Math.max(te,ke),xe=Math.max(xe,ie));he=te-B,le=xe-U;var Ee=10,_e=Math.min(Ee/he,Ee/le);z=[_e,0,0,_e,-Math.round(he/2+B)*_e,-Math.round(le/2+U)*_e]}return{type:"path",path:g,matrix:z}}function Ae(N){var g,z=1,_="#000000",H='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof N=="string"?g=N:(g=N.text,z="scalar"in N?N.scalar:z,H="fontFamily"in N?N.fontFamily:H,_="color"in N?N.color:_);var E=10*z,O=""+E+"px "+H,B=new OffscreenCanvas(E,E),U=B.getContext("2d");U.font=O;var te=U.measureText(g),xe=Math.ceil(te.actualBoundingBoxRight+te.actualBoundingBoxLeft),he=Math.ceil(te.actualBoundingBoxAscent+te.actualBoundingBoxDescent),le=2,ke=te.actualBoundingBoxLeft+le,ie=te.actualBoundingBoxAscent+le;xe+=le+le,he+=le+le,B=new OffscreenCanvas(xe,he),U=B.getContext("2d"),U.font=O,U.fillStyle=_,U.fillText(g,ke,ie);var Ee=1/z;return{type:"bitmap",bitmap:B.transferToImageBitmap(),matrix:[Ee,0,0,Ee,-xe*Ee/2,-he*Ee/2]}}a.exports=function(){return Z().apply(this,arguments)},a.exports.reset=function(){Z().reset()},a.exports.create=Me,a.exports.shapeFromPath=me,a.exports.shapeFromText=Ae})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),ea,!1);const Vt=ea.exports;ea.exports.create;const ta=[{id:"first_transaction",name:"Getting Started",description:"Add your first transaction",icon:"ðŸŽ¯",condition:t=>t.totalTransactions>=1},{id:"early_bird",name:"Early Bird",description:"Log in for the first time today",icon:"ðŸŒ…",condition:t=>t.dailyLogin===!0},{id:"ten_transactions",name:"Building Habits",description:"Log 10 transactions",icon:"ðŸ“Š",condition:t=>t.totalTransactions>=10},{id:"fifty_transactions",name:"Momentum Builder",description:"Log 50 transactions",icon:"âš¡",condition:t=>t.totalTransactions>=50},{id:"financial_guru",name:"Financial Guru",description:"Complete 100 transactions",icon:"ðŸ§™",condition:t=>t.totalTransactions>=100},{id:"three_day_streak",name:"Streak Starter",description:"Log in for 3 days in a row",icon:"ðŸ”¥",condition:t=>t.currentStreak>=3},{id:"consistent_tracker",name:"Consistent Tracker",description:"Log transactions for 7 days in a row",icon:"ðŸ“…",condition:t=>t.currentStreak>=7},{id:"habit_master",name:"Habit Master",description:"Maintain a 30-day streak",icon:"ðŸ…",condition:t=>t.currentStreak>=30},{id:"dedication_champion",name:"Dedication Champion",description:"Achieve a 100-day streak",icon:"ðŸ‘‘",condition:t=>t.currentStreak>=100},{id:"first_goal",name:"Goal Setter",description:"Create your first savings goal",icon:"ðŸŽ¯",condition:t=>t.totalGoals>=1},{id:"goal_achiever",name:"Goal Achiever",description:"Complete your first savings goal",icon:"ðŸ†",condition:t=>t.completedGoals>=1},{id:"triple_winner",name:"Triple Winner",description:"Complete 3 savings goals",icon:"ðŸŽ–ï¸",condition:t=>t.completedGoals>=3},{id:"goal_crusher",name:"Goal Crusher",description:"Complete 5 savings goals",icon:"ðŸ’Ž",condition:t=>t.completedGoals>=5},{id:"debt_aware",name:"Debt Aware",description:"Track your first debt",icon:"ðŸ“",condition:t=>t.totalDebts>=1},{id:"debt_settler",name:"Debt Settler",description:"Settle your first debt",icon:"âœ…",condition:t=>t.settledDebts>=1},{id:"debt_destroyer",name:"Debt Destroyer",description:"Settle 5 debts",icon:"ðŸ’ª",condition:t=>t.settledDebts>=5},{id:"debt_free_hero",name:"Debt-Free Hero",description:"Maintain zero pending debts",icon:"ðŸ¦¸",condition:t=>t.totalDebts>0&&t.settledDebts===t.totalDebts},{id:"first_saver",name:"First Saver",description:"Achieve 10%+ savings rate",icon:"ðŸŒ±",condition:t=>t.savingsRate>=.1},{id:"super_saver",name:"Super Saver",description:"Maintain a 20%+ savings rate",icon:"ðŸ’°",condition:t=>t.savingsRate>=.2},{id:"elite_saver",name:"Elite Saver",description:"Achieve 30%+ savings rate",icon:"ðŸ’¸",condition:t=>t.savingsRate>=.3},{id:"legendary_saver",name:"Legendary Saver",description:"Maintain 50%+ savings rate",icon:"ðŸ°",condition:t=>t.savingsRate>=.5},{id:"budget_conscious",name:"Budget Conscious",description:"Keep spending under 80% of income",icon:"ðŸ“Š",condition:t=>t.monthlySpendingRatio<=.8},{id:"budget_master",name:"Budget Master",description:"Keep spending under 70% of income",icon:"ðŸ‘‘",condition:t=>t.monthlySpendingRatio<=.7},{id:"frugal_champion",name:"Frugal Champion",description:"Keep spending under 50% of income",icon:"ðŸŒŸ",condition:t=>t.monthlySpendingRatio<=.5},{id:"stay_notified",name:"Stay Notified",description:"Enable notifications",icon:"ðŸ””",condition:t=>t.notificationsEnabled===!0},{id:"ai_curious",name:"AI Curious",description:"Chat with AI Guru for the first time",icon:"ðŸ¤–",condition:t=>t.aiInteractions>=1},{id:"ai_enthusiast",name:"AI Enthusiast",description:"Chat with AI Guru 10 times",icon:"ðŸ§ ",condition:t=>t.aiInteractions>=10},{id:"profile_complete",name:"Profile Complete",description:"Add your name and photo",icon:"ðŸ‘¤",condition:t=>t.profileComplete===!0},{id:"account_organizer",name:"Account Organizer",description:"Create 3 or more accounts",icon:"ðŸ¦",condition:t=>t.totalAccounts>=3}];function Zo(t,s){const a=[];return ta.forEach(n=>{!s.includes(n.id)&&n.condition(t)&&a.push(n.id)}),a}function Vn(t){return ta.find(s=>s.id===t)}function Qo(){return ta}function el(t){const{expenses:s,goals:a,userName:n}=t,r=[],d=new Date,i=new Date(d.getTime()-10080*60*1e3),u=new Date(d.getTime()-720*60*60*1e3),o=s.filter(x=>new Date(x.date)>=i),l=s.filter(x=>{const S=new Date(x.date);return S>=u&&S<i}),m=x=>x.reduce((S,k)=>(S[k.category]=(S[k.category]||0)+k.amount,S),{}),c=m(o),h=m(l),w=Object.keys(h).reduce((x,S)=>(x[S]=h[S]/3,x),{});return Object.keys(c).forEach(x=>{const S=c[x],k=w[x]||0;if(k>500&&S>k*1.2){const j=Math.round((S-k)/k*100),I=a.find(D=>D.currentAmount<D.targetAmount);I?r.push(`${n}, you've spent ${j}% more on ${x} this week. This slows down your '${I.name}' goal. Consider tightening up your protocol!`):r.push(`${n}, your ${x} spending is up ${j}% this week. Watch out before it becomes a habit!`)}}),r}function tl(t){return{id:`insight_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"insight",priority:"low",category:"insights",title:"Guruji Insight",message:t,timestamp:new Date,read:!1}}const sl={netflix:"Subscription",spotify:"Subscription",google:"Subscription",apple:"Subscription",icloud:"Subscription",youtube:"Subscription",disney:"Subscription",hotstar:"Subscription","prime video":"Subscription","prime membership":"Subscription",hulu:"Subscription",hbomax:"Subscription",chaisai:"Subscription","google play":"Subscription","google one":"Subscription","app store":"Subscription",jio:"Subscription",airtel:"Subscription",vodafone:"Subscription",idea:"Subscription",bsnl:"Subscription","vi ":"Subscription",broadband:"Subscription",isp:"Subscription","act fiber":"Subscription",hathway:"Subscription","internet bill":"Subscription",telecom:"Subscription",coffee:"Food & Dining",starbucks:"Food & Dining",cafe:"Food & Dining",restaurant:"Food & Dining",lunch:"Food & Dining",dinner:"Food & Dining",pizza:"Food & Dining",burger:"Food & Dining",mcdonalds:"Food & Dining",kfc:"Food & Dining",food:"Food & Dining",zomato:"Food & Dining",swiggy:"Food & Dining",beer:"Food & Dining",bar:"Food & Dining",uber:"Transportation",ola:"Transportation",cab:"Transportation",taxi:"Transportation",bus:"Transportation",train:"Transportation",metro:"Transportation",fuel:"Transportation",petrol:"Transportation",gas:"Transportation",parking:"Transportation",amazon:"Shopping",flipkart:"Shopping",clothes:"Shopping",zara:"Shopping",nike:"Shopping",shoes:"Shopping",mall:"Shopping",grocery:"Groceries",supermarket:"Groceries",vegetables:"Groceries",fruits:"Groceries",milk:"Groceries",electricity:"Bills & Utilities",water:"Bills & Utilities","gas bill":"Bills & Utilities",rent:"Bills & Utilities",maintenance:"Bills & Utilities",movie:"Entertainment",cinema:"Entertainment",game:"Entertainment",steam:"Entertainment",playstation:"Entertainment",xbox:"Entertainment",doctor:"Health & Wellbeing",medical:"Health & Wellbeing",pharmacy:"Health & Wellbeing",medicine:"Health & Wellbeing",gym:"Health & Wellbeing",fitness:"Health & Wellbeing",hospital:"Health & Wellbeing",transfer:"Transfer",payment:"Transfer","cc bill":"Transfer",internal:"Transfer"},Gs=t=>{const s=t.toLowerCase();for(const[a,n]of Object.entries(sl))if(s.includes(a)){const r=[];return s.includes("online")&&r.push("online"),s.includes("subscription")&&r.push("subscription"),{category:n,tags:r}}return null},ye={SETTINGS:"finbase_settings",EXPENSES:"finbase_expenses",INCOMES:"finbase_incomes",DEBTS:"finbase_debts",GOALS:"finbase_goals",ACCOUNTS:"finbase_accounts",INVESTMENTS:"finbase_investments",LIABILITIES:"finbase_liabilities",NOTIFICATIONS:"finbase_notifications",EMERGENCY_FUND:"finbase_emergency_fund",RECURRING:"finbase_recurring",AUTH:"finbase_auth",REMEMBERED_MOBILE:"finbase_remembered_mobile",DELETION_SCHEDULE:"finbase_deletion_schedule"},Un=f.createContext(void 0),ys=()=>{const t=f.useContext(Un);if(!t)throw new Error("useFinance must be used within a FinanceProvider");return t},al=({children:t})=>{const[s]=f.useState("demo-user-001"),[a,n]=f.useState(!0),[r,d]=f.useState(!1),[i,u]=f.useState({theme:"system",currency:"INR",unlockedAchievements:[],name:"",photoURL:"",notificationsEnabled:!1,roundUpEnabled:!0,aiProvider:"openai"}),[o,l]=f.useState([]),[m,c]=f.useState([]),[h,w]=f.useState([]),[x,S]=f.useState([]),[k,j]=f.useState([]),[I,D]=f.useState([]),[v,R]=f.useState([]),[W,M]=f.useState([]),[A,T]=f.useState([]),[Y,K]=f.useState(0),[se,ae]=f.useState("guest"),[Me,je]=f.useState(null),[Z,G]=f.useState(!1),[me,Ae]=f.useState(""),[N,g]=f.useState(!1),[z,_]=f.useState(""),[H,E]=f.useState(null),O=[{mobile:"9447147230",pin:"2255",name:"tin2mon FinHub Node // 0x50.3",userId:"tin2mon-prod-001"}],B=p=>{const P=Array.isArray(p)?p:[p];T(b=>{const y=P.filter(q=>b.some(ne=>ne.id===q.id)?!1:!b.some(ne=>ne.type===q.type&&ne.message===q.message&&!ne.read&&new Date().getTime()-new Date(ne.timestamp).getTime()<1e3*60*60*24));return y.length===0?b:[...y,...b].sort((q,X)=>new Date(X.timestamp).getTime()-new Date(q.timestamp).getTime()).slice(0,100)})};f.useEffect(()=>{const p=()=>{const b=o.length+m.length+h.length,y=h.filter(Ce=>Ce.status==="settled").length,C=x.filter(Ce=>Ce.currentAmount>=Ce.targetAmount).length,q=m.reduce((Ce,Re)=>Ce+Re.amount,0),X=o.reduce((Ce,Re)=>Ce+Re.amount,0),F=q>0?(q-X)/q:0,ne=q>0?X/q:0,Q={totalTransactions:b,totalGoals:x.length,completedGoals:C,totalDebts:h.length,settledDebts:y,savingsRate:F,monthlySpendingRatio:ne,notificationsEnabled:i.notificationsEnabled,themeChanged:i.theme!=="system",aiInteractions:0,currentStreak:b>0?Math.min(b,3):0,dailyLogin:!0,profileComplete:i.name!==""&&i.photoURL!=="",totalAccounts:k.length},be=Zo(Q,i.unlockedAchievements);be.length>0&&(be.forEach(Ce=>{const Re=Vn(Ce);if(Re){const pe={id:`notif_${Ce}`,type:"achievement",priority:"low",category:"achievements",title:"Achievement Unlocked!",message:`${Re.icon} ${Re.name}`,timestamp:new Date,read:!1,achievementId:Ce};B(pe),L.success(`Achievement Unlocked: ${Re.icon} ${Re.name}!`,{duration:5e3})}}),ze({unlockedAchievements:[...i.unlockedAchievements,...be]}));const Ye=el({expenses:o,goals:x,userName:i.name||"Friend"});if(Ye.length>0){const Ce=[];Ye.forEach(Re=>{const pe=tl(Re);pe.priority="low",pe.category="insights",Ce.push(pe),L(pe.title,{description:pe.message,icon:"ðŸ§˜"})}),Ce.length>0&&B(Ce)}P()},P=()=>{const b=new Date;b.setHours(0,0,0,0);const y=k.reduce((F,ne)=>F+(ne.type==="bank"||ne.type==="cash"?ne.balance:0),0),C=x.reduce((F,ne)=>F+ne.currentAmount,0)+Y,q=Math.max(0,y-C),X=[];v.forEach(F=>{const ne=new Date(F.startDate),Q=new Date(b.getFullYear(),b.getMonth(),ne.getDate());Q<b&&Q.setMonth(Q.getMonth()+1),Math.ceil((Q.getTime()-b.getTime())/(1e3*60*60*24))<=7&&X.push({name:F.name,amount:F.emiAmount,dueDate:Q,type:"EMI"})}),W.forEach(F=>{if(F.type==="expense"){const ne=new Date(F.startDate);let Q;if(F.frequency==="monthly")Q=new Date(b.getFullYear(),b.getMonth(),ne.getDate()),Q<b&&Q.setMonth(Q.getMonth()+1);else if(F.frequency==="weekly"){const Ye=(ne.getDay()-b.getDay()+7)%7;Q=new Date(b.getTime()+Ye*24*60*60*1e3),Q<b&&Q.setDate(Q.getDate()+7)}else return;Math.ceil((Q.getTime()-b.getTime())/(1e3*60*60*24))<=7&&X.push({name:F.description||"Subscription",amount:F.amount,dueDate:Q,type:"Bill"})}}),X.forEach(F=>{const ne=q<F.amount,Q=Math.ceil((F.dueDate.getTime()-b.getTime())/(1e3*60*60*24));if(ne&&Q<=3){const be={id:`smart_breach_${F.name}_${F.dueDate.toISOString().split("T")[0]}`,type:"alert",priority:"high",category:"reminders",title:"Liquid Stability Warning",message:`Critical: Your '${F.name}' due on ${F.dueDate.toLocaleDateString()} (â‚¹${F.amount}) exceeds current liquid cash (â‚¹${q}). Clear assets or increase bank balance immediately.`,timestamp:new Date,read:!1};B(be),L.error(be.title,{description:be.message,duration:1e4})}else if(Q<=1){const be={id:`reminder_${F.name}_${F.dueDate.toISOString().split("T")[0]}`,type:"reminder",priority:"medium",category:"reminders",title:`${F.type} Due Soon`,message:`Reminder: '${F.name}' payment of â‚¹${F.amount} is due tomorrow (${F.dueDate.toLocaleDateString()}).`,timestamp:new Date,read:!1};B(be),L.info(be.title,{description:be.message})}})};p()},[o.length,m.length,h.length,x.length,i.notificationsEnabled,i.theme]),f.useEffect(()=>{U()},[]),f.useEffect(()=>localStorage.setItem(ye.SETTINGS,JSON.stringify(i)),[i]),f.useEffect(()=>localStorage.setItem(ye.EXPENSES,JSON.stringify(o)),[o]),f.useEffect(()=>localStorage.setItem(ye.INCOMES,JSON.stringify(m)),[m]),f.useEffect(()=>localStorage.setItem(ye.DEBTS,JSON.stringify(h)),[h]),f.useEffect(()=>localStorage.setItem(ye.GOALS,JSON.stringify(x)),[x]),f.useEffect(()=>localStorage.setItem(ye.ACCOUNTS,JSON.stringify(k)),[k]),f.useEffect(()=>localStorage.setItem(ye.INVESTMENTS,JSON.stringify(I)),[I]),f.useEffect(()=>localStorage.setItem(ye.LIABILITIES,JSON.stringify(v)),[v]),f.useEffect(()=>localStorage.setItem(ye.RECURRING,JSON.stringify(W)),[W]),f.useEffect(()=>localStorage.setItem(ye.NOTIFICATIONS,JSON.stringify(A)),[A]),f.useEffect(()=>localStorage.setItem(ye.EMERGENCY_FUND,JSON.stringify(Y)),[Y]);const U=async()=>{n(!0);try{const P=localStorage.getItem(ye.SETTINGS);if(P){const pe=JSON.parse(P);u(pe),le(pe.theme)}const b=localStorage.getItem(ye.EXPENSES);b&&l(JSON.parse(b));const y=localStorage.getItem(ye.INCOMES);y&&c(JSON.parse(y));const C=localStorage.getItem(ye.DEBTS);C&&w(JSON.parse(C));const q=localStorage.getItem(ye.GOALS);q&&S(JSON.parse(q));const X=localStorage.getItem(ye.ACCOUNTS);X&&j(JSON.parse(X));const F=localStorage.getItem(ye.INVESTMENTS);F&&D(JSON.parse(F));const ne=localStorage.getItem(ye.LIABILITIES);ne&&R(JSON.parse(ne));const Q=localStorage.getItem(ye.NOTIFICATIONS);if(Q){const Ve=JSON.parse(Q).filter((ft,ji,Ni)=>Ni.findIndex(js=>js.id===ft.id||js.message===ft.message&&js.type===ft.type)===ji);T(Ve.slice(0,100))}const be=localStorage.getItem(ye.EMERGENCY_FUND);be&&K(JSON.parse(be));const Ye=localStorage.getItem(ye.RECURRING);Ye&&M(JSON.parse(Ye));const Ce=localStorage.getItem(ye.REMEMBERED_MOBILE);Ce&&(_(Ce),Ae(Ce),g(!0));const Re=localStorage.getItem(ye.DELETION_SCHEDULE);if(Re){const pe=new Date(Re).getTime();new Date().getTime()>=pe?(Ie(),console.warn("Account purge executed based on schedule.")):E(Re)}}catch(P){console.error("Error loading specific local data:",P)}await xe(),localStorage.getItem("finbase_subscription_migration_v1")||(te(),localStorage.setItem("finbase_subscription_migration_v1","true")),n(!1)},te=()=>{l(p=>{let P=!1;const b=p.map(y=>{if(["other","bills & utilities","entertainment","",void 0].includes(y.category?.toLowerCase())){const q=Gs(y.description);if(q&&q.category==="Subscription"&&y.category!=="Subscription")return P=!0,{...y,category:"Subscription"}}return y});return P&&L.info("Intelligence protocol active: Categorized existing service providers as Subscriptions."),b})},xe=async()=>{try{try{await re.processRecurring(s)}catch(Q){console.error("Skip recurring process",Q)}const[p,P,b,y,C,q,X,F,ne]=await Promise.all([re.getSettings(s).catch(()=>({success:!1,settings:void 0})),re.getAccounts(s).catch(()=>({success:!1,accounts:[]})),re.getExpenses(s).catch(()=>({success:!1,expenses:[]})),re.getIncomes(s).catch(()=>({success:!1,incomes:[]})),re.getDebts(s).catch(()=>({success:!1,debts:[]})),re.getGoals(s).catch(()=>({success:!1,goals:[]})),re.getLiabilities(s).catch(()=>({success:!1,liabilities:[]})),re.getInvestments(s).catch(()=>({success:!1,investments:[]})),re.getRecurring(s).catch(()=>({success:!1,recurring:[]}))]);p.success&&p.settings&&(u(Q=>({...Q,...p.settings,aiProvider:p.settings.aiProvider||Q.aiProvider,apiKeys:{...Q.apiKeys,...p.settings.apiKeys}})),le(p.settings.theme)),P.success&&j(P.accounts||[]),b.success&&l(b.expenses||[]),y.success&&c(y.incomes||[]),C.success&&w(C.debts||[]),q.success&&S(q.goals||[]),X.success&&R(X.liabilities||[]),F.success&&D(F.investments||[]),ne.success&&M(ne.recurring||[]),L.success("Sync complete")}catch(p){console.error("API Sync failed, using local data",p)}},he=async()=>{d(!0),await xe(),d(!1)},le=p=>{if(p==="system"){const P=window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.classList.toggle("dark",P)}else document.documentElement.classList.toggle("dark",p==="dark")},ke=async p=>{Ae(p);const P=O.some(b=>b.mobile===p)||localStorage.getItem(`finbase_user_${p}`)!==null;return G(!0),P},ie=async(p,P=!1)=>{ae("authenticating"),await new Promise(C=>setTimeout(C,2e3));const b=O.find(C=>C.mobile===me&&C.pin===p);let y=null;if(b)y={id:b.userId,mobile:b.mobile,name:b.name};else{const C=localStorage.getItem(`finbase_user_${me}`);if(C){const q=JSON.parse(C);q.pin===p&&(y={id:q.userId,mobile:q.mobile,name:q.name})}}return y?(je(y),localStorage.setItem(ye.AUTH,JSON.stringify(y)),ae("authenticated"),G(!1),H&&(await Fe(),L.success("Your account deletion request has been canceled. Welcome back!")),P&&(localStorage.setItem(ye.REMEMBERED_MOBILE,me),_(me),g(!0)),!0):(ae("guest"),!1)},Ee=async(p,P,b,y=!1)=>{ae("authenticating"),await new Promise(X=>setTimeout(X,2e3));const C={id:`user_${Date.now()}`,mobile:p,name:b,pin:P};localStorage.setItem(`finbase_user_${p}`,JSON.stringify(C));const q={id:C.id,mobile:C.mobile,name:C.name};return je(q),localStorage.setItem(ye.AUTH,JSON.stringify(q)),ae("authenticated"),G(!1),y&&(localStorage.setItem(ye.REMEMBERED_MOBILE,p),_(p),g(!0)),!0},_e=()=>{ae("guest"),je(null),localStorage.removeItem(ye.AUTH)},De=async()=>{const p=new Date;p.setDate(p.getDate()+30);const P=p.toISOString();E(P),localStorage.setItem(ye.DELETION_SCHEDULE,P),L.warning("Account scheduled for deletion in 30 days."),_e()},Fe=async()=>{E(null),localStorage.removeItem(ye.DELETION_SCHEDULE)},Ie=()=>{Object.values(ye).forEach(p=>{localStorage.removeItem(p)}),l([]),c([]),w([]),S([]),j([]),D([]),R([]),M([]),T([]),K(0),E(null),ae("guest"),je(null),L.info("Session purged successfully.")};f.useEffect(()=>{const p=localStorage.getItem(ye.AUTH);p&&(je(JSON.parse(p)),ae("authenticated"))},[]);const ze=async p=>{const P={...i,...p};u(P),p.theme&&le(p.theme);try{const b=await re.updateSettings(s,p);if(b.success)u(y=>({...y,...b.settings,aiProvider:b.settings.aiProvider||y.aiProvider,apiKeys:{...y.apiKeys,...b.settings.apiKeys}}));else throw new Error(b.error)}catch(b){console.error("Failed to sync settings",b),L.error("Settings saved locally only")}},jt=async p=>{try{const P=k.reduce((Q,be)=>Q+(be.type!=="credit_card"?be.balance:0),0),b=x.reduce((Q,be)=>Q+be.currentAmount,0)+Y,y=v.reduce((Q,be)=>Q+be.emiAmount,0),C=Math.max(0,P-b-y);let q=p.amount;if(q>C){const Q=q-C;console.warn(`âš ï¸ Leakage Detected! Deficit: ${Q}. Initiating Shadow Wallet Protocol.`);let be=Q;const Ye=[];x.forEach(pe=>{const Ve=pe.type||"growth";let ft=1;Ve==="stability"&&(ft=2),Ve==="protection"&&(ft=3),pe.currentAmount>0&&Ye.push({id:pe.id,type:"goal",currentAmount:pe.currentAmount,priority:ft,name:pe.name})}),Y>0&&Ye.push({id:"emergency-fund",type:"emergency",currentAmount:Y,priority:3,name:"Emergency Fund"}),Ye.sort((pe,Ve)=>pe.priority-Ve.priority);const Ce=[],Re=[];for(const pe of Ye){if(be<=0)break;const Ve=Math.min(pe.currentAmount,be);if(be-=Ve,pe.type==="goal"){const ft=pe.currentAmount-Ve;Ce.push(at(pe.id,{currentAmount:ft,status:"leaking"})),Re.push({id:`leak_${pe.id}_${new Date().toISOString().split("T")[0]}`,type:"alert",priority:"medium",category:"transactions",title:"Shadow Wallet Leakage",message:`â‚¹${Ve} spent reduced your '${pe.name}' reserve.`,timestamp:new Date,read:!1})}else pe.type==="emergency"&&(Ce.push(Promise.resolve(K(ft=>ft-Ve))),Re.push({id:`leak_emergency_${new Date().toISOString().split("T")[0]}`,type:"alert",priority:"medium",category:"transactions",title:"Emergency Fund Alert",message:`Warning: â‚¹${Ve} withdrawn from Emergency Fund to cover spending.`,timestamp:new Date,read:!1}))}await Promise.all(Ce),Re.length>0&&(B(Re),Re.forEach(pe=>L.error(pe.title,{description:pe.message})))}const X=k.find(Q=>Q.id===p.accountId);let F={...p};if(X?.type==="credit_card"){const Q=X.serviceChargePercentage||0;if(Q>0){const Ve=p.amount*Q/100;F.serviceChargeAmount=Ve,console.log(`Credit Service Charge: ${Ve}`)}const be=X.creditLimit||0,Ye=X.safeLimitPercentage||30,Ce=be*Ye/100,pe=Math.abs(X.balance)+p.amount;if(pe>Ce&&be>0)if(p.isIncomeGenerating)L.info("Strategic Credit Utilization",{description:"Limit exceeded, but marked as income-generating. Proceed with caution."});else{L.warning("High Interest Risk Detected",{description:`This transaction puts your CC usage at ${(pe/be*100).toFixed(1)}%, exceeding your ${Ye}% safe limit with no income-justification.`,duration:6e3});const Ve={id:`cc_limit_${X.id}_${new Date().toISOString().split("T")[0]}`,type:"alert",priority:"medium",category:"transactions",title:"Credit Stability Breach",message:`Card '${X.name}' usage protocol exceeded ${Ye}% threshold. Avoid non-essential outflow.`,timestamp:new Date,read:!1};B(Ve)}}if(!F.category||F.category==="Other"){const Q=Gs(F.description);Q&&Q.category==="Subscription"&&(F.category="Subscription",F.tags=Array.from(new Set([...F.tags||[],"auto-detected"])))}const ne=await re.createExpense(s,F);if(ne.success){if(l(Q=>[...Q,ne.expense]),X){const Q=p.amount+(F.serviceChargeAmount||0),be=X.type==="credit_card"?X.balance+Q:X.balance-Q;await Te(X.id,{balance:be})}if(p.isRecurring){const Q={type:"expense",description:p.description,amount:p.amount,category:p.category,accountId:p.accountId,frequency:p.frequency||"monthly",startDate:p.startDate||p.date,endDate:p.endDate,tags:p.tags};await re.createRecurring(s,Q),L.success("Recurring expense created!")}else L.success("Expense added!")}}catch(P){console.error("Create expense failed",P);const b={id:`temp_${Date.now()}`,...p,createdAt:new Date().toISOString()};l(y=>[...y,b]),L.warning("Added in offline mode")}},$e=async(p,P)=>{try{const b=await re.updateExpense(s,p,P);if(b.success){const y=o.find(C=>C.id===p);if(y){const C=k.find(F=>F.id===y.accountId);if(C){const F=y.amount+(y.serviceChargeAmount||0),ne=C.type==="credit_card"?C.balance-F:C.balance+F;await Te(C.id,{balance:ne})}const q=b.expense,X=k.find(F=>F.id===q.accountId);if(X){const F=q.amount+(q.serviceChargeAmount||0),ne=X.type==="credit_card"?X.balance+F:X.balance-F;await Te(X.id,{balance:ne})}}l(C=>C.map(q=>q.id===p?b.expense:q)),L.success("Expense updated")}}catch{l(y=>y.map(C=>C.id===p?{...C,...P}:C)),L.warning("Updated in offline mode")}},st=async p=>{try{if((await re.deleteExpense(s,p)).success){const b=o.find(y=>y.id===p);if(b){const y=k.find(C=>C.id===b.accountId);if(y){const C=b.amount+(b.serviceChargeAmount||0),q=y.type==="credit_card"?y.balance-C:y.balance+C;await Te(y.id,{balance:q})}}l(y=>y.filter(C=>C.id!==p)),L.success("Expense deleted")}}catch{l(b=>b.filter(y=>y.id!==p)),L.warning("Deleted in offline mode")}},He=async p=>{try{const P=await re.createIncome(s,p);if(P.success){c(y=>[...y,P.income]);const b=k.find(y=>y.id===p.accountId);if(b){const y=b.type==="credit_card"?b.balance-p.amount:b.balance+p.amount;await Te(b.id,{balance:y})}if(p.isRecurring){const y={type:"income",source:p.source,amount:p.amount,accountId:p.accountId,frequency:p.frequency||"monthly",startDate:p.startDate||p.date,endDate:p.endDate,tags:p.tags};await re.createRecurring(s,y),L.success("Recurring income created!")}else L.success("Income added!")}}catch{const b={id:`temp_${Date.now()}`,...p,createdAt:new Date().toISOString()};c(y=>[...y,b]),L.warning("Added in offline mode")}},mt=async(p,P)=>{try{const b=await re.updateIncome(s,p,P);if(b.success){const y=m.find(C=>C.id===p);if(y){const C=k.find(F=>F.id===y.accountId);if(C){const F=C.type==="credit_card"?C.balance+y.amount:C.balance-y.amount;await Te(C.id,{balance:F})}const q=b.income,X=k.find(F=>F.id===q.accountId);if(X){const F=X.type==="credit_card"?X.balance-q.amount:X.balance+q.amount;await Te(X.id,{balance:F})}}c(C=>C.map(q=>q.id===p?b.income:q)),L.success("Income updated")}}catch{c(y=>y.map(C=>C.id===p?{...C,...P}:C)),L.warning("Updated in offline mode")}},pt=async p=>{try{if((await re.deleteIncome(s,p)).success){const b=m.find(y=>y.id===p);if(b){const y=k.find(C=>C.id===b.accountId);if(y){const C=y.type==="credit_card"?y.balance+b.amount:y.balance-b.amount;await Te(y.id,{balance:C})}}c(y=>y.filter(C=>C.id!==p)),L.success("Income deleted")}}catch{c(b=>b.filter(y=>y.id!==p)),L.warning("Deleted in offline mode")}},At=async p=>{try{const P=await re.createDebt(s,p);if(P.success){w(y=>[...y,P.debt]);const b=k.find(y=>y.id===p.accountId);if(b){const y=p.type==="borrowed"?p.amount:-p.amount,C=b.type==="credit_card"?b.balance-y:b.balance+y;await Te(b.id,{balance:C})}L.success("Debt created")}}catch{const b={id:`temp_${Date.now()}`,...p,status:"pending",createdAt:new Date().toISOString()};w(y=>[...y,b]),L.warning("Added in offline mode")}},Nt=async(p,P)=>{try{const b=await re.updateDebt(s,p,P);if(b.success){const y=h.find(C=>C.id===p);if(y){const C=k.find(F=>F.id===y.accountId);if(C){const F=y.type==="borrowed"?-y.amount:y.amount,ne=C.type==="credit_card"?C.balance-F:C.balance+F;await Te(C.id,{balance:ne})}const q=b.debt,X=k.find(F=>F.id===q.accountId);if(X){const F=q.type==="borrowed"?q.amount:-q.amount,ne=X.type==="credit_card"?X.balance-F:X.balance+F;await Te(X.id,{balance:ne})}}w(C=>C.map(q=>q.id===p?b.debt:q)),L.success("Debt updated")}}catch{w(y=>y.map(C=>C.id===p?{...C,...P}:C)),L.warning("Updated in offline mode")}},xt=async p=>{try{if((await re.deleteDebt(s,p)).success){const b=h.find(y=>y.id===p);if(b){const y=k.find(C=>C.id===b.accountId);if(y){const C=b.type==="borrowed"?-b.amount:b.amount,q=y.type==="credit_card"?y.balance-C:y.balance+C;await Te(y.id,{balance:q})}}w(y=>y.filter(C=>C.id!==p)),L.success("Debt deleted")}}catch{w(b=>b.filter(y=>y.id!==p)),L.warning("Deleted in offline mode")}},ct=async p=>{try{const P=await re.updateDebt(s,p,{status:"settled"});if(P.success){const b=h.find(y=>y.id===p);if(b&&b.status!=="settled"){const y=k.find(C=>C.id===b.accountId);if(y){const C=b.type==="borrowed"?-b.amount:b.amount,q=y.type==="credit_card"?y.balance-C:y.balance+C;await Te(y.id,{balance:q});const X={description:`Debt Settlement: ${b.personName}`,amount:b.amount,category:"Transfer",date:new Date().toISOString().split("T")[0],tags:["debt-settlement"],accountId:b.accountId};if(b.type==="borrowed"){const F=await re.createExpense(s,X);F.success&&l(ne=>[...ne,F.expense])}else{const F=await re.createIncome(s,X);F.success&&c(ne=>[...ne,F.income])}}}w(y=>y.map(C=>C.id===p?P.debt:C)),L.success("ðŸŽ‰ Debt settled! Great job!"),Vt({particleCount:150,spread:100,origin:{y:.6}})}}catch{w(b=>b.map(y=>y.id===p?{...y,status:"settled"}:y)),L.warning("Marked as settled locally")}},bt=async p=>{try{const P=await re.createGoal(s,p);P.success&&(S(b=>[...b,P.goal]),L.success("Goal created"))}catch{const b={id:`temp_${Date.now()}`,...p,createdAt:new Date().toISOString()};S(y=>[...y,b]),L.warning("Created in offline mode")}},at=async(p,P)=>{try{const b=await re.updateGoal(s,p,P);b.success&&(S(y=>y.map(C=>C.id===p?b.goal:C)),b.goal.currentAmount>=b.goal.targetAmount?(L.success(`ðŸŽ‰ Goal "${b.goal.name}" completed!`),Vt({particleCount:200,spread:120,origin:{y:.5}})):L.success("Goal updated"))}catch{S(y=>y.map(C=>C.id===p?{...C,...P}:C)),L.warning("Updated locally")}},Et=async p=>{try{(await re.deleteGoal(s,p)).success&&(S(b=>b.filter(y=>y.id!==p)),L.success("Goal deleted"))}catch{S(b=>b.filter(y=>y.id!==p)),L.warning("Deleted locally")}},Ft=async p=>{try{const P=await re.createAccount(s,p);P.success&&(j(b=>[...b,P.account]),L.success("Account created"))}catch{const b={id:`temp_${Date.now()}`,...p,createdAt:new Date().toISOString()};j(y=>[...y,b]),L.warning("Created locally")}},Te=async(p,P)=>{try{const b=await re.updateAccount(s,p,P);b.success&&(j(y=>y.map(C=>C.id===p?b.account:C)),L.success("Account updated"))}catch{j(y=>y.map(C=>C.id===p?{...C,...P}:C)),L.warning("Updated locally")}},$=async p=>{try{(await re.deleteAccount(s,p)).success&&(j(b=>b.filter(y=>y.id!==p)),L.success("Account deleted"))}catch{j(b=>b.filter(y=>y.id!==p)),L.warning("Deleted locally")}},Se=async p=>{try{const P=await re.createLiability(s,p);P.success&&(R(b=>[...b,P.liability]),L.success("Liability created"))}catch{const b={id:`temp_${Date.now()}`,...p,principal:Number(p.principal),outstanding:Number(p.outstanding),interestRate:Number(p.interestRate),emiAmount:Number(p.emiAmount),tenure:Number(p.tenure),createdAt:new Date().toISOString()};R(y=>[...y,b]),L.warning("Created locally")}},Le=async(p,P)=>{try{const b=await re.updateLiability(s,p,P);b.success&&(R(y=>y.map(C=>C.id===p?b.liability:C)),L.success("Liability updated"))}catch{R(y=>y.map(C=>C.id===p?{...C,...P}:C)),L.warning("Updated locally")}},Be=async p=>{try{(await re.deleteLiability(s,p)).success&&(R(b=>b.filter(y=>y.id!==p)),L.success("Liability deleted"))}catch{R(b=>b.filter(y=>y.id!==p)),L.warning("Deleted locally")}},kt=async(p,P)=>{try{const b=await re.createInvestment(s,p);if(b.success){if(D(y=>[...y,b.investment]),P&&P!=="none"){const y=k.find(C=>C.id===P);if(y){const C=p.buyPrice*p.quantity;await Te(P,{balance:y.balance-C});const q={description:`Asset Purchase: ${p.symbol} (${p.quantity} units)`,amount:C,category:"Transfer",date:p.purchaseDate||new Date().toISOString().split("T")[0],tags:["investment","principal",p.symbol],accountId:P},X=await re.createExpense(s,q);X.success&&l(F=>[...F,X.expense])}}L.success("Investment created")}}catch{const y={id:`temp_${Date.now()}`,...p,createdAt:new Date().toISOString()};D(C=>[...C,y]),L.warning("Created locally")}},nt=async(p,P)=>{try{const b=await re.updateInvestment(s,p,P);b.success&&(D(y=>y.map(C=>C.id===p?b.investment:C)),L.success("Investment updated"))}catch{D(y=>y.map(C=>C.id===p?{...C,...P}:C)),L.warning("Updated locally")}},vt=async p=>{try{(await re.deleteInvestment(s,p)).success&&(D(b=>b.filter(y=>y.id!==p)),L.success("Investment deleted"))}catch{D(b=>b.filter(y=>y.id!==p)),L.warning("Deleted locally")}},[it,J]=f.useState(!1),[ve,ce]=f.useState("goal"),Pe=p=>{ce(p),J(!0)},rt=()=>{J(!1)},Oe=async p=>{const P=k.find(b=>b.id===p.accountId);if(!P){L.error("Account not found");return}if(P.balance<p.amount){L.error(`Insufficient funds in ${P.name}`);return}if(await Te(p.accountId,{balance:P.balance-p.amount}),p.destinationType==="goal"){const b=x.find(y=>y.id===p.destinationId);b&&await at(p.destinationId,{currentAmount:b.currentAmount+p.amount})}else K(b=>b+p.amount);L.success(`Successfully allocated ${wt[i.currency]}${p.amount.toLocaleString()} from ${P.name}!`,{description:`${p.destinationType==="goal"?"Goal":"Emergency Fund"} balance updated`}),Vt({particleCount:100,spread:70,origin:{y:.6}})},We=async(p,P)=>{const b=k.find(y=>y.id===p);if(b){if(b.balance<P)throw L.error(`Insufficient funds in ${b.name}`),new Error("Insufficient funds");await Te(p,{balance:b.balance-P})}},St=async(p,P,b)=>{const y=k.find(q=>q.id===p),C=k.find(q=>q.id===P);if(!y||!C){L.error("Source or destination account not found");return}if(y.balance<b){L.error(`Insufficient funds in ${y.name}`);return}try{await Te(p,{balance:y.balance-b});const q=C.type==="credit_card"?-b:b;await Te(P,{balance:C.balance+q});const X={description:`Migration: ${y.name} â†’ ${C.name}`,amount:b,category:"Transfer",date:new Date().toISOString().split("T")[0],tags:["internal","migration"],accountId:p},F=await re.createExpense(s,X);F.success&&l(ne=>[...ne,F.expense]),L.success(`Transferred ${wt[i.currency]}${b.toLocaleString()}!`,{description:`From ${y.name} to ${C.name}`}),Vt({particleCount:50,spread:60,origin:{y:.7}})}catch(q){console.error("Transfer failed",q),L.error("Capital migration protocol failed")}},et=async p=>{try{const P=await re.createRecurring(s,p);P.success&&(M(b=>[...b,P.recurring]),L.success("Recurring transaction created"))}catch(P){console.error("Error creating recurring transaction:",P);const b={id:`temp_${Date.now()}`,...p,createdAt:new Date().toISOString()};M(y=>[...y,b]),L.warning("Created locally")}},dt=async p=>{try{(await re.deleteRecurring(s,p)).success&&(M(b=>b.filter(y=>y.id!==p)),L.success("Recurring transaction deleted"))}catch(P){console.error("Error deleting recurring transaction:",P),M(b=>b.filter(y=>y.id!==p)),L.warning("Deleted locally")}},ts=async()=>{try{const p=await re.processRecurring(s);p.success&&(L.success(`Processed ${p.count} transactions`),await xe())}catch(p){console.error("Error processing recurring transactions:",p),L.error("Failed to process recurring transactions")}};return e.jsx(Un.Provider,{value:{userId:s,settings:i,currency:i.currency,expenses:o,incomes:m,debts:h,goals:x,accounts:k,investments:I,liabilities:v,recurringTransactions:W,notifications:A,emergencyFundAmount:Y,isLoading:a,isRefreshing:r,isFundAllocationOpen:it,fundAllocationType:ve,authStatus:se,currentUser:Me,isAwaitingPin:Z,isRememberedUser:N,rememberedMobile:z,refreshData:he,updateSettings:ze,checkIdentity:ke,login:ie,signup:Ee,logout:_e,scheduleAccountDeletion:De,cancelAccountDeletion:Fe,deletionDate:H,createExpense:jt,updateExpense:$e,deleteExpense:st,createIncome:He,updateIncome:mt,deleteIncome:pt,createDebt:At,updateDebt:Nt,deleteDebt:xt,settleDebt:ct,createGoal:bt,updateGoal:at,deleteGoal:Et,createAccount:Ft,updateAccount:Te,deleteAccount:$,createLiability:Se,updateLiability:Le,deleteLiability:Be,createInvestment:kt,updateInvestment:nt,deleteInvestment:vt,createRecurringTransaction:et,deleteRecurringTransaction:dt,processRecurringTransactions:ts,setEmergencyFundAmount:K,setNotifications:T,applyTheme:le,openFundAllocation:Pe,closeFundAllocation:rt,performFundAllocation:Oe,deductFromAccount:We,transferFunds:St},children:t})};function fe(t,s="USD",a=!1){const n=typeof t=="string"?parseFloat(t.replace(/,/g,"")):t;if(isNaN(n))return"";const r=s==="INR"?"en-IN":"en-US",d={style:"currency",currency:s,notation:a?"compact":"standard",maximumFractionDigits:a?1:2};try{return new Intl.NumberFormat(r,d).format(n)}catch{return new Intl.NumberFormat(r,{...d,style:"decimal"}).format(n)}}function sa(t,s="en-IN"){const a=typeof t=="string"?parseFloat(t.replace(/,/g,"")):t;return isNaN(a)?"":new Intl.NumberFormat(s).format(a)}const Cs=sa;function nl(t){return t===""||t==="-"?!0:/^-?\d*\.?\d*$/.test(t)}function va(t){return t.replace(/,/g,"")}function Mu(t){if(t<=0)return"0 months";const s=Math.floor(t/12),a=t%12,n=[];return s>0&&n.push(`${s} ${s===1?"year":"years"}`),(a>0||s===0)&&n.push(`${a} ${a===1?"month":"months"}`),n.join(", ")}function Lu(t,s="INR"){const a=Math.abs(t),n=t<0?"-":"";if(s==="INR"){if(a>=1e7)return`${n}${(a/1e7).toFixed(2).replace(/\.00$/,"")}C`;if(a>=1e5)return`${n}${(a/1e5).toFixed(2).replace(/\.00$/,"")}L`;if(a>=1e4)return`${n}${(a/1e3).toFixed(1).replace(/\.0$/,"")}K`}else{if(a>=1e9)return`${n}${(a/1e9).toFixed(2).replace(/\.00$/,"")}B`;if(a>=1e6)return`${n}${(a/1e6).toFixed(2).replace(/\.00$/,"")}M`;if(a>=1e4)return`${n}${(a/1e3).toFixed(1).replace(/\.0$/,"")}K`}return n+sa(a,s==="INR"?"en-IN":"en-US")}function Ou(t,s="INR"){const a=Math.abs(t),n=t<0?"-":"",r=(d,i)=>{let u=2;return d>=100?u=0:d>=10&&(u=1),`${n}${d.toFixed(u).replace(/\.0+$/,"")}${i}`};if(s==="INR"){if(a>=1e7)return r(a/1e7,"Cr");if(a>=1e5)return r(a/1e5,"L");if(a>=1e3)return r(a/1e3,"K")}else{if(a>=1e9)return r(a/1e9,"B");if(a>=1e6)return r(a/1e6,"M");if(a>=1e3)return r(a/1e3,"K")}return n+sa(a,s==="INR"?"en-IN":"en-US")}function il(){const{accounts:t,currency:s,recurringTransactions:a,createRecurringTransaction:n,deleteRecurringTransaction:r,processRecurringTransactions:d}=ys(),i=A=>({daily:"Daily",weekly:"Weekly",monthly:"Monthly",yearly:"Yearly"})[A]||A,u=({rec:A})=>{const T=t.find(Y=>Y.id===A.accountId);return e.jsxs(Ke,{className:"p-6 bg-slate-900/40 border-white/5 rounded-[28px] border hover:bg-slate-900/60 transition-all duration-300 group relative overflow-hidden",children:[e.jsx("div",{className:`absolute top-0 right-0 w-24 h-24 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20 ${A.type==="income"?"bg-emerald-500":"bg-rose-500"}`}),e.jsxs("div",{className:"flex items-start justify-between mb-8 relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-14 h-14 border border-white/5 rounded-2xl flex items-center justify-center shadow-inner group-hover:scale-105 transition-transform text-2xl ${A.type==="income"?"bg-emerald-500/10 text-emerald-400":"bg-rose-500/10 text-rose-400"}`,children:A.type==="income"?"ðŸ’°":"ðŸ’¸"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-base font-bold text-slate-100 truncate flex items-center gap-2",children:A.description||A.source}),e.jsx("p",{className:"text-[10px] uppercase font-black tracking-widest text-slate-600 mt-1",children:i(A.frequency)})]})]}),e.jsx(oe,{variant:"ghost",size:"sm",onClick:()=>r(A.id),className:"w-10 h-10 p-0 rounded-xl hover:bg-rose-500/10 hover:text-rose-400 text-slate-700 opacity-0 group-hover:opacity-100 transition-all",children:e.jsx(Jt,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-6 relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-widest font-black text-slate-600 mb-1",children:"Commitment"}),e.jsxs("span",{className:`text-2xl font-black tabular-nums leading-none ${A.type==="income"?"text-emerald-400":"text-slate-100"}`,children:[A.type==="income"?"+":"-",fe(A.amount,s)]})]}),e.jsxs("div",{className:"text-right flex flex-col items-end",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-widest font-black text-slate-600 mb-1",children:"Wallet"}),e.jsxs("span",{className:"text-xs font-bold text-slate-300 flex items-center gap-1.5 bg-white/5 px-2 py-1 rounded-lg",children:[T?.icon," ",T?.name]})]})]}),e.jsxs("div",{className:"pt-6 border-t border-white/5 flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-500",children:[e.jsx(_s,{className:"w-3 h-3"}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-wider",children:"Timeline"})]}),e.jsxs("div",{className:"text-[10px] font-bold text-slate-300",children:[new Date(A.startDate).toLocaleDateString(void 0,{month:"short",year:"numeric"}),A.endDate?` â€” ${new Date(A.endDate).toLocaleDateString(void 0,{month:"short",year:"numeric"})}`:" â€” Ongoing"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[A.category&&e.jsx("div",{className:"bg-slate-800/50 px-2.5 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest text-slate-500 border border-white/5",children:A.category}),e.jsx("div",{className:"w-8 h-8 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-lg shadow-inner",children:T?.icon||"ðŸ¦"})]})]})]})]})},[o,l]=f.useState(!1),[m,c]=f.useState(!1),[h,w]=f.useState(!1),[x,S]=f.useState({type:"expense",description:"",source:"",amount:"",category:"",accountId:t.length>0?t[0].id:"",frequency:"monthly",startDate:new Date().toISOString().split("T")[0],endDate:"",tags:[]}),k=async()=>{const A={type:x.type,amount:parseFloat(x.amount),accountId:x.accountId,frequency:x.frequency,startDate:x.startDate,endDate:x.endDate||void 0,tags:x.tags};x.type==="expense"?(A.description=x.description,A.category=x.category):A.source=x.source,await n(A),l(!1),I()},j=async()=>{c(!0),await d(),c(!1)},I=()=>{S({type:"expense",description:"",source:"",amount:"",category:"",accountId:t.length>0?t[0].id:"",frequency:"monthly",startDate:new Date().toISOString().split("T")[0],endDate:"",tags:[]})},D=a.filter(A=>A.amount&&A.amount>0),R=(()=>{const A=D.filter(se=>se.category==="EMI"||se.description?.toLowerCase().includes("loan")),T=D.filter(se=>se.category==="Subscription"||se.description?.toLowerCase().includes("subscription")||["netflix","spotify","prime","youtube","apple","hulu","disney"].some(ae=>se.description?.toLowerCase().includes(ae))),Y=D.filter(se=>se.type==="income"),K=D.filter(se=>!A.some(ae=>ae.id===se.id)&&!T.some(ae=>ae.id===se.id)&&!Y.some(ae=>ae.id===se.id));return{loans:A,subscriptions:T,incomes:Y,others:K}})(),M=(()=>{const A=Z=>{const G=Z.amount||0;return Z.frequency==="monthly"?G:Z.frequency==="yearly"?G/12:Z.frequency==="weekly"?G*4:G*30},T=R.loans.reduce((Z,G)=>Z+A(G),0),Y=R.subscriptions.reduce((Z,G)=>Z+A(G),0),K=R.incomes.reduce((Z,G)=>Z+A(G),0),se=R.others.reduce((Z,G)=>Z+A(G),0),ae=T+Y+se,Me=K-ae,je=K>0?Math.max(0,Math.min(100,Me/K*100)):0;return{loanTotal:T,subTotal:Y,incomeTotal:K,otherTotal:se,totalOutflow:ae,netMonthly:Me,healthScore:je,totalActive:D.length}})();return e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[e.jsxs(Ke,{className:"relative overflow-hidden bg-gradient-to-br from-indigo-600 via-purple-600 to-indigo-700 text-white rounded-[32px] border-white/10 shadow-2xl p-8",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 scale-150 rotate-12",children:e.jsx(Bi,{className:"w-32 h-32"})}),e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center justify-between gap-12",children:[e.jsxs("div",{className:"space-y-4 text-center md:text-left",children:[e.jsx("p",{className:"text-white/70 text-sm font-bold uppercase tracking-widest mb-1",children:"Monthly Leftover Cash"}),e.jsxs("h1",{className:"text-5xl md:text-6xl font-black tracking-tighter tabular-nums mb-2",children:[M.netMonthly>=0?"+":"",fe(M.netMonthly,s),e.jsx("span",{className:"text-xl text-white/50 ml-2 font-medium italic",children:"/month"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 w-full md:w-auto",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-md px-6 py-4 rounded-3xl border border-white/10 text-center",children:[e.jsx("p",{className:"text-[10px] uppercase font-bold text-white/60 mb-1",children:"Loan EMIs"}),e.jsxs("span",{className:"font-bold text-lg text-rose-300",children:["-",fe(M.loanTotal,s)]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-md px-6 py-4 rounded-3xl border border-white/10 text-center",children:[e.jsx("p",{className:"text-[10px] uppercase font-bold text-white/60 mb-1",children:"Subscriptions"}),e.jsxs("span",{className:"font-bold text-lg text-indigo-200",children:["-",fe(M.subTotal,s)]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-md px-6 py-4 rounded-3xl border border-white/10 text-center",children:[e.jsx("p",{className:"text-[10px] uppercase font-bold text-white/60 mb-1",children:"Recur. Income"}),e.jsxs("span",{className:"font-bold text-lg text-emerald-400",children:["+",fe(M.incomeTotal,s)]})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 sticky top-0 z-30 py-2 bg-slate-950/80 backdrop-blur-md rounded-2xl border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-1.5 h-6 bg-indigo-500 rounded-full shadow-[0_0_15px_rgba(99,102,241,0.5)]"}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-500",children:"Commitment Stream"})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsxs(oe,{variant:"ghost",size:"sm",onClick:j,disabled:m||a.length===0,className:"flex-1 sm:flex-initial rounded-xl border border-white/5 hover:bg-slate-900/40 font-bold text-slate-400 hover:text-slate-100 px-4 h-10 text-xs",children:[e.jsx(gs,{className:`w-3.5 h-3.5 mr-2 ${m?"animate-spin":""}`}),"Sync"]}),e.jsxs(oe,{onClick:()=>l(!0),size:"sm",className:"flex-1 sm:flex-initial bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl px-6 h-10 font-bold shadow-lg shadow-indigo-600/20 transition-all active:scale-95 text-xs",children:[e.jsx(ds,{className:"w-3.5 h-3.5 mr-2"}),"Add New"]})]})]}),a.length>0&&e.jsxs("div",{className:"px-4",children:[e.jsxs("div",{className:"bg-slate-900/40 border border-white/5 rounded-2xl p-4 flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-500/10 rounded-xl flex items-center justify-center",children:e.jsx(Ht,{className:"w-5 h-5 text-indigo-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500 mb-0.5",children:"Net Monthly Flow"}),e.jsxs("h4",{className:`text-lg font-black tabular-nums leading-none ${M.netMonthly>=0?"text-emerald-400":"text-rose-400"}`,children:[M.netMonthly>=0?"+":"",fe(M.netMonthly,s)]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 border-t sm:border-t-0 sm:border-l border-white/5 pt-4 sm:pt-0 sm:pl-6",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("p",{className:"text-[10px] uppercase font-black text-slate-600",children:"Shadow Health"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`font-black text-lg tabular-nums ${M.healthScore>60?"text-emerald-400":M.healthScore>30?"text-indigo-400":"text-rose-400"}`,children:[Math.round(M.healthScore),"%"]}),e.jsx("div",{className:"px-2 py-0.5 rounded bg-white/5 border border-white/5",children:e.jsx("span",{className:"text-[9px] font-black uppercase tracking-tight text-slate-400",children:M.healthScore>=80?"Elite":M.healthScore>=60?"Strong":M.healthScore>=40?"Stable":M.healthScore>=20?"Warning":"Critical"})}),e.jsx("div",{className:"flex gap-0.5 ml-1",children:[1,2,3,4,5].map(A=>e.jsx("div",{className:`w-1.5 h-3 rounded-full transition-colors duration-500 ${M.healthScore/20>=A?M.healthScore>60?"bg-emerald-500":M.healthScore>30?"bg-indigo-500":"bg-rose-500":"bg-slate-800"}`},A))})]})]}),e.jsx(oe,{variant:"ghost",size:"sm",onClick:()=>w(!h),className:"text-indigo-400 hover:text-indigo-300 hover:bg-indigo-500/10 rounded-xl font-bold",children:h?"Hide Analysis":"Show Analysis"})]})]}),h&&e.jsxs("div",{className:"mt-4 animate-in zoom-in-95 duration-300 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(Ke,{className:"bg-slate-900/40 border-white/5 p-4 rounded-2xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2 opacity-50",children:[e.jsx(wn,{className:"w-4 h-4"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em]",children:"Total Outflow"})]}),e.jsx("p",{className:"text-xl font-black text-rose-400",children:fe(M.totalOutflow,s)})]}),e.jsxs(Ke,{className:"bg-slate-900/40 border-white/5 p-4 rounded-2xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2 opacity-50",children:[e.jsx(Vi,{className:"w-4 h-4"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em]",children:"Total Inflow"})]}),e.jsx("p",{className:"text-xl font-black text-emerald-400",children:fe(M.incomeTotal,s)})]})]})]}),e.jsx("div",{className:"px-4 pb-20 space-y-12",children:D.length===0?e.jsxs(Ke,{className:"py-24 text-center bg-slate-800/20 rounded-[40px] border border-dashed border-white/10",children:[e.jsx(_s,{className:"w-20 h-20 mx-auto text-slate-700 mb-6"}),e.jsx("h3",{className:"text-2xl font-black text-slate-200 mb-3",children:"No Active Commitments"}),e.jsx("p",{className:"text-sm text-slate-500 font-bold mb-10 max-w-[320px] mx-auto leading-relaxed",children:"Set up your subscriptions, EMIs, and monthly income to unlock deep financial insights."}),e.jsxs(oe,{onClick:()=>l(!0),className:"bg-indigo-600/10 hover:bg-indigo-600/20 text-indigo-400 border border-indigo-600/20 rounded-2xl px-10 h-14 font-black",children:[e.jsx(ds,{className:"w-5 h-5 mr-3"}),"Add First Commitment"]})]}):e.jsxs(e.Fragment,{children:[R.incomes.length>0&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 border-l-4 border-emerald-500 pl-4 py-1",children:[e.jsx("h3",{className:"text-xl font-black text-slate-100 uppercase tracking-tight",children:"Recurring Income"}),e.jsxs("span",{className:"bg-emerald-500/10 text-emerald-400 px-2 py-0.5 rounded text-[10px] font-black",children:[R.incomes.length," SOURCE(S)"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:R.incomes.map((A,T)=>e.jsx(u,{rec:A},`${A.id}-${T}`))})]}),R.loans.length>0&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 border-l-4 border-rose-500 pl-4 py-1",children:[e.jsx("h3",{className:"text-xl font-black text-slate-100 uppercase tracking-tight",children:"Loan EMIs"}),e.jsxs("span",{className:"bg-rose-500/10 text-rose-400 px-2 py-0.5 rounded text-[10px] font-black",children:[R.loans.length," COMMITMENT(S)"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:R.loans.map((A,T)=>e.jsx(u,{rec:A},`${A.id}-${T}`))})]}),R.subscriptions.length>0&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 border-l-4 border-indigo-500 pl-4 py-1",children:[e.jsx("h3",{className:"text-xl font-black text-slate-100 uppercase tracking-tight",children:"Active Subscriptions"}),e.jsxs("span",{className:"bg-indigo-500/10 text-indigo-400 px-2 py-0.5 rounded text-[10px] font-black",children:[R.subscriptions.length," SERVICE(S)"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:R.subscriptions.map((A,T)=>e.jsx(u,{rec:A},`${A.id}-${T}`))})]}),R.others.length>0&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 border-l-4 border-slate-500 pl-4 py-1",children:[e.jsx("h3",{className:"text-xl font-black text-slate-100 uppercase tracking-tight",children:"Other Commitments"}),e.jsxs("span",{className:"bg-slate-500/10 text-slate-400 px-2 py-0.5 rounded text-[10px] font-black",children:[R.others.length," ITEM(S)"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:R.others.map((A,T)=>e.jsx(u,{rec:A},`${A.id}-${T}`))})]})]})}),e.jsx(Rt,{open:o,onOpenChange:l,children:e.jsxs(Mt,{className:"max-w-md bg-slate-950 border-white/10 text-white rounded-[32px]",children:[e.jsxs(Lt,{children:[e.jsx(Ot,{className:"text-2xl font-black tracking-tight text-white",children:"Create New Commitment"}),e.jsx(_t,{className:"text-slate-400 font-bold",children:"Automate your financial shadow-wallets."})]}),e.jsxs("div",{className:"space-y-6 mt-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:`p-4 rounded-2xl border-2 cursor-pointer transition-all ${x.type==="income"?"border-emerald-500 bg-emerald-500/10":"border-white/5 bg-white/5 hover:border-white/10"}`,onClick:()=>S({...x,type:"income"}),children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-500/20 flex items-center justify-center text-xl mb-2",children:"ðŸ’°"}),e.jsx("p",{className:"text-xs font-black uppercase text-white",children:"Money In"}),e.jsx("p",{className:"text-[10px] text-emerald-400 font-bold",children:"Salary / Gift"})]}),e.jsxs("div",{className:`p-4 rounded-2xl border-2 cursor-pointer transition-all ${x.type==="expense"?"border-indigo-500 bg-indigo-500/10":"border-white/5 bg-white/5 hover:border-white/10"}`,onClick:()=>S({...x,type:"expense"}),children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-500/20 flex items-center justify-center text-xl mb-2",children:"ðŸ’¸"}),e.jsx("p",{className:"text-xs font-black uppercase text-white",children:"Money Out"}),e.jsx("p",{className:"text-[10px] text-indigo-400 font-bold",children:"Rent / Sub"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"group",children:[e.jsx(ee,{htmlFor:"recurring-name",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block",children:"Commitment Name"}),e.jsx(Ue,{id:"recurring-name",name:"description",value:x.type==="expense"?x.description:x.source,onChange:A=>S({...x,[x.type==="expense"?"description":"source"]:A.target.value}),placeholder:x.type==="expense"?"e.g. Netflix, Rent":"e.g. Salary",className:"bg-white/5 border-white/5 rounded-xl h-12 focus:ring-indigo-500/50",autoComplete:"off"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"recurring-amount",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block",children:"Amount"}),e.jsx(Ue,{id:"recurring-amount",name:"amount",type:"number",value:x.amount,onChange:A=>S({...x,amount:A.target.value}),placeholder:"0.00",className:"bg-white/5 border-white/5 rounded-xl h-12",autoComplete:"off"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"recurring-frequency",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block",children:"Frequency"}),e.jsxs(Je,{value:x.frequency,onValueChange:A=>S({...x,frequency:A}),children:[e.jsx(Ze,{id:"recurring-frequency",name:"frequency",className:"bg-white/5 border-white/5 rounded-xl h-12",children:e.jsx(Xe,{})}),e.jsxs(Qe,{className:"bg-slate-900 border-white/10 text-white",children:[e.jsx(Ne,{value:"monthly",children:"Monthly"}),e.jsx(Ne,{value:"weekly",children:"Weekly"}),e.jsx(Ne,{value:"daily",children:"Daily"}),e.jsx(Ne,{value:"yearly",children:"Yearly"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"recurring-account",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block",children:"Funding Wallet"}),e.jsxs(Je,{value:x.accountId,onValueChange:A=>S({...x,accountId:A}),children:[e.jsx(Ze,{id:"recurring-account",name:"accountId",className:"bg-white/5 border-white/5 rounded-xl h-12",children:e.jsx(Xe,{placeholder:"Target Account"})}),e.jsx(Qe,{className:"bg-slate-900 border-white/10 text-white",children:t.map(A=>e.jsxs(Ne,{value:A.id,children:[A.icon," ",A.name]},A.id))})]})]}),x.type==="expense"&&e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"recurring-category",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block",children:"Category"}),e.jsxs(Je,{value:x.category,onValueChange:A=>S({...x,category:A}),children:[e.jsx(Ze,{id:"recurring-category",name:"category",className:"bg-white/5 border-white/5 rounded-xl h-12",children:e.jsx(Xe,{placeholder:"Purpose"})}),e.jsx(Qe,{className:"bg-slate-900 border-white/10 text-white max-h-[200px]",children:Bn.map(A=>e.jsxs(Ne,{value:A.value,children:[A.emoji," ",A.value]},A.value))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"recurring-start-date",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block",children:"Start Date"}),e.jsx(Ue,{id:"recurring-start-date",name:"startDate",type:"date",value:x.startDate,onChange:A=>S({...x,startDate:A.target.value}),className:"bg-white/5 border-white/5 rounded-xl h-12 text-xs",autoComplete:"off"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"recurring-end-date",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block",children:"End Date (Optional)"}),e.jsx(Ue,{id:"recurring-end-date",name:"endDate",type:"date",value:x.endDate,onChange:A=>S({...x,endDate:A.target.value}),className:"bg-white/5 border-white/5 rounded-xl h-12",autoComplete:"off"})]})]})]}),e.jsxs("div",{className:"flex gap-4 pt-4 relative z-10",children:[e.jsx(oe,{variant:"ghost",onClick:()=>l(!1),className:"flex-1 rounded-2xl h-14 font-black text-slate-500 hover:bg-white/5",children:"Discard"}),e.jsx(oe,{onClick:k,className:"flex-1 bg-indigo-600 hover:bg-indigo-500 text-white rounded-2xl h-14 font-black shadow-lg shadow-indigo-600/20",disabled:!x.amount||!x.description&&!x.source||!x.accountId||x.type==="expense"&&!x.category,children:"Activate Flow"})]})]})]})})]})}const rl=({isVisible:t,onNotificationClick:s,onSettingsClick:a,notificationCount:n=0})=>e.jsxs("header",{className:`nav-bar fixed top-0 w-full h-16 flex items-center justify-between px-6 border-b border-white/5 transition-transform duration-300 ease-in-out z-[100] ${t?"translate-y-0":"-translate-y-full"}`,children:[e.jsx("button",{onClick:a,"aria-label":"User Settings",className:"w-10 h-10 sq-md bg-black border border-white/5 flex items-center justify-center hover:bg-white/5 transition-colors",children:e.jsx(Fs,{className:"w-5 h-5 text-slate-400"})}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"tracking-[0.4em] font-black text-sm italic text-white leading-none",children:"FINHUB"}),e.jsx("div",{className:"h-[2px] w-6 bg-blue-600 sq-full mt-1.5 shadow-[0_0_10px_#2563EB]"})]}),e.jsx("button",{onClick:s,"aria-label":"Notifications",className:"w-10 h-10 flex items-center justify-center text-slate-400 hover:text-white transition-colors relative",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ks,{className:"w-5 h-5"}),n>0&&e.jsx("span",{className:"absolute top-0 right-0 w-2 h-2 bg-[#FF453A] sq-full ring-2 ring-black"})]})})]}),ol=({isVisible:t,activeTab:s,onTabChange:a})=>e.jsxs("nav",{className:`nav-bar fixed bottom-0 w-full h-20 flex items-center justify-around px-4 border-t border-white/5 transition-transform duration-300 ease-in-out z-[100] ${t?"translate-y-0":"translate-y-full"}`,children:[e.jsxs("div",{className:`flex flex-col items-center relative py-4 cursor-pointer transition-colors ${s==="dashboard"?"text-[#0A84FF]":"text-[#8E8E93] hover:text-white"}`,onClick:()=>a("dashboard"),children:[s==="dashboard"&&e.jsx("div",{className:"absolute top-0 w-8 h-0.5 bg-[#0A84FF] shadow-[0_0_15px_#0A84FF] rounded-full"}),e.jsx(Ui,{className:"w-6 h-6"}),e.jsx("span",{className:"text-[9px] font-black uppercase mt-2 tracking-[0.3em]",children:"Home"})]}),e.jsxs("div",{className:`flex flex-col items-center transition-all cursor-pointer ${s==="transactions"?"text-[#0A84FF]":"text-[#8E8E93] hover:text-white"}`,onClick:()=>a("transactions"),children:[e.jsx(zi,{className:"w-6 h-6"}),e.jsx("span",{className:"text-[9px] font-black uppercase mt-2 tracking-[0.3em]",children:"History"})]}),e.jsxs("div",{className:`flex flex-col items-center transition-all cursor-pointer ${s==="liability"?"text-[#0A84FF]":"text-[#8E8E93] hover:text-white"}`,onClick:()=>a("liability"),children:[e.jsx(jn,{className:"w-6 h-6"}),e.jsx("span",{className:"text-[9px] font-black uppercase mt-2 tracking-[0.3em]",children:"Bills"})]}),e.jsxs("div",{className:`flex flex-col items-center transition-all cursor-pointer ${s==="investments"?"text-[#0A84FF]":"text-[#8E8E93] hover:text-white"}`,onClick:()=>a("investments"),children:[e.jsx(qi,{className:"w-6 h-6"}),e.jsx("span",{className:"text-[9px] font-black uppercase mt-2 tracking-[0.3em]",children:"Growth"})]}),e.jsxs("div",{className:`flex flex-col items-center transition-all cursor-pointer ${s==="goals"?"text-[#0A84FF]":"text-[#8E8E93] hover:text-white"}`,onClick:()=>a("goals"),children:[e.jsx(Xt,{className:"w-6 h-6"}),e.jsx("span",{className:"text-[9px] font-black uppercase mt-2 tracking-[0.3em]",children:"Goals"})]}),e.jsxs("div",{className:`flex flex-col items-center transition-all cursor-pointer ${s==="more"?"text-[#0A84FF]":"text-[#8E8E93] hover:text-white"}`,onClick:()=>a("more"),children:[e.jsx(Gi,{className:"w-6 h-6"}),e.jsx("span",{className:"text-[9px] font-black uppercase mt-2 tracking-[0.3em]",children:"More"})]})]}),ll=({children:t,activeTab:s,onTabChange:a,notificationCount:n,onNotificationClick:r,onSettingsClick:d,renderFab:i,forceHide:u=!1})=>{const[o,l]=f.useState(!0),m=f.useRef(0),c=20,h=o&&!u;return f.useEffect(()=>{const w=()=>{if(u)return;const x=window.scrollY;if(x<10){l(!0),m.current=x;return}const S=x-m.current;Math.abs(S)>c&&(S>0?l(!1):l(!0),m.current=x)};return window.addEventListener("scroll",w,{passive:!0}),()=>window.removeEventListener("scroll",w)},[u]),e.jsxs("div",{className:"min-h-screen bg-bg-primary text-text-primary",children:[e.jsx(rl,{isVisible:h,notificationCount:n,onNotificationClick:r,onSettingsClick:d}),e.jsx("main",{className:"pt-[80px] pb-[140px] px-4 w-full md:max-w-3xl lg:max-w-5xl mx-auto min-h-screen",children:t}),e.jsx(ol,{isVisible:h,activeTab:s,onTabChange:a}),i&&i(h)]})},Ut=f.forwardRef(({value:t,onChange:s,allowDecimals:a=!0,maxDecimals:n=2,className:r,...d},i)=>{const[u,o]=f.useState("");f.useEffect(()=>{if(t===""||t===void 0||t===null)o("");else{const c=t.toString();o(Cs(c))}},[t]);const l=c=>{let h=c.target.value;const w=va(h);if(nl(w)&&!(!a&&w.includes("."))){if(a&&w.includes(".")){const x=w.split(".");if(x[1]&&x[1].length>n)return}o(Cs(w)),s(w)}},m=c=>{const h=va(u);h&&o(Cs(h)),d.onBlur&&d.onBlur(c)};return e.jsx(Ue,{...d,ref:i,type:"text",inputMode:"decimal",value:u,onChange:l,onBlur:m,className:r})});Ut.displayName="NumberInput";const cl=un("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function wa({className:t,variant:s,asChild:a=!1,...n}){const r=a?dn:"span";return e.jsx(r,{"data-slot":"badge",className:ge(cl({variant:s}),t),...n})}const dl=t=>{if(t.category?.toLowerCase().includes("transfer"))return!0;const s=(t.description||t.source||"").toLowerCase();return!!(s.includes("transfer")||s.includes("payment")||s.includes("cc bill")||s.includes("credit card bill")||s.includes("migration")||t.tags&&Array.isArray(t.tags)&&t.tags.some(a=>a.toLowerCase()==="transfer"||a.toLowerCase()==="internal"))};function As({className:t,...s}){return e.jsx(Hi,{"data-slot":"checkbox",className:ge("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(Wi,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(mn,{className:"size-3.5"})})})}const ul=({isOpen:t,onClose:s,type:a,onSubmit:n,initialData:r,accounts:d,currency:i,roundUpEnabled:u=!0})=>{const[o,l]=f.useState({description:"",amount:"",category:"",source:"",personName:"",debtType:"borrowed",accountId:"",date:new Date().toISOString().split("T")[0],tags:[],isRecurring:!1,frequency:"monthly",endDate:"",isIncomeGenerating:!1,justification:"",debtDueDate:""}),[m,c]=f.useState(""),[h,w]=f.useState(null),[x,S]=f.useState([]);f.useEffect(()=>{r?l({description:r.description||"",amount:r.amount?.toString()||"",category:r.category||"",source:r.source||"",personName:r.personName||"",debtType:r.type||"borrowed",accountId:r.accountId||"",date:r.date||new Date().toISOString().split("T")[0],tags:r.tags||[],isRecurring:r.isRecurring||!1,frequency:r.frequency||"monthly",endDate:r.endDate||"",isIncomeGenerating:r.isIncomeGenerating||!1,justification:r.justification||"",debtDueDate:r.dueDate||""}):d.length>0&&!o.accountId&&l(T=>({...T,accountId:d[0].id}))},[r]),f.useEffect(()=>{const T=a==="expense"||a==="income"?o.description:o.personName;if(T.length>2&&!r){const Y=Gs(T);Y?(w(Y.category),S(Y.tags)):(w(null),S([]))}},[o.description,o.personName,a]);const k=T=>{if(T.preventDefault(),!o.accountId&&d.length>0){alert("Please select an account");return}let Y={amount:parseFloat(o.amount),date:o.date,tags:o.tags,accountId:o.accountId||(d.length>0?d[0].id:""),isRecurring:o.isRecurring,frequency:o.frequency,startDate:o.date,endDate:o.endDate||void 0,isIncomeGenerating:o.isIncomeGenerating,justification:o.justification};a==="expense"?Y={...Y,description:o.description,category:o.category,roundUpAmount:o.roundUpAmount}:a==="income"?Y={...Y,source:o.description}:a==="debt"&&(Y={...Y,personName:o.personName,type:o.debtType,dueDate:o.debtDueDate||void 0});const K=d.find(se=>se.id===o.accountId);a==="expense"&&K?.type==="credit_card"&&dl({description:o.description,category:o.category})&&(Y.category="Transfer"),n(Y),j()},j=()=>{l({description:"",amount:"",category:"",source:"",personName:"",debtType:"borrowed",accountId:d.length>0?d[0].id:"",date:new Date().toISOString().split("T")[0],tags:[],isRecurring:!1,frequency:"monthly",endDate:"",isIncomeGenerating:!1,justification:"",debtDueDate:""}),c(""),w(null),S([]),s()},I=()=>{m.trim()&&!o.tags.includes(m.trim())&&(l({...o,tags:[...o.tags,m.trim()]}),c(""))},D=T=>{if(T.includes(",")){const Y=T.split(",").map(K=>K.trim()).filter(K=>K&&!o.tags.includes(K));Y.length>0&&(l({...o,tags:[...o.tags,...Y]}),c(""))}else c(T)},v=T=>{l({...o,tags:o.tags.filter(Y=>Y!==T)})},R=()=>{h&&(l({...o,category:h,tags:[...new Set([...o.tags,...x])]}),w(null),S([]))},W=async()=>{if("contacts"in navigator&&"ContactsManager"in window)try{const T=["name"],Y={multiple:!1},K=await navigator.contacts.select(T,Y);if(K.length>0&&K[0].name?.length>0){const se=K[0].name[0];l(ae=>({...ae,personName:se})),window.navigator.vibrate&&window.navigator.vibrate(20)}}catch(T){console.error("Contact picker error:",T)}else alert("Contact Selection is only available on supported mobile browsers.")},M=[100,500,1e3,5e3],A=T=>{const K=(o.amount||"0")+"0".repeat(T);l({...o,amount:K})};return e.jsx(Rt,{open:t,onOpenChange:j,children:e.jsxs(Mt,{className:"max-w-md max-h-[90vh] overflow-y-auto bg-black border-white/5 p-0 shadow-2xl custom-scrollbar sq-2xl",children:[e.jsxs("div",{className:`px-8 pt-10 pb-8 border-b border-white/5 relative overflow-hidden ${a==="expense"?"bg-rose-500/5":a==="income"?"bg-emerald-500/5":"bg-yellow-500/5"}`,children:[e.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 blur-[60px] opacity-20 -mr-16 -mt-16 ${a==="expense"?"bg-rose-500":a==="income"?"bg-emerald-500":"bg-yellow-500"}`}),e.jsxs(Lt,{className:"relative z-10",children:[e.jsxs(Ot,{className:"text-2xl font-black tracking-tighter text-slate-100",children:[r?"Update":"Add"," ",a==="expense"?"Money Out":a==="income"?"Money In":"Personal IOU"]}),e.jsx(_t,{className:"text-slate-500 font-bold text-[10px] uppercase tracking-[0.2em] mt-1",children:a==="debt"?"Protocol for personal liquidity exchange":`Recording ${a==="expense"?"capital depletion":"capital injection"} event`})]})]}),e.jsx("div",{className:"p-8",children:e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[d.length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"transaction-account",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Account Reservoir"}),e.jsxs(Je,{value:o.accountId,onValueChange:T=>l({...o,accountId:T}),children:[e.jsx(Ze,{id:"transaction-account",name:"accountId",className:"h-12 bg-black border-white/5 sq-md focus:ring-1 focus:ring-white/10 text-slate-200 font-bold",children:e.jsx(Xe,{placeholder:"Select account"})}),e.jsx(Qe,{className:"bg-black border-white/5",children:d.map(T=>e.jsx(Ne,{value:T.id,className:"focus:bg-white/5 focus:text-white",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{className:"font-bold",children:T.name}),e.jsx("span",{className:"text-[10px] text-slate-500 ml-4 font-mono",children:fe(T.balance,i)})]})},T.id))})]})]}):e.jsx("div",{className:"p-4 bg-amber-500/10 border border-amber-500/20 sq-md text-[10px] font-black uppercase tracking-widest text-amber-400",children:"âš ï¸ Protocol Failure: No accounts detected"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"transaction-description",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",children:a==="expense"?"Description":a==="income"?"Source":"Person Name"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ue,{id:"transaction-description",name:"description",value:a==="debt"?o.personName:o.description,onChange:T=>l({...o,[a==="debt"?"personName":"description"]:T.target.value}),placeholder:a==="expense"?"Starbucks Coffee, Netflix...":a==="income"?"Salary, Freelance...":"John Doe",required:!0,className:"h-12 bg-black border-white/5 sq-md focus:border-white/10 text-slate-200 font-bold placeholder:text-slate-600 flex-1",autoComplete:"off"}),a==="debt"&&e.jsx(oe,{type:"button",variant:"ghost",onClick:W,className:"h-12 w-12 bg-white/5 border border-white/5 sq-md flex items-center justify-center p-0 text-slate-400 hover:text-white",title:"Select from Contacts",children:e.jsx(Nn,{className:"w-5 h-5"})})]}),h&&e.jsxs("div",{className:"mt-3 p-4 bg-indigo-500/5 border border-indigo-500/10 sq-md flex items-start gap-3 animate-in fade-in zoom-in-95 duration-300",children:[e.jsx(Ht,{className:"w-4 h-4 text-indigo-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-indigo-300 leading-tight",children:"Intelligence Suggested"}),e.jsxs("p",{className:"text-xs text-slate-400 mt-1 font-bold",children:[a==="expense"&&e.jsxs(e.Fragment,{children:["Category: ",e.jsx("span",{className:"text-slate-100 uppercase",children:h})]}),x.length>0&&e.jsxs(e.Fragment,{children:[" â€¢ Tags: ",e.jsx("span",{className:"text-slate-100",children:x.join(", ")})]})]}),e.jsx(oe,{type:"button",size:"sm",variant:"ghost",onClick:R,className:"mt-3 h-8 bg-indigo-500/10 text-indigo-300 hover:bg-indigo-500/20 sq-sm text-[10px] font-black uppercase tracking-widest w-full",children:"Auto-Configure Form"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"transaction-amount",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Capital Value"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ut,{id:"transaction-amount",name:"amount",value:o.amount,onChange:T=>l({...o,amount:T}),placeholder:"0.00",step:"any",min:"0",required:!0,className:"flex-1 h-14 bg-black border-white/5 sq-md focus:border-white/10 text-xl font-black text-slate-100 placeholder:text-slate-800",autoComplete:"off"}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(oe,{type:"button",variant:"ghost",size:"sm",onClick:()=>A(2),className:"px-3 h-[25px] bg-white/5 text-[10px] font-black text-slate-400 hover:text-white sq-sm border border-white/5",title:"Add 00",children:"+00"}),e.jsx(oe,{type:"button",variant:"ghost",size:"sm",onClick:()=>A(3),className:"px-3 h-[25px] bg-white/5 text-[10px] font-black text-slate-400 hover:text-white sq-sm border border-white/5",title:"Add 000",children:"+000"})]})]}),e.jsx("div",{className:"flex gap-2 mt-3",children:M.map(T=>e.jsx("button",{type:"button",onClick:()=>l({...o,amount:T.toString()}),className:"flex-1 py-2 text-[10px] font-black bg-black border border-white/5 text-slate-500 sq-md hover:bg-white/5 hover:text-slate-200 transition-all uppercase tracking-widest",children:T},T))}),u&&a==="expense"&&o.amount&&parseFloat(o.amount)>0&&(()=>{const T=parseFloat(o.amount),Y=T<100?Math.ceil(T/10)*10:Math.ceil(T/100)*100,K=Y-T;return K>0&&K>=1?e.jsxs("div",{className:"flex items-center space-x-3 mt-4 p-4 bg-indigo-500/5 border border-indigo-500/10 sq-md animate-in fade-in duration-500",children:[e.jsx(As,{id:"roundUp",name:"roundUp",className:"border-white/20 data-[state=checked]:bg-indigo-500 data-[state=checked]:border-indigo-500",onCheckedChange:se=>{l(ae=>({...ae,roundUpAmount:se?K:void 0}))}}),e.jsxs("div",{className:"grid gap-1.5 leading-none",children:[e.jsxs(ee,{htmlFor:"roundUp",className:"text-[10px] font-black uppercase tracking-widest text-slate-100 flex items-center gap-2 cursor-pointer",children:[e.jsx(xs,{className:"w-3 h-3 text-indigo-400"}),"Reserve ",fe(K,i)," to Goals"]}),e.jsxs("p",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-tighter",children:["Round up capital to nearest 100 (",fe(Y,i),")"]})]})]}):null})()]}),a==="expense"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"transaction-category",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Spending Domain"}),e.jsxs(Je,{value:o.category,onValueChange:T=>l({...o,category:T}),children:[e.jsx(Ze,{id:"transaction-category",name:"category",className:"h-12 bg-black border-white/5 sq-md focus:ring-1 focus:ring-white/10 text-slate-200 font-bold",children:e.jsx(Xe,{placeholder:"Select domain"})}),e.jsx(Qe,{className:"bg-black border-white/5 max-h-[300px]",children:jo.map(T=>e.jsxs(Ne,{value:T.value,className:"focus:bg-white/5 focus:text-white",children:[e.jsx("span",{className:"mr-2",children:T.emoji}),e.jsx("span",{className:"font-bold",children:T.value})]},T.value))})]})]}),(()=>{const T=d.find(Z=>Z.id===o.accountId);if(T?.type!=="credit_card"||a!=="expense")return null;const Y=T.creditLimit||0,K=Y*(T.safeLimitPercentage||30)/100,se=Math.abs(T.balance),ae=parseFloat(o.amount||"0"),je=se+ae>K&&Y>0;return e.jsxs("div",{className:"space-y-4 p-4 bg-black border border-white/5 sq-md animate-in slide-in-from-top-2 duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ee,{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Credit Protocol"}),je&&e.jsx(wa,{variant:"destructive",className:"bg-rose-500/10 text-rose-400 border-rose-500/20 text-[8px] font-black uppercase",children:"Limit Breach Risk"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(As,{id:"incomeGenerating",name:"isIncomeGenerating",checked:o.isIncomeGenerating,onCheckedChange:Z=>l(G=>({...G,isIncomeGenerating:!!Z}))}),e.jsx(ee,{htmlFor:"incomeGenerating",className:"text-xs font-bold text-slate-300 cursor-pointer",children:"This expense generates additional income"})]}),je&&!o.isIncomeGenerating&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(ee,{htmlFor:"justification",className:"text-[9px] font-black uppercase tracking-widest text-rose-400",children:"Security Justification Required"}),e.jsx(Ue,{id:"justification",name:"justification",placeholder:"Why is this credit use essential?",value:o.justification,onChange:Z=>l(G=>({...G,justification:Z.target.value})),className:"bg-white/5 border-rose-500/20 focus:border-rose-500/50 sq-md h-12 text-sm",required:je,autoComplete:"off"}),e.jsx("p",{className:"text-[8px] font-bold text-slate-500 uppercase leading-relaxed",children:"Strategic credit use is prohibited beyond the safe threshold unless it manifests capital growth."})]})]})})(),a==="debt"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(ee,{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Asset Direction"}),e.jsxs("div",{className:"flex gap-2 p-1.5 bg-black border border-white/5 sq-md",children:[e.jsx("button",{type:"button",onClick:()=>l({...o,debtType:"lent"}),className:`flex-1 py-3 px-4 sq-md text-[10px] font-black uppercase tracking-widest transition-all ${o.debtType==="lent"?"bg-emerald-600 text-white shadow-lg":"text-slate-500 hover:text-slate-200 hover:bg-white/5"} `,children:"I Lent Capital"}),e.jsx("button",{type:"button",onClick:()=>l({...o,debtType:"borrowed"}),className:`flex-1 py-3 px-4 sq-md text-[10px] font-black uppercase tracking-widest transition-all ${o.debtType==="borrowed"?"bg-rose-600 text-white shadow-lg":"text-slate-500 hover:text-slate-200 hover:bg-white/5"} `,children:"I Borrowed"})]})]}),a==="debt"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"debt-due-date",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Repayment Date (Optional)"}),e.jsx(Ue,{id:"debt-due-date",name:"debtDueDate",type:"date",value:o.debtDueDate,onChange:T=>l({...o,debtDueDate:T.target.value}),className:"h-12 bg-black border-white/5 sq-md focus:border-white/10 text-slate-200 font-bold"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"transaction-date",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Event Timestamp"}),e.jsx(Ue,{id:"transaction-date",name:"date",type:"date",value:o.date,onChange:T=>l({...o,date:T.target.value}),required:!0,className:"h-12 bg-black border-white/5 sq-md focus:border-white/10 text-slate-200 font-bold"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ee,{htmlFor:"transaction-tags",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Protocol Tags"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ue,{id:"transaction-tags",name:"tags",value:m,onChange:T=>D(T.target.value),onKeyPress:T=>T.key==="Enter"&&(T.preventDefault(),I()),placeholder:"urgent, recurring, etc...",autoComplete:"off",className:"h-12 bg-black border-white/5 sq-md focus:border-white/10 text-slate-200 font-bold placeholder:text-slate-800"}),e.jsx(oe,{type:"button",onClick:I,variant:"ghost",size:"sm",className:"h-12 px-6 bg-white/5 text-[10px] font-black uppercase tracking-widest text-slate-400 hover:text-white sq-md border border-white/5",children:"Index"})]}),o.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:o.tags.map(T=>e.jsxs(wa,{variant:"secondary",className:"gap-2 bg-black border border-white/5 text-slate-300 font-bold px-3 py-1 sq-sm",children:["#",T,e.jsx("button",{type:"button",onClick:()=>v(T),"aria-label":`Remove tag ${T}`,className:"hover:text-rose-400 transition-colors",children:e.jsx(bs,{className:"w-3 h-3"})})]},T))})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-black border border-white/5 sq-md group cursor-pointer",onClick:()=>l({...o,isRecurring:!o.isRecurring}),children:[e.jsx(As,{id:"recurring",name:"isRecurring",checked:o.isRecurring,onCheckedChange:T=>l({...o,isRecurring:!!T}),className:"border-white/20 data-[state=checked]:bg-indigo-500 data-[state=checked]:border-indigo-500"}),e.jsx(ee,{htmlFor:"recurring",className:"text-[10px] font-black uppercase tracking-widest text-slate-100 cursor-pointer",children:"Cyclical Routine Entry"})]}),o.isRecurring&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-in slide-in-from-top-2 duration-300",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"transaction-frequency",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Period"}),e.jsxs(Je,{value:o.frequency,onValueChange:T=>l({...o,frequency:T}),children:[e.jsx(Ze,{id:"transaction-frequency",name:"frequency",className:"bg-black border-white/5 h-12 sq-md text-slate-200 font-bold",children:e.jsx(Xe,{})}),e.jsxs(Qe,{className:"bg-black border-white/5",children:[e.jsx(Ne,{value:"daily",children:"Daily"}),e.jsx(Ne,{value:"weekly",children:"Weekly"}),e.jsx(Ne,{value:"monthly",children:"Monthly"}),e.jsx(Ne,{value:"yearly",children:"Yearly"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"transaction-end-date",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Termination"}),e.jsx(Ue,{id:"transaction-end-date",name:"endDate",type:"date",value:o.endDate,onChange:T=>l({...o,endDate:T.target.value}),className:"bg-black border-white/5 h-12 sq-md text-slate-200 font-bold"})]})]}),e.jsxs("div",{className:"flex gap-4 pt-6",children:[e.jsx(oe,{type:"button",variant:"ghost",onClick:j,className:"flex-1 h-14 sq-md text-[10px] font-black uppercase tracking-widest text-slate-500 hover:text-slate-100 hover:bg-white/5 border border-white/5",children:"Abort"}),e.jsx(oe,{type:"submit",className:`flex-1 h-14 sq-md text-[10px] font-black uppercase tracking-widest shadow-xl active:scale-[0.98] transition-all ${a==="expense"?"bg-rose-600 hover:bg-rose-500 shadow-rose-900/20":a==="income"?"bg-emerald-600 hover:bg-emerald-500 shadow-emerald-900/20":"bg-yellow-600 hover:bg-yellow-500 shadow-yellow-900/20"}`,disabled:d.length===0,children:r?"Update Matrix":"Record Transaction"})]})]})})]})})},ml=({isOpen:t,onClose:s,onConfirm:a,expenseAmount:n,roundedAmount:r,currency:d,goals:i,onMute:u})=>{const[o,l]=f.useState("emergency"),[m,c]=f.useState(""),h=r-n,w=()=>{if(o==="goal"&&i.length>0&&!m){L.error("Please select a goal to save into.");return}a(o==="goal"?m:"emergency",o)};return e.jsx(Rt,{open:t,onOpenChange:s,children:e.jsxs(Mt,{className:"sm:max-w-md max-h-[90vh] overflow-y-auto bg-slate-950 border-white/5 p-0 shadow-2xl custom-scrollbar",children:[e.jsxs("div",{className:"px-8 pt-10 pb-8 border-b border-white/5 relative overflow-hidden bg-emerald-500/5",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-emerald-500 blur-[80px] opacity-20 -mr-16 -mt-16"}),e.jsxs(Lt,{className:"relative z-10",children:[e.jsxs(Ot,{className:"flex items-center gap-3 text-2xl font-black tracking-tighter text-slate-100",children:[e.jsx(Yi,{className:"w-7 h-7 text-emerald-500"}),"Wealth Multiplier"]}),e.jsx(_t,{className:"text-slate-500 font-bold text-[10px] uppercase tracking-[0.2em] mt-1",children:"System detected idle capital in transaction"})]})]}),e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-sm font-bold text-slate-300 leading-relaxed text-center px-4",children:["Transaction of ",e.jsx("span",{className:"text-slate-100",children:fe(n,d)})," processed. Initialize round-up to ",e.jsx("span",{className:"text-emerald-400",children:fe(r,d)}),"?"]}),e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 bg-slate-900 border border-white/5 rounded-[32px] relative overflow-hidden group",children:[e.jsx("div",{className:"absolute inset-0 bg-emerald-500/5 opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-emerald-500 mb-1",children:"Leftover Cash"}),e.jsx("p",{className:"text-5xl font-black text-white tracking-tighter",children:fe(h,d)})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(ee,{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Asset Allocation Target"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{type:"button",onClick:()=>l("emergency"),className:`p-5 rounded-3xl border transition-all duration-300 flex flex-col items-center gap-3 ${o==="emergency"?"bg-emerald-600 border-emerald-500 text-white shadow-lg shadow-emerald-900/40":"bg-slate-900 border-white/5 text-slate-500 hover:text-slate-300 hover:bg-white/5"}`,children:[e.jsx(Ki,{className:`w-6 h-6 ${o==="emergency"?"text-white":"text-slate-500"}`}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Stability"})]}),e.jsxs("button",{type:"button",onClick:()=>{l("goal"),i.length>0&&!m&&c(i[0].id)},className:`p-5 rounded-3xl border transition-all duration-300 flex flex-col items-center gap-3 ${o==="goal"?"bg-indigo-600 border-indigo-500 text-white shadow-lg shadow-indigo-900/40":"bg-slate-900 border-white/5 text-slate-500 hover:text-slate-300 hover:bg-white/5"}`,children:[e.jsx(Ji,{className:`w-6 h-6 ${o==="goal"?"text-white":"text-slate-500"}`}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Growth"})]})]}),o==="goal"&&i.length>0&&e.jsx("div",{className:"mt-4 animate-in slide-in-from-top-2 duration-300",children:e.jsxs(Je,{value:m,onValueChange:c,children:[e.jsx(Ze,{id:"round-up-goal-select",name:"goalId",className:"h-12 bg-slate-900 border-white/5 rounded-2xl text-slate-200 font-bold focus:ring-1 focus:ring-white/10",children:e.jsx(Xe,{placeholder:"Select Growth Target"})}),e.jsx(Qe,{className:"bg-slate-900 border-white/5",children:i.map(x=>e.jsxs(Ne,{value:x.id,className:"focus:bg-white/5 focus:text-white font-bold",children:[x.emoji," ",x.name]},x.id))})]})}),o==="goal"&&i.length===0&&e.jsx("div",{className:"p-4 bg-amber-500/10 border border-amber-500/20 rounded-2xl text-[10px] font-black uppercase tracking-widest text-amber-400 text-center",children:"No active targets. Defaulting to General Reservoirs."})]}),e.jsxs("div",{className:"pt-2 space-y-4",children:[e.jsx(oe,{onClick:w,className:"w-full text-[10px] font-black uppercase tracking-widest h-14 bg-emerald-600 hover:bg-emerald-500 text-white rounded-2xl shadow-xl shadow-emerald-900/20 active:scale-[0.98] transition-all",children:"Initialize Savings Event"}),e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx(oe,{variant:"ghost",size:"sm",onClick:s,className:"h-10 px-6 rounded-xl text-[10px] font-black uppercase tracking-widest text-slate-500 hover:text-slate-300 hover:bg-white/5 border border-white/5",children:"Abort"}),e.jsx("div",{className:"flex-1",children:e.jsxs(Je,{onValueChange:x=>u(x),children:[e.jsx(Ze,{id:"mute-duration",name:"muteDuration",className:"h-10 bg-transparent border border-white/5 hover:bg-white/5 rounded-xl text-[9px] font-black uppercase tracking-widest text-slate-500 justify-center gap-2 px-4 focus:ring-0",children:e.jsx(Xe,{placeholder:"Protocol Mute"})}),e.jsxs(Qe,{align:"end",className:"bg-slate-900 border-white/5",children:[e.jsx(Ne,{value:"today",className:"text-[10px] font-bold py-2",children:"Mute 24h"}),e.jsx(Ne,{value:"week",className:"text-[10px] font-bold py-2",children:"Mute 7d"}),e.jsx(Ne,{value:"month",className:"text-[10px] font-bold py-2",children:"Mute 30d"})]})]})})]})]})]})]})})};var hl=(t,s,a,n,r,d,i,u)=>{let o=document.documentElement,l=["light","dark"];function m(w){(Array.isArray(t)?t:[t]).forEach(x=>{let S=x==="class",k=S&&d?r.map(j=>d[j]||j):r;S?(o.classList.remove(...k),o.classList.add(d&&d[w]?d[w]:w)):o.setAttribute(x,w)}),c(w)}function c(w){u&&l.includes(w)&&(o.style.colorScheme=w)}function h(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(n)m(n);else try{let w=localStorage.getItem(s)||a,x=i&&w==="system"?h():w;m(x)}catch{}},ja=["light","dark"],zn="(prefers-color-scheme: dark)",pl=typeof window>"u",aa=f.createContext(void 0),fl={setTheme:t=>{},themes:[]},gl=()=>{var t;return(t=f.useContext(aa))!=null?t:fl},xl=t=>f.useContext(aa)?f.createElement(f.Fragment,null,t.children):f.createElement(yl,{...t}),bl=["light","dark"],yl=({forcedTheme:t,disableTransitionOnChange:s=!1,enableSystem:a=!0,enableColorScheme:n=!0,storageKey:r="theme",themes:d=bl,defaultTheme:i=a?"system":"light",attribute:u="data-theme",value:o,children:l,nonce:m,scriptProps:c})=>{let[h,w]=f.useState(()=>wl(r,i)),[x,S]=f.useState(()=>h==="system"?Es():h),k=o?Object.values(o):d,j=f.useCallback(R=>{let W=R;if(!W)return;R==="system"&&a&&(W=Es());let M=o?o[W]:W,A=s?jl(m):null,T=document.documentElement,Y=K=>{K==="class"?(T.classList.remove(...k),M&&T.classList.add(M)):K.startsWith("data-")&&(M?T.setAttribute(K,M):T.removeAttribute(K))};if(Array.isArray(u)?u.forEach(Y):Y(u),n){let K=ja.includes(i)?i:null,se=ja.includes(W)?W:K;T.style.colorScheme=se}A?.()},[m]),I=f.useCallback(R=>{let W=typeof R=="function"?R(h):R;w(W);try{localStorage.setItem(r,W)}catch{}},[h]),D=f.useCallback(R=>{let W=Es(R);S(W),h==="system"&&a&&!t&&j("system")},[h,t]);f.useEffect(()=>{let R=window.matchMedia(zn);return R.addListener(D),D(R),()=>R.removeListener(D)},[D]),f.useEffect(()=>{let R=W=>{W.key===r&&(W.newValue?w(W.newValue):I(i))};return window.addEventListener("storage",R),()=>window.removeEventListener("storage",R)},[I]),f.useEffect(()=>{j(t??h)},[t,h]);let v=f.useMemo(()=>({theme:h,setTheme:I,forcedTheme:t,resolvedTheme:h==="system"?x:h,themes:a?[...d,"system"]:d,systemTheme:a?x:void 0}),[h,I,t,x,a,d]);return f.createElement(aa.Provider,{value:v},f.createElement(vl,{forcedTheme:t,storageKey:r,attribute:u,enableSystem:a,enableColorScheme:n,defaultTheme:i,value:o,themes:d,nonce:m,scriptProps:c}),l)},vl=f.memo(({forcedTheme:t,storageKey:s,attribute:a,enableSystem:n,enableColorScheme:r,defaultTheme:d,value:i,themes:u,nonce:o,scriptProps:l})=>{let m=JSON.stringify([a,s,d,t,u,i,n,r]).slice(1,-1);return f.createElement("script",{...l,suppressHydrationWarning:!0,nonce:typeof window>"u"?o:"",dangerouslySetInnerHTML:{__html:`(${hl.toString()})(${m})`}})}),wl=(t,s)=>{if(pl)return;let a;try{a=localStorage.getItem(t)||void 0}catch{}return a||s},jl=t=>{let s=document.createElement("style");return t&&s.setAttribute("nonce",t),s.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(s),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(s)},1)}},Es=t=>(t||(t=window.matchMedia(zn)),t.matches?"dark":"light");function qn({...t}){return e.jsx(fn,{"data-slot":"sheet",...t})}function Nl({...t}){return e.jsx(vn,{"data-slot":"sheet-portal",...t})}const Gn=f.forwardRef(({className:t,...s},a)=>e.jsx(pn,{ref:a,"data-slot":"sheet-overlay",className:ge("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-[200] bg-black/50",t),...s}));Gn.displayName="SheetOverlay";function Hn({className:t,children:s,side:a="right",...n}){return e.jsxs(Nl,{children:[e.jsx(gn,{asChild:!0,children:e.jsx(Gn,{})}),e.jsx(xn,{"data-slot":"sheet-content",className:ge("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-[200] flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-200 data-[state=open]:duration-300",a==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",a==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",a==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",a==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...n,children:s})]})}function Wn({className:t,...s}){return e.jsx(bn,{"data-slot":"sheet-title",className:ge("text-foreground font-semibold",t),...s})}function Yn({className:t,...s}){return e.jsx(yn,{"data-slot":"sheet-description",className:ge("text-muted-foreground text-sm",t),...s})}function kl({...t}){return e.jsx(Xi,{"data-slot":"collapsible",...t})}function Sl({...t}){return e.jsx(Zi,{"data-slot":"collapsible-trigger",...t})}function Cl({...t}){return e.jsx(Qi,{"data-slot":"collapsible-content",...t})}function Al({className:t,orientation:s="horizontal",decorative:a=!0,...n}){return e.jsx(er,{"data-slot":"separator-root",decorative:a,orientation:s,className:ge("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...n})}function El({...t}){return e.jsx(tr,{"data-slot":"alert-dialog",...t})}function Tl({...t}){return e.jsx(sr,{"data-slot":"alert-dialog-trigger",...t})}function Dl({...t}){return e.jsx(lr,{"data-slot":"alert-dialog-portal",...t})}function Il({className:t,...s}){return e.jsx(cr,{"data-slot":"alert-dialog-overlay",className:ge("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function Pl({className:t,...s}){return e.jsxs(Dl,{children:[e.jsx(Il,{}),e.jsx(ar,{"data-slot":"alert-dialog-content",className:ge("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...s})]})}function Rl({className:t,...s}){return e.jsx("div",{"data-slot":"alert-dialog-header",className:ge("flex flex-col gap-2 text-center sm:text-left",t),...s})}function Ml({className:t,...s}){return e.jsx("div",{"data-slot":"alert-dialog-footer",className:ge("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...s})}function Ll({className:t,...s}){return e.jsx(nr,{"data-slot":"alert-dialog-title",className:ge("text-lg font-semibold",t),...s})}function Ol({className:t,...s}){return e.jsx(ir,{"data-slot":"alert-dialog-description",className:ge("text-muted-foreground text-sm",t),...s})}function _l({className:t,...s}){return e.jsx(or,{className:ge(Qs(),t),...s})}function Fl({className:t,...s}){return e.jsx(rr,{className:ge(Qs({variant:"outline"}),t),...s})}const $l=t=>{const s=new Map;return t.forEach(a=>{const n=s.get(a.category)||0;s.set(a.category,n+a.amount)}),Array.from(s.entries()).map(([a,n])=>({category:a,amount:n})).sort((a,n)=>n.amount-a.amount).slice(0,5)},Bl=t=>{const s=t.expenses,a=t.incomes,n=t.totalIncome,r=a.some(j=>j.isRecurring)?"salary":"fluctuating",d=["Bills & Utilities","EMI","Rent","Education","Insurance"],i=s.filter(j=>d.includes(j.category)||j.isRecurring).reduce((j,I)=>j+I.amount,0),u=t.totalExpenses-i,o=n>0?((n-t.totalExpenses)/n*100).toFixed(0)+"%":"0%",l=s.filter(j=>j.category==="EMI"||j.category==="Debt").reduce((j,I)=>j+I.amount,0),m=n>0?(l/n*100).toFixed(1)+"%":"0%",c=(t.healthScore/10).toFixed(1),h=$l(s).slice(0,3),w=s.filter(j=>j.category==="Subscription").reduce((j,I)=>j+I.amount,0),x=new Map;[...s,...a].forEach(j=>{j.tags?.forEach(I=>{const D=x.get(I)||0;x.set(I,D+1)})});const S=Array.from(x.entries()).sort((j,I)=>I[1]-j[1]).slice(0,5).map(([j])=>j),k={user_profile:{monthly_income:n,income_type:r,emergency_fund_months:c},current_month_stats:{total_expenses:t.totalExpenses,fixed_expenses:i,variable_expenses:u,top_category:h[0]?.category||"None",savings_rate:o},liabilities:{total_debt:t.activeDebts>0?"Present":"None",monthly_debt_payment:l,debt_ratio:m},behavioral:{top_3_categories:h.map(j=>j.category),subscription_burden:w,frequent_tags:S},portfolio_analysis:{aggregation_rule:"Source Independence (Calculated on 'investment' accounts only)",growth_formula:"((Sum Current Values / Sum Principals) - 1) * 100",total_investments:t.investments.length,linked_nodes:t.investments.filter(j=>j.accountId).length,rule_based_metrics:{total_principal:t.investments.filter(j=>t.accounts.find(D=>D.id===j.accountId)?.type==="investment").reduce((j,I)=>j+I.buyPrice*I.quantity,0),current_market_value:t.investments.filter(j=>t.accounts.find(D=>D.id===j.accountId)?.type==="investment").reduce((j,I)=>j+(I.currentPrice||0)*I.quantity,0)}}};return JSON.stringify(k,null,2)},Vl=(t,s,a)=>{const r=`Context: "The user is looking at the ${a==="dashboard"?"Balance Board":a==="investments"?"Investment":a==="liability"?"Liability":a==="goals"?"Goal":"Financial"} Stack."`,d=t.accounts.reduce((h,w)=>h+(w.balance||0),0),i=t.investments.reduce((h,w)=>h+(w.currentPrice||w.buyPrice)*w.quantity,0),u=d+i,o=h=>new Intl.NumberFormat(s==="INR"?"en-IN":"en-US",{style:"currency",currency:s,maximumFractionDigits:0}).format(h),l=t.healthScore>70?"5%":t.healthScore>50?"2%":"stable",m=`Insight: "Net worth is ${o(u)}, showing a ${l} growth trend."`;let c="";return t.investments.length>0&&a!=="investments"?c=`Action: "Suggest a 2x2 Grid update for the 'Investment' category."`:t.activeDebts>0?c='Action: "Propose a tactical recovery plan for pending liabilities."':t.savingsRate<.2?c='Action: "Suggest optimizing the spending body to increase savings velocity."':c='Action: "Maintain current protocol and monitor the Wealth Builder Stack."',`${r}

${m}

${c}`},Ul=t=>Bl(t),zl={ANALYST:`You are an elite Financial Health Advisor.
Analyze the provided user data which is presented in a structured JSON format. 
Your goal is to:
1. Identify the single biggest risk to the user's financial health.
2. Provide one actionable 'Smart Suggestion' to improve their savings rate by 5% this month.
- Be direct, professional, and data-driven.
- Do not mention the user's name or specific account details.
- Use the structured vital signs (Savings Rate, DTI, etc.) for your analysis.`,MOTIVATOR:`You are a Wise Financial Coach.
Your goal is to provide a single, short, impactful quote or advice snippet based on the user's financial mood.
- If financial health is low: Provide hope, discipline, and "small steps" advice.
- If financial health is high: Provide advice on legacy, giving, or wisdom.
- Maximum 2 sentences.
- Tone: Stoic, encouraging, profound.`,ASSISTANT:`You are FinHub's AI Assistant.
You help users navigate the app and understand their finances.
- Be friendly and emoji-aware (ðŸ’°, ðŸ“ˆ).
- Explain financial terms simply.
- If asked about specific app features, explain them.`},ql="https://api.openai.com/v1/chat/completions",Gl="https://api.anthropic.com/v1/messages",Hl="https://generativelanguage.googleapis.com/v1/models/gemini-2.0-flash:generateContent",Wl="https://api.deepseek.com/chat/completions",Yl="https://api.perplexity.ai/chat/completions",Kl=(t,s)=>{let a=t.message||"Failed to generate response.";if(a.toLowerCase().includes("failed to fetch")&&(a="Network Error: Possible CORS blockage. Most AI providers (OpenAI, DeepSeek, etc.) do not allow direct browser calls. Use Gemini or verify your environment."),s){const n=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),r=new RegExp(n,"g");a=a.replace(r,"***REDACTED***")}return a=a.replace(/key=[a-zA-Z0-9_-]+/g,"key=***REDACTED***"),a=a.trim(),a},Kn=async(t,s,a,n="ASSISTANT")=>{if(!s)return{text:"",error:"API key is missing. Please configure it in Settings."};const r=zl[n];try{switch(t){case"openai":return await Jl(s,a,r);case"anthropic":return await Xl(s,a,r);case"gemini":return await Zl(s,a,r);case"deepseek":return await Ql(s,a,r);case"perplexity":return await ec(s,a,r);default:return{text:"",error:"Unsupported provider."}}}catch(d){const i=Kl(d,s);return console.error("AI Service Error (Scrubbed):",i),{text:"",error:i}}},Jl=async(t,s,a)=>{const n=await fetch(ql,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"system",content:a},{role:"user",content:s}],temperature:.7})}),r=await n.json();if(!n.ok)throw new Error(r.error?.message||"OpenAI API Error");return{text:r.choices[0].message.content}},Xl=async(t,s,a)=>{const n=await fetch(Gl,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":t,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:"claude-3-haiku-20240307",system:a,messages:[{role:"user",content:s}],max_tokens:1024})}),r=await n.json();if(!n.ok)throw new Error(r.error?.message||"Anthropic API Error");return{text:r.content[0].text}},Zl=async(t,s,a)=>{const n=`${Hl}?key=${t}`,r=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:`${a}

User Question: ${s}`}]}]})}),d=await r.json();if(!r.ok)throw new Error(d.error?.message||`Gemini Error ${r.status}: ${r.statusText}`);if(!d.candidates?.[0]?.content?.parts?.[0]?.text)throw new Error("Gemini returned an empty response. Check safety filters or prompt.");return{text:d.candidates[0].content.parts[0].text}},Ql=async(t,s,a)=>{const n=await fetch(Wl,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:"deepseek-chat",messages:[{role:"system",content:a},{role:"user",content:s}],temperature:.7})}),r=await n.json();if(!n.ok)throw new Error(r.error?.message||"DeepSeek API Error");return{text:r.choices[0].message.content}},ec=async(t,s,a)=>{const n=await fetch(Yl,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:"sonar-small-online",messages:[{role:"system",content:a},{role:"user",content:s}]})}),r=await n.json();if(!n.ok)throw new Error(r.error?.message||"Perplexity API Error");return{text:r.choices[0].message.content}},tc={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Zt=(t,s)=>{const a=s.apiKeys?.[t];if(a&&a.trim()!=="")return a;const n=`VITE_${t.toUpperCase()}_API_KEY`,r=tc[n];return r&&r.trim()!==""?r:null},sc=async({userPrompt:t,context:s,settings:a,persona:n="ASSISTANT",provider:r})=>{const d=r||nc(a);if(!d)return{text:"",error:"No AI Provider configured. Please add an API Key in Settings."};const i=Zt(d,a);if(!i)return{text:"",error:`Missing API Key for ${d}. Please check Settings or ENV.`};const u=Ul(s),o=s.brainSummary?`
IMPORTANT LOCAL CONTEXT:
${s.brainSummary}
`:"",l=`
${u}
${o}
User Query: ${t}
  `.trim();return await Kn(d,i,l,n)},ac=async(t,s)=>await Kn(t,s,"Respond with only the word 'OK' to verify connectivity.","ASSISTANT"),nc=t=>{if(t.aiProvider&&Zt(t.aiProvider,t))return t.aiProvider;const s=["openai","anthropic","gemini","deepseek","perplexity"];for(const a of s)if(Zt(a,t))return a;return null},Na={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},ic=({isOpen:t,onClose:s,settings:a,onUpdateSettings:n,onAchievementClick:r})=>{const[d,i]=f.useState(a.name||""),[u,o]=f.useState(a.photoURL||""),[l,m]=f.useState(!1),{logout:c,scheduleAccountDeletion:h}=ys(),[w,x]=f.useState(!1),[S,k]=f.useState("USD"),[j,I]=f.useState("100"),[D,v]=f.useState(null),[R,W]=f.useState({}),M=["INR","USD","EUR","GBP","AED","SAR"],A=a.currency;f.useEffect(()=>{i(a.name||""),o(a.photoURL||"")},[a]),f.useEffect(()=>{t&&T()},[t,S]);const T=async()=>{try{const O=await(await fetch(`https://api.exchangerate-api.com/v4/latest/${S}`)).json();W(O.rates||{}),j&&Y(j,O.rates)}catch(E){console.error("Error loading exchange rates:",E)}},Y=(E,O)=>{const B=parseFloat(E);if(!isNaN(B)&&B>0){const te=(O||R)[A]||1;v(B*te)}else v(null)},K=E=>{I(E),Y(E)},{setTheme:se}=gl();f.useEffect(()=>{a.theme!=="dark"&&(se("dark"),n({theme:"dark"}))},[]);const ae=()=>{n({name:d,photoURL:u}),m(!1)},Me=E=>{const O=E.target.files?.[0];if(O){const B=new FileReader;B.onloadend=()=>{o(B.result)},B.readAsDataURL(O)}},je=Qo(),Z=new Set(a.unlockedAchievements),G=a.aiProvider||"openai",me=[{id:"openai",label:"OpenAI",placeholder:"sk-..."},{id:"anthropic",label:"Anthropic",placeholder:"sk-ant-..."},{id:"gemini",label:"Gemini",placeholder:"AIza..."},{id:"deepseek",label:"Deepseek",placeholder:"sk-..."},{id:"perplexity",label:"Perplexity",placeholder:"pplx-..."}],[Ae,N]=f.useState(!1),[g,z]=f.useState(null),_=f.useCallback((E,O)=>{n({[E]:O})},[n]),H=async()=>{const E=Zt(G,a);if(!E){L.error("No API key found in Settings or System Environment");return}N(!0),z(null);try{const O=await ac(G,E);O.error?(z({success:!1,message:O.error}),L.error(`Connection failed: ${O.error}`)):(z({success:!0,message:"Neural link established."}),L.success("Connection successful!"))}catch(O){const B=O.message||"Unknown protocol error";z({success:!1,message:B}),L.error(`Protocol breach: ${B}`)}finally{N(!1)}};return e.jsx(qn,{open:t,onOpenChange:s,children:e.jsxs(Hn,{side:"left",className:"w-full sm:max-w-lg overflow-y-auto px-0 bg-slate-950 border-white/5 text-slate-100 h-dvh",children:[e.jsx(Wn,{className:"sr-only",children:"Settings"}),e.jsx(Yn,{className:"sr-only",children:"Customize your FinHub core experience."}),e.jsxs("div",{className:"space-y-12 animate-in fade-in slide-in-from-left-4 duration-500 px-8 pt-12 pb-10 text-white relative",children:[e.jsx("div",{className:"absolute top-4 right-4 z-20",children:e.jsx(oe,{variant:"ghost",size:"icon",onClick:s,className:"w-10 h-10 rounded-full bg-white/5 text-slate-400 hover:text-white hover:bg-white/10",children:e.jsx(bs,{className:"w-5 h-5"})})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-1.5 h-8 bg-indigo-500 rounded-full shadow-[0_0_15px_rgba(99,102,241,0.5)]"}),e.jsx("h2",{className:"text-3xl font-black text-slate-100 tracking-tight leading-none text-white",children:"System Config"})]}),e.jsx("p",{className:"text-slate-500 font-bold ml-4 text-sm",children:"Customize your FinHub core experience."})]}),e.jsxs("div",{className:"space-y-10",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2",children:[e.jsx(Fs,{className:"w-3.5 h-3.5"}),"User Identity"]}),e.jsx(oe,{variant:"ghost",size:"sm",onClick:()=>m(!l),className:"text-[10px] font-black uppercase tracking-widest text-indigo-400 hover:text-indigo-300 hover:bg-white/5",children:l?"Abort":"Refine"})]}),e.jsxs("div",{className:"flex items-center gap-8 bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-indigo-500 blur-3xl opacity-5 -mr-12 -mt-12"}),e.jsxs("div",{className:"relative",children:[u?e.jsx("img",{src:u,alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-4 border-slate-800 shadow-2xl"}):e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-indigo-600 to-purple-700 rounded-full flex items-center justify-center shadow-2xl",children:e.jsx(Fs,{className:"w-12 h-12 text-white/90"})}),l&&e.jsxs("label",{className:"absolute bottom-0 right-0 w-9 h-9 bg-indigo-600 rounded-full flex items-center justify-center cursor-pointer hover:bg-indigo-500 shadow-lg border-4 border-slate-900 transition-transform active:scale-90",children:[e.jsx(dr,{className:"w-4 h-4 text-white"}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Me,"aria-label":"Upload profile picture"})]})]}),e.jsx("div",{className:"flex-1 min-w-0",children:l?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(ee,{htmlFor:"settings-profile-name",className:"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Alias"}),e.jsx(Ue,{id:"settings-profile-name",name:"name",placeholder:"e.g. Maverick",value:d,onChange:E=>i(E.target.value),className:"bg-white/5 border-white/5 rounded-xl h-12 text-white placeholder:text-slate-700 font-bold",autoComplete:"name"})]}),e.jsx(oe,{size:"sm",onClick:ae,className:"w-full h-12 bg-indigo-600 hover:bg-indigo-500 text-white font-black rounded-xl",children:"Commit Identity"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"text-2xl font-black text-slate-100 tracking-tight",children:d||"Guest User"}),e.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-widest mt-1",children:"FinHub Node // 0x50.3"})]})})]})]}),e.jsx("div",{className:"h-px bg-white/5"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("button",{onClick:()=>n({roundUpEnabled:!a.roundUpEnabled}),className:`w-full flex items-center justify-between p-6 rounded-[32px] border transition-all relative overflow-hidden group ${a.roundUpEnabled?"bg-emerald-500/10 border-emerald-500/50 shadow-[0_0_20px_rgba(16,185,129,0.1)]":"bg-slate-900/40 border-white/5 grayscale opacity-60 hover:opacity-100 hover:grayscale-0"}`,children:[e.jsx("div",{className:`absolute top-0 right-0 w-24 h-24 blur-3xl opacity-10 -mr-12 -mt-12 transition-colors ${a.roundUpEnabled?"bg-emerald-500":"bg-slate-500"}`}),e.jsxs("div",{className:"space-y-1 relative z-10 flex-1 pr-4 text-left",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-black text-slate-100 uppercase tracking-tight",children:[e.jsx(xs,{className:`w-4 h-4 ${a.roundUpEnabled?"text-emerald-500":"text-slate-500"}`}),"Virtual Round-Ups"]}),e.jsx("p",{className:"text-[10px] text-slate-500 font-bold leading-relaxed uppercase tracking-widest",children:"Build your fortress automatically via expense spillover."})]}),e.jsx("div",{className:`relative z-10 px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${a.roundUpEnabled?"bg-emerald-500 text-white shadow-lg shadow-emerald-500/20":"bg-slate-800 text-slate-500"}`,children:a.roundUpEnabled?"Active":"Offline"})]})}),e.jsx("div",{className:"h-px bg-white/5"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(ee,{htmlFor:"settings-currency",className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2",children:[e.jsx(ca,{className:"w-3.5 h-3.5"}),"Standard Denomination"]}),e.jsxs("div",{className:"bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-indigo-500 blur-3xl opacity-5 -mr-12 -mt-12"}),e.jsx("div",{className:"space-y-2 relative z-10",children:e.jsxs(Je,{value:a.currency,onValueChange:E=>n({currency:E}),children:[e.jsx(Ze,{id:"settings-currency",name:"currency",className:"bg-white/5 border-white/5 rounded-2xl h-14 font-black",children:e.jsx(Xe,{})}),e.jsxs(Qe,{className:"bg-slate-900 border-white/10 text-white",children:[e.jsx(Ne,{value:"USD",children:"USD ($) - US Dollar"}),e.jsx(Ne,{value:"EUR",children:"EUR (â‚¬) - Euro"}),e.jsx(Ne,{value:"GBP",children:"GBP (Â£) - British Pound"}),e.jsx(Ne,{value:"INR",children:"INR (â‚¹) - Indian Rupee"}),e.jsx(Ne,{value:"AED",children:"AED (Ø¯.Ø¥) - UAE Dirham"}),e.jsx(Ne,{value:"SAR",children:"SAR (ï·¼) - Saudi Riyal"})]})]})})]})]}),e.jsx("div",{className:"h-px bg-white/5"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(ee,{className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2",children:[e.jsx(ca,{className:"w-3.5 h-3.5"}),"Foreign Exchange Probe"]}),e.jsxs("div",{className:"space-y-6 p-6 bg-slate-900/40 rounded-[32px] border border-white/5 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-blue-500 blur-3xl opacity-5 -mr-12 -mt-12"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 relative z-10",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(ee,{htmlFor:"converter-from-currency",className:"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Source"}),e.jsxs(Je,{value:S,onValueChange:E=>{k(E)},children:[e.jsx(Ze,{id:"converter-from-currency",name:"fromCurrency",className:"bg-white/5 border-white/5 rounded-2xl h-12",children:e.jsx(Xe,{})}),e.jsx(Qe,{className:"bg-slate-900 border-white/10 text-white",children:M.map(E=>e.jsxs(Ne,{value:E,children:[wt[E]," ",E]},E))})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(ee,{className:"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Target"}),e.jsxs("div",{className:"h-12 flex items-center justify-center bg-indigo-500/10 rounded-2xl border border-indigo-500/20 text-xs font-black text-indigo-400",children:[wt[A]," ",A]})]})]}),e.jsxs("div",{className:"space-y-1.5 relative z-10",children:[e.jsx(ee,{htmlFor:"converter-amount",className:"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Capital Amount"}),e.jsx(Ue,{id:"converter-amount",name:"amount",type:"number",placeholder:"Enter amount",value:j,onChange:E=>{const O=E.target.value;parseFloat(O)<0||K(O)},min:"0",className:"bg-white/5 border-white/5 rounded-2xl h-14 font-black text-lg",autoComplete:"off"})]}),D!==null&&e.jsxs("div",{className:"p-6 bg-white/5 rounded-2xl border border-white/5 animate-in fade-in slide-in-from-top-2 relative z-10",children:[e.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest text-slate-500 mb-2",children:"Calculated Projection"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("p",{className:"text-2xl font-black text-emerald-400 tabular-nums",children:[wt[A],D.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("p",{className:"text-[10px] text-slate-600 font-bold uppercase tracking-widest",children:"ESTIMATED VALUATION"})]}),R[A]&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-white/5 flex items-center justify-between",children:[e.jsx("span",{className:"text-[8px] font-black uppercase tracking-[0.2em] text-slate-700",children:"Protocol Rate"}),e.jsxs("span",{className:"text-[10px] font-black text-slate-500 tabular-nums",children:["1 ",S," = ",R[A].toFixed(4)," ",A]})]})]})]})]}),e.jsx("div",{className:"h-px bg-white/5"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(ee,{className:"text-[10px] font-bold uppercase tracking-[0.2em] text-slate-500 flex items-center gap-2",children:[e.jsx(ur,{className:"w-3.5 h-3.5 text-indigo-400"}),"AI Assistant Config"]}),e.jsxs("div",{className:"space-y-6 bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden group",children:[e.jsxs("div",{className:"space-y-1.5 relative z-10",children:[e.jsx(ee,{htmlFor:"ai-provider-select",className:"text-[9px] font-bold uppercase tracking-widest text-slate-500 ml-1",children:"Preferred Provider"}),e.jsxs(Je,{value:G,onValueChange:E=>n({aiProvider:E}),children:[e.jsx(Ze,{id:"ai-provider-select",name:"aiProvider",className:"bg-slate-900 border-white/5 rounded-xl h-11 text-[10px] font-bold uppercase tracking-widest",children:e.jsx(Xe,{})}),e.jsx(Qe,{className:"bg-slate-900 border-white/10 text-white",children:me.map(E=>e.jsx(Ne,{value:E.id,className:"text-[10px] font-bold uppercase tracking-widest",children:E.label},E.id))})]})]}),e.jsxs("div",{className:"space-y-4 pt-2 relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsx(ee,{className:"text-[9px] font-bold uppercase tracking-widest text-slate-500",children:"Active Credential"}),e.jsx("div",{className:"flex items-center gap-1.5",children:e.jsx("span",{className:"text-[8px] font-bold text-indigo-400/70 uppercase tracking-tighter",children:me.find(E=>E.id===G)?.label})})]}),me.filter(E=>E.id===G).map(E=>{const O=a.apiKeys?.[E.id],B=`VITE_${E.id.toUpperCase()}_API_KEY`,U=!!Na[B];return e.jsxs("div",{className:"flex items-center gap-3 bg-indigo-500/5 p-4 rounded-2xl border border-indigo-500/20 group/active transition-all",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"relative group/input",children:[e.jsx(Ue,{type:"password",value:O||"",onChange:te=>_("apiKeys",{...a.apiKeys,[E.id]:te.target.value}),placeholder:U?"Using System Environment Key":`Enter ${E.label} Key`,className:`bg-transparent border-none p-0 h-auto text-sm font-bold text-white placeholder:text-slate-700 focus-visible:ring-0 shadow-none ${U&&!O?"opacity-40 italic font-medium":""}`,disabled:U&&!O}),U&&!O&&e.jsx("div",{className:"flex items-center gap-1 mt-1",children:e.jsx("span",{className:"text-[7px] font-black text-emerald-500 uppercase tracking-widest bg-emerald-500/10 px-1 py-0.5 rounded",children:"System Linked"})})]})}),O&&e.jsx("button",{onClick:()=>_("apiKeys",{...a.apiKeys,[E.id]:""}),className:"text-slate-600 hover:text-rose-500 transition-colors p-1",title:"Clear saved key","aria-label":`Clear saved key for ${E.label}`,children:e.jsx(Jt,{className:"w-3.5 h-3.5"})})]},E.id)}),e.jsx(oe,{onClick:H,disabled:Ae||!Zt(G,a),className:`w-full h-11 transition-all font-bold uppercase tracking-[0.2em] text-[10px] rounded-xl ${g?.success?"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20":g?.success===!1?"bg-rose-500/10 text-rose-400 border border-rose-500/20":"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20"}`,children:Ae?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(mr,{className:"w-3.5 h-3.5 animate-spin"}),"Verifying..."]}):g?.success?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($s,{className:"w-3.5 h-3.5"}),"Link Stable"]}):"Validate Connection"})]}),e.jsxs(kl,{className:"relative z-10",children:[e.jsx(Sl,{asChild:!0,children:e.jsxs(oe,{variant:"ghost",className:"w-full h-8 hover:bg-white/5 text-slate-500 hover:text-slate-300 text-[8px] font-bold uppercase tracking-widest group/trigger flex items-center justify-between px-2 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(hr,{className:"w-3 h-3 text-slate-600 group-hover/trigger:text-slate-400"}),"Alternative Nodes"]}),e.jsx(fs,{className:"w-3 h-3 transition-transform duration-300 group-data-[state=open]/trigger:rotate-180"})]})}),e.jsx(Cl,{className:"pt-4 space-y-3 animate-in fade-in slide-in-from-top-2 duration-300",children:e.jsx("div",{className:"grid gap-2",children:me.filter(E=>E.id!==G).map(E=>{const O=a.apiKeys?.[E.id],B=`VITE_${E.id.toUpperCase()}_API_KEY`,U=!!Na[B];return e.jsxs("div",{className:"flex items-center gap-3 bg-slate-950/40 p-3 rounded-xl border border-white/5 hover:border-white/10 transition-colors",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-[8px] font-bold uppercase tracking-wider text-slate-500",children:E.label}),U&&!O&&e.jsx("span",{className:"text-[7px] font-bold text-emerald-500/50 uppercase tracking-tighter",children:"System"})]}),e.jsx(Ue,{type:"password",value:O||"",onChange:te=>_("apiKeys",{...a.apiKeys,[E.id]:te.target.value}),placeholder:U?"Using System Default":"Key not found",className:"bg-transparent border-none p-0 h-auto text-[10px] text-slate-400 placeholder:text-slate-800 focus-visible:ring-0 shadow-none italic font-medium cursor-not-allowed",disabled:U&&!O})]}),O&&e.jsx("button",{onClick:()=>_("apiKeys",{...a.apiKeys,[E.id]:""}),className:"text-slate-800 hover:text-rose-500 transition-colors p-1",title:"Clear saved key","aria-label":`Clear saved key for ${E.label}`,children:e.jsx(Jt,{className:"w-3 h-3"})})]},E.id)})})})]})]})]})]}),e.jsx("div",{className:"h-px bg-white/5"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(ee,{className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2",children:[e.jsx(pr,{className:"w-3.5 h-3.5 text-amber-500"}),"Reputation Rank (",a.unlockedAchievements.length,"/",je.length,")"]}),e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-3",children:je.map(E=>{const O=Z.has(E.id);return e.jsx("button",{onClick:()=>{O&&r&&r(E.id)},disabled:!O,className:`w-12 h-12 rounded-xl border flex items-center justify-center text-xl transition-all ${O?"border-amber-500/50 bg-amber-500/10 grayscale-0 hover:scale-110 hover:shadow-lg hover:shadow-amber-500/20 active:scale-95":"border-white/5 bg-white/5 grayscale opacity-20 cursor-not-allowed"}`,children:E.icon},E.id)})}),e.jsx("p",{className:"text-[10px] text-slate-500 font-bold text-center leading-relaxed",children:a.unlockedAchievements.length>0?"Select a sigil to view the record of your triumph.":"Initiate financial protocols to manifest higher ranks."})]}),e.jsx(Al,{className:"bg-white/5"}),e.jsxs("div",{className:"text-center pt-8 space-y-2 opacity-40 hover:opacity-100 transition-opacity duration-700 pb-10",children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.5em] text-slate-100",children:"Obsidian System Node"}),e.jsx("p",{className:"text-[8px] font-bold text-slate-500 uppercase tracking-widest",children:"Architect: Sijo Joseph // BUILD 50.3.0 // QUANTUM CORE"}),e.jsx("p",{className:"text-[8px] font-bold text-slate-700 uppercase tracking-widest mt-4",children:"Â© 2025 NEURAL FINBASE FABRIC"})]}),e.jsxs("div",{className:"px-2 pb-10",children:[e.jsxs(oe,{variant:"outline",onClick:()=>{c(),s()},className:"w-full h-14 bg-white/5 hover:bg-white/10 border-white/10 hover:border-white/20 text-white/60 hover:text-white font-black uppercase tracking-widest gap-3 rounded-[24px] transition-all group mb-4",children:[e.jsx(fr,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform"}),"Terminate Session"]}),e.jsxs(El,{open:w,onOpenChange:x,children:[e.jsx(Tl,{asChild:!0,children:e.jsxs(oe,{variant:"outline",className:"w-full h-14 bg-rose-500/5 hover:bg-rose-500/10 border-rose-500/20 hover:border-rose-500/40 text-rose-500 font-black uppercase tracking-widest gap-3 rounded-[24px] transition-all group",children:[e.jsx(da,{className:"w-5 h-5 group-hover:scale-110 transition-transform"}),"Delete Account & Data"]})}),e.jsxs(Pl,{className:"bg-slate-950 border-white/10 text-white rounded-[32px] p-8",children:[e.jsxs(Rl,{children:[e.jsxs(Ll,{className:"text-2xl font-black tracking-tight flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-full bg-rose-500/20 text-rose-500",children:e.jsx(da,{className:"w-6 h-6"})}),"Irreversible Action?"]}),e.jsxs(Ol,{className:"text-slate-400 font-medium leading-relaxed mt-4",children:["Your account will be ",e.jsx("span",{className:"text-white font-bold italic",children:"deactivated immediately"})," and scheduled for permanent deletion in ",e.jsx("span",{className:"text-white font-bold",children:"30 days"}),".",e.jsx("br",{}),e.jsx("br",{}),"Log in anytime before then to cancel this request and restore your data node."]})]}),e.jsxs(Ml,{className:"mt-8 gap-3",children:[e.jsx(Fl,{className:"h-14 flex-1 rounded-2xl bg-white/5 border-white/10 text-slate-400 hover:bg-white/10 hover:text-white font-black uppercase tracking-widest transition-all",children:"Abort"}),e.jsx(_l,{onClick:async()=>{await h(),s()},className:"h-14 flex-1 rounded-2xl bg-rose-600 hover:bg-rose-500 text-white font-black uppercase tracking-widest shadow-lg shadow-rose-500/20 transition-all active:scale-95",children:"Confirm Purge"})]})]})]})]})]})]})})};function rc({onNavigate:t,onOpenSettings:s,onOpenNotifications:a,emergencyFundAmount:n,bankAccountsCount:r,cardsCount:d,currency:i}){return e.jsxs("div",{className:"space-y-12 animate-in fade-in slide-in-from-bottom-4 duration-700 px-4 pb-20",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-slate-100 tracking-tight leading-none mb-3",children:"Settings & Assets"}),e.jsx("p",{className:"text-slate-500 font-bold max-w-md",children:"Configure your financial universe and manage core system components."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs(Ke,{className:"p-8 cursor-pointer bg-black border-white/5 sq-2xl border hover:bg-white/5 transition-all duration-300 group relative overflow-hidden",onClick:()=>t("emergency"),children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-blue-500 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-500/10 border border-blue-500/20 sq-md flex items-center justify-center text-blue-400 mb-8 group-hover:scale-110 transition-transform duration-500",children:e.jsx(Js,{className:"w-8 h-8"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-black text-slate-100",children:"Emergency Fund"}),e.jsx("p",{className:"text-2xl font-black tabular-nums text-blue-400",children:fe(n,i)})]}),e.jsxs("div",{className:"mt-8 flex items-center justify-between text-slate-500",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Financial Safety Net"}),e.jsx(Tt,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})]})]}),e.jsxs(Ke,{className:"p-8 cursor-pointer bg-black border-white/5 sq-2xl border hover:bg-white/5 transition-all duration-300 group relative overflow-hidden",onClick:()=>t("accounts"),children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-emerald-500 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"w-16 h-16 bg-emerald-500/10 border border-emerald-500/20 sq-md flex items-center justify-center text-emerald-400 mb-8 group-hover:scale-110 transition-transform duration-500",children:e.jsx(jn,{className:"w-8 h-8"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-black text-slate-100",children:"Accounts & Cards"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("p",{className:"text-2xl font-black tabular-nums text-emerald-400",children:r}),e.jsx("p",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-wider",children:"Banks"})]}),e.jsx("div",{className:"w-px h-8 bg-white/5 self-center mt-2"}),e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("p",{className:"text-2xl font-black tabular-nums text-emerald-400",children:d}),e.jsx("p",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-wider",children:"Cards"})]})]})]}),e.jsxs("div",{className:"mt-8 flex items-center justify-between text-slate-500",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Manage Liquidity"}),e.jsx(Tt,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})]})]}),e.jsxs(Ke,{className:"p-8 cursor-pointer bg-black border-white/5 sq-2xl border hover:bg-white/5 transition-all duration-300 group relative overflow-hidden",onClick:()=>t("recurring"),children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-indigo-500 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"w-16 h-16 bg-indigo-500/10 border border-indigo-500/20 sq-md flex items-center justify-center text-indigo-400 mb-8 group-hover:scale-110 transition-transform duration-500",children:e.jsx(gs,{className:"w-8 h-8"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-black text-slate-100",children:"Recurring Flow"}),e.jsx("p",{className:"text-sm font-bold text-slate-400 uppercase tracking-tight",children:"Subscriptions & EMIs"})]}),e.jsxs("div",{className:"mt-11 flex items-center justify-between text-slate-500",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Active Commitments"}),e.jsx(Tt,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})]})]})]}),e.jsxs("div",{className:"pt-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"w-1.5 h-6 bg-slate-700 rounded-full"}),e.jsx("h3",{className:"text-xs font-black uppercase tracking-[0.3em] text-slate-600",children:"System Configuration"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(Ke,{className:"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group",onClick:s,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400 group-hover:text-white transition-colors",children:e.jsx(gr,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-black text-slate-200 uppercase tracking-tight",children:"App Settings"}),e.jsx("p",{className:"text-[10px] text-slate-600 font-bold",children:"Preferences & Display"})]})]}),e.jsx(Tt,{className:"w-5 h-5 text-slate-700 group-hover:text-slate-400 transition-colors"})]})}),e.jsx(Ke,{className:"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group",onClick:a,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400 group-hover:text-white transition-colors",children:e.jsx(Ks,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-black text-slate-200 uppercase tracking-tight",children:"Alert Center"}),e.jsx("p",{className:"text-[10px] text-slate-600 font-bold",children:"System Notifications"})]})]}),e.jsx(Tt,{className:"w-5 h-5 text-slate-700 group-hover:text-slate-400 transition-colors"})]})}),e.jsx(Ke,{className:"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group opacity-60 hover:opacity-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400",children:e.jsx(xr,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-black text-slate-200 uppercase tracking-tight",children:"Support"}),e.jsx("p",{className:"text-[10px] text-slate-600 font-bold",children:"Documentation & Help"})]})]}),e.jsx(Tt,{className:"w-5 h-5 text-slate-700 transition-colors"})]})}),e.jsx(Ke,{className:"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group opacity-60 hover:opacity-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400",children:e.jsx(br,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-black text-slate-200 uppercase tracking-tight",children:"About"}),e.jsx("p",{className:"text-[10px] text-slate-600 font-bold",children:"Version 5.0 Stable Release"})]})]}),e.jsx(Tt,{className:"w-5 h-5 text-slate-700 transition-colors"})]})})]})]}),e.jsxs("div",{className:"text-center pt-8 border-t border-white/5",children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.5em] text-slate-700 mb-1",children:"Finbase Obsidian System"}),e.jsx("p",{className:"text-[9px] font-bold text-slate-800",children:"BUILD 50.3.0 // QUANTUM CORE"})]})]})}function oc({className:t,children:s,...a}){return e.jsxs(yr,{"data-slot":"scroll-area",className:ge("relative",t),...a,children:[e.jsx(vr,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:s}),e.jsx(lc,{}),e.jsx(wr,{})]})}function lc({className:t,orientation:s="vertical",...a}){return e.jsx(jr,{"data-slot":"scroll-area-scrollbar",orientation:s,className:ge("flex touch-none p-px transition-colors select-none",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",t),...a,children:e.jsx(Nr,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function cc({isOpen:t,onClose:s,notifications:a,onNotificationClick:n,onMarkAsRead:r,onClearRead:d}){const i=a.filter(S=>!S.read).length,u=a.filter(S=>S.read).length,o=S=>{switch(S){case"achievement":return e.jsx(Sr,{className:"w-5 h-5 text-yellow-500"});case"goal":return e.jsx(Xt,{className:"w-5 h-5 text-green-500"});case"insight":return e.jsx(xs,{className:"w-5 h-5 text-blue-500"});case"alert":return e.jsx(kn,{className:"w-5 h-5 text-red-500"});case"reminder":return e.jsx(_s,{className:"w-5 h-5 text-indigo-500"})}},l=S=>{const k=new Date(S),I=new Date().getTime()-k.getTime(),D=Math.floor(I/6e4),v=Math.floor(I/36e5),R=Math.floor(I/864e5);return D<60?`${D}m ago`:v<24?`${v}h ago`:`${R}d ago`},[m,c]=f.useState({reminders:!0,transactions:!0,achievements:!1,insights:!1}),h=S=>{c(k=>({...k,[S]:!k[S]}))},w=["reminders","transactions","insights","achievements"],x=a.reduce((S,k)=>{const j=k.category||"insights";return S[j]||(S[j]=[]),S[j].push(k),S},{});return Object.keys(x).forEach(S=>{x[S].sort((k,j)=>k.read!==j.read?k.read?1:-1:new Date(j.timestamp).getTime()-new Date(k.timestamp).getTime())}),e.jsx(qn,{open:t,onOpenChange:s,children:e.jsxs(Hn,{side:"right",className:"w-full sm:max-w-lg p-0 flex flex-col h-dvh max-h-dvh bg-black border-white/5 text-slate-100 overflow-hidden",children:[e.jsx(Wn,{className:"sr-only",children:"Notifications"}),e.jsx(Yn,{className:"sr-only",children:"Protocol Intelligence Pulse"}),e.jsxs("div",{className:"px-8 pt-28 pb-10 border-b border-white/5 bg-black relative overflow-hidden animate-in fade-in slide-in-from-right-4 duration-500",children:[e.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-indigo-500 blur-[120px] opacity-10 -mr-24 -mt-24"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-blue-500 blur-[80px] opacity-5 -ml-12 -mb-12"}),e.jsx("div",{className:"absolute top-8 right-8 z-30",children:e.jsx(oe,{variant:"ghost",size:"icon",onClick:s,className:"w-10 h-10 sq-full bg-white/5 text-slate-400 hover:text-white hover:bg-white/10",children:e.jsx(bs,{className:"w-5 h-5"})})}),e.jsxs("div",{className:"flex items-center justify-between relative z-10",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("h2",{className:"text-3xl font-black text-slate-100 tracking-tighter leading-none flex items-center gap-4",children:["Pulse",i>0&&e.jsx("span",{className:"flex items-center justify-center min-w-[24px] h-6 px-2 text-[10px] font-black bg-indigo-600 text-white sq-full shadow-[0_0_15px_rgba(79,70,229,0.4)]",children:i})]})}),e.jsx("p",{className:"text-slate-500 font-black text-[10px] uppercase tracking-[0.3em] leading-none ml-0.5",children:"System Intelligence Stack"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[i>0&&e.jsx(oe,{variant:"ghost",size:"icon",title:"Mark all as read",onClick:()=>{a.forEach(S=>{S.read||r?.(S.id)})},className:"w-11 h-11 sq-md bg-white/5 text-slate-400 hover:text-indigo-400 hover:bg-white/10 transition-all duration-300 border border-white/5 active:scale-90",children:e.jsx(kr,{className:"w-5 h-5"})}),u>0&&e.jsx(oe,{variant:"ghost",size:"icon",title:"Clear history",onClick:()=>{confirm(`Purge ${u} recorded protocol entries?`)&&d?.()},className:"w-11 h-11 sq-md bg-white/5 text-slate-400 hover:text-rose-400 hover:bg-rose-500/10 transition-all duration-300 border border-white/5 active:scale-90",children:e.jsx(Jt,{className:"w-5 h-5"})})]})]})]}),e.jsx(oc,{className:"flex-1 w-full bg-black overflow-hidden custom-scrollbar",children:e.jsx("div",{className:"px-6 space-y-12 py-8 pb-32",children:a.length===0?e.jsxs("div",{className:"text-center py-32 flex flex-col items-center animate-in fade-in zoom-in duration-700",children:[e.jsxs("div",{className:"w-24 h-24 bg-white/5 border border-white/5 sq-2xl flex items-center justify-center text-slate-800 mb-8 shadow-inner relative group",children:[e.jsx("div",{className:"absolute inset-0 bg-indigo-500/5 blur-2xl sq-full group-hover:bg-indigo-500/10 transition-colors"}),e.jsx(Ks,{className:"w-10 h-10 relative z-10"})]}),e.jsx("h4",{className:"text-2xl font-black text-slate-100 mb-3 tracking-tight",children:"Signal Silence"}),e.jsx("p",{className:"text-[10px] text-slate-600 font-black uppercase tracking-[0.3em] max-w-[260px] leading-relaxed",children:"The protocol pulse is flat. We will alert you upon system breakthroughs."})]}):w.map(S=>{const k=x[S]||[];if(k.length===0)return null;const j=m[S],I=j?k.length:1,D=k.filter(v=>!v.read).length;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:()=>h(S),className:"w-full flex items-center justify-between px-2 group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-slate-500 group-hover:text-slate-300 transition-colors",children:S}),D>0&&e.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-500 sq-full animate-pulse shadow-[0_0_10px_rgba(99,102,241,0.6)]"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] font-black text-slate-700",children:k.length}),j?e.jsx(hn,{className:"w-3 h-3 text-slate-700"}):e.jsx(fs,{className:"w-3 h-3 text-slate-700"})]})]}),e.jsxs("div",{className:"space-y-3 relative",children:[!j&&k.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute top-2 left-2 right-2 h-full bg-black/40 sq-xl -z-10 border border-white/5 translate-y-2 scale-[0.98]"}),e.jsx("div",{className:"absolute top-4 left-4 right-4 h-full bg-black/20 sq-xl -z-20 border border-white/5 translate-y-4 scale-[0.96]"})]}),k.slice(0,I).map((v,R)=>{const W={style:{"--anim-delay":`${R*50}ms`,"--z-index":100-R}};return e.jsxs("div",{...W,className:`p-6 sq-xl border transition-all duration-500 group relative overflow-hidden cursor-pointer active:scale-[0.98] animate-in fade-in slide-in-from-right-4 fill-mode-both [animation-delay:var(--anim-delay)] z-[var(--z-index)] ${v.read?"bg-black border-white/5":"bg-black border-indigo-500/30 shadow-lg shadow-indigo-500/5 hover:border-indigo-500/50"}`,onClick:M=>{M.stopPropagation(),n?.(v),v.read||r?.(v.id)},children:[v.priority==="high"&&!v.read&&e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-red-500 blur-[80px] opacity-10 -mr-16 -mt-16"}),!v.read&&v.priority!=="high"&&e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-500 blur-[80px] opacity-10 -mr-16 -mt-16 group-hover:opacity-20 transition-opacity"}),e.jsxs("div",{className:"flex gap-4 relative z-10",children:[e.jsx("div",{className:`w-12 h-12 sq-md flex items-center justify-center shrink-0 border border-white/5 transition-all duration-500 ${v.read?"bg-white/5 text-slate-600":v.priority==="high"?"bg-red-500/10 text-red-400":"bg-indigo-500/10 text-indigo-400 shadow-inner"}`,children:o(v.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsx("h4",{className:`text-sm font-black tracking-tight leading-tight ${v.read?"text-slate-500":"text-slate-100"}`,children:v.title}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-700 whitespace-nowrap pt-1",children:l(v.timestamp)})]}),e.jsx("p",{className:`text-xs mt-2 leading-relaxed font-bold tracking-tight ${v.read?"text-slate-700":"text-slate-400"}`,children:v.message}),v.priority==="high"&&!v.read&&e.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-red-400 sq-full animate-ping"}),e.jsx("span",{className:"text-[10px] font-black text-red-400 uppercase tracking-[0.2em]",children:"Critical Stability Alert"})]})]})]})]},v.id)})]})]},S)})})})]})})}const na=f.createContext({});function ia(t){const s=f.useRef(null);return s.current===null&&(s.current=t()),s.current}const Jn=En?f.useLayoutEffect:f.useEffect,vs=f.createContext(null),ra=f.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function ka(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function dc(...t){return s=>{let a=!1;const n=t.map(r=>{const d=ka(r,s);return!a&&typeof d=="function"&&(a=!0),d});if(a)return()=>{for(let r=0;r<n.length;r++){const d=n[r];typeof d=="function"?d():ka(t[r],null)}}}}function uc(...t){return f.useCallback(dc(...t),t)}class mc extends f.Component{getSnapshotBeforeUpdate(s){const a=this.props.childRef.current;if(a&&s.isPresent&&!this.props.isPresent){const n=a.offsetParent,r=Pr(n)&&n.offsetWidth||0,d=this.props.sizeRef.current;d.height=a.offsetHeight||0,d.width=a.offsetWidth||0,d.top=a.offsetTop,d.left=a.offsetLeft,d.right=r-d.width-d.left}return null}componentDidUpdate(){}render(){return this.props.children}}function hc({children:t,isPresent:s,anchorX:a,root:n}){const r=f.useId(),d=f.useRef(null),i=f.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=f.useContext(ra),o=uc(d,t?.ref);return f.useInsertionEffect(()=>{const{width:l,height:m,top:c,left:h,right:w}=i.current;if(s||!d.current||!l||!m)return;const x=a==="left"?`left: ${h}`:`right: ${w}`;d.current.dataset.motionPopId=r;const S=document.createElement("style");u&&(S.nonce=u);const k=n??document.head;return k.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${m}px !important;
            ${x}px !important;
            top: ${c}px !important;
          }
        `),()=>{k.contains(S)&&k.removeChild(S)}},[s]),e.jsx(mc,{isPresent:s,childRef:d,sizeRef:i,children:f.cloneElement(t,{ref:o})})}const pc=({children:t,initial:s,isPresent:a,onExitComplete:n,custom:r,presenceAffectsLayout:d,mode:i,anchorX:u,root:o})=>{const l=ia(fc),m=f.useId();let c=!0,h=f.useMemo(()=>(c=!1,{id:m,initial:s,isPresent:a,custom:r,onExitComplete:w=>{l.set(w,!0);for(const x of l.values())if(!x)return;n&&n()},register:w=>(l.set(w,!1),()=>l.delete(w))}),[a,l,n]);return d&&c&&(h={...h}),f.useMemo(()=>{l.forEach((w,x)=>l.set(x,!1))},[a]),f.useEffect(()=>{!a&&!l.size&&n&&n()},[a]),i==="popLayout"&&(t=e.jsx(hc,{isPresent:a,anchorX:u,root:o,children:t})),e.jsx(vs.Provider,{value:h,children:t})};function fc(){return new Map}function Xn(t=!0){const s=f.useContext(vs);if(s===null)return[!0,null];const{isPresent:a,onExitComplete:n,register:r}=s,d=f.useId();f.useEffect(()=>{if(t)return r(d)},[t]);const i=f.useCallback(()=>t&&n&&n(d),[d,n,t]);return!a&&n?[!1,i]:[!0]}const rs=t=>t.key||"";function Sa(t){const s=[];return f.Children.forEach(t,a=>{f.isValidElement(a)&&s.push(a)}),s}const Gt=({children:t,custom:s,initial:a=!0,onExitComplete:n,presenceAffectsLayout:r=!0,mode:d="sync",propagate:i=!1,anchorX:u="left",root:o})=>{const[l,m]=Xn(i),c=f.useMemo(()=>Sa(t),[t]),h=i&&!l?[]:c.map(rs),w=f.useRef(!0),x=f.useRef(c),S=ia(()=>new Map),[k,j]=f.useState(c),[I,D]=f.useState(c);Jn(()=>{w.current=!1,x.current=c;for(let W=0;W<I.length;W++){const M=rs(I[W]);h.includes(M)?S.delete(M):S.get(M)!==!0&&S.set(M,!1)}},[I,h.length,h.join("-")]);const v=[];if(c!==k){let W=[...c];for(let M=0;M<I.length;M++){const A=I[M],T=rs(A);h.includes(T)||(W.splice(M,0,A),v.push(A))}return d==="wait"&&v.length&&(W=v),D(Sa(W)),j(c),null}const{forceRender:R}=f.useContext(na);return e.jsx(e.Fragment,{children:I.map(W=>{const M=rs(W),A=i&&!l?!1:c===I||h.includes(M),T=()=>{if(S.has(M))S.set(M,!0);else return;let Y=!0;S.forEach(K=>{K||(Y=!1)}),Y&&(R?.(),D(x.current),i&&m?.(),n&&n())};return e.jsx(pc,{isPresent:A,initial:!w.current||a?void 0:!1,custom:s,presenceAffectsLayout:r,mode:d,root:o,onExitComplete:A?void 0:T,anchorX:u,children:W},M)})})},Zn=f.createContext({strict:!1});function gc(t){for(const s in t)Vs[s]={...Vs[s],...t[s]}}const xc=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function hs(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||xc.has(t)}let Qn=t=>!hs(t);function bc(t){typeof t=="function"&&(Qn=s=>s.startsWith("on")?!hs(s):t(s))}try{bc(require("@emotion/is-prop-valid").default)}catch{}function yc(t,s,a){const n={};for(const r in t)r==="values"&&typeof t.values=="object"||(Qn(r)||a===!0&&hs(r)||!s&&!hs(r)||t.draggable&&r.startsWith("onDrag"))&&(n[r]=t[r]);return n}const ws=f.createContext({});function vc(t,s){if(Tn(t)){const{initial:a,animate:n}=t;return{initial:a===!1||us(a)?a:void 0,animate:us(n)?n:void 0}}return t.inherit!==!1?s:{}}function wc(t){const{initial:s,animate:a}=vc(t,f.useContext(ws));return f.useMemo(()=>({initial:s,animate:a}),[Ca(s),Ca(a)])}function Ca(t){return Array.isArray(t)?t.join(" "):t}const oa=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ei(t,s,a){for(const n in s)!Xs(s[n])&&!Rr(n,a)&&(t[n]=s[n])}function jc({transformTemplate:t},s){return f.useMemo(()=>{const a=oa();return Mr(a,s,t),Object.assign({},a.vars,a.style)},[s])}function Nc(t,s){const a=t.style||{},n={};return ei(n,a,t),Object.assign(n,jc(t,s)),n}function kc(t,s){const a={},n=Nc(t,s);return t.drag&&t.dragListener!==!1&&(a.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(a.tabIndex=0),a.style=n,a}const ti=()=>({...oa(),attrs:{}});function Sc(t,s,a,n){const r=f.useMemo(()=>{const d=ti();return Lr(d,s,Or(n),t.transformTemplate,t.style),{...d.attrs,style:{...d.style}}},[s]);if(t.style){const d={};ei(d,t.style,t),r.style={...d,...r.style}}return r}const Cc=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function la(t){return typeof t!="string"||t.includes("-")?!1:!!(Cc.indexOf(t)>-1||/[A-Z]/u.test(t))}function Ac(t,s,a,{latestValues:n},r,d=!1){const u=(la(t)?Sc:kc)(s,n,r,t),o=yc(s,typeof t=="string",d),l=t!==f.Fragment?{...o,...u,ref:a}:{},{children:m}=s,c=f.useMemo(()=>Xs(m)?m.get():m,[m]);return f.createElement(t,{...l,children:c})}function ls(t){return Xs(t)?t.get():t}function Ec({scrapeMotionValuesFromProps:t,createRenderState:s},a,n,r){return{latestValues:Tc(a,n,r,t),renderState:s()}}function Tc(t,s,a,n){const r={},d=n(t,{});for(const h in d)r[h]=ls(d[h]);let{initial:i,animate:u}=t;const o=Tn(t),l=_r(t);s&&l&&!o&&t.inherit!==!1&&(i===void 0&&(i=s.initial),u===void 0&&(u=s.animate));let m=a?a.initial===!1:!1;m=m||i===!1;const c=m?u:i;if(c&&typeof c!="boolean"&&!Zs(c)){const h=Array.isArray(c)?c:[c];for(let w=0;w<h.length;w++){const x=Fr(t,h[w]);if(x){const{transitionEnd:S,transition:k,...j}=x;for(const I in j){let D=j[I];if(Array.isArray(D)){const v=m?D.length-1:0;D=D[v]}D!==null&&(r[I]=D)}for(const I in S)r[I]=S[I]}}}return r}const si=t=>(s,a)=>{const n=f.useContext(ws),r=f.useContext(vs),d=()=>Ec(t,s,n,r);return a?d():ia(d)},Dc=si({scrapeMotionValuesFromProps:$r,createRenderState:oa}),Ic=si({scrapeMotionValuesFromProps:Br,createRenderState:ti}),Pc=Symbol.for("motionComponentSymbol");function zt(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Rc(t,s,a){return f.useCallback(n=>{n&&t.onMount&&t.onMount(n),s&&(n?s.mount(n):s.unmount()),a&&(typeof a=="function"?a(n):zt(a)&&(a.current=n))},[s])}const ai=f.createContext({});function Mc(t,s,a,n,r){const{visualElement:d}=f.useContext(ws),i=f.useContext(Zn),u=f.useContext(vs),o=f.useContext(ra).reducedMotion,l=f.useRef(null);n=n||i.renderer,!l.current&&n&&(l.current=n(t,{visualState:s,parent:d,props:a,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:o}));const m=l.current,c=f.useContext(ai);m&&!m.projection&&r&&(m.type==="html"||m.type==="svg")&&Lc(l.current,a,r,c);const h=f.useRef(!1);f.useInsertionEffect(()=>{m&&h.current&&m.update(a,u)});const w=a[Vr],x=f.useRef(!!w&&!window.MotionHandoffIsComplete?.(w)&&window.MotionHasOptimisedAnimation?.(w));return Jn(()=>{m&&(h.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),x.current&&m.animationState&&m.animationState.animateChanges())}),f.useEffect(()=>{m&&(!x.current&&m.animationState&&m.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(w)}),x.current=!1),m.enteringChildren=void 0)}),m}function Lc(t,s,a,n){const{layoutId:r,layout:d,drag:i,dragConstraints:u,layoutScroll:o,layoutRoot:l,layoutCrossfade:m}=s;t.projection=new a(t.latestValues,s["data-framer-portal-id"]?void 0:ni(t.parent)),t.projection.setOptions({layoutId:r,layout:d,alwaysMeasureLayout:!!i||u&&zt(u),visualElement:t,animationType:typeof d=="string"?d:"both",initialPromotionConfig:n,crossfade:m,layoutScroll:o,layoutRoot:l})}function ni(t){if(t)return t.options.allowProjection!==!1?t.projection:ni(t.parent)}function Ts(t,{forwardMotionProps:s=!1}={},a,n){a&&gc(a);const r=la(t)?Ic:Dc;function d(u,o){let l;const m={...f.useContext(ra),...u,layoutId:Oc(u)},{isStatic:c}=m,h=wc(u),w=r(u,c);if(!c&&En){_c();const x=Fc(m);l=x.MeasureLayout,h.visualElement=Mc(t,w,m,n,x.ProjectionNode)}return e.jsxs(ws.Provider,{value:h,children:[l&&h.visualElement?e.jsx(l,{visualElement:h.visualElement,...m}):null,Ac(t,u,Rc(w,h.visualElement,o),w,c,s)]})}d.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const i=f.forwardRef(d);return i[Pc]=t,i}function Oc({layoutId:t}){const s=f.useContext(na).id;return s&&t!==void 0?s+"-"+t:t}function _c(t,s){f.useContext(Zn).strict}function Fc(t){const{drag:s,layout:a}=Vs;if(!s&&!a)return{};const n={...s,...a};return{MeasureLayout:s?.isEnabled(t)||a?.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function $c(t,s){if(typeof Proxy>"u")return Ts;const a=new Map,n=(d,i)=>Ts(d,i,t,s),r=(d,i)=>n(d,i);return new Proxy(r,{get:(d,i)=>i==="create"?n:(a.has(i)||a.set(i,Ts(i,void 0,t,s)),a.get(i))})}const Bc=(t,s)=>la(t)?new Ur(s):new zr(s,{allowProjection:t!==f.Fragment});function ii(t,s,a,n=0,r=1){const d=Array.from(t).sort((l,m)=>l.sortNodePosition(m)).indexOf(s),i=t.size,u=(i-1)*n;return typeof a=="function"?a(d,i):r===1?d*n:u-d*n}function Hs(t,s,a={}){const n=Wt(t,s,a.type==="exit"?t.presenceContext?.custom:void 0);let{transition:r=t.getDefaultTransition()||{}}=n||{};a.transitionOverride&&(r=a.transitionOverride);const d=n?()=>Promise.all(Dn(t,n,a)):()=>Promise.resolve(),i=t.variantChildren&&t.variantChildren.size?(o=0)=>{const{delayChildren:l=0,staggerChildren:m,staggerDirection:c}=r;return Vc(t,s,o,l,m,c,a)}:()=>Promise.resolve(),{when:u}=r;if(u){const[o,l]=u==="beforeChildren"?[d,i]:[i,d];return o().then(()=>l())}else return Promise.all([d(),i(a.delay)])}function Vc(t,s,a=0,n=0,r=0,d=1,i){const u=[];for(const o of t.variantChildren)o.notify("AnimationStart",s),u.push(Hs(o,s,{...i,delay:a+(typeof n=="function"?0:n)+ii(t.variantChildren,o,n,r,d)}).then(()=>o.notify("AnimationComplete",s)));return Promise.all(u)}function Uc(t,s,a={}){t.notify("AnimationStart",s);let n;if(Array.isArray(s)){const r=s.map(d=>Hs(t,d,a));n=Promise.all(r)}else if(typeof s=="string")n=Hs(t,s,a);else{const r=typeof s=="function"?Wt(t,s,a.custom):s;n=Promise.all(Dn(t,r,a))}return n.then(()=>{t.notify("AnimationComplete",s)})}function ri(t,s){if(!Array.isArray(s))return!1;const a=s.length;if(a!==t.length)return!1;for(let n=0;n<a;n++)if(s[n]!==t[n])return!1;return!0}const zc=In.length;function oi(t){if(!t)return;if(!t.isControllingVariants){const a=t.parent?oi(t.parent)||{}:{};return t.props.initial!==void 0&&(a.initial=t.props.initial),a}const s={};for(let a=0;a<zc;a++){const n=In[a],r=t.props[n];(us(r)||r===!1)&&(s[n]=r)}return s}const qc=[...Pn].reverse(),Gc=Pn.length;function Hc(t){return s=>Promise.all(s.map(({animation:a,options:n})=>Uc(t,a,n)))}function Wc(t){let s=Hc(t),a=Aa(),n=!0;const r=o=>(l,m)=>{const c=Wt(t,m,o==="exit"?t.presenceContext?.custom:void 0);if(c){const{transition:h,transitionEnd:w,...x}=c;l={...l,...x,...w}}return l};function d(o){s=o(t)}function i(o){const{props:l}=t,m=oi(t.parent)||{},c=[],h=new Set;let w={},x=1/0;for(let k=0;k<Gc;k++){const j=qc[k],I=a[j],D=l[j]!==void 0?l[j]:m[j],v=us(D),R=j===o?I.isActive:null;R===!1&&(x=k);let W=D===m[j]&&D!==l[j]&&v;if(W&&n&&t.manuallyAnimateOnMount&&(W=!1),I.protectedKeys={...w},!I.isActive&&R===null||!D&&!I.prevProp||Zs(D)||typeof D=="boolean")continue;const M=Yc(I.prevProp,D);let A=M||j===o&&I.isActive&&!W&&v||k>x&&v,T=!1;const Y=Array.isArray(D)?D:[D];let K=Y.reduce(r(j),{});R===!1&&(K={});const{prevResolvedValues:se={}}=I,ae={...se,...K},Me=G=>{A=!0,h.has(G)&&(T=!0,h.delete(G)),I.needsAnimating[G]=!0;const me=t.getValue(G);me&&(me.liveStyle=!1)};for(const G in ae){const me=K[G],Ae=se[G];if(w.hasOwnProperty(G))continue;let N=!1;ua(me)&&ua(Ae)?N=!ri(me,Ae):N=me!==Ae,N?me!=null?Me(G):h.add(G):me!==void 0&&h.has(G)?Me(G):I.protectedKeys[G]=!0}I.prevProp=D,I.prevResolvedValues=K,I.isActive&&(w={...w,...K}),n&&t.blockInitialAnimation&&(A=!1);const je=W&&M;A&&(!je||T)&&c.push(...Y.map(G=>{const me={type:j};if(typeof G=="string"&&n&&!je&&t.manuallyAnimateOnMount&&t.parent){const{parent:Ae}=t,N=Wt(Ae,G);if(Ae.enteringChildren&&N){const{delayChildren:g}=N.transition||{};me.delay=ii(Ae.enteringChildren,t,g)}}return{animation:G,options:me}}))}if(h.size){const k={};if(typeof l.initial!="boolean"){const j=Wt(t,Array.isArray(l.initial)?l.initial[0]:l.initial);j&&j.transition&&(k.transition=j.transition)}h.forEach(j=>{const I=t.getBaseTarget(j),D=t.getValue(j);D&&(D.liveStyle=!0),k[j]=I??null}),c.push({animation:k})}let S=!!c.length;return n&&(l.initial===!1||l.initial===l.animate)&&!t.manuallyAnimateOnMount&&(S=!1),n=!1,S?s(c):Promise.resolve()}function u(o,l){if(a[o].isActive===l)return Promise.resolve();t.variantChildren?.forEach(c=>c.animationState?.setActive(o,l)),a[o].isActive=l;const m=i(o);for(const c in a)a[c].protectedKeys={};return m}return{animateChanges:i,setActive:u,setAnimateFunction:d,getState:()=>a,reset:()=>{a=Aa()}}}function Yc(t,s){return typeof s=="string"?s!==t:Array.isArray(s)?!ri(s,t):!1}function Dt(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Aa(){return{animate:Dt(!0),whileInView:Dt(),whileHover:Dt(),whileTap:Dt(),whileDrag:Dt(),whileFocus:Dt(),exit:Dt()}}class Ct{constructor(s){this.isMounted=!1,this.node=s}update(){}}class Kc extends Ct{constructor(s){super(s),s.animationState||(s.animationState=Wc(s))}updateAnimationControlsSubscription(){const{animate:s}=this.node.getProps();Zs(s)&&(this.unmountControls=s.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:s}=this.node.getProps(),{animate:a}=this.node.prevProps||{};s!==a&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Jc=0;class Xc extends Ct{constructor(){super(...arguments),this.id=Jc++}update(){if(!this.node.presenceContext)return;const{isPresent:s,onExitComplete:a}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||s===n)return;const r=this.node.animationState.setActive("exit",!s);a&&!s&&r.then(()=>{a(this.id)})}mount(){const{register:s,onExitComplete:a}=this.node.presenceContext||{};a&&a(this.id),s&&(this.unmount=s(this.id))}unmount(){}}const Zc={animation:{Feature:Kc},exit:{Feature:Xc}};function Qt(t,s,a,n={passive:!0}){return t.addEventListener(s,a,n),()=>t.removeEventListener(s,a)}function es(t){return{point:{x:t.pageX,y:t.pageY}}}const Qc=t=>s=>Rn(s)&&t(s,es(s));function Yt(t,s,a,n){return Qt(t,s,Qc(a),n)}const li=1e-4,ed=1-li,td=1+li,ci=.01,sd=0-ci,ad=0+ci;function tt(t){return t.max-t.min}function nd(t,s,a){return Math.abs(t-s)<=a}function Ea(t,s,a,n=.5){t.origin=n,t.originPoint=Ge(s.min,s.max,t.origin),t.scale=tt(a)/tt(s),t.translate=Ge(a.min,a.max,t.origin)-t.originPoint,(t.scale>=ed&&t.scale<=td||isNaN(t.scale))&&(t.scale=1),(t.translate>=sd&&t.translate<=ad||isNaN(t.translate))&&(t.translate=0)}function Kt(t,s,a,n){Ea(t.x,s.x,a.x,n?n.originX:void 0),Ea(t.y,s.y,a.y,n?n.originY:void 0)}function Ta(t,s,a){t.min=a.min+s.min,t.max=t.min+tt(s)}function id(t,s,a){Ta(t.x,s.x,a.x),Ta(t.y,s.y,a.y)}function Da(t,s,a){t.min=s.min-a.min,t.max=t.min+tt(s)}function ps(t,s,a){Da(t.x,s.x,a.x),Da(t.y,s.y,a.y)}function ht(t){return[t("x"),t("y")]}const di=({current:t})=>t?t.ownerDocument.defaultView:null;class ui{constructor(s,a,{transformPagePoint:n,contextWindow:r=window,dragSnapToOrigin:d=!1,distanceThreshold:i=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Is(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,x=qr(h.offset,{x:0,y:0})>=this.distanceThreshold;if(!w&&!x)return;const{point:S}=h,{timestamp:k}=ut;this.history.push({...S,timestamp:k});const{onStart:j,onMove:I}=this.handlers;w||(j&&j(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),I&&I(this.lastMoveEvent,h)},this.handlePointerMove=(h,w)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Ds(w,this.transformPagePoint),lt.update(this.updatePoint,!0)},this.handlePointerUp=(h,w)=>{this.end();const{onEnd:x,onSessionEnd:S,resumeAnimation:k}=this.handlers;if(this.dragSnapToOrigin&&k&&k(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=Is(h.type==="pointercancel"?this.lastMoveEventInfo:Ds(w,this.transformPagePoint),this.history);this.startEvent&&x&&x(h,j),S&&S(h,j)},!Rn(s))return;this.dragSnapToOrigin=d,this.handlers=a,this.transformPagePoint=n,this.distanceThreshold=i,this.contextWindow=r||window;const u=es(s),o=Ds(u,this.transformPagePoint),{point:l}=o,{timestamp:m}=ut;this.history=[{...l,timestamp:m}];const{onSessionStart:c}=a;c&&c(s,Is(o,this.history)),this.removeListeners=Mn(Yt(this.contextWindow,"pointermove",this.handlePointerMove),Yt(this.contextWindow,"pointerup",this.handlePointerUp),Yt(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(s){this.handlers=s}end(){this.removeListeners&&this.removeListeners(),Us(this.updatePoint)}}function Ds(t,s){return s?{point:s(t.point)}:t}function Ia(t,s){return{x:t.x-s.x,y:t.y-s.y}}function Is({point:t},s){return{point:t,delta:Ia(t,mi(s)),offset:Ia(t,rd(s)),velocity:od(s,.1)}}function rd(t){return t[0]}function mi(t){return t[t.length-1]}function od(t,s){if(t.length<2)return{x:0,y:0};let a=t.length-1,n=null;const r=mi(t);for(;a>=0&&(n=t[a],!(r.timestamp-n.timestamp>Gr(s)));)a--;if(!n)return{x:0,y:0};const d=Hr(r.timestamp-n.timestamp);if(d===0)return{x:0,y:0};const i={x:(r.x-n.x)/d,y:(r.y-n.y)/d};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function ld(t,{min:s,max:a},n){return s!==void 0&&t<s?t=n?Ge(s,t,n.min):Math.max(t,s):a!==void 0&&t>a&&(t=n?Ge(a,t,n.max):Math.min(t,a)),t}function Pa(t,s,a){return{min:s!==void 0?t.min+s:void 0,max:a!==void 0?t.max+a-(t.max-t.min):void 0}}function cd(t,{top:s,left:a,bottom:n,right:r}){return{x:Pa(t.x,a,r),y:Pa(t.y,s,n)}}function Ra(t,s){let a=s.min-t.min,n=s.max-t.max;return s.max-s.min<t.max-t.min&&([a,n]=[n,a]),{min:a,max:n}}function dd(t,s){return{x:Ra(t.x,s.x),y:Ra(t.y,s.y)}}function ud(t,s){let a=.5;const n=tt(t),r=tt(s);return r>n?a=zs(s.min,s.max-n,t.min):n>r&&(a=zs(t.min,t.max-r,s.min)),Ln(0,1,a)}function md(t,s){const a={};return s.min!==void 0&&(a.min=s.min-t.min),s.max!==void 0&&(a.max=s.max-t.min),a}const Ws=.35;function hd(t=Ws){return t===!1?t=0:t===!0&&(t=Ws),{x:Ma(t,"left","right"),y:Ma(t,"top","bottom")}}function Ma(t,s,a){return{min:La(t,s),max:La(t,a)}}function La(t,s){return typeof t=="number"?t:t[s]||0}const pd=new WeakMap;class fd{constructor(s){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=qe(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=s}start(s,{snapToCursor:a=!1,distanceThreshold:n}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const d=c=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),a&&this.snapToCursor(es(c).point)},i=(c,h)=>{const{drag:w,dragPropagation:x,onDragStart:S}=this.getProps();if(w&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Xr(w),!this.openDragLock))return;this.latestPointerEvent=c,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ht(j=>{let I=this.getAxisMotionValue(j).get()||0;if(ms.test(I)){const{projection:D}=this.visualElement;if(D&&D.layout){const v=D.layout.layoutBox[j];v&&(I=tt(v)*(parseFloat(I)/100))}}this.originPoint[j]=I}),S&&lt.postRender(()=>S(c,h)),ma(this.visualElement,"transform");const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},u=(c,h)=>{this.latestPointerEvent=c,this.latestPanInfo=h;const{dragPropagation:w,dragDirectionLock:x,onDirectionLock:S,onDrag:k}=this.getProps();if(!w&&!this.openDragLock)return;const{offset:j}=h;if(x&&this.currentDirection===null){this.currentDirection=gd(j),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",h.point,j),this.updateAxis("y",h.point,j),this.visualElement.render(),k&&k(c,h)},o=(c,h)=>{this.latestPointerEvent=c,this.latestPanInfo=h,this.stop(c,h),this.latestPointerEvent=null,this.latestPanInfo=null},l=()=>ht(c=>this.getAnimationState(c)==="paused"&&this.getAxisMotionValue(c).animation?.play()),{dragSnapToOrigin:m}=this.getProps();this.panSession=new ui(s,{onSessionStart:d,onStart:i,onMove:u,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:n,contextWindow:di(this.visualElement)})}stop(s,a){const n=s||this.latestPointerEvent,r=a||this.latestPanInfo,d=this.isDragging;if(this.cancel(),!d||!r||!n)return;const{velocity:i}=r;this.startAnimation(i);const{onDragEnd:u}=this.getProps();u&&lt.postRender(()=>u(n,r))}cancel(){this.isDragging=!1;const{projection:s,animationState:a}=this.visualElement;s&&(s.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),a&&a.setActive("whileDrag",!1)}updateAxis(s,a,n){const{drag:r}=this.getProps();if(!n||!os(s,r,this.currentDirection))return;const d=this.getAxisMotionValue(s);let i=this.originPoint[s]+n[s];this.constraints&&this.constraints[s]&&(i=ld(i,this.constraints[s],this.elastic[s])),d.set(i)}resolveConstraints(){const{dragConstraints:s,dragElastic:a}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;s&&zt(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&n?this.constraints=cd(n.layoutBox,s):this.constraints=!1,this.elastic=hd(a),r!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&ht(d=>{this.constraints!==!1&&this.getAxisMotionValue(d)&&(this.constraints[d]=md(n.layoutBox[d],this.constraints[d]))})}resolveRefConstraints(){const{dragConstraints:s,onMeasureDragConstraints:a}=this.getProps();if(!s||!zt(s))return!1;const n=s.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const d=Wr(n,r.root,this.visualElement.getTransformPagePoint());let i=dd(r.layout.layoutBox,d);if(a){const u=a(Yr(i));this.hasMutatedConstraints=!!u,u&&(i=Kr(u))}return i}startAnimation(s){const{drag:a,dragMomentum:n,dragElastic:r,dragTransition:d,dragSnapToOrigin:i,onDragTransitionEnd:u}=this.getProps(),o=this.constraints||{},l=ht(m=>{if(!os(m,a,this.currentDirection))return;let c=o&&o[m]||{};i&&(c={min:0,max:0});const h=r?200:1e6,w=r?40:1e7,x={type:"inertia",velocity:n?s[m]:0,bounceStiffness:h,bounceDamping:w,timeConstant:750,restDelta:1,restSpeed:10,...d,...c};return this.startAxisValueAnimation(m,x)});return Promise.all(l).then(u)}startAxisValueAnimation(s,a){const n=this.getAxisMotionValue(s);return ma(this.visualElement,s),n.start(Jr(s,n,0,a,this.visualElement,!1))}stopAnimation(){ht(s=>this.getAxisMotionValue(s).stop())}pauseAnimation(){ht(s=>this.getAxisMotionValue(s).animation?.pause())}getAnimationState(s){return this.getAxisMotionValue(s).animation?.state}getAxisMotionValue(s){const a=`_drag${s.toUpperCase()}`,n=this.visualElement.getProps(),r=n[a];return r||this.visualElement.getValue(s,(n.initial?n.initial[s]:void 0)||0)}snapToCursor(s){ht(a=>{const{drag:n}=this.getProps();if(!os(a,n,this.currentDirection))return;const{projection:r}=this.visualElement,d=this.getAxisMotionValue(a);if(r&&r.layout){const{min:i,max:u}=r.layout.layoutBox[a];d.set(s[a]-Ge(i,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:s,dragConstraints:a}=this.getProps(),{projection:n}=this.visualElement;if(!zt(a)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};ht(i=>{const u=this.getAxisMotionValue(i);if(u&&this.constraints!==!1){const o=u.get();r[i]=ud({min:o,max:o},this.constraints[i])}});const{transformTemplate:d}=this.visualElement.getProps();this.visualElement.current.style.transform=d?d({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),ht(i=>{if(!os(i,s,null))return;const u=this.getAxisMotionValue(i),{min:o,max:l}=this.constraints[i];u.set(Ge(o,l,r[i]))})}addListeners(){if(!this.visualElement.current)return;pd.set(this.visualElement,this);const s=this.visualElement.current,a=Yt(s,"pointerdown",o=>{const{drag:l,dragListener:m=!0}=this.getProps();l&&m&&this.start(o)}),n=()=>{const{dragConstraints:o}=this.getProps();zt(o)&&o.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,d=r.addEventListener("measure",n);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),lt.read(n);const i=Qt(window,"resize",()=>this.scalePositionWithinConstraints()),u=r.addEventListener("didUpdate",(({delta:o,hasLayoutChanged:l})=>{this.isDragging&&l&&(ht(m=>{const c=this.getAxisMotionValue(m);c&&(this.originPoint[m]+=o[m].translate,c.set(c.get()+o[m].translate))}),this.visualElement.render())}));return()=>{i(),a(),d(),u&&u()}}getProps(){const s=this.visualElement.getProps(),{drag:a=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:d=!1,dragElastic:i=Ws,dragMomentum:u=!0}=s;return{...s,drag:a,dragDirectionLock:n,dragPropagation:r,dragConstraints:d,dragElastic:i,dragMomentum:u}}}function os(t,s,a){return(s===!0||s===t)&&(a===null||a===t)}function gd(t,s=10){let a=null;return Math.abs(t.y)>s?a="y":Math.abs(t.x)>s&&(a="x"),a}class xd extends Ct{constructor(s){super(s),this.removeGroupControls=qt,this.removeListeners=qt,this.controls=new fd(s)}mount(){const{dragControls:s}=this.node.getProps();s&&(this.removeGroupControls=s.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||qt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Oa=t=>(s,a)=>{t&&lt.postRender(()=>t(s,a))};class bd extends Ct{constructor(){super(...arguments),this.removePointerDownListener=qt}onPointerDown(s){this.session=new ui(s,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:di(this.node)})}createPanHandlers(){const{onPanSessionStart:s,onPanStart:a,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:Oa(s),onStart:Oa(a),onMove:n,onEnd:(d,i)=>{delete this.session,r&&lt.postRender(()=>r(d,i))}}}mount(){this.removePointerDownListener=Yt(this.node.current,"pointerdown",s=>this.onPointerDown(s))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const cs={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let Ps=!1;class yd extends f.Component{componentDidMount(){const{visualElement:s,layoutGroup:a,switchLayoutGroup:n,layoutId:r}=this.props,{projection:d}=s;d&&(a.group&&a.group.add(d),n&&n.register&&r&&n.register(d),Ps&&d.root.didUpdate(),d.addEventListener("animationComplete",()=>{this.safeToRemove()}),d.setOptions({...d.options,onExitComplete:()=>this.safeToRemove()})),cs.hasEverUpdated=!0}getSnapshotBeforeUpdate(s){const{layoutDependency:a,visualElement:n,drag:r,isPresent:d}=this.props,{projection:i}=n;return i&&(i.isPresent=d,Ps=!0,r||s.layoutDependency!==a||a===void 0||s.isPresent!==d?i.willUpdate():this.safeToRemove(),s.isPresent!==d&&(d?i.promote():i.relegate()||lt.postRender(()=>{const u=i.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:s}=this.props.visualElement;s&&(s.root.didUpdate(),On.postRender(()=>{!s.currentAnimation&&s.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:s,layoutGroup:a,switchLayoutGroup:n}=this.props,{projection:r}=s;Ps=!0,r&&(r.scheduleCheckAfterUnmount(),a&&a.group&&a.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:s}=this.props;s&&s()}render(){return null}}function hi(t){const[s,a]=Xn(),n=f.useContext(na);return e.jsx(yd,{...t,layoutGroup:n,switchLayoutGroup:f.useContext(ai),isPresent:s,safeToRemove:a})}const vd=(t,s)=>t.depth-s.depth;class wd{constructor(){this.children=[],this.isDirty=!1}add(s){_n(this.children,s),this.isDirty=!0}remove(s){Fn(this.children,s),this.isDirty=!0}forEach(s){this.isDirty&&this.children.sort(vd),this.isDirty=!1,this.children.forEach(s)}}const pi=["TopLeft","TopRight","BottomLeft","BottomRight"],jd=pi.length,_a=t=>typeof t=="string"?parseFloat(t):t,Fa=t=>typeof t=="number"||Zr.test(t);function Nd(t,s,a,n,r,d){r?(t.opacity=Ge(0,a.opacity??1,kd(n)),t.opacityExit=Ge(s.opacity??1,0,Sd(n))):d&&(t.opacity=Ge(s.opacity??1,a.opacity??1,n));for(let i=0;i<jd;i++){const u=`border${pi[i]}Radius`;let o=$a(s,u),l=$a(a,u);if(o===void 0&&l===void 0)continue;o||(o=0),l||(l=0),o===0||l===0||Fa(o)===Fa(l)?(t[u]=Math.max(Ge(_a(o),_a(l),n),0),(ms.test(l)||ms.test(o))&&(t[u]+="%")):t[u]=l}(s.rotate||a.rotate)&&(t.rotate=Ge(s.rotate||0,a.rotate||0,n))}function $a(t,s){return t[s]!==void 0?t[s]:t.borderRadius}const kd=fi(0,.5,Qr),Sd=fi(.5,.95,qt);function fi(t,s,a){return n=>n<t?0:n>s?1:a(zs(t,s,n))}function Ba(t,s){t.min=s.min,t.max=s.max}function gt(t,s){Ba(t.x,s.x),Ba(t.y,s.y)}function Va(t,s){t.translate=s.translate,t.scale=s.scale,t.originPoint=s.originPoint,t.origin=s.origin}function Ua(t,s,a,n,r){return t-=s,t=ha(t,1/a,n),r!==void 0&&(t=ha(t,1/r,n)),t}function Cd(t,s=0,a=1,n=.5,r,d=t,i=t){if(ms.test(s)&&(s=parseFloat(s),s=Ge(i.min,i.max,s/100)-i.min),typeof s!="number")return;let u=Ge(d.min,d.max,n);t===d&&(u-=s),t.min=Ua(t.min,s,a,u,r),t.max=Ua(t.max,s,a,u,r)}function za(t,s,[a,n,r],d,i){Cd(t,s[a],s[n],s[r],s.scale,d,i)}const Ad=["x","scaleX","originX"],Ed=["y","scaleY","originY"];function qa(t,s,a,n){za(t.x,s,Ad,a?a.x:void 0,n?n.x:void 0),za(t.y,s,Ed,a?a.y:void 0,n?n.y:void 0)}function Ga(t){return t.translate===0&&t.scale===1}function gi(t){return Ga(t.x)&&Ga(t.y)}function Ha(t,s){return t.min===s.min&&t.max===s.max}function Td(t,s){return Ha(t.x,s.x)&&Ha(t.y,s.y)}function Wa(t,s){return Math.round(t.min)===Math.round(s.min)&&Math.round(t.max)===Math.round(s.max)}function xi(t,s){return Wa(t.x,s.x)&&Wa(t.y,s.y)}function Ya(t){return tt(t.x)/tt(t.y)}function Ka(t,s){return t.translate===s.translate&&t.scale===s.scale&&t.originPoint===s.originPoint}class Dd{constructor(){this.members=[]}add(s){_n(this.members,s),s.scheduleRender()}remove(s){if(Fn(this.members,s),s===this.prevLead&&(this.prevLead=void 0),s===this.lead){const a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(s){const a=this.members.findIndex(r=>s===r);if(a===0)return!1;let n;for(let r=a;r>=0;r--){const d=this.members[r];if(d.isPresent!==!1){n=d;break}}return n?(this.promote(n),!0):!1}promote(s,a){const n=this.lead;if(s!==n&&(this.prevLead=n,this.lead=s,s.show(),n)){n.instance&&n.scheduleRender(),s.scheduleRender(),s.resumeFrom=n,a&&(s.resumeFrom.preserveOpacity=!0),n.snapshot&&(s.snapshot=n.snapshot,s.snapshot.latestValues=n.animationValues||n.latestValues),s.root&&s.root.isUpdating&&(s.isLayoutDirty=!0);const{crossfade:r}=s.options;r===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(s=>{const{options:a,resumingFrom:n}=s;a.onExitComplete&&a.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(s=>{s.instance&&s.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Id(t,s,a){let n="";const r=t.x.translate/s.x,d=t.y.translate/s.y,i=a?.z||0;if((r||d||i)&&(n=`translate3d(${r}px, ${d}px, ${i}px) `),(s.x!==1||s.y!==1)&&(n+=`scale(${1/s.x}, ${1/s.y}) `),a){const{transformPerspective:l,rotate:m,rotateX:c,rotateY:h,skewX:w,skewY:x}=a;l&&(n=`perspective(${l}px) ${n}`),m&&(n+=`rotate(${m}deg) `),c&&(n+=`rotateX(${c}deg) `),h&&(n+=`rotateY(${h}deg) `),w&&(n+=`skewX(${w}deg) `),x&&(n+=`skewY(${x}deg) `)}const u=t.x.scale*s.x,o=t.y.scale*s.y;return(u!==1||o!==1)&&(n+=`scale(${u}, ${o})`),n||"none"}const Rs=["","X","Y","Z"],Pd=1e3;let Rd=0;function Ms(t,s,a,n){const{latestValues:r}=s;r[t]&&(a[t]=r[t],s.setStaticValue(t,0),n&&(n[t]=0))}function bi(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:s}=t.options;if(!s)return;const a=mo(s);if(window.MotionHasOptimisedAnimation(a,"transform")){const{layout:r,layoutId:d}=t.options;window.MotionCancelOptimisedAnimation(a,"transform",lt,!(r||d))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&bi(n)}function yi({attachResizeListener:t,defaultParent:s,measureScroll:a,checkIsScrollRoot:n,resetTransform:r}){return class{constructor(i={},u=s?.()){this.id=Rd++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Od),this.nodes.forEach(Bd),this.nodes.forEach(Vd),this.nodes.forEach(_d)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let o=0;o<this.path.length;o++)this.path[o].shouldResetTransform=!0;this.root===this&&(this.nodes=new wd)}addEventListener(i,u){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new eo),this.eventHandlers.get(i).add(u)}notifyListeners(i,...u){const o=this.eventHandlers.get(i);o&&o.notify(...u)}hasListeners(i){return this.eventHandlers.has(i)}mount(i){if(this.instance)return;this.isSVG=to(i)&&!so(i),this.instance=i;const{layoutId:u,layout:o,visualElement:l}=this.options;if(l&&!l.current&&l.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(o||u)&&(this.isLayoutDirty=!0),t){let m,c=0;const h=()=>this.root.updateBlockedByResize=!1;lt.read(()=>{c=window.innerWidth}),t(i,()=>{const w=window.innerWidth;w!==c&&(c=w,this.root.updateBlockedByResize=!0,m&&m(),m=ao(h,250),cs.hasAnimatedSinceResize&&(cs.hasAnimatedSinceResize=!1,this.nodes.forEach(Za)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&l&&(u||o)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:c,hasRelativeLayoutChanged:h,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||l.getDefaultTransition()||Hd,{onLayoutAnimationStart:S,onLayoutAnimationComplete:k}=l.getProps(),j=!this.targetLayout||!xi(this.targetLayout,w),I=!c&&h;if(this.options.layoutRoot||this.resumeFrom||I||c&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const D={...no(x,"layout"),onPlay:S,onComplete:k};(l.shouldReduceMotion||this.options.layoutRoot)&&(D.delay=0,D.type=!1),this.startAnimation(D),this.setAnimationOrigin(m,I)}else c||Za(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Us(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Ud),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&bi(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const c=this.path[m];c.shouldResetTransform=!0,c.updateScroll("snapshot"),c.options.layoutRoot&&c.willUpdate(!1)}const{layoutId:u,layout:o}=this.options;if(u===void 0&&!o)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ja);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Xa);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach($d),this.nodes.forEach(Md),this.nodes.forEach(Ld)):this.nodes.forEach(Xa),this.clearAllSnapshots();const u=io.now();ut.delta=Ln(0,1e3/60,u-ut.timestamp),ut.timestamp=u,ut.isProcessing=!0,Ns.update.process(ut),Ns.preRender.process(ut),Ns.render.process(ut),ut.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,On.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Fd),this.sharedNodes.forEach(zd)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,lt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){lt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!tt(this.snapshot.measuredBox.x)&&!tt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let o=0;o<this.path.length;o++)this.path[o].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=qe(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(u=!1),u&&this.instance){const o=n(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:o,offset:a(this.instance),wasRoot:this.scroll?this.scroll.isRoot:o}}}resetTransform(){if(!r)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!gi(this.projectionDelta),o=this.getTransformTemplate(),l=o?o(this.latestValues,""):void 0,m=l!==this.prevTransformTemplateValue;i&&this.instance&&(u||$t(this.latestValues)||m)&&(r(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const u=this.measurePageBox();let o=this.removeElementScroll(u);return i&&(o=this.removeTransform(o)),Wd(o),{animationId:this.root.animationId,measuredBox:u,layoutBox:o,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:i}=this.options;if(!i)return qe();const u=i.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Yd))){const{scroll:l}=this.root;l&&(ss(u.x,l.offset.x),ss(u.y,l.offset.y))}return u}removeElementScroll(i){const u=qe();if(gt(u,i),this.scroll?.wasRoot)return u;for(let o=0;o<this.path.length;o++){const l=this.path[o],{scroll:m,options:c}=l;l!==this.root&&m&&c.layoutScroll&&(m.wasRoot&&gt(u,i),ss(u.x,m.offset.x),ss(u.y,m.offset.y))}return u}applyTransform(i,u=!1){const o=qe();gt(o,i);for(let l=0;l<this.path.length;l++){const m=this.path[l];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&as(o,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),$t(m.latestValues)&&as(o,m.latestValues)}return $t(this.latestValues)&&as(o,this.latestValues),o}removeTransform(i){const u=qe();gt(u,i);for(let o=0;o<this.path.length;o++){const l=this.path[o];if(!l.instance||!$t(l.latestValues))continue;pa(l.latestValues)&&l.updateSnapshot();const m=qe(),c=l.measurePageBox();gt(m,c),qa(u,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,m)}return $t(this.latestValues)&&qa(u,this.latestValues),u}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ut.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const o=!!this.resumingFrom||this!==u;if(!(i||o&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:c}=this.options;if(!this.layout||!(m||c))return;this.resolvedRelativeTargetAt=ut.timestamp;const h=this.getClosestProjectingParent();h&&this.linkedParentVersion!==h.layoutVersion&&!h.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(h&&h.layout?this.createRelativeTarget(h,this.layout.layoutBox,h.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=qe(),this.targetWithTransforms=qe()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),id(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):gt(this.target,this.layout.layoutBox),ro(this.target,this.targetDelta)):gt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?this.createRelativeTarget(h,this.target,h.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||pa(this.parent.latestValues)||oo(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(i,u,o){this.relativeParent=i,this.linkedParentVersion=i.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qe(),this.relativeTargetOrigin=qe(),ps(this.relativeTargetOrigin,u,o),gt(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const i=this.getLead(),u=!!this.resumingFrom||this!==i;let o=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(o=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(o=!1),this.resolvedRelativeTargetAt===ut.timestamp&&(o=!1),o)return;const{layout:l,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(l||m))return;gt(this.layoutCorrected,this.layout.layoutBox);const c=this.treeScale.x,h=this.treeScale.y;lo(this.layoutCorrected,this.treeScale,this.path,u),i.layout&&!i.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(i.target=i.layout.layoutBox,i.targetWithTransforms=qe());const{target:w}=i;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Va(this.prevProjectionDelta.x,this.projectionDelta.x),Va(this.prevProjectionDelta.y,this.projectionDelta.y)),Kt(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==c||this.treeScale.y!==h||!Ka(this.projectionDelta.x,this.prevProjectionDelta.x)||!Ka(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){if(this.options.visualElement?.scheduleRender(),i){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Bt(),this.projectionDelta=Bt(),this.projectionDeltaWithTransform=Bt()}setAnimationOrigin(i,u=!1){const o=this.snapshot,l=o?o.latestValues:{},m={...this.latestValues},c=Bt();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const h=qe(),w=o?o.source:void 0,x=this.layout?this.layout.source:void 0,S=w!==x,k=this.getStack(),j=!k||k.members.length<=1,I=!!(S&&!j&&this.options.crossfade===!0&&!this.path.some(Gd));this.animationProgress=0;let D;this.mixTargetDelta=v=>{const R=v/1e3;Qa(c.x,i.x,R),Qa(c.y,i.y,R),this.setTargetDelta(c),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ps(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),qd(this.relativeTarget,this.relativeTargetOrigin,h,R),D&&Td(this.relativeTarget,D)&&(this.isProjectionDirty=!1),D||(D=qe()),gt(D,this.relativeTarget)),S&&(this.animationValues=m,Nd(m,l,this.latestValues,R,I,j)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Us(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=lt.update(()=>{cs.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=co(0)),this.currentAnimation=uo(this.motionValue,[0,1e3],{...i,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),i.onUpdate&&i.onUpdate(u)},onStop:()=>{},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Pd),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:u,target:o,layout:l,latestValues:m}=i;if(!(!u||!o||!l)){if(this!==i&&this.layout&&l&&vi(this.options.animationType,this.layout.layoutBox,l.layoutBox)){o=this.target||qe();const c=tt(this.layout.layoutBox.x);o.x.min=i.target.x.min,o.x.max=o.x.min+c;const h=tt(this.layout.layoutBox.y);o.y.min=i.target.y.min,o.y.max=o.y.min+h}gt(u,o),as(u,m),Kt(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(i,u){this.sharedNodes.has(i)||this.sharedNodes.set(i,new Dd),this.sharedNodes.get(i).add(u);const l=u.options.initialPromotionConfig;u.promote({transition:l?l.transition:void 0,preserveFollowOpacity:l&&l.shouldPreserveFollowOpacity?l.shouldPreserveFollowOpacity(u):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){const{layoutId:i}=this.options;return i?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:i}=this.options;return i?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:u,preserveFollowOpacity:o}={}){const l=this.getStack();l&&l.promote(this,o),i&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let u=!1;const{latestValues:o}=i;if((o.z||o.rotate||o.rotateX||o.rotateY||o.rotateZ||o.skewX||o.skewY)&&(u=!0),!u)return;const l={};o.z&&Ms("z",i,l,this.animationValues);for(let m=0;m<Rs.length;m++)Ms(`rotate${Rs[m]}`,i,l,this.animationValues),Ms(`skew${Rs[m]}`,i,l,this.animationValues);i.render();for(const m in l)i.setStaticValue(m,l[m]),this.animationValues&&(this.animationValues[m]=l[m]);i.scheduleRender()}applyProjectionStyles(i,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){i.visibility="hidden";return}const o=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,i.visibility="",i.opacity="",i.pointerEvents=ls(u?.pointerEvents)||"",i.transform=o?o(this.latestValues,""):"none";return}const l=this.getLead();if(!this.projectionDelta||!this.layout||!l.target){this.options.layoutId&&(i.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,i.pointerEvents=ls(u?.pointerEvents)||""),this.hasProjected&&!$t(this.latestValues)&&(i.transform=o?o({},""):"none",this.hasProjected=!1);return}i.visibility="";const m=l.animationValues||l.latestValues;this.applyTransformsToTarget();let c=Id(this.projectionDeltaWithTransform,this.treeScale,m);o&&(c=o(m,c)),i.transform=c;const{x:h,y:w}=this.projectionDelta;i.transformOrigin=`${h.origin*100}% ${w.origin*100}% 0`,l.animationValues?i.opacity=l===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:i.opacity=l===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const x in fa){if(m[x]===void 0)continue;const{correct:S,applyTo:k,isCSSVariable:j}=fa[x],I=c==="none"?m[x]:S(m[x],l);if(k){const D=k.length;for(let v=0;v<D;v++)i[k[v]]=I}else j?this.options.visualElement.renderState.vars[x]=I:i[x]=I}this.options.layoutId&&(i.pointerEvents=l===this?ls(u?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>i.currentAnimation?.stop()),this.root.nodes.forEach(Ja),this.root.sharedNodes.clear()}}}function Md(t){t.updateLayout()}function Ld(t){const s=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&s&&t.hasListeners("didUpdate")){const{layoutBox:a,measuredBox:n}=t.layout,{animationType:r}=t.options,d=s.source!==t.layout.source;r==="size"?ht(m=>{const c=d?s.measuredBox[m]:s.layoutBox[m],h=tt(c);c.min=a[m].min,c.max=c.min+h}):vi(r,s.layoutBox,a)&&ht(m=>{const c=d?s.measuredBox[m]:s.layoutBox[m],h=tt(a[m]);c.max=c.min+h,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+h)});const i=Bt();Kt(i,a,s.layoutBox);const u=Bt();d?Kt(u,t.applyTransform(n,!0),s.measuredBox):Kt(u,a,s.layoutBox);const o=!gi(i);let l=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:c,layout:h}=m;if(c&&h){const w=qe();ps(w,s.layoutBox,c.layoutBox);const x=qe();ps(x,a,h.layoutBox),xi(w,x)||(l=!0),m.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=w,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:a,snapshot:s,delta:u,layoutDelta:i,hasLayoutChanged:o,hasRelativeLayoutChanged:l})}else if(t.isLead()){const{onExitComplete:a}=t.options;a&&a()}t.options.transition=void 0}function Od(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function _d(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Fd(t){t.clearSnapshot()}function Ja(t){t.clearMeasurements()}function Xa(t){t.isLayoutDirty=!1}function $d(t){const{visualElement:s}=t.options;s&&s.getProps().onBeforeLayoutMeasure&&s.notify("BeforeLayoutMeasure"),t.resetTransform()}function Za(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Bd(t){t.resolveTargetDelta()}function Vd(t){t.calcProjection()}function Ud(t){t.resetSkewAndRotation()}function zd(t){t.removeLeadSnapshot()}function Qa(t,s,a){t.translate=Ge(s.translate,0,a),t.scale=Ge(s.scale,1,a),t.origin=s.origin,t.originPoint=s.originPoint}function en(t,s,a,n){t.min=Ge(s.min,a.min,n),t.max=Ge(s.max,a.max,n)}function qd(t,s,a,n){en(t.x,s.x,a.x,n),en(t.y,s.y,a.y,n)}function Gd(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Hd={duration:.45,ease:[.4,0,.1,1]},tn=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),sn=tn("applewebkit/")&&!tn("chrome/")?Math.round:qt;function an(t){t.min=sn(t.min),t.max=sn(t.max)}function Wd(t){an(t.x),an(t.y)}function vi(t,s,a){return t==="position"||t==="preserve-aspect"&&!nd(Ya(s),Ya(a),.2)}function Yd(t){return t!==t.root&&t.scroll?.wasRoot}const Kd=yi({attachResizeListener:(t,s)=>Qt(t,"resize",s),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ls={current:void 0},wi=yi({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Ls.current){const t=new Kd({});t.mount(window),t.setOptions({layoutScroll:!0}),Ls.current=t}return Ls.current},resetTransform:(t,s)=>{t.style.transform=s!==void 0?s:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Jd={pan:{Feature:bd},drag:{Feature:xd,ProjectionNode:wi,MeasureLayout:hi}};function nn(t,s,a){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",a==="Start");const r="onHover"+a,d=n[r];d&&lt.postRender(()=>d(s,es(s)))}class Xd extends Ct{mount(){const{current:s}=this.node;s&&(this.unmount=ho(s,(a,n)=>(nn(this.node,n,"Start"),r=>nn(this.node,r,"End"))))}unmount(){}}class Zd extends Ct{constructor(){super(...arguments),this.isActive=!1}onFocus(){let s=!1;try{s=this.node.current.matches(":focus-visible")}catch{s=!0}!s||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Mn(Qt(this.node.current,"focus",()=>this.onFocus()),Qt(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function rn(t,s,a){const{props:n}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",a==="Start");const r="onTap"+(a==="End"?"":a),d=n[r];d&&lt.postRender(()=>d(s,es(s)))}class Qd extends Ct{mount(){const{current:s}=this.node;s&&(this.unmount=po(s,(a,n)=>(rn(this.node,n,"Start"),(r,{success:d})=>rn(this.node,r,d?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ys=new WeakMap,Os=new WeakMap,eu=t=>{const s=Ys.get(t.target);s&&s(t)},tu=t=>{t.forEach(eu)};function su({root:t,...s}){const a=t||document;Os.has(a)||Os.set(a,{});const n=Os.get(a),r=JSON.stringify(s);return n[r]||(n[r]=new IntersectionObserver(tu,{root:t,...s})),n[r]}function au(t,s,a){const n=su(s);return Ys.set(t,a),n.observe(t),()=>{Ys.delete(t),n.unobserve(t)}}const nu={some:0,all:1};class iu extends Ct{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:s={}}=this.node.getProps(),{root:a,margin:n,amount:r="some",once:d}=s,i={root:a?a.current:void 0,rootMargin:n,threshold:typeof r=="number"?r:nu[r]},u=o=>{const{isIntersecting:l}=o;if(this.isInView===l||(this.isInView=l,d&&!l&&this.hasEnteredView))return;l&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",l);const{onViewportEnter:m,onViewportLeave:c}=this.node.getProps(),h=l?m:c;h&&h(o)};return au(this.node.current,i,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:s,prevProps:a}=this.node;["amount","margin","root"].some(ru(s,a))&&this.startObserver()}unmount(){}}function ru({viewport:t={}},{viewport:s={}}={}){return a=>t[a]!==s[a]}const ou={inView:{Feature:iu},tap:{Feature:Qd},focus:{Feature:Zd},hover:{Feature:Xd}},lu={layout:{ProjectionNode:wi,MeasureLayout:hi}},cu={...Zc,...ou,...Jd,...lu},we=$c(cu,Bc),on=[{text:"An investment in knowledge pays the best interest.",author:"Benjamin Franklin",category:"financial-literacy"},{text:"It's not how much money you make, but how much money you keep, how hard it works for you, and how many generations you keep it for.",author:"Robert Kiyosaki",category:"financial-literacy"},{text:"Financial peace isn't the acquisition of stuff. It's learning to live on less than you make, so you can give money back and have money to invest.",author:"Dave Ramsey",category:"financial-literacy"},{text:"Do not save what is left after spending; instead spend what is left after saving.",author:"Warren Buffett",category:"financial-literacy"},{text:"The stock market is a device for transferring money from the impatient to the patient.",author:"Warren Buffett",category:"financial-literacy"},{text:"Know what you own, and know why you own it.",author:"Peter Lynch",category:"financial-literacy"},{text:"The individual investor should act consistently as an investor and not as a speculator.",author:"Ben Graham",category:"financial-literacy"},{text:"Price is what you pay. Value is what you get.",author:"Warren Buffett",category:"financial-literacy"},{text:"The goal isn't more money. The goal is living life on your terms.",author:"Chris Brogan",category:"financial-freedom"},{text:"Financial freedom is available to those who learn about it and work for it.",author:"Robert Kiyosaki",category:"financial-freedom"},{text:"The rich invest in time, the poor invest in money.",author:"Warren Buffett",category:"financial-freedom"},{text:"Wealth is the ability to fully experience life.",author:"Henry David Thoreau",category:"financial-freedom"},{text:"It's not about having lots of money. It's about knowing how to manage the money you do have.",author:"Dave Ramsey",category:"financial-freedom"},{text:"Money is a terrible master but an excellent servant.",author:"P.T. Barnum",category:"financial-freedom"},{text:"The quickest way to double your money is to fold it in half and put it in your back pocket.",author:"Will Rogers",category:"financial-freedom"},{text:"The best time to plant a tree was 20 years ago. The second best time is now.",author:"Chinese Proverb",category:"motivation"},{text:"A journey of a thousand miles begins with a single step.",author:"Lao Tzu",category:"motivation"},{text:"Success is not final, failure is not fatal: it is the courage to continue that counts.",author:"Winston Churchill",category:"motivation"},{text:"The only way to do great work is to love what you do.",author:"Steve Jobs",category:"motivation"},{text:"Don't watch the clock; do what it does. Keep going.",author:"Sam Levenson",category:"motivation"},{text:"Wealth is not about having a lot of money; it's about having a lot of options.",author:"Chris Rock",category:"motivation"},{text:"Every time you borrow money, you're robbing your future self.",author:"Nathan W. Morris",category:"motivation"},{text:"The habit of saving is itself an education; it fosters every virtue, teaches self-denial, cultivates the sense of order, trains to forethought, and so broadens the mind.",author:"T.T. Munger",category:"motivation"},{text:"Too many people spend money they haven't earned, to buy things they don't want, to impress people they don't like.",author:"Will Rogers",category:"motivation"},{text:"A budget is telling your money where to go instead of wondering where it went.",author:"Dave Ramsey",category:"motivation"},{text:"Beware of little expenses. A small leak will sink a great ship.",author:"Benjamin Franklin",category:"motivation"},{text:"Never spend your money before you have earned it.",author:"Thomas Jefferson",category:"motivation"}];function ln(){return on[Math.floor(Math.random()*on.length)]}function du({isOpen:t,onClose:s,achievementId:a}){const[n,r]=f.useState(ln());if(f.useEffect(()=>{t&&a&&(r(ln()),Vt({particleCount:150,spread:100,origin:{y:.6},colors:["#FFD700","#FFA500","#FF6347","#9370DB","#3CB371"]}))},[t,a]),!a)return null;const d=Vn(a);return d?e.jsx(Rt,{open:t,onOpenChange:s,children:e.jsxs(Mt,{className:"w-[270px] sm:w-full sm:max-w-md bg-slate-950 border-[#38383A] p-0 overflow-hidden rounded-[32px] shadow-2xl transition-all duration-500",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 sm:w-64 sm:h-64 bg-yellow-500 blur-[60px] sm:blur-[120px] opacity-10 -mr-16 -mt-16 sm:-mr-32 sm:-mt-32"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 sm:w-48 sm:h-48 bg-indigo-500 blur-[50px] sm:blur-[100px] opacity-5 -ml-12 -mb-12 sm:-ml-24 sm:-mb-24"}),e.jsxs(Lt,{className:"px-6 sm:px-10 pt-8 sm:pt-12 pb-0 relative z-10",children:[e.jsx(Ot,{className:"text-center text-xl sm:text-3xl font-black text-white tracking-tight transition-all",children:"Achievement Unlocked"}),e.jsx(_t,{className:"text-center text-[8px] sm:text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] sm:tracking-[0.3em] mt-1 sm:mt-2 transition-all",children:"Protocol Milestone Verified"})]}),e.jsxs("div",{className:"space-y-6 sm:space-y-10 py-8 sm:py-12 px-6 sm:px-10 relative z-10",children:[e.jsxs("div",{className:"relative flex justify-center",children:[e.jsx(we.div,{className:"relative z-10",initial:{scale:0,rotateY:0},animate:{scale:1,rotateY:[0,1080],transition:{scale:{duration:.8,ease:"backOut"},rotateY:{duration:4,ease:"easeInOut"}}},children:e.jsxs("div",{className:"relative",children:[e.jsx(we.div,{className:"absolute inset-0 bg-yellow-400 blur-3xl opacity-20 rounded-full",animate:{scale:[1,1.3,1],opacity:[.2,.4,.2]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}),e.jsxs("div",{className:"relative w-32 h-32 sm:w-44 sm:h-44 bg-gradient-to-br from-yellow-400 via-orange-500 to-yellow-600 rounded-[32px] sm:rounded-[48px] flex items-center justify-center shadow-[0_15px_40px_rgba(234,179,8,0.25)] border-4 border-white/20 transition-all",children:[e.jsx("span",{className:"text-5xl sm:text-7xl drop-shadow-2xl transition-all",children:d.icon}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-white/10 to-transparent pointer-events-none rounded-[28px] sm:rounded-[44px]"})]})]})}),e.jsxs("div",{className:"absolute inset-0 z-20 flex justify-center items-center pointer-events-none",children:[e.jsx(we.div,{className:"absolute w-32 h-32 sm:w-48 sm:h-48 bg-yellow-500/40 blur-[40px] sm:blur-[60px] rounded-full",initial:{scale:0,opacity:0},animate:{scale:1.4,opacity:1},transition:{delay:.3,duration:1.2,ease:"easeOut"}}),e.jsx(we.div,{className:"absolute w-24 h-24 sm:w-36 sm:h-36 bg-indigo-500/30 blur-[30px] sm:blur-[45px] rounded-full -ml-8 -mt-6 sm:-ml-12 sm:-mt-10",initial:{scale:0,opacity:0},animate:{scale:1.8,opacity:.8},transition:{delay:.4,duration:1.2,ease:"easeOut"}}),e.jsx(we.div,{className:"absolute w-20 h-20 sm:w-32 sm:h-32 bg-rose-500/30 blur-[25px] sm:blur-[40px] rounded-full ml-10 mt-8 sm:ml-16 sm:mt-12",initial:{scale:0,opacity:0},animate:{scale:1.6,opacity:.8},transition:{delay:.5,duration:1.2,ease:"easeOut"}})]})]}),e.jsxs(we.div,{className:"text-center space-y-2 sm:space-y-4",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:.6},children:[e.jsx("h3",{className:"text-lg sm:text-3xl font-black bg-gradient-to-r from-yellow-200 via-yellow-500 to-yellow-200 bg-clip-text text-transparent tracking-tight transition-all",children:d.name}),e.jsx("p",{className:"text-slate-400 font-bold text-[11px] sm:text-sm leading-relaxed max-w-[200px] sm:max-w-[280px] mx-auto transition-all",children:d.description})]}),e.jsx(we.div,{className:"flex justify-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},children:e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"h-px w-12 sm:w-20 bg-gradient-to-r from-transparent via-white/10 to-transparent"}),e.jsx("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full bg-yellow-500/50 blur-[1px] animate-pulse"}),e.jsx("div",{className:"h-px w-12 sm:w-20 bg-gradient-to-r from-transparent via-white/10 to-transparent"})]})}),e.jsxs(we.div,{className:"p-4 sm:p-8 bg-white/5 rounded-2xl sm:rounded-[32px] border border-white/5 relative overflow-hidden transition-all",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:1},children:[e.jsx("div",{className:"absolute top-0 left-0 w-12 h-12 bg-indigo-500 blur-2xl opacity-5"}),e.jsxs("div",{className:"flex items-start gap-3 sm:gap-6 relative z-10 text-left",children:[e.jsx("span",{className:"text-xl sm:text-3xl pt-0 opacity-40",children:'"'}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-[10px] sm:text-sm font-bold italic text-slate-300 leading-snug sm:leading-relaxed tracking-tight transition-all",children:n.text}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 mt-3 sm:mt-6 transition-all",children:[e.jsx("div",{className:"h-px flex-1 bg-white/5"}),e.jsxs("p",{className:"text-[8px] sm:text-[10px] font-black text-slate-500 uppercase tracking-widest shrink-0",children:["â€” ",n.author]})]})]})]})]})]})]})}):null}function uu({isOpen:t,onClose:s,accounts:a,goals:n,currency:r,destinationType:d,emergencyFund:i,onAllocate:u}){const[o,l]=f.useState(""),[m,c]=f.useState(""),[h,w]=f.useState(""),[x,S]=f.useState(!1),k=a.find(M=>M.id===o),j=n.find(M=>M.id===m),I=parseFloat(h)||0,D=()=>{if(!o){L.error("Please select an account");return}if(d==="goal"&&!m){L.error("Please select a goal");return}if(!h||I<=0){L.error("Please enter a valid amount");return}if(k&&I>k.balance){L.error("Insufficient balance in selected account");return}S(!0)},v=()=>{u({accountId:o,destinationId:d==="goal"?m:"emergency-fund",amount:I,destinationType:d}),l(""),c(""),w(""),S(!1),s()},R=()=>{S(!1)},W=()=>{l(""),c(""),w(""),S(!1),s()};return e.jsx(Rt,{open:t,onOpenChange:W,children:e.jsxs(Mt,{className:"max-w-md",children:[e.jsxs(Lt,{children:[e.jsx(Ot,{children:d==="goal"?"ðŸŽ¯ Allocate to Goal":"ðŸ›¡ï¸ Allocate to Emergency Fund"}),e.jsxs(_t,{children:["Move funds from your account to ",d==="goal"?"a savings goal":"emergency fund"]})]}),x?e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Review your allocation"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border-2 border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"FROM"}),e.jsx("p",{className:"font-medium",children:k?.name}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Current Balance:"}),e.jsx("span",{className:"font-medium",children:fe(k?.balance||0,r)})]}),e.jsxs("div",{className:"flex justify-between text-sm text-red-600 dark:text-red-400",children:[e.jsx("span",{children:"Allocation:"}),e.jsxs("span",{children:["-",fe(I,r)]})]}),e.jsx("div",{className:"h-px bg-gray-300 dark:bg-gray-600"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"New Balance:"}),e.jsx("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:fe((k?.balance||0)-I,r)})]})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:e.jsx(Cn,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})})}),e.jsxs("div",{className:`p-4 rounded-lg border-2 ${d==="goal"?"bg-purple-50 dark:bg-purple-900/20 border-purple-200 dark:border-purple-800":"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"}`,children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"TO"}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-xl",children:d==="goal"?j?.emoji:"ðŸ›¡ï¸"}),e.jsx("p",{className:"font-medium",children:d==="goal"?j?.name:"Emergency Fund"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Current Amount:"}),e.jsx("span",{className:"font-medium",children:fe((d==="goal"?j?.currentAmount:i?.currentAmount)||0,r)})]}),e.jsxs("div",{className:"flex justify-between text-sm text-green-600 dark:text-green-400",children:[e.jsx("span",{children:"Adding:"}),e.jsxs("span",{children:["+",fe(I,r)]})]}),e.jsx("div",{className:"h-px bg-gray-300 dark:bg-gray-600"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"New Amount:"}),e.jsx("span",{className:"font-medium text-green-600 dark:text-green-400",children:fe(((d==="goal"?j?.currentAmount:i?.currentAmount)||0)+I,r)})]})]})]})]}),e.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(An,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-yellow-900 dark:text-yellow-100 mb-1",children:"Dashboard Balance Impact"}),e.jsxs("p",{className:"text-yellow-700 dark:text-yellow-300",children:["Your Net Balance and ",k?.name," balance will be reduced by ",fe(I,r)," immediately."]})]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(oe,{variant:"outline",onClick:R,className:"flex-1",children:"Back"}),e.jsx(oe,{onClick:v,className:"flex-1 bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700",children:"Confirm Allocation"})]})]}):e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"allocate-from-account",children:"From Account"}),e.jsxs(Je,{value:o,onValueChange:l,children:[e.jsx(Ze,{id:"allocate-from-account",name:"fromAccountId",children:e.jsx(Xe,{placeholder:"Select account"})}),e.jsx(Qe,{children:a.map(M=>e.jsx(Ne,{value:M.id,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:M.name}),e.jsx("span",{className:"text-sm text-gray-500 ml-4",children:fe(M.balance,r)})]})},M.id))})]}),k&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Available: ",fe(k.balance,r)]})]}),d==="goal"?e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"allocate-to-goal",children:"To Goal"}),e.jsxs(Je,{value:m,onValueChange:c,children:[e.jsx(Ze,{id:"allocate-to-goal",name:"toGoalId",children:e.jsx(Xe,{placeholder:"Select goal"})}),e.jsx(Qe,{children:n.map(M=>{const A=M.currentAmount/M.targetAmount*100;return e.jsx(Ne,{value:M.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:M.emoji}),e.jsxs("div",{children:[e.jsx("div",{children:M.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[Math.round(A),"% â€¢ ",fe(M.currentAmount,r)," / ",fe(M.targetAmount,r)]})]})]})},M.id)})})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"To Emergency Fund"}),e.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center",children:"ðŸ›¡ï¸"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:"Emergency Fund"}),i&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[fe(i.currentAmount,r)," / ",fe(i.targetAmount,r)]})]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"allocate-amount",children:"Amount to Allocate"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:r==="INR"?"â‚¹":"$"}),e.jsx(Ue,{id:"allocate-amount",name:"amount",type:"number",placeholder:"0",value:h,onChange:M=>w(M.target.value),className:"pl-8",min:"0",step:"0.01"})]}),k&&I>k.balance&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600",children:[e.jsx(Sn,{className:"w-4 h-4"}),e.jsx("span",{children:"Amount exceeds available balance"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(oe,{variant:"outline",onClick:W,className:"flex-1",children:"Cancel"}),e.jsx(oe,{onClick:D,className:"flex-1",children:"Preview"})]})]})]})})}const mu=[{name:"HDFC Bank",icon:"ðŸ¦",color:"#1d4ed8",type:"bank"},{name:"ICICI Bank",icon:"ðŸ¦",color:"#ea580c",type:"bank"},{name:"State Bank of India",icon:"ðŸ¦",color:"#2563eb",type:"bank"},{name:"Axis Bank",icon:"ðŸ¦",color:"#9d174d",type:"bank"},{name:"Kotak Mahindra Bank",icon:"ðŸ¦",color:"#dc2626",type:"bank"},{name:"Bank of America",icon:"ðŸ¦",color:"#0033aa",type:"bank"},{name:"Chase Bank",icon:"ðŸ¦",color:"#117aca",type:"bank"},{name:"Wells Fargo",icon:"ðŸ¦",color:"#d71e28",type:"bank"},{name:"HSBC",icon:"ðŸ¦",color:"#db0011",type:"bank"},{name:"Barclays",icon:"ðŸ¦",color:"#00aeef",type:"bank"},{name:"Standard Chartered",icon:"ðŸ¦",color:"#00945e",type:"bank"},{name:"Citibank",icon:"ðŸ¦",color:"#003b70",type:"bank"},{name:"DBS Bank",icon:"ðŸ¦",color:"#ff0000",type:"bank"},{name:"Federal Bank",icon:"ðŸ¦",color:"#0b5a91",type:"bank"},{name:"American Express",icon:"ðŸ’³",color:"#006fcf",type:"credit_card"},{name:"Discover",icon:"ðŸ’³",color:"#ff6600",type:"credit_card"},{name:"Capital One",icon:"ðŸ’³",color:"#d22e2e",type:"credit_card"},{name:"Goldman Sachs",icon:"ðŸ¦",color:"#725a34",type:"bank"},{name:"Morgan Stanley",icon:"ðŸ¦",color:"#000033",type:"bank"},{name:"Apple Card",icon:"ðŸ’³",color:"#000000",type:"credit_card"},{name:"PayPal",icon:"ðŸ’³",color:"#003087",type:"credit_card"},{name:"Revolut",icon:"ðŸ’³",color:"#000000",type:"credit_card"},{name:"Monzo",icon:"ðŸ’³",color:"#ff4d4f",type:"credit_card"}];function hu({accounts:t,currency:s,onCreateAccount:a,onUpdateAccount:n,onDeleteAccount:r}){const[d,i]=f.useState(!1),[u,o]=f.useState(null),[l,m]=f.useState({name:"",type:"bank",balance:0,color:ks[0],icon:Ss[0].value,creditLimit:0,safeLimitPercentage:30,serviceChargePercentage:0,statementDate:1}),[c,h]=f.useState([]),w=v=>{v?(o(v),m({name:v.name,type:v.type,balance:v.balance,color:v.color,icon:v.icon,creditLimit:v.creditLimit||0,safeLimitPercentage:v.safeLimitPercentage||30,serviceChargePercentage:v.serviceChargePercentage||0,statementDate:v.statementDate||1})):(o(null),m({name:"",type:"bank",balance:0,color:ks[0],icon:Ss[0].value,creditLimit:0,safeLimitPercentage:30,serviceChargePercentage:0,statementDate:1})),h([]),i(!0)},x=v=>{if(m({...l,name:v}),v.length>1){const R=mu.filter(W=>W.name.toLowerCase().includes(v.toLowerCase())).slice(0,4);h(R)}else h([])},S=v=>{m({...l,name:v.name,type:v.type,icon:v.icon,color:v.color}),h([])},k=async v=>{if(v.preventDefault(),!l.name.trim()){L.error("Please enter an account name");return}try{u?await n(u.id,l):await a(l),i(!1)}catch(R){console.error("Error saving account:",R)}},j=async v=>{if(confirm("Are you sure you want to delete this account? This action cannot be undone."))try{await r(v)}catch(R){console.error("Error deleting account:",R)}};return e.jsxs("div",{className:"space-y-12 animate-in fade-in slide-in-from-bottom-4 duration-700 px-4 pb-24",children:[e.jsxs("div",{className:"flex items-end justify-between gap-6",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-3xl font-black text-slate-100 tracking-tight leading-none mb-3 truncate",children:"Accounts & Cards"}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.jsxs("span",{className:"text-[8px] font-black uppercase tracking-widest text-emerald-500 bg-emerald-500/10 px-2 py-0.5 rounded-lg border border-emerald-500/20 whitespace-nowrap",children:[t.filter(v=>v.type==="bank").length," Banks"]}),e.jsxs("span",{className:"text-[8px] font-black uppercase tracking-widest text-rose-500 bg-rose-500/10 px-2 py-0.5 rounded-lg border border-rose-500/20 whitespace-nowrap",children:[t.filter(v=>v.type==="credit_card").length," Credit"]}),e.jsxs("span",{className:"text-[8px] font-black uppercase tracking-widest text-amber-500 bg-amber-500/10 px-2 py-0.5 rounded-lg border border-amber-500/20 whitespace-nowrap",children:[t.filter(v=>v.type==="cash").length," Cash"]}),e.jsxs("span",{className:"text-[8px] font-black uppercase tracking-widest text-blue-500 bg-blue-500/10 px-2 py-0.5 rounded-lg border border-blue-500/20 whitespace-nowrap",children:[t.filter(v=>v.type==="investment").length," Holding"]})]}),e.jsx("p",{className:"text-slate-500 font-bold max-w-md text-[10px] truncate",children:"Monitor liquidity across core reservoirs and credit pools."})]}),e.jsxs(oe,{onClick:()=>w(),className:"bg-emerald-600 hover:bg-emerald-500 text-white rounded-xl px-6 h-12 font-bold shadow-lg shadow-emerald-600/20 transition-all active:scale-95 shrink-0",children:[e.jsx(ds,{className:"w-4 h-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Account"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2",children:[e.jsx(Cr,{className:"w-3.5 h-3.5"}),"Bank Accounts"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.filter(v=>v.type==="bank").map(v=>e.jsx(I,{account:v},v.id)),t.filter(v=>v.type==="bank").length===0&&e.jsx(D,{message:"No bank accounts detected."})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2",children:[e.jsx(Ar,{className:"w-3.5 h-3.5"}),"Credit Pools (Cards)"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.filter(v=>v.type==="credit_card").map(v=>e.jsx(I,{account:v},v.id)),t.filter(v=>v.type==="credit_card").length===0&&e.jsx(D,{message:"No credit pools detected."})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2",children:[e.jsx(wn,{className:"w-3.5 h-3.5"}),"Cash in Hand"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.filter(v=>v.type==="cash").map(v=>e.jsx(I,{account:v},v.id)),t.filter(v=>v.type==="cash").length===0&&e.jsx(D,{message:"No physical liquid reservoirs detected."})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2",children:[e.jsx(xs,{className:"w-3.5 h-3.5"}),"Investment Holding Nodes"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.filter(v=>v.type==="investment").map(v=>e.jsx(I,{account:v},v.id)),t.filter(v=>v.type==="investment").length===0&&e.jsx("div",{className:"md:col-span-2 lg:col-span-3 p-8 border border-dashed border-white/5 squircle-22 flex items-center justify-center text-slate-600 font-bold text-xs",children:"No investment nodes detected. Link them to track growth separately."})]})]}),e.jsx(Rt,{open:d,onOpenChange:i,children:e.jsxs(Mt,{className:"max-w-md max-h-[90vh] overflow-y-auto bg-slate-950 border-white/10 text-white squircle-22 p-8 custom-scrollbar",children:[e.jsxs(Lt,{children:[e.jsx(Ot,{className:"text-3xl font-black tracking-tight text-white mb-2",children:u?"Refine Account":"New Liquidity Reservoir"}),e.jsx(_t,{className:"text-slate-500 font-bold mb-6",children:"Establish a new liquidity pool in the Obsidian system."})]}),e.jsxs("form",{onSubmit:k,className:"space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"name",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Account Identity"}),e.jsx(Ue,{id:"name",name:"name",value:l.name,onChange:v=>x(v.target.value),placeholder:"e.g. Mercury Checking",required:!0,className:"bg-white/5 border-white/5 squircle-12 h-14 text-white focus:ring-emerald-500/50",autoComplete:"off"}),c.length>0&&e.jsxs("div",{className:"mt-3 p-4 bg-indigo-500/5 border border-indigo-500/10 squircle-12 flex items-start gap-4 animate-in fade-in zoom-in-95 duration-300",children:[e.jsx(Ht,{className:"w-4 h-4 text-indigo-400 mt-1 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-indigo-300 mb-3 opacity-60",children:"Intelligence Suggested"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:c.map(v=>e.jsxs("button",{type:"button",onClick:()=>S(v),className:"flex items-center gap-3 p-2.5 squircle-12 bg-white/5 hover:bg-white/10 transition-all group border border-white/5",children:[e.jsx("span",{className:"text-lg group-hover:scale-110 transition-transform",children:v.icon}),e.jsx("span",{className:"text-xs font-bold text-slate-300 group-hover:text-white transition-colors",children:v.name})]},v.name))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${l.type==="bank"?"border-emerald-500 bg-emerald-500/10":"border-white/5 bg-white/5 hover:border-white/10"}`,onClick:()=>m({...l,type:"bank"}),children:[e.jsx("div",{className:"w-10 h-10 squircle-12 bg-emerald-500/20 flex items-center justify-center text-xl mb-2",children:"ðŸ¦"}),e.jsx("p",{className:"text-[9px] font-black uppercase text-white leading-tight",children:"Bank Reservoir"})]}),e.jsxs("div",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${l.type==="credit_card"?"border-rose-500 bg-rose-500/10":"border-white/5 bg-white/5 hover:border-white/10"}`,onClick:()=>m({...l,type:"credit_card"}),children:[e.jsx("div",{className:"w-10 h-10 squircle-12 bg-rose-500/20 flex items-center justify-center text-xl mb-2",children:"ðŸ’³"}),e.jsx("p",{className:"text-[9px] font-black uppercase text-white leading-tight",children:"Credit Pool"})]}),e.jsxs("div",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${l.type==="cash"?"border-amber-500 bg-amber-500/10":"border-white/5 bg-white/5 hover:border-white/10"}`,onClick:()=>m({...l,type:"cash"}),children:[e.jsx("div",{className:"w-10 h-10 squircle-12 bg-amber-500/20 flex items-center justify-center text-xl mb-2",children:"ðŸ’µ"}),e.jsx("p",{className:"text-[9px] font-black uppercase text-white leading-tight",children:"Cash in Hand"})]}),e.jsxs("div",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${l.type==="investment"?"border-blue-500 bg-blue-500/10":"border-white/5 bg-white/5 hover:border-white/10"}`,onClick:()=>m({...l,type:"investment"}),children:[e.jsx("div",{className:"w-10 h-10 squircle-12 bg-blue-500/20 flex items-center justify-center text-xl mb-2",children:"ðŸ“ˆ"}),e.jsx("p",{className:"text-[9px] font-black uppercase text-white leading-tight",children:"Growth Node"})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"balance",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:l.type==="bank"||l.type==="cash"||l.type==="investment"?"Initial Liquidity":"Current Spent Balance"}),e.jsx(Ut,{id:"balance",name:"balance",value:l.balance,onChange:v=>m({...l,balance:parseFloat(v)||0}),placeholder:"0.00",className:"bg-white/5 border-white/5 squircle-12 h-14 text-white",autoComplete:"off"})]}),l.type==="credit_card"&&e.jsxs("div",{className:"space-y-6 animate-in slide-in-from-top-4 duration-500",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"creditLimit",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Total Credit Limit"}),e.jsx(Ut,{id:"creditLimit",name:"creditLimit",value:l.creditLimit,onChange:v=>m({...l,creditLimit:parseFloat(v)||0}),placeholder:"e.g. 100000",className:"bg-white/5 border-white/5 squircle-12 h-14 text-white",autoComplete:"off"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"safeLimit",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Safe Use Threshold (%)"}),e.jsx(Ut,{id:"safeLimit",name:"safeLimitPercentage",value:l.safeLimitPercentage,onChange:v=>m({...l,safeLimitPercentage:parseFloat(v)||30}),placeholder:"30",className:"bg-white/5 border-white/5 squircle-12 h-14 text-white",autoComplete:"off"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"serviceCharge",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Svc Charge (%)"}),e.jsx(Ut,{id:"serviceCharge",name:"serviceChargePercentage",value:l.serviceChargePercentage,onChange:v=>m({...l,serviceChargePercentage:parseFloat(v)||0}),placeholder:"0.0",className:"bg-white/5 border-white/5 squircle-12 h-14 text-white",autoComplete:"off"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"statementDate",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Statement Date"}),e.jsxs(Je,{value:l.statementDate.toString(),onValueChange:v=>m({...l,statementDate:parseInt(v)}),children:[e.jsx(Ze,{id:"statementDate",name:"statementDate",className:"bg-white/5 border-white/5 squircle-12 h-14 text-white",children:e.jsx(Xe,{})}),e.jsx(Qe,{className:"bg-slate-900 border-white/10 text-white",children:[...Array(31)].map((v,R)=>e.jsx(Ne,{value:(R+1).toString(),children:R+1},R+1))})]})]})]})]}),e.jsxs("div",{children:[e.jsx(ee,{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"System Icon"}),e.jsx("div",{className:"grid grid-cols-6 sm:grid-cols-9 gap-2",children:Ss.map(v=>e.jsx("button",{type:"button",onClick:()=>m({...l,icon:v.value}),className:`w-10 h-10 squircle-12 flex items-center justify-center text-lg border-2 transition-all ${l.icon===v.value?"border-emerald-500 bg-emerald-500/10":"border-white/5 bg-white/5 hover:border-white/10"}`,children:v.value},v.value))})]}),e.jsxs("div",{children:[e.jsx(ee,{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Brand Color"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:ks.map(v=>{const R={style:{"--btn-color":v}};return e.jsx("button",{type:"button",onClick:()=>m({...l,color:v}),"aria-label":`Select color ${v}`,className:`w-8 h-8 rounded-full border-4 transition-all bg-[length:100%_100%] bg-[var(--btn-color)] ${l.color===v?"border-white scale-110 shadow-lg shadow-white/20":"border-transparent hover:scale-105"}`,...R},v)})})]})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx(oe,{type:"button",variant:"ghost",onClick:()=>i(!1),className:"flex-1 h-14 squircle-12 font-bold text-slate-500 hover:text-white",children:"Abort"}),e.jsx(oe,{type:"submit",className:"flex-1 h-14 squircle-12 bg-emerald-600 hover:bg-emerald-500 text-white font-black shadow-lg shadow-emerald-600/20",children:u?"Update Account":"Ignite Account"})]})]})]})})]});function I({account:v}){const R=v.type==="credit_card",W=R?(v.creditLimit||0)*(v.safeLimitPercentage||30)/100:0,M=R&&v.creditLimit?Math.abs(v.balance)/v.creditLimit*100:0,A=R&&M<=(v.safeLimitPercentage||30);return e.jsxs(Ke,{className:"p-6 bg-slate-900/40 border-white/5 squircle-22 border hover:bg-slate-900/60 transition-all duration-300 group relative overflow-hidden",children:[(()=>{const T={style:{"--card-glow":v.color}};return e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20 bg-[var(--card-glow)]",...T})})(),e.jsxs("div",{className:"flex items-start justify-between mb-8 relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[(()=>{const T={style:{"--icon-bg":v.color+"15"}};return e.jsx("div",{className:"w-16 h-16 squircle-12 flex items-center justify-center text-3xl shadow-inner border border-white/5 group-hover:scale-105 transition-transform bg-[var(--icon-bg)]",...T,children:v.icon})})(),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-xl font-black text-slate-100 truncate",children:v.name}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${R?A?"bg-indigo-500":"bg-rose-500":"bg-emerald-500"}`}),e.jsx("span",{className:"text-[10px] uppercase font-black tracking-widest text-slate-500",children:R?"Credit Pool":"Bank Account"})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(oe,{variant:"ghost",title:"Edit Account",size:"sm",onClick:()=>w(v),className:"w-8 h-8 p-0 squircle-12 hover:bg-white/5 text-slate-600 hover:text-white transition-all",children:e.jsx(Er,{className:"w-3.5 h-3.5"})}),e.jsx(oe,{variant:"ghost",title:"Delete Account",size:"sm",onClick:()=>j(v.id),className:"w-8 h-8 p-0 squircle-12 hover:bg-rose-500/10 text-slate-600 hover:text-rose-400 transition-all",children:e.jsx(Jt,{className:"w-3.5 h-3.5"})})]})]}),e.jsxs("div",{className:"pt-6 border-t border-white/5 relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[10px] uppercase font-black tracking-widest text-slate-600",children:R?"Current Obligation":"Available Liquidity"}),(()=>{const T={style:{"--balance-color":v.color}};return e.jsx("h4",{className:"text-2xl font-black tabular-nums tracking-tight text-[var(--balance-color)]",...T,children:fe(v.balance,s)})})()]}),R&&v.creditLimit?e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[9px] font-black text-slate-600 uppercase mb-1",children:"Limit Use"}),e.jsxs("p",{className:`text-xs font-black tabular-nums ${A?"text-indigo-400":"text-rose-400"}`,children:[M.toFixed(1),"%"]})]}):e.jsx("div",{className:"bg-white/5 px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest text-slate-500 border border-white/5",children:"Synced"})]}),R&&v.creditLimit&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-white/5 flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[8px] font-black text-slate-700 uppercase",children:"Safe Threshold"}),e.jsx("p",{className:"text-[10px] font-black text-slate-500",children:fe(W,s)})]}),v.serviceChargePercentage?e.jsxs("div",{className:"text-right space-y-1",children:[e.jsx("p",{className:"text-[8px] font-black text-slate-700 uppercase",children:"Svc Charge"}),e.jsxs("p",{className:"text-[10px] font-black text-slate-500",children:[v.serviceChargePercentage,"%"]})]}):null,R&&v.statementDate&&e.jsxs("div",{className:"text-right space-y-1 ml-auto",children:[e.jsx("p",{className:"text-[8px] font-black text-slate-700 uppercase",children:"Statement"}),e.jsxs("p",{className:"text-[10px] font-black text-slate-500",children:["Day ",v.statementDate]})]})]})]})]})}function D({message:v}){return e.jsx("div",{className:"py-12 text-center bg-slate-800/20 squircle-22 border border-dashed border-white/10 col-span-full",children:e.jsx("p",{className:"text-sm text-slate-500 font-bold",children:v})})}}function pu({isOpen:t,onClose:s,accounts:a,currency:n,onTransfer:r}){const[d,i]=f.useState(""),[u,o]=f.useState(""),[l,m]=f.useState(""),[c,h]=f.useState(!1),w=a.find(D=>D.id===d),x=a.find(D=>D.id===u),S=parseFloat(l)||0,k=()=>{if(!d){L.error("Please select source reservoir");return}if(!u){L.error("Please select destination reservoir");return}if(d===u){L.error("Source and destination must be different");return}if(!l||S<=0){L.error("Please enter a valid amount");return}if(w&&S>w.balance){L.error("Insufficient funds in source reservoir");return}h(!0)},j=()=>{r(d,u,S),I()},I=()=>{i(""),o(""),m(""),h(!1),s()};return e.jsx(Rt,{open:t,onOpenChange:I,children:e.jsxs(Mt,{className:"max-w-md max-h-[90vh] overflow-y-auto bg-[#020408] border-white/5 p-0 shadow-2xl custom-scrollbar text-white",children:[e.jsxs("div",{className:"px-8 pt-10 pb-8 border-b border-white/5 relative overflow-hidden bg-indigo-500/5",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 blur-[60px] opacity-20 -mr-16 -mt-16 bg-indigo-500"}),e.jsxs(Lt,{className:"relative z-10",children:[e.jsxs(Ot,{className:"text-2xl font-black tracking-tighter text-slate-100 flex items-center gap-3",children:[e.jsx(Bs,{className:"w-6 h-6 text-indigo-400"}),"Capital Migration"]}),e.jsx(_t,{className:"text-slate-500 font-bold text-[10px] uppercase tracking-[0.2em] mt-1",children:"Transfer between core liquidity reservoirs"})]})]}),e.jsx("div",{className:"p-8",children:c?e.jsxs("div",{className:"space-y-6 animate-in fade-in zoom-in-95 duration-300",children:[e.jsxs("div",{className:"p-6 bg-slate-900/50 border border-white/5 rounded-3xl space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 text-center space-y-2",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-slate-800 border border-white/10 flex items-center justify-center text-2xl mx-auto",children:w?.icon}),e.jsx("p",{className:"text-[10px] font-black uppercase text-slate-500 truncate",children:w?.name})]}),e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx(Bs,{className:"w-6 h-6 text-indigo-400 animate-pulse"}),e.jsx("p",{className:"text-[10px] font-black text-indigo-400",children:fe(S,n)})]}),e.jsxs("div",{className:"flex-1 text-center space-y-2",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-slate-800 border border-white/10 flex items-center justify-center text-2xl mx-auto",children:x?.icon}),e.jsx("p",{className:"text-[10px] font-black uppercase text-slate-500 truncate",children:x?.name})]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/5",children:[e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:"text-slate-500 font-bold",children:"Source New Balance"}),e.jsx("span",{className:"text-rose-400 font-black",children:fe((w?.balance||0)-S,n)})]}),e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:"text-slate-500 font-bold",children:"Dest. New Balance"}),e.jsx("span",{className:"text-emerald-400 font-black",children:fe((x?.balance||0)+S,n)})]})]})]}),e.jsxs("div",{className:"p-4 bg-amber-500/5 border border-amber-500/10 rounded-2xl flex gap-3",children:[e.jsx(An,{className:"w-5 h-5 text-amber-500 flex-shrink-0"}),e.jsx("p",{className:"text-[10px] text-amber-200/60 font-medium leading-relaxed",children:"Notice: This migration will instantly adjust the liquidity status of both reservoirs. This action is recorded in the central protocol."})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx(oe,{variant:"ghost",onClick:()=>h(!1),className:"flex-1 h-12 rounded-2xl text-slate-500 font-bold hover:bg-white/5",children:"Back"}),e.jsx(oe,{onClick:j,className:"flex-1 h-12 rounded-2xl bg-indigo-600 hover:bg-indigo-500 text-white font-black shadow-lg shadow-indigo-600/20 transition-all active:scale-95",children:"Confirm Migration"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(ee,{htmlFor:"source-reservoir",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Source Reservoir"}),e.jsxs(Je,{value:d,onValueChange:i,children:[e.jsx(Ze,{id:"source-reservoir",className:"h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-200 font-bold",children:e.jsx(Xe,{placeholder:"Select source"})}),e.jsx(Qe,{className:"bg-slate-900 border-white/5 max-h-[40vh]",children:a.map(D=>e.jsx(Ne,{value:D.id,className:"focus:bg-white/5 focus:text-white",children:e.jsxs("div",{className:"flex items-center justify-between w-full pr-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xl",children:D.icon}),e.jsx("span",{children:D.name})]}),e.jsx("span",{className:"text-xs font-black text-slate-500",children:fe(D.balance,n)})]})},D.id))})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ee,{htmlFor:"dest-reservoir",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Destination Reservoir"}),e.jsxs(Je,{value:u,onValueChange:o,children:[e.jsx(Ze,{id:"dest-reservoir",className:"h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-200 font-bold",children:e.jsx(Xe,{placeholder:"Select destination"})}),e.jsx(Qe,{className:"bg-slate-900 border-white/5 max-h-[40vh]",children:a.map(D=>e.jsx(Ne,{value:D.id,className:"focus:bg-white/5 focus:text-white",disabled:D.id===d,children:e.jsxs("div",{className:"flex items-center justify-between w-full pr-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xl",children:D.icon}),e.jsx("span",{children:D.name})]}),e.jsx("span",{className:"text-xs font-black text-slate-500",children:fe(D.balance,n)})]})},D.id))})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ee,{htmlFor:"migration-amount",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",children:"Capital Amount"}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-500 font-bold group-focus-within:text-indigo-400 transition-colors",children:n==="INR"?"â‚¹":"$"}),e.jsx(Ue,{id:"migration-amount",name:"amount",type:"number",placeholder:"0.00",value:l,onChange:D=>m(D.target.value),className:"pl-12 h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-100 font-black text-xl"})]}),w&&S>w.balance&&e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-rose-400 ml-1 animate-in slide-in-from-top-1",children:[e.jsx(Sn,{className:"w-3 h-3"}),e.jsx("span",{children:"Insufficient stability in source reservoir"})]})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx(oe,{variant:"ghost",onClick:I,className:"flex-1 h-12 rounded-2xl text-slate-500 font-bold hover:bg-white/5",children:"Cancel"}),e.jsx(oe,{onClick:k,className:"flex-1 h-12 rounded-2xl bg-indigo-600 hover:bg-indigo-500 text-white font-black shadow-lg shadow-indigo-600/20 transition-all active:scale-95",children:"Verify Migration"})]})]})})]})})}function fu({onRefresh:t,children:s}){const a=f.useRef(0),[n,r]=f.useState(0),[d,i]=f.useState(!1),u=f.useRef(null),o=80,l=c=>{u.current&&u.current.scrollTop===0&&(a.current=c.touches[0].clientY)};f.useEffect(()=>{const c=w=>{if(a.current===0)return;const S=w.touches[0].clientY-a.current;if(S>0&&u.current&&u.current.scrollTop===0){w.cancelable&&w.preventDefault();const k=Math.min(S,o*1.5);k>=o&&n<o&&window.navigator.vibrate&&window.navigator.vibrate(10),r(k)}},h=u.current;return h&&h.addEventListener("touchmove",c,{passive:!1}),()=>{h&&h.removeEventListener("touchmove",c)}},[]);const m=async()=>{n>=o&&!d&&(i(!0),await t(),i(!1)),r(0),a.current=0};return e.jsxs("div",{ref:u,className:"relative overflow-y-auto",onTouchStart:l,onTouchEnd:m,children:[e.jsx(we.div,{className:"absolute top-0 left-0 right-0 flex justify-center items-center",style:{height:n,opacity:n/o},animate:{y:d?0:-o},children:e.jsxs("div",{className:"flex flex-col items-center gap-2 py-4",children:[e.jsx(we.div,{animate:{rotate:d?360:n/o*180},transition:{rotate:{duration:d?1:0,repeat:d?1/0:0,ease:"linear"}},children:e.jsx(gs,{className:"w-6 h-6 text-[#0A84FF]"})}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-[#8E8E93]",children:d?"Synchronizing...":n>=o?"Relinquish to Sync":"Pull to Synchronize"})]})}),e.jsx(we.div,{animate:{y:d?60:0},transition:{duration:.2},children:s})]})}function It({className:t,...s}){return e.jsx("div",{"data-slot":"skeleton",className:ge("bg-accent animate-pulse rounded-md",t),...s})}function gu(){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Ke,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(It,{className:"w-12 h-12 rounded-lg"}),e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx(It,{className:"h-5 w-32"}),e.jsx(It,{className:"h-4 w-48"})]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[1,2,3].map(t=>e.jsx("div",{className:"space-y-2",children:e.jsx(It,{className:"h-20 w-full rounded-lg"})},t))})]}),[1,2,3].map(t=>e.jsx(Ke,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(It,{className:"h-6 w-48"}),e.jsx(It,{className:"h-4 w-full"}),e.jsx(It,{className:"h-4 w-3/4"})]})},t))]})}function xu(t,s,a=30){let n=0;const r=i=>{n=i.touches[0].clientX},d=i=>{const o=i.touches[0].clientX-n;n<a&&o>30&&(i.cancelable&&i.preventDefault(),window.navigator.vibrate&&window.navigator.vibrate(20),t(),n=window.innerWidth),n>window.innerWidth-a&&o<-30&&(i.cancelable&&i.preventDefault(),window.navigator.vibrate&&window.navigator.vibrate(20),s(),n=0)};return document.addEventListener("touchstart",r,{passive:!0}),document.addEventListener("touchmove",d,{passive:!1}),()=>{document.removeEventListener("touchstart",r),document.removeEventListener("touchmove",d)}}const bu=({onOpenAI:t,onAddTransaction:s,onMigrate:a,isVisible:n})=>e.jsxs("div",{id:"fab-dock",className:`fixed right-5 bottom-[110px] flex flex-col gap-3.5 z-[110] transition-all duration-500 ease-[cubic-bezier(0.2,1,0.3,1)] ${n?"translate-x-0 opacity-100":"translate-x-[100px] opacity-0"}`,children:[e.jsx("div",{onClick:t,title:"AI Assistant",className:"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-[#a855f74d] shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-[#A855F7] hover:scale-110 active:scale-95 transition-all duration-300 group",children:e.jsx(Ht,{className:"w-5 h-5 group-hover:rotate-12 transition-transform"})}),e.jsx("div",{onClick:a,title:"Migrate Capital",className:"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-indigo-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-indigo-400 hover:scale-110 active:scale-95 transition-all duration-300 group",children:e.jsx(Bs,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})}),e.jsx("div",{onClick:()=>s("debt"),title:"Added Personal IOU",className:"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-yellow-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-yellow-500 hover:scale-110 active:scale-95 transition-all duration-300 group",children:e.jsx(Nn,{className:"w-5 h-5 group-hover:-translate-y-0.5 transition-transform"})}),e.jsx("div",{onClick:()=>s("income"),title:"Add Money In",className:"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-emerald-500/40 shadow-[0_0_20px_rgba(16,185,129,0.1)] cursor-pointer text-emerald-500 hover:scale-110 active:scale-95 transition-all duration-300 group",children:e.jsx(ds,{className:"w-5 h-5 group-hover:rotate-90 transition-transform"})}),e.jsx("div",{onClick:()=>s("expense"),title:"Add Money Out",className:"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-rose-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-rose-500 hover:scale-110 active:scale-95 transition-all duration-300 group",children:e.jsx(Tr,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})})]}),yu=({isOpen:t,onClose:s,context:a,settings:n})=>{const[r,d]=f.useState(""),[i,u]=f.useState([{text:"Hello! I've analyzed your cash flow. How can I assist with your goals?",type:"ai"}]),[o,l]=f.useState(!1),m=f.useRef(null);f.useEffect(()=>{m.current&&m.current.scrollIntoView({behavior:"smooth"})},[i]);const c=async()=>{if(!r.trim()||o)return;const h=r.trim();d(""),u(w=>[...w,{text:h,type:"user"}]),l(!0);try{const w=await sc({userPrompt:h,context:a,settings:n,persona:"ANALYST"});u(x=>[...x,{text:w.text||"I'm analyzing that...",type:"ai"}])}catch{u(x=>[...x,{text:"Connection error. Please try again.",type:"ai"}])}finally{l(!1)}};return t?e.jsxs("div",{id:"ai-chat-overlay",className:"fixed inset-0 bg-[#020408] z-[200] flex flex-col p-6 animate-in fade-in zoom-in-95 duration-300",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-indigo-500/10 via-transparent to-transparent opacity-50"}),e.jsxs("div",{className:"flex justify-between items-center mb-10 relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-indigo-500/10 rounded-2xl flex items-center justify-center border border-indigo-500/20",children:e.jsx(Ht,{className:"text-indigo-400 w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-black text-2xl text-white tracking-tight leading-none",children:"AI Analyst"}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mt-1",children:"Neural Core Context"})]})]}),e.jsx("button",{onClick:s,"aria-label":"Close Chat",className:"bg-white/5 w-12 h-12 rounded-full flex items-center justify-center hover:bg-white/10 hover:text-white text-slate-400 transition-all active:scale-95",children:e.jsx(bs,{className:"w-6 h-6"})})]}),e.jsxs("div",{id:"chat-messages",className:"flex-1 overflow-y-auto space-y-4 pr-2 custom-scrollbar",children:[i.map((h,w)=>e.jsxs("div",{className:ge("p-4 rounded-[24px] text-sm leading-relaxed",h.type==="ai"?"bg-slate-900 border border-white/5 text-slate-200 self-start max-w-[85%]":"bg-indigo-600 text-white font-medium shadow-lg shadow-indigo-600/20 self-end max-w-[85%]"),children:[h.type==="ai"&&e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ht,{className:"w-3 h-3 text-indigo-400 font-black"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Guru Analysis"})]}),h.text]},w)),o&&e.jsx("div",{className:"p-4 bg-slate-900 border border-white/5 rounded-[24px] self-start animate-pulse",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:0ms]"}),e.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:150ms]"}),e.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:300ms]"})]})}),e.jsx("div",{ref:m})]}),e.jsxs("div",{className:"mt-8 flex gap-3 p-2 bg-slate-900/40 rounded-[28px] border border-white/5 relative z-10",children:[e.jsx("input",{type:"text",value:r,onChange:h=>d(h.target.value),onKeyDown:h=>h.key==="Enter"&&c(),placeholder:"Ask the analyst...",className:"flex-1 bg-transparent border-none px-6 py-4 text-white focus:outline-none placeholder:text-slate-600 font-bold"}),e.jsx("button",{onClick:c,disabled:o||!r.trim(),"aria-label":"Send Message",className:"w-14 h-14 bg-indigo-600 rounded-[22px] flex items-center justify-center shadow-lg shadow-indigo-900/30 hover:bg-indigo-500 transition-all active:scale-90 disabled:opacity-50 disabled:cursor-not-allowed group",children:e.jsx(Dr,{className:"w-6 h-6 text-white group-hover:-translate-y-1 transition-transform"})})]}),e.jsx("p",{className:"text-[9px] font-bold text-slate-600 text-center uppercase tracking-widest mt-4",children:"Encryption Verified // Neural Fabric Link Stable"})]}):null};class vu extends f.Component{state={hasError:!1};static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,a){console.error("Uncaught error:",s,a)}render(){return this.state.hasError?e.jsx("div",{className:"min-h-[400px] flex items-center justify-center p-6",children:e.jsxs(Ke,{className:"max-w-md w-full p-8 bg-slate-900 border-white/10 text-center space-y-6 rounded-[32px]",children:[e.jsx("div",{className:"w-16 h-16 bg-rose-500/10 rounded-full flex items-center justify-center mx-auto",children:e.jsx(kn,{className:"w-8 h-8 text-rose-500"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-tight",children:"System Glitch Detected"}),e.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"The neural link to this component was interrupted. This usually happens during background updates."})]}),this.state.error&&e.jsx("pre",{className:"text-[10px] bg-black/40 p-3 rounded-xl text-rose-400/80 overflow-x-auto text-left font-mono",children:this.state.error.message}),e.jsxs(oe,{onClick:()=>window.location.reload(),className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-black py-6 rounded-2xl gap-2 h-auto",children:[e.jsx(gs,{className:"w-4 h-4"}),"Re-establish Connection"]})]})}):this.props.children}}const wu=()=>{const{checkIdentity:t,login:s,isRememberedUser:a,rememberedMobile:n}=ys(),[r,d]=f.useState("identity"),[i,u]=f.useState(""),[o,l]=f.useState(""),[m,c]=f.useState(!1),[h,w]=f.useState(!1),[x,S]=f.useState(!1),[k,j]=f.useState(!1),I=f.useRef(null);f.useEffect(()=>{a&&n&&(u(n),d("verify"),D())},[a,n]);const D=async()=>{j(!0),setTimeout(async()=>{Math.random()>.2?await s("2255",!0)||j(!1):(j(!1),navigator.vibrate&&navigator.vibrate([50,50]))},1500)};f.useEffect(()=>{I.current?.focus()},[r]);const v=async()=>{if(i.length!==10)return;const A=await t(i);d(A?"verify":"create"),l("")},R=async()=>{r==="verify"?await s(o,h)?(navigator.vibrate&&navigator.vibrate([10]),!h&&!a&&S(!0)):W():r==="create"&&o.length===4&&(await s(o,h)||W())},W=()=>{c(!0),navigator.vibrate&&navigator.vibrate([50,30,50]),setTimeout(()=>c(!1),500),l("")},M=()=>r==="identity"?i.length!==10:r==="verify"||r==="create"?o.length!==4:!1;return e.jsxs("div",{className:"fixed inset-0 flex flex-col items-center justify-center overflow-hidden font-sans auth-mesh-gradient",children:[e.jsx("div",{className:"absolute inset-0 z-0 bg-[url('/mesh-grid.svg')] opacity-20"}),e.jsx(we.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},className:"absolute top-12 z-10",children:e.jsx("h1",{className:"text-xl font-bold tracking-tight text-white/90",children:"FinHub Beta"})}),e.jsxs("div",{className:"z-10 w-full max-w-sm px-8",children:[e.jsxs(Gt,{mode:"wait",children:[r==="identity"&&e.jsxs(we.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},exit:{x:-20,opacity:0},className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-white",children:"Welcome"}),e.jsx("p",{className:"text-white/50 text-sm mt-2",children:"Enter your mobile number to continue"})]}),e.jsxs("div",{className:"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-sky-500/50",children:[e.jsx("label",{className:"text-xs font-medium uppercase tracking-wider text-white/40",children:"Mobile Number"}),e.jsx("input",{ref:I,type:"text",inputMode:"numeric",maxLength:10,value:i,onChange:A=>u(A.target.value.replace(/\D/g,"")),className:"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none",placeholder:"999 999 9999"})]}),e.jsxs("div",{onClick:()=>{w(!h),navigator.vibrate&&navigator.vibrate(5)},className:"flex items-center gap-3 cursor-pointer self-center",children:[e.jsx("div",{className:`h-5 w-5 rounded-md border transition-all flex items-center justify-center ${h?"bg-sky-500 border-sky-500":"border-white/20 bg-white/5"}`,children:h&&e.jsx($s,{className:"h-3.5 w-3.5 text-white"})}),e.jsx("span",{className:"text-sm text-white/60 font-medium",children:"Remember me for 30 days"})]})]},"identity"),(r==="verify"||r==="create")&&e.jsxs(we.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,x:m?[0,-10,10,-10,10,0]:0},exit:{scale:1.1,opacity:0},className:"relative flex flex-col gap-8 items-center",children:[e.jsx(we.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 z-[-1] bg-black/80 backdrop-blur-xl"}),e.jsxs("div",{className:"text-center",children:[e.jsx(we.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"mb-4 flex justify-center",children:e.jsx("div",{className:"p-4 rounded-full bg-white/5 ring-1 ring-white/10",children:e.jsx(Js,{className:"h-8 w-8 text-sky-400"})})}),e.jsx("h2",{className:"text-2xl font-semibold text-white",children:r==="verify"?"Private Access":"Secure Setup"}),e.jsx("p",{className:"text-white/40 text-sm mt-2",children:r==="verify"?"Encrypted PIN required":"Create your master PIN"})]}),e.jsxs("div",{className:"group relative flex flex-col items-center justify-center rounded-[32px] bg-white/5 p-10 ring-1 ring-white/10 backdrop-blur-md",children:[e.jsx("div",{className:"flex gap-5",children:[0,1,2,3].map(A=>e.jsx(we.div,{animate:{scale:A<o.length?1.2:1,backgroundColor:A<o.length?"#fff":"rgba(255,255,255,0.1)"},className:"h-3.5 w-3.5 rounded-full transition-all duration-200"},A))}),e.jsx("input",{ref:I,type:"password",inputMode:"numeric",maxLength:4,value:o,"aria-label":"Enter PIN",placeholder:"PIN",onChange:A=>{const T=A.target.value.replace(/\D/g,"");l(T),navigator.vibrate&&navigator.vibrate(5)},className:"absolute inset-0 opacity-0 cursor-default",autoFocus:!0})]}),r==="verify"&&e.jsxs(we.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"mt-2 flex items-center gap-2 text-sky-400 text-sm font-medium",onClick:D,children:[e.jsx(Xt,{className:"h-5 w-5"}),"Use Biometrics"]})]},"verify-create")]}),e.jsxs(we.button,{onClick:r==="identity"?v:R,disabled:M(),className:`mt-8 flex w-full items-center justify-center gap-2 rounded-[22px] py-4 text-base font-semibold text-white shadow-lg transition-all
            ${M()?"cursor-not-allowed bg-[#3A3A3C] opacity-50":"bg-gradient-to-r from-[#0A84FF] to-[#0047AB] shadow-sky-500/20 active:scale-95"}`,whileTap:{scale:.98},children:[r==="identity"?"Continue":r==="create"?"Create Account":"Login",!M()&&e.jsx(Cn,{className:"h-4 w-4"})]})]}),e.jsx(Gt,{children:x&&e.jsx(we.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] flex items-end justify-center bg-black/60 p-6 backdrop-blur-sm",children:e.jsxs(we.div,{initial:{y:100},animate:{y:0},exit:{y:100},className:"w-full max-w-sm rounded-[32px] bg-[#1C1C1E] p-8 text-center ring-1 ring-white/10 shadow-2xl",children:[e.jsx("div",{className:"mx-auto mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-sky-500/20 text-sky-400",children:e.jsx($s,{className:"h-8 w-8"})}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Speed up your next login?"}),e.jsx("p",{className:"mt-2 text-sm text-white/50",children:"We can securely remember your ID so you can skip the mobile entry next time."}),e.jsxs("div",{className:"mt-8 flex flex-col gap-3",children:[e.jsx("button",{onClick:async()=>{localStorage.setItem("finbase_remembered_mobile",i),S(!1)},className:"w-full rounded-2xl bg-sky-500 py-4 font-semibold text-white active:scale-95 transition-all",children:"Enable Smart Login"}),e.jsx("button",{onClick:()=>S(!1),className:"w-full py-2 text-sm font-medium text-white/30 active:text-white/50",children:"Maybe later"})]})]})})}),e.jsx(Gt,{children:k&&e.jsx(we.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[70] flex flex-col items-center justify-center bg-black/40 backdrop-blur-md",children:e.jsxs(we.div,{initial:{scale:.8},animate:{scale:1},className:"flex flex-col items-center",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx(we.div,{animate:{scale:[1,1.2,1],opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0},className:"absolute inset-0 rounded-full bg-sky-500/30 blur-2xl"}),e.jsx("div",{className:"relative flex h-24 w-24 items-center justify-center rounded-full bg-white/5 ring-1 ring-white/20",children:e.jsx(Xt,{className:"h-12 w-12 text-sky-400"})})]}),e.jsx("h3",{className:"text-lg font-medium text-white",children:"Scanning Biometrics"}),e.jsx("p",{className:"mt-2 text-sm text-white/40 italic",children:"Verifying your node identity..."}),e.jsx("button",{onClick:()=>j(!1),className:"mt-12 text-xs font-medium uppercase tracking-widest text-white/20 hover:text-white/40",children:"Cancel & use PIN"})]})})}),e.jsx("div",{className:"absolute bottom-8 text-center text-[10px] text-white/20",children:e.jsx("p",{children:"Protected by FinHub Node Protocols. Data is localized and encrypted."})})]})},cn=()=>e.jsxs("div",{className:"fixed inset-0 z-[100] flex flex-col items-center justify-center bg-[#000000] overflow-hidden",children:[e.jsx(we.div,{animate:{opacity:[.1,.2,.1],scale:[1,1.1,1]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},className:"absolute h-[500px] w-[500px] rounded-full bg-sky-500/10 blur-[120px]"}),e.jsxs("div",{className:"relative flex flex-col items-center justify-center gap-12",children:[e.jsxs("div",{className:"relative flex items-center justify-center",children:[[0,1].map(t=>e.jsx(we.div,{className:"absolute rounded-full border border-sky-400/40",initial:{width:80,height:80,opacity:.6},animate:{width:[80,200],height:[80,200],opacity:[.6,0]},transition:{duration:2.5,repeat:1/0,delay:t*1.25,ease:"easeOut"}},t)),e.jsx(we.div,{animate:{scale:[1,1.05,1],boxShadow:["0 0 20px rgba(10, 132, 255, 0.2)","0 0 40px rgba(10, 132, 255, 0.4)","0 0 20px rgba(10, 132, 255, 0.2)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"relative z-10 flex h-24 w-24 items-center justify-center rounded-[28px] bg-gradient-to-br from-[#1C1C1E] to-[#0A0A0B] ring-1 ring-white/10 shadow-2xl",children:e.jsx(Xt,{className:"h-10 w-10 text-sky-400 drop-shadow-[0_0_8px_rgba(56,189,248,0.5)]"})})]}),e.jsx(we.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:"flex flex-col items-center gap-2",children:e.jsxs("div",{className:"flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/5 ring-1 ring-white/5 backdrop-blur-md",children:[e.jsx(Js,{className:"h-3 w-3 text-sky-400"}),e.jsx("span",{className:"text-[10px] font-bold tracking-[0.2em] uppercase text-white/40",children:"Secure Node Handshake"})]})})]}),e.jsxs("div",{className:"absolute bottom-16 w-full max-w-[200px] px-6",children:[e.jsx("div",{className:"h-[2px] w-full overflow-hidden rounded-full bg-white/10",children:e.jsx(we.div,{initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},className:"h-full w-1/3 bg-gradient-to-r from-transparent via-sky-400 to-transparent"})}),e.jsx("div",{className:"mt-3 text-center",children:e.jsx("span",{className:"text-[10px] font-medium text-white/20 italic tracking-wider",children:"Re-encrypting local session..."})})]})]}),ju=f.lazy(()=>Pt(()=>import("./Dashboard-C1i7oh0H.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8])).then(t=>({default:t.Dashboard}))),Nu=f.lazy(()=>Pt(()=>import("./TransactionList-DsqnMdp7.js"),__vite__mapDeps([9,1,2,5,4,8])).then(t=>({default:t.TransactionList}))),ku=f.lazy(()=>Pt(()=>import("./GoalsTracker-B4Iv0hu4.js"),__vite__mapDeps([10,1,2,6,5,8])).then(t=>({default:t.GoalsTracker}))),Su=f.lazy(()=>Pt(()=>import("./EmergencyFundsTab-Bt_DgQA4.js"),__vite__mapDeps([11,1,2,8])).then(t=>({default:t.EmergencyFundsTab}))),Cu=f.lazy(()=>Pt(()=>import("./InvestmentsTab-Ca24v_Sg.js"),__vite__mapDeps([12,1,2,3,4,6,13,7,5,8])).then(t=>({default:t.InvestmentsTab}))),Au=f.lazy(()=>Pt(()=>import("./LiabilityTab-CfskdUpQ.js"),__vite__mapDeps([14,1,2,5,6,8])).then(t=>({default:t.LiabilityTab}))),Eu=f.lazy(()=>Pt(()=>import("./LiabilityDashboard-DI2v1MTE.js"),__vite__mapDeps([15,1,2,13,8])).then(t=>({default:t.LiabilityDashboard})));function Tu(){const{settings:t,expenses:s,incomes:a,debts:n,goals:r,accounts:d,liabilities:i,notifications:u,emergencyFundAmount:o,investments:l,isLoading:m,refreshData:c,updateSettings:h,userId:w,createExpense:x,updateExpense:S,deleteExpense:k,createIncome:j,updateIncome:I,deleteIncome:D,createDebt:v,updateDebt:R,deleteDebt:W,settleDebt:M,createGoal:A,updateGoal:T,deleteGoal:Y,createAccount:K,updateAccount:se,deleteAccount:ae,setEmergencyFundAmount:Me,setNotifications:je,isFundAllocationOpen:Z,fundAllocationType:G,closeFundAllocation:me,performFundAllocation:Ae,transferFunds:N,authStatus:g}=ys(),[z,_]=f.useState("dashboard"),[H,E]=f.useState(!1),[O,B]=f.useState("expense"),[U,te]=f.useState(null),[xe,he]=f.useState(!1),[le,ke]=f.useState(!1),[ie,Ee]=f.useState(!1),[_e,De]=f.useState(null),[Fe,Ie]=f.useState(!1),[ze,jt]=f.useState(!1),[$e,st]=f.useState(!1),[He]=f.useState(null);f.useEffect(()=>xu(()=>ke(!0),()=>Ee(!0)),[]),f.useEffect(()=>{t.theme==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t.theme]);const mt=f.useMemo(()=>{const $=a.reduce((Pe,rt)=>Pe+rt.amount,0),Se=s.reduce((Pe,rt)=>Pe+rt.amount,0),Le=n.reduce((Pe,rt)=>Pe+rt.amount,0);if($===0&&Le===0)return{score:50,savingsRate:0,debtRatio:0,spendingRatio:0};const Be=[...a,...s,...n];let kt=1;if(Be.length>0){const Pe=Be.map(et=>new Date(et.date).getTime()),rt=new Date(Math.min(...Pe)),We=Math.abs(new Date().getTime()-rt.getTime()),St=Math.ceil(We/(1e3*60*60*24*30));kt=Math.max(1,St)}const vt=$/kt*12,it=$>0?($-Se)/$:0,J=$>0?Se/$:0,ve=vt>0?Le/vt:Le>0?1/0:0;let ce=50;return it>=.4?ce+=30:it>=.2?ce+=20:it>=.1?ce+=10:it>0?ce+=5:ce-=20,ve===0?ce+=20:ve<=.3?ce+=10:ve<=.6?ce-=10:ve<=1?ce-=30:ce-=50,J<=.5?ce+=20:J<=.7?ce+=10:J<=.9?ce+=0:ce-=10,{score:Math.max(0,Math.min(100,Math.round(ce))),savingsRate:it,debtRatio:ve,spendingRatio:J}},[a,s,n]),pt=f.useMemo(()=>({totalIncome:a.reduce(($,Se)=>$+Se.amount,0),totalExpenses:s.reduce(($,Se)=>$+Se.amount,0),activeDebts:n.filter($=>$.status==="pending").length,goalsCount:r.length,recentTransactions:[...s.slice(0,5).map($=>({type:"expense",...$})),...a.slice(0,5).map($=>({type:"income",...$}))],expenses:s,incomes:a,accounts:d,investments:l,savingsRate:mt.savingsRate,healthScore:mt.score,brainSummary:Vl({investments:l,accounts:d,healthScore:mt.score,savingsRate:mt.savingsRate,totalIncome:a.reduce(($,Se)=>$+Se.amount,0),totalExpenses:s.reduce(($,Se)=>$+Se.amount,0),activeDebts:n.filter($=>$.status==="pending").length,goalsCount:r.length},t.currency,z)}),[a,s,n,r.length,mt.savingsRate,mt.score,d,l,t.currency,z]),At=f.useMemo(()=>a.reduce(($,Se)=>$+Se.amount,0),[a]);if(m)return e.jsx(cn,{});const Nt=async()=>{await c()},xt=$=>{B($),te(null),E(!0)},ct=$=>{B("expense"),te($),E(!0)},bt=$=>{B("income"),te($),E(!0)},at=$=>{B("debt"),te($),E(!0)},Et=$=>{U?O==="expense"?S(U.id,$):O==="income"?I(U.id,$):O==="debt"&&R(U.id,$):O==="expense"?(x($),$.roundUpAmount&&Ft(r.length>0?r[0].id:"general","goal",void 0,$.roundUpAmount,$.accountId)):O==="income"?j($):O==="debt"&&v($)},Ft=async($,Se,Le,Be,kt)=>{if(!Be&&!He)return;const nt=Be||(He?He.roundedAmount-He.expenseAmount:0),vt=kt||(He?He.accountId:""),it=d.find(J=>J.id===vt);if(it&&await se(it.id,{balance:it.balance-nt}),Se==="goal"){const J=r.find(ve=>ve.id===$);if(J)await T($,{currentAmount:J.currentAmount+nt}),L.success(`Saved ${wt[t.currency]}${nt} to ${J.name}!`);else{const ve=r.find(ce=>ce.name==="General Savings");if(ve)await T(ve.id,{currentAmount:ve.currentAmount+nt}),L.success(`Saved ${wt[t.currency]}${nt} to General Savings!`);else{const ce={name:"General Savings",targetAmount:1e4,currentAmount:nt,targetDate:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString(),emoji:"ðŸ·"};A(ce),L.success(`Created "General Savings" and saved ${wt[t.currency]}${nt}!`)}}}else Me(J=>J+nt),L.success(`Saved ${wt[t.currency]}${nt} to Emergency Fund!`);st(!1),Vt({particleCount:50,spread:60,origin:{y:.7}})},Te=$=>{const Se={today:1,week:7,month:30},Le=new Date;Le.setDate(Le.getDate()+Se[$]),localStorage.setItem("roundUpMutedUntil",Le.toISOString()),st(!1),L.info(`Round ups muted for ${$==="today"?"today":$==="week"?"a week":"a month"}`)};return e.jsxs(e.Fragment,{children:[e.jsx(Gt,{mode:"wait",children:(g==="guest"||g==="authenticating")&&e.jsx(we.div,{className:"fixed inset-0 z-0",exit:{opacity:0,scale:.95,filter:"blur(20px)"},transition:{duration:.8},children:e.jsx(wu,{})},"login-container")}),e.jsx(Gt,{children:g==="authenticating"&&e.jsx(we.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4},className:"fixed inset-0 z-50",children:e.jsx(cn,{})},"loading-sprite")}),e.jsx(Gt,{children:g==="authenticated"&&e.jsx(we.div,{className:"relative z-10",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.8,ease:[.16,1,.3,1]},children:e.jsxs("div",{className:"min-h-screen bg-transparent text-foreground transition-colors font-sans",children:[e.jsx(ll,{activeTab:z,onTabChange:$=>_($),notificationCount:u.filter($=>!$.read).length,onNotificationClick:()=>Ee(!ie),onSettingsClick:()=>ke(!le),forceHide:Fe,renderFab:$=>e.jsx(bu,{isVisible:$&&!le&&!ie&&!Fe,onOpenAI:()=>he(!0),onAddTransaction:xt,onMigrate:()=>jt(!0)}),children:e.jsx(fu,{onRefresh:Nt,children:e.jsx(vu,{children:e.jsxs(f.Suspense,{fallback:e.jsxs("div",{className:"space-y-6 pt-12",children:[e.jsx(gu,{}),e.jsx("p",{className:"text-center text-slate-500 text-sm",children:"Loading Component..."})]}),children:[z==="dashboard"&&e.jsx("div",{className:"space-y-6",children:e.jsx(ju,{expenses:s,incomes:a,currency:t.currency,goals:r,liabilities:i,debts:n,investments:l,accounts:d,emergencyFundAmount:o})}),z==="transactions"&&e.jsx(Nu,{expenses:s,incomes:a,debts:n,accounts:d,currency:t.currency,onEditExpense:ct,onDeleteExpense:k,onEditIncome:bt,onDeleteIncome:D,onEditDebt:at,onDeleteDebt:W,onSettleDebt:M}),z==="goals"&&e.jsx(ku,{goals:r,currency:t.currency,accounts:d,expenses:s,incomes:a,onCreateGoal:A,onUpdateGoal:T,onDeleteGoal:Y,onDeductFromAccount:async($,Se)=>{const Le=d.find(Be=>Be.id===$);Le&&await se($,{balance:Le.balance-Se})}}),z==="accounts"&&e.jsx(hu,{accounts:d,currency:t.currency,onCreateAccount:K,onUpdateAccount:se,onDeleteAccount:ae}),z==="investments"&&e.jsx(Cu,{}),z==="emergency"&&e.jsx(Su,{currency:t.currency,userId:w,expenses:s,incomes:a,accounts:d,onEmergencyFundUpdate:$=>Me($)}),z==="liability"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(Eu,{liabilities:i,currency:t.currency,totalMonthlyIncome:At}),e.jsx(Au,{currency:t.currency,expenses:s,accounts:d})]}),z==="recurring"&&e.jsx(il,{}),z==="more"&&e.jsx(rc,{onNavigate:$=>_($),onOpenSettings:()=>ke(!0),onOpenNotifications:()=>Ee(!0),emergencyFundAmount:o,bankAccountsCount:d.filter($=>$.type==="bank").length,cardsCount:d.filter($=>$.type==="credit_card").length,currency:t.currency})]})})})}),e.jsx(ul,{isOpen:H,onClose:()=>{E(!1),te(null)},type:O,onSubmit:Et,initialData:U,accounts:d,currency:t.currency,roundUpEnabled:t.roundUpEnabled}),He&&e.jsx(ml,{isOpen:$e,onClose:()=>st(!1),onConfirm:Ft,expenseAmount:He.expenseAmount,roundedAmount:He.roundedAmount,currency:t.currency,goals:r,onMute:Te}),e.jsx(yu,{isOpen:xe,onClose:()=>he(!1),context:pt,settings:t}),e.jsx(ic,{isOpen:le,onClose:()=>ke(!1),settings:t,onUpdateSettings:h,onAchievementClick:$=>{De($),Ie(!0),ke(!1)}}),e.jsx(cc,{isOpen:ie,onClose:()=>Ee(!1),notifications:u,onNotificationClick:$=>{$.achievementId&&(De($.achievementId),Ie(!0)),Ee(!1)},onMarkAsRead:$=>{je(Se=>Se.map(Le=>Le.id===$?{...Le,read:!0}:Le))},onClearRead:()=>{je($=>$.filter(Se=>!Se.read)),L.success("Read notifications cleared")}}),e.jsx(du,{isOpen:Fe,onClose:()=>{Ie(!1),De(null)},achievementId:_e}),e.jsx(uu,{isOpen:Z,onClose:me,accounts:d,goals:r,currency:t.currency,destinationType:G,emergencyFund:{currentAmount:o,targetAmount:1e5},onAllocate:Ae}),e.jsx(pu,{isOpen:ze,onClose:()=>jt(!1),accounts:d,currency:t.currency,onTransfer:N}),e.jsx(Xo,{position:"bottom-center",richColors:!0,theme:"dark",toastOptions:{style:{background:"#1C1C1E",border:"1px solid rgba(255, 255, 255, 0.1)",color:"#FFFFFF",borderRadius:"20px",backdropFilter:"none"}}})]})},"main-app")})]})}function Du({children:t,...s}){return e.jsx(xl,{...s,children:t})}go.createRoot(document.getElementById("root")).render(e.jsx(al,{children:e.jsx(Du,{attribute:"class",defaultTheme:"dark",forcedTheme:"dark",children:e.jsx(Tu,{})})}));export{Gt as A,oe as B,Ke as C,Rt as D,Ue as I,ee as L,Ut as N,Je as S,fe as a,Uc as b,Jn as c,ge as d,Mt as e,Lu as f,Lt as g,Ot as h,dl as i,_t as j,As as k,Ze as l,we as m,Xe as n,Qe as o,Ne as p,ys as q,Ou as r,Mu as s,L as t,ia as u};
