import{r as p,j as e,y as _e,Y as ie,R as oe,x as ve,au as Ke,Z as Ge,W as Qe,w as $e,A as ze,aF as ge,z as ye,a8 as $}from"./ui-DwNC2Rqb.js";import{r as ke,C as q,L as u,a as A,B as w,S as L,n as B,o as M,p as O,q as m,D as se,g as ae,h as le,j as re,k as ne,I as V,N as R,t as C}from"./index-DKCn1eko.js";import{I as W}from"./InteractiveFinancialValue-k5N6qor8.js";import{S as ce}from"./slider-DZwKQyH9.js";import{H as Se}from"./haptics-C9gh8PRt.js";import{R as Ce,A as Xe,X as Ze,Y as Je,i as et,T as Ae,g as je,e as tt,f as st,C as at,L as lt}from"./charts-CInRTlJo.js";import"./vendor-7PqXWhc5.js";import"./motion-BKne_-B1.js";const X=[{symbol:"AAPL",name:"Apple Inc.",type:"stock",exchange:"NASDAQ"},{symbol:"GOOGL",name:"Alphabet Inc.",type:"stock",exchange:"NASDAQ"},{symbol:"MSFT",name:"Microsoft Corporation",type:"stock",exchange:"NASDAQ"},{symbol:"AMZN",name:"Amazon.com Inc.",type:"stock",exchange:"NASDAQ"},{symbol:"TSLA",name:"Tesla Inc.",type:"stock",exchange:"NASDAQ"},{symbol:"META",name:"Meta Platforms Inc.",type:"stock",exchange:"NASDAQ"},{symbol:"NVDA",name:"NVIDIA Corporation",type:"stock",exchange:"NASDAQ"},{symbol:"NFLX",name:"Netflix Inc.",type:"stock",exchange:"NASDAQ"}],Z=[{symbol:"TCS",name:"Tata Consultancy Services",type:"stock",exchange:"NSE"},{symbol:"INFY",name:"Infosys Limited",type:"stock",exchange:"NSE"},{symbol:"RELIANCE",name:"Reliance Industries",type:"stock",exchange:"NSE"},{symbol:"HDFCBANK",name:"HDFC Bank Limited",type:"stock",exchange:"NSE"},{symbol:"ICICIBANK",name:"ICICI Bank Limited",type:"stock",exchange:"NSE"},{symbol:"WIPRO",name:"Wipro Limited",type:"stock",exchange:"NSE"},{symbol:"SBIN",name:"State Bank of India",type:"stock",exchange:"NSE"},{symbol:"BHARTIARTL",name:"Bharti Airtel",type:"stock",exchange:"NSE"},{symbol:"ITC",name:"ITC Limited",type:"stock",exchange:"NSE"},{symbol:"HINDUNILVR",name:"Hindustan Unilever",type:"stock",exchange:"NSE"}],rt=[{symbol:"TCS",name:"Tata Consultancy Services",type:"stock",exchange:"BSE"},{symbol:"INFY",name:"Infosys Limited",type:"stock",exchange:"BSE"},{symbol:"RELIANCE",name:"Reliance Industries",type:"stock",exchange:"BSE"},{symbol:"HDFCBANK",name:"HDFC Bank Limited",type:"stock",exchange:"BSE"},{symbol:"ICICIBANK",name:"ICICI Bank Limited",type:"stock",exchange:"BSE"},{symbol:"WIPRO",name:"Wipro Limited",type:"stock",exchange:"BSE"},{symbol:"SBIN",name:"State Bank of India",type:"stock",exchange:"BSE"},{symbol:"BHARTIARTL",name:"Bharti Airtel",type:"stock",exchange:"BSE"},{symbol:"ITC",name:"ITC Limited",type:"stock",exchange:"BSE"},{symbol:"HINDUNILVR",name:"Hindustan Unilever",type:"stock",exchange:"BSE"}],Fe=[{symbol:"BTC-USD",name:"Bitcoin",type:"crypto",exchange:"Crypto"},{symbol:"ETH-USD",name:"Ethereum",type:"crypto",exchange:"Crypto"},{symbol:"BNB-USD",name:"Binance Coin",type:"crypto",exchange:"Crypto"},{symbol:"XRP-USD",name:"Ripple",type:"crypto",exchange:"Crypto"},{symbol:"SOL-USD",name:"Solana",type:"crypto",exchange:"Crypto"}],nt=[...X,...Z,...Fe],Ie=[{symbol:"AXISBLUECHIP",name:"Axis Bluechip Fund",type:"mutual_fund",exchange:"MF"},{symbol:"ICICIPRUTOP100",name:"ICICI Prudential Top 100 Fund",type:"mutual_fund",exchange:"MF"},{symbol:"SBISMALLCAP",name:"SBI Small Cap Fund",type:"mutual_fund",exchange:"MF"},{symbol:"HDFC500",name:"HDFC Index Fund Nifty 50",type:"mutual_fund",exchange:"MF"},{symbol:"UTINIFTY",name:"UTI Nifty Index Fund",type:"mutual_fund",exchange:"MF"}];function ct(a){if(!a||a.length<1)return[];const r=a.toUpperCase();return[...nt,...Ie].filter(d=>d.symbol.includes(r)||d.name.toUpperCase().includes(r)).slice(0,10)}function De(){const a=Intl.DateTimeFormat().resolvedOptions().timeZone;return a.includes("Asia/Kolkata")||a.includes("Asia/Calcutta")?"IN":a.includes("America/")?"US":"OTHER"}function z(a,r){const o=r==="INR"?"IN":De();return a==="mutual_fund"||a==="sip"?Ie.slice(0,5):a==="crypto"?Fe:o==="IN"?[...Z.slice(0,10),...X.slice(0,5)]:[...X,...Z.slice(0,5)]}function H(a){switch(a){case"NSE":return Z;case"BSE":return rt;case"NASDAQ":return X;default:return[]}}async function Ne(a,r){try{await new Promise(y=>setTimeout(y,500));const d={AAPL:150,GOOGL:2800,MSFT:350,AMZN:3200,TSLA:800,META:350,NVDA:500,NFLX:450,TCS:3500,INFY:1500,RELIANCE:2400,HDFCBANK:1600,ICICIBANK:950,WIPRO:450,SBIN:550,"BTC-USD":45e3,"ETH-USD":3e3,"BNB-USD":400}[a]||100,c=new Date(r),f=Math.floor((new Date().getTime()-c.getTime())/(1e3*60*60*24)),v=(Math.random()-.5)*.2,F=d*(1-f/365*.1+v);return{price:Math.max(1,parseFloat(F.toFixed(2))),date:r}}catch(o){return console.error("Error fetching historical price:",o),null}}async function Pe(a){try{await new Promise(d=>setTimeout(d,500));const o={AAPL:175,GOOGL:2950,MSFT:380,AMZN:3400,TSLA:850,META:380,NVDA:550,NFLX:480,TCS:3700,INFY:1600,RELIANCE:2500,HDFCBANK:1650,ICICIBANK:1e3,WIPRO:470,SBIN:580,"BTC-USD":52e3,"ETH-USD":3500,"BNB-USD":450}[a]||100;return parseFloat(o.toFixed(2))}catch(r){return console.error("Error fetching current price:",r),null}}async function it(a){const r={};return await Promise.all(a.map(async o=>{const d=await Pe(o);d!==null&&(r[o]=d)})),r}const ot=({active:a,payload:r,label:o,currency:d})=>{const[c,n]=oe.useState(null);return oe.useEffect(()=>{a&&o!==c&&(Se.light(),n(o))},[a,o,c]),a&&r&&r.length?e.jsxs("div",{className:"bg-[#1C1C1E] border border-white/5 p-4 rounded-xl shadow-2xl backdrop-blur-xl min-w-[160px]",children:[e.jsxs("p",{className:"text-[10px] text-slate-500 uppercase font-black mb-3 tracking-widest",children:["Year ",o]}),e.jsx("div",{className:"space-y-3",children:r.map((f,v)=>e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("span",{className:"text-[9px] text-slate-500 font-bold uppercase",children:f.name}),e.jsx("span",{className:`text-sm font-black tabular-nums ${f.name==="Total Wealth"?"text-[#0A84FF]":"text-slate-200"}`,children:A(f.value,d)})]},v))})]}):null};function dt(){const{settings:a}=ke(),[r,o]=p.useState(5e3),[d,c]=p.useState(12),[n,f]=p.useState(10),[v,F]=p.useState([]),[y,E]=p.useState({invested:0,wealth:0,returns:0});p.useEffect(()=>{J()},[r,d,n]);const J=()=>{const g=[];let j=0,x=0;const U=d/12/100,_=n*12;for(let D=1;D<=_;D++)j=(j+r)*(1+U),x+=r,D%12===0&&g.push({year:D/12,invested:Math.round(x),wealth:Math.round(j),returns:Math.round(j-x)});F(g),E({invested:x,wealth:j,returns:j-x})},I=g=>A(g,a.currency,!0);return e.jsxs(q,{className:"p-6 bg-black border border-white/5 shadow-xl rounded-2xl",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx("div",{className:"w-14 h-14 bg-[#0A84FF]/10 rounded-xl flex items-center justify-center border border-[#0A84FF]/20",children:e.jsx(_e,{className:"w-7 h-7 text-[#0A84FF]"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-balance text-xl text-white",children:"Wealth Builder"}),e.jsx("p",{className:"text-label text-[10px] opacity-60",children:"See how small investments grow into massive wealth"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[e.jsxs("div",{className:"lg:col-span-4 space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-baseline",children:[e.jsx(u,{htmlFor:"monthly-investment",className:"text-label text-[10px] opacity-60",children:"Monthly Investment"}),e.jsx("span",{className:"text-balance text-xl text-[#0A84FF]",children:A(r,a.currency)})]}),e.jsx(ce,{id:"monthly-investment",value:[r],min:500,max:1e5,step:500,onValueChange:g=>o(g[0]),className:"py-2"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[e.jsx("span",{children:A(500,a.currency,!0)}),e.jsx("span",{children:A(1e5,a.currency,!0)})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-baseline",children:[e.jsx(u,{htmlFor:"expected-return",className:"text-label text-[10px] opacity-60",children:"Expected Return (Annually)"}),e.jsxs("span",{className:"text-balance text-xl text-[#30D158]",children:[d,"%"]})]}),e.jsx(ce,{id:"expected-return",value:[d],min:4,max:30,step:.5,onValueChange:g=>c(g[0]),className:"py-2"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[e.jsx("span",{children:"FD (6%)"}),e.jsx("span",{children:"Index (12%)"}),e.jsx("span",{children:"Small Cap (20%)"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-baseline",children:[e.jsx(u,{htmlFor:"time-period",className:"text-label text-[10px] opacity-60",children:"Time Period"}),e.jsxs("span",{className:"text-balance text-xl text-white",children:[n," Years"]})]}),e.jsx(ce,{id:"time-period",value:[n],min:1,max:50,step:1,onValueChange:g=>f(g[0]),className:"py-2"})]}),e.jsx(q,{className:"p-6 bg-[#1C1C1E] border border-white/5 rounded-xl shadow-lg",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-label text-[10px] opacity-60 uppercase",children:"Total Invested"}),e.jsx("span",{className:"text-sm font-bold text-white",children:I(y.invested)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-[#30D158] text-[10px] font-black uppercase flex items-center gap-2",children:[e.jsx(ie,{className:"w-3 h-3"})," Wealth Generated"]}),e.jsx("span",{className:"text-lg font-black text-[#30D158]",children:I(y.returns)})]}),e.jsxs("div",{className:"pt-4 border-t border-white/5 flex justify-between items-center",children:[e.jsx("span",{className:"text-label text-[10px] opacity-60 uppercase",children:"Final Wealth"}),e.jsx("span",{className:"text-2xl font-black text-[#0A84FF]",children:I(y.wealth)})]})]})})]}),e.jsxs("div",{className:"lg:col-span-8 min-h-[350px]",children:[e.jsx(Ce,{width:"100%",height:350,children:e.jsxs(Xe,{data:v,margin:{top:10,right:10,left:10,bottom:0},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorWealth",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#0A84FF",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#0A84FF",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorInvested",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#8E8E93",stopOpacity:.1}),e.jsx("stop",{offset:"95%",stopColor:"#8E8E93",stopOpacity:0})]}),e.jsxs("filter",{id:"glow-wealth",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx(Ze,{dataKey:"year",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"#8E8E93",fontWeight:700}}),e.jsx(Je,{hide:!0}),e.jsx(et,{y:0,stroke:"rgba(255,255,255,0.1)",strokeWidth:1}),e.jsx(Ae,{cursor:{stroke:"rgba(255,255,255,0.2)",strokeWidth:1,strokeDasharray:"4 4"},content:g=>e.jsx(ot,{...g,currency:a.currency})}),e.jsx(je,{type:"monotone",dataKey:"wealth",stroke:"#0A84FF",fillOpacity:1,fill:"url(#colorWealth)",name:"Total Wealth",strokeWidth:4,animationDuration:1500,filter:"url(#glow-wealth)"}),e.jsx(je,{type:"monotone",dataKey:"invested",stroke:"#8E8E93",fillOpacity:1,fill:"url(#colorInvested)",name:"Invested Amount",strokeWidth:2,strokeDasharray:"5 5",animationDuration:1e3})]})}),e.jsx("div",{className:"mt-6 p-4 bg-[#30D158]/5 rounded-xl border border-[#30D158]/10 text-center",children:e.jsxs("p",{className:"text-xs text-slate-300 leading-relaxed",children:["By investing ",e.jsx("span",{className:"text-white font-black",children:A(r,a.currency)})," monthly for ",e.jsxs("span",{className:"text-white font-black",children:[n," years"]})," at ",e.jsxs("span",{className:"text-[#30D158] font-black",children:[d,"%"]}),", you earn ",e.jsx("span",{className:"font-black text-[#30D158] text-lg",children:I(y.returns)})," in pure profit! ðŸš€"]})})]})]})]})}const we=["#0A84FF","#30D158","#FF9F0A","#FF453A","#BF5AF2","#64D2FF","#FF375F"];function xt({investments:a,currency:r}){const o=a.map(c=>({name:c.symbol,value:(c.currentPrice||0)*c.quantity}));if(a.length===0)return null;const d=({active:c,payload:n})=>(oe.useEffect(()=>{c&&Se.light()},[c]),c&&n&&n.length?e.jsxs("div",{className:"bg-[#1C1C1E] border border-white/5 p-3 squircle-12 shadow-2xl backdrop-blur-xl",children:[e.jsx("p",{className:"text-[10px] text-slate-500 uppercase font-black mb-1",children:n[0].name}),e.jsx("p",{className:"text-sm font-black text-white tabular-nums",children:A(n[0].value,r)})]}):null);return e.jsxs(q,{className:"p-6 card-elite shadow-xl",children:[e.jsx("h3",{className:"text-slate-500 text-[10px] font-black uppercase tracking-widest mb-6 px-2",children:"Portfolio Allocation"}),e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(Ce,{width:"100%",height:"100%",children:e.jsxs(tt,{children:[e.jsx(st,{data:o,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,stroke:"none",dataKey:"value",children:o.map((c,n)=>e.jsx(at,{fill:we[n%we.length]},`cell-${n}`))}),e.jsx(Ae,{content:e.jsx(d,{})}),e.jsx(lt,{verticalAlign:"bottom",height:36,iconType:"circle",formatter:c=>e.jsx("span",{className:"text-[10px] font-black uppercase text-slate-500 tracking-widest",children:c})})]})})})]})}function ht({investments:a,onAdd:r,onEdit:o,onClose:d,currency:c}){return e.jsxs(q,{className:"p-6 bg-[#1C1C1E] border border-white/5 rounded-[32px]",children:[e.jsx("div",{className:`flex items-center justify-between mb-8 px-2 ${a.length===0?"opacity-40":""}`,children:e.jsx("h3",{className:"text-label text-[10px]",children:"Portfolio Assets"})}),a.length===0?e.jsxs("div",{onClick:r,className:"group cursor-pointer p-8 bg-slate-800/10 border-2 border-dashed border-slate-700/30 rounded-[32px] hover:border-slate-600/50 hover:bg-slate-800/20 transition-all duration-300 flex flex-col items-center justify-center space-y-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-slate-800/50 flex items-center justify-center border border-white/5 opacity-50 group-hover:scale-105 transition-transform",children:e.jsx(ve,{className:"w-6 h-6 text-slate-500"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-slate-400 font-bold",children:"No investments tracked yet. Want to see your growth here?"}),e.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-widest mt-2 font-black",children:"Tap to Initialize Portfolio"})]})]}):e.jsx("div",{className:"space-y-4",children:a.map(n=>{const f=n.buyPrice*n.quantity,v=(n.currentPrice||0)*n.quantity,F=v-f,y=f===0?0:F/f*100;return e.jsxs("div",{className:"group relative flex flex-col sm:flex-row sm:items-center justify-between p-4 bg-black/40 border border-white/5 rounded-[28px] hover:bg-black/60 transition-all duration-300 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[e.jsx("div",{className:"w-12 h-12 bg-black border border-white/10 rounded-2xl flex items-center justify-center shrink-0 group-hover:scale-105 transition-transform",children:e.jsx("span",{className:"text-sm font-black text-[#0A84FF]",children:n.symbol.substring(0,2)})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-bold text-slate-100 truncate",children:n.symbol}),e.jsx("span",{className:"text-[8px] px-1.5 py-0.5 bg-white/5 rounded uppercase tracking-wider text-[#8E8E93] font-bold shrink-0",children:n.type.replace("_"," ")})]}),e.jsxs("p",{className:"text-label text-[10px] truncate opacity-60",children:[n.name," â€¢ ",n.quantity," ",n.type==="stock"?"shares":"units"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between sm:justify-end gap-6 shrink-0",children:[e.jsxs("div",{className:"text-right flex flex-col justify-center",children:[e.jsx("div",{className:"text-balance text-sm font-bold text-slate-200",children:e.jsx(W,{value:v,currency:c})}),e.jsx("div",{className:"flex items-center gap-2 justify-end mt-1",children:e.jsxs("div",{className:`text-[10px] font-bold tabular-nums px-2 py-0.5 rounded-lg ${F>=0?"bg-[#30D158]/10 text-[#30D158]":"bg-[#FF453A]/10 text-[#FF453A]"}`,children:[F>=0?"+":"",y.toFixed(2),"%"]})})]}),e.jsxs("div",{className:"flex gap-1.5 sm:opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(w,{variant:"ghost",size:"sm",onClick:()=>o(n),className:"w-9 h-9 p-0 bg-white/5 rounded-xl hover:bg-blue-500/10 hover:text-blue-400 text-slate-400",children:e.jsx(Ke,{className:"w-4 h-4"})}),e.jsx(w,{variant:"ghost",size:"sm",onClick:()=>d(n),className:"w-9 h-9 p-0 bg-white/5 rounded-xl hover:bg-rose-500/10 hover:text-rose-400 text-slate-400",children:e.jsx(Ge,{className:"w-4 h-4"})})]})]})]},n.id)})})]})}function mt({icon:a,title:r,description:o,actionLabel:d,onAction:c,illustration:n}){return e.jsx(q,{className:"p-12 text-center flex flex-col items-center justify-center h-full min-h-[400px]",children:e.jsxs("div",{className:"flex flex-col items-center gap-6 max-w-sm mx-auto",children:[n?e.jsx("div",{className:"text-6xl mb-2 animate-bounce-slow",children:n}):e.jsx("div",{className:"w-20 h-20 bg-gray-50 dark:bg-gray-800 rounded-full flex items-center justify-center mb-2 shadow-sm",children:e.jsx(a,{className:"w-10 h-10 text-gray-400 dark:text-gray-500"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 font-display tracking-tight",children:r}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 leading-relaxed",children:o})]}),d&&c&&e.jsx(w,{onClick:c,className:"mt-2",size:"lg",children:d})]})})}function wt(){const{settings:{currency:a},accounts:r,expenses:o,incomes:d,investments:c,createInvestment:n,updateInvestment:f,deleteInvestment:v,createIncome:F}=ke(),[y,E]=p.useState(!1),[J,I]=p.useState(!1),[g,j]=p.useState(!1),[x,U]=p.useState(null),[_,D]=p.useState(""),[k,K]=p.useState(!1),[de,xe]=p.useState(!1),[G,N]=p.useState([]),[he,P]=p.useState(!1),[S,Ee]=p.useState("All"),[s,h]=p.useState({symbol:"",name:"",type:"stock",quantity:"",buyPrice:"",currentPrice:"",totalYield:"0",purchaseDate:new Date().toISOString().split("T")[0],exchange:"NSE",isPhysicalAsset:!1,sourceAccountId:""}),Te=De(),Y=a==="INR"||Te==="IN";p.useEffect(()=>{y&&!s.symbol&&(s.type==="stock"&&Y?N(H(s.exchange)):N(z(s.type,a)),P(!0))},[y,s.type,s.symbol,s.exchange,a,Y]);const me=t=>{if(h({...s,symbol:t}),t.length>0){const l=ct(t);N(l),P(!0)}else s.type==="stock"&&Y?N(H(s.exchange)):N(z(s.type,a)),P(!0)},ue=async t=>{h({...s,symbol:t.symbol,name:t.name,type:t.type}),P(!1),await Le(t.symbol)},Le=async t=>{if(!(!t||!s.purchaseDate)){K(!0);try{const l=await Ne(t,s.purchaseDate);l&&h(b=>({...b,buyPrice:l.price.toString()}));const i=await Pe(t);i&&h(b=>({...b,currentPrice:i.toString()})),C.success("Prices fetched successfully!")}catch(l){console.error("Error fetching prices:",l),C.error("Failed to fetch prices. Please enter manually.")}finally{K(!1)}}},pe=async t=>{if(h({...s,purchaseDate:t}),s.symbol){K(!0);try{const l=await Ne(s.symbol,t);l&&(h(i=>({...i,buyPrice:l.price.toString()})),C.success(`Buy price updated for ${t}`))}catch(l){console.error("Error fetching historical price:",l)}finally{K(!1)}}},Be=async()=>{if(!s.symbol||!s.name||!s.quantity||!s.buyPrice||!s.currentPrice||!s.purchaseDate){C.error("Please fill in all fields");return}const t={symbol:s.symbol.toUpperCase(),name:s.name,type:s.type,quantity:parseFloat(s.quantity.toString()),buyPrice:parseFloat(s.buyPrice.toString()),currentPrice:parseFloat(s.currentPrice.toString()),totalYield:parseFloat(s.totalYield.toString())||0,isPhysicalAsset:s.type==="physical_asset",accountId:s.sourceAccountId,purchaseDate:s.purchaseDate,currency:a};try{await n(t,s.sourceAccountId),E(!1),Q()}catch(l){console.error("Error creating investment:",l)}},Q=()=>{h({symbol:"",name:"",type:"stock",quantity:"",buyPrice:"",currentPrice:"",totalYield:"0",purchaseDate:new Date().toISOString().split("T")[0],exchange:"NSE",isPhysicalAsset:!1,sourceAccountId:""}),P(!1)},Me=async()=>{if(c.length===0){C.error("No investments to refresh");return}xe(!0);try{const t=c.map(i=>i.symbol),l=await it(t);await Promise.all(c.map(i=>{const b=l[i.symbol];return b&&b!==i.currentPrice?f(i.id,{currentPrice:b}):Promise.resolve()})),C.success("Prices refreshed successfully!")}catch(t){console.error("Error refreshing prices:",t),C.error("Failed to refresh prices")}finally{xe(!1)}},Oe=t=>{U(t),h({symbol:t.symbol,name:t.name,type:t.type,quantity:t.quantity.toString(),buyPrice:t.buyPrice.toString(),currentPrice:(t.currentPrice||0).toString(),totalYield:(t.totalYield||0).toString(),purchaseDate:t.purchaseDate,exchange:"NSE",isPhysicalAsset:t.type==="physical_asset",sourceAccountId:t.accountId||""}),I(!0)},Re=async()=>{if(!x||!s.symbol||!s.name||!s.quantity||!s.buyPrice||!s.currentPrice||!s.purchaseDate){C.error("Please fill in all fields");return}const t={symbol:s.symbol.toUpperCase(),name:s.name,type:s.type,quantity:parseFloat(s.quantity.toString()),buyPrice:parseFloat(s.buyPrice.toString()),currentPrice:parseFloat(s.currentPrice.toString()),totalYield:parseFloat(s.totalYield.toString())||0,isPhysicalAsset:s.type==="physical_asset",purchaseDate:s.purchaseDate,currency:a};try{await f(x.id,t),I(!1),U(null),Q()}catch(l){console.error("Error updating investment:",l)}},Ue=t=>{U(t),D(r.length>0?r[0].id:""),j(!0)},Ye=async()=>{if(!x||!_){C.error("Please select an account");return}const t=(x.currentPrice||0)*x.quantity,l=t-x.buyPrice*x.quantity;try{await F({source:`Sold ${x.symbol} (${x.quantity} ${x.type==="stock"?"shares":"units"})`,amount:t,date:new Date().toISOString().split("T")[0],category:l>=0?"Capital Gain":"Capital Loss",accountId:_}),await v(x.id),j(!1),U(null),D(""),C.success(l>=0?`Investment closed! Profit: ${A(l,a)}`:`Investment closed. Loss: ${A(Math.abs(l),a)}`)}catch(i){console.error("Error closing investment:",i)}},ee=()=>c.filter(t=>{if(t.accountId&&t.accountId!=="none"){const l=r.find(i=>i.id===t.accountId);if(l&&l.type!=="investment")return!1}if(S!=="All"){const l=new Date(t.purchaseDate),i=new Date,b=(i.getFullYear()-l.getFullYear())*12+(i.getMonth()-l.getMonth());if(S==="1M"&&b>0||S==="3M"&&b>2)return!1}return!0}).reduce((t,l)=>t+(l.currentPrice||0)*l.quantity,0),te=()=>c.filter(t=>{if(t.accountId&&t.accountId!=="none"){const l=r.find(i=>i.id===t.accountId);if(l&&l.type!=="investment")return!1}if(S!=="All"){const l=new Date(t.purchaseDate),i=new Date,b=(i.getFullYear()-l.getFullYear())*12+(i.getMonth()-l.getMonth());if(S==="1M"&&b>0||S==="3M"&&b>2)return!1}return!0}).reduce((t,l)=>t+l.buyPrice*l.quantity,0),be=()=>c.filter(t=>{if(t.accountId&&t.accountId!=="none"){const l=r.find(i=>i.id===t.accountId);if(l&&l.type!=="investment")return!1}if(S!=="All"){const l=new Date(t.purchaseDate),i=new Date,b=(i.getFullYear()-l.getFullYear())*12+(i.getMonth()-l.getMonth());if(S==="1M"&&b>0||S==="3M"&&b>2)return!1}return!0}).reduce((t,l)=>t+(l.totalYield||0),0),qe=()=>ee()+be()-te(),Ve=()=>{const t=te();return t===0?0:(ee()/t-1)*100},He=ee(),T=qe(),We=Ve(),fe=[...o.filter(t=>t.category==="Investment"||t.description&&(t.description.toLowerCase().includes("invest")||t.description.toLowerCase().includes("stock")||t.description.toLowerCase().includes("mutual fund")||t.description.toLowerCase().includes("crypto"))),...d.filter(t=>t.source&&(t.source.toLowerCase().includes("dividend")||t.source.toLowerCase().includes("investment")||t.source.toLowerCase().includes("capital gain")))].sort((t,l)=>new Date(l.date).getTime()-new Date(t.date).getTime()).slice(0,5);return e.jsxs("div",{className:"space-y-6 pb-24",children:[e.jsxs("div",{className:"segmented-stack",children:[e.jsxs("div",{className:"stack-cap flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 bg-[#0A84FF]/10 rounded-xl flex items-center justify-center border border-[#0A84FF]/20 shrink-0",children:e.jsx(Qe,{className:"w-5 h-5 text-[#0A84FF]"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-balance text-lg text-white truncate",children:"Investment Growth"}),e.jsx("p",{className:"text-label text-[10px] truncate",children:"Net portfolio performance"})]})]}),e.jsxs("div",{className:"text-right shrink-0",children:[e.jsx("p",{className:"text-label text-[10px] opacity-60",children:"Current Value"}),e.jsx("div",{className:"text-balance text-xl text-white",children:e.jsx(W,{value:He,currency:a})})]})]}),e.jsxs("div",{className:"stack-body py-4 px-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-label text-[10px] opacity-60",children:"Net P&L"}),e.jsxs("div",{className:`text-balance text-xl font-bold ${T>=0?"text-[#30D158]":"text-[#FF453A]"}`,children:[T>=0?"+":"",e.jsx(W,{value:T,currency:a})]})]}),e.jsxs("div",{className:`px-3 py-1.5 rounded-full text-[10px] font-bold border transition-colors ${T>=0?"bg-[#30D158]/10 border-[#30D158]/20 text-[#30D158]":"bg-[#FF453A]/10 border-[#FF453A]/20 text-[#FF453A]"}`,children:[T>=0?"â–²":"â–¼"," ",We.toFixed(2),"% Overall"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-white/5 mb-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-label text-[10px] opacity-60 mb-1",children:"Allocated Capital"}),e.jsx("div",{className:"text-sm font-bold text-slate-300",children:e.jsx(W,{value:te(),currency:a})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-label text-[10px] opacity-60 mb-1",children:"Total Yield"}),e.jsx("div",{className:"text-sm font-bold text-[#30D158]",children:e.jsx(W,{value:be(),currency:a})})]})]}),fe.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-label text-[8px] opacity-50 uppercase font-black tracking-widest mb-3",children:"Audit Trail"}),fe.map((t,l)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-white/5 last:border-0 hover:bg-white/5 transition-colors px-2 -mx-2 rounded-lg",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-bold text-slate-200 truncate",children:t.description||t.source}),e.jsxs("p",{className:"text-label text-[8px] mt-0.5 opacity-50",children:[t.category," â€¢ ",new Date(t.date).toLocaleDateString()]})]}),e.jsxs("div",{className:`text-balance text-xs font-bold shrink-0 ${t.source?"text-[#30D158]":"text-zinc-400"}`,children:[t.source?"+":"-",e.jsx(W,{value:t.amount,currency:a})]})]},l))]})]}),e.jsx("div",{className:"stack-footer",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs(L,{value:S,onValueChange:t=>Ee(t),children:[e.jsx(B,{className:"h-9 w-32 bg-black/20 border-white/5 text-label text-[10px] rounded-xl",children:e.jsx(M,{placeholder:"Period"})}),e.jsxs(O,{className:"bg-[#1C1C1E] border-white/10 text-white",children:[e.jsx(m,{value:"1M",children:"30 Days"}),e.jsx(m,{value:"3M",children:"90 Days"}),e.jsx(m,{value:"All",children:"All Time"})]})]}),e.jsxs(w,{variant:"ghost",size:"sm",onClick:Me,disabled:de||c.length===0,className:"h-9 px-4 text-label text-[10px] text-[#0A84FF] hover:text-[#007AFF] hover:bg-[#0A84FF]/10 rounded-xl",children:[e.jsx($e,{className:`w-3.5 h-3.5 mr-2 ${de?"animate-spin":""}`}),"Sync Market"]})]})})]}),e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-100 tracking-tight truncate",children:"Active Portfolio"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1 truncate",children:"Manage stocks, mutual funds and assets"})]}),e.jsxs(w,{onClick:()=>E(!0),className:"bg-[#0A84FF] hover:bg-[#007AFF] text-white rounded-xl h-12 px-6 border-none shadow-lg shadow-blue-600/10 flex items-center gap-2 group transition-all hover:scale-[1.02] active:scale-[0.98] shrink-0",children:[e.jsx(ve,{className:"w-5 h-5 group-hover:rotate-90 transition-transform"}),e.jsx("span",{className:"font-bold hidden sm:inline",children:"Add Asset"}),e.jsx("span",{className:"font-bold sm:hidden",children:"Add"})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-1 gap-6",children:c.length===0?e.jsx("div",{className:"h-full flex flex-col items-center justify-center py-20 bg-[#1C1C1E] rounded-[32px] border border-dashed border-white/10",children:e.jsx(mt,{icon:ie,title:"No assets tracked yet",description:"Start building your portfolio by adding your first investment.",illustration:"ðŸŒ¿",actionLabel:"Add Investment",onAction:()=>E(!0)})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(ht,{investments:c,onAdd:()=>E(!0),onEdit:Oe,onClose:Ue,currency:a}),e.jsx(xt,{investments:c,currency:a}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(q,{className:"p-6 bg-[#1C1C1E] border border-white/5 rounded-[24px]",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#30D158]/10 flex items-center justify-center",children:e.jsx(ze,{className:"w-4 h-4 text-[#30D158]"})}),e.jsx("h4",{className:"text-label text-[8px] opacity-60",children:"Market Insight"})]}),e.jsx("p",{className:"text-sm text-slate-300 leading-relaxed font-medium",children:"FinHub automatically suggests prices based on your purchase date and fetches real-time quotes for accurate tracking."})]}),e.jsxs(q,{className:"p-6 bg-[#1C1C1E] border border-white/5 rounded-[24px]",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-500/20 flex items-center justify-center",children:e.jsx(ie,{className:"w-4 h-4 text-purple-400"})}),e.jsx("h4",{className:"text-label text-[8px] opacity-60",children:"Portfolio Health"})]}),e.jsxs("p",{className:"text-sm text-slate-300 leading-relaxed font-medium",children:["Keep your data fresh using the ",e.jsx("span",{className:"text-[#0A84FF] font-black",children:"Sync"})," button to update all holdings with the latest market activity."]})]})]})]})}),e.jsx(se,{open:y,onOpenChange:t=>{E(t),t||Q()},children:e.jsxs(ae,{className:"max-w-md max-h-[90vh] overflow-y-auto bg-slate-900 border-white/10 text-white p-0",children:[e.jsx("div",{className:"p-8 border-b border-white/5",children:e.jsxs(le,{className:"p-0",children:[e.jsx(re,{className:"text-xl font-bold tracking-tight text-white",children:"Add Investment"}),e.jsx(ne,{className:"text-slate-500 text-xs mt-1",children:"Add a new stock, mutual fund, or SIP to your portfolio"})]})}),e.jsxs("div",{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"add-investment-type",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Type"}),e.jsxs(L,{value:s.type,onValueChange:t=>{h({...s,type:t}),N(t==="stock"&&Y?H(s.exchange):z(t,a))},children:[e.jsx(B,{id:"add-investment-type",name:"type",className:"bg-white/5 border-white/5 rounded-2xl h-14 text-white",children:e.jsx(M,{})}),e.jsxs(O,{className:"bg-slate-900 border-white/10 text-white",children:[e.jsx(m,{value:"stock",children:"Stock"}),e.jsx(m,{value:"mutual_fund",children:"Mutual Fund"}),e.jsx(m,{value:"sip",children:"SIP"}),e.jsx(m,{value:"crypto",children:"Cryptocurrency"}),e.jsx(m,{value:"physical_asset",children:"Physical Asset (Gold, Real Estate, etc.)"})]})]})]}),Y&&s.type==="stock"&&e.jsxs("div",{children:[e.jsx(u,{htmlFor:"add-investment-exchange",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Exchange"}),e.jsxs(L,{value:s.exchange,onValueChange:t=>{h({...s,exchange:t}),N(H(t))},children:[e.jsx(B,{id:"add-investment-exchange",name:"exchange",className:"bg-white/5 border-white/5 rounded-2xl h-14 text-white",children:e.jsx(M,{})}),e.jsxs(O,{className:"bg-slate-900 border-white/10 text-white",children:[e.jsx(m,{value:"NSE",children:"NSE (National Stock Exchange)"}),e.jsx(m,{value:"BSE",children:"BSE (Bombay Stock Exchange)"}),e.jsx(m,{value:"NASDAQ",children:"NASDAQ (US)"})]})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(u,{htmlFor:"add-investment-symbol",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Symbol/Code"}),e.jsxs("div",{className:"relative",children:[e.jsx(V,{id:"add-investment-symbol",name:"symbol",value:s.symbol,onChange:t=>me(t.target.value),onFocus:()=>P(!0),onBlur:()=>{setTimeout(()=>P(!1),200)},className:"bg-white/5 border-white/5 rounded-2xl h-14 text-white pr-10",placeholder:"Search for symbol...",autoComplete:"off"}),e.jsx(ge,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500"})]}),he&&G.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-2 bg-slate-900 border border-white/10 rounded-2xl shadow-2xl max-h-60 overflow-y-auto overflow-x-hidden backdrop-blur-xl",children:G.map((t,l)=>e.jsx("button",{onMouseDown:i=>{i.preventDefault(),ue(t)},className:"w-full text-left px-5 py-4 hover:bg-white/5 transition-colors border-b border-white/5 last:border-0 group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-white group-hover:text-blue-400 transition-colors",children:t.symbol}),e.jsx("p",{className:"text-[10px] text-slate-500 mt-0.5",children:t.name})]}),e.jsx("span",{className:"text-[9px] font-black px-2 py-1 bg-blue-500/10 text-blue-400 rounded-lg uppercase tracking-widest border border-blue-500/10",children:t.exchange})]})},l))})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"add-investment-account",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Source/Holding Account"}),e.jsxs(L,{value:s.sourceAccountId,onValueChange:t=>h({...s,sourceAccountId:t}),children:[e.jsx(B,{id:"add-investment-account",className:"bg-white/5 border-white/5 rounded-2xl h-14 text-white",children:e.jsx(M,{placeholder:"Select account..."})}),e.jsxs(O,{className:"bg-slate-900 border-white/10 text-white",children:[e.jsx(m,{value:"none",children:"No Linking (Physical Only)"}),r.map(t=>e.jsxs(m,{value:t.id,children:[t.name," (",t.type,")"]},t.id))]})]}),e.jsx("p",{className:"text-[10px] text-slate-500 mt-2 italic px-1",children:"Linking an account enables Principal tracking via Transfers."})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"add-investment-name",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Name"}),e.jsx(V,{id:"add-investment-name",name:"name",value:s.name,onChange:t=>h({...s,name:t.target.value}),className:"bg-white/5 border-white/5 rounded-2xl h-14 text-white",placeholder:"e.g., Apple Inc.",autoComplete:"off"})]}),e.jsxs("div",{children:[e.jsxs(u,{htmlFor:"add-investment-date",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 flex items-center gap-2",children:[e.jsx(ye,{className:"w-3 h-3 text-blue-400"}),"Purchase Date"]}),e.jsx(V,{id:"add-investment-date",name:"purchaseDate",type:"date",value:s.purchaseDate,onChange:t=>pe(t.target.value),className:"bg-white/5 border-white/5 rounded-2xl h-14 text-white",max:new Date().toISOString().split("T")[0],autoComplete:"off"}),e.jsx("p",{className:"text-[10px] text-slate-500 mt-2 italic px-1",children:"Buy price will be fetched based on this date"})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"add-investment-quantity",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Quantity/Units"}),e.jsx(R,{id:"add-investment-quantity",name:"quantity",value:s.quantity,onChange:t=>h({...s,quantity:t}),className:"bg-white/5 border-white/5 rounded-2xl h-14 text-white",placeholder:"Number of shares/units",autoComplete:"off"})]}),e.jsxs("div",{children:[e.jsxs(u,{htmlFor:"add-investment-buy-price",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 flex items-center justify-between",children:[e.jsx("span",{children:"Buy Price (Avg)"}),k&&e.jsxs("span",{className:"text-[9px] text-blue-400 flex items-center gap-1 font-black uppercase tracking-widest",children:[e.jsx($,{className:"w-3 h-3 animate-spin"}),"Fetching..."]})]}),e.jsx(R,{id:"add-investment-buy-price",name:"buyPrice",value:s.buyPrice,onChange:t=>h({...s,buyPrice:t}),className:"bg-white/5 border-white/5 rounded-2xl h-14 text-white",placeholder:"Auto-filled based on purchase date",disabled:k,autoComplete:"off"})]}),e.jsxs("div",{children:[e.jsxs(u,{htmlFor:"add-investment-current-price",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 flex items-center justify-between",children:[e.jsx("span",{children:"Current Market Value (Per Unit)"}),k&&e.jsxs("span",{className:"text-[9px] text-blue-400 flex items-center gap-1 font-black uppercase tracking-widest",children:[e.jsx($,{className:"w-3 h-3 animate-spin"}),"Fetching..."]})]}),e.jsx(R,{id:"add-investment-current-price",name:"currentPrice",value:s.currentPrice,onChange:t=>h({...s,currentPrice:t}),className:"bg-white/5 border-white/5 rounded-2xl h-14 text-white",placeholder:"Auto-filled from market",disabled:k,autoComplete:"off"})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"add-investment-total-yield",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Total Yield (Dividends/Interest)"}),e.jsx(R,{id:"add-investment-total-yield",name:"totalYield",value:s.totalYield,onChange:t=>h({...s,totalYield:t}),className:"bg-white/5 border-white/5 rounded-2xl h-14 text-white",placeholder:"Total extra cash generated",autoComplete:"off"})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx(w,{variant:"outline",onClick:()=>E(!1),className:"flex-1 rounded-2xl h-12 border-white/10 hover:bg-white/5 text-slate-400",children:"Cancel"}),e.jsx(w,{onClick:Be,className:"flex-1 rounded-2xl h-12 bg-blue-600 hover:bg-blue-500 text-white font-bold",disabled:k,children:"Add Investment"})]})]})]})}),e.jsx(se,{open:J,onOpenChange:t=>{I(t),t||Q()},children:e.jsxs(ae,{className:"max-w-md max-h-[90vh] overflow-y-auto bg-slate-900 border-white/10 text-white p-0",children:[e.jsx("div",{className:"p-8 border-b border-white/5",children:e.jsxs(le,{className:"p-0",children:[e.jsx(re,{className:"text-xl font-bold tracking-tight text-white",children:"Edit Asset"}),e.jsx(ne,{className:"text-slate-500 text-xs mt-1",children:"Update details of your existing investment node"})]})}),e.jsxs("div",{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"edit-investment-type",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Type"}),e.jsxs(L,{value:s.type,onValueChange:t=>{h({...s,type:t}),N(t==="stock"&&Y?H(s.exchange):z(t,a))},children:[e.jsx(B,{id:"edit-investment-type",name:"type",className:"bg-white/5 border-white/5 rounded-2xl h-14 text-white",children:e.jsx(M,{})}),e.jsxs(O,{className:"bg-slate-900 border-white/10 text-white",children:[e.jsx(m,{value:"stock",children:"Stock"}),e.jsx(m,{value:"mutual_fund",children:"Mutual Fund"}),e.jsx(m,{value:"sip",children:"SIP"}),e.jsx(m,{value:"crypto",children:"Cryptocurrency"}),e.jsx(m,{value:"physical_asset",children:"Physical Asset (Gold, Real Estate, etc.)"})]})]})]}),Y&&s.type==="stock"&&e.jsxs("div",{children:[e.jsx(u,{htmlFor:"edit-investment-exchange",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Exchange"}),e.jsxs(L,{value:s.exchange,onValueChange:t=>{h({...s,exchange:t}),N(H(t))},children:[e.jsx(B,{id:"edit-investment-exchange",name:"exchange",className:"bg-white/5 border-white/5 rounded-2xl h-14 text-white",children:e.jsx(M,{})}),e.jsxs(O,{className:"bg-slate-900 border-white/10 text-white",children:[e.jsx(m,{value:"NSE",children:"NSE (National Stock Exchange)"}),e.jsx(m,{value:"BSE",children:"BSE (Bombay Stock Exchange)"}),e.jsx(m,{value:"NASDAQ",children:"NASDAQ (US)"})]})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(u,{htmlFor:"edit-investment-symbol",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Symbol/Code"}),e.jsxs("div",{className:"relative",children:[e.jsx(V,{id:"edit-investment-symbol",name:"symbol",value:s.symbol,onChange:t=>me(t.target.value),onFocus:()=>P(!0),onBlur:()=>{setTimeout(()=>P(!1),200)},className:"bg-white/5 border-white/5 rounded-2xl h-14 text-white pr-10",placeholder:"Search for symbol...",autoComplete:"off"}),e.jsx(ge,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500"})]}),he&&G.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-2 bg-slate-900 border border-white/10 rounded-2xl shadow-2xl max-h-60 overflow-y-auto overflow-x-hidden backdrop-blur-xl",children:G.map((t,l)=>e.jsx("button",{onMouseDown:i=>{i.preventDefault(),ue(t)},className:"w-full text-left px-5 py-4 hover:bg-white/5 transition-colors border-b border-white/5 last:border-0 group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-white group-hover:text-blue-400 transition-colors",children:t.symbol}),e.jsx("p",{className:"text-[10px] text-slate-500 mt-0.5",children:t.name})]}),e.jsx("span",{className:"text-[9px] font-black px-2 py-1 bg-blue-500/10 text-blue-400 rounded-lg uppercase tracking-widest border border-blue-500/10",children:t.exchange})]})},l))})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"edit-investment-account",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Source/Holding Account"}),e.jsxs(L,{value:s.sourceAccountId,onValueChange:t=>h({...s,sourceAccountId:t}),children:[e.jsx(B,{id:"edit-investment-account",className:"bg-white/5 border-white/5 rounded-2xl h-14 text-white",children:e.jsx(M,{placeholder:"Select account..."})}),e.jsxs(O,{className:"bg-slate-900 border-white/10 text-white",children:[e.jsx(m,{value:"none",children:"No Linking (Physical Only)"}),r.map(t=>e.jsxs(m,{value:t.id,children:[t.name," (",t.type,")"]},t.id))]})]})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"edit-investment-name",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Name"}),e.jsx(V,{id:"edit-investment-name",name:"name",value:s.name,onChange:t=>h({...s,name:t.target.value}),className:"bg-white/5 border-white/5 rounded-2xl h-14 text-white",placeholder:"e.g., Apple Inc.",autoComplete:"off"})]}),e.jsxs("div",{children:[e.jsxs(u,{htmlFor:"edit-investment-date",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 flex items-center gap-2",children:[e.jsx(ye,{className:"w-3 h-3 text-blue-400"}),"Purchase Date"]}),e.jsx(V,{id:"edit-investment-date",name:"purchaseDate",type:"date",value:s.purchaseDate,onChange:t=>pe(t.target.value),className:"bg-white/5 border-white/5 rounded-2xl h-14 text-white",max:new Date().toISOString().split("T")[0],autoComplete:"off"}),e.jsx("p",{className:"text-[10px] text-slate-500 mt-2 italic px-1",children:"Buy price will be fetched based on this date"})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"edit-investment-quantity",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Quantity/Units"}),e.jsx(R,{id:"edit-investment-quantity",name:"quantity",value:s.quantity,onChange:t=>h({...s,quantity:t}),className:"bg-white/5 border-white/5 rounded-2xl h-14 text-white",placeholder:"Number of shares/units",autoComplete:"off"})]}),e.jsxs("div",{children:[e.jsxs(u,{htmlFor:"edit-investment-buy-price",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 flex items-center justify-between",children:[e.jsx("span",{children:"Buy Price (Avg)"}),k&&e.jsxs("span",{className:"text-[9px] text-blue-400 flex items-center gap-1 font-black uppercase tracking-widest",children:[e.jsx($,{className:"w-3 h-3 animate-spin"}),"Fetching..."]})]}),e.jsx(R,{id:"edit-investment-buy-price",name:"buyPrice",value:s.buyPrice,onChange:t=>h({...s,buyPrice:t}),className:"bg-white/5 border-white/5 rounded-2xl h-14 text-white",placeholder:"Auto-filled based on purchase date",disabled:k,autoComplete:"off"})]}),e.jsxs("div",{children:[e.jsxs(u,{htmlFor:"edit-investment-current-price",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 flex items-center justify-between",children:[e.jsx("span",{children:"Current Market Value (Per Unit)"}),k&&e.jsxs("span",{className:"text-[9px] text-blue-400 flex items-center gap-1 font-black uppercase tracking-widest",children:[e.jsx($,{className:"w-3 h-3 animate-spin"}),"Fetching..."]})]}),e.jsx(R,{id:"edit-investment-current-price",name:"currentPrice",value:s.currentPrice,onChange:t=>h({...s,currentPrice:t}),className:"bg-white/5 border-white/5 rounded-2xl h-14 text-white",placeholder:"Auto-filled from market",disabled:k,autoComplete:"off"})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"edit-investment-total-yield",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Total Yield (Dividends/Interest)"}),e.jsx(R,{id:"edit-investment-total-yield",name:"totalYield",value:s.totalYield,onChange:t=>h({...s,totalYield:t}),className:"bg-white/5 border-white/5 rounded-2xl h-14 text-white",placeholder:"Total extra cash generated",autoComplete:"off"})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx(w,{variant:"outline",onClick:()=>I(!1),className:"flex-1 rounded-2xl h-12 border-white/10 hover:bg-white/5 text-slate-400",children:"Cancel"}),e.jsx(w,{onClick:Re,className:"flex-1 rounded-2xl h-12 bg-blue-600 hover:bg-blue-500 text-white font-bold",disabled:k,children:"Update Asset"})]})]})]})}),e.jsx(se,{open:g,onOpenChange:t=>{j(t),t||(U(null),D(""))},children:e.jsxs(ae,{className:"max-w-md max-h-[90vh] overflow-y-auto bg-slate-900 border-white/10 text-white p-0",children:[e.jsx("div",{className:"p-8 border-b border-white/5",children:e.jsxs(le,{className:"p-0",children:[e.jsx(re,{className:"text-xl font-bold tracking-tight text-white",children:"Full Exit Protocol"}),e.jsx(ne,{className:"text-slate-500 text-xs mt-1",children:"Liquidate your position and distribute proceeds"})]})}),e.jsxs("div",{className:"p-8 space-y-6",children:[x&&e.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-slate-800 rounded-xl flex items-center justify-center border border-white/5",children:e.jsx("span",{className:"text-xs font-black text-blue-400",children:x.symbol.substring(0,2)})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white tracking-tight",children:x.symbol}),e.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:x.name})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:`text-[10px] font-black px-2 py-1 rounded-lg uppercase tracking-widest border ${T>=0?"bg-emerald-500/10 text-emerald-400 border-emerald-500/10":"bg-rose-500/10 text-rose-400 border-rose-500/10"}`,children:[T>=0?"+":"",T.toFixed(2),"%"]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-white/5",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest mb-1",children:"Position Size"}),e.jsxs("p",{className:"text-sm font-bold text-white",children:[x.quantity," ",x.type==="stock"?"shares":"units"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest mb-1",children:"Exit Est."}),e.jsx("p",{className:"text-sm font-bold text-blue-400",children:A((x.currentPrice||0)*x.quantity,a)})]})]})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"close-account",className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block",children:"Destination Account"}),e.jsxs(L,{value:_,onValueChange:t=>{D(t)},children:[e.jsx(B,{id:"close-account",name:"accountId",className:"bg-white/5 border-white/5 rounded-2xl h-14 text-white",children:e.jsx(M,{placeholder:"Select destination account..."})}),e.jsx(O,{className:"bg-slate-900 border-white/10 text-white",children:r.map(t=>e.jsx(m,{value:t.id,children:t.name},t.id))})]})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx(w,{variant:"outline",onClick:()=>j(!1),className:"flex-1 rounded-2xl h-12 border-white/10 hover:bg-white/5 text-slate-400",children:"Abort"}),e.jsx(w,{onClick:Ye,className:"flex-1 rounded-2xl h-12 bg-rose-600 hover:bg-rose-500 text-white font-black uppercase tracking-widest shadow-lg shadow-rose-900/20",children:"Confirm Exit"})]})]})]})}),e.jsx("div",{className:"mt-8",children:e.jsx(dt,{})})]})}export{wt as InvestmentsTab};
