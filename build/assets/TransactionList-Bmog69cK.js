import{r as j,j as e,aE as H,m as Q,C as _,aF as Z,ar as ee,Y as L,X as k,aG as Y,at as D,ac as se,K as ae,aH as te,B as re,F as R,aI as P,y as G,aJ as ne,aK as ie,aL as le,aM as oe,aN as ce,aO as de,aP as xe,aQ as he,w as V,ad as I,i as me}from"./ui-DwNC2Rqb.js";import{b as pe,u as ue,c as ge,C as N,a as b,m as S,L as we,I as be,B as w,d as O,e as f,t as fe}from"./index-DKCn1eko.js";import{A as je}from"./index-CeDZTw5p.js";import{H as U}from"./haptics-C9gh8PRt.js";import{af as W}from"./motion-BKne_-B1.js";import"./vendor-7PqXWhc5.js";function Ne(s){s.values.forEach(n=>n.stop())}function E(s,n){[...n].reverse().forEach(r=>{const i=s.getVariant(r);i&&W(s,i),s.variantChildren&&s.variantChildren.forEach(o=>{E(o,n)})})}function ve(s,n){if(Array.isArray(n))return E(s,n);if(typeof n=="string")return E(s,[n]);W(s,n)}function ye(){const s=new Set,n={subscribe(t){return s.add(t),()=>void s.delete(t)},start(t,r){const i=[];return s.forEach(o=>{i.push(pe(o,t,{transitionOverride:r}))}),Promise.all(i)},set(t){return s.forEach(r=>{ve(r,t)})},stop(){s.forEach(t=>{Ne(t)})},mount(){return()=>{n.stop()}}};return n}function ke(){const s=ue(ye);return ge(s.mount,[]),s}const Ce=ke;function Fe({currentMonthTransactions:s,recentTransactions:n,totalLiquidity:t,currency:r}){const[i,o]=j.useState(!1),l=s.incomes.reduce((x,u)=>x+u.amount,0),c=s.expenses.reduce((x,u)=>x+u.amount,0),m=s.expenses.reduce((x,u)=>x+(u.serviceChargeAmount||0),0),p=l-c-m;return e.jsxs(N,{className:"p-0 bg-[#0F172A] border border-white/10 shadow-xl overflow-hidden rounded-[24px]",children:[e.jsxs("div",{className:"p-4 flex items-center justify-between cursor-pointer hover:bg-white/5 transition-colors",onClick:()=>o(!i),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-500/10 rounded-xl flex items-center justify-center border border-indigo-500/20",children:e.jsx(H,{className:"w-5 h-5 text-indigo-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-slate-100 font-medium text-sm sm:text-base",children:"Transaction Overview"}),e.jsx("p",{className:"text-xs text-slate-400",children:"Current month activity"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"hidden sm:block text-right mr-2",children:[e.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-wider font-bold",children:"Total Liquidity"}),e.jsx("p",{className:"text-sm font-black text-white tabular-nums",children:b(t,r)})]}),e.jsxs("div",{className:"hidden sm:block text-right mr-2 border-l border-white/10 pl-4",children:[e.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-wider font-bold",children:"Monthly Net Flow"}),e.jsx("p",{className:`text-xs font-bold ${p>=0?"text-emerald-400":"text-rose-400"}`,children:b(p,r)})]}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-800 flex items-center justify-center text-slate-400 border border-white/5",children:i?e.jsx(Q,{size:18}):e.jsx(_,{size:18})})]})]}),e.jsx(je,{children:i&&e.jsx(S.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:e.jsxs("div",{className:"p-4 pt-0 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-slate-800/50 border border-white/5 p-3 rounded-2xl",children:[e.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-wider mb-1",children:"Money In"}),e.jsx("p",{className:"text-base sm:text-lg font-bold text-emerald-400 truncate",children:b(l,r)}),e.jsxs("p",{className:"text-[10px] text-slate-500",children:[s.incomes.length," transactions"]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-white/5 p-3 rounded-2xl",children:[e.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-wider mb-1",children:"Total Burn"}),e.jsx("p",{className:"text-base sm:text-lg font-bold text-rose-400 truncate",children:b(c,r)}),e.jsxs("p",{className:"text-[10px] text-slate-500",children:[s.expenses.length," transactions"]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-white/5 p-3 rounded-2xl",children:[e.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-wider mb-1",children:"Service Costs"}),e.jsx("p",{className:"text-base sm:text-lg font-bold text-amber-400 truncate",children:b(m,r)}),e.jsx("p",{className:"text-[10px] text-slate-500",children:"Credit fees tracked"})]})]}),n.length>0&&e.jsxs("div",{className:"pt-4 border-t border-white/5",children:[e.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-wider mb-3",children:"Recent Activity"}),e.jsx("div",{className:"space-y-2",children:n.map((x,u)=>{const g=x.type==="income",y=x.type==="debt";let h="";return g?h=x.source:y?h=`${x.type==="borrowed"?"Borrowed from":"Lent to"} ${x.personName}`:h=x.description,e.jsxs("div",{className:"flex items-center justify-between bg-slate-800/30 border border-white/5 p-2 rounded-xl",children:[e.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:g?"ðŸ’°":y?"ðŸ¤":"ðŸ’¸"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs truncate text-slate-200",children:h}),e.jsx("p",{className:"text-[10px] text-slate-500",children:new Date(x.date).toLocaleDateString()})]})]}),e.jsx("p",{className:`text-xs font-medium whitespace-nowrap ml-3 ${g?"text-emerald-400":"text-rose-400"}`,children:b(x.amount,r)})]},u)})})]})]})})})]})}const Ae=({searchTerm:s,setSearchTerm:n,filter:t,setFilter:r})=>e.jsxs("div",{className:"space-y-4",children:[e.jsx(N,{className:"p-4 bg-white/5 border-white/5 rounded-[24px]",children:e.jsxs("div",{className:"relative group",children:[e.jsx(we,{htmlFor:"transaction-search",className:"sr-only",children:"Search transactions"}),e.jsx(Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500 group-focus-within:text-indigo-400 transition-colors"}),e.jsx(be,{id:"transaction-search",name:"search",placeholder:"Search transactions, tags...",value:s,onChange:i=>n(i.target.value),className:"pl-12 bg-white/5 border-white/5 focus:border-indigo-500/50 rounded-2xl h-12 text-white placeholder:text-slate-600 transition-all font-bold",autoComplete:"off"})]})}),e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2 -mx-1 px-1 scrollbar-hide sm:flex-wrap sm:overflow-visible sm:pb-0 sm:mx-0 sm:px-0",children:[e.jsxs(w,{variant:t==="all"?"default":"outline",size:"sm",onClick:()=>r("all"),className:"gap-1.5 whitespace-nowrap flex-shrink-0",children:[e.jsx(H,{className:"w-4 h-4"}),"All"]}),e.jsxs(w,{variant:t==="expenses"?"default":"outline",size:"sm",onClick:()=>r("expenses"),className:`gap-1.5 whitespace-nowrap flex-shrink-0 ${t!=="expenses"?"border-red-300 text-red-700 hover:bg-red-50 dark:border-red-700 dark:text-red-400 dark:hover:bg-red-900/20":""}`,children:[e.jsx(ee,{className:"w-4 h-4"}),"Expenses"]}),e.jsxs(w,{variant:t==="income"?"default":"outline",size:"sm",onClick:()=>r("income"),className:`gap-1.5 whitespace-nowrap flex-shrink-0 ${t!=="income"?"border-green-300 text-green-700 hover:bg-green-50 dark:border-green-700 dark:text-green-400 dark:hover:bg-green-900/20":""}`,children:[e.jsx(L,{className:"w-4 h-4"}),"Income"]}),e.jsxs(w,{variant:t==="debts"?"default":"outline",size:"sm",onClick:()=>r("debts"),className:`gap-1.5 whitespace-nowrap flex-shrink-0 ${t!=="debts"?"border-yellow-300 text-yellow-700 hover:bg-yellow-50 dark:border-yellow-700 dark:text-yellow-400 dark:hover:bg-yellow-900/20":""}`,children:[e.jsx(k,{className:"w-4 h-4"}),"IOUs"]}),e.jsxs(w,{variant:t==="subs"?"default":"outline",size:"sm",onClick:()=>r("subs"),className:`gap-1.5 whitespace-nowrap flex-shrink-0 ${t!=="subs"?"border-purple-300 text-purple-700 hover:bg-purple-50 dark:border-purple-700 dark:text-purple-400 dark:hover:bg-purple-900/20":""}`,children:[e.jsx(Y,{className:"w-4 h-4"}),"Subs"]}),e.jsxs(w,{variant:t==="emis"?"default":"outline",size:"sm",onClick:()=>r("emis"),className:`gap-1.5 whitespace-nowrap flex-shrink-0 ${t!=="emis"?"border-orange-300 text-orange-700 hover:bg-orange-50 dark:border-orange-700 dark:text-orange-400 dark:hover:bg-orange-900/20":""}`,children:[e.jsx(D,{className:"w-4 h-4"}),"EMIs"]}),e.jsxs(w,{variant:t==="emergency"?"default":"outline",size:"sm",onClick:()=>r("emergency"),className:`gap-1.5 whitespace-nowrap flex-shrink-0 ${t!=="emergency"?"border-blue-300 text-blue-700 hover:bg-blue-50 dark:border-blue-700 dark:text-blue-400 dark:hover:bg-blue-900/20":""}`,children:[e.jsx(se,{className:"w-4 h-4"}),"Emergency"]}),e.jsxs(w,{variant:t==="goals"?"default":"outline",size:"sm",onClick:()=>r("goals"),className:`gap-1.5 whitespace-nowrap flex-shrink-0 ${t!=="goals"?"border-purple-300 text-purple-700 hover:bg-purple-50 dark:border-purple-700 dark:text-purple-400 dark:hover:bg-purple-900/20":""}`,children:[e.jsx(ae,{className:"w-4 h-4"}),"Goals"]})]}),t==="emis"&&e.jsx(N,{className:"p-4 bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(D,{className:"w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-orange-900 dark:text-orange-100",children:"EMI Payments"}),e.jsxs("p",{className:"text-sm text-orange-800 dark:text-orange-200 mt-1",children:["These are loan EMI payment transactions. Manage your loans in the ",e.jsx("strong",{children:"Liability tab"}),"."]})]})]})})]}),T=({children:s,onDelete:n,onEdit:t,className:r="",isPendingDelete:i=!1})=>{const o=Ce(),l=100,c=j.useRef(!1);j.useEffect(()=>{i||(o.set({x:0,opacity:1}),c.current=!1)},[i,o]);const m=async(p,x)=>{const u=x.offset.x,g={type:"spring",stiffness:600,damping:40,mass:.8};u<-l?(c.current=!0,U.warning(),await o.start({x:-window.innerWidth,opacity:0,transition:{duration:.3,ease:"easeOut"}}),n()):u>l&&t?(c.current=!0,U.light(),await o.start({x:0,transition:g}),t(),c.current=!1):await o.start({x:0,transition:g})};return e.jsxs(S.div,{initial:!1,animate:{height:i?0:"auto",opacity:i?0:1,marginBottom:i?0:12,visibility:i?"hidden":"visible"},transition:{duration:.3,ease:[.19,1,.22,1]},className:O("relative overflow-hidden squircle-22",r),children:[!i&&e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:O("flex-1 bg-[#FFB000] flex items-center justify-start pl-8",!t&&"opacity-0"),children:e.jsx(te,{className:"text-white w-6 h-6"})}),e.jsx("div",{className:"flex-1 bg-[#FF4B4B] flex items-center justify-end pr-8",children:e.jsx(re,{className:"text-white w-6 h-6"})})]}),e.jsx(S.div,{drag:"x",dragConstraints:{left:-window.innerWidth,right:t?window.innerWidth:0},dragElastic:.15,onDragEnd:m,animate:o,initial:{x:0},className:"relative z-10 bg-[#1C1C1E]",transition:{type:"spring",stiffness:600,damping:40,mass:.8},children:s})]})},Le=s=>({"Food & Dining":e.jsx(he,{className:"w-5 h-5"}),Transport:e.jsx(xe,{className:"w-5 h-5"}),Shopping:e.jsx(de,{className:"w-5 h-5"}),Entertainment:e.jsx(G,{className:"w-5 h-5"}),"Bills & Utilities":e.jsx(ce,{className:"w-5 h-5"}),Healthcare:e.jsx(oe,{className:"w-5 h-5"}),Education:e.jsx(le,{className:"w-5 h-5"}),Travel:e.jsx(ie,{className:"w-5 h-5"}),Groceries:e.jsx(ne,{className:"w-5 h-5"}),"Personal Care":e.jsx(G,{className:"w-5 h-5"}),EMI:e.jsx(D,{className:"w-5 h-5"}),Subscription:e.jsx(Y,{className:"w-5 h-5"}),"Personal IOU":e.jsx(k,{className:"w-5 h-5"}),"Debt Payment":e.jsx(k,{className:"w-5 h-5"}),Other:e.jsx(R,{className:"w-5 h-5"})})[s]||e.jsx(R,{className:"w-5 h-5"}),De=s=>s.toLowerCase().includes("salary")?e.jsx(P,{className:"w-5 h-5"}):s.toLowerCase().includes("freelance")?e.jsx(L,{className:"w-5 h-5"}):s.toLowerCase().includes("investment")?e.jsx(L,{className:"w-5 h-5"}):e.jsx(P,{className:"w-5 h-5"}),$=s=>new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),Se=({expense:s,currency:n,onEdit:t,onDelete:r,isPendingDelete:i})=>{const o=s.tags&&Array.isArray(s.tags)&&s.tags.some(c=>c?.toLowerCase().includes("goal"))||s.description&&s.description.toLowerCase().includes("goal")||s.description&&s.description.toLowerCase().includes("saving"),l=s.category==="Healthcare"||s.description&&s.description.toLowerCase().includes("insurance")||s.description&&s.description.toLowerCase().includes("medical")||s.description&&s.description.toLowerCase().includes("emergency");return e.jsx(T,{onDelete:()=>r(s.id),onEdit:()=>t(s),isPendingDelete:i,children:e.jsx(N,{className:`p-5 hover:shadow-md transition-shadow border-none rounded-none bg-transparent ${o?"border-l-4 border-l-purple-500":""} ${l?"border-l-4 border-l-blue-500":""}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-[#FF453A]/10 border border-[#FF453A]/20 flex items-center justify-center text-[#FF453A] flex-shrink-0",children:Le(s.category)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[e.jsx("h4",{className:"truncate font-bold text-slate-100",children:s.description}),s.isRecurring&&e.jsx(V,{className:"w-3 h-3 text-[#0A84FF] flex-shrink-0"}),o&&e.jsx(f,{variant:"outline",className:"text-[10px] bg-[#BF5AF2]/10 border-[#BF5AF2]/20 text-[#BF5AF2] font-black uppercase",children:"ðŸŽ¯ Goal"}),l&&e.jsx(f,{variant:"outline",className:"text-[10px] bg-[#0A84FF]/10 border-[#0A84FF]/20 text-[#0A84FF] font-black uppercase",children:"ðŸ›¡ï¸ Emergency"}),s.isIncomeGenerating&&e.jsx(f,{variant:"outline",className:"text-[10px] bg-[#30D158]/10 border-[#30D158]/20 text-[#30D158] font-black uppercase",children:"ðŸš€ Strategic"})]}),e.jsxs("p",{className:"text-label text-[10px]",children:[s.category," â€¢ ",$(s.date)]}),s.tags&&Array.isArray(s.tags)&&s.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:s.tags.map((c,m)=>e.jsxs(f,{variant:"outline",className:"text-[9px] bg-white/5 border-white/5 text-[#8E8E93] font-bold",children:["#",c]},`${c}-${m}`))})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("p",{className:"text-balance text-sm text-[#FF453A] whitespace-nowrap",children:["-",b(s.amount,n)]}),e.jsx(I,{className:"w-4 h-4 text-slate-600 flex-shrink-0"})]})]})})})},Ee=({income:s,currency:n,onEdit:t,onDelete:r,isPendingDelete:i})=>{const o=s.tags&&Array.isArray(s.tags)&&s.tags.some(l=>l?.toLowerCase().includes("goal"))||s.source&&s.source.toLowerCase().includes("goal")||s.source&&s.source.toLowerCase().includes("saving");return e.jsx(T,{onDelete:()=>r(s.id),onEdit:()=>t(s),isPendingDelete:i,children:e.jsx(N,{className:`p-5 hover:shadow-md transition-shadow border-none rounded-none bg-transparent ${o?"border-l-4 border-l-purple-500":""}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-[#30D158]/10 border border-[#30D158]/20 flex items-center justify-center text-[#30D158] flex-shrink-0",children:De(s.source)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[e.jsx("h4",{className:"truncate font-bold text-slate-100",children:s.source}),s.isRecurring&&e.jsx(V,{className:"w-3 h-3 text-[#0A84FF] flex-shrink-0"}),o&&e.jsx(f,{variant:"outline",className:"text-[10px] bg-[#BF5AF2]/10 border-[#BF5AF2]/20 text-[#BF5AF2] font-black uppercase",children:"ðŸŽ¯ Goal"})]}),e.jsxs("p",{className:"text-label text-[10px]",children:["Capital Injection â€¢ ",$(s.date)]}),s.tags&&Array.isArray(s.tags)&&s.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:s.tags.map((l,c)=>e.jsxs(f,{variant:"outline",className:"text-[9px] bg-white/5 border-white/5 text-[#8E8E93] font-bold",children:["#",l]},`${l}-${c}`))})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("p",{className:"text-balance text-sm text-[#30D158] whitespace-nowrap",children:["+",b(s.amount,n)]}),e.jsx(I,{className:"w-4 h-4 text-slate-600 flex-shrink-0"})]})]})})})},Ie=({debt:s,currency:n,onEdit:t,onDelete:r,onSettle:i,isPendingDelete:o})=>e.jsx(T,{onDelete:()=>r(s.id),onEdit:()=>t(s),isPendingDelete:o,children:e.jsx(N,{className:"p-5 hover:shadow-md transition-shadow border-none rounded-none bg-transparent",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 ${s.type==="lent"?"bg-[#0A84FF]/10 border border-[#0A84FF]/20 text-[#0A84FF]":"bg-[#FF9F0A]/10 border border-[#FF9F0A]/20 text-[#FF9F0A]"}`,children:e.jsx(k,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"truncate font-bold text-slate-100",children:s.personName}),e.jsxs("p",{className:"text-label text-[10px]",children:[s.type==="lent"?"Capital Displaced":"Capital Sourced"," â€¢ ",$(s.date)]}),s.status==="settled"&&e.jsx(f,{variant:"outline",className:"text-[10px] mt-1 bg-[#30D158]/10 border-[#30D158]/20 text-[#30D158] font-black uppercase",children:"âœ“ Settled"}),s.tags&&Array.isArray(s.tags)&&s.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:s.tags.map((l,c)=>e.jsxs(f,{variant:"outline",className:"text-[9px] bg-white/5 border-white/5 text-[#8E8E93] font-bold",children:["#",l]},`${l}-${c}`))})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("p",{className:`text-balance text-sm whitespace-nowrap ${s.type==="lent"?"text-[#0A84FF]":"text-[#FF9F0A]"}`,children:b(s.amount,n)}),e.jsxs("div",{className:"flex items-center gap-1",children:[s.status==="pending"&&e.jsx(w,{variant:"ghost",size:"sm",onClick:()=>i(s.id),className:"w-8 h-8 p-0 text-[#30D158] hover:bg-[#30D158]/10",title:"Mark as Settled",children:e.jsx(me,{className:"w-4 h-4"})}),e.jsx(I,{className:"w-4 h-4 text-slate-600 flex-shrink-0"})]})]})]})})});function Te(s){const[n,t]=j.useState(new Set),r=j.useRef({});return{handleDelete:(l,c="Transaction")=>{t(m=>{const p=new Set(m);return p.add(l),p}),fe.success(`${c} deleted`,{description:"You have 3 seconds to undo this action.",duration:3e3,action:{label:"Undo",onClick:()=>{r.current[l]&&(clearTimeout(r.current[l]),delete r.current[l]),t(m=>{const p=new Set(m);return p.delete(l),p})}},onAutoClose:()=>{s(l),t(m=>{const p=new Set(m);return p.delete(l),p}),delete r.current[l]}})},isPending:l=>n.has(l)}}const Ge=({expenses:s,incomes:n,debts:t,accounts:r,currency:i,onEditExpense:o,onDeleteExpense:l,onEditIncome:c,onDeleteIncome:m,onEditDebt:p,onDeleteDebt:x,onSettleDebt:u})=>{const[g,y]=j.useState(""),[h,q]=j.useState("all"),C=[...s.map(a=>({...a,kind:"expense"})),...n.map(a=>({...a,kind:"income"})),...t.map(a=>({...a,kind:"debt"}))].sort((a,d)=>new Date(d.date).getTime()-new Date(a.date).getTime()),{handleDelete:F,isPending:A}=Te(a=>{const d=C.find(v=>v.id===a);d&&(d.kind==="expense"?l(a):d.kind==="income"?m(a):d.kind==="debt"&&x(a))}),B=new Date().getMonth(),M=new Date().getFullYear(),K={expenses:s.filter(a=>{const d=new Date(a.date);return d.getMonth()===B&&d.getFullYear()===M}),incomes:n.filter(a=>{const d=new Date(a.date);return d.getMonth()===B&&d.getFullYear()===M})},X=C.slice(0,5),J=r.filter(a=>a.type==="bank"||a.type==="cash").reduce((a,d)=>a+d.balance,0),z=C.filter(a=>"description"in a&&a.description?.toLowerCase().includes(g.toLowerCase())||"source"in a&&a.source?.toLowerCase().includes(g.toLowerCase())||"personName"in a&&a.personName?.toLowerCase().includes(g.toLowerCase())||a.tags&&Array.isArray(a.tags)&&a.tags.some(v=>v?.toLowerCase().includes(g.toLowerCase()))?h==="all"?!0:h==="expenses"?a.kind==="expense":h==="income"?a.kind==="income":h==="debts"?a.kind==="debt":h==="subs"?a.kind==="expense"?"category"in a&&a.category==="Subscription"||a.tags&&a.tags.includes("subscription")||"description"in a&&a.description&&(a.description.toLowerCase().includes("subscription")||a.description.toLowerCase().includes("netflix")||a.description.toLowerCase().includes("spotify")||a.description.toLowerCase().includes("prime")):!1:h==="emis"?a.kind==="expense"?"category"in a&&a.category==="EMI"||a.tags&&(a.tags.includes("emi")||a.tags.includes("loan"))||"description"in a&&a.description&&(a.description.toLowerCase().includes("emi")||a.description.toLowerCase().includes("loan payment")||a.description.toLowerCase().includes("loan")):!1:h==="emergency"?a.kind==="expense"?"category"in a&&a.category==="Healthcare"||"description"in a&&a.description&&(a.description.toLowerCase().includes("insurance")||a.description.toLowerCase().includes("medical")||a.description.toLowerCase().includes("health")||a.description.toLowerCase().includes("emergency")):!1:h==="goals"?a.tags&&Array.isArray(a.tags)&&a.tags.some(v=>v?.toLowerCase().includes("goal"))||"description"in a&&a.description&&(a.description.toLowerCase().includes("goal")||a.description.toLowerCase().includes("saving")):!0:!1);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(Fe,{currentMonthTransactions:K,recentTransactions:X,totalLiquidity:J,currency:i}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-100 mb-1",children:"All Transactions"}),e.jsx("p",{className:"text-xs sm:text-sm text-slate-400",children:"Track and manage all your financial transactions"})]}),e.jsx(Ae,{searchTerm:g,setSearchTerm:y,filter:h,setFilter:q}),e.jsx("div",{className:"pb-20",children:z.length===0?e.jsxs(N,{className:"p-12 text-center",children:[e.jsx("p",{className:"text-gray-500",children:"No transactions found."}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:h==="emis"?"No EMI payments recorded. Add expenses with 'EMI' category or visit the Liability tab to track loans.":"Try adjusting your filters or search term"})]}):z.map(a=>{const d="description"in a?a.description:"source"in a?a.source:"personName"in a?a.personName:"Transaction";return a.kind==="expense"?e.jsx(Se,{expense:a,currency:i,onEdit:o,onDelete:()=>F(a.id,d),isPendingDelete:A(a.id)},a.id):a.kind==="income"?e.jsx(Ee,{income:a,currency:i,onEdit:c,onDelete:()=>F(a.id,d),isPendingDelete:A(a.id)},a.id):e.jsx(Ie,{debt:a,currency:i,onEdit:p,onDelete:()=>F(a.id,d),onSettle:u,isPendingDelete:A(a.id)},a.id)})})]})};export{Ge as TransactionList};
