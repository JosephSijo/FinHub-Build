[
  [
    "accounts",
    [
      {
        "file": "android\\app\\src\\main\\assets\\public\\assets\\index-i0Euu4OB.js",
        "line": 59,
        "snippet": "`.trim();return await Hp(h,g,S,u)},eN=async(i,l)=>await Hp(i,l,\"Respond with only the word 'OK' to verify connectivity.\",\"ASSISTANT\"),tN=i=>{if(i.aiProvider&&al(i.aiProvider,i))return i.aiProvider;const l=[\"openai\",\"anthropic\",\"gemini\",\"deepseek\",\"perplexity\"];for(const o of l)if(al(o,i))return o;return null},_0={BASE_URL:\"/\",DEV:!1,MODE:\"production\",PROD:!0,SSR:!1},aN=({isOpen:i,onClose:l,settings:o,onUpdateSettings:u,onAchievementClick:d,onOpenAbout:h})=>{const[g,N]=x.useState(o.name||\"\"),[E,S]=x.useState(o.photoURL||\"\"),[p,f]=x.useState(!1),[w,A]=x.useState(null),[T,C]=x.useState({}),[M,y]=x.useState(!1),{logout:L,scheduleAccountDeletion:z,migrateSubscriptions:j,cleanupDuplicates:G,clearAllData:ee}=ai(),[Z,_]=x.useState(!1),B=async()=>{y(!0);try{await j()}catch(fe){console.error(\"Migration failed:\",fe),ce.error(\"Migration failed\")}finally{y(!1)}},[J,ne]=x.useState(\"USD\"),[F,oe]=x.useState(\"100\"),[ge,O]=x.useState(\"100000\"),[k,U]=x.useState(\"10\"),[Q,ae]=x.useState(\"6\"),[v,D]=x.useState(!1),W=async()=>{const Se={USD:\"US\",INR:\"IN\",GBP:\"GB\",EUR:\"EMU\",AED:\"AE\",SAR:\"SA\"}[o.currency]||\"US\";D(!0);try{const lt=await(await fetch(`https://api.worldbank.org/v2/country/${Se}/indicator/FP.CPI.TOTL.ZG?format=json&per_page=1`)).json();if(lt&&lt[1]&&lt[1][0]&&lt[1][0].value){const mt=lt[1][0].value;ae(mt.toFixed(2)),ce.success(`Inflation rate synced for ${o.currency}`)}}catch(ze){console.error(\"Inflation sync failed:\",ze),ce.error(\"Failed to sync inflation rate.\")}finally{D(!1)}},q=Array.from({length:(parseInt(k)||0)+1},(fe,Se)=>{const ze=parseFloat(ge)||0,lt=parseFloat(Q)||0,mt=ze*Math.pow(1+lt/100,Se),_a=ze/Math.pow(1+lt/100,Se);return{year:Se,futureCost:Math.round(mt),purchasingPower:Math.round(_a)}}),Y=[\"INR\",\"USD\",\"EUR\",\"GBP\",\"AED\",\"SAR\"],V=o.currency;x.useEffect(()=>{N(o.name||\"\"),S(o.photoURL||\"\")},[o]),x.useEffect(()=>{i&&te()},[i,J]);const te=async()=>{try{const Se=await(await fetch(`https://api.exchangerate-api.com/v4/latest/${J}`)).json();C(Se.rates||{}),F&&me(F,Se.rates)}catch(fe){console.error(\"Error loading exchange rates:\",fe)}},me=(fe,Se)=>{const ze=parseFloat(fe);if(!isNaN(ze)&&ze>0){const mt=(Se||T)[V]||1;A(ze*mt)}else A(null)},ie=fe=>{oe(fe),me(fe)},{setTheme:le}=wj();x.useEffect(()=>{o.theme!==\"dark\"&&(le(\"dark\"),u({theme:\"dark\"}))},[]);const je=()=>{u({name:g,photoURL:E}),f(!1)},Ae=fe=>{const Se=fe.target.files?.[0];if(Se){const ze=new FileReader;ze.onloadend=()=>{S(ze.result)},ze.readAsDataURL(Se)}},pe=U1(),ve=new Set(o.unlockedAchievements),xe=o.aiProvider||\"openai\",Ke=[{id:\"openai\",label:\"OpenAI\",placeholder:\"sk-...\"},{id:\"anthropic\",label:\"Anthropic\",placeholder:\"sk-ant-...\"},{id:\"gemini\",label:\"Gemini\",placeholder:\"AIza...\"},{id:\"deepseek\",label:\"Deepseek\",placeholder:\"sk-...\"},{id:\"perplexity\",label:\"Perplexity\",placeholder:\"pplx-...\"}],[We,Ue]=x.useState(!1),[it,Ve]=x.useState(null),ke=x.useCallback((fe,Se)=>{u({[fe]:Se})},[u]),Ft=async()=>{const fe=al(xe,o);if(!fe){ce.error(\"No API key found in Settings or System Environment\");return}Ue(!0),Ve(null);try{const Se=await eN(xe,fe);Se.error?(Ve({success:!1,message:Se.error}),ce.error(`Connection failed: ${Se.error}`)):(Ve({success:!0,message:\"Neural link established.\"}),ce.success(\"Connection successful!\"))}catch(Se){const ze=Se.message||\"Unknown error\";console.error(\"Settings save error:\",Se),ce.error(`${at.common.status.error}: ${ze}`)}finally{Ue(!1)}};return n.jsx(kp,{open:i,onOpenChange:l,children:n.jsxs(Dp,{side:\"left\",className:\"w-full sm:max-w-lg overflow-y-auto px-0 bg-slate-950 border-white/5 text-slate-100 h-dvh\",children:[n.jsx(Mp,{className:\"sr-only\",children:\"Settings\"}),n.jsx(_p,{className:\"sr-only\",children:\"Customize your FinHub core experience.\"}),n.jsxs(\"div\",{className:\"space-y-12 animate-in fade-in slide-in-from-left-4 duration-500 px-8 pt-12 pb-10 text-white relative\",children:[n.jsx(\"div\",{className:\"absolute top-4 right-4 z-20\",children:n.jsx(Re,{variant:\"ghost\",size:\"icon\",onClick:l,className:\"w-10 h-10 rounded-full bg-white/5 text-slate-400 hover:text-white hover:bg-white/10\",children:n.jsx(il,{className:\"w-5 h-5\"})})}),n.jsxs(\"div\",{className:\"flex flex-col gap-2\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-1.5 h-8 bg-indigo-500 rounded-full shadow-[0_0_15px_rgba(99,102,241,0.5)]\"}),n.jsx(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tight leading-none text-white\",children:\"System Config\"})]}),n.jsx(\"p\",{className:\"text-slate-500 font-bold ml-4 text-sm\",children:\"Customize your FinHub core experience.\"})]}),n.jsxs(\"div\",{className:\"space-y-10\",children:[n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"h3\",{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Su,{className:\"w-3.5 h-3.5\"}),\"User Identity\"]}),n.jsx(Re,{variant:\"ghost\",size:\"sm\",onClick:()=>f(!p),className:\"text-[10px] font-black uppercase tracking-widest text-indigo-400 hover:text-indigo-300 hover:bg-white/5\",children:p?\"Abort\":\"Refine\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-8 bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-indigo-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsxs(\"div\",{className:\"relative\",children:[E?n.jsx(\"img\",{src:E,alt:\"Profile\",className:\"w-24 h-24 rounded-full object-cover border-4 border-slate-800 shadow-2xl\"}):n.jsx(\"div\",{className:\"w-24 h-24 bg-gradient-to-br from-indigo-600 to-purple-700 rounded-full flex items-center justify-center shadow-2xl\",children:n.jsx(Su,{className:\"w-12 h-12 text-white/90\"})}),p&&n.jsxs(\"label\",{className:\"absolute bottom-0 right-0 w-9 h-9 bg-indigo-600 rounded-full flex items-center justify-center cursor-pointer hover:bg-indigo-500 shadow-lg border-4 border-slate-900 transition-transform active:scale-90\",children:[n.jsx(ry,{className:\"w-4 h-4 text-white\"}),n.jsx(\"input\",{type:\"file\",accept:\"image/*\",className:\"hidden\",onChange:Ae,\"aria-label\":\"Upload profile picture\"})]})]}),n.jsx(\"div\",{className:\"flex-1 min-w-0\",children:p?n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(ye,{htmlFor:\"settings-profile-name\",className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Alias\"}),n.jsx(wt,{id:\"settings-profile-name\",name:\"name\",placeholder:\"e.g. Maverick\",value:g,onChange:fe=>N(fe.target.value),className:\"bg-white/5 border-white/5 rounded-xl h-12 text-white placeholder:text-slate-700 font-bold\",autoComplete:\"name\"})]}),n.jsx(Re,{size:\"sm\",onClick:je,className:\"w-full h-12 bg-indigo-600 hover:bg-indigo-500 text-white font-black rounded-xl\",children:\"Commit Identity\"})]}):n.jsxs(n.Fragment,{children:[n.jsx(\"h4\",{className:\"text-2xl font-black text-slate-100 tracking-tight\",children:g||\"Guest User\"}),n.jsx(\"p\",{className:\"text-xs text-slate-500 font-bold uppercase tracking-widest mt-1\",children:\"FinHub Node // 0x50.3\"})]})})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsx(\"div\",{className:\"space-y-4\",children:n.jsxs(\"button\",{onClick:()=>u({roundUpEnabled:!o.roundUpEnabled}),className:`w-full flex items-center justify-between p-6 rounded-[32px] border transition-all relative overflow-hidden group ${o.roundUpEnabled?\"bg-emerald-500/10 border-emerald-500/50 shadow-[0_0_20px_rgba(16,185,129,0.1)]\":\"bg-slate-900/40 border-white/5 grayscale opacity-60 hover:opacity-100 hover:grayscale-0\"}`,children:[n.jsx(\"div\",{className:`absolute top-0 right-0 w-24 h-24 blur-3xl opacity-10 -mr-12 -mt-12 transition-colors ${o.roundUpEnabled?\"bg-emerald-500\":\"bg-slate-500\"}`}),n.jsxs(\"div\",{className:\"space-y-1 relative z-10 flex-1 pr-4 text-left\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-2 text-sm font-black text-slate-100 uppercase tracking-tight\",children:[n.jsx(qn,{className:`w-4 h-4 ${o.roundUpEnabled?\"text-emerald-500\":\"text-slate-500\"}`}),\"Virtual Round-Ups\"]}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 font-bold leading-relaxed uppercase tracking-widest\",children:\"Build your fortress automatically via expense spillover.\"})]}),n.jsx(\"div\",{className:`relative z-10 px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${o.roundUpEnabled?\"bg-emerald-500 text-white shadow-lg shadow-emerald-500/20\":\"bg-slate-800 text-slate-500\"}`,children:o.roundUpEnabled?\"Active\":\"Offline\"})]})}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(ye,{htmlFor:\"settings-currency\",className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Gh,{className:\"w-3.5 h-3.5\"}),\"Standard Denomination\"]}),n.jsxs(\"div\",{className:\"bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-indigo-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsx(\"div\",{className:\"space-y-2 relative z-10\",children:n.jsxs(Ut,{value:o.currency,onValueChange:fe=>u({currency:fe}),children:[n.jsx(Bt,{id:\"settings-currency\",name:\"currency\",className:\"bg-white/5 border-white/5 rounded-2xl h-14 font-black\",children:n.jsx(It,{})}),n.jsxs(qt,{className:\"bg-slate-900 border-white/10 text-white\",children:[n.jsx(qe,{value:\"USD\",children:\"USD ($) - US Dollar\"}),n.jsx(qe,{value:\"EUR\",children:\"EUR (€) - Euro\"}),n.jsx(qe,{value:\"GBP\",children:\"GBP (£) - British Pound\"}),n.jsx(qe,{value:\"INR\",children:\"INR (₹) - Indian Rupee\"}),n.jsx(qe,{value:\"AED\",children:\"AED (د.إ) - UAE Dirham\"}),n.jsx(qe,{value:\"SAR\",children:\"SAR (﷼) - Saudi Riyal\"})]})]})})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(ye,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Gh,{className:\"w-3.5 h-3.5\"}),\"Foreign Exchange Probe\"]}),n.jsxs(\"div\",{className:\"space-y-6 p-6 bg-slate-900/40 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-blue-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4 relative z-10\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(ye,{htmlFor:\"converter-from-currency\",className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Source\"}),n.jsxs(Ut,{value:J,onValueChange:fe=>{ne(fe)},children:[n.jsx(Bt,{id:\"converter-from-currency\",name:\"fromCurrency\",className:\"bg-white/5 border-white/5 rounded-2xl h-12\",children:n.jsx(It,{})}),n.jsx(qt,{className:\"bg-slate-900 border-white/10 text-white\",children:Y.map(fe=>n.jsxs(qe,{value:fe,children:[dn[fe],\" \",fe]},fe))})]})]}),n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(ye,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Target\"}),n.jsxs(\"div\",{className:\"h-12 flex items-center justify-center bg-indigo-500/10 rounded-2xl border border-indigo-500/20 text-xs font-black text-indigo-400\",children:[dn[V],\" \",V]})]})]}),n.jsxs(\"div\",{className:\"space-y-1.5 relative z-10\",children:[n.jsx(ye,{htmlFor:\"converter-amount\",className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Capital Amount\"}),n.jsx(wt,{id:\"converter-amount\",name:\"amount\",type:\"number\",placeholder:\"Enter amount\",value:F,onChange:fe=>{const Se=fe.target.value;parseFloat(Se)<0||ie(Se)},min:\"0\",className:\"bg-white/5 border-white/5 rounded-2xl h-14 font-black text-lg\",autoComplete:\"off\"})]}),w!==null&&n.jsxs(\"div\",{className:\"p-6 bg-white/5 rounded-2xl border border-white/5 animate-in fade-in slide-in-from-top-2 relative z-10\",children:[n.jsx(\"p\",{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 mb-2\",children:\"Calculated Projection\"}),n.jsxs(\"div\",{className:\"flex items-baseline gap-2\",children:[n.jsxs(\"p\",{className:\"text-2xl font-black text-emerald-400 tabular-nums\",children:[dn[V],w.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold uppercase tracking-widest\",children:\"ESTIMATED VALUATION\"})]}),T[V]&&n.jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-white/5 flex items-center justify-between\",children:[n.jsx(\"span\",{className:\"text-[8px] font-black uppercase tracking-[0.2em] text-slate-700\",children:\"Interest Rate\"}),n.jsxs(\"span\",{className:\"text-[10px] font-black text-slate-500 tabular-nums\",children:[\"1 \",J,\" = \",T[V].toFixed(4),\" \",V]})]})]})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(ye,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(qn,{className:\"w-3.5 h-3.5 text-rose-500\"}),\"Inflation Projection Node\"]}),n.jsxs(\"div\",{className:\"space-y-6 p-6 bg-slate-900/40 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-rose-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsxs(\"div\",{className:\"space-y-4 relative z-10\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(ye,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Current Capital\"}),n.jsx(wt,{type:\"number\",value:ge,onChange:fe=>O(fe.target.value),className:\"bg-white/5 border-white/5 rounded-2xl h-12 font-black\",placeholder:\"e.g. 1000000\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(ye,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Horizon (Years)\"}),n.jsx(wt,{type:\"number\",value:k,onChange:fe=>U(fe.target.value),className:\"bg-white/5 border-white/5 rounded-2xl h-12 font-black\"})]}),n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between ml-1\",children:[n.jsx(ye,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500\",children:\"Rate (%)\"}),n.jsxs(\"button\",{onClick:W,disabled:v,className:\"text-[8px] font-black uppercase text-indigo-400 hover:text-indigo-300 disabled:opacity-50 flex items-center gap-1\",children:[v?n.jsx(Xc,{className:\"w-2 h-2 animate-spin\"}):n.jsx(oy,{className:\"w-2 h-2\"}),\"Sync\"]})]}),n.jsx(wt,{type:\"number\",value:Q,onChange:fe=>ae(fe.target.value),className:\"bg-white/5 border-white/5 rounded-2xl h-12 font-black\"})]})]}),ge&&n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(\"div\",{className:\"h-32 w-full bg-black/20 rounded-2xl p-2 border border-white/5 overflow-hidden\",children:n.jsx(mv,{width:\"100%\",height:\"100%\",minHeight:128,minWidth:100,children:n.jsxs(hv,{data:q,children:[n.jsxs(\"defs\",{children:[n.jsxs(\"linearGradient\",{id:\"colorCost\",x1:\"0\",y1:\"0\",x2:\"0\",y2:\"1\",children:[n.jsx(\"stop\",{offset:\"5%\",stopColor:\"#FB7185\",stopOpacity:.3}),n.jsx(\"stop\",{offset:\"95%\",stopColor:\"#FB7185\",stopOpacity:0})]}),n.jsxs(\"linearGradient\",{id:\"colorPower\",x1:\"0\",y1:\"0\",x2:\"0\",y2:\"1\",children:[n.jsx(\"stop\",{offset:\"5%\",stopColor:\"#34D399\",stopOpacity:.3}),n.jsx(\"stop\",{offset:\"95%\",stopColor:\"#34D399\",stopOpacity:0})]})]}),n.jsx(pv,{strokeDasharray:\"3 3\",vertical:!1,stroke:\"rgba(255,255,255,0.05)\"}),n.jsx(gv,{contentStyle:{backgroundColor:\"#0f172a\",border:\"1px solid rgba(255,255,255,0.1)\",borderRadius:\"8px\",fontSize:\"10px\"},itemStyle:{color:\"#fff\",padding:\"2px 0\"}}),n.jsx(Xh,{type:\"monotone\",dataKey:\"futureCost\",stroke:\"#FB7185\",fillOpacity:1,fill:\"url(#colorCost)\"}),n.jsx(Xh,{type:\"monotone\",dataKey:\"purchasingPower\",stroke:\"#34D399\",fillOpacity:1,fill:\"url(#colorPower)\"})]})})}),n.jsxs(\"div\",{className:\"p-6 bg-white/5 rounded-2xl border border-white/5 space-y-4\",children:[n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 mb-2\",children:\"Future Cost\"}),n.jsxs(\"p\",{className:\"text-xl font-black text-rose-400 tabular-nums\",children:[dn[o.currency],Math.round(parseFloat(ge)*Math.pow(1+parseFloat(Q)/100,parseFloat(k))).toLocaleString()]})]}),n.jsxs(\"div\",{className:\"pt-4 border-t border-white/5\",children:[n.jsx(\"p\",{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 mb-2\",children:\"Real Purchasing Power\"}),n.jsxs(\"p\",{className:\"text-xl font-black text-emerald-400 tabular-nums\",children:[dn[o.currency],Math.round(parseFloat(ge)/Math.pow(1+parseFloat(Q)/100,parseFloat(k))).toLocaleString()]}),n.jsx(\"p\",{className:\"text-[8px] text-slate-600 font-bold uppercase tracking-widest mt-1\",children:\"VALUATION IN TODAY'S MONEY\"})]})]})]})]})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(ye,{className:\"text-[10px] font-bold uppercase tracking-[0.2em] text-slate-500 flex items-center gap-2\",children:[n.jsx(cy,{className:\"w-3.5 h-3.5 text-indigo-400\"}),\"AI Assistant Config\"]}),n.jsxs(\"div\",{className:\"space-y-6 bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsxs(\"div\",{className:\"space-y-1.5 relative z-10\",children:[n.jsx(ye,{htmlFor:\"ai-provider-select\",className:\"text-[9px] font-bold uppercase tracking-widest text-slate-500 ml-1\",children:\"Preferred Provider\"}),n.jsxs(Ut,{value:xe,onValueChange:fe=>u({aiProvider:fe}),children:[n.jsx(Bt,{id:\"ai-provider-select\",name:\"aiProvider\",className:\"bg-slate-900 border-white/5 rounded-xl h-11 text-[10px] font-bold uppercase tracking-widest\",children:n.jsx(It,{})}),n.jsx(qt,{className:\"bg-slate-900 border-white/10 text-white\",children:Ke.map(fe=>n.jsx(qe,{value:fe.id,className:\"text-[10px] font-bold uppercase tracking-widest\",children:fe.label},fe.id))})]})]}),n.jsxs(\"div\",{className:\"space-y-4 pt-2 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between px-1\",children:[n.jsx(ye,{className:\"text-[9px] font-bold uppercase tracking-widest text-slate-500\",children:\"Active Credential\"}),n.jsx(\"div\",{className:\"flex items-center gap-1.5\",children:n.jsx(\"span\",{className:\"text-[8px] font-bold text-indigo-400/70 uppercase tracking-tighter\",children:Ke.find(fe=>fe.id===xe)?.label})})]}),Ke.filter(fe=>fe.id===xe).map(fe=>{const Se=o.apiKeys?.[fe.id],ze=`VITE_${fe.id.toUpperCase()}_API_KEY`,lt=!!_0[ze];return n.jsxs(\"div\",{className:\"flex items-center gap-3 bg-indigo-500/5 p-4 rounded-2xl border border-indigo-500/20 group/active transition-all\",children:[n.jsx(\"div\",{className:\"flex-1 min-w-0\",children:n.jsxs(\"div\",{className:\"relative group/input\",children:[n.jsx(wt,{type:\"password\",value:Se||\"\",onChange:mt=>ke(\"apiKeys\",{...o.apiKeys,[fe.id]:mt.target.value}),placeholder:lt?\"Using System Environment Key\":`Enter ${fe.label} Key`,className:`bg-transparent border-none p-0 h-auto text-sm font-bold text-white placeholder:text-slate-700 focus-visible:ring-0 shadow-none ${lt&&!Se?\"opacity-40 italic font-medium\":\"\"}`,disabled:lt&&!Se}),lt&&!Se&&n.jsx(\"div\",{className:\"flex items-center gap-1 mt-1\",children:n.jsx(\"span\",{className:\"text-[7px] font-black text-emerald-500 uppercase tracking-widest bg-emerald-500/10 px-1 py-0.5 rounded\",children:\"System Linked\"})})]})}),Se&&n.jsx(\"button\",{onClick:()=>ke(\"apiKeys\",{...o.apiKeys,[fe.id]:\"\"}),className:\"text-slate-600 hover:text-rose-500 transition-colors p-1\",title:\"Clear saved key\",\"aria-label\":`Clear saved key for ${fe.label}`,children:n.jsx(tl,{className:\"w-3.5 h-3.5\"})})]},fe.id)}),n.jsx(Re,{onClick:Ft,disabled:We||!al(xe,o),className:`w-full h-11 transition-all font-bold uppercase tracking-[0.2em] text-[10px] rounded-xl ${it?.success?\"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20\":it?.success===!1?\"bg-rose-500/10 text-rose-400 border border-rose-500/20\":\"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20\"}`,children:We?n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(Xc,{className:\"w-3.5 h-3.5 animate-spin\"}),\"Verifying...\"]}):it?.success?n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(Cu,{className:\"w-3.5 h-3.5\"}),\"Link Stable\"]}):\"Validate Connection\"})]}),n.jsxs(Tj,{className:\"relative z-10\",children:[n.jsx(Dj,{asChild:!0,children:n.jsxs(Re,{variant:\"ghost\",className:\"w-full h-8 hover:bg-white/5 text-slate-500 hover:text-slate-300 text-[8px] font-bold uppercase tracking-widest group/trigger flex items-center justify-between px-2 rounded-lg\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(uy,{className:\"w-3 h-3 text-slate-600 group-hover/trigger:text-slate-400\"}),\"Alternative Nodes\"]}),n.jsx(nl,{className:\"w-3 h-3 transition-transform duration-300 group-data-[state=open]/trigger:rotate-180\"})]})}),n.jsx(Mj,{className:\"pt-4 space-y-3 animate-in fade-in slide-in-from-top-2 duration-300\",children:n.jsx(\"div\",{className:\"grid gap-2\",children:Ke.filter(fe=>fe.id!==xe).map(fe=>{const Se=o.apiKeys?.[fe.id],ze=`VITE_${fe.id.toUpperCase()}_API_KEY`,lt=!!_0[ze];return n.jsxs(\"div\",{className:\"flex items-center gap-3 bg-slate-950/40 p-3 rounded-xl border border-white/5 hover:border-white/10 transition-colors\",children:[n.jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between mb-1\",children:[n.jsx(\"span\",{className:\"text-[8px] font-bold uppercase tracking-wider text-slate-500\",children:fe.label}),lt&&!Se&&n.jsx(\"span\",{className:\"text-[7px] font-bold text-emerald-500/50 uppercase tracking-tighter\",children:\"System\"})]}),n.jsx(wt,{type:\"password\",value:Se||\"\",onChange:mt=>ke(\"apiKeys\",{...o.apiKeys,[fe.id]:mt.target.value}),placeholder:lt?\"Using System Default\":\"Key not found\",className:\"bg-transparent border-none p-0 h-auto text-[10px] text-slate-400 placeholder:text-slate-800 focus-visible:ring-0 shadow-none italic font-medium cursor-not-allowed\",disabled:lt&&!Se})]}),Se&&n.jsx(\"button\",{onClick:()=>ke(\"apiKeys\",{...o.apiKeys,[fe.id]:\"\"}),className:\"text-slate-800 hover:text-rose-500 transition-colors p-1\",title:\"Clear saved key\",\"aria-label\":`Clear saved key for ${fe.label}`,children:n.jsx(tl,{className:\"w-3 h-3\"})})]},fe.id)})})})]})]})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(ye,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Qc,{className:\"w-3.5 h-3.5 text-indigo-400\"}),\"Data Optimization Node\"]}),n.jsxs(\"div\",{className:\"p-6 bg-slate-900/40 rounded-[32px] border border-white/5 relative overflow-hidden\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-300\",children:at.settings.subscriptionScanner}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-wide mt-1\",children:\"DETECT & MIGRATE RECURRING SIGNALS\"})]}),n.jsx(Re,{onClick:B,disabled:M,className:\"bg-indigo-600 hover:bg-indigo-500 text-white font-black uppercase tracking-widest text-[9px] h-9 px-4 rounded-xl shadow-lg shadow-indigo-500/20\",children:M?n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(Xc,{className:\"w-3 h-3 animate-spin\"}),\"Scanning...\"]}):\"Execute Scan\"})]}),n.jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-white/5 flex items-center justify-between\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-300\",children:\"Redundancy Purge\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-wide mt-1\",children:\"REMOVE BLANK & DUPLICATE ENTRIES\"})]}),n.jsx(Re,{onClick:async()=>{const fe=ce.loading(\"Purging duplicates...\");try{const Se=await G();ce.dismiss(fe)}catch{ce.dismiss(fe),ce.error(\"Purge failed\")}},className:\"bg-rose-500/10 hover:bg-rose-500/20 text-rose-400 border border-rose-500/20 font-black uppercase tracking-widest text-[9px] h-9 px-4 rounded-xl\",children:at.settings.cleanupDuplicates})]})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(ye,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(dy,{className:\"w-3.5 h-3.5 text-amber-500\"}),at.settings.achievementLevel,\" (\",o.unlockedAchievements.length,\"/\",pe.length,\")\"]}),n.jsx(\"div\",{className:\"grid grid-cols-4 sm:grid-cols-6 gap-3\",children:pe.map(fe=>{const Se=ve.has(fe.id);return n.jsx(\"button\",{onClick:()=>{Se&&d&&d(fe.id)},disabled:!Se,className:`w-12 h-12 rounded-xl border flex items-center justify-center text-xl transition-all ${Se?\"border-amber-500/50 bg-amber-500/10 grayscale-0 hover:scale-110 hover:shadow-lg hover:shadow-amber-500/20 active:scale-95\":\"border-white/5 bg-white/5 grayscale opacity-20 cursor-not-allowed\"}`,children:fe.icon},fe.id)})}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 font-bold text-center leading-relaxed\",children:o.unlockedAchievements.length>0?at.settings.achievementSelect:at.settings.achievementLocked})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsx(\"div\",{className:\"space-y-4\",children:n.jsxs(\"div\",{className:\"p-4 bg-rose-500/5 border border-rose-500/10 rounded-2xl flex items-center justify-between\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"text-[10px] font-black uppercase tracking-widest text-rose-400\",children:at.settings.factoryReset}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-wide mt-1\",children:at.settings.wipeDescription})]}),n.jsx(Re,{onClick:async()=>{confirm(\"Are you sure? This deletes ALL transaction data.\")&&await ee()},className:\"bg-slate-950 hover:bg-rose-500 text-rose-500 hover:text-white border border-rose-500/20 font-black uppercase tracking-widest text-[9px] h-9 px-4 rounded-xl transition-colors\",children:at.settings.wipeData})]})}),n.jsx(_j,{className:\"bg-white/5\"}),n.jsxs(\"div\",{className:\"text-center pt-8 space-y-2 opacity-40 hover:opacity-100 transition-opacity duration-700 pb-10\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-[0.5em] text-slate-100\",children:\"Obsidian System Node\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-widest\",children:\"Architect: Sijo Joseph // BUILD 50.3.0 // QUANTUM CORE\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-700 uppercase tracking-widest mt-4\",children:\"© 2025 NEURAL FINHUB FABRIC\"}),n.jsxs(\"button\",{onClick:h,className:\"mt-4 text-[8px] font-black text-indigo-400/60 hover:text-indigo-400 uppercase tracking-[0.2em] transition-colors\",children:[\"[ \",at.settings.about,\" ]\"]})]}),n.jsxs(\"div\",{className:\"px-2 pb-10\",children:[n.jsxs(Re,{variant:\"outline\",onClick:()=>{L(),l()},className:\"w-full h-14 bg-white/5 hover:bg-white/10 border-white/10 hover:border-white/20 text-white/60 hover:text-white font-black uppercase tracking-widest gap-3 rounded-[24px] transition-all group mb-4\",children:[n.jsx(fy,{className:\"w-5 h-5 group-hover:-translate-x-1 transition-transform\"}),\"Terminate Session\"]}),n.jsxs(Rp,{open:Z,onOpenChange:_,children:[n.jsx(Rj,{asChild:!0,children:n.jsxs(Re,{variant:\"outline\",className:\"w-full h-14 bg-rose-500/5 hover:bg-rose-500/10 border-rose-500/20 hover:border-rose-500/40 text-rose-500 font-black uppercase tracking-widest gap-3 rounded-[24px] transition-all group\",children:[n.jsx(Qc,{className:\"w-5 h-5 group-hover:scale-110 transition-transform\"}),\"Delete Account & Data\"]})}),n.jsxs(Op,{className:\"bg-slate-950 border-white/10 text-white rounded-[32px] p-8\",children:[n.jsxs(zp,{children:[n.jsxs(Up,{className:\"text-2xl font-black tracking-tight flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"p-2 rounded-full bg-rose-500/20 text-rose-500\",children:n.jsx(Qc,{className:\"w-6 h-6\"})}),\"Irreversible Action?\"]}),n.jsxs(Ip,{className:\"text-slate-400 font-medium leading-relaxed mt-4\",children:[\"Your account will be \",n.jsx(\"span\",{className:\"text-white font-bold italic\",children:\"deactivated immediately\"}),\" and scheduled for permanent deletion in \",n.jsx(\"span\",{className:\"text-white font-bold\",children:\"30 days\"}),\".\",n.jsx(\"br\",{}),n.jsx(\"br\",{}),\"Log in anytime before then to cancel this request and restore your data node.\"]})]}),n.jsxs(Lp,{className:\"mt-8 gap-3\",children:[n.jsx(qp,{className:\"h-14 flex-1 rounded-2xl bg-white/5 border-white/10 text-slate-400 hover:bg-white/10 hover:text-white font-black uppercase tracking-widest transition-all\",children:\"Abort\"}),n.jsx(Bp,{onClick:async()=>{await z(),l()},className:\"h-14 flex-1 rounded-2xl bg-rose-600 hover:bg-rose-500 text-white font-black uppercase tracking-widest shadow-lg shadow-rose-500/20 transition-all active:scale-95\",children:\"Confirm Purge\"})]})]})]})]})]})]})})};function nN({onNavigate:i,onOpenSettings:l,onOpenNotifications:o,emergencyFundAmount:u,bankAccountsCount:d,cardsCount:h,currency:g,onOpenAbout:N}){return n.jsxs(\"div\",{className:\"space-y-12 animate-in fade-in slide-in-from-bottom-4 duration-700 px-4 pb-20\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tight leading-none mb-3\",children:\"Settings & Assets\"}),n.jsx(\"p\",{className:\"text-slate-500 font-bold max-w-md\",children:\"Configure your financial universe and manage core system components.\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[n.jsxs(Ot,{className:\"p-8 cursor-pointer bg-black border-white/5 sq-2xl border hover:bg-white/5 transition-all duration-300 group relative overflow-hidden\",onClick:()=>i(\"emergency\"),children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-blue-500 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20\"}),n.jsxs(\"div\",{className:\"relative z-10\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-blue-500/10 border border-blue-500/20 sq-md flex items-center justify-center text-blue-400 mb-8 group-hover:scale-110 transition-transform duration-500\",children:n.jsx(sl,{className:\"w-8 h-8\"})}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100\",children:\"Emergency Fund\"}),n.jsx(\"p\",{className:\"text-2xl font-black tabular-nums text-blue-400\",children:Ne(u,g)})]}),n.jsxs(\"div\",{className:\"mt-8 flex items-center justify-between text-slate-500\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest\",children:\"Financial Safety Net\"}),n.jsx(Ps,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]})]})]}),n.jsxs(Ot,{className:\"p-8 cursor-pointer bg-black border-white/5 sq-2xl border hover:bg-white/5 transition-all duration-300 group relative overflow-hidden\",onClick:()=>i(\"accounts\"),children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-emerald-500 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20\"}),n.jsxs(\"div\",{className:\"relative z-10\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-emerald-500/10 border border-emerald-500/20 sq-md flex items-center justify-center text-emerald-400 mb-8 group-hover:scale-110 transition-transform duration-500\",children:n.jsx(J0,{className:\"w-8 h-8\"})}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100\",children:\"Accounts & Cards\"}),n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsxs(\"div\",{className:\"space-y-0.5\",children:[n.jsx(\"p\",{className:\"text-2xl font-black tabular-nums text-emerald-400\",children:d}),n.jsx(\"p\",{className:\"text-[10px] font-bold text-slate-600 uppercase tracking-wider\",children:\"Banks\"})]}),n.jsx(\"div\",{className:\"w-px h-8 bg-white/5 self-center mt-2\"}),n.jsxs(\"div\",{className:\"space-y-0.5\",children:[n.jsx(\"p\",{className:\"text-2xl font-black tabular-nums text-emerald-400\",children:h}),n.jsx(\"p\",{className:\"text-[10px] font-bold text-slate-600 uppercase tracking-wider\",children:\"Cards\"})]})]})]}),n.jsxs(\"div\",{className:\"mt-8 flex items-center justify-between text-slate-500\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest\",children:\"Manage Liquidity\"}),n.jsx(Ps,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]})]})]})]}),n.jsxs(\"div\",{className:\"pt-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 mb-8\",children:[n.jsx(\"div\",{className:\"w-1.5 h-6 bg-slate-700 rounded-full\"}),n.jsx(\"h3\",{className:\"text-xs font-black uppercase tracking-[0.3em] text-slate-600\",children:\"System Configuration\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 gap-4\",children:[n.jsx(Ot,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group\",onClick:l,children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400 group-hover:text-white transition-colors\",children:n.jsx(my,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"App Settings\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"Preferences & Display\"})]})]}),n.jsx(Ps,{className:\"w-5 h-5 text-slate-700 group-hover:text-slate-400 transition-colors\"})]})}),n.jsx(Ot,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group\",onClick:o,children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400 group-hover:text-white transition-colors\",children:n.jsx(Lu,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"Alert Center\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"System Notifications\"})]})]}),n.jsx(Ps,{className:\"w-5 h-5 text-slate-700 group-hover:text-slate-400 transition-colors\"})]})}),n.jsx(Ot,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group opacity-60 hover:opacity-100\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400\",children:n.jsx(hy,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"Support\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"Documentation & Help\"})]})]}),n.jsx(Ps,{className:\"w-5 h-5 text-slate-700 transition-colors\"})]})}),n.jsx(Ot,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group opacity-60 hover:opacity-100\",onClick:N,children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400\",children:n.jsx(py,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"About\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"Version 5.0 Stable Release\"})]})]}),n.jsx(Ps,{className:\"w-5 h-5 text-slate-700 transition-colors\"})]})})]})]}),n.jsxs(\"div\",{className:\"text-center pt-8 border-t border-white/5\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-[0.5em] text-slate-700 mb-1\",children:\"FinHub Obsidian System\"}),n.jsx(\"p\",{className:\"text-[9px] font-bold text-slate-800\",children:\"BUILD 50.3.0 // QUANTUM CORE\"})]})]})}function sN({className:i,children:l,...o}){return n.jsxs(gy,{\"data-slot\":\"scroll-area\",className:De(\"relative\",i),...o,children:[n.jsx(xy,{\"data-slot\":\"scroll-area-viewport\",className:\"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1\",children:l}),n.jsx(iN,{}),n.jsx(by,{})]})}function iN({className:i,orientation:l=\"vertical\",...o}){return n.jsx(yy,{\"data-slot\":\"scroll-area-scrollbar\",orientation:l,className:De(\"flex touch-none p-px transition-colors select-none\",l===\"vertical\"&&\"h-full w-2.5 border-l border-l-transparent\",l===\"horizontal\"&&\"h-2.5 flex-col border-t border-t-transparent\",i),...o,children:n.jsx(vy,{\"data-slot\":\"scroll-area-thumb\",className:\"bg-border relative flex-1 rounded-full\"})})}function lN({isOpen:i,onClose:l,notifications:o,onNotificationClick:u,onMarkAsRead:d,onClearRead:h}){const g=o.filter(C=>!C.read).length,N=o.filter(C=>C.read).length,E=C=>{switch(C){case\"achievement\":return n.jsx(jy,{className:\"w-5 h-5 text-yellow-500\"});case\"goal\":return n.jsx(Hn,{className:\"w-5 h-5 text-green-500\"});case\"insight\":return n.jsx(qn,{className:\"w-5 h-5 text-blue-500\"});case\"alert\":return n.jsx(el,{className:\"w-5 h-5 text-red-500\"});case\"reminder\":return n.jsx(Nu,{className:\"w-5 h-5 text-indigo-500\"})}},S=C=>{const M=new Date(C),L=new Date().getTime()-M.getTime(),z=Math.floor(L/6e4),j=Math.floor(L/36e5),G=Math.floor(L/864e5);return z<60?`${z}m ago`:j<24?`${j}h ago`:`${G}d ago`},[p,f]=x.useState({reminders:!0,transactions:!0,achievements:!1,insights:!1}),w=C=>{f(M=>({...M,[C]:!M[C]}))},A=[\"reminders\",\"transactions\",\"insights\",\"achievements\"],T=o.reduce((C,M)=>{const y=M.category||\"insights\";return C[y]||(C[y]=[]),C[y].push(M),C},{});return Object.keys(T).forEach(C=>{T[C].sort((M,y)=>M.read!==y.read?M.read?1:-1:new Date(y.timestamp).getTime()-new Date(M.timestamp).getTime())}),n.jsx(kp,{open:i,onOpenChange:l,children:n.jsxs(Dp,{side:\"right\",className:\"w-full sm:max-w-lg p-0 flex flex-col h-dvh max-h-dvh bg-black border-white/5 text-slate-100 overflow-hidden z-[99999]\",children:[n.jsx(Mp,{className:\"sr-only\",children:\"Notifications\"}),n.jsx(_p,{className:\"sr-only\",children:\"Notifications\"}),n.jsxs(\"div\",{className:\"px-8 pt-28 pb-10 border-b border-white/5 bg-black relative overflow-hidden animate-in fade-in slide-in-from-right-4 duration-500\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-48 h-48 bg-indigo-500 blur-[120px] opacity-10 -mr-24 -mt-24\"}),n.jsx(\"div\",{className:\"absolute bottom-0 left-0 w-24 h-24 bg-blue-500 blur-[80px] opacity-5 -ml-12 -mb-12\"}),n.jsx(\"div\",{className:\"absolute top-8 right-8 z-30\",children:n.jsx(Re,{variant:\"ghost\",size:\"icon\",onClick:l,className:\"w-10 h-10 sq-full bg-white/5 text-slate-400 hover:text-white hover:bg-white/10\",children:n.jsx(il,{className:\"w-5 h-5\"})})}),n.jsxs(\"div\",{className:\"flex items-center justify-between relative z-10\",children:[n.jsxs(\"div\",{className:\"flex flex-col gap-2\",children:[n.jsx(\"div\",{className:\"flex items-center gap-4\",children:n.jsxs(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tighter leading-none flex items-center gap-4\",children:[\"Pulse\",g>0&&n.jsx(\"span\",{className:\"flex items-center justify-center min-w-[24px] h-6 px-2 text-[10px] font-black bg-indigo-600 text-white sq-full shadow-[0_0_15px_rgba(79,70,229,0.4)]\",children:g})]})}),n.jsx(\"p\",{className:\"text-slate-500 font-black text-[10px] uppercase tracking-[0.3em] leading-none ml-0.5\",children:\"System Intelligence Stack\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[g>0&&n.jsx(Re,{variant:\"ghost\",size:\"icon\",title:\"Mark all as read\",onClick:()=>{o.forEach(C=>{C.read||d?.(C.id)})},className:\"w-11 h-11 sq-md bg-white/5 text-slate-400 hover:text-indigo-400 hover:bg-white/10 transition-all duration-300 border border-white/5 active:scale-90\",children:n.jsx(wy,{className:\"w-5 h-5\"})}),N>0&&n.jsx(Re,{variant:\"ghost\",size:\"icon\",title:\"Clear history\",onClick:()=>{confirm(`Clear ${N} notifications?`)&&h?.()},className:\"w-11 h-11 sq-md bg-white/5 text-slate-400 hover:text-rose-400 hover:bg-rose-500/10 transition-all duration-300 border border-white/5 active:scale-90\",children:n.jsx(tl,{className:\"w-5 h-5\"})})]})]})]}),n.jsx(sN,{className:\"flex-1 w-full bg-black overflow-hidden custom-scrollbar\",children:n.jsx(\"div\",{className:\"px-6 space-y-12 py-8 pb-32\",children:o.length===0?n.jsxs(\"div\",{className:\"text-center py-32 flex flex-col items-center animate-in fade-in zoom-in duration-700\",children:[n.jsxs(\"div\",{className:\"w-24 h-24 bg-white/5 border border-white/5 sq-2xl flex items-center justify-center text-slate-800 mb-8 shadow-inner relative group\",children:[n.jsx(\"div\",{className:\"absolute inset-0 bg-indigo-500/5 blur-2xl sq-full group-hover:bg-indigo-500/10 transition-colors\"}),n.jsx(Lu,{className:\"w-10 h-10 relative z-10\"})]}),n.jsx(\"h4\",{className:\"text-2xl font-black text-slate-100 mb-3 tracking-tight\",children:\"Signal Silence\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-black uppercase tracking-[0.3em] max-w-[260px] leading-relaxed\",children:\"No new notifications. We will alert you when there are updates.\"})]}):A.map(C=>{const M=T[C]||[];if(M.length===0)return null;const y=p[C],L=y?M.length:1,z=M.filter(j=>!j.read).length;return n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"button\",{onClick:()=>w(C),...y?{\"aria-expanded\":\"true\"}:{\"aria-expanded\":\"false\"},className:\"w-full flex items-center justify-between px-2 group\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-[0.4em] text-slate-500 group-hover:text-slate-300 transition-colors\",children:C}),z>0&&n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 sq-full animate-pulse shadow-[0_0_10px_rgba(99,102,241,0.6)]\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black text-slate-700\",children:M.length}),y?n.jsx(_r,{className:\"w-3 h-3 text-slate-700\"}):n.jsx(nl,{className:\"w-3 h-3 text-slate-700\"})]})]}),n.jsxs(\"div\",{className:\"space-y-3 relative\",children:[!y&&M.length>1&&n.jsxs(n.Fragment,{children:[n.jsx(\"div\",{className:\"absolute top-2 left-2 right-2 h-full bg-black/40 sq-xl -z-10 border border-white/5 translate-y-2 scale-[0.98]\"}),n.jsx(\"div\",{className:\"absolute top-4 left-4 right-4 h-full bg-black/20 sq-xl -z-20 border border-white/5 translate-y-4 scale-[0.96]\"})]}),M.slice(0,L).map((j,G)=>{const ee={style:{\"--anim-delay\":`${G*50}ms`,\"--z-index\":100-G}};return n.jsxs(\"div\",{...ee,className:`p-6 sq-xl border transition-all duration-500 group relative overflow-hidden cursor-pointer active:scale-[0.98] animate-in fade-in slide-in-from-right-4 fill-mode-both [animation-delay:var(--anim-delay)] z-[var(--z-index)] ${j.read?\"bg-black border-white/5\":\"bg-black border-indigo-500/30 shadow-lg shadow-indigo-500/5 hover:border-indigo-500/50\"}`,onClick:Z=>{Z.stopPropagation(),u?.(j),j.read||d?.(j.id)},children:[j.priority===\"high\"&&!j.read&&n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 bg-red-500 blur-[80px] opacity-10 -mr-16 -mt-16\"}),!j.read&&j.priority!==\"high\"&&n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 bg-indigo-500 blur-[80px] opacity-10 -mr-16 -mt-16 group-hover:opacity-20 transition-opacity\"}),n.jsxs(\"div\",{className:\"flex gap-4 relative z-10\",children:[n.jsx(\"div\",{className:`w-12 h-12 sq-md flex items-center justify-center shrink-0 border border-white/5 transition-all duration-500 ${j.read?\"bg-white/5 text-slate-600\":j.priority===\"high\"?\"bg-red-500/10 text-red-400\":\"bg-indigo-500/10 text-indigo-400 shadow-inner\"}`,children:E(j.type)}),n.jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[n.jsxs(\"div\",{className:\"flex items-start justify-between gap-4\",children:[n.jsx(\"h4\",{className:`text-sm font-black tracking-tight leading-tight ${j.read?\"text-slate-500\":\"text-slate-100\"}`,children:j.title}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-700 whitespace-nowrap pt-1\",children:S(j.timestamp)})]}),n.jsx(\"p\",{className:`text-xs mt-2 leading-relaxed font-bold tracking-tight ${j.read?\"text-slate-700\":\"text-slate-400\"}`,children:j.message}),j.priority===\"high\"&&!j.read&&n.jsxs(\"div\",{className:\"mt-4 flex items-center gap-2\",children:[n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-red-400 sq-full animate-ping\"}),n.jsx(\"span\",{className:\"text-[10px] font-black text-red-400 uppercase tracking-[0.2em]\",children:\"Critical Stability Alert\"})]}),j.action&&j.action.status===\"pending\"&&n.jsxs(\"div\",{className:\"mt-4 flex gap-3 animate-in fade-in slide-in-from-top-1\",children:[n.jsx(Re,{size:\"sm\",className:\"h-8 text-[10px] font-black uppercase tracking-widest bg-emerald-600 hover:bg-emerald-500 text-white border-0\",onClick:Z=>{Z.stopPropagation(),j.action.status=\"completed\",u?.(j)},children:\"Yes, Automate\"}),n.jsx(Re,{size:\"sm\",variant:\"ghost\",className:\"h-8 text-[10px] font-black uppercase tracking-widest text-slate-500 hover:text-slate-300 hover:bg-white/5\",onClick:Z=>{Z.stopPropagation(),j.action.status=\"dismissed\",j.read||d?.(j.id)},children:\"No, One-time\"})]})]})]})]},j.id)})]})]},C)})})})]})})}const R0=[{text:\"An investment in knowledge pays the best interest.\",author:\"Benjamin Franklin\",category:\"financial-literacy\"},{text:\"It's not how much money you make, but how much money you keep, how hard it works for you, and how many generations you keep it for.\",author:\"Robert Kiyosaki\",category:\"financial-literacy\"},{text:\"Financial peace isn't the acquisition of stuff. It's learning to live on less than you make, so you can give money back and have money to invest.\",author:\"Dave Ramsey\",category:\"financial-literacy\"},{text:\"Do not save what is left after spending; instead spend what is left after saving.\",author:\"Warren Buffett\",category:\"financial-literacy\"},{text:\"The stock market is a device for transferring money from the impatient to the patient.\",author:\"Warren Buffett\",category:\"financial-literacy\"},{text:\"Know what you own, and know why you own it.\",author:\"Peter Lynch\",category:\"financial-literacy\"},{text:\"The individual investor should act consistently as an investor and not as a speculator.\",author:\"Ben Graham\",category:\"financial-literacy\"},{text:\"Price is what you pay. Value is what you get.\",author:\"Warren Buffett\",category:\"financial-literacy\"},{text:\"The goal isn't more money. The goal is living life on your terms.\",author:\"Chris Brogan\",category:\"financial-freedom\"},{text:\"Financial freedom is available to those who learn about it and work for it.\",author:\"Robert Kiyosaki\",category:\"financial-freedom\"},{text:\"The rich invest in time, the poor invest in money.\",author:\"Warren Buffett\",category:\"financial-freedom\"},{text:\"Wealth is the ability to fully experience life.\",author:\"Henry David Thoreau\",category:\"financial-freedom\"},{text:\"It's not about having lots of money. It's about knowing how to manage the money you do have.\",author:\"Dave Ramsey\",category:\"financial-freedom\"},{text:\"Money is a terrible master but an excellent servant.\",author:\"P.T. Barnum\",category:\"financial-freedom\"},{text:\"The quickest way to double your money is to fold it in half and put it in your back pocket.\",author:\"Will Rogers\",category:\"financial-freedom\"},{text:\"The best time to plant a tree was 20 years ago. The second best time is now.\",author:\"Chinese Proverb\",category:\"motivation\"},{text:\"A journey of a thousand miles begins with a single step.\",author:\"Lao Tzu\",category:\"motivation\"},{text:\"Success is not final, failure is not fatal: it is the courage to continue that counts.\",author:\"Winston Churchill\",category:\"motivation\"},{text:\"The only way to do great work is to love what you do.\",author:\"Steve Jobs\",category:\"motivation\"},{text:\"Don't watch the clock; do what it does. Keep going.\",author:\"Sam Levenson\",category:\"motivation\"},{text:\"Wealth is not about having a lot of money; it's about having a lot of options.\",author:\"Chris Rock\",category:\"motivation\"},{text:\"Every time you borrow money, you're robbing your future self.\",author:\"Nathan W. Morris\",category:\"motivation\"},{text:\"The habit of saving is itself an education; it fosters every virtue, teaches self-denial, cultivates the sense of order, trains to forethought, and so broadens the mind.\",author:\"T.T. Munger\",category:\"motivation\"},{text:\"Too many people spend money they haven't earned, to buy things they don't want, to impress people they don't like.\",author:\"Will Rogers\",category:\"motivation\"},{text:\"A budget is telling your money where to go instead of wondering where it went.\",author:\"Dave Ramsey\",category:\"motivation\"},{text:\"Beware of little expenses. A small leak will sink a great ship.\",author:\"Benjamin Franklin\",category:\"motivation\"},{text:\"Never spend your money before you have earned it.\",author:\"Thomas Jefferson\",category:\"motivation\"}];function O0(){return R0[Math.floor(Math.random()*R0.length)]}function rN({isOpen:i,onClose:l,achievementId:o}){const[u,d]=x.useState(O0());if(x.useEffect(()=>{i&&o&&(queueMicrotask(()=>{d(O0())}),Or({particleCount:150,spread:100,origin:{y:.6},colors:[\"#FFD700\",\"#FFA500\",\"#FF6347\",\"#9370DB\",\"#3CB371\"]}))},[i,o]),!o)return null;const h=cp(o);return h?n.jsx(us,{open:i,onOpenChange:l,children:n.jsxs(ds,{className:\"w-[270px] sm:w-full sm:max-w-md bg-slate-950 border-[#38383A] p-0 overflow-hidden rounded-[32px] shadow-2xl transition-all duration-500\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 sm:w-64 sm:h-64 bg-yellow-500 blur-[60px] sm:blur-[120px] opacity-10 -mr-16 -mt-16 sm:-mr-32 sm:-mt-32\"}),n.jsx(\"div\",{className:\"absolute bottom-0 left-0 w-24 h-24 sm:w-48 sm:h-48 bg-indigo-500 blur-[50px] sm:blur-[100px] opacity-5 -ml-12 -mb-12 sm:-ml-24 sm:-mb-24\"}),n.jsxs(fs,{className:\"px-6 sm:px-10 pt-8 sm:pt-12 pb-0 relative z-10\",children:[n.jsx(ms,{className:\"text-center text-xl sm:text-3xl font-black text-white tracking-tight transition-all\",children:\"Achievement Unlocked\"}),n.jsx(hs,{className:\"text-center text-[8px] sm:text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] sm:tracking-[0.3em] mt-1 sm:mt-2 transition-all\",children:\"Achievement Unlocked\"})]}),n.jsxs(\"div\",{className:\"space-y-6 sm:space-y-10 py-8 sm:py-12 px-6 sm:px-10 relative z-10\",children:[n.jsxs(\"div\",{className:\"relative flex justify-center\",children:[n.jsx(Le.div,{className:\"relative z-10\",initial:{scale:0,rotateY:0},animate:{scale:1,rotateY:[0,1080],transition:{scale:{duration:.8,ease:\"backOut\"},rotateY:{duration:4,ease:\"easeInOut\"}}},children:n.jsxs(\"div\",{className:\"relative\",children:[n.jsx(Le.div,{className:\"absolute inset-0 bg-yellow-400 blur-3xl opacity-20 rounded-full\",animate:{scale:[1,1.3,1],opacity:[.2,.4,.2]},transition:{duration:3,repeat:1/0,ease:\"easeInOut\"}}),n.jsxs(\"div\",{className:\"relative w-32 h-32 sm:w-44 sm:h-44 bg-gradient-to-br from-yellow-400 via-orange-500 to-yellow-600 rounded-[32px] sm:rounded-[48px] flex items-center justify-center shadow-[0_15px_40px_rgba(234,179,8,0.25)] border-4 border-white/20 transition-all\",children:[n.jsx(\"span\",{className:\"text-5xl sm:text-7xl drop-shadow-2xl transition-all\",children:h.icon}),n.jsx(\"div\",{className:\"absolute inset-0 bg-gradient-to-tr from-white/10 to-transparent pointer-events-none rounded-[28px] sm:rounded-[44px]\"})]})]})}),n.jsxs(\"div\",{className:\"absolute inset-0 z-20 flex justify-center items-center pointer-events-none\",children:[n.jsx(Le.div,{className:\"absolute w-32 h-32 sm:w-48 sm:h-48 bg-yellow-500/40 blur-[40px] sm:blur-[60px] rounded-full\",initial:{scale:0,opacity:0},animate:{scale:1.4,opacity:1},transition:{delay:.3,duration:1.2,ease:\"easeOut\"}}),n.jsx(Le.div,{className:\"absolute w-24 h-24 sm:w-36 sm:h-36 bg-indigo-500/30 blur-[30px] sm:blur-[45px] rounded-full -ml-8 -mt-6 sm:-ml-12 sm:-mt-10\",initial:{scale:0,opacity:0},animate:{scale:1.8,opacity:.8},transition:{delay:.4,duration:1.2,ease:\"easeOut\"}}),n.jsx(Le.div,{className:\"absolute w-20 h-20 sm:w-32 sm:h-32 bg-rose-500/30 blur-[25px] sm:blur-[40px] rounded-full ml-10 mt-8 sm:ml-16 sm:mt-12\",initial:{scale:0,opacity:0},animate:{scale:1.6,opacity:.8},transition:{delay:.5,duration:1.2,ease:\"easeOut\"}})]})]}),n.jsxs(Le.div,{className:\"text-center space-y-2 sm:space-y-4\",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:.6},children:[n.jsx(\"h3\",{className:\"text-lg sm:text-3xl font-black bg-gradient-to-r from-yellow-200 via-yellow-500 to-yellow-200 bg-clip-text text-transparent tracking-tight transition-all\",children:h.name}),n.jsx(\"p\",{className:\"text-slate-400 font-bold text-[11px] sm:text-sm leading-relaxed max-w-[200px] sm:max-w-[280px] mx-auto transition-all\",children:h.description})]}),n.jsx(Le.div,{className:\"flex justify-center\",initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},children:n.jsxs(\"div\",{className:\"flex items-center gap-3 sm:gap-4\",children:[n.jsx(\"div\",{className:\"h-px w-12 sm:w-20 bg-gradient-to-r from-transparent via-white/10 to-transparent\"}),n.jsx(\"div\",{className:\"w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full bg-yellow-500/50 blur-[1px] animate-pulse\"}),n.jsx(\"div\",{className:\"h-px w-12 sm:w-20 bg-gradient-to-r from-transparent via-white/10 to-transparent\"})]})}),n.jsxs(Le.div,{className:\"p-4 sm:p-8 bg-white/5 rounded-2xl sm:rounded-[32px] border border-white/5 relative overflow-hidden transition-all\",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:1},children:[n.jsx(\"div\",{className:\"absolute top-0 left-0 w-12 h-12 bg-indigo-500 blur-2xl opacity-5\"}),n.jsxs(\"div\",{className:\"flex items-start gap-3 sm:gap-6 relative z-10 text-left\",children:[n.jsx(\"span\",{className:\"text-xl sm:text-3xl pt-0 opacity-40\",children:'\"'}),n.jsxs(\"div\",{className:\"flex-1\",children:[n.jsx(\"p\",{className:\"text-[10px] sm:text-sm font-bold italic text-slate-300 leading-snug sm:leading-relaxed tracking-tight transition-all\",children:u.text}),n.jsxs(\"div\",{className:\"flex items-center gap-2 sm:gap-4 mt-3 sm:mt-6 transition-all\",children:[n.jsx(\"div\",{className:\"h-px flex-1 bg-white/5\"}),n.jsxs(\"p\",{className:\"text-[8px] sm:text-[10px] font-black text-slate-500 uppercase tracking-widest shrink-0\",children:[\"— \",u.author]})]})]})]})]})]})]})}):null}const Gp=({accounts:i,goals:l,liabilities:o,expenses:u,emergencyFundAmount:d=0})=>{const h=x.useMemo(()=>i.filter(f=>f.type===\"bank\"||f.type===\"cash\").reduce((f,w)=>f+w.balance,0),[i]),g=x.useMemo(()=>i.filter(f=>f.type===\"credit_card\").reduce((f,w)=>f+Math.abs(w.balance),0),[i]),N=x.useMemo(()=>{const f=o.reduce((A,T)=>A+(T.emiAmount||0),0),w=u.filter(A=>A.isRecurring).reduce((A,T)=>A+T.amount,0);return f+w},[o,u]),E=x.useMemo(()=>l.reduce((w,A)=>w+A.currentAmount,0)+(d||0),[l,d]),S=x.useMemo(()=>E+N,[E,N]),p=x.useMemo(()=>{const f=h-S;return Math.max(0,f)},[h,S]);return{totalBankBalance:h,totalCreditUsage:g,totalCommitments:N,shadowWalletTotal:E,totalReserved:S,availableToSpend:p}},Ki=({children:i,icon:l,variant:o=\"blue\",className:u,...d})=>{const h={blue:\"border-blue-500/50 text-blue-400 hover:border-blue-500 hover:shadow-[0_0_20px_rgba(59,130,246,0.4)] shadow-[0_0_10px_rgba(59,130,246,0.2)]\",green:\"border-emerald-500/50 text-emerald-400 hover:border-emerald-500 hover:shadow-[0_0_20px_rgba(16,185,129,0.4)] shadow-[0_0_10px_rgba(16,185,129,0.2)]\",purple:\"border-purple-500/50 text-purple-400 hover:border-purple-500 hover:shadow-[0_0_20px_rgba(168,85,247,0.4)] shadow-[0_0_10px_rgba(168,85,247,0.2)]\",rose:\"border-rose-500/50 text-rose-400 hover:border-rose-500 hover:shadow-[0_0_20px_rgba(244,63,94,0.4)] shadow-[0_0_10px_rgba(244,63,94,0.2)]\"};return n.jsxs(\"button\",{className:De(\"relative group flex items-center justify-center gap-2 px-6 h-11\",\"bg-[#0A141E]/80 backdrop-blur-md border-2 rounded-2xl transition-all duration-300\",\"font-mono font-bold uppercase tracking-widest text-[10px]\",\"hover:scale-[1.02] active:scale-[0.98]\",h[o],u),...d,children:[l&&n.jsx(l,{className:\"w-4 h-4 transition-all duration-700 ease-quantum group-hover:rotate-[720deg] active:-rotate-12\"}),n.jsx(\"span\",{children:i})]})};function oN({isOpen:i,onClose:l,accounts:o,goals:u,currency:d,destinationType:h,emergencyFund:g,onAllocate:N,liabilities:E=[],expenses:S=[]}){const[p,f]=x.useState(\"\"),[w,A]=x.useState(\"\"),[T,C]=x.useState(\"\"),[M,y]=x.useState(!1),[L,z]=x.useState(!1),{availableToSpend:j,totalBankBalance:G,shadowWalletTotal:ee,totalCommitments:Z}=Gp({accounts:o,goals:u,liabilities:E,expenses:S,emergencyFundAmount:g?.currentAmount||0});x.useEffect(()=>{if(i&&!p&&o.length>0){const k=o.filter(U=>U.type===\"bank\"||U.type===\"cash\");if(k.length>0){const U=k.find(Q=>Q.balance>=j)||[...k].sort((Q,ae)=>ae.balance-Q.balance)[0];U&&queueMicrotask(()=>{f(U.id)})}}},[i,j,o,p]);const _=o.find(k=>k.id===p),B=u.find(k=>k.id===w),J=parseFloat(T)||0,ne=()=>{if(j>0){if(C(j.toString()),h===\"goal\"&&!w&&u.length>0){const k=[...u].sort((U,Q)=>{const ae=new Date(U.targetDate).getTime(),v=new Date(Q.targetDate).getTime();if(ae!==v)return ae-v;const D=U.currentAmount/U.targetAmount,W=Q.currentAmount/Q.targetAmount;return D-W});A(k[0].id),ce.info(`Suggested: ${k[0].name} based on timeline & progress`,{icon:n.jsx(Ga,{className:\"w-4 h-4 text-blue-400\"})})}}else ce.error(\"No surplus liquidity available for auto-fill\")},F=()=>{if(!p){ce.error(\"Please select an account\");return}if(h===\"goal\"&&!w){ce.error(\"Please select a goal\");return}if(!T||J<=0){ce.error(\"Please enter a valid amount\");return}if(_&&J>_.balance){ce.error(\"Insufficient balance in selected account\");return}y(!0)},oe=()=>{N({accountId:p,destinationId:h===\"goal\"?w:\"emergency-fund\",amount:J,destinationType:h}),f(\"\"),A(\"\"),C(\"\"),y(!1),l()},ge=()=>{y(!1)},O=()=>{f(\"\"),A(\"\"),C(\"\"),y(!1),z(!1),l()};return n.jsx(us,{open:i,onOpenChange:O,children:n.jsx(ds,{className:\"max-w-md bg-black border-white/5 text-white p-0 custom-scrollbar sq-2xl overflow-hidden\",children:n.jsxs(\"div\",{className:\"max-h-[85vh] overflow-y-auto p-8 custom-scrollbar\",children:[n.jsxs(fs,{className:\"mb-6\",children:[n.jsx(ms,{className:\"text-xl font-black tracking-tight text-white mb-1\",children:h===\"goal\"?\"🎯 ALLOCATE TO GOAL\":\"🛡️ ALLOCATE TO RESERVE\"}),n.jsxs(hs,{className:\"text-slate-500 text-[10px] uppercase font-black tracking-widest\",children:[\"Move funds from account to \",h===\"goal\"?\"savings milestone\":\"emergency reserve\"]})]}),M?n.jsxs(\"div\",{className:\"space-y-6 py-4\",children:[n.jsx(\"div\",{className:\"text-center pt-2\",children:n.jsx(\"p\",{className:\"text-[10px] text-emerald-500 uppercase font-black tracking-[0.2em] animate-pulse\",children:\"Ready to Allocate Funds\"})}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"div\",{className:\"p-5 bg-white/5 sq-md border border-white/10 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 p-2 opacity-5\",children:n.jsx(zu,{className:\"w-8 h-8\"})}),n.jsx(\"p\",{className:\"text-[8px] text-slate-500 uppercase font-black tracking-widest mb-3 opacity-60\",children:\"Debit Source\"}),n.jsx(\"p\",{className:\"font-black text-sm text-white tracking-tight\",children:_?.name}),n.jsxs(\"div\",{className:\"mt-4 space-y-2.5\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-medium\",children:[n.jsx(\"span\",{className:\"text-slate-400 uppercase tracking-tighter\",children:\"Current Liquidity\"}),n.jsx(\"span\",{className:\"font-mono text-white\",children:Ne(_?.balance||0,d)})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-bold text-rose-500\",children:[n.jsx(\"span\",{className:\"uppercase tracking-tighter\",children:\"Debit Volume\"}),n.jsxs(\"span\",{className:\"font-mono\",children:[\"-\",Ne(J,d)]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"flex justify-between text-xs font-black\",children:[n.jsx(\"span\",{className:\"text-slate-500 uppercase tracking-widest\",children:\"Post-Debit Projection\"}),n.jsx(\"span\",{className:\"text-blue-400 font-mono\",children:Ne((_?.balance||0)-J,d)})]})]})]}),n.jsx(\"div\",{className:\"flex justify-center -my-2 relative z-10\",children:n.jsx(\"div\",{className:\"w-10 h-10 bg-blue-600 sq-md flex items-center justify-center shadow-[0_0_20px_rgba(37,99,235,0.3)] border border-blue-400/20\",children:n.jsx(P0,{className:\"w-5 h-5 text-white\"})})}),n.jsxs(\"div\",{className:`p-5 sq-md border relative overflow-hidden ${h===\"goal\"?\"bg-emerald-500/5 border-emerald-500/20\":\"bg-blue-500/5 border-blue-500/20\"}`,children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 p-2 opacity-10\",children:h===\"goal\"?n.jsx(Ga,{className:\"w-8 h-8 text-emerald-500\"}):n.jsx(Hn,{className:\"w-8 h-8 text-blue-500\"})}),n.jsx(\"p\",{className:\"text-[8px] text-slate-500 uppercase font-black tracking-widest mb-3 opacity-60\",children:\"Credit Destination\"}),n.jsxs(\"div\",{className:\"flex items-center gap-2 mb-4\",children:[n.jsx(\"span\",{className:\"text-xl\",children:h===\"goal\"?B?.emoji:\"🛡️\"}),n.jsx(\"p\",{className:\"font-black text-sm text-white tracking-tight\",children:h===\"goal\"?B?.name:\"Emergency Reserve\"})]}),n.jsxs(\"div\",{className:\"space-y-2.5\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-medium\",children:[n.jsx(\"span\",{className:\"text-slate-400 uppercase tracking-tighter\",children:\"Current Level\"}),n.jsx(\"span\",{className:\"font-mono text-white\",children:Ne((h===\"goal\"?B?.currentAmount:g?.currentAmount)||0,d)})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-bold text-emerald-400\",children:[n.jsx(\"span\",{className:\"uppercase tracking-tighter\",children:\"Credit Volume\"}),n.jsxs(\"span\",{className:\"font-mono\",children:[\"+\",Ne(J,d)]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"flex justify-between text-xs font-black\",children:[n.jsx(\"span\",{className:\"text-slate-500 uppercase tracking-widest\",children:\"Post-Credit Value\"}),n.jsx(\"span\",{className:\"text-emerald-400 font-mono\",children:Ne(((h===\"goal\"?B?.currentAmount:g?.currentAmount)||0)+J,d)})]})]})]})]}),n.jsx(\"div\",{className:\"p-4 bg-amber-500/5 border border-amber-500/20 sq-md\",children:n.jsxs(\"div\",{className:\"flex gap-3\",children:[n.jsx(Eu,{className:\"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5\"}),n.jsxs(\"div\",{className:\"text-[10px]\",children:[n.jsx(\"p\",{className:\"font-black text-amber-400 uppercase tracking-widest mb-1\",children:\"Node Equilibrium Warning\"}),n.jsxs(\"p\",{className:\"text-amber-500/70 font-bold leading-relaxed\",children:[\"Net Liquidity and \",_?.name,\" reserves will be reduced by \",Ne(J,d),\" immediately. This action is final.\"]})]})]})}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Ki,{onClick:ge,className:\"flex-1 h-12 text-slate-500 hover:text-white border-white/5 font-black tracking-[0.2em]\",children:\"Re-Configure\"}),n.jsx(Ki,{onClick:oe,className:\"flex-1 h-12 bg-emerald-600/20 text-emerald-400 border-emerald-500/30 font-black tracking-[0.2em] shadow-lg shadow-emerald-500/10\",children:\"Execute Move\"})]})]}):n.jsxs(\"div\",{className:\"space-y-6\",children:[j>0&&n.jsxs(\"div\",{className:\"relative group overflow-hidden sq-xl border border-emerald-500/20 bg-emerald-500/5 p-5 transition-all hover:bg-emerald-500/10 mb-2\",children:[n.jsx(Qu,{variant:\"savings\"}),n.jsxs(\"div\",{className:\"relative z-10 flex flex-col gap-4\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-10 h-10 bg-emerald-500/20 sq-md flex items-center justify-center border border-emerald-500/30\",children:n.jsx(Ga,{className:\"w-5 h-5 text-emerald-400\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-[9px] text-emerald-500/70 font-black uppercase tracking-widest\",children:\"Surplus Detected\"}),n.jsx(\"h4\",{className:\"text-xl font-black text-white tabular-nums\",children:Ne(j,d)})]})]}),n.jsx(\"button\",{onClick:()=>z(!L),className:\"p-2 hover:bg-white/5 rounded-full transition-colors text-slate-500 hover:text-white\",title:\"Show Calculation\",children:L?n.jsx(_r,{className:\"w-4 h-4\"}):n.jsx(K0,{className:\"w-4 h-4\"})})]}),L&&n.jsxs(\"div\",{className:\"py-3 border-t border-emerald-500/10 space-y-2 animate-in fade-in slide-in-from-top-2 duration-300\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-emerald-500/60 font-medium\",children:[n.jsx(\"span\",{children:\"Total Liquidity\"}),n.jsx(\"span\",{children:Ne(G,d)})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-rose-500/60 font-medium\",children:[n.jsx(\"span\",{children:\"Shadow Wallet (Goals + EF)\"}),n.jsxs(\"span\",{children:[\"-\",Ne(ee,d)]})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-rose-500/60 font-medium pb-2 border-b border-emerald-500/10\",children:[n.jsx(\"span\",{children:\"Total Commitments (Bills)\"}),n.jsxs(\"span\",{children:[\"-\",Ne(Z,d)]})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-emerald-400 font-bold uppercase pt-1\",children:[n.jsx(\"span\",{children:\"Available Safety Margin\"}),n.jsx(\"span\",{children:Ne(j,d)})]})]}),n.jsx(Ki,{onClick:()=>{ne(),_&&j>_.balance&&ce.warning(\"Surplus exceeds selected account balance. Source adjusted.\")},className:\"w-full h-11 bg-emerald-500/20 text-emerald-400 border-emerald-500/30 font-black tracking-widest\",children:\"Allocate All Surplus\"})]})]}),n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(ye,{htmlFor:\"allocate-from-account\",className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 mb-2 block\",children:\"Source Node\"}),n.jsxs(Ut,{value:p,onValueChange:f,children:[n.jsx(Bt,{id:\"allocate-from-account\",name:\"fromAccountId\",className:\"bg-black border-white/5 sq-md h-14 text-white focus:ring-1 focus:ring-blue-500/50\",children:n.jsx(It,{placeholder:\"Select Capital Source\"})}),n.jsx(qt,{className:\"bg-black border-white/10 text-white sq-xl\",children:o.map(k=>n.jsx(qe,{value:k.id,className:\"hover:bg-white/5\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between w-full\",children:[n.jsxs(\"span\",{children:[k.icon,\" \",k.name]}),n.jsx(\"span\",{className:\"text-[10px] text-slate-500 ml-4 font-mono\",children:Ne(k.balance,d)})]})},k.id))})]}),_&&n.jsxs(\"p\",{className:\"text-[10px] text-slate-500 mt-2 italic px-1\",children:[\"Available Liquidity: \",Ne(_.balance,d)]})]}),h===\"goal\"?n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(ye,{htmlFor:\"allocate-to-goal\",className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 mb-2 block\",children:\"Target Milestone\"}),n.jsxs(Ut,{value:w,onValueChange:A,children:[n.jsx(Bt,{id:\"allocate-to-goal\",name:\"toGoalId\",className:\"bg-black border-white/5 sq-md h-14 text-white focus:ring-1 focus:ring-emerald-500/50\",children:n.jsx(It,{placeholder:\"Choose Destination Goal\"})}),n.jsx(qt,{className:\"bg-black border-white/10 text-white sq-xl\",children:u.map(k=>{const U=k.currentAmount/k.targetAmount*100;return n.jsx(qe,{value:k.id,className:\"hover:bg-white/5\",children:n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(\"span\",{className:\"text-lg\",children:k.emoji}),n.jsxs(\"div\",{className:\"min-w-0\",children:[n.jsx(\"div\",{className:\"font-bold text-xs uppercase tracking-tight\",children:k.name}),n.jsxs(\"div\",{className:\"text-[9px] text-slate-500 font-mono\",children:[Math.round(U),\"% SYNCHRONIZED • \",Ne(k.currentAmount,d)]})]})]})},k.id)})})]})]}):n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(ye,{className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 mb-2 block\",children:\"Stability Reserve\"}),n.jsx(\"div\",{className:\"p-4 bg-white/5 border border-white/10 sq-md\",children:n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-10 h-10 bg-blue-500/10 sq-md flex items-center justify-center border border-blue-500/20\",children:\"🛡️\"}),n.jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[n.jsx(\"p\",{className:\"font-black text-xs uppercase tracking-widest text-white\",children:\"Emergency Fund\"}),g&&n.jsxs(\"p\",{className:\"text-[9px] text-slate-500 font-mono mt-1\",children:[Ne(g.currentAmount,d),\" / \",Ne(g.targetAmount,d)]})]})]})})]}),n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(\"div\",{className:\"flex justify-between items-center mb-1\",children:n.jsx(ye,{htmlFor:\"allocate-amount\",className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 block\",children:\"Contribution Volume\"})}),n.jsxs(\"div\",{className:\"relative\",children:[n.jsx(\"span\",{className:\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500\",children:d===\"INR\"?\"₹\":\"$\"}),n.jsx(wt,{id:\"allocate-amount\",name:\"amount\",type:\"number\",placeholder:\"0\",value:T,onChange:k=>C(k.target.value),className:\"pl-8 bg-black border-white/5 h-12\",min:\"0\",step:\"0.01\"})]}),_&&J>_.balance&&n.jsxs(\"div\",{className:\"flex items-center gap-2 text-sm text-red-600\",children:[n.jsx(Eu,{className:\"w-4 h-4\"}),n.jsx(\"span\",{children:\"Amount exceeds available balance\"})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Ki,{onClick:O,className:\"flex-1 h-12 text-slate-500 hover:text-white border-white/5 font-black tracking-[0.2em]\",children:\"Abort\"}),n.jsx(Ki,{onClick:F,className:\"flex-1 h-12 bg-blue-600/20 text-blue-400 border-blue-500/30 font-black tracking-[0.2em] shadow-lg shadow-blue-500/10\",children:\"Preview Mode\"})]})]})]})})})}const cN=[{name:\"HDFC Bank\",icon:\"🏦\",color:\"#1d4ed8\",type:\"bank\"},{name:\"ICICI Bank\",icon:\"🏦\",color:\"#ea580c\",type:\"bank\"},{name:\"State Bank of India\",icon:\"🏦\",color:\"#2563eb\",type:\"bank\"},{name:\"Axis Bank\",icon:\"🏦\",color:\"#9d174d\",type:\"bank\"},{name:\"Kotak Mahindra Bank\",icon:\"🏦\",color:\"#dc2626\",type:\"bank\"},{name:\"Bank of America\",icon:\"🏦\",color:\"#0033aa\",type:\"bank\"},{name:\"Chase Bank\",icon:\"🏦\",color:\"#117aca\",type:\"bank\"},{name:\"Wells Fargo\",icon:\"🏦\",color:\"#d71e28\",type:\"bank\"},{name:\"HSBC\",icon:\"🏦\",color:\"#db0011\",type:\"bank\"},{name:\"Barclays\",icon:\"🏦\",color:\"#00aeef\",type:\"bank\"},{name:\"Standard Chartered\",icon:\"🏦\",color:\"#00945e\",type:\"bank\"},{name:\"Citibank\",icon:\"🏦\",color:\"#003b70\",type:\"bank\"},{name:\"DBS Bank\",icon:\"🏦\",color:\"#ff0000\",type:\"bank\"},{name:\"Federal Bank\",icon:\"🏦\",color:\"#0b5a91\",type:\"bank\"},{name:\"American Express\",icon:\"💳\",color:\"#006fcf\",type:\"credit_card\"},{name:\"Discover\",icon:\"💳\",color:\"#ff6600\",type:\"credit_card\"},{name:\"Capital One\",icon:\"💳\",color:\"#d22e2e\",type:\"credit_card\"},{name:\"Goldman Sachs\",icon:\"🏦\",color:\"#725a34\",type:\"bank\"},{name:\"Morgan Stanley\",icon:\"🏦\",color:\"#000033\",type:\"bank\"},{name:\"Apple Card\",icon:\"💳\",color:\"#000000\",type:\"credit_card\"},{name:\"PayPal\",icon:\"💳\",color:\"#003087\",type:\"credit_card\"},{name:\"Revolut\",icon:\"💳\",color:\"#000000\",type:\"credit_card\"},{name:\"Monzo\",icon:\"💳\",color:\"#ff4d4f\",type:\"credit_card\"}];function uN({accounts:i,currency:l,onCreateAccount:o,onUpdateAccount:u,onDeleteAccount:d}){const[h,g]=x.useState(!1),[N,E]=x.useState(null),[S,p]=x.useState({name:\"\",type:\"bank\",balance:0,color:Wc[0],icon:eu[0].value,creditLimit:0,safeLimitPercentage:30,serviceChargePercentage:0,statementDate:1}),[f,w]=x.useState([]),A=j=>{j?(E(j),p({name:j.name,type:j.type,balance:j.balance,color:j.color,icon:j.icon,creditLimit:j.creditLimit||0,safeLimitPercentage:j.safeLimitPercentage||30,serviceChargePercentage:j.serviceChargePercentage||0,statementDate:j.statementDate||1})):(E(null),p({name:\"\",type:\"bank\",balance:0,color:Wc[0],icon:eu[0].value,creditLimit:0,safeLimitPercentage:30,serviceChargePercentage:0,statementDate:1})),w([]),g(!0)},T=j=>{if(p({...S,name:j}),j.length>1){const G=cN.filter(ee=>ee.name.toLowerCase().includes(j.toLowerCase())).slice(0,4);w(G)}else w([])},C=j=>{p({...S,name:j.name,type:j.type,icon:j.icon,color:j.color}),w([])},M=async j=>{if(j.preventDefault(),!S.name.trim()){ce.error(\"Please enter an account name\");return}try{N?await u(N.id,S):await o(S),g(!1)}catch(G){console.error(\"Error saving account:\",G)}},y=async j=>{if(confirm(\"Are you sure you want to delete this account? This action cannot be undone.\"))try{await d(j)}catch(G){console.error(\"Error deleting account:\",G)}};return n.jsxs(\"div\",{className:\"space-y-12 animate-in fade-in slide-in-from-bottom-4 duration-700 px-4 pb-24\",children:[n.jsxs(\"div\",{className:\"flex items-end justify-between gap-6\",children:[n.jsxs(\"div\",{className:\"min-w-0\",children:[n.jsx(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tight leading-none mb-3 truncate\",children:\"Accounts & Cards\"}),n.jsxs(\"div\",{className:\"flex flex-wrap gap-2 mb-3\",children:[n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-emerald-500 bg-emerald-500/10 px-2 py-0.5 rounded-lg border border-emerald-500/20 whitespace-nowrap\",children:[i.filter(j=>j.type===\"bank\").length,\" Banks\"]}),n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-rose-500 bg-rose-500/10 px-2 py-0.5 rounded-lg border border-rose-500/20 whitespace-nowrap\",children:[i.filter(j=>j.type===\"credit_card\").length,\" Credit\"]}),n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-amber-500 bg-amber-500/10 px-2 py-0.5 rounded-lg border border-amber-500/20 whitespace-nowrap\",children:[i.filter(j=>j.type===\"cash\").length,\" Cash\"]}),n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-blue-500 bg-blue-500/10 px-2 py-0.5 rounded-lg border border-blue-500/20 whitespace-nowrap\",children:[i.filter(j=>j.type===\"investment\").length,\" Holding\"]})]}),n.jsx(\"p\",{className:\"text-slate-500 font-bold max-w-md text-[10px] truncate\",children:\"Monitor liquidity across core reservoirs and credit pools.\"})]}),n.jsxs(Re,{onClick:()=>A(),className:\"bg-emerald-600 hover:bg-emerald-500 text-white rounded-xl px-6 h-12 font-bold shadow-lg shadow-emerald-600/20 transition-all active:scale-95 shrink-0\",children:[n.jsx(kr,{className:\"w-4 h-4 sm:mr-2\"}),n.jsx(\"span\",{className:\"hidden sm:inline\",children:\"Add Account\"}),n.jsx(\"span\",{className:\"sm:hidden\",children:\"Add\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(Ny,{className:\"w-3.5 h-3.5\"}),\"Bank Accounts\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(j=>j.type===\"bank\").map(j=>n.jsx(L,{account:j},j.id)),i.filter(j=>j.type===\"bank\").length===0&&n.jsx(z,{message:\"No bank accounts detected.\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(Sy,{className:\"w-3.5 h-3.5\"}),\"Credit Pools (Cards)\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(j=>j.type===\"credit_card\").map(j=>n.jsx(L,{account:j},j.id)),i.filter(j=>j.type===\"credit_card\").length===0&&n.jsx(z,{message:\"No credit pools detected.\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(zu,{className:\"w-3.5 h-3.5\"}),\"Cash in Hand\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(j=>j.type===\"cash\").map(j=>n.jsx(L,{account:j},j.id)),i.filter(j=>j.type===\"cash\").length===0&&n.jsx(z,{message:\"No physical liquid reservoirs detected.\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(qn,{className:\"w-3.5 h-3.5\"}),\"Investment Holding Nodes\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(j=>j.type===\"investment\").map(j=>n.jsx(L,{account:j},j.id)),i.filter(j=>j.type===\"investment\").length===0&&n.jsx(\"div\",{className:\"md:col-span-2 lg:col-span-3 p-8 border border-dashed border-white/5 squircle-22 flex items-center justify-center text-slate-600 font-bold text-xs\",children:\"No investment nodes detected. Link them to track growth separately.\"})]})]}),n.jsx(us,{open:h,onOpenChange:g,children:n.jsxs(ds,{className:\"max-w-md max-h-[90vh] overflow-y-auto bg-slate-950 border-white/10 text-white squircle-22 p-8 custom-scrollbar\",children:[n.jsxs(fs,{children:[n.jsx(ms,{className:\"text-3xl font-black tracking-tight text-white mb-2\",children:N?\"Refine Account\":\"New Liquidity Reservoir\"}),n.jsx(hs,{className:\"text-slate-500 font-bold mb-6\",children:\"Establish a new liquidity pool in the Obsidian system.\"})]}),n.jsxs(\"form\",{onSubmit:M,className:\"space-y-8\",children:[n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"name\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Account Identity\"}),n.jsx(wt,{id:\"name\",name:\"name\",value:S.name,onChange:j=>T(j.target.value),placeholder:\"e.g. Mercury Checking\",required:!0,className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white focus:ring-emerald-500/50\",autoComplete:\"off\"}),f.length>0&&n.jsxs(\"div\",{className:\"mt-3 p-4 bg-indigo-500/5 border border-indigo-500/10 squircle-12 flex items-start gap-4 animate-in fade-in zoom-in-95 duration-300\",children:[n.jsx(Ga,{className:\"w-4 h-4 text-indigo-400 mt-1 flex-shrink-0\"}),n.jsxs(\"div\",{className:\"flex-1\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-widest text-indigo-300 mb-3 opacity-60\",children:\"Intelligence Suggested\"}),n.jsx(\"div\",{className:\"grid grid-cols-1 gap-2\",children:f.map(j=>n.jsxs(\"button\",{type:\"button\",onClick:()=>C(j),className:\"flex items-center gap-3 p-2.5 squircle-12 bg-white/5 hover:bg-white/10 transition-all group border border-white/5\",children:[n.jsx(\"span\",{className:\"text-lg group-hover:scale-110 transition-transform\",children:j.icon}),n.jsx(\"span\",{className:\"text-xs font-bold text-slate-300 group-hover:text-white transition-colors\",children:j.name})]},j.name))})]})]})]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 md:grid-cols-3 gap-4\",children:[n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${S.type===\"bank\"?\"border-emerald-500 bg-emerald-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>p({...S,type:\"bank\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-emerald-500/20 flex items-center justify-center text-xl mb-2\",children:\"🏦\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Bank Reservoir\"})]}),n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${S.type===\"credit_card\"?\"border-rose-500 bg-rose-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>p({...S,type:\"credit_card\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-rose-500/20 flex items-center justify-center text-xl mb-2\",children:\"💳\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Credit Pool\"})]}),n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${S.type===\"cash\"?\"border-amber-500 bg-amber-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>p({...S,type:\"cash\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-amber-500/20 flex items-center justify-center text-xl mb-2\",children:\"💵\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Cash in Hand\"})]}),n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${S.type===\"investment\"?\"border-blue-500 bg-blue-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>p({...S,type:\"investment\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-blue-500/20 flex items-center justify-center text-xl mb-2\",children:\"📈\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Growth Node\"})]})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"balance\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:S.type===\"bank\"||S.type===\"cash\"||S.type===\"investment\"?\"Initial Liquidity\":\"Current Spent Balance\"}),n.jsx(Ha,{id:\"balance\",name:\"balance\",value:S.balance,onChange:j=>p({...S,balance:parseFloat(j)||0}),placeholder:\"0.00\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]}),S.type===\"credit_card\"&&n.jsxs(\"div\",{className:\"space-y-6 animate-in slide-in-from-top-4 duration-500\",children:[n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"creditLimit\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Total Credit Limit\"}),n.jsx(Ha,{id:\"creditLimit\",name:\"creditLimit\",value:S.creditLimit,onChange:j=>p({...S,creditLimit:parseFloat(j)||0}),placeholder:\"e.g. 100000\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"safeLimit\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Safe Use Threshold (%)\"}),n.jsx(Ha,{id:\"safeLimit\",name:\"safeLimitPercentage\",value:S.safeLimitPercentage,onChange:j=>p({...S,safeLimitPercentage:parseFloat(j)||30}),placeholder:\"30\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"serviceCharge\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Svc Charge (%)\"}),n.jsx(Ha,{id:\"serviceCharge\",name:\"serviceChargePercentage\",value:S.serviceChargePercentage,onChange:j=>p({...S,serviceChargePercentage:parseFloat(j)||0}),placeholder:\"0.0\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"statementDate\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Statement Date\"}),n.jsxs(Ut,{value:S.statementDate.toString(),onValueChange:j=>p({...S,statementDate:parseInt(j)}),children:[n.jsx(Bt,{id:\"statementDate\",name:\"statementDate\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",children:n.jsx(It,{})}),n.jsx(qt,{className:\"bg-slate-900 border-white/10 text-white\",children:[...Array(31)].map((j,G)=>n.jsx(qe,{value:(G+1).toString(),children:G+1},G+1))})]})]})]})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"System Icon\"}),n.jsx(\"div\",{className:\"grid grid-cols-6 sm:grid-cols-9 gap-2\",children:eu.map(j=>n.jsx(\"button\",{type:\"button\",onClick:()=>p({...S,icon:j.value}),className:`w-10 h-10 squircle-12 flex items-center justify-center text-lg border-2 transition-all ${S.icon===j.value?\"border-emerald-500 bg-emerald-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,children:j.value},j.value))})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Brand Color\"}),n.jsx(\"div\",{className:\"flex flex-wrap gap-3\",children:Wc.map(j=>{const G={style:{\"--btn-color\":j}};return n.jsx(\"button\",{type:\"button\",onClick:()=>p({...S,color:j}),\"aria-label\":`Select color ${j}`,className:`w-8 h-8 rounded-full border-4 transition-all bg-[length:100%_100%] bg-[var(--btn-color)] ${S.color===j?\"border-white scale-110 shadow-lg shadow-white/20\":\"border-transparent hover:scale-105\"}`,...G},j)})})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Re,{type:\"button\",variant:\"ghost\",onClick:()=>g(!1),className:\"flex-1 h-14 squircle-12 font-bold text-slate-500 hover:text-white\",children:\"Abort\"}),n.jsx(Re,{type:\"submit\",className:\"flex-1 h-14 squircle-12 bg-emerald-600 hover:bg-emerald-500 text-white font-black shadow-lg shadow-emerald-600/20\",children:N?\"Update Account\":\"Ignite Account\"})]})]})]})})]});function L({account:j}){const G=j.type===\"credit_card\",ee=G?(j.creditLimit||0)*(j.safeLimitPercentage||30)/100:0,Z=G&&j.creditLimit?Math.abs(j.balance)/j.creditLimit*100:0,_=G&&Z<=(j.safeLimitPercentage||30);return n.jsxs(Ot,{className:\"p-6 bg-slate-900/40 border-white/5 squircle-22 border hover:bg-slate-900/60 transition-all duration-300 group relative overflow-hidden\",children:[(()=>{const B={style:{\"--card-glow\":j.color}};return n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20 bg-[var(--card-glow)]\",...B})})(),n.jsxs(\"div\",{className:\"flex items-start justify-between mb-8 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[(()=>{const B={style:{\"--icon-bg\":j.color+\"15\"}};return n.jsx(\"div\",{className:\"w-16 h-16 squircle-12 flex items-center justify-center text-3xl shadow-inner border border-white/5 group-hover:scale-105 transition-transform bg-[var(--icon-bg)]\",...B,children:j.icon})})(),n.jsxs(\"div\",{className:\"min-w-0\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100 truncate\",children:j.name}),n.jsxs(\"div\",{className:\"flex items-center gap-1.5 mt-1\",children:[n.jsx(\"div\",{className:`w-1.5 h-1.5 rounded-full ${G?_?\"bg-indigo-500\":\"bg-rose-500\":\"bg-emerald-500\"}`}),n.jsx(\"span\",{className:\"text-[10px] uppercase font-black tracking-widest text-slate-500\",children:G?\"Credit Pool\":\"Bank Account\"})]})]})]}),n.jsxs(\"div\",{className:\"flex gap-2\",children:[n.jsx(Re,{variant:\"ghost\",title:\"Edit Account\",size:\"sm\",onClick:()=>A(j),className:\"w-8 h-8 p-0 squircle-12 hover:bg-white/5 text-slate-600 hover:text-white transition-all\",children:n.jsx(Cy,{className:\"w-3.5 h-3.5\"})}),n.jsx(Re,{variant:\"ghost\",title:\"Delete Account\",size:\"sm\",onClick:()=>y(j.id),className:\"w-8 h-8 p-0 squircle-12 hover:bg-rose-500/10 text-slate-600 hover:text-rose-400 transition-all\",children:n.jsx(tl,{className:\"w-3.5 h-3.5\"})})]})]}),n.jsxs(\"div\",{className:\"pt-6 border-t border-white/5 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-end\",children:[n.jsxs(\"div\",{className:\"space-y-1\",children:[n.jsx(\"p\",{className:\"text-[10px] uppercase font-black tracking-widest text-slate-600\",children:G?\"Current Obligation\":\"Available Liquidity\"}),(()=>{const B={style:{\"--balance-color\":j.color}};return n.jsx(\"h4\",{className:\"text-2xl font-black tabular-nums tracking-tight text-[var(--balance-color)]\",...B,children:Ne(j.balance,l)})})()]}),G&&j.creditLimit?n.jsxs(\"div\",{className:\"text-right\",children:[n.jsx(\"p\",{className:\"text-[9px] font-black text-slate-600 uppercase mb-1\",children:\"Limit Use\"}),n.jsxs(\"p\",{className:`text-xs font-black tabular-nums ${_?\"text-indigo-400\":\"text-rose-400\"}`,children:[Z.toFixed(1),\"%\"]})]}):n.jsx(\"div\",{className:\"bg-white/5 px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest text-slate-500 border border-white/5\",children:\"Synced\"})]}),G&&j.creditLimit&&n.jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-white/5 flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"space-y-1\",children:[n.jsx(\"p\",{className:\"text-[8px] font-black text-slate-700 uppercase\",children:\"Safe Threshold\"}),n.jsx(\"p\",{className:\"text-[10px] font-black text-slate-500\",children:Ne(ee,l)})]}),j.serviceChargePercentage?n.jsxs(\"div\",{className:\"text-right space-y-1\",children:[n.jsx(\"p\",{className:\"text-[8px] font-black text-slate-700 uppercase\",children:\"Svc Charge\"}),n.jsxs(\"p\",{className:\"text-[10px] font-black text-slate-500\",children:[j.serviceChargePercentage,\"%\"]})]}):null,G&&j.statementDate&&n.jsxs(\"div\",{className:\"text-right space-y-1 ml-auto\",children:[n.jsx(\"p\",{className:\"text-[8px] font-black text-slate-700 uppercase\",children:\"Statement\"}),n.jsxs(\"p\",{className:\"text-[10px] font-black text-slate-500\",children:[\"Day \",j.statementDate]})]})]})]})]})}function z({message:j}){return n.jsx(\"div\",{className:\"py-12 text-center bg-slate-800/20 squircle-22 border border-dashed border-white/10 col-span-full\",children:n.jsx(\"p\",{className:\"text-sm text-slate-500 font-bold\",children:j})})}}function dN({isOpen:i,onClose:l,accounts:o,currency:u,onTransfer:d}){const[h,g]=x.useState(\"\"),[N,E]=x.useState(\"\"),[S,p]=x.useState(\"\"),[f,w]=x.useState(!1),A=o.find(z=>z.id===h),T=o.find(z=>z.id===N),C=parseFloat(S)||0,M=()=>{if(!h){ce.error(\"Please select source reservoir\");return}if(!N){ce.error(\"Please select destination reservoir\");return}if(h===N){ce.error(\"Source and destination must be different\");return}if(!S||C<=0){ce.error(\"Please enter a valid amount\");return}if(A&&C>A.balance){ce.error(\"Insufficient funds in source reservoir\");return}w(!0)},y=()=>{d(h,N,C),L()},L=()=>{g(\"\"),E(\"\"),p(\"\"),w(!1),l()};return n.jsx(us,{open:i,onOpenChange:L,children:n.jsxs(ds,{className:\"max-w-md max-h-[90vh] overflow-y-auto bg-[#020408] border-white/5 p-0 shadow-2xl custom-scrollbar text-white\",children:[n.jsxs(\"div\",{className:\"px-8 pt-10 pb-8 border-b border-white/5 relative overflow-hidden bg-indigo-500/5\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 blur-[60px] opacity-20 -mr-16 -mt-16 bg-indigo-500\"}),n.jsxs(fs,{className:\"relative z-10\",children:[n.jsxs(ms,{className:\"text-2xl font-black tracking-tighter text-slate-100 flex items-center gap-3\",children:[n.jsx(Au,{className:\"w-6 h-6 text-indigo-400\"}),\"Capital Migration\"]}),n.jsx(hs,{className:\"text-slate-500 font-bold text-[10px] uppercase tracking-[0.2em] mt-1\",children:\"Transfer between core liquidity reservoirs\"})]})]}),n.jsx(\"div\",{className:\"p-8\",children:f?n.jsxs(\"div\",{className:\"space-y-6 animate-in fade-in zoom-in-95 duration-300\",children:[n.jsxs(\"div\",{className:\"p-6 bg-slate-900/50 border border-white/5 rounded-3xl space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between gap-4\",children:[n.jsxs(\"div\",{className:\"flex-1 text-center space-y-2\",children:[n.jsx(\"div\",{className:\"w-12 h-12 rounded-2xl bg-slate-800 border border-white/10 flex items-center justify-center text-2xl mx-auto\",children:A?.icon}),n.jsx(\"p\",{className:\"text-[10px] font-black uppercase text-slate-500 truncate\",children:A?.name})]}),n.jsxs(\"div\",{className:\"flex flex-col items-center gap-1\",children:[n.jsx(Au,{className:\"w-6 h-6 text-indigo-400 animate-pulse\"}),n.jsx(\"p\",{className:\"text-[10px] font-black text-indigo-400\",children:Ne(C,u)})]}),n.jsxs(\"div\",{className:\"flex-1 text-center space-y-2\",children:[n.jsx(\"div\",{className:\"w-12 h-12 rounded-2xl bg-slate-800 border border-white/10 flex items-center justify-center text-2xl mx-auto\",children:T?.icon}),n.jsx(\"p\",{className:\"text-[10px] font-black uppercase text-slate-500 truncate\",children:T?.name})]})]}),n.jsxs(\"div\",{className:\"space-y-4 pt-4 border-t border-white/5\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-center text-xs\",children:[n.jsx(\"span\",{className:\"text-slate-500 font-bold\",children:\"Source New Balance\"}),n.jsx(\"span\",{className:\"text-rose-400 font-black\",children:Ne((A?.balance||0)-C,u)})]}),n.jsxs(\"div\",{className:\"flex justify-between items-center text-xs\",children:[n.jsx(\"span\",{className:\"text-slate-500 font-bold\",children:\"Dest. New Balance\"}),n.jsx(\"span\",{className:\"text-emerald-400 font-black\",children:Ne((T?.balance||0)+C,u)})]})]})]}),n.jsxs(\"div\",{className:\"p-4 bg-amber-500/5 border border-amber-500/10 rounded-2xl flex gap-3\",children:[n.jsx(Ar,{className:\"w-5 h-5 text-amber-500 flex-shrink-0\"}),n.jsx(\"p\",{className:\"text-[10px] text-amber-200/60 font-medium leading-relaxed\",children:\"Notice: This transfer will instantly adjust the balance of both accounts. This action is recorded in your transaction history.\"})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Re,{variant:\"ghost\",onClick:()=>w(!1),className:\"flex-1 h-12 rounded-2xl text-slate-500 font-bold hover:bg-white/5\",children:\"Back\"}),n.jsx(Re,{onClick:y,className:\"flex-1 h-12 rounded-2xl bg-indigo-600 hover:bg-indigo-500 text-white font-black shadow-lg shadow-indigo-600/20 transition-all active:scale-95\",children:\"Confirm Migration\"})]})]}):n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(ye,{htmlFor:\"source-reservoir\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Source Reservoir\"}),n.jsxs(Ut,{value:h,onValueChange:g,children:[n.jsx(Bt,{id:\"source-reservoir\",className:\"h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-200 font-bold\",children:n.jsx(It,{placeholder:\"Select source\"})}),n.jsx(qt,{className:\"bg-slate-900 border-white/5 max-h-[40vh]\",children:o.map(z=>n.jsx(qe,{value:z.id,className:\"focus:bg-white/5 focus:text-white\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between w-full pr-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-xl\",children:z.icon}),n.jsx(\"span\",{children:z.name})]}),n.jsx(\"span\",{className:\"text-xs font-black text-slate-500\",children:Ne(z.balance,u)})]})},z.id))})]})]}),n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(ye,{htmlFor:\"dest-reservoir\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Destination Reservoir\"}),n.jsxs(Ut,{value:N,onValueChange:E,children:[n.jsx(Bt,{id:\"dest-reservoir\",className:\"h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-200 font-bold\",children:n.jsx(It,{placeholder:\"Select destination\"})}),n.jsx(qt,{className:\"bg-slate-900 border-white/5 max-h-[40vh]\",children:o.map(z=>n.jsx(qe,{value:z.id,className:\"focus:bg-white/5 focus:text-white\",disabled:z.id===h,children:n.jsxs(\"div\",{className:\"flex items-center justify-between w-full pr-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-xl\",children:z.icon}),n.jsx(\"span\",{children:z.name})]}),n.jsx(\"span\",{className:\"text-xs font-black text-slate-500\",children:Ne(z.balance,u)})]})},z.id))})]})]}),n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(ye,{htmlFor:\"migration-amount\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Capital Amount\"}),n.jsxs(\"div\",{className:\"relative group\",children:[n.jsx(\"div\",{className:\"absolute left-5 top-1/2 -translate-y-1/2 text-slate-500 font-bold group-focus-within:text-indigo-400 transition-colors\",children:u===\"INR\"?\"₹\":\"$\"}),n.jsx(wt,{id:\"migration-amount\",name:\"amount\",type:\"number\",placeholder:\"0.00\",value:S,onChange:z=>p(z.target.value),className:\"pl-12 h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-100 font-black text-xl\"})]}),A&&C>A.balance&&n.jsxs(\"div\",{className:\"flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-rose-400 ml-1 animate-in slide-in-from-top-1\",children:[n.jsx(Eu,{className:\"w-3 h-3\"}),n.jsx(\"span\",{children:\"Insufficient stability in source reservoir\"})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Re,{variant:\"ghost\",onClick:L,className:\"flex-1 h-12 rounded-2xl text-slate-500 font-bold hover:bg-white/5\",children:\"Cancel\"}),n.jsx(Re,{onClick:M,className:\"flex-1 h-12 rounded-2xl bg-indigo-600 hover:bg-indigo-500 text-white font-black shadow-lg shadow-indigo-600/20 transition-all active:scale-95\",children:\"Verify Migration\"})]})]})})]})})}function fN({onRefresh:i,children:l}){const o=x.useRef(0),[u,d]=x.useState(0),[h,g]=x.useState(!1),N=x.useRef(null),E=80,S=f=>{window.scrollY===0&&(o.current=f.touches[0].clientY)};x.useEffect(()=>{const f=A=>{if(o.current===0)return;const C=A.touches[0].clientY-o.current;if(C>0&&window.scrollY===0){A.cancelable&&A.preventDefault();const M=Math.min(C,E*1.5);d(M)}},w=N.current;return w&&w.addEventListener(\"touchmove\",f,{passive:!1}),()=>{w&&w.removeEventListener(\"touchmove\",f)}},[]),x.useEffect(()=>{u>=E&&!h&&window.navigator.vibrate&&window.navigator.vibrate(10)},[u,h]);const p=async()=>{u>=E&&!h&&(g(!0),await i(),g(!1)),d(0),o.current=0};return n.jsxs(\"div\",{ref:N,className:\"relative\",onTouchStart:S,onTouchEnd:p,children:[n.jsx(Le.div,{className:\"absolute top-0 left-0 right-0 flex justify-center items-center\",style:{height:u,opacity:u/E},animate:{y:h?0:-E},children:n.jsxs(\"div\",{className:\"flex flex-col items-center gap-2 py-4\",children:[n.jsx(Le.div,{animate:{rotate:h?360:u/E*180},transition:{rotate:{duration:h?1:0,repeat:h?1/0:0,ease:\"linear\"}},children:n.jsx(ei,{className:\"w-6 h-6 text-[#0A84FF]\"})}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-[0.2em] text-[#8E8E93]\",children:h?\"Synchronizing...\":u>=E?\"Relinquish to Sync\":\"Pull to Synchronize\"})]})}),n.jsx(Le.div,{animate:{y:h?60:0},transition:{duration:.2},children:l})]})}function os({className:i,...l}){return n.jsx(\"div\",{\"data-slot\":\"skeleton\",className:De(\"bg-accent animate-pulse rounded-md\",i),...l})}function mN(){return n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(Ot,{className:\"p-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 mb-4\",children:[n.jsx(os,{className:\"w-12 h-12 rounded-lg\"}),n.jsxs(\"div\",{className:\"space-y-2 flex-1\",children:[n.jsx(os,{className:\"h-5 w-32\"}),n.jsx(os,{className:\"h-4 w-48\"})]})]}),n.jsx(\"div\",{className:\"grid grid-cols-3 gap-3\",children:[1,2,3].map(i=>n.jsx(\"div\",{className:\"space-y-2\",children:n.jsx(os,{className:\"h-20 w-full rounded-lg\"})},i))})]}),[1,2,3].map(i=>n.jsx(Ot,{className:\"p-6\",children:n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(os,{className:\"h-6 w-48\"}),n.jsx(os,{className:\"h-4 w-full\"}),n.jsx(os,{className:\"h-4 w-3/4\"})]})},i))]})}function hN(i,l,o=30){x.useEffect(()=>{let u=0;const d=g=>{u=g.touches[0].clientX},h=g=>{const E=g.touches[0].clientX-u;u<o&&E>30&&(g.cancelable&&g.preventDefault(),window.navigator.vibrate&&window.navigator.vibrate(20),i(),u=window.innerWidth),u>window.innerWidth-o&&E<-30&&(g.cancelable&&g.preventDefault(),window.navigator.vibrate&&window.navigator.vibrate(20),l(),u=0)};return document.addEventListener(\"touchstart\",d,{passive:!0}),document.addEventListener(\"touchmove\",h,{passive:!1}),()=>{document.removeEventListener(\"touchstart\",d),document.removeEventListener(\"touchmove\",h)}},[i,l,o])}const pN=({onOpenAI:i,onAddTransaction:l,onMigrate:o,isVisible:u})=>n.jsxs(\"div\",{id:\"fab-dock\",className:`fixed right-5 bottom-[110px] flex flex-col gap-3.5 z-[110] transition-all duration-500 ease-quantum ${u?\"translate-x-0 opacity-100\":\"translate-x-[100px] opacity-0\"}`,children:[n.jsx(\"div\",{onClick:i,title:\"AI Assistant\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-[#a855f74d] shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-[#A855F7] hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(Ga,{className:\"w-5 h-5 group-hover:rotate-12 transition-transform\"})}),n.jsx(\"div\",{onClick:o,title:\"Migrate Capital\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-indigo-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-indigo-400 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(Au,{className:\"w-5 h-5 group-hover:scale-110 transition-transform\"})}),n.jsx(\"div\",{onClick:()=>l(\"debt\"),title:\"Added Personal IOU\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-yellow-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-yellow-500 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(Z0,{className:\"w-5 h-5 group-hover:-translate-y-0.5 transition-transform\"})}),n.jsx(\"div\",{onClick:()=>l(\"income\"),title:\"Add Money In\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-emerald-500/40 shadow-[0_0_20px_rgba(16,185,129,0.1)] cursor-pointer text-emerald-500 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(kr,{className:\"w-5 h-5 group-hover:rotate-90 transition-transform\"})}),n.jsx(\"div\",{onClick:()=>l(\"expense\"),title:\"Add Money Out\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-rose-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-rose-500 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(Ey,{className:\"w-5 h-5 group-hover:scale-110 transition-transform\"})})]}),gN=he.memo(({isOpen:i,onClose:l,context:o,settings:u,isOffline:d=!1})=>{const[h,g]=x.useState(\"\"),[N,E]=x.useState([{text:\"Hello! I've analyzed your cash flow. How can I assist with your goals?\",type:\"ai\"}]),[S,p]=x.useState(!1),f=x.useRef(null);x.useEffect(()=>{f.current&&f.current.scrollIntoView({behavior:\"smooth\"})},[N]);const w=async()=>{if(!h.trim()||S)return;const A=h.trim();g(\"\"),E(T=>[...T,{text:A,type:\"user\"}]),p(!0);try{if(d){setTimeout(()=>{E(C=>[...C,{text:\"FinHub is currently in 'Cached View' (Offline). I've analyzed your local financial fabric: your liquidity nodes are stable, but synchronizing with global AI intelligence requires a stable link. How can I help you optimize your local state?\",type:\"ai\"}]),p(!1)},1e3);return}const T=await Wj({userPrompt:A,context:o,settings:u,persona:\"ANALYST\"});T.error?E(C=>[...C,{text:T.error,type:\"ai\"}]):E(C=>[...C,{text:T.text||\"Analyzing financial pattern...\",type:\"ai\"}])}catch{E(T=>[...T,{text:\"Connection error. FinHub has transitioned to local 'Cached View'.\",type:\"ai\"}])}finally{d||p(!1)}};return i?n.jsxs(\"div\",{id:\"ai-chat-overlay\",className:\"fixed inset-0 bg-[#020408] z-[200] flex flex-col p-6 animate-in fade-in zoom-in-95 duration-300\",children:[n.jsx(\"div\",{className:\"absolute inset-0 bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-indigo-500/10 via-transparent to-transparent opacity-50\"}),n.jsxs(\"div\",{className:\"flex justify-between items-center mb-10 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-indigo-500/10 rounded-2xl flex items-center justify-center border border-indigo-500/20\",children:n.jsx(Ga,{className:\"text-indigo-400 w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"h2\",{className:\"font-black text-2xl text-white tracking-tight leading-none\",children:\"AI Analyst\"}),n.jsxs(\"div\",{className:\"flex items-center gap-2 mt-1\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500\",children:\"Neural Core Context\"}),d&&n.jsx(\"span\",{className:\"text-[8px] bg-amber-500/10 text-amber-500 px-1.5 py-0.5 rounded border border-amber-500/20 font-black tracking-tighter uppercase\",children:\"Cached View\"})]})]})]}),n.jsx(\"button\",{onClick:l,\"aria-label\":\"Close Chat\",className:\"bg-white/5 w-12 h-12 rounded-full flex items-center justify-center hover:bg-white/10 hover:text-white text-slate-400 transition-all active:scale-95\",children:n.jsx(il,{className:\"w-6 h-6\"})})]}),n.jsxs(\"div\",{id:\"chat-messages\",className:\"flex-1 overflow-y-auto space-y-4 pr-2 custom-scrollbar\",children:[N.map((A,T)=>n.jsxs(\"div\",{className:De(\"p-4 rounded-[24px] text-sm leading-relaxed\",A.type===\"ai\"?\"bg-slate-900 border border-white/5 text-slate-200 self-start max-w-[85%]\":\"bg-indigo-600 text-white font-medium shadow-lg shadow-indigo-600/20 self-end max-w-[85%]\"),children:[A.type===\"ai\"&&n.jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[n.jsx(Ga,{className:\"w-3 h-3 text-indigo-400 font-black\"}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500\",children:\"Guru Analysis\"})]}),A.text]},T)),S&&n.jsx(\"div\",{className:\"p-4 bg-slate-900 border border-white/5 rounded-[24px] self-start animate-pulse\",children:n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:0ms]\"}),n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:150ms]\"}),n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:300ms]\"})]})}),n.jsx(\"div\",{ref:f})]}),n.jsxs(\"div\",{className:\"mt-8 flex gap-3 p-2 bg-slate-900/40 rounded-[28px] border border-white/5 relative z-10\",children:[n.jsx(\"input\",{type:\"text\",value:h,onChange:A=>g(A.target.value),onKeyDown:A=>A.key===\"Enter\"&&w(),placeholder:\"Ask the analyst...\",className:\"flex-1 bg-transparent border-none px-6 py-4 text-white focus:outline-none placeholder:text-slate-600 font-bold\"}),n.jsx(\"button\",{onClick:w,disabled:S||!h.trim(),\"aria-label\":\"Send Message\",className:\"w-14 h-14 bg-indigo-600 rounded-[22px] flex items-center justify-center shadow-lg shadow-indigo-900/30 hover:bg-indigo-500 transition-all active:scale-90 disabled:opacity-50 disabled:cursor-not-allowed group\",children:n.jsx(Ay,{className:\"w-6 h-6 text-white group-hover:-translate-y-1 transition-transform\"})})]}),n.jsx(\"p\",{className:\"text-[9px] font-bold text-slate-600 text-center uppercase tracking-widest mt-4\",children:\"Encryption Verified // Neural Fabric Link Stable\"})]}):null});class xN extends x.Component{state={hasError:!1};static getDerivedStateFromError(l){return{hasError:!0,error:l}}componentDidCatch(l,o){console.error(\"Uncaught error:\",l,o)}render(){return this.state.hasError?n.jsx(\"div\",{className:\"min-h-[400px] flex items-center justify-center p-6\",children:n.jsxs(Ot,{className:\"max-w-md w-full p-8 bg-slate-900 border-white/10 text-center space-y-6 rounded-[32px]\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-rose-500/10 rounded-full flex items-center justify-center mx-auto\",children:n.jsx(el,{className:\"w-8 h-8 text-rose-500\"})}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(\"h2\",{className:\"text-xl font-black text-white uppercase tracking-tight\",children:\"System Glitch Detected\"}),n.jsx(\"p\",{className:\"text-sm text-slate-400 font-medium\",children:\"The neural link to this component was interrupted. This usually happens during background updates.\"})]}),this.state.error&&n.jsx(\"pre\",{className:\"text-[10px] bg-black/40 p-3 rounded-xl text-rose-400/80 overflow-x-auto text-left font-mono\",children:this.state.error.message}),n.jsxs(Re,{onClick:()=>window.location.reload(),className:\"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-black py-6 rounded-2xl gap-2 h-auto\",children:[n.jsx(ei,{className:\"w-4 h-4\"}),\"Re-establish Connection\"]})]})}):this.props.children}}var z0;(function(i){i[i.NONE=0]=\"NONE\",i[i.TOUCH_ID=1]=\"TOUCH_ID\",i[i.FACE_ID=2]=\"FACE_ID\",i[i.FINGERPRINT=3]=\"FINGERPRINT\",i[i.FACE_AUTHENTICATION=4]=\"FACE_AUTHENTICATION\",i[i.IRIS_AUTHENTICATION=5]=\"IRIS_AUTHENTICATION\",i[i.MULTIPLE=6]=\"MULTIPLE\"})(z0||(z0={}));var L0;(function(i){i[i.NONE=0]=\"NONE\",i[i.STRONG=1]=\"STRONG\",i[i.WEAK=2]=\"WEAK\"})(L0||(L0={}));var U0;(function(i){i[i.UNKNOWN_ERROR=0]=\"UNKNOWN_ERROR\",i[i.BIOMETRICS_UNAVAILABLE=1]=\"BIOMETRICS_UNAVAILABLE\",i[i.USER_LOCKOUT=2]=\"USER_LOCKOUT\",i[i.BIOMETRICS_NOT_ENROLLED=3]=\"BIOMETRICS_NOT_ENROLLED\",i[i.USER_TEMPORARY_LOCKOUT=4]=\"USER_TEMPORARY_LOCKOUT\",i[i.AUTHENTICATION_FAILED=10]=\"AUTHENTICATION_FAILED\",i[i.APP_CANCEL=11]=\"APP_CANCEL\",i[i.INVALID_CONTEXT=12]=\"INVALID_CONTEXT\",i[i.NOT_INTERACTIVE=13]=\"NOT_INTERACTIVE\",i[i.PASSCODE_NOT_SET=14]=\"PASSCODE_NOT_SET\",i[i.SYSTEM_CANCEL=15]=\"SYSTEM_CANCEL\",i[i.USER_CANCEL=16]=\"USER_CANCEL\",i[i.USER_FALLBACK=17]=\"USER_FALLBACK\"})(U0||(U0={}));const I0=cs(\"NativeBiometric\",{web:()=>Fa(()=>import(\"./web-CyZe6ZkC.js\"),__vite__mapDeps([7,1,2,3,4])).then(i=>new i.NativeBiometricWeb)}),bN=()=>{const{checkIdentity:i,login:l,signup:o,sendOtp:u,verifyOtp:d,resetPin:h,isRememberedUser:g,rememberedMobile:N,pendingMobile:E,clearPendingSession:S}=ai(),[p,f]=x.useState(\"identity\"),[w,A]=x.useState(\"\"),[T,C]=x.useState(\"\"),[M,y]=x.useState(\"\"),[L,z]=x.useState(\"\"),[j,G]=x.useState(\"\"),[ee,Z]=x.useState(\"\"),[_,B]=x.useState(!1),[J,ne]=x.useState(!1),[F,oe]=x.useState(!1),[ge,O]=x.useState(!1),k=x.useRef(null),U=he.useCallback(async()=>{if(Gn.isNativePlatform())try{if(!(await I0.isAvailable()).isAvailable)return;O(!0),await I0.verifyIdentity({reason:\"Authenticate to access your private node\",title:\"Login to FinHub\",subtitle:\"Use biometrics to login\",description:\"Touch the sensor to verify identity\",negativeButtonText:\"Cancel\"}),await l(\"2255\",!0)||O(!1)}catch(le){console.error(\"Biometric error:\",le),O(!1),navigator.vibrate&&navigator.vibrate([50,50])}},[l]);x.useEffect(()=>{g&&N?(A(N),f(\"verify\"),U()):E&&(A(E),f(\"verify\"))},[g,N,E,U]);const Q=he.useCallback(async()=>{if(w.length!==10)return;const le=await i(w);f(le?\"verify\":\"create_name\"),C(\"\")},[w,i]);x.useEffect(()=>{p===\"identity\"&&w.length===10&&Q()},[w,p,Q]);const ae=he.useCallback(async()=>{p===\"verify\"?await l(T,J)?(navigator.vibrate&&navigator.vibrate([10]),!J&&!g&&oe(!0)):q():p===\"create_pin\"?T.length===4&&(await o(w,T,M,J)||q()):p===\"reset_pin\"&&(j===ee&&j.length===4&&await h(w,j)?(f(\"verify\"),C(\"\"),G(\"\"),Z(\"\")):q())},[p,l,T,J,o,w,M,h,j,ee,g]);x.useEffect(()=>{p===\"verify\"&&T.length===4&&ae()},[T,p,ae]),x.useEffect(()=>{k.current&&(k.current.focus(),k.current.type!==\"hidden\"&&k.current.select())},[p]);const v=async()=>{await u(w)&&f(\"otp_reset\")},D=async()=>{if(M.trim().length<2)return;await u(w)&&f(\"otp_verify\")},W=async()=>{await d(w,L)?f(p===\"otp_verify\"?\"create_pin\":\"reset_pin\"):q()},q=()=>{B(!0),navigator.vibrate&&navigator.vibrate([50,30,50]),setTimeout(()=>B(!1),500),z(\"\"),C(\"\"),Z(\"\")},Y=()=>p===\"identity\"?w.length!==10:p===\"verify\"?T.length!==4:p===\"otp_verify\"||p===\"otp_reset\"?L.length!==4:p===\"create_name\"?M.trim().length<2:p===\"create_pin\"?T.length!==4:p===\"reset_pin\"?j.length!==4||ee.length!==4:!1,V=()=>{S(),f(\"identity\"),A(\"\"),C(\"\")},te=le=>{le.key===\"Enter\"&&!Y()&&me()()},me=()=>{switch(p){case\"identity\":return Q;case\"otp_verify\":case\"otp_reset\":return W;case\"create_name\":return D;case\"verify\":case\"create_pin\":case\"reset_pin\":return ae;default:return()=>{}}},ie=()=>{switch(p){case\"identity\":return\"Continue\";case\"otp_verify\":case\"otp_reset\":return\"Verify OTP\";case\"create_name\":return\"Next\";case\"verify\":return\"Login\";case\"create_pin\":return\"Create Account\";case\"reset_pin\":return\"Reset PIN\";default:return\"Continue\"}};return n.jsxs(\"div\",{className:\"fixed inset-0 flex flex-col items-center justify-center overflow-hidden font-sans auth-mesh-gradient z-[9999999]\",children:[n.jsx(\"div\",{className:\"absolute inset-0 z-0 bg-[url('/mesh-grid.svg')] opacity-20\"}),n.jsxs(Le.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},className:\"absolute top-12 z-10 flex flex-col items-center gap-2\",children:[n.jsx(\"img\",{src:\"/images/logo-dark.png\",alt:\"FinHub\",className:\"h-12 w-auto\"}),n.jsx(\"span\",{className:\"text-xs font-medium text-white/40 tracking-widest uppercase\",children:\"v0.1 Beta\"})]}),n.jsxs(\"div\",{className:\"z-10 w-full max-w-sm px-8\",children:[n.jsxs(Bn,{mode:\"wait\",children:[p===\"identity\"&&n.jsxs(Le.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},exit:{x:-20,opacity:0},className:\"flex flex-col gap-6\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Welcome\"}),n.jsx(\"p\",{className:\"text-white/50 text-sm mt-2\",children:\"Enter your mobile number to continue\"})]}),n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-sky-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"Mobile Number\"}),n.jsx(\"input\",{ref:k,type:\"text\",inputMode:\"numeric\",maxLength:10,value:w,onChange:le=>A(le.target.value.replace(/\\D/g,\"\")),onKeyDown:te,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"999 999 9999\"})]}),n.jsxs(\"div\",{onClick:()=>{ne(!J),navigator.vibrate&&navigator.vibrate(5)},className:\"flex items-center gap-3 cursor-pointer self-center\",children:[n.jsx(\"div\",{className:`h-5 w-5 rounded-md border transition-all flex items-center justify-center ${J?\"bg-sky-500 border-sky-500\":\"border-white/20 bg-white/5\"}`,children:J&&n.jsx(Cu,{className:\"h-3.5 w-3.5 text-white\"})}),n.jsx(\"span\",{className:\"text-sm text-white/60 font-medium\",children:\"Remember me for 30 days\"})]})]},\"identity\"),p===\"create_name\"&&n.jsxs(Le.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},exit:{x:-20,opacity:0},className:\"flex flex-col gap-6\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Who are you?\"}),n.jsx(\"p\",{className:\"text-white/50 text-sm mt-2\",children:\"Personalize your node experience\"})]}),n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-sky-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"Full Name\"}),n.jsx(\"input\",{ref:k,type:\"text\",value:M,onChange:le=>y(le.target.value),onKeyDown:te,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"Joe Doe\"})]})]},\"create_name\"),(p===\"otp_verify\"||p===\"otp_reset\")&&n.jsxs(Le.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,x:_?[0,-10,10,-10,10,0]:0},exit:{scale:1.1,opacity:0},className:\"relative flex flex-col gap-8 items-center\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"div\",{className:\"mb-4 flex justify-center\",children:n.jsx(\"div\",{className:\"p-4 rounded-full bg-white/5 ring-1 ring-white/10\",children:n.jsx(ky,{className:\"h-8 w-8 text-sky-400\"})})}),n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Verify Node\"}),n.jsxs(\"p\",{className:\"text-white/40 text-sm mt-2\",children:[\"Enter the 4-digit code sent to\",n.jsx(\"br\",{}),n.jsx(\"span\",{className:\"text-white/70\",children:w})]})]}),n.jsxs(\"div\",{className:\"group relative flex flex-col items-center justify-center rounded-[32px] bg-white/5 p-10 ring-1 ring-white/10 backdrop-blur-md\",children:[n.jsx(\"div\",{className:\"flex gap-5\",children:[0,1,2,3].map(le=>n.jsx(Le.div,{animate:{scale:le<L.length?1.2:1,backgroundColor:le<L.length?\"#fff\":\"rgba(255,255,255,0.1)\"},transition:{duration:.1},className:\"h-3.5 w-3.5 rounded-full\"},le))}),n.jsx(\"input\",{ref:k,type:\"password\",inputMode:\"numeric\",maxLength:4,value:L,onChange:le=>z(le.target.value.replace(/\\D/g,\"\")),onKeyDown:te,className:\"absolute inset-0 opacity-0 cursor-default\",\"aria-label\":\"One-time Password\",placeholder:\"OTP\"})]})]},\"otp\"),p===\"reset_pin\"&&n.jsxs(Le.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,x:_?[0,-10,10,-10,10,0]:0},exit:{scale:1.1,opacity:0},className:\"relative flex flex-col gap-8 items-center\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"div\",{className:\"mb-4 flex justify-center\",children:n.jsx(\"div\",{className:\"p-4 rounded-full bg-white/5 ring-1 ring-white/10\",children:n.jsx(Ty,{className:\"h-8 w-8 text-amber-400\"})})}),n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Reset PIN\"}),n.jsx(\"p\",{className:\"text-white/40 text-sm mt-2\",children:\"Choose a new secure 4-digit access code\"})]}),n.jsxs(\"div\",{className:\"space-y-4 w-full\",children:[n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-amber-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"New PIN\"}),n.jsx(\"input\",{type:\"password\",inputMode:\"numeric\",maxLength:4,value:j,onChange:le=>G(le.target.value.replace(/\\D/g,\"\")),onKeyDown:te,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"****\"})]}),n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-amber-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"Confirm PIN\"}),n.jsx(\"input\",{type:\"password\",inputMode:\"numeric\",maxLength:4,value:ee,onChange:le=>Z(le.target.value.replace(/\\D/g,\"\")),onKeyDown:te,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"****\"})]})]})]},\"reset_pin\"),(p===\"verify\"||p===\"create_pin\")&&n.jsxs(Le.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,x:_?[0,-10,10,-10,10,0]:0},exit:{scale:1.1,opacity:0},className:\"relative flex flex-col gap-8 items-center\",children:[n.jsx(Le.div,{initial:{opacity:0},animate:{opacity:1},className:\"fixed inset-0 z-[-1] bg-black/80 backdrop-blur-xl\"}),n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(Le.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:\"mb-4 flex justify-center\",children:n.jsx(\"div\",{className:\"p-4 rounded-full bg-white/5 ring-1 ring-white/10\",children:n.jsx(sl,{className:\"h-8 w-8 text-sky-400\"})})}),n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:p===\"verify\"?\"Private Access\":\"Secure Setup\"}),n.jsx(\"p\",{className:\"text-white/40 text-sm mt-2\",children:p===\"verify\"?\"Encrypted PIN required\":\"Create your master PIN\"})]}),n.jsxs(\"div\",{className:\"group relative flex flex-col items-center justify-center rounded-[32px] bg-white/5 p-10 ring-1 ring-white/10 backdrop-blur-md\",children:[n.jsx(\"div\",{className:\"flex gap-5\",children:[0,1,2,3].map(le=>n.jsx(Le.div,{animate:{scale:le<T.length?1.2:1,backgroundColor:le<T.length?\"#fff\":\"rgba(255,255,255,0.1)\"},transition:{duration:.1},className:\"h-3.5 w-3.5 rounded-full\"},le))}),n.jsx(\"input\",{ref:k,type:\"password\",inputMode:\"numeric\",maxLength:4,value:T,onChange:le=>C(le.target.value.replace(/\\D/g,\"\")),onKeyDown:te,className:\"absolute inset-0 opacity-0 cursor-default\",\"aria-label\":\"Access PIN\",placeholder:\"PIN\"})]}),p===\"verify\"&&n.jsxs(\"div\",{className:\"flex flex-col items-center gap-4\",children:[n.jsxs(\"button\",{onClick:U,className:\"flex items-center gap-2 text-sky-400 text-sm font-medium\",children:[n.jsx(Hn,{className:\"h-5 w-5\"}),\" Use Biometrics\"]}),n.jsx(\"button\",{onClick:v,className:\"text-white/30 text-xs hover:text-white/50 transition-colors\",children:\"Forgot PIN? Reset via SMS\"}),n.jsx(\"button\",{onClick:V,className:\"text-sky-500/50 text-[10px] font-bold uppercase tracking-widest hover:text-sky-400/80 transition-colors mt-2\",children:\"Login with another account\"})]})]},\"pin\")]}),n.jsxs(Le.button,{onClick:me(),disabled:Y(),className:`mt-8 flex w-full items-center justify-center gap-2 rounded-[22px] py-4 text-base font-semibold text-white shadow-lg transition-all ${Y()?\"cursor-not-allowed bg-[#3A3A3C] opacity-50\":\"bg-gradient-to-r from-[#0A84FF] to-[#0047AB] shadow-sky-500/20 active:scale-95\"}`,whileTap:{scale:.98},children:[ie(),!Y()&&n.jsx(P0,{className:\"h-4 w-4\"})]})]}),n.jsx(Bn,{children:F&&n.jsx(Le.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"fixed inset-0 z-[60] flex items-end justify-center bg-black/60 p-6 backdrop-blur-sm\",children:n.jsxs(Le.div,{initial:{y:100},animate:{y:0},exit:{y:100},className:\"w-full max-w-sm rounded-[32px] bg-[#1C1C1E] p-8 text-center ring-1 ring-white/10 shadow-2xl\",children:[n.jsx(\"div\",{className:\"mx-auto mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-sky-500/20 text-sky-400\",children:n.jsx(Cu,{className:\"h-8 w-8\"})}),n.jsx(\"h3\",{className:\"text-xl font-bold text-white\",children:\"Speed up your next login?\"}),n.jsx(\"p\",{className:\"mt-2 text-sm text-white/50\",children:\"We can securely remember your ID so you can skip the mobile entry next time.\"}),n.jsxs(\"div\",{className:\"mt-8 flex flex-col gap-3\",children:[n.jsx(\"button\",{onClick:()=>{localStorage.setItem(\"finhub_remembered_mobile\",w),oe(!1)},className:\"w-full rounded-2xl bg-sky-500 py-4 font-semibold text-white active:scale-95 transition-all\",children:\"Enable Smart Login\"}),n.jsx(\"button\",{onClick:()=>oe(!1),className:\"w-full py-2 text-sm font-medium text-white/30 active:text-white/50\",children:\"Maybe later\"})]})]})})}),n.jsx(Bn,{children:ge&&n.jsx(Le.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"fixed inset-0 z-[70] flex flex-col items-center justify-center bg-black/40 backdrop-blur-md\",children:n.jsxs(Le.div,{initial:{scale:.8},animate:{scale:1},className:\"flex flex-col items-center\",children:[n.jsxs(\"div\",{className:\"relative mb-6\",children:[n.jsx(Le.div,{animate:{scale:[1,1.2,1],opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0},className:\"absolute inset-0 rounded-full bg-sky-500/30 blur-2xl\"}),n.jsx(\"div\",{className:\"relative flex h-24 w-24 items-center justify-center rounded-full bg-white/5 ring-1 ring-white/20\",children:n.jsx(Hn,{className:\"h-12 w-12 text-sky-400\"})})]}),n.jsx(\"h3\",{className:\"text-lg font-medium text-white\",children:\"Scanning Biometrics\"}),n.jsx(\"p\",{className:\"mt-2 text-sm text-white/40 italic\",children:\"Verifying your node identity...\"}),n.jsx(\"button\",{onClick:()=>O(!1),className:\"mt-12 text-xs font-medium uppercase tracking-widest text-white/20 hover:text-white/40\",children:\"Cancel & use PIN\"})]})})}),n.jsx(\"div\",{className:\"absolute bottom-8 text-center text-[10px] text-white/20\",children:n.jsx(\"p\",{children:\"Protected by FinHub Security. Data is localized and encrypted.\"})})]})},B0=({message:i=\"Secure Node Handshake\",subMessage:l=\"Re-encrypting local session...\"})=>n.jsxs(\"div\",{className:\"fixed inset-0 z-[100] flex flex-col items-center justify-center bg-[#000000] overflow-hidden\",children:[n.jsx(Le.div,{animate:{opacity:[.1,.2,.1],scale:[1,1.1,1]},transition:{duration:4,repeat:1/0,ease:\"easeInOut\"},className:\"absolute h-[500px] w-[500px] rounded-full bg-sky-500/10 blur-[120px]\"}),n.jsxs(\"div\",{className:\"relative flex flex-col items-center justify-center gap-12\",children:[n.jsxs(\"div\",{className:\"relative flex items-center justify-center\",children:[[0,1,2].map(o=>n.jsx(Le.div,{className:\"absolute rounded-full border border-sky-400/20\",initial:{width:80,height:80,opacity:0},animate:{width:[80,250],height:[80,250],opacity:[.4,0]},transition:{duration:3,repeat:1/0,delay:o*1,ease:\"easeOut\"}},o)),n.jsx(Le.div,{animate:{y:[0,-10,0]},transition:{duration:4,repeat:1/0,ease:\"easeInOut\"},className:\"relative z-10\",children:n.jsx(Le.div,{animate:{scale:[1,1.1,1],filter:[\"drop-shadow(0 0 15px rgba(56,189,248,0.3))\",\"drop-shadow(0 0 30px rgba(56,189,248,0.6))\",\"drop-shadow(0 0 15px rgba(56,189,248,0.3))\"]},transition:{duration:3,repeat:1/0,ease:\"easeInOut\"},className:\"relative flex h-32 w-32 items-center justify-center rounded-[32px] bg-gradient-to-br from-[#1C1C1E] to-[#000000] ring-1 ring-white/10 shadow-2xl backdrop-blur-xl\",children:n.jsx(\"img\",{src:\"/images/logo-icon.png\",alt:\"FinHub\",className:\"h-20 w-20 object-contain drop-shadow-lg\"})})})]}),n.jsx(Le.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:\"flex flex-col items-center gap-2\",children:n.jsxs(\"div\",{className:\"flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/5 ring-1 ring-white/5 backdrop-blur-md\",children:[n.jsx(sl,{className:\"h-3 w-3 text-sky-400\"}),n.jsx(\"span\",{className:\"text-[10px] font-bold tracking-[0.2em] uppercase text-white/40\",children:i})]})})]}),n.jsxs(\"div\",{className:\"absolute bottom-16 w-full max-w-[200px] px-6\",children:[n.jsx(\"div\",{className:\"h-[2px] w-full overflow-hidden rounded-full bg-white/10\",children:n.jsx(Le.div,{initial:{x:\"-100%\"},animate:{x:\"100%\"},transition:{duration:1.5,repeat:1/0,ease:\"easeInOut\"},className:\"h-full w-1/3 bg-gradient-to-r from-transparent via-sky-400 to-transparent\"})}),n.jsx(\"div\",{className:\"mt-3 text-center\",children:n.jsx(\"span\",{className:\"text-[10px] font-medium text-white/20 italic tracking-wider\",children:l})})]})]}),yN=({isOpen:i,onClose:l})=>n.jsx(Bn,{children:i&&n.jsxs(n.Fragment,{children:[n.jsx(Le.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:l,className:\"fixed inset-0 z-[200] bg-black/60 backdrop-blur-sm\"}),n.jsx(\"div\",{className:\"fixed inset-0 z-[201] flex items-center justify-center p-4 pointer-events-none\",children:n.jsxs(Le.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:\"spring\",damping:25,stiffness:300},className:\"w-full max-w-md bg-slate-900 border border-white/5 rounded-[32px] shadow-2xl overflow-hidden pointer-events-auto relative\",children:[n.jsx(\"div\",{className:\"absolute top-0 inset-x-0 h-32 bg-gradient-to-b from-indigo-500/10 to-transparent pointer-events-none\"}),n.jsx(\"button\",{onClick:l,className:\"absolute top-6 right-6 p-2 rounded-full bg-white/5 text-slate-400 hover:text-white hover:bg-white/10 transition-colors z-10\",\"aria-label\":\"Close about us popup\",children:n.jsx(il,{className:\"w-5 h-5\"})}),n.jsxs(\"div\",{className:\"p-8 pt-12 space-y-8 relative\",children:[n.jsxs(\"div\",{className:\"flex flex-col items-center text-center gap-3\",children:[n.jsx(\"div\",{className:\"w-16 h-16 rounded-[22px] bg-indigo-600 flex items-center justify-center shadow-lg shadow-indigo-500/20\",children:n.jsx(Dy,{className:\"w-8 h-8 text-white\"})}),n.jsxs(\"div\",{children:[n.jsx(\"h2\",{className:\"text-2xl font-black text-white tracking-tight uppercase\",children:\"FinHub Core\"}),n.jsx(\"p\",{className:\"text-[10px] font-bold text-indigo-400 uppercase tracking-[0.3em]\",children:\"Quantum Fabric v50.3\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"section\",{className:\"space-y-2\",children:[n.jsxs(\"h3\",{className:\"text-[10px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2\",children:[n.jsx(Hn,{className:\"w-3.5 h-3.5\"}),\"Our Vision\"]}),n.jsx(\"p\",{className:\"text-sm text-slate-300 leading-relaxed font-medium\",children:\"FinHub is designed to be the central nervous system of your personal economy. We merge neural-inspired data models with high-precision tracking to navigate complex wealth landscapes.\"})]}),n.jsxs(\"section\",{className:\"space-y-2\",children:[n.jsxs(\"h3\",{className:\"text-[10px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2\",children:[n.jsx(sl,{className:\"w-3.5 h-3.5\"}),\"Core Features\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[n.jsxs(\"div\",{className:\"bg-white/5 p-3 rounded-2xl border border-white/5\",children:[n.jsx(\"span\",{className:\"block text-[8px] font-black text-indigo-400 uppercase mb-1\",children:\"Localization\"}),n.jsx(\"span\",{className:\"text-[10px] text-slate-400 leading-tight\",children:\"Sovereign identity via node storage.\"})]}),n.jsxs(\"div\",{className:\"bg-white/5 p-3 rounded-2xl border border-white/5\",children:[n.jsx(\"span\",{className:\"block text-[8px] font-black text-indigo-400 uppercase mb-1\",children:\"Clamping Logic\"}),n.jsx(\"span\",{className:\"text-[10px] text-slate-400 leading-tight\",children:\"Mathematical stability in all simulations.\"})]})]})]}),n.jsxs(\"div\",{className:\"pt-6 border-t border-white/5 flex flex-col items-center gap-2\",children:[n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-600 uppercase tracking-widest\",children:\"Architect: Sijo Joseph\"}),n.jsx(\"p\",{className:\"text-[10px] font-black text-slate-800 uppercase tracking-[0.2em]\",children:\"© 2025 Neural FinHub Fabric\"})]})]})]})]})})]})}),vN=i=>{const{accounts:l,recurringTransactions:o,goals:u}=i,d=new Date,h=new Date;h.setDate(d.getDate()+7);const g=l.filter(B=>B.type!==\"credit_card\"),N=g.reduce((B,J)=>B+(J.balance||0),0),E=o.filter(B=>{const J=new Date(B.startDate);return B.type===\"expense\"&&J<=h&&J>=d}).reduce((B,J)=>B+J.amount,0),S=u.reduce((B,J)=>B+(J.currentAmount||0),0),p=N-E-S,f=l.filter(B=>B.type===\"credit_card\"),w=f.reduce((B,J)=>{const ne=J.creditLimit||0,F=J.balance||0,oe=Math.max(0,ne-F),ge=J.safeLimitPercentage||30,O=ne*ge/100;return B+Math.min(oe,O)},0),A=p+w;let T=-1/0,C=null,M=null;g.forEach(B=>{const J=o.filter(oe=>oe.accountId===B.id&&oe.type===\"expense\").reduce((oe,ge)=>{const O=new Date(ge.startDate);return O<=h&&O>=d?oe+ge.amount:oe},0),ne=B.min_buffer||0,F=B.balance-J-ne;F>T&&(T=F,C=B.id,M=B.name)});let y=\"SAFE\";const L=g.some(B=>{const J=o.filter(ne=>ne.accountId===B.id&&ne.type===\"expense\").reduce((ne,F)=>{const oe=new Date(F.startDate);return oe<=h&&oe>=d?ne+F.amount:ne},0);return B.balance<J});p<0||L?y=\"CRITICAL\":(p<N*.1||p<2e3)&&(y=\"TIGHT\");let z=null;const j=f.find(B=>B.balance/(B.creditLimit||1)>.7),G=g.find(B=>{const J=o.filter(ne=>ne.accountId===B.id&&ne.type===\"expense\").reduce((ne,F)=>{const oe=new Date(F.startDate);return oe<=h&&oe>=d?ne+F.amount:ne},0);return B.balance<J});G?z=`Payment risk: ${G.name} insufficient for upcoming dues.`:y===\"TIGHT\"?z=\"Low Safe-to-Spend: Consider postponing large purchases.\":j&&(z=`High credit utilization on ${j.name} (>70%).`);const ee=o.filter(B=>B.type===\"expense\").map(B=>{const J=new Date(B.startDate),ne=Math.ceil((J.getTime()-d.getTime())/(1e3*60*60*24));return{...B,daysRemaining:ne}}).filter(B=>B.daysRemaining>=0).sort((B,J)=>B.daysRemaining-J.daysRemaining),Z=ee.length>0?{title:ee[0].description||\"Upcoming Payment\",amount:ee[0].amount,daysRemaining:ee[0].daysRemaining}:null;let _=null;if(y===\"CRITICAL\"&&G&&C&&C!==G.id){const B=o.filter(J=>J.accountId===G.id&&J.type===\"expense\").reduce((J,ne)=>{const F=new Date(ne.startDate);return F<=h&&F>=d?J+ne.amount:J},0);_={fromAccountId:C,toAccountId:G.id,amount:B-G.balance}}return{liquidBalance:N,upcomingDues:E,reservedAmount:S,liquidSafeSpend:p,creditSafeSpend:w,safeToSpendGlobal:A,suggestedSpendAccountId:C,suggestedSpendAccountName:M,suggestedReason:\"Highest free buffer after upcoming payments\",status:y,topAlert:z,quickFix:_,nextDue:Z}},wN=i=>({accounts:i.accounts||[],recurringTransactions:i.recurringTransactions||[],goals:i.goals||[],liabilities:i.liabilities||[],settings:i.settings||{}}),Zi={calculateStressFactor(i,l){if(l===0)return .6;const o=i/l;return o<=.3?1:o<=.5?.9:o<=.7?.75:.6},calculateHabitShare(i,l){if(l===0)return .02;const o=i/l;return Math.min(Math.max(o,.02),.4)},calculateSSR(i,l,o,u){const d=l-o-u,h=new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate(),g=h-new Date().getDate()+1,N=d*(g/h);return N<=0?.6:Math.min(Math.max(i/N,.6),1)},calculateBaseLimit(i,l,o){return i*l*o},calculateProjection(i,l,o){return l===0?i:i/l*o},isDiscretionary(i){const l=[\"entertainment\",\"dining\",\"out\",\"shopping\",\"leisure\",\"hobby\",\"gift\",\"travel\",\"dress\",\"luxury\",\"movie\"],o=i.toLowerCase();return l.some(u=>o.includes(u))},calculateGap(i,l){return i-l}};function jN({className:i,value:l,indicatorClassName:o,...u}){return n.jsx(My,{\"data-slot\":\"progress\",className:De(\"bg-primary/20 relative h-2 w-full overflow-hidden rounded-full\",i),...u,children:n.jsx(_y,{\"data-slot\":\"progress-indicator\",className:De(\"bg-primary h-full w-full flex-1 transition-all\",o),style:{transform:`translateX(-${100-(l||0)}%)`}})})}const NN=()=>{const{expenses:i,incomes:l,liabilities:o,goals:u,accounts:d,emergencyFundAmount:h,currency:g}=ai(),{availableToSpend:N}=Gp({accounts:d,goals:u,liabilities:o,expenses:i,emergencyFundAmount:h}),E=x.useMemo(()=>{const f=new Date,w=f.getMonth(),A=f.getFullYear(),C=(ne=>new Date(A,w-ne,1))(2),y=l.filter(ne=>new Date(ne.date)>=C).reduce((ne,F)=>ne+F.amount,0)/3,L=o.reduce((ne,F)=>ne+(F.emiAmount||0),0),z=u.filter(ne=>ne.type===\"stability\"||ne.type===\"protection\"||ne.name.toLowerCase().includes(\"emergency\")).reduce((ne,F)=>ne+(F.monthly_contribution||0),0),j=z>0?z:.1*y,G=y-L-j,ee=Zi.calculateStressFactor(L,y),Z=Zi.calculateSSR(N,y,L,j),_=i.filter(ne=>new Date(ne.date)>=C),B=_.reduce((ne,F)=>ne+F.amount,0)/3,J={};return Tu.forEach(ne=>{const oe=_.filter(U=>U.category===ne.value).reduce((U,Q)=>U+Q.amount,0)/3,ge=Zi.calculateHabitShare(oe,B),O=Zi.calculateBaseLimit(G,ge,ee),k=Zi.isDiscretionary(ne.value);J[ne.value]=k?O*Math.min(Math.max(Z,.6),1):O}),{limits:J}},[i,l,o,u,N]),{limits:S}=E,p=f=>new Intl.NumberFormat(\"en-IN\",{style:\"currency\",currency:g||\"INR\",maximumFractionDigits:0}).format(f);return n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"header\",{className:\"px-1\",children:[n.jsx(\"h2\",{className:\"text-2xl font-black text-white tracking-tight\",children:\"Financial Guardrails\"}),n.jsx(\"p\",{className:\"text-slate-500 text-[10px] font-bold uppercase tracking-[0.2em] mt-1\",children:\"Hybrid Budget Engine v1.1\"})]}),n.jsx(\"div\",{className:\"grid gap-4\",children:Tu.map(f=>{const w=S[f.value]||0,A=i.filter(C=>{const M=new Date(C.date);return C.category===f.value&&M.getMonth()===new Date().getMonth()&&M.getFullYear()===new Date().getFullYear()}).reduce((C,M)=>C+M.amount,0),T=w>0?A/w*100:0;return n.jsxs(\"div\",{className:\"rounded-3xl border border-white/5 bg-white/5 p-5 transition-all hover:bg-white/10\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-start mb-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-xl\",role:\"img\",\"aria-label\":f.value,children:f.emoji}),n.jsxs(\"div\",{children:[n.jsx(\"h3\",{className:\"text-sm font-bold text-white\",children:f.value}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 uppercase tracking-widest mt-0.5\",children:\"Category Limit\"})]})]}),n.jsxs(\"div\",{className:\"text-right\",children:[n.jsx(\"p\",{className:\"text-sm font-black text-white\",children:p(w)}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 uppercase tracking-widest mt-0.5\",children:\"Monthly\"})]})]}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[10px] font-bold uppercase tracking-tighter\",children:[n.jsxs(\"span\",{className:\"text-slate-400\",children:[\"Spent: \",p(A)]}),n.jsxs(\"span\",{className:De(T>90?\"text-red-400\":\"text-emerald-400\"),children:[Math.round(T),\"%\"]})]}),n.jsx(jN,{value:T,className:\"h-1.5\",indicatorClassName:De(T>100?\"bg-red-500 shadow-[0_0_8px_rgba(239,68,68,0.5)]\":T>80?\"bg-orange-500 shadow-[0_0_8px_rgba(249,115,22,0.5)]\":\"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]\")})]})]},f.value)})})]})},SN=x.lazy(()=>Fa(()=>import(\"./Dashboard-IVoRIJ8c.js\"),__vite__mapDeps([8,1,2,9,10,4,3])).then(i=>({default:i.Dashboard}))),CN=x.lazy(()=>Fa(()=>import(\"./TransactionList-rKWzJlT2.js\"),__vite__mapDeps([11,1,2,10,3,4])).then(i=>({default:i.TransactionList}))),EN=x.lazy(()=>Fa(()=>import(\"./GoalsTracker-D6OcmKwC.js\"),__vite__mapDeps([12,1,2,3,4])).then(i=>({default:i.GoalsTracker}))),AN=x.lazy(()=>Fa(()=>import(\"./EmergencyFundsTab-gXH3z62T.js\"),__vite__mapDeps([13,1,2,3,4])).then(i=>({default:i.EmergencyFundsTab}))),kN=x.lazy(()=>Fa(()=>import(\"./InvestmentsTab-B4180PLB.js\"),__vite__mapDeps([14,1,2,9,10,4,3])).then(i=>({default:i.InvestmentsTab})));function TN(){const{settings:i,expenses:l,incomes:o,debts:u,goals:d,accounts:h,liabilities:g,notifications:N,emergencyFundAmount:E,investments:S,isLoading:p,refreshData:f,updateSettings:w,userId:A,createExpense:T,updateExpense:C,deleteExpense:M,createIncome:y,updateIncome:L,deleteIncome:z,createDebt:j,updateDebt:G,deleteDebt:ee,settleDebt:Z,createGoal:_,updateGoal:B,deleteGoal:J,createAccount:ne,updateAccount:F,deleteAccount:oe,setEmergencyFundAmount:ge,setNotifications:O,isFundAllocationOpen:k,fundAllocationType:U,closeFundAllocation:Q,performFundAllocation:ae,transferFunds:v,authStatus:D,isOffline:W,authMessage:q,backfillRequest:Y,setBackfillRequest:V,executeBackfill:te,createRecurring:me,recurringTransactions:ie}=ai(),[le,je]=x.useState(\"dashboard\"),[Ae,pe]=x.useState(!1),[ve,xe]=x.useState(\"expense\"),[Ke,We]=x.useState(null),[Ue,it]=x.useState(!1),[Ve,ke]=x.useState(!1),[Ft,fe]=x.useState(!1),[Se,ze]=x.useState(null),[lt,mt]=x.useState(!1),[_a,ga]=x.useState(!1),[Ra,Kt]=x.useState(!1),[Oa,ea]=x.useState(!1),[zt]=x.useState(null);hN(()=>ke(!0),()=>fe(!0)),x.useEffect(()=>{if(Gn.isNativePlatform()){(async()=>{try{(await Cr.checkPermissions()).display!==\"granted\"&&await Cr.requestPermissions()}catch(Ee){console.error(\"Error checking notification permissions:\",Ee)}})();const Fe=Cr.addListener(\"localNotificationActionPerformed\",Ee=>{const{notification:rt}=Ee,Ct=rt.extra;console.log(\"Native notification clicked:\",rt),Ct&&(Ct.achievementId?(ze(Ct.achievementId),mt(!0)):Ct.view&&je(Ct.view))});return()=>{Fe.then(Ee=>Ee.remove())}}},[]),x.useEffect(()=>{i.theme===\"dark\"?document.documentElement.classList.add(\"dark\"):document.documentElement.classList.remove(\"dark\")},[i.theme]);const{openFundAllocation:Ht}=ai();x.useEffect(()=>{window.showFundAllocation=Ht},[Ht]);const{currentMonthExpenses:ta}=x.useMemo(()=>{const de=new Date,Fe=de.getMonth(),Ee=de.getFullYear();return{currentMonthExpenses:l.filter(et=>!et.isInternalTransfer).filter(et=>{const bt=new Date(et.date);return bt.getMonth()===Fe&&bt.getFullYear()===Ee})}},[l]),xt=x.useMemo(()=>{const de=o.reduce((Zt,ht)=>Zt+ht.amount,0),Fe=l.reduce((Zt,ht)=>Zt+ht.amount,0),Ee=u.reduce((Zt,ht)=>Zt+ht.amount,0);if(de===0&&Ee===0)return{score:50,savingsRate:0,debtRatio:0,spendingRatio:0};const rt=[...o,...l,...u];let Ct=1;if(rt.length>0){const Zt=rt.map(Ur=>new Date(Ur.date).getTime()),ht=new Date(Math.min(...Zt)),pn=Math.abs(new Date().getTime()-ht.getTime()),si=Math.ceil(pn/(1e3*60*60*24*30));Ct=Math.max(1,si)}const bt=de/Ct*12,Tt=de>0?(de-Fe)/de:0,yt=de>0?Fe/de:0,Jt=bt>0?Ee/bt:Ee>0?1/0:0;let jt=50;return Tt>=.4?jt+=30:Tt>=.2?jt+=20:Tt>=.1?jt+=10:Tt>0?jt+=5:jt-=20,Jt===0?jt+=20:Jt<=.3?jt+=10:Jt<=.6?jt-=10:Jt<=1?jt-=30:jt-=50,yt<=.5?jt+=20:yt<=.7?jt+=10:yt<=.9?jt+=0:jt-=10,{score:Math.max(0,Math.min(100,Math.round(jt))),savingsRate:Tt,debtRatio:Jt,spendingRatio:yt}},[o,l,u]),ni=x.useMemo(()=>({totalIncome:o.reduce((de,Fe)=>de+Fe.amount,0),totalExpenses:l.reduce((de,Fe)=>de+Fe.amount,0),activeDebts:u.filter(de=>de.status===\"pending\").length,goalsCount:d.length,recentTransactions:[...l.slice(0,5).map(de=>({type:\"expense\",...de})),...o.slice(0,5).map(de=>({type:\"income\",...de}))],expenses:l,incomes:o,accounts:h,investments:S,liabilities:g,goals:d,debts:u,currentMonthExpenses:ta,savingsRate:xt.savingsRate,healthScore:xt.score,brainSummary:Ij({investments:S,accounts:h,healthScore:xt.score,savingsRate:xt.savingsRate,totalIncome:o.reduce((de,Fe)=>de+Fe.amount,0),totalExpenses:l.reduce((de,Fe)=>de+Fe.amount,0),activeDebts:u.filter(de=>de.status===\"pending\").length,goalsCount:d.length},i.currency,le)}),[o,l,u,d,xt.savingsRate,xt.score,h,S,g,ta,i.currency,le]),Fn=x.useMemo(()=>{const de=wN({accounts:h,recurringTransactions:ie,goals:d,liabilities:g,settings:i});return vN(de)},[h,ie,d,g,i]);if(p)return n.jsx(B0,{});Gn.isNativePlatform()&&Ov.hide().catch(de=>console.error(\"Splash hide error:\",de));const xa=async()=>{await f()},mn=de=>{xe(de),We(null),pe(!0)},hn=de=>{xe(\"expense\"),We(de),pe(!0)},Ya=de=>{xe(\"income\"),We(de),pe(!0)},ba=de=>{xe(\"debt\"),We(de),pe(!0)},Me=de=>{Ke?ve===\"expense\"?C(Ke.id,de):ve===\"income\"?L(Ke.id,de):ve===\"debt\"&&G(Ke.id,de):ve===\"expense\"?(T(de),de.roundUpAmount&&dt(d.length>0?d[0].id:\"general\",\"goal\",void 0,de.roundUpAmount,de.accountId)):ve===\"income\"?y(de):ve===\"debt\"&&j(de)},dt=async(de,Fe,Ee,rt,Ct)=>{if(!rt&&!zt)return;const et=rt||(zt?zt.roundedAmount-zt.expenseAmount:0),bt=Ct||(zt?zt.accountId:\"\"),Tt=h.find(yt=>yt.id===bt);if(Tt&&await F(Tt.id,{balance:Tt.balance-et}),Fe===\"goal\"){const yt=d.find(Jt=>Jt.id===de);if(yt)await B(de,{currentAmount:yt.currentAmount+et}),ce.success(`Saved ${dn[i.currency]}${et} to ${yt.name}!`);else{const Jt=d.find(jt=>jt.name===\"General Savings\");if(Jt)await B(Jt.id,{currentAmount:Jt.currentAmount+et}),ce.success(`Saved ${dn[i.currency]}${et} to General Savings!`);else{const jt={name:\"General Savings\",targetAmount:1e4,currentAmount:et,targetDate:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString(),emoji:\"🐷\"};_(jt),ce.success(`Created \"General Savings\" and saved ${dn[i.currency]}${et}!`)}}}else ge(yt=>yt+et),ce.success(`Saved ${dn[i.currency]}${et} to Emergency Fund!`);ea(!1),Or({particleCount:50,spread:60,origin:{y:.7}})},kt=de=>{const Fe={today:1,week:7,month:30},Ee=new Date;Ee.setDate(Ee.getDate()+Fe[de]),localStorage.setItem(\"roundUpMutedUntil\",Ee.toISOString()),ea(!1),ce.info(`Round ups muted for ${de===\"today\"?\"today\":de===\"week\"?\"a week\":\"a month\"}`)};return n.jsxs(n.Fragment,{children:[n.jsx(Bn,{mode:\"wait\",children:(D===\"guest\"||D===\"authenticating\")&&n.jsx(Le.div,{className:\"fixed inset-0 z-0\",exit:{opacity:0,scale:.95,filter:\"blur(20px)\"},transition:{duration:.8},children:n.jsx(bN,{})},\"login-container\")}),n.jsx(Bn,{children:D===\"authenticating\"&&n.jsx(Le.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4},className:\"fixed inset-0 z-50\",children:n.jsx(B0,{message:q?.message,subMessage:q?.subMessage})},\"loading-sprite\")}),n.jsx(Bn,{mode:\"wait\",children:D===\"authenticated\"&&n.jsx(Le.div,{className:\"relative z-10\",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.8,ease:[.16,1,.3,1]},children:n.jsxs(\"div\",{className:\"min-h-screen bg-transparent text-foreground transition-colors font-sans\",children:[n.jsx(dj,{activeTab:le,onTabChange:de=>je(de),notificationCount:N.filter(de=>!de.read).length,onNotificationClick:()=>fe(!Ft),onSettingsClick:()=>ke(!Ve),forceHide:lt,renderFab:de=>n.jsx(pN,{isVisible:de&&!Ve&&!Ft&&!lt,onOpenAI:()=>it(!0),onAddTransaction:mn,onMigrate:()=>ga(!0)}),children:n.jsx(fN,{onRefresh:xa,children:n.jsx(xN,{children:n.jsxs(x.Suspense,{fallback:n.jsxs(\"div\",{className:\"space-y-6 pt-12\",children:[n.jsx(mN,{}),n.jsx(\"p\",{className:\"text-center text-slate-500 text-sm\",children:\"Loading Component...\"})]}),children:[le===\"dashboard\"&&n.jsx(\"div\",{className:\"space-y-6\",children:n.jsx(SN,{expenses:l,incomes:o,currency:i.currency,goals:d,liabilities:g,debts:u,investments:S,accounts:h,emergencyFundAmount:E,healthScore:xt.score,userName:i.name,isOffline:W,isSampleMode:i.isSampleMode,onNavigate:de=>je(de),onAddTransaction:de=>{xe(de),pe(!0)}})}),le===\"budgets\"&&n.jsx(\"div\",{className:\"px-4 py-6\",children:n.jsx(NN,{})}),le===\"transactions\"&&n.jsx(CN,{expenses:l,incomes:o,debts:u,accounts:h,currency:i.currency,onEditExpense:hn,onDeleteExpense:M,onEditIncome:Ya,onDeleteIncome:z,onEditDebt:ba,onDeleteDebt:ee,onSettleDebt:Z}),le===\"goals\"&&n.jsx(EN,{goals:d,currency:i.currency,accounts:h,expenses:l,incomes:o,onCreateGoal:_,onUpdateGoal:B,onDeleteGoal:J,onDeductFromAccount:async(de,Fe)=>{const Ee=h.find(rt=>rt.id===de);Ee&&await F(de,{balance:Ee.balance-Fe})}}),le===\"accounts\"&&n.jsx(uN,{accounts:h,currency:i.currency,onCreateAccount:ne,onUpdateAccount:F,onDeleteAccount:oe}),le===\"investments\"&&n.jsx(kN,{}),le===\"emergency\"&&n.jsx(AN,{currency:i.currency,userId:A,expenses:l,incomes:o,accounts:h,onEmergencyFundUpdate:de=>ge(de)}),le===\"recurring\"&&n.jsx(oj,{}),le===\"more\"&&n.jsx(nN,{onNavigate:de=>je(de),onOpenSettings:()=>ke(!0),onOpenNotifications:()=>fe(!0),emergencyFundAmount:E,bankAccountsCount:h.filter(de=>de.type===\"bank\").length,cardsCount:h.filter(de=>de.type===\"credit_card\").length,currency:i.currency,onOpenAbout:()=>Kt(!0)})]})})})}),Ae&&n.jsx(gj,{isOpen:Ae,onClose:()=>{pe(!1),We(null)},type:ve,onSubmit:Me,initialData:Ke,accounts:h,liabilities:g,currency:i.currency,roundUpEnabled:i.roundUpEnabled,defaultAccountId:Fn.suggestedSpendAccountId||void 0}),zt&&n.jsx(xj,{isOpen:Oa,onClose:()=>ea(!1),onConfirm:dt,expenseAmount:zt.expenseAmount,roundedAmount:zt.roundedAmount,currency:i.currency,goals:d,onMute:kt}),n.jsx(gN,{isOpen:Ue,onClose:()=>it(!1),context:ni,settings:i,isOffline:W}),n.jsx(aN,{isOpen:Ve,onClose:()=>ke(!1),settings:i,onUpdateSettings:w,onAchievementClick:de=>{ze(de),mt(!0),ke(!1)},onOpenAbout:()=>Kt(!0)}),n.jsx(lN,{isOpen:Ft,onClose:()=>fe(!1),notifications:N,onNotificationClick:async de=>{if(de.achievementId&&(ze(de.achievementId),mt(!0)),de.action&&de.action.type===\"verify_subscription\"&&de.action.status===\"completed\"){const{description:Fe,amount:Ee,category:rt,accountId:Ct,date:et}=de.action.payload;try{await me({type:\"expense\",description:Fe,amount:Ee,category:rt,accountId:Ct,frequency:\"monthly\",startDate:et||new Date().toISOString().split(\"T\")[0],tags:[\"auto-verified\",\"subscription\"]}),ce.success(`Verified: ${Fe} is now a recurring subscription.`),O(bt=>bt.map(Tt=>Tt.id===de.id?{...Tt,read:!0}:Tt))}catch{ce.error(\"Failed to automate subscription.\")}}else de.action&&de.action.status===\"dismissed\"&&(ce.info(\"Marked as one-time purchase.\"),O(Fe=>Fe.map(Ee=>Ee.id===de.id?{...Ee,read:!0}:Ee)));de.action||(de.category===\"reminders\"?je(\"recurring\"):de.category===\"transactions\"&&je(\"transactions\"),fe(!1))},onMarkAsRead:de=>{O(Fe=>Fe.map(Ee=>Ee.id===de?{...Ee,read:!0}:Ee))},onClearRead:()=>{O(de=>de.filter(Fe=>!Fe.read)),ce.success(\"Read notifications cleared\")}}),n.jsx(rN,{isOpen:lt,onClose:()=>{mt(!1),ze(null)},achievementId:Se}),n.jsx(oN,{isOpen:k,onClose:Q,accounts:h,goals:d,currency:i.currency,destinationType:U,emergencyFund:{currentAmount:E,targetAmount:1e5},onAllocate:ae,liabilities:g,expenses:l}),n.jsx(dN,{isOpen:_a,onClose:()=>ga(!1),accounts:h,currency:i.currency,onTransfer:v}),n.jsx(yN,{isOpen:Ra,onClose:()=>Kt(!1)})]})},\"main-app\")}),Y&&n.jsx(Rp,{open:!0,onOpenChange:()=>V(null),children:n.jsxs(Op,{className:\"bg-slate-900/95 border-white/10 text-slate-100 z-[99999999] backdrop-blur-xl\",children:[n.jsxs(zp,{children:[n.jsx(Up,{className:\"text-white text-xl font-bold font-sans\",children:\"Backfill Configuration Required\"}),n.jsxs(Ip,{className:\"text-slate-400 text-base\",children:[\"System detected \",n.jsxs(\"span\",{className:\"text-emerald-400 font-bold\",children:[Y.count,\" missing entries\"]}),\" in the transaction history\",Y.dates?.length>0&&n.jsxs(n.Fragment,{children:[\" \",\"from \",n.jsx(\"span\",{className:\"text-white font-medium\",children:Y.dates[0]?.toLocaleDateString(\"en-IN\",{day:\"numeric\",month:\"short\",year:\"numeric\"})}),\" \",\"to \",n.jsx(\"span\",{className:\"text-white font-medium\",children:Y.dates[Y.dates.length-1]?.toLocaleDateString(\"en-IN\",{day:\"numeric\",month:\"short\",year:\"numeric\"})})]}),\".\",n.jsx(\"br\",{}),n.jsx(\"br\",{}),\"Would you like to auto-populate the ledger for this period?\"]})]}),n.jsxs(Lp,{className:\"mt-4\",children:[n.jsx(qp,{onClick:()=>V(null),className:\"bg-white/5 border-white/5 text-slate-400 hover:text-white hover:bg-white/10 rounded-xl h-12 uppercase tracking-wider text-xs font-bold\",children:\"Cancel\"}),n.jsx(Bp,{onClick:()=>{te(),V(null)},className:\"bg-indigo-600 hover:bg-indigo-500 text-white border-0 font-bold rounded-xl h-12 px-8 shadow-lg shadow-indigo-600/20\",children:\"Generate Ledger\"})]})]})}),n.jsx(d1,{position:\"bottom-center\",richColors:!0,theme:\"dark\",toastOptions:{style:{background:\"#1C1C1E\",border:\"1px solid rgba(255, 255, 255, 0.1)\",color:\"#FFFFFF\",borderRadius:\"20px\",backdropFilter:\"none\",zIndex:9999999}},className:\"!z-[9999999]\"})]})}function DN({children:i,...l}){return n.jsx(jj,{...l,children:i})}function MN(i={}){const{immediate:l=!1,onNeedRefresh:o,onOfflineReady:u,onRegistered:d,onRegisteredSW:h,onRegisterError:g}=i;let N,E;const S=async(f=!0)=>{await E};async function p(){if(\"serviceWorker\"in navigator){if(N=await Fa(async()=>{const{Workbox:f}=await import(\"./workbox-window.prod.es5-BIl4cyR9.js\");return{Workbox:f}},[]).then(({Workbox:f})=>new f(\"/sw.js\",{scope:\"/\",type:\"classic\"})).catch(f=>{g?.(f)}),!N)return;N.addEventListener(\"activated\",f=>{(f.isUpdate||f.isExternal)&&window.location.reload()}),N.addEventListener(\"installed\",f=>{f.isUpdate||u?.()}),N.register({immediate:l}).then(f=>{h?h(\"/sw.js\",f):d?.(f)}).catch(f=>{g?.(f)})}}return E=p(),S}MN({immediate:!0});wv.createRoot(document.getElementById(\"root\")).render(n.jsx(H1,{children:n.jsx(DN,{attribute:\"class\",defaultTheme:\"dark\",forcedTheme:\"dark\",children:n.jsx(TN,{})})}));export{Bn as A,Re as B,Ki as C,us as D,Tu as E,C0 as F,LN as G,z0 as H,wt as I,L0 as J,ye as L,Qu as M,Ha as N,Ut as S,Ru as T,Uu as W,at as a,u0 as b,Zi as c,hu as d,pu as e,Ne as f,gu as g,Fu as h,mj as i,fp as j,Ot as k,De as l,Le as m,Iu as n,ds as o,fs as p,ms as q,hs as r,Bt as s,ce as t,Gp as u,It as v,qt as w,qe as x,vu as y,ai as z};"
      },
      {
        "file": "android\\app\\src\\main\\assets\\public\\assets\\index-i0Euu4OB.js",
        "line": 59,
        "snippet": "`.trim();return await Hp(h,g,S,u)},eN=async(i,l)=>await Hp(i,l,\"Respond with only the word 'OK' to verify connectivity.\",\"ASSISTANT\"),tN=i=>{if(i.aiProvider&&al(i.aiProvider,i))return i.aiProvider;const l=[\"openai\",\"anthropic\",\"gemini\",\"deepseek\",\"perplexity\"];for(const o of l)if(al(o,i))return o;return null},_0={BASE_URL:\"/\",DEV:!1,MODE:\"production\",PROD:!0,SSR:!1},aN=({isOpen:i,onClose:l,settings:o,onUpdateSettings:u,onAchievementClick:d,onOpenAbout:h})=>{const[g,N]=x.useState(o.name||\"\"),[E,S]=x.useState(o.photoURL||\"\"),[p,f]=x.useState(!1),[w,A]=x.useState(null),[T,C]=x.useState({}),[M,y]=x.useState(!1),{logout:L,scheduleAccountDeletion:z,migrateSubscriptions:j,cleanupDuplicates:G,clearAllData:ee}=ai(),[Z,_]=x.useState(!1),B=async()=>{y(!0);try{await j()}catch(fe){console.error(\"Migration failed:\",fe),ce.error(\"Migration failed\")}finally{y(!1)}},[J,ne]=x.useState(\"USD\"),[F,oe]=x.useState(\"100\"),[ge,O]=x.useState(\"100000\"),[k,U]=x.useState(\"10\"),[Q,ae]=x.useState(\"6\"),[v,D]=x.useState(!1),W=async()=>{const Se={USD:\"US\",INR:\"IN\",GBP:\"GB\",EUR:\"EMU\",AED:\"AE\",SAR:\"SA\"}[o.currency]||\"US\";D(!0);try{const lt=await(await fetch(`https://api.worldbank.org/v2/country/${Se}/indicator/FP.CPI.TOTL.ZG?format=json&per_page=1`)).json();if(lt&&lt[1]&&lt[1][0]&&lt[1][0].value){const mt=lt[1][0].value;ae(mt.toFixed(2)),ce.success(`Inflation rate synced for ${o.currency}`)}}catch(ze){console.error(\"Inflation sync failed:\",ze),ce.error(\"Failed to sync inflation rate.\")}finally{D(!1)}},q=Array.from({length:(parseInt(k)||0)+1},(fe,Se)=>{const ze=parseFloat(ge)||0,lt=parseFloat(Q)||0,mt=ze*Math.pow(1+lt/100,Se),_a=ze/Math.pow(1+lt/100,Se);return{year:Se,futureCost:Math.round(mt),purchasingPower:Math.round(_a)}}),Y=[\"INR\",\"USD\",\"EUR\",\"GBP\",\"AED\",\"SAR\"],V=o.currency;x.useEffect(()=>{N(o.name||\"\"),S(o.photoURL||\"\")},[o]),x.useEffect(()=>{i&&te()},[i,J]);const te=async()=>{try{const Se=await(await fetch(`https://api.exchangerate-api.com/v4/latest/${J}`)).json();C(Se.rates||{}),F&&me(F,Se.rates)}catch(fe){console.error(\"Error loading exchange rates:\",fe)}},me=(fe,Se)=>{const ze=parseFloat(fe);if(!isNaN(ze)&&ze>0){const mt=(Se||T)[V]||1;A(ze*mt)}else A(null)},ie=fe=>{oe(fe),me(fe)},{setTheme:le}=wj();x.useEffect(()=>{o.theme!==\"dark\"&&(le(\"dark\"),u({theme:\"dark\"}))},[]);const je=()=>{u({name:g,photoURL:E}),f(!1)},Ae=fe=>{const Se=fe.target.files?.[0];if(Se){const ze=new FileReader;ze.onloadend=()=>{S(ze.result)},ze.readAsDataURL(Se)}},pe=U1(),ve=new Set(o.unlockedAchievements),xe=o.aiProvider||\"openai\",Ke=[{id:\"openai\",label:\"OpenAI\",placeholder:\"sk-...\"},{id:\"anthropic\",label:\"Anthropic\",placeholder:\"sk-ant-...\"},{id:\"gemini\",label:\"Gemini\",placeholder:\"AIza...\"},{id:\"deepseek\",label:\"Deepseek\",placeholder:\"sk-...\"},{id:\"perplexity\",label:\"Perplexity\",placeholder:\"pplx-...\"}],[We,Ue]=x.useState(!1),[it,Ve]=x.useState(null),ke=x.useCallback((fe,Se)=>{u({[fe]:Se})},[u]),Ft=async()=>{const fe=al(xe,o);if(!fe){ce.error(\"No API key found in Settings or System Environment\");return}Ue(!0),Ve(null);try{const Se=await eN(xe,fe);Se.error?(Ve({success:!1,message:Se.error}),ce.error(`Connection failed: ${Se.error}`)):(Ve({success:!0,message:\"Neural link established.\"}),ce.success(\"Connection successful!\"))}catch(Se){const ze=Se.message||\"Unknown error\";console.error(\"Settings save error:\",Se),ce.error(`${at.common.status.error}: ${ze}`)}finally{Ue(!1)}};return n.jsx(kp,{open:i,onOpenChange:l,children:n.jsxs(Dp,{side:\"left\",className:\"w-full sm:max-w-lg overflow-y-auto px-0 bg-slate-950 border-white/5 text-slate-100 h-dvh\",children:[n.jsx(Mp,{className:\"sr-only\",children:\"Settings\"}),n.jsx(_p,{className:\"sr-only\",children:\"Customize your FinHub core experience.\"}),n.jsxs(\"div\",{className:\"space-y-12 animate-in fade-in slide-in-from-left-4 duration-500 px-8 pt-12 pb-10 text-white relative\",children:[n.jsx(\"div\",{className:\"absolute top-4 right-4 z-20\",children:n.jsx(Re,{variant:\"ghost\",size:\"icon\",onClick:l,className:\"w-10 h-10 rounded-full bg-white/5 text-slate-400 hover:text-white hover:bg-white/10\",children:n.jsx(il,{className:\"w-5 h-5\"})})}),n.jsxs(\"div\",{className:\"flex flex-col gap-2\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-1.5 h-8 bg-indigo-500 rounded-full shadow-[0_0_15px_rgba(99,102,241,0.5)]\"}),n.jsx(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tight leading-none text-white\",children:\"System Config\"})]}),n.jsx(\"p\",{className:\"text-slate-500 font-bold ml-4 text-sm\",children:\"Customize your FinHub core experience.\"})]}),n.jsxs(\"div\",{className:\"space-y-10\",children:[n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"h3\",{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Su,{className:\"w-3.5 h-3.5\"}),\"User Identity\"]}),n.jsx(Re,{variant:\"ghost\",size:\"sm\",onClick:()=>f(!p),className:\"text-[10px] font-black uppercase tracking-widest text-indigo-400 hover:text-indigo-300 hover:bg-white/5\",children:p?\"Abort\":\"Refine\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-8 bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-indigo-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsxs(\"div\",{className:\"relative\",children:[E?n.jsx(\"img\",{src:E,alt:\"Profile\",className:\"w-24 h-24 rounded-full object-cover border-4 border-slate-800 shadow-2xl\"}):n.jsx(\"div\",{className:\"w-24 h-24 bg-gradient-to-br from-indigo-600 to-purple-700 rounded-full flex items-center justify-center shadow-2xl\",children:n.jsx(Su,{className:\"w-12 h-12 text-white/90\"})}),p&&n.jsxs(\"label\",{className:\"absolute bottom-0 right-0 w-9 h-9 bg-indigo-600 rounded-full flex items-center justify-center cursor-pointer hover:bg-indigo-500 shadow-lg border-4 border-slate-900 transition-transform active:scale-90\",children:[n.jsx(ry,{className:\"w-4 h-4 text-white\"}),n.jsx(\"input\",{type:\"file\",accept:\"image/*\",className:\"hidden\",onChange:Ae,\"aria-label\":\"Upload profile picture\"})]})]}),n.jsx(\"div\",{className:\"flex-1 min-w-0\",children:p?n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(ye,{htmlFor:\"settings-profile-name\",className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Alias\"}),n.jsx(wt,{id:\"settings-profile-name\",name:\"name\",placeholder:\"e.g. Maverick\",value:g,onChange:fe=>N(fe.target.value),className:\"bg-white/5 border-white/5 rounded-xl h-12 text-white placeholder:text-slate-700 font-bold\",autoComplete:\"name\"})]}),n.jsx(Re,{size:\"sm\",onClick:je,className:\"w-full h-12 bg-indigo-600 hover:bg-indigo-500 text-white font-black rounded-xl\",children:\"Commit Identity\"})]}):n.jsxs(n.Fragment,{children:[n.jsx(\"h4\",{className:\"text-2xl font-black text-slate-100 tracking-tight\",children:g||\"Guest User\"}),n.jsx(\"p\",{className:\"text-xs text-slate-500 font-bold uppercase tracking-widest mt-1\",children:\"FinHub Node // 0x50.3\"})]})})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsx(\"div\",{className:\"space-y-4\",children:n.jsxs(\"button\",{onClick:()=>u({roundUpEnabled:!o.roundUpEnabled}),className:`w-full flex items-center justify-between p-6 rounded-[32px] border transition-all relative overflow-hidden group ${o.roundUpEnabled?\"bg-emerald-500/10 border-emerald-500/50 shadow-[0_0_20px_rgba(16,185,129,0.1)]\":\"bg-slate-900/40 border-white/5 grayscale opacity-60 hover:opacity-100 hover:grayscale-0\"}`,children:[n.jsx(\"div\",{className:`absolute top-0 right-0 w-24 h-24 blur-3xl opacity-10 -mr-12 -mt-12 transition-colors ${o.roundUpEnabled?\"bg-emerald-500\":\"bg-slate-500\"}`}),n.jsxs(\"div\",{className:\"space-y-1 relative z-10 flex-1 pr-4 text-left\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-2 text-sm font-black text-slate-100 uppercase tracking-tight\",children:[n.jsx(qn,{className:`w-4 h-4 ${o.roundUpEnabled?\"text-emerald-500\":\"text-slate-500\"}`}),\"Virtual Round-Ups\"]}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 font-bold leading-relaxed uppercase tracking-widest\",children:\"Build your fortress automatically via expense spillover.\"})]}),n.jsx(\"div\",{className:`relative z-10 px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${o.roundUpEnabled?\"bg-emerald-500 text-white shadow-lg shadow-emerald-500/20\":\"bg-slate-800 text-slate-500\"}`,children:o.roundUpEnabled?\"Active\":\"Offline\"})]})}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(ye,{htmlFor:\"settings-currency\",className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Gh,{className:\"w-3.5 h-3.5\"}),\"Standard Denomination\"]}),n.jsxs(\"div\",{className:\"bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-indigo-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsx(\"div\",{className:\"space-y-2 relative z-10\",children:n.jsxs(Ut,{value:o.currency,onValueChange:fe=>u({currency:fe}),children:[n.jsx(Bt,{id:\"settings-currency\",name:\"currency\",className:\"bg-white/5 border-white/5 rounded-2xl h-14 font-black\",children:n.jsx(It,{})}),n.jsxs(qt,{className:\"bg-slate-900 border-white/10 text-white\",children:[n.jsx(qe,{value:\"USD\",children:\"USD ($) - US Dollar\"}),n.jsx(qe,{value:\"EUR\",children:\"EUR (€) - Euro\"}),n.jsx(qe,{value:\"GBP\",children:\"GBP (£) - British Pound\"}),n.jsx(qe,{value:\"INR\",children:\"INR (₹) - Indian Rupee\"}),n.jsx(qe,{value:\"AED\",children:\"AED (د.إ) - UAE Dirham\"}),n.jsx(qe,{value:\"SAR\",children:\"SAR (﷼) - Saudi Riyal\"})]})]})})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(ye,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Gh,{className:\"w-3.5 h-3.5\"}),\"Foreign Exchange Probe\"]}),n.jsxs(\"div\",{className:\"space-y-6 p-6 bg-slate-900/40 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-blue-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4 relative z-10\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(ye,{htmlFor:\"converter-from-currency\",className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Source\"}),n.jsxs(Ut,{value:J,onValueChange:fe=>{ne(fe)},children:[n.jsx(Bt,{id:\"converter-from-currency\",name:\"fromCurrency\",className:\"bg-white/5 border-white/5 rounded-2xl h-12\",children:n.jsx(It,{})}),n.jsx(qt,{className:\"bg-slate-900 border-white/10 text-white\",children:Y.map(fe=>n.jsxs(qe,{value:fe,children:[dn[fe],\" \",fe]},fe))})]})]}),n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(ye,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Target\"}),n.jsxs(\"div\",{className:\"h-12 flex items-center justify-center bg-indigo-500/10 rounded-2xl border border-indigo-500/20 text-xs font-black text-indigo-400\",children:[dn[V],\" \",V]})]})]}),n.jsxs(\"div\",{className:\"space-y-1.5 relative z-10\",children:[n.jsx(ye,{htmlFor:\"converter-amount\",className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Capital Amount\"}),n.jsx(wt,{id:\"converter-amount\",name:\"amount\",type:\"number\",placeholder:\"Enter amount\",value:F,onChange:fe=>{const Se=fe.target.value;parseFloat(Se)<0||ie(Se)},min:\"0\",className:\"bg-white/5 border-white/5 rounded-2xl h-14 font-black text-lg\",autoComplete:\"off\"})]}),w!==null&&n.jsxs(\"div\",{className:\"p-6 bg-white/5 rounded-2xl border border-white/5 animate-in fade-in slide-in-from-top-2 relative z-10\",children:[n.jsx(\"p\",{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 mb-2\",children:\"Calculated Projection\"}),n.jsxs(\"div\",{className:\"flex items-baseline gap-2\",children:[n.jsxs(\"p\",{className:\"text-2xl font-black text-emerald-400 tabular-nums\",children:[dn[V],w.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold uppercase tracking-widest\",children:\"ESTIMATED VALUATION\"})]}),T[V]&&n.jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-white/5 flex items-center justify-between\",children:[n.jsx(\"span\",{className:\"text-[8px] font-black uppercase tracking-[0.2em] text-slate-700\",children:\"Interest Rate\"}),n.jsxs(\"span\",{className:\"text-[10px] font-black text-slate-500 tabular-nums\",children:[\"1 \",J,\" = \",T[V].toFixed(4),\" \",V]})]})]})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(ye,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(qn,{className:\"w-3.5 h-3.5 text-rose-500\"}),\"Inflation Projection Node\"]}),n.jsxs(\"div\",{className:\"space-y-6 p-6 bg-slate-900/40 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-rose-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsxs(\"div\",{className:\"space-y-4 relative z-10\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(ye,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Current Capital\"}),n.jsx(wt,{type:\"number\",value:ge,onChange:fe=>O(fe.target.value),className:\"bg-white/5 border-white/5 rounded-2xl h-12 font-black\",placeholder:\"e.g. 1000000\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(ye,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Horizon (Years)\"}),n.jsx(wt,{type:\"number\",value:k,onChange:fe=>U(fe.target.value),className:\"bg-white/5 border-white/5 rounded-2xl h-12 font-black\"})]}),n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between ml-1\",children:[n.jsx(ye,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500\",children:\"Rate (%)\"}),n.jsxs(\"button\",{onClick:W,disabled:v,className:\"text-[8px] font-black uppercase text-indigo-400 hover:text-indigo-300 disabled:opacity-50 flex items-center gap-1\",children:[v?n.jsx(Xc,{className:\"w-2 h-2 animate-spin\"}):n.jsx(oy,{className:\"w-2 h-2\"}),\"Sync\"]})]}),n.jsx(wt,{type:\"number\",value:Q,onChange:fe=>ae(fe.target.value),className:\"bg-white/5 border-white/5 rounded-2xl h-12 font-black\"})]})]}),ge&&n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(\"div\",{className:\"h-32 w-full bg-black/20 rounded-2xl p-2 border border-white/5 overflow-hidden\",children:n.jsx(mv,{width:\"100%\",height:\"100%\",minHeight:128,minWidth:100,children:n.jsxs(hv,{data:q,children:[n.jsxs(\"defs\",{children:[n.jsxs(\"linearGradient\",{id:\"colorCost\",x1:\"0\",y1:\"0\",x2:\"0\",y2:\"1\",children:[n.jsx(\"stop\",{offset:\"5%\",stopColor:\"#FB7185\",stopOpacity:.3}),n.jsx(\"stop\",{offset:\"95%\",stopColor:\"#FB7185\",stopOpacity:0})]}),n.jsxs(\"linearGradient\",{id:\"colorPower\",x1:\"0\",y1:\"0\",x2:\"0\",y2:\"1\",children:[n.jsx(\"stop\",{offset:\"5%\",stopColor:\"#34D399\",stopOpacity:.3}),n.jsx(\"stop\",{offset:\"95%\",stopColor:\"#34D399\",stopOpacity:0})]})]}),n.jsx(pv,{strokeDasharray:\"3 3\",vertical:!1,stroke:\"rgba(255,255,255,0.05)\"}),n.jsx(gv,{contentStyle:{backgroundColor:\"#0f172a\",border:\"1px solid rgba(255,255,255,0.1)\",borderRadius:\"8px\",fontSize:\"10px\"},itemStyle:{color:\"#fff\",padding:\"2px 0\"}}),n.jsx(Xh,{type:\"monotone\",dataKey:\"futureCost\",stroke:\"#FB7185\",fillOpacity:1,fill:\"url(#colorCost)\"}),n.jsx(Xh,{type:\"monotone\",dataKey:\"purchasingPower\",stroke:\"#34D399\",fillOpacity:1,fill:\"url(#colorPower)\"})]})})}),n.jsxs(\"div\",{className:\"p-6 bg-white/5 rounded-2xl border border-white/5 space-y-4\",children:[n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 mb-2\",children:\"Future Cost\"}),n.jsxs(\"p\",{className:\"text-xl font-black text-rose-400 tabular-nums\",children:[dn[o.currency],Math.round(parseFloat(ge)*Math.pow(1+parseFloat(Q)/100,parseFloat(k))).toLocaleString()]})]}),n.jsxs(\"div\",{className:\"pt-4 border-t border-white/5\",children:[n.jsx(\"p\",{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 mb-2\",children:\"Real Purchasing Power\"}),n.jsxs(\"p\",{className:\"text-xl font-black text-emerald-400 tabular-nums\",children:[dn[o.currency],Math.round(parseFloat(ge)/Math.pow(1+parseFloat(Q)/100,parseFloat(k))).toLocaleString()]}),n.jsx(\"p\",{className:\"text-[8px] text-slate-600 font-bold uppercase tracking-widest mt-1\",children:\"VALUATION IN TODAY'S MONEY\"})]})]})]})]})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(ye,{className:\"text-[10px] font-bold uppercase tracking-[0.2em] text-slate-500 flex items-center gap-2\",children:[n.jsx(cy,{className:\"w-3.5 h-3.5 text-indigo-400\"}),\"AI Assistant Config\"]}),n.jsxs(\"div\",{className:\"space-y-6 bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsxs(\"div\",{className:\"space-y-1.5 relative z-10\",children:[n.jsx(ye,{htmlFor:\"ai-provider-select\",className:\"text-[9px] font-bold uppercase tracking-widest text-slate-500 ml-1\",children:\"Preferred Provider\"}),n.jsxs(Ut,{value:xe,onValueChange:fe=>u({aiProvider:fe}),children:[n.jsx(Bt,{id:\"ai-provider-select\",name:\"aiProvider\",className:\"bg-slate-900 border-white/5 rounded-xl h-11 text-[10px] font-bold uppercase tracking-widest\",children:n.jsx(It,{})}),n.jsx(qt,{className:\"bg-slate-900 border-white/10 text-white\",children:Ke.map(fe=>n.jsx(qe,{value:fe.id,className:\"text-[10px] font-bold uppercase tracking-widest\",children:fe.label},fe.id))})]})]}),n.jsxs(\"div\",{className:\"space-y-4 pt-2 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between px-1\",children:[n.jsx(ye,{className:\"text-[9px] font-bold uppercase tracking-widest text-slate-500\",children:\"Active Credential\"}),n.jsx(\"div\",{className:\"flex items-center gap-1.5\",children:n.jsx(\"span\",{className:\"text-[8px] font-bold text-indigo-400/70 uppercase tracking-tighter\",children:Ke.find(fe=>fe.id===xe)?.label})})]}),Ke.filter(fe=>fe.id===xe).map(fe=>{const Se=o.apiKeys?.[fe.id],ze=`VITE_${fe.id.toUpperCase()}_API_KEY`,lt=!!_0[ze];return n.jsxs(\"div\",{className:\"flex items-center gap-3 bg-indigo-500/5 p-4 rounded-2xl border border-indigo-500/20 group/active transition-all\",children:[n.jsx(\"div\",{className:\"flex-1 min-w-0\",children:n.jsxs(\"div\",{className:\"relative group/input\",children:[n.jsx(wt,{type:\"password\",value:Se||\"\",onChange:mt=>ke(\"apiKeys\",{...o.apiKeys,[fe.id]:mt.target.value}),placeholder:lt?\"Using System Environment Key\":`Enter ${fe.label} Key`,className:`bg-transparent border-none p-0 h-auto text-sm font-bold text-white placeholder:text-slate-700 focus-visible:ring-0 shadow-none ${lt&&!Se?\"opacity-40 italic font-medium\":\"\"}`,disabled:lt&&!Se}),lt&&!Se&&n.jsx(\"div\",{className:\"flex items-center gap-1 mt-1\",children:n.jsx(\"span\",{className:\"text-[7px] font-black text-emerald-500 uppercase tracking-widest bg-emerald-500/10 px-1 py-0.5 rounded\",children:\"System Linked\"})})]})}),Se&&n.jsx(\"button\",{onClick:()=>ke(\"apiKeys\",{...o.apiKeys,[fe.id]:\"\"}),className:\"text-slate-600 hover:text-rose-500 transition-colors p-1\",title:\"Clear saved key\",\"aria-label\":`Clear saved key for ${fe.label}`,children:n.jsx(tl,{className:\"w-3.5 h-3.5\"})})]},fe.id)}),n.jsx(Re,{onClick:Ft,disabled:We||!al(xe,o),className:`w-full h-11 transition-all font-bold uppercase tracking-[0.2em] text-[10px] rounded-xl ${it?.success?\"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20\":it?.success===!1?\"bg-rose-500/10 text-rose-400 border border-rose-500/20\":\"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20\"}`,children:We?n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(Xc,{className:\"w-3.5 h-3.5 animate-spin\"}),\"Verifying...\"]}):it?.success?n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(Cu,{className:\"w-3.5 h-3.5\"}),\"Link Stable\"]}):\"Validate Connection\"})]}),n.jsxs(Tj,{className:\"relative z-10\",children:[n.jsx(Dj,{asChild:!0,children:n.jsxs(Re,{variant:\"ghost\",className:\"w-full h-8 hover:bg-white/5 text-slate-500 hover:text-slate-300 text-[8px] font-bold uppercase tracking-widest group/trigger flex items-center justify-between px-2 rounded-lg\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(uy,{className:\"w-3 h-3 text-slate-600 group-hover/trigger:text-slate-400\"}),\"Alternative Nodes\"]}),n.jsx(nl,{className:\"w-3 h-3 transition-transform duration-300 group-data-[state=open]/trigger:rotate-180\"})]})}),n.jsx(Mj,{className:\"pt-4 space-y-3 animate-in fade-in slide-in-from-top-2 duration-300\",children:n.jsx(\"div\",{className:\"grid gap-2\",children:Ke.filter(fe=>fe.id!==xe).map(fe=>{const Se=o.apiKeys?.[fe.id],ze=`VITE_${fe.id.toUpperCase()}_API_KEY`,lt=!!_0[ze];return n.jsxs(\"div\",{className:\"flex items-center gap-3 bg-slate-950/40 p-3 rounded-xl border border-white/5 hover:border-white/10 transition-colors\",children:[n.jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between mb-1\",children:[n.jsx(\"span\",{className:\"text-[8px] font-bold uppercase tracking-wider text-slate-500\",children:fe.label}),lt&&!Se&&n.jsx(\"span\",{className:\"text-[7px] font-bold text-emerald-500/50 uppercase tracking-tighter\",children:\"System\"})]}),n.jsx(wt,{type:\"password\",value:Se||\"\",onChange:mt=>ke(\"apiKeys\",{...o.apiKeys,[fe.id]:mt.target.value}),placeholder:lt?\"Using System Default\":\"Key not found\",className:\"bg-transparent border-none p-0 h-auto text-[10px] text-slate-400 placeholder:text-slate-800 focus-visible:ring-0 shadow-none italic font-medium cursor-not-allowed\",disabled:lt&&!Se})]}),Se&&n.jsx(\"button\",{onClick:()=>ke(\"apiKeys\",{...o.apiKeys,[fe.id]:\"\"}),className:\"text-slate-800 hover:text-rose-500 transition-colors p-1\",title:\"Clear saved key\",\"aria-label\":`Clear saved key for ${fe.label}`,children:n.jsx(tl,{className:\"w-3 h-3\"})})]},fe.id)})})})]})]})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(ye,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Qc,{className:\"w-3.5 h-3.5 text-indigo-400\"}),\"Data Optimization Node\"]}),n.jsxs(\"div\",{className:\"p-6 bg-slate-900/40 rounded-[32px] border border-white/5 relative overflow-hidden\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-300\",children:at.settings.subscriptionScanner}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-wide mt-1\",children:\"DETECT & MIGRATE RECURRING SIGNALS\"})]}),n.jsx(Re,{onClick:B,disabled:M,className:\"bg-indigo-600 hover:bg-indigo-500 text-white font-black uppercase tracking-widest text-[9px] h-9 px-4 rounded-xl shadow-lg shadow-indigo-500/20\",children:M?n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(Xc,{className:\"w-3 h-3 animate-spin\"}),\"Scanning...\"]}):\"Execute Scan\"})]}),n.jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-white/5 flex items-center justify-between\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-300\",children:\"Redundancy Purge\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-wide mt-1\",children:\"REMOVE BLANK & DUPLICATE ENTRIES\"})]}),n.jsx(Re,{onClick:async()=>{const fe=ce.loading(\"Purging duplicates...\");try{const Se=await G();ce.dismiss(fe)}catch{ce.dismiss(fe),ce.error(\"Purge failed\")}},className:\"bg-rose-500/10 hover:bg-rose-500/20 text-rose-400 border border-rose-500/20 font-black uppercase tracking-widest text-[9px] h-9 px-4 rounded-xl\",children:at.settings.cleanupDuplicates})]})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(ye,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(dy,{className:\"w-3.5 h-3.5 text-amber-500\"}),at.settings.achievementLevel,\" (\",o.unlockedAchievements.length,\"/\",pe.length,\")\"]}),n.jsx(\"div\",{className:\"grid grid-cols-4 sm:grid-cols-6 gap-3\",children:pe.map(fe=>{const Se=ve.has(fe.id);return n.jsx(\"button\",{onClick:()=>{Se&&d&&d(fe.id)},disabled:!Se,className:`w-12 h-12 rounded-xl border flex items-center justify-center text-xl transition-all ${Se?\"border-amber-500/50 bg-amber-500/10 grayscale-0 hover:scale-110 hover:shadow-lg hover:shadow-amber-500/20 active:scale-95\":\"border-white/5 bg-white/5 grayscale opacity-20 cursor-not-allowed\"}`,children:fe.icon},fe.id)})}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 font-bold text-center leading-relaxed\",children:o.unlockedAchievements.length>0?at.settings.achievementSelect:at.settings.achievementLocked})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsx(\"div\",{className:\"space-y-4\",children:n.jsxs(\"div\",{className:\"p-4 bg-rose-500/5 border border-rose-500/10 rounded-2xl flex items-center justify-between\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"text-[10px] font-black uppercase tracking-widest text-rose-400\",children:at.settings.factoryReset}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-wide mt-1\",children:at.settings.wipeDescription})]}),n.jsx(Re,{onClick:async()=>{confirm(\"Are you sure? This deletes ALL transaction data.\")&&await ee()},className:\"bg-slate-950 hover:bg-rose-500 text-rose-500 hover:text-white border border-rose-500/20 font-black uppercase tracking-widest text-[9px] h-9 px-4 rounded-xl transition-colors\",children:at.settings.wipeData})]})}),n.jsx(_j,{className:\"bg-white/5\"}),n.jsxs(\"div\",{className:\"text-center pt-8 space-y-2 opacity-40 hover:opacity-100 transition-opacity duration-700 pb-10\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-[0.5em] text-slate-100\",children:\"Obsidian System Node\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-widest\",children:\"Architect: Sijo Joseph // BUILD 50.3.0 // QUANTUM CORE\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-700 uppercase tracking-widest mt-4\",children:\"© 2025 NEURAL FINHUB FABRIC\"}),n.jsxs(\"button\",{onClick:h,className:\"mt-4 text-[8px] font-black text-indigo-400/60 hover:text-indigo-400 uppercase tracking-[0.2em] transition-colors\",children:[\"[ \",at.settings.about,\" ]\"]})]}),n.jsxs(\"div\",{className:\"px-2 pb-10\",children:[n.jsxs(Re,{variant:\"outline\",onClick:()=>{L(),l()},className:\"w-full h-14 bg-white/5 hover:bg-white/10 border-white/10 hover:border-white/20 text-white/60 hover:text-white font-black uppercase tracking-widest gap-3 rounded-[24px] transition-all group mb-4\",children:[n.jsx(fy,{className:\"w-5 h-5 group-hover:-translate-x-1 transition-transform\"}),\"Terminate Session\"]}),n.jsxs(Rp,{open:Z,onOpenChange:_,children:[n.jsx(Rj,{asChild:!0,children:n.jsxs(Re,{variant:\"outline\",className:\"w-full h-14 bg-rose-500/5 hover:bg-rose-500/10 border-rose-500/20 hover:border-rose-500/40 text-rose-500 font-black uppercase tracking-widest gap-3 rounded-[24px] transition-all group\",children:[n.jsx(Qc,{className:\"w-5 h-5 group-hover:scale-110 transition-transform\"}),\"Delete Account & Data\"]})}),n.jsxs(Op,{className:\"bg-slate-950 border-white/10 text-white rounded-[32px] p-8\",children:[n.jsxs(zp,{children:[n.jsxs(Up,{className:\"text-2xl font-black tracking-tight flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"p-2 rounded-full bg-rose-500/20 text-rose-500\",children:n.jsx(Qc,{className:\"w-6 h-6\"})}),\"Irreversible Action?\"]}),n.jsxs(Ip,{className:\"text-slate-400 font-medium leading-relaxed mt-4\",children:[\"Your account will be \",n.jsx(\"span\",{className:\"text-white font-bold italic\",children:\"deactivated immediately\"}),\" and scheduled for permanent deletion in \",n.jsx(\"span\",{className:\"text-white font-bold\",children:\"30 days\"}),\".\",n.jsx(\"br\",{}),n.jsx(\"br\",{}),\"Log in anytime before then to cancel this request and restore your data node.\"]})]}),n.jsxs(Lp,{className:\"mt-8 gap-3\",children:[n.jsx(qp,{className:\"h-14 flex-1 rounded-2xl bg-white/5 border-white/10 text-slate-400 hover:bg-white/10 hover:text-white font-black uppercase tracking-widest transition-all\",children:\"Abort\"}),n.jsx(Bp,{onClick:async()=>{await z(),l()},className:\"h-14 flex-1 rounded-2xl bg-rose-600 hover:bg-rose-500 text-white font-black uppercase tracking-widest shadow-lg shadow-rose-500/20 transition-all active:scale-95\",children:\"Confirm Purge\"})]})]})]})]})]})]})})};function nN({onNavigate:i,onOpenSettings:l,onOpenNotifications:o,emergencyFundAmount:u,bankAccountsCount:d,cardsCount:h,currency:g,onOpenAbout:N}){return n.jsxs(\"div\",{className:\"space-y-12 animate-in fade-in slide-in-from-bottom-4 duration-700 px-4 pb-20\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tight leading-none mb-3\",children:\"Settings & Assets\"}),n.jsx(\"p\",{className:\"text-slate-500 font-bold max-w-md\",children:\"Configure your financial universe and manage core system components.\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[n.jsxs(Ot,{className:\"p-8 cursor-pointer bg-black border-white/5 sq-2xl border hover:bg-white/5 transition-all duration-300 group relative overflow-hidden\",onClick:()=>i(\"emergency\"),children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-blue-500 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20\"}),n.jsxs(\"div\",{className:\"relative z-10\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-blue-500/10 border border-blue-500/20 sq-md flex items-center justify-center text-blue-400 mb-8 group-hover:scale-110 transition-transform duration-500\",children:n.jsx(sl,{className:\"w-8 h-8\"})}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100\",children:\"Emergency Fund\"}),n.jsx(\"p\",{className:\"text-2xl font-black tabular-nums text-blue-400\",children:Ne(u,g)})]}),n.jsxs(\"div\",{className:\"mt-8 flex items-center justify-between text-slate-500\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest\",children:\"Financial Safety Net\"}),n.jsx(Ps,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]})]})]}),n.jsxs(Ot,{className:\"p-8 cursor-pointer bg-black border-white/5 sq-2xl border hover:bg-white/5 transition-all duration-300 group relative overflow-hidden\",onClick:()=>i(\"accounts\"),children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-emerald-500 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20\"}),n.jsxs(\"div\",{className:\"relative z-10\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-emerald-500/10 border border-emerald-500/20 sq-md flex items-center justify-center text-emerald-400 mb-8 group-hover:scale-110 transition-transform duration-500\",children:n.jsx(J0,{className:\"w-8 h-8\"})}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100\",children:\"Accounts & Cards\"}),n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsxs(\"div\",{className:\"space-y-0.5\",children:[n.jsx(\"p\",{className:\"text-2xl font-black tabular-nums text-emerald-400\",children:d}),n.jsx(\"p\",{className:\"text-[10px] font-bold text-slate-600 uppercase tracking-wider\",children:\"Banks\"})]}),n.jsx(\"div\",{className:\"w-px h-8 bg-white/5 self-center mt-2\"}),n.jsxs(\"div\",{className:\"space-y-0.5\",children:[n.jsx(\"p\",{className:\"text-2xl font-black tabular-nums text-emerald-400\",children:h}),n.jsx(\"p\",{className:\"text-[10px] font-bold text-slate-600 uppercase tracking-wider\",children:\"Cards\"})]})]})]}),n.jsxs(\"div\",{className:\"mt-8 flex items-center justify-between text-slate-500\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest\",children:\"Manage Liquidity\"}),n.jsx(Ps,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]})]})]})]}),n.jsxs(\"div\",{className:\"pt-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 mb-8\",children:[n.jsx(\"div\",{className:\"w-1.5 h-6 bg-slate-700 rounded-full\"}),n.jsx(\"h3\",{className:\"text-xs font-black uppercase tracking-[0.3em] text-slate-600\",children:\"System Configuration\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 gap-4\",children:[n.jsx(Ot,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group\",onClick:l,children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400 group-hover:text-white transition-colors\",children:n.jsx(my,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"App Settings\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"Preferences & Display\"})]})]}),n.jsx(Ps,{className:\"w-5 h-5 text-slate-700 group-hover:text-slate-400 transition-colors\"})]})}),n.jsx(Ot,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group\",onClick:o,children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400 group-hover:text-white transition-colors\",children:n.jsx(Lu,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"Alert Center\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"System Notifications\"})]})]}),n.jsx(Ps,{className:\"w-5 h-5 text-slate-700 group-hover:text-slate-400 transition-colors\"})]})}),n.jsx(Ot,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group opacity-60 hover:opacity-100\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400\",children:n.jsx(hy,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"Support\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"Documentation & Help\"})]})]}),n.jsx(Ps,{className:\"w-5 h-5 text-slate-700 transition-colors\"})]})}),n.jsx(Ot,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group opacity-60 hover:opacity-100\",onClick:N,children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400\",children:n.jsx(py,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"About\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"Version 5.0 Stable Release\"})]})]}),n.jsx(Ps,{className:\"w-5 h-5 text-slate-700 transition-colors\"})]})})]})]}),n.jsxs(\"div\",{className:\"text-center pt-8 border-t border-white/5\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-[0.5em] text-slate-700 mb-1\",children:\"FinHub Obsidian System\"}),n.jsx(\"p\",{className:\"text-[9px] font-bold text-slate-800\",children:\"BUILD 50.3.0 // QUANTUM CORE\"})]})]})}function sN({className:i,children:l,...o}){return n.jsxs(gy,{\"data-slot\":\"scroll-area\",className:De(\"relative\",i),...o,children:[n.jsx(xy,{\"data-slot\":\"scroll-area-viewport\",className:\"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1\",children:l}),n.jsx(iN,{}),n.jsx(by,{})]})}function iN({className:i,orientation:l=\"vertical\",...o}){return n.jsx(yy,{\"data-slot\":\"scroll-area-scrollbar\",orientation:l,className:De(\"flex touch-none p-px transition-colors select-none\",l===\"vertical\"&&\"h-full w-2.5 border-l border-l-transparent\",l===\"horizontal\"&&\"h-2.5 flex-col border-t border-t-transparent\",i),...o,children:n.jsx(vy,{\"data-slot\":\"scroll-area-thumb\",className:\"bg-border relative flex-1 rounded-full\"})})}function lN({isOpen:i,onClose:l,notifications:o,onNotificationClick:u,onMarkAsRead:d,onClearRead:h}){const g=o.filter(C=>!C.read).length,N=o.filter(C=>C.read).length,E=C=>{switch(C){case\"achievement\":return n.jsx(jy,{className:\"w-5 h-5 text-yellow-500\"});case\"goal\":return n.jsx(Hn,{className:\"w-5 h-5 text-green-500\"});case\"insight\":return n.jsx(qn,{className:\"w-5 h-5 text-blue-500\"});case\"alert\":return n.jsx(el,{className:\"w-5 h-5 text-red-500\"});case\"reminder\":return n.jsx(Nu,{className:\"w-5 h-5 text-indigo-500\"})}},S=C=>{const M=new Date(C),L=new Date().getTime()-M.getTime(),z=Math.floor(L/6e4),j=Math.floor(L/36e5),G=Math.floor(L/864e5);return z<60?`${z}m ago`:j<24?`${j}h ago`:`${G}d ago`},[p,f]=x.useState({reminders:!0,transactions:!0,achievements:!1,insights:!1}),w=C=>{f(M=>({...M,[C]:!M[C]}))},A=[\"reminders\",\"transactions\",\"insights\",\"achievements\"],T=o.reduce((C,M)=>{const y=M.category||\"insights\";return C[y]||(C[y]=[]),C[y].push(M),C},{});return Object.keys(T).forEach(C=>{T[C].sort((M,y)=>M.read!==y.read?M.read?1:-1:new Date(y.timestamp).getTime()-new Date(M.timestamp).getTime())}),n.jsx(kp,{open:i,onOpenChange:l,children:n.jsxs(Dp,{side:\"right\",className:\"w-full sm:max-w-lg p-0 flex flex-col h-dvh max-h-dvh bg-black border-white/5 text-slate-100 overflow-hidden z-[99999]\",children:[n.jsx(Mp,{className:\"sr-only\",children:\"Notifications\"}),n.jsx(_p,{className:\"sr-only\",children:\"Notifications\"}),n.jsxs(\"div\",{className:\"px-8 pt-28 pb-10 border-b border-white/5 bg-black relative overflow-hidden animate-in fade-in slide-in-from-right-4 duration-500\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-48 h-48 bg-indigo-500 blur-[120px] opacity-10 -mr-24 -mt-24\"}),n.jsx(\"div\",{className:\"absolute bottom-0 left-0 w-24 h-24 bg-blue-500 blur-[80px] opacity-5 -ml-12 -mb-12\"}),n.jsx(\"div\",{className:\"absolute top-8 right-8 z-30\",children:n.jsx(Re,{variant:\"ghost\",size:\"icon\",onClick:l,className:\"w-10 h-10 sq-full bg-white/5 text-slate-400 hover:text-white hover:bg-white/10\",children:n.jsx(il,{className:\"w-5 h-5\"})})}),n.jsxs(\"div\",{className:\"flex items-center justify-between relative z-10\",children:[n.jsxs(\"div\",{className:\"flex flex-col gap-2\",children:[n.jsx(\"div\",{className:\"flex items-center gap-4\",children:n.jsxs(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tighter leading-none flex items-center gap-4\",children:[\"Pulse\",g>0&&n.jsx(\"span\",{className:\"flex items-center justify-center min-w-[24px] h-6 px-2 text-[10px] font-black bg-indigo-600 text-white sq-full shadow-[0_0_15px_rgba(79,70,229,0.4)]\",children:g})]})}),n.jsx(\"p\",{className:\"text-slate-500 font-black text-[10px] uppercase tracking-[0.3em] leading-none ml-0.5\",children:\"System Intelligence Stack\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[g>0&&n.jsx(Re,{variant:\"ghost\",size:\"icon\",title:\"Mark all as read\",onClick:()=>{o.forEach(C=>{C.read||d?.(C.id)})},className:\"w-11 h-11 sq-md bg-white/5 text-slate-400 hover:text-indigo-400 hover:bg-white/10 transition-all duration-300 border border-white/5 active:scale-90\",children:n.jsx(wy,{className:\"w-5 h-5\"})}),N>0&&n.jsx(Re,{variant:\"ghost\",size:\"icon\",title:\"Clear history\",onClick:()=>{confirm(`Clear ${N} notifications?`)&&h?.()},className:\"w-11 h-11 sq-md bg-white/5 text-slate-400 hover:text-rose-400 hover:bg-rose-500/10 transition-all duration-300 border border-white/5 active:scale-90\",children:n.jsx(tl,{className:\"w-5 h-5\"})})]})]})]}),n.jsx(sN,{className:\"flex-1 w-full bg-black overflow-hidden custom-scrollbar\",children:n.jsx(\"div\",{className:\"px-6 space-y-12 py-8 pb-32\",children:o.length===0?n.jsxs(\"div\",{className:\"text-center py-32 flex flex-col items-center animate-in fade-in zoom-in duration-700\",children:[n.jsxs(\"div\",{className:\"w-24 h-24 bg-white/5 border border-white/5 sq-2xl flex items-center justify-center text-slate-800 mb-8 shadow-inner relative group\",children:[n.jsx(\"div\",{className:\"absolute inset-0 bg-indigo-500/5 blur-2xl sq-full group-hover:bg-indigo-500/10 transition-colors\"}),n.jsx(Lu,{className:\"w-10 h-10 relative z-10\"})]}),n.jsx(\"h4\",{className:\"text-2xl font-black text-slate-100 mb-3 tracking-tight\",children:\"Signal Silence\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-black uppercase tracking-[0.3em] max-w-[260px] leading-relaxed\",children:\"No new notifications. We will alert you when there are updates.\"})]}):A.map(C=>{const M=T[C]||[];if(M.length===0)return null;const y=p[C],L=y?M.length:1,z=M.filter(j=>!j.read).length;return n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"button\",{onClick:()=>w(C),...y?{\"aria-expanded\":\"true\"}:{\"aria-expanded\":\"false\"},className:\"w-full flex items-center justify-between px-2 group\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-[0.4em] text-slate-500 group-hover:text-slate-300 transition-colors\",children:C}),z>0&&n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 sq-full animate-pulse shadow-[0_0_10px_rgba(99,102,241,0.6)]\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black text-slate-700\",children:M.length}),y?n.jsx(_r,{className:\"w-3 h-3 text-slate-700\"}):n.jsx(nl,{className:\"w-3 h-3 text-slate-700\"})]})]}),n.jsxs(\"div\",{className:\"space-y-3 relative\",children:[!y&&M.length>1&&n.jsxs(n.Fragment,{children:[n.jsx(\"div\",{className:\"absolute top-2 left-2 right-2 h-full bg-black/40 sq-xl -z-10 border border-white/5 translate-y-2 scale-[0.98]\"}),n.jsx(\"div\",{className:\"absolute top-4 left-4 right-4 h-full bg-black/20 sq-xl -z-20 border border-white/5 translate-y-4 scale-[0.96]\"})]}),M.slice(0,L).map((j,G)=>{const ee={style:{\"--anim-delay\":`${G*50}ms`,\"--z-index\":100-G}};return n.jsxs(\"div\",{...ee,className:`p-6 sq-xl border transition-all duration-500 group relative overflow-hidden cursor-pointer active:scale-[0.98] animate-in fade-in slide-in-from-right-4 fill-mode-both [animation-delay:var(--anim-delay)] z-[var(--z-index)] ${j.read?\"bg-black border-white/5\":\"bg-black border-indigo-500/30 shadow-lg shadow-indigo-500/5 hover:border-indigo-500/50\"}`,onClick:Z=>{Z.stopPropagation(),u?.(j),j.read||d?.(j.id)},children:[j.priority===\"high\"&&!j.read&&n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 bg-red-500 blur-[80px] opacity-10 -mr-16 -mt-16\"}),!j.read&&j.priority!==\"high\"&&n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 bg-indigo-500 blur-[80px] opacity-10 -mr-16 -mt-16 group-hover:opacity-20 transition-opacity\"}),n.jsxs(\"div\",{className:\"flex gap-4 relative z-10\",children:[n.jsx(\"div\",{className:`w-12 h-12 sq-md flex items-center justify-center shrink-0 border border-white/5 transition-all duration-500 ${j.read?\"bg-white/5 text-slate-600\":j.priority===\"high\"?\"bg-red-500/10 text-red-400\":\"bg-indigo-500/10 text-indigo-400 shadow-inner\"}`,children:E(j.type)}),n.jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[n.jsxs(\"div\",{className:\"flex items-start justify-between gap-4\",children:[n.jsx(\"h4\",{className:`text-sm font-black tracking-tight leading-tight ${j.read?\"text-slate-500\":\"text-slate-100\"}`,children:j.title}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-700 whitespace-nowrap pt-1\",children:S(j.timestamp)})]}),n.jsx(\"p\",{className:`text-xs mt-2 leading-relaxed font-bold tracking-tight ${j.read?\"text-slate-700\":\"text-slate-400\"}`,children:j.message}),j.priority===\"high\"&&!j.read&&n.jsxs(\"div\",{className:\"mt-4 flex items-center gap-2\",children:[n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-red-400 sq-full animate-ping\"}),n.jsx(\"span\",{className:\"text-[10px] font-black text-red-400 uppercase tracking-[0.2em]\",children:\"Critical Stability Alert\"})]}),j.action&&j.action.status===\"pending\"&&n.jsxs(\"div\",{className:\"mt-4 flex gap-3 animate-in fade-in slide-in-from-top-1\",children:[n.jsx(Re,{size:\"sm\",className:\"h-8 text-[10px] font-black uppercase tracking-widest bg-emerald-600 hover:bg-emerald-500 text-white border-0\",onClick:Z=>{Z.stopPropagation(),j.action.status=\"completed\",u?.(j)},children:\"Yes, Automate\"}),n.jsx(Re,{size:\"sm\",variant:\"ghost\",className:\"h-8 text-[10px] font-black uppercase tracking-widest text-slate-500 hover:text-slate-300 hover:bg-white/5\",onClick:Z=>{Z.stopPropagation(),j.action.status=\"dismissed\",j.read||d?.(j.id)},children:\"No, One-time\"})]})]})]})]},j.id)})]})]},C)})})})]})})}const R0=[{text:\"An investment in knowledge pays the best interest.\",author:\"Benjamin Franklin\",category:\"financial-literacy\"},{text:\"It's not how much money you make, but how much money you keep, how hard it works for you, and how many generations you keep it for.\",author:\"Robert Kiyosaki\",category:\"financial-literacy\"},{text:\"Financial peace isn't the acquisition of stuff. It's learning to live on less than you make, so you can give money back and have money to invest.\",author:\"Dave Ramsey\",category:\"financial-literacy\"},{text:\"Do not save what is left after spending; instead spend what is left after saving.\",author:\"Warren Buffett\",category:\"financial-literacy\"},{text:\"The stock market is a device for transferring money from the impatient to the patient.\",author:\"Warren Buffett\",category:\"financial-literacy\"},{text:\"Know what you own, and know why you own it.\",author:\"Peter Lynch\",category:\"financial-literacy\"},{text:\"The individual investor should act consistently as an investor and not as a speculator.\",author:\"Ben Graham\",category:\"financial-literacy\"},{text:\"Price is what you pay. Value is what you get.\",author:\"Warren Buffett\",category:\"financial-literacy\"},{text:\"The goal isn't more money. The goal is living life on your terms.\",author:\"Chris Brogan\",category:\"financial-freedom\"},{text:\"Financial freedom is available to those who learn about it and work for it.\",author:\"Robert Kiyosaki\",category:\"financial-freedom\"},{text:\"The rich invest in time, the poor invest in money.\",author:\"Warren Buffett\",category:\"financial-freedom\"},{text:\"Wealth is the ability to fully experience life.\",author:\"Henry David Thoreau\",category:\"financial-freedom\"},{text:\"It's not about having lots of money. It's about knowing how to manage the money you do have.\",author:\"Dave Ramsey\",category:\"financial-freedom\"},{text:\"Money is a terrible master but an excellent servant.\",author:\"P.T. Barnum\",category:\"financial-freedom\"},{text:\"The quickest way to double your money is to fold it in half and put it in your back pocket.\",author:\"Will Rogers\",category:\"financial-freedom\"},{text:\"The best time to plant a tree was 20 years ago. The second best time is now.\",author:\"Chinese Proverb\",category:\"motivation\"},{text:\"A journey of a thousand miles begins with a single step.\",author:\"Lao Tzu\",category:\"motivation\"},{text:\"Success is not final, failure is not fatal: it is the courage to continue that counts.\",author:\"Winston Churchill\",category:\"motivation\"},{text:\"The only way to do great work is to love what you do.\",author:\"Steve Jobs\",category:\"motivation\"},{text:\"Don't watch the clock; do what it does. Keep going.\",author:\"Sam Levenson\",category:\"motivation\"},{text:\"Wealth is not about having a lot of money; it's about having a lot of options.\",author:\"Chris Rock\",category:\"motivation\"},{text:\"Every time you borrow money, you're robbing your future self.\",author:\"Nathan W. Morris\",category:\"motivation\"},{text:\"The habit of saving is itself an education; it fosters every virtue, teaches self-denial, cultivates the sense of order, trains to forethought, and so broadens the mind.\",author:\"T.T. Munger\",category:\"motivation\"},{text:\"Too many people spend money they haven't earned, to buy things they don't want, to impress people they don't like.\",author:\"Will Rogers\",category:\"motivation\"},{text:\"A budget is telling your money where to go instead of wondering where it went.\",author:\"Dave Ramsey\",category:\"motivation\"},{text:\"Beware of little expenses. A small leak will sink a great ship.\",author:\"Benjamin Franklin\",category:\"motivation\"},{text:\"Never spend your money before you have earned it.\",author:\"Thomas Jefferson\",category:\"motivation\"}];function O0(){return R0[Math.floor(Math.random()*R0.length)]}function rN({isOpen:i,onClose:l,achievementId:o}){const[u,d]=x.useState(O0());if(x.useEffect(()=>{i&&o&&(queueMicrotask(()=>{d(O0())}),Or({particleCount:150,spread:100,origin:{y:.6},colors:[\"#FFD700\",\"#FFA500\",\"#FF6347\",\"#9370DB\",\"#3CB371\"]}))},[i,o]),!o)return null;const h=cp(o);return h?n.jsx(us,{open:i,onOpenChange:l,children:n.jsxs(ds,{className:\"w-[270px] sm:w-full sm:max-w-md bg-slate-950 border-[#38383A] p-0 overflow-hidden rounded-[32px] shadow-2xl transition-all duration-500\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 sm:w-64 sm:h-64 bg-yellow-500 blur-[60px] sm:blur-[120px] opacity-10 -mr-16 -mt-16 sm:-mr-32 sm:-mt-32\"}),n.jsx(\"div\",{className:\"absolute bottom-0 left-0 w-24 h-24 sm:w-48 sm:h-48 bg-indigo-500 blur-[50px] sm:blur-[100px] opacity-5 -ml-12 -mb-12 sm:-ml-24 sm:-mb-24\"}),n.jsxs(fs,{className:\"px-6 sm:px-10 pt-8 sm:pt-12 pb-0 relative z-10\",children:[n.jsx(ms,{className:\"text-center text-xl sm:text-3xl font-black text-white tracking-tight transition-all\",children:\"Achievement Unlocked\"}),n.jsx(hs,{className:\"text-center text-[8px] sm:text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] sm:tracking-[0.3em] mt-1 sm:mt-2 transition-all\",children:\"Achievement Unlocked\"})]}),n.jsxs(\"div\",{className:\"space-y-6 sm:space-y-10 py-8 sm:py-12 px-6 sm:px-10 relative z-10\",children:[n.jsxs(\"div\",{className:\"relative flex justify-center\",children:[n.jsx(Le.div,{className:\"relative z-10\",initial:{scale:0,rotateY:0},animate:{scale:1,rotateY:[0,1080],transition:{scale:{duration:.8,ease:\"backOut\"},rotateY:{duration:4,ease:\"easeInOut\"}}},children:n.jsxs(\"div\",{className:\"relative\",children:[n.jsx(Le.div,{className:\"absolute inset-0 bg-yellow-400 blur-3xl opacity-20 rounded-full\",animate:{scale:[1,1.3,1],opacity:[.2,.4,.2]},transition:{duration:3,repeat:1/0,ease:\"easeInOut\"}}),n.jsxs(\"div\",{className:\"relative w-32 h-32 sm:w-44 sm:h-44 bg-gradient-to-br from-yellow-400 via-orange-500 to-yellow-600 rounded-[32px] sm:rounded-[48px] flex items-center justify-center shadow-[0_15px_40px_rgba(234,179,8,0.25)] border-4 border-white/20 transition-all\",children:[n.jsx(\"span\",{className:\"text-5xl sm:text-7xl drop-shadow-2xl transition-all\",children:h.icon}),n.jsx(\"div\",{className:\"absolute inset-0 bg-gradient-to-tr from-white/10 to-transparent pointer-events-none rounded-[28px] sm:rounded-[44px]\"})]})]})}),n.jsxs(\"div\",{className:\"absolute inset-0 z-20 flex justify-center items-center pointer-events-none\",children:[n.jsx(Le.div,{className:\"absolute w-32 h-32 sm:w-48 sm:h-48 bg-yellow-500/40 blur-[40px] sm:blur-[60px] rounded-full\",initial:{scale:0,opacity:0},animate:{scale:1.4,opacity:1},transition:{delay:.3,duration:1.2,ease:\"easeOut\"}}),n.jsx(Le.div,{className:\"absolute w-24 h-24 sm:w-36 sm:h-36 bg-indigo-500/30 blur-[30px] sm:blur-[45px] rounded-full -ml-8 -mt-6 sm:-ml-12 sm:-mt-10\",initial:{scale:0,opacity:0},animate:{scale:1.8,opacity:.8},transition:{delay:.4,duration:1.2,ease:\"easeOut\"}}),n.jsx(Le.div,{className:\"absolute w-20 h-20 sm:w-32 sm:h-32 bg-rose-500/30 blur-[25px] sm:blur-[40px] rounded-full ml-10 mt-8 sm:ml-16 sm:mt-12\",initial:{scale:0,opacity:0},animate:{scale:1.6,opacity:.8},transition:{delay:.5,duration:1.2,ease:\"easeOut\"}})]})]}),n.jsxs(Le.div,{className:\"text-center space-y-2 sm:space-y-4\",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:.6},children:[n.jsx(\"h3\",{className:\"text-lg sm:text-3xl font-black bg-gradient-to-r from-yellow-200 via-yellow-500 to-yellow-200 bg-clip-text text-transparent tracking-tight transition-all\",children:h.name}),n.jsx(\"p\",{className:\"text-slate-400 font-bold text-[11px] sm:text-sm leading-relaxed max-w-[200px] sm:max-w-[280px] mx-auto transition-all\",children:h.description})]}),n.jsx(Le.div,{className:\"flex justify-center\",initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},children:n.jsxs(\"div\",{className:\"flex items-center gap-3 sm:gap-4\",children:[n.jsx(\"div\",{className:\"h-px w-12 sm:w-20 bg-gradient-to-r from-transparent via-white/10 to-transparent\"}),n.jsx(\"div\",{className:\"w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full bg-yellow-500/50 blur-[1px] animate-pulse\"}),n.jsx(\"div\",{className:\"h-px w-12 sm:w-20 bg-gradient-to-r from-transparent via-white/10 to-transparent\"})]})}),n.jsxs(Le.div,{className:\"p-4 sm:p-8 bg-white/5 rounded-2xl sm:rounded-[32px] border border-white/5 relative overflow-hidden transition-all\",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:1},children:[n.jsx(\"div\",{className:\"absolute top-0 left-0 w-12 h-12 bg-indigo-500 blur-2xl opacity-5\"}),n.jsxs(\"div\",{className:\"flex items-start gap-3 sm:gap-6 relative z-10 text-left\",children:[n.jsx(\"span\",{className:\"text-xl sm:text-3xl pt-0 opacity-40\",children:'\"'}),n.jsxs(\"div\",{className:\"flex-1\",children:[n.jsx(\"p\",{className:\"text-[10px] sm:text-sm font-bold italic text-slate-300 leading-snug sm:leading-relaxed tracking-tight transition-all\",children:u.text}),n.jsxs(\"div\",{className:\"flex items-center gap-2 sm:gap-4 mt-3 sm:mt-6 transition-all\",children:[n.jsx(\"div\",{className:\"h-px flex-1 bg-white/5\"}),n.jsxs(\"p\",{className:\"text-[8px] sm:text-[10px] font-black text-slate-500 uppercase tracking-widest shrink-0\",children:[\"— \",u.author]})]})]})]})]})]})]})}):null}const Gp=({accounts:i,goals:l,liabilities:o,expenses:u,emergencyFundAmount:d=0})=>{const h=x.useMemo(()=>i.filter(f=>f.type===\"bank\"||f.type===\"cash\").reduce((f,w)=>f+w.balance,0),[i]),g=x.useMemo(()=>i.filter(f=>f.type===\"credit_card\").reduce((f,w)=>f+Math.abs(w.balance),0),[i]),N=x.useMemo(()=>{const f=o.reduce((A,T)=>A+(T.emiAmount||0),0),w=u.filter(A=>A.isRecurring).reduce((A,T)=>A+T.amount,0);return f+w},[o,u]),E=x.useMemo(()=>l.reduce((w,A)=>w+A.currentAmount,0)+(d||0),[l,d]),S=x.useMemo(()=>E+N,[E,N]),p=x.useMemo(()=>{const f=h-S;return Math.max(0,f)},[h,S]);return{totalBankBalance:h,totalCreditUsage:g,totalCommitments:N,shadowWalletTotal:E,totalReserved:S,availableToSpend:p}},Ki=({children:i,icon:l,variant:o=\"blue\",className:u,...d})=>{const h={blue:\"border-blue-500/50 text-blue-400 hover:border-blue-500 hover:shadow-[0_0_20px_rgba(59,130,246,0.4)] shadow-[0_0_10px_rgba(59,130,246,0.2)]\",green:\"border-emerald-500/50 text-emerald-400 hover:border-emerald-500 hover:shadow-[0_0_20px_rgba(16,185,129,0.4)] shadow-[0_0_10px_rgba(16,185,129,0.2)]\",purple:\"border-purple-500/50 text-purple-400 hover:border-purple-500 hover:shadow-[0_0_20px_rgba(168,85,247,0.4)] shadow-[0_0_10px_rgba(168,85,247,0.2)]\",rose:\"border-rose-500/50 text-rose-400 hover:border-rose-500 hover:shadow-[0_0_20px_rgba(244,63,94,0.4)] shadow-[0_0_10px_rgba(244,63,94,0.2)]\"};return n.jsxs(\"button\",{className:De(\"relative group flex items-center justify-center gap-2 px-6 h-11\",\"bg-[#0A141E]/80 backdrop-blur-md border-2 rounded-2xl transition-all duration-300\",\"font-mono font-bold uppercase tracking-widest text-[10px]\",\"hover:scale-[1.02] active:scale-[0.98]\",h[o],u),...d,children:[l&&n.jsx(l,{className:\"w-4 h-4 transition-all duration-700 ease-quantum group-hover:rotate-[720deg] active:-rotate-12\"}),n.jsx(\"span\",{children:i})]})};function oN({isOpen:i,onClose:l,accounts:o,goals:u,currency:d,destinationType:h,emergencyFund:g,onAllocate:N,liabilities:E=[],expenses:S=[]}){const[p,f]=x.useState(\"\"),[w,A]=x.useState(\"\"),[T,C]=x.useState(\"\"),[M,y]=x.useState(!1),[L,z]=x.useState(!1),{availableToSpend:j,totalBankBalance:G,shadowWalletTotal:ee,totalCommitments:Z}=Gp({accounts:o,goals:u,liabilities:E,expenses:S,emergencyFundAmount:g?.currentAmount||0});x.useEffect(()=>{if(i&&!p&&o.length>0){const k=o.filter(U=>U.type===\"bank\"||U.type===\"cash\");if(k.length>0){const U=k.find(Q=>Q.balance>=j)||[...k].sort((Q,ae)=>ae.balance-Q.balance)[0];U&&queueMicrotask(()=>{f(U.id)})}}},[i,j,o,p]);const _=o.find(k=>k.id===p),B=u.find(k=>k.id===w),J=parseFloat(T)||0,ne=()=>{if(j>0){if(C(j.toString()),h===\"goal\"&&!w&&u.length>0){const k=[...u].sort((U,Q)=>{const ae=new Date(U.targetDate).getTime(),v=new Date(Q.targetDate).getTime();if(ae!==v)return ae-v;const D=U.currentAmount/U.targetAmount,W=Q.currentAmount/Q.targetAmount;return D-W});A(k[0].id),ce.info(`Suggested: ${k[0].name} based on timeline & progress`,{icon:n.jsx(Ga,{className:\"w-4 h-4 text-blue-400\"})})}}else ce.error(\"No surplus liquidity available for auto-fill\")},F=()=>{if(!p){ce.error(\"Please select an account\");return}if(h===\"goal\"&&!w){ce.error(\"Please select a goal\");return}if(!T||J<=0){ce.error(\"Please enter a valid amount\");return}if(_&&J>_.balance){ce.error(\"Insufficient balance in selected account\");return}y(!0)},oe=()=>{N({accountId:p,destinationId:h===\"goal\"?w:\"emergency-fund\",amount:J,destinationType:h}),f(\"\"),A(\"\"),C(\"\"),y(!1),l()},ge=()=>{y(!1)},O=()=>{f(\"\"),A(\"\"),C(\"\"),y(!1),z(!1),l()};return n.jsx(us,{open:i,onOpenChange:O,children:n.jsx(ds,{className:\"max-w-md bg-black border-white/5 text-white p-0 custom-scrollbar sq-2xl overflow-hidden\",children:n.jsxs(\"div\",{className:\"max-h-[85vh] overflow-y-auto p-8 custom-scrollbar\",children:[n.jsxs(fs,{className:\"mb-6\",children:[n.jsx(ms,{className:\"text-xl font-black tracking-tight text-white mb-1\",children:h===\"goal\"?\"🎯 ALLOCATE TO GOAL\":\"🛡️ ALLOCATE TO RESERVE\"}),n.jsxs(hs,{className:\"text-slate-500 text-[10px] uppercase font-black tracking-widest\",children:[\"Move funds from account to \",h===\"goal\"?\"savings milestone\":\"emergency reserve\"]})]}),M?n.jsxs(\"div\",{className:\"space-y-6 py-4\",children:[n.jsx(\"div\",{className:\"text-center pt-2\",children:n.jsx(\"p\",{className:\"text-[10px] text-emerald-500 uppercase font-black tracking-[0.2em] animate-pulse\",children:\"Ready to Allocate Funds\"})}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"div\",{className:\"p-5 bg-white/5 sq-md border border-white/10 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 p-2 opacity-5\",children:n.jsx(zu,{className:\"w-8 h-8\"})}),n.jsx(\"p\",{className:\"text-[8px] text-slate-500 uppercase font-black tracking-widest mb-3 opacity-60\",children:\"Debit Source\"}),n.jsx(\"p\",{className:\"font-black text-sm text-white tracking-tight\",children:_?.name}),n.jsxs(\"div\",{className:\"mt-4 space-y-2.5\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-medium\",children:[n.jsx(\"span\",{className:\"text-slate-400 uppercase tracking-tighter\",children:\"Current Liquidity\"}),n.jsx(\"span\",{className:\"font-mono text-white\",children:Ne(_?.balance||0,d)})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-bold text-rose-500\",children:[n.jsx(\"span\",{className:\"uppercase tracking-tighter\",children:\"Debit Volume\"}),n.jsxs(\"span\",{className:\"font-mono\",children:[\"-\",Ne(J,d)]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"flex justify-between text-xs font-black\",children:[n.jsx(\"span\",{className:\"text-slate-500 uppercase tracking-widest\",children:\"Post-Debit Projection\"}),n.jsx(\"span\",{className:\"text-blue-400 font-mono\",children:Ne((_?.balance||0)-J,d)})]})]})]}),n.jsx(\"div\",{className:\"flex justify-center -my-2 relative z-10\",children:n.jsx(\"div\",{className:\"w-10 h-10 bg-blue-600 sq-md flex items-center justify-center shadow-[0_0_20px_rgba(37,99,235,0.3)] border border-blue-400/20\",children:n.jsx(P0,{className:\"w-5 h-5 text-white\"})})}),n.jsxs(\"div\",{className:`p-5 sq-md border relative overflow-hidden ${h===\"goal\"?\"bg-emerald-500/5 border-emerald-500/20\":\"bg-blue-500/5 border-blue-500/20\"}`,children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 p-2 opacity-10\",children:h===\"goal\"?n.jsx(Ga,{className:\"w-8 h-8 text-emerald-500\"}):n.jsx(Hn,{className:\"w-8 h-8 text-blue-500\"})}),n.jsx(\"p\",{className:\"text-[8px] text-slate-500 uppercase font-black tracking-widest mb-3 opacity-60\",children:\"Credit Destination\"}),n.jsxs(\"div\",{className:\"flex items-center gap-2 mb-4\",children:[n.jsx(\"span\",{className:\"text-xl\",children:h===\"goal\"?B?.emoji:\"🛡️\"}),n.jsx(\"p\",{className:\"font-black text-sm text-white tracking-tight\",children:h===\"goal\"?B?.name:\"Emergency Reserve\"})]}),n.jsxs(\"div\",{className:\"space-y-2.5\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-medium\",children:[n.jsx(\"span\",{className:\"text-slate-400 uppercase tracking-tighter\",children:\"Current Level\"}),n.jsx(\"span\",{className:\"font-mono text-white\",children:Ne((h===\"goal\"?B?.currentAmount:g?.currentAmount)||0,d)})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-bold text-emerald-400\",children:[n.jsx(\"span\",{className:\"uppercase tracking-tighter\",children:\"Credit Volume\"}),n.jsxs(\"span\",{className:\"font-mono\",children:[\"+\",Ne(J,d)]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"flex justify-between text-xs font-black\",children:[n.jsx(\"span\",{className:\"text-slate-500 uppercase tracking-widest\",children:\"Post-Credit Value\"}),n.jsx(\"span\",{className:\"text-emerald-400 font-mono\",children:Ne(((h===\"goal\"?B?.currentAmount:g?.currentAmount)||0)+J,d)})]})]})]})]}),n.jsx(\"div\",{className:\"p-4 bg-amber-500/5 border border-amber-500/20 sq-md\",children:n.jsxs(\"div\",{className:\"flex gap-3\",children:[n.jsx(Eu,{className:\"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5\"}),n.jsxs(\"div\",{className:\"text-[10px]\",children:[n.jsx(\"p\",{className:\"font-black text-amber-400 uppercase tracking-widest mb-1\",children:\"Node Equilibrium Warning\"}),n.jsxs(\"p\",{className:\"text-amber-500/70 font-bold leading-relaxed\",children:[\"Net Liquidity and \",_?.name,\" reserves will be reduced by \",Ne(J,d),\" immediately. This action is final.\"]})]})]})}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Ki,{onClick:ge,className:\"flex-1 h-12 text-slate-500 hover:text-white border-white/5 font-black tracking-[0.2em]\",children:\"Re-Configure\"}),n.jsx(Ki,{onClick:oe,className:\"flex-1 h-12 bg-emerald-600/20 text-emerald-400 border-emerald-500/30 font-black tracking-[0.2em] shadow-lg shadow-emerald-500/10\",children:\"Execute Move\"})]})]}):n.jsxs(\"div\",{className:\"space-y-6\",children:[j>0&&n.jsxs(\"div\",{className:\"relative group overflow-hidden sq-xl border border-emerald-500/20 bg-emerald-500/5 p-5 transition-all hover:bg-emerald-500/10 mb-2\",children:[n.jsx(Qu,{variant:\"savings\"}),n.jsxs(\"div\",{className:\"relative z-10 flex flex-col gap-4\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-10 h-10 bg-emerald-500/20 sq-md flex items-center justify-center border border-emerald-500/30\",children:n.jsx(Ga,{className:\"w-5 h-5 text-emerald-400\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-[9px] text-emerald-500/70 font-black uppercase tracking-widest\",children:\"Surplus Detected\"}),n.jsx(\"h4\",{className:\"text-xl font-black text-white tabular-nums\",children:Ne(j,d)})]})]}),n.jsx(\"button\",{onClick:()=>z(!L),className:\"p-2 hover:bg-white/5 rounded-full transition-colors text-slate-500 hover:text-white\",title:\"Show Calculation\",children:L?n.jsx(_r,{className:\"w-4 h-4\"}):n.jsx(K0,{className:\"w-4 h-4\"})})]}),L&&n.jsxs(\"div\",{className:\"py-3 border-t border-emerald-500/10 space-y-2 animate-in fade-in slide-in-from-top-2 duration-300\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-emerald-500/60 font-medium\",children:[n.jsx(\"span\",{children:\"Total Liquidity\"}),n.jsx(\"span\",{children:Ne(G,d)})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-rose-500/60 font-medium\",children:[n.jsx(\"span\",{children:\"Shadow Wallet (Goals + EF)\"}),n.jsxs(\"span\",{children:[\"-\",Ne(ee,d)]})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-rose-500/60 font-medium pb-2 border-b border-emerald-500/10\",children:[n.jsx(\"span\",{children:\"Total Commitments (Bills)\"}),n.jsxs(\"span\",{children:[\"-\",Ne(Z,d)]})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-emerald-400 font-bold uppercase pt-1\",children:[n.jsx(\"span\",{children:\"Available Safety Margin\"}),n.jsx(\"span\",{children:Ne(j,d)})]})]}),n.jsx(Ki,{onClick:()=>{ne(),_&&j>_.balance&&ce.warning(\"Surplus exceeds selected account balance. Source adjusted.\")},className:\"w-full h-11 bg-emerald-500/20 text-emerald-400 border-emerald-500/30 font-black tracking-widest\",children:\"Allocate All Surplus\"})]})]}),n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(ye,{htmlFor:\"allocate-from-account\",className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 mb-2 block\",children:\"Source Node\"}),n.jsxs(Ut,{value:p,onValueChange:f,children:[n.jsx(Bt,{id:\"allocate-from-account\",name:\"fromAccountId\",className:\"bg-black border-white/5 sq-md h-14 text-white focus:ring-1 focus:ring-blue-500/50\",children:n.jsx(It,{placeholder:\"Select Capital Source\"})}),n.jsx(qt,{className:\"bg-black border-white/10 text-white sq-xl\",children:o.map(k=>n.jsx(qe,{value:k.id,className:\"hover:bg-white/5\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between w-full\",children:[n.jsxs(\"span\",{children:[k.icon,\" \",k.name]}),n.jsx(\"span\",{className:\"text-[10px] text-slate-500 ml-4 font-mono\",children:Ne(k.balance,d)})]})},k.id))})]}),_&&n.jsxs(\"p\",{className:\"text-[10px] text-slate-500 mt-2 italic px-1\",children:[\"Available Liquidity: \",Ne(_.balance,d)]})]}),h===\"goal\"?n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(ye,{htmlFor:\"allocate-to-goal\",className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 mb-2 block\",children:\"Target Milestone\"}),n.jsxs(Ut,{value:w,onValueChange:A,children:[n.jsx(Bt,{id:\"allocate-to-goal\",name:\"toGoalId\",className:\"bg-black border-white/5 sq-md h-14 text-white focus:ring-1 focus:ring-emerald-500/50\",children:n.jsx(It,{placeholder:\"Choose Destination Goal\"})}),n.jsx(qt,{className:\"bg-black border-white/10 text-white sq-xl\",children:u.map(k=>{const U=k.currentAmount/k.targetAmount*100;return n.jsx(qe,{value:k.id,className:\"hover:bg-white/5\",children:n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(\"span\",{className:\"text-lg\",children:k.emoji}),n.jsxs(\"div\",{className:\"min-w-0\",children:[n.jsx(\"div\",{className:\"font-bold text-xs uppercase tracking-tight\",children:k.name}),n.jsxs(\"div\",{className:\"text-[9px] text-slate-500 font-mono\",children:[Math.round(U),\"% SYNCHRONIZED • \",Ne(k.currentAmount,d)]})]})]})},k.id)})})]})]}):n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(ye,{className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 mb-2 block\",children:\"Stability Reserve\"}),n.jsx(\"div\",{className:\"p-4 bg-white/5 border border-white/10 sq-md\",children:n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-10 h-10 bg-blue-500/10 sq-md flex items-center justify-center border border-blue-500/20\",children:\"🛡️\"}),n.jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[n.jsx(\"p\",{className:\"font-black text-xs uppercase tracking-widest text-white\",children:\"Emergency Fund\"}),g&&n.jsxs(\"p\",{className:\"text-[9px] text-slate-500 font-mono mt-1\",children:[Ne(g.currentAmount,d),\" / \",Ne(g.targetAmount,d)]})]})]})})]}),n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(\"div\",{className:\"flex justify-between items-center mb-1\",children:n.jsx(ye,{htmlFor:\"allocate-amount\",className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 block\",children:\"Contribution Volume\"})}),n.jsxs(\"div\",{className:\"relative\",children:[n.jsx(\"span\",{className:\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500\",children:d===\"INR\"?\"₹\":\"$\"}),n.jsx(wt,{id:\"allocate-amount\",name:\"amount\",type:\"number\",placeholder:\"0\",value:T,onChange:k=>C(k.target.value),className:\"pl-8 bg-black border-white/5 h-12\",min:\"0\",step:\"0.01\"})]}),_&&J>_.balance&&n.jsxs(\"div\",{className:\"flex items-center gap-2 text-sm text-red-600\",children:[n.jsx(Eu,{className:\"w-4 h-4\"}),n.jsx(\"span\",{children:\"Amount exceeds available balance\"})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Ki,{onClick:O,className:\"flex-1 h-12 text-slate-500 hover:text-white border-white/5 font-black tracking-[0.2em]\",children:\"Abort\"}),n.jsx(Ki,{onClick:F,className:\"flex-1 h-12 bg-blue-600/20 text-blue-400 border-blue-500/30 font-black tracking-[0.2em] shadow-lg shadow-blue-500/10\",children:\"Preview Mode\"})]})]})]})})})}const cN=[{name:\"HDFC Bank\",icon:\"🏦\",color:\"#1d4ed8\",type:\"bank\"},{name:\"ICICI Bank\",icon:\"🏦\",color:\"#ea580c\",type:\"bank\"},{name:\"State Bank of India\",icon:\"🏦\",color:\"#2563eb\",type:\"bank\"},{name:\"Axis Bank\",icon:\"🏦\",color:\"#9d174d\",type:\"bank\"},{name:\"Kotak Mahindra Bank\",icon:\"🏦\",color:\"#dc2626\",type:\"bank\"},{name:\"Bank of America\",icon:\"🏦\",color:\"#0033aa\",type:\"bank\"},{name:\"Chase Bank\",icon:\"🏦\",color:\"#117aca\",type:\"bank\"},{name:\"Wells Fargo\",icon:\"🏦\",color:\"#d71e28\",type:\"bank\"},{name:\"HSBC\",icon:\"🏦\",color:\"#db0011\",type:\"bank\"},{name:\"Barclays\",icon:\"🏦\",color:\"#00aeef\",type:\"bank\"},{name:\"Standard Chartered\",icon:\"🏦\",color:\"#00945e\",type:\"bank\"},{name:\"Citibank\",icon:\"🏦\",color:\"#003b70\",type:\"bank\"},{name:\"DBS Bank\",icon:\"🏦\",color:\"#ff0000\",type:\"bank\"},{name:\"Federal Bank\",icon:\"🏦\",color:\"#0b5a91\",type:\"bank\"},{name:\"American Express\",icon:\"💳\",color:\"#006fcf\",type:\"credit_card\"},{name:\"Discover\",icon:\"💳\",color:\"#ff6600\",type:\"credit_card\"},{name:\"Capital One\",icon:\"💳\",color:\"#d22e2e\",type:\"credit_card\"},{name:\"Goldman Sachs\",icon:\"🏦\",color:\"#725a34\",type:\"bank\"},{name:\"Morgan Stanley\",icon:\"🏦\",color:\"#000033\",type:\"bank\"},{name:\"Apple Card\",icon:\"💳\",color:\"#000000\",type:\"credit_card\"},{name:\"PayPal\",icon:\"💳\",color:\"#003087\",type:\"credit_card\"},{name:\"Revolut\",icon:\"💳\",color:\"#000000\",type:\"credit_card\"},{name:\"Monzo\",icon:\"💳\",color:\"#ff4d4f\",type:\"credit_card\"}];function uN({accounts:i,currency:l,onCreateAccount:o,onUpdateAccount:u,onDeleteAccount:d}){const[h,g]=x.useState(!1),[N,E]=x.useState(null),[S,p]=x.useState({name:\"\",type:\"bank\",balance:0,color:Wc[0],icon:eu[0].value,creditLimit:0,safeLimitPercentage:30,serviceChargePercentage:0,statementDate:1}),[f,w]=x.useState([]),A=j=>{j?(E(j),p({name:j.name,type:j.type,balance:j.balance,color:j.color,icon:j.icon,creditLimit:j.creditLimit||0,safeLimitPercentage:j.safeLimitPercentage||30,serviceChargePercentage:j.serviceChargePercentage||0,statementDate:j.statementDate||1})):(E(null),p({name:\"\",type:\"bank\",balance:0,color:Wc[0],icon:eu[0].value,creditLimit:0,safeLimitPercentage:30,serviceChargePercentage:0,statementDate:1})),w([]),g(!0)},T=j=>{if(p({...S,name:j}),j.length>1){const G=cN.filter(ee=>ee.name.toLowerCase().includes(j.toLowerCase())).slice(0,4);w(G)}else w([])},C=j=>{p({...S,name:j.name,type:j.type,icon:j.icon,color:j.color}),w([])},M=async j=>{if(j.preventDefault(),!S.name.trim()){ce.error(\"Please enter an account name\");return}try{N?await u(N.id,S):await o(S),g(!1)}catch(G){console.error(\"Error saving account:\",G)}},y=async j=>{if(confirm(\"Are you sure you want to delete this account? This action cannot be undone.\"))try{await d(j)}catch(G){console.error(\"Error deleting account:\",G)}};return n.jsxs(\"div\",{className:\"space-y-12 animate-in fade-in slide-in-from-bottom-4 duration-700 px-4 pb-24\",children:[n.jsxs(\"div\",{className:\"flex items-end justify-between gap-6\",children:[n.jsxs(\"div\",{className:\"min-w-0\",children:[n.jsx(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tight leading-none mb-3 truncate\",children:\"Accounts & Cards\"}),n.jsxs(\"div\",{className:\"flex flex-wrap gap-2 mb-3\",children:[n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-emerald-500 bg-emerald-500/10 px-2 py-0.5 rounded-lg border border-emerald-500/20 whitespace-nowrap\",children:[i.filter(j=>j.type===\"bank\").length,\" Banks\"]}),n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-rose-500 bg-rose-500/10 px-2 py-0.5 rounded-lg border border-rose-500/20 whitespace-nowrap\",children:[i.filter(j=>j.type===\"credit_card\").length,\" Credit\"]}),n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-amber-500 bg-amber-500/10 px-2 py-0.5 rounded-lg border border-amber-500/20 whitespace-nowrap\",children:[i.filter(j=>j.type===\"cash\").length,\" Cash\"]}),n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-blue-500 bg-blue-500/10 px-2 py-0.5 rounded-lg border border-blue-500/20 whitespace-nowrap\",children:[i.filter(j=>j.type===\"investment\").length,\" Holding\"]})]}),n.jsx(\"p\",{className:\"text-slate-500 font-bold max-w-md text-[10px] truncate\",children:\"Monitor liquidity across core reservoirs and credit pools.\"})]}),n.jsxs(Re,{onClick:()=>A(),className:\"bg-emerald-600 hover:bg-emerald-500 text-white rounded-xl px-6 h-12 font-bold shadow-lg shadow-emerald-600/20 transition-all active:scale-95 shrink-0\",children:[n.jsx(kr,{className:\"w-4 h-4 sm:mr-2\"}),n.jsx(\"span\",{className:\"hidden sm:inline\",children:\"Add Account\"}),n.jsx(\"span\",{className:\"sm:hidden\",children:\"Add\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(Ny,{className:\"w-3.5 h-3.5\"}),\"Bank Accounts\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(j=>j.type===\"bank\").map(j=>n.jsx(L,{account:j},j.id)),i.filter(j=>j.type===\"bank\").length===0&&n.jsx(z,{message:\"No bank accounts detected.\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(Sy,{className:\"w-3.5 h-3.5\"}),\"Credit Pools (Cards)\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(j=>j.type===\"credit_card\").map(j=>n.jsx(L,{account:j},j.id)),i.filter(j=>j.type===\"credit_card\").length===0&&n.jsx(z,{message:\"No credit pools detected.\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(zu,{className:\"w-3.5 h-3.5\"}),\"Cash in Hand\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(j=>j.type===\"cash\").map(j=>n.jsx(L,{account:j},j.id)),i.filter(j=>j.type===\"cash\").length===0&&n.jsx(z,{message:\"No physical liquid reservoirs detected.\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(qn,{className:\"w-3.5 h-3.5\"}),\"Investment Holding Nodes\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(j=>j.type===\"investment\").map(j=>n.jsx(L,{account:j},j.id)),i.filter(j=>j.type===\"investment\").length===0&&n.jsx(\"div\",{className:\"md:col-span-2 lg:col-span-3 p-8 border border-dashed border-white/5 squircle-22 flex items-center justify-center text-slate-600 font-bold text-xs\",children:\"No investment nodes detected. Link them to track growth separately.\"})]})]}),n.jsx(us,{open:h,onOpenChange:g,children:n.jsxs(ds,{className:\"max-w-md max-h-[90vh] overflow-y-auto bg-slate-950 border-white/10 text-white squircle-22 p-8 custom-scrollbar\",children:[n.jsxs(fs,{children:[n.jsx(ms,{className:\"text-3xl font-black tracking-tight text-white mb-2\",children:N?\"Refine Account\":\"New Liquidity Reservoir\"}),n.jsx(hs,{className:\"text-slate-500 font-bold mb-6\",children:\"Establish a new liquidity pool in the Obsidian system.\"})]}),n.jsxs(\"form\",{onSubmit:M,className:\"space-y-8\",children:[n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"name\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Account Identity\"}),n.jsx(wt,{id:\"name\",name:\"name\",value:S.name,onChange:j=>T(j.target.value),placeholder:\"e.g. Mercury Checking\",required:!0,className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white focus:ring-emerald-500/50\",autoComplete:\"off\"}),f.length>0&&n.jsxs(\"div\",{className:\"mt-3 p-4 bg-indigo-500/5 border border-indigo-500/10 squircle-12 flex items-start gap-4 animate-in fade-in zoom-in-95 duration-300\",children:[n.jsx(Ga,{className:\"w-4 h-4 text-indigo-400 mt-1 flex-shrink-0\"}),n.jsxs(\"div\",{className:\"flex-1\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-widest text-indigo-300 mb-3 opacity-60\",children:\"Intelligence Suggested\"}),n.jsx(\"div\",{className:\"grid grid-cols-1 gap-2\",children:f.map(j=>n.jsxs(\"button\",{type:\"button\",onClick:()=>C(j),className:\"flex items-center gap-3 p-2.5 squircle-12 bg-white/5 hover:bg-white/10 transition-all group border border-white/5\",children:[n.jsx(\"span\",{className:\"text-lg group-hover:scale-110 transition-transform\",children:j.icon}),n.jsx(\"span\",{className:\"text-xs font-bold text-slate-300 group-hover:text-white transition-colors\",children:j.name})]},j.name))})]})]})]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 md:grid-cols-3 gap-4\",children:[n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${S.type===\"bank\"?\"border-emerald-500 bg-emerald-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>p({...S,type:\"bank\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-emerald-500/20 flex items-center justify-center text-xl mb-2\",children:\"🏦\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Bank Reservoir\"})]}),n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${S.type===\"credit_card\"?\"border-rose-500 bg-rose-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>p({...S,type:\"credit_card\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-rose-500/20 flex items-center justify-center text-xl mb-2\",children:\"💳\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Credit Pool\"})]}),n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${S.type===\"cash\"?\"border-amber-500 bg-amber-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>p({...S,type:\"cash\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-amber-500/20 flex items-center justify-center text-xl mb-2\",children:\"💵\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Cash in Hand\"})]}),n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${S.type===\"investment\"?\"border-blue-500 bg-blue-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>p({...S,type:\"investment\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-blue-500/20 flex items-center justify-center text-xl mb-2\",children:\"📈\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Growth Node\"})]})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"balance\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:S.type===\"bank\"||S.type===\"cash\"||S.type===\"investment\"?\"Initial Liquidity\":\"Current Spent Balance\"}),n.jsx(Ha,{id:\"balance\",name:\"balance\",value:S.balance,onChange:j=>p({...S,balance:parseFloat(j)||0}),placeholder:\"0.00\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]}),S.type===\"credit_card\"&&n.jsxs(\"div\",{className:\"space-y-6 animate-in slide-in-from-top-4 duration-500\",children:[n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"creditLimit\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Total Credit Limit\"}),n.jsx(Ha,{id:\"creditLimit\",name:\"creditLimit\",value:S.creditLimit,onChange:j=>p({...S,creditLimit:parseFloat(j)||0}),placeholder:\"e.g. 100000\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"safeLimit\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Safe Use Threshold (%)\"}),n.jsx(Ha,{id:\"safeLimit\",name:\"safeLimitPercentage\",value:S.safeLimitPercentage,onChange:j=>p({...S,safeLimitPercentage:parseFloat(j)||30}),placeholder:\"30\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"serviceCharge\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Svc Charge (%)\"}),n.jsx(Ha,{id:\"serviceCharge\",name:\"serviceChargePercentage\",value:S.serviceChargePercentage,onChange:j=>p({...S,serviceChargePercentage:parseFloat(j)||0}),placeholder:\"0.0\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"statementDate\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Statement Date\"}),n.jsxs(Ut,{value:S.statementDate.toString(),onValueChange:j=>p({...S,statementDate:parseInt(j)}),children:[n.jsx(Bt,{id:\"statementDate\",name:\"statementDate\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",children:n.jsx(It,{})}),n.jsx(qt,{className:\"bg-slate-900 border-white/10 text-white\",children:[...Array(31)].map((j,G)=>n.jsx(qe,{value:(G+1).toString(),children:G+1},G+1))})]})]})]})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"System Icon\"}),n.jsx(\"div\",{className:\"grid grid-cols-6 sm:grid-cols-9 gap-2\",children:eu.map(j=>n.jsx(\"button\",{type:\"button\",onClick:()=>p({...S,icon:j.value}),className:`w-10 h-10 squircle-12 flex items-center justify-center text-lg border-2 transition-all ${S.icon===j.value?\"border-emerald-500 bg-emerald-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,children:j.value},j.value))})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Brand Color\"}),n.jsx(\"div\",{className:\"flex flex-wrap gap-3\",children:Wc.map(j=>{const G={style:{\"--btn-color\":j}};return n.jsx(\"button\",{type:\"button\",onClick:()=>p({...S,color:j}),\"aria-label\":`Select color ${j}`,className:`w-8 h-8 rounded-full border-4 transition-all bg-[length:100%_100%] bg-[var(--btn-color)] ${S.color===j?\"border-white scale-110 shadow-lg shadow-white/20\":\"border-transparent hover:scale-105\"}`,...G},j)})})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Re,{type:\"button\",variant:\"ghost\",onClick:()=>g(!1),className:\"flex-1 h-14 squircle-12 font-bold text-slate-500 hover:text-white\",children:\"Abort\"}),n.jsx(Re,{type:\"submit\",className:\"flex-1 h-14 squircle-12 bg-emerald-600 hover:bg-emerald-500 text-white font-black shadow-lg shadow-emerald-600/20\",children:N?\"Update Account\":\"Ignite Account\"})]})]})]})})]});function L({account:j}){const G=j.type===\"credit_card\",ee=G?(j.creditLimit||0)*(j.safeLimitPercentage||30)/100:0,Z=G&&j.creditLimit?Math.abs(j.balance)/j.creditLimit*100:0,_=G&&Z<=(j.safeLimitPercentage||30);return n.jsxs(Ot,{className:\"p-6 bg-slate-900/40 border-white/5 squircle-22 border hover:bg-slate-900/60 transition-all duration-300 group relative overflow-hidden\",children:[(()=>{const B={style:{\"--card-glow\":j.color}};return n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20 bg-[var(--card-glow)]\",...B})})(),n.jsxs(\"div\",{className:\"flex items-start justify-between mb-8 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[(()=>{const B={style:{\"--icon-bg\":j.color+\"15\"}};return n.jsx(\"div\",{className:\"w-16 h-16 squircle-12 flex items-center justify-center text-3xl shadow-inner border border-white/5 group-hover:scale-105 transition-transform bg-[var(--icon-bg)]\",...B,children:j.icon})})(),n.jsxs(\"div\",{className:\"min-w-0\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100 truncate\",children:j.name}),n.jsxs(\"div\",{className:\"flex items-center gap-1.5 mt-1\",children:[n.jsx(\"div\",{className:`w-1.5 h-1.5 rounded-full ${G?_?\"bg-indigo-500\":\"bg-rose-500\":\"bg-emerald-500\"}`}),n.jsx(\"span\",{className:\"text-[10px] uppercase font-black tracking-widest text-slate-500\",children:G?\"Credit Pool\":\"Bank Account\"})]})]})]}),n.jsxs(\"div\",{className:\"flex gap-2\",children:[n.jsx(Re,{variant:\"ghost\",title:\"Edit Account\",size:\"sm\",onClick:()=>A(j),className:\"w-8 h-8 p-0 squircle-12 hover:bg-white/5 text-slate-600 hover:text-white transition-all\",children:n.jsx(Cy,{className:\"w-3.5 h-3.5\"})}),n.jsx(Re,{variant:\"ghost\",title:\"Delete Account\",size:\"sm\",onClick:()=>y(j.id),className:\"w-8 h-8 p-0 squircle-12 hover:bg-rose-500/10 text-slate-600 hover:text-rose-400 transition-all\",children:n.jsx(tl,{className:\"w-3.5 h-3.5\"})})]})]}),n.jsxs(\"div\",{className:\"pt-6 border-t border-white/5 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-end\",children:[n.jsxs(\"div\",{className:\"space-y-1\",children:[n.jsx(\"p\",{className:\"text-[10px] uppercase font-black tracking-widest text-slate-600\",children:G?\"Current Obligation\":\"Available Liquidity\"}),(()=>{const B={style:{\"--balance-color\":j.color}};return n.jsx(\"h4\",{className:\"text-2xl font-black tabular-nums tracking-tight text-[var(--balance-color)]\",...B,children:Ne(j.balance,l)})})()]}),G&&j.creditLimit?n.jsxs(\"div\",{className:\"text-right\",children:[n.jsx(\"p\",{className:\"text-[9px] font-black text-slate-600 uppercase mb-1\",children:\"Limit Use\"}),n.jsxs(\"p\",{className:`text-xs font-black tabular-nums ${_?\"text-indigo-400\":\"text-rose-400\"}`,children:[Z.toFixed(1),\"%\"]})]}):n.jsx(\"div\",{className:\"bg-white/5 px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest text-slate-500 border border-white/5\",children:\"Synced\"})]}),G&&j.creditLimit&&n.jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-white/5 flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"space-y-1\",children:[n.jsx(\"p\",{className:\"text-[8px] font-black text-slate-700 uppercase\",children:\"Safe Threshold\"}),n.jsx(\"p\",{className:\"text-[10px] font-black text-slate-500\",children:Ne(ee,l)})]}),j.serviceChargePercentage?n.jsxs(\"div\",{className:\"text-right space-y-1\",children:[n.jsx(\"p\",{className:\"text-[8px] font-black text-slate-700 uppercase\",children:\"Svc Charge\"}),n.jsxs(\"p\",{className:\"text-[10px] font-black text-slate-500\",children:[j.serviceChargePercentage,\"%\"]})]}):null,G&&j.statementDate&&n.jsxs(\"div\",{className:\"text-right space-y-1 ml-auto\",children:[n.jsx(\"p\",{className:\"text-[8px] font-black text-slate-700 uppercase\",children:\"Statement\"}),n.jsxs(\"p\",{className:\"text-[10px] font-black text-slate-500\",children:[\"Day \",j.statementDate]})]})]})]})]})}function z({message:j}){return n.jsx(\"div\",{className:\"py-12 text-center bg-slate-800/20 squircle-22 border border-dashed border-white/10 col-span-full\",children:n.jsx(\"p\",{className:\"text-sm text-slate-500 font-bold\",children:j})})}}function dN({isOpen:i,onClose:l,accounts:o,currency:u,onTransfer:d}){const[h,g]=x.useState(\"\"),[N,E]=x.useState(\"\"),[S,p]=x.useState(\"\"),[f,w]=x.useState(!1),A=o.find(z=>z.id===h),T=o.find(z=>z.id===N),C=parseFloat(S)||0,M=()=>{if(!h){ce.error(\"Please select source reservoir\");return}if(!N){ce.error(\"Please select destination reservoir\");return}if(h===N){ce.error(\"Source and destination must be different\");return}if(!S||C<=0){ce.error(\"Please enter a valid amount\");return}if(A&&C>A.balance){ce.error(\"Insufficient funds in source reservoir\");return}w(!0)},y=()=>{d(h,N,C),L()},L=()=>{g(\"\"),E(\"\"),p(\"\"),w(!1),l()};return n.jsx(us,{open:i,onOpenChange:L,children:n.jsxs(ds,{className:\"max-w-md max-h-[90vh] overflow-y-auto bg-[#020408] border-white/5 p-0 shadow-2xl custom-scrollbar text-white\",children:[n.jsxs(\"div\",{className:\"px-8 pt-10 pb-8 border-b border-white/5 relative overflow-hidden bg-indigo-500/5\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 blur-[60px] opacity-20 -mr-16 -mt-16 bg-indigo-500\"}),n.jsxs(fs,{className:\"relative z-10\",children:[n.jsxs(ms,{className:\"text-2xl font-black tracking-tighter text-slate-100 flex items-center gap-3\",children:[n.jsx(Au,{className:\"w-6 h-6 text-indigo-400\"}),\"Capital Migration\"]}),n.jsx(hs,{className:\"text-slate-500 font-bold text-[10px] uppercase tracking-[0.2em] mt-1\",children:\"Transfer between core liquidity reservoirs\"})]})]}),n.jsx(\"div\",{className:\"p-8\",children:f?n.jsxs(\"div\",{className:\"space-y-6 animate-in fade-in zoom-in-95 duration-300\",children:[n.jsxs(\"div\",{className:\"p-6 bg-slate-900/50 border border-white/5 rounded-3xl space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between gap-4\",children:[n.jsxs(\"div\",{className:\"flex-1 text-center space-y-2\",children:[n.jsx(\"div\",{className:\"w-12 h-12 rounded-2xl bg-slate-800 border border-white/10 flex items-center justify-center text-2xl mx-auto\",children:A?.icon}),n.jsx(\"p\",{className:\"text-[10px] font-black uppercase text-slate-500 truncate\",children:A?.name})]}),n.jsxs(\"div\",{className:\"flex flex-col items-center gap-1\",children:[n.jsx(Au,{className:\"w-6 h-6 text-indigo-400 animate-pulse\"}),n.jsx(\"p\",{className:\"text-[10px] font-black text-indigo-400\",children:Ne(C,u)})]}),n.jsxs(\"div\",{className:\"flex-1 text-center space-y-2\",children:[n.jsx(\"div\",{className:\"w-12 h-12 rounded-2xl bg-slate-800 border border-white/10 flex items-center justify-center text-2xl mx-auto\",children:T?.icon}),n.jsx(\"p\",{className:\"text-[10px] font-black uppercase text-slate-500 truncate\",children:T?.name})]})]}),n.jsxs(\"div\",{className:\"space-y-4 pt-4 border-t border-white/5\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-center text-xs\",children:[n.jsx(\"span\",{className:\"text-slate-500 font-bold\",children:\"Source New Balance\"}),n.jsx(\"span\",{className:\"text-rose-400 font-black\",children:Ne((A?.balance||0)-C,u)})]}),n.jsxs(\"div\",{className:\"flex justify-between items-center text-xs\",children:[n.jsx(\"span\",{className:\"text-slate-500 font-bold\",children:\"Dest. New Balance\"}),n.jsx(\"span\",{className:\"text-emerald-400 font-black\",children:Ne((T?.balance||0)+C,u)})]})]})]}),n.jsxs(\"div\",{className:\"p-4 bg-amber-500/5 border border-amber-500/10 rounded-2xl flex gap-3\",children:[n.jsx(Ar,{className:\"w-5 h-5 text-amber-500 flex-shrink-0\"}),n.jsx(\"p\",{className:\"text-[10px] text-amber-200/60 font-medium leading-relaxed\",children:\"Notice: This transfer will instantly adjust the balance of both accounts. This action is recorded in your transaction history.\"})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Re,{variant:\"ghost\",onClick:()=>w(!1),className:\"flex-1 h-12 rounded-2xl text-slate-500 font-bold hover:bg-white/5\",children:\"Back\"}),n.jsx(Re,{onClick:y,className:\"flex-1 h-12 rounded-2xl bg-indigo-600 hover:bg-indigo-500 text-white font-black shadow-lg shadow-indigo-600/20 transition-all active:scale-95\",children:\"Confirm Migration\"})]})]}):n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(ye,{htmlFor:\"source-reservoir\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Source Reservoir\"}),n.jsxs(Ut,{value:h,onValueChange:g,children:[n.jsx(Bt,{id:\"source-reservoir\",className:\"h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-200 font-bold\",children:n.jsx(It,{placeholder:\"Select source\"})}),n.jsx(qt,{className:\"bg-slate-900 border-white/5 max-h-[40vh]\",children:o.map(z=>n.jsx(qe,{value:z.id,className:\"focus:bg-white/5 focus:text-white\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between w-full pr-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-xl\",children:z.icon}),n.jsx(\"span\",{children:z.name})]}),n.jsx(\"span\",{className:\"text-xs font-black text-slate-500\",children:Ne(z.balance,u)})]})},z.id))})]})]}),n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(ye,{htmlFor:\"dest-reservoir\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Destination Reservoir\"}),n.jsxs(Ut,{value:N,onValueChange:E,children:[n.jsx(Bt,{id:\"dest-reservoir\",className:\"h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-200 font-bold\",children:n.jsx(It,{placeholder:\"Select destination\"})}),n.jsx(qt,{className:\"bg-slate-900 border-white/5 max-h-[40vh]\",children:o.map(z=>n.jsx(qe,{value:z.id,className:\"focus:bg-white/5 focus:text-white\",disabled:z.id===h,children:n.jsxs(\"div\",{className:\"flex items-center justify-between w-full pr-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-xl\",children:z.icon}),n.jsx(\"span\",{children:z.name})]}),n.jsx(\"span\",{className:\"text-xs font-black text-slate-500\",children:Ne(z.balance,u)})]})},z.id))})]})]}),n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(ye,{htmlFor:\"migration-amount\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Capital Amount\"}),n.jsxs(\"div\",{className:\"relative group\",children:[n.jsx(\"div\",{className:\"absolute left-5 top-1/2 -translate-y-1/2 text-slate-500 font-bold group-focus-within:text-indigo-400 transition-colors\",children:u===\"INR\"?\"₹\":\"$\"}),n.jsx(wt,{id:\"migration-amount\",name:\"amount\",type:\"number\",placeholder:\"0.00\",value:S,onChange:z=>p(z.target.value),className:\"pl-12 h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-100 font-black text-xl\"})]}),A&&C>A.balance&&n.jsxs(\"div\",{className:\"flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-rose-400 ml-1 animate-in slide-in-from-top-1\",children:[n.jsx(Eu,{className:\"w-3 h-3\"}),n.jsx(\"span\",{children:\"Insufficient stability in source reservoir\"})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Re,{variant:\"ghost\",onClick:L,className:\"flex-1 h-12 rounded-2xl text-slate-500 font-bold hover:bg-white/5\",children:\"Cancel\"}),n.jsx(Re,{onClick:M,className:\"flex-1 h-12 rounded-2xl bg-indigo-600 hover:bg-indigo-500 text-white font-black shadow-lg shadow-indigo-600/20 transition-all active:scale-95\",children:\"Verify Migration\"})]})]})})]})})}function fN({onRefresh:i,children:l}){const o=x.useRef(0),[u,d]=x.useState(0),[h,g]=x.useState(!1),N=x.useRef(null),E=80,S=f=>{window.scrollY===0&&(o.current=f.touches[0].clientY)};x.useEffect(()=>{const f=A=>{if(o.current===0)return;const C=A.touches[0].clientY-o.current;if(C>0&&window.scrollY===0){A.cancelable&&A.preventDefault();const M=Math.min(C,E*1.5);d(M)}},w=N.current;return w&&w.addEventListener(\"touchmove\",f,{passive:!1}),()=>{w&&w.removeEventListener(\"touchmove\",f)}},[]),x.useEffect(()=>{u>=E&&!h&&window.navigator.vibrate&&window.navigator.vibrate(10)},[u,h]);const p=async()=>{u>=E&&!h&&(g(!0),await i(),g(!1)),d(0),o.current=0};return n.jsxs(\"div\",{ref:N,className:\"relative\",onTouchStart:S,onTouchEnd:p,children:[n.jsx(Le.div,{className:\"absolute top-0 left-0 right-0 flex justify-center items-center\",style:{height:u,opacity:u/E},animate:{y:h?0:-E},children:n.jsxs(\"div\",{className:\"flex flex-col items-center gap-2 py-4\",children:[n.jsx(Le.div,{animate:{rotate:h?360:u/E*180},transition:{rotate:{duration:h?1:0,repeat:h?1/0:0,ease:\"linear\"}},children:n.jsx(ei,{className:\"w-6 h-6 text-[#0A84FF]\"})}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-[0.2em] text-[#8E8E93]\",children:h?\"Synchronizing...\":u>=E?\"Relinquish to Sync\":\"Pull to Synchronize\"})]})}),n.jsx(Le.div,{animate:{y:h?60:0},transition:{duration:.2},children:l})]})}function os({className:i,...l}){return n.jsx(\"div\",{\"data-slot\":\"skeleton\",className:De(\"bg-accent animate-pulse rounded-md\",i),...l})}function mN(){return n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(Ot,{className:\"p-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 mb-4\",children:[n.jsx(os,{className:\"w-12 h-12 rounded-lg\"}),n.jsxs(\"div\",{className:\"space-y-2 flex-1\",children:[n.jsx(os,{className:\"h-5 w-32\"}),n.jsx(os,{className:\"h-4 w-48\"})]})]}),n.jsx(\"div\",{className:\"grid grid-cols-3 gap-3\",children:[1,2,3].map(i=>n.jsx(\"div\",{className:\"space-y-2\",children:n.jsx(os,{className:\"h-20 w-full rounded-lg\"})},i))})]}),[1,2,3].map(i=>n.jsx(Ot,{className:\"p-6\",children:n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(os,{className:\"h-6 w-48\"}),n.jsx(os,{className:\"h-4 w-full\"}),n.jsx(os,{className:\"h-4 w-3/4\"})]})},i))]})}function hN(i,l,o=30){x.useEffect(()=>{let u=0;const d=g=>{u=g.touches[0].clientX},h=g=>{const E=g.touches[0].clientX-u;u<o&&E>30&&(g.cancelable&&g.preventDefault(),window.navigator.vibrate&&window.navigator.vibrate(20),i(),u=window.innerWidth),u>window.innerWidth-o&&E<-30&&(g.cancelable&&g.preventDefault(),window.navigator.vibrate&&window.navigator.vibrate(20),l(),u=0)};return document.addEventListener(\"touchstart\",d,{passive:!0}),document.addEventListener(\"touchmove\",h,{passive:!1}),()=>{document.removeEventListener(\"touchstart\",d),document.removeEventListener(\"touchmove\",h)}},[i,l,o])}const pN=({onOpenAI:i,onAddTransaction:l,onMigrate:o,isVisible:u})=>n.jsxs(\"div\",{id:\"fab-dock\",className:`fixed right-5 bottom-[110px] flex flex-col gap-3.5 z-[110] transition-all duration-500 ease-quantum ${u?\"translate-x-0 opacity-100\":\"translate-x-[100px] opacity-0\"}`,children:[n.jsx(\"div\",{onClick:i,title:\"AI Assistant\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-[#a855f74d] shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-[#A855F7] hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(Ga,{className:\"w-5 h-5 group-hover:rotate-12 transition-transform\"})}),n.jsx(\"div\",{onClick:o,title:\"Migrate Capital\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-indigo-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-indigo-400 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(Au,{className:\"w-5 h-5 group-hover:scale-110 transition-transform\"})}),n.jsx(\"div\",{onClick:()=>l(\"debt\"),title:\"Added Personal IOU\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-yellow-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-yellow-500 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(Z0,{className:\"w-5 h-5 group-hover:-translate-y-0.5 transition-transform\"})}),n.jsx(\"div\",{onClick:()=>l(\"income\"),title:\"Add Money In\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-emerald-500/40 shadow-[0_0_20px_rgba(16,185,129,0.1)] cursor-pointer text-emerald-500 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(kr,{className:\"w-5 h-5 group-hover:rotate-90 transition-transform\"})}),n.jsx(\"div\",{onClick:()=>l(\"expense\"),title:\"Add Money Out\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-rose-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-rose-500 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(Ey,{className:\"w-5 h-5 group-hover:scale-110 transition-transform\"})})]}),gN=he.memo(({isOpen:i,onClose:l,context:o,settings:u,isOffline:d=!1})=>{const[h,g]=x.useState(\"\"),[N,E]=x.useState([{text:\"Hello! I've analyzed your cash flow. How can I assist with your goals?\",type:\"ai\"}]),[S,p]=x.useState(!1),f=x.useRef(null);x.useEffect(()=>{f.current&&f.current.scrollIntoView({behavior:\"smooth\"})},[N]);const w=async()=>{if(!h.trim()||S)return;const A=h.trim();g(\"\"),E(T=>[...T,{text:A,type:\"user\"}]),p(!0);try{if(d){setTimeout(()=>{E(C=>[...C,{text:\"FinHub is currently in 'Cached View' (Offline). I've analyzed your local financial fabric: your liquidity nodes are stable, but synchronizing with global AI intelligence requires a stable link. How can I help you optimize your local state?\",type:\"ai\"}]),p(!1)},1e3);return}const T=await Wj({userPrompt:A,context:o,settings:u,persona:\"ANALYST\"});T.error?E(C=>[...C,{text:T.error,type:\"ai\"}]):E(C=>[...C,{text:T.text||\"Analyzing financial pattern...\",type:\"ai\"}])}catch{E(T=>[...T,{text:\"Connection error. FinHub has transitioned to local 'Cached View'.\",type:\"ai\"}])}finally{d||p(!1)}};return i?n.jsxs(\"div\",{id:\"ai-chat-overlay\",className:\"fixed inset-0 bg-[#020408] z-[200] flex flex-col p-6 animate-in fade-in zoom-in-95 duration-300\",children:[n.jsx(\"div\",{className:\"absolute inset-0 bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-indigo-500/10 via-transparent to-transparent opacity-50\"}),n.jsxs(\"div\",{className:\"flex justify-between items-center mb-10 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-indigo-500/10 rounded-2xl flex items-center justify-center border border-indigo-500/20\",children:n.jsx(Ga,{className:\"text-indigo-400 w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"h2\",{className:\"font-black text-2xl text-white tracking-tight leading-none\",children:\"AI Analyst\"}),n.jsxs(\"div\",{className:\"flex items-center gap-2 mt-1\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500\",children:\"Neural Core Context\"}),d&&n.jsx(\"span\",{className:\"text-[8px] bg-amber-500/10 text-amber-500 px-1.5 py-0.5 rounded border border-amber-500/20 font-black tracking-tighter uppercase\",children:\"Cached View\"})]})]})]}),n.jsx(\"button\",{onClick:l,\"aria-label\":\"Close Chat\",className:\"bg-white/5 w-12 h-12 rounded-full flex items-center justify-center hover:bg-white/10 hover:text-white text-slate-400 transition-all active:scale-95\",children:n.jsx(il,{className:\"w-6 h-6\"})})]}),n.jsxs(\"div\",{id:\"chat-messages\",className:\"flex-1 overflow-y-auto space-y-4 pr-2 custom-scrollbar\",children:[N.map((A,T)=>n.jsxs(\"div\",{className:De(\"p-4 rounded-[24px] text-sm leading-relaxed\",A.type===\"ai\"?\"bg-slate-900 border border-white/5 text-slate-200 self-start max-w-[85%]\":\"bg-indigo-600 text-white font-medium shadow-lg shadow-indigo-600/20 self-end max-w-[85%]\"),children:[A.type===\"ai\"&&n.jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[n.jsx(Ga,{className:\"w-3 h-3 text-indigo-400 font-black\"}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500\",children:\"Guru Analysis\"})]}),A.text]},T)),S&&n.jsx(\"div\",{className:\"p-4 bg-slate-900 border border-white/5 rounded-[24px] self-start animate-pulse\",children:n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:0ms]\"}),n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:150ms]\"}),n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:300ms]\"})]})}),n.jsx(\"div\",{ref:f})]}),n.jsxs(\"div\",{className:\"mt-8 flex gap-3 p-2 bg-slate-900/40 rounded-[28px] border border-white/5 relative z-10\",children:[n.jsx(\"input\",{type:\"text\",value:h,onChange:A=>g(A.target.value),onKeyDown:A=>A.key===\"Enter\"&&w(),placeholder:\"Ask the analyst...\",className:\"flex-1 bg-transparent border-none px-6 py-4 text-white focus:outline-none placeholder:text-slate-600 font-bold\"}),n.jsx(\"button\",{onClick:w,disabled:S||!h.trim(),\"aria-label\":\"Send Message\",className:\"w-14 h-14 bg-indigo-600 rounded-[22px] flex items-center justify-center shadow-lg shadow-indigo-900/30 hover:bg-indigo-500 transition-all active:scale-90 disabled:opacity-50 disabled:cursor-not-allowed group\",children:n.jsx(Ay,{className:\"w-6 h-6 text-white group-hover:-translate-y-1 transition-transform\"})})]}),n.jsx(\"p\",{className:\"text-[9px] font-bold text-slate-600 text-center uppercase tracking-widest mt-4\",children:\"Encryption Verified // Neural Fabric Link Stable\"})]}):null});class xN extends x.Component{state={hasError:!1};static getDerivedStateFromError(l){return{hasError:!0,error:l}}componentDidCatch(l,o){console.error(\"Uncaught error:\",l,o)}render(){return this.state.hasError?n.jsx(\"div\",{className:\"min-h-[400px] flex items-center justify-center p-6\",children:n.jsxs(Ot,{className:\"max-w-md w-full p-8 bg-slate-900 border-white/10 text-center space-y-6 rounded-[32px]\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-rose-500/10 rounded-full flex items-center justify-center mx-auto\",children:n.jsx(el,{className:\"w-8 h-8 text-rose-500\"})}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(\"h2\",{className:\"text-xl font-black text-white uppercase tracking-tight\",children:\"System Glitch Detected\"}),n.jsx(\"p\",{className:\"text-sm text-slate-400 font-medium\",children:\"The neural link to this component was interrupted. This usually happens during background updates.\"})]}),this.state.error&&n.jsx(\"pre\",{className:\"text-[10px] bg-black/40 p-3 rounded-xl text-rose-400/80 overflow-x-auto text-left font-mono\",children:this.state.error.message}),n.jsxs(Re,{onClick:()=>window.location.reload(),className:\"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-black py-6 rounded-2xl gap-2 h-auto\",children:[n.jsx(ei,{className:\"w-4 h-4\"}),\"Re-establish Connection\"]})]})}):this.props.children}}var z0;(function(i){i[i.NONE=0]=\"NONE\",i[i.TOUCH_ID=1]=\"TOUCH_ID\",i[i.FACE_ID=2]=\"FACE_ID\",i[i.FINGERPRINT=3]=\"FINGERPRINT\",i[i.FACE_AUTHENTICATION=4]=\"FACE_AUTHENTICATION\",i[i.IRIS_AUTHENTICATION=5]=\"IRIS_AUTHENTICATION\",i[i.MULTIPLE=6]=\"MULTIPLE\"})(z0||(z0={}));var L0;(function(i){i[i.NONE=0]=\"NONE\",i[i.STRONG=1]=\"STRONG\",i[i.WEAK=2]=\"WEAK\"})(L0||(L0={}));var U0;(function(i){i[i.UNKNOWN_ERROR=0]=\"UNKNOWN_ERROR\",i[i.BIOMETRICS_UNAVAILABLE=1]=\"BIOMETRICS_UNAVAILABLE\",i[i.USER_LOCKOUT=2]=\"USER_LOCKOUT\",i[i.BIOMETRICS_NOT_ENROLLED=3]=\"BIOMETRICS_NOT_ENROLLED\",i[i.USER_TEMPORARY_LOCKOUT=4]=\"USER_TEMPORARY_LOCKOUT\",i[i.AUTHENTICATION_FAILED=10]=\"AUTHENTICATION_FAILED\",i[i.APP_CANCEL=11]=\"APP_CANCEL\",i[i.INVALID_CONTEXT=12]=\"INVALID_CONTEXT\",i[i.NOT_INTERACTIVE=13]=\"NOT_INTERACTIVE\",i[i.PASSCODE_NOT_SET=14]=\"PASSCODE_NOT_SET\",i[i.SYSTEM_CANCEL=15]=\"SYSTEM_CANCEL\",i[i.USER_CANCEL=16]=\"USER_CANCEL\",i[i.USER_FALLBACK=17]=\"USER_FALLBACK\"})(U0||(U0={}));const I0=cs(\"NativeBiometric\",{web:()=>Fa(()=>import(\"./web-CyZe6ZkC.js\"),__vite__mapDeps([7,1,2,3,4])).then(i=>new i.NativeBiometricWeb)}),bN=()=>{const{checkIdentity:i,login:l,signup:o,sendOtp:u,verifyOtp:d,resetPin:h,isRememberedUser:g,rememberedMobile:N,pendingMobile:E,clearPendingSession:S}=ai(),[p,f]=x.useState(\"identity\"),[w,A]=x.useState(\"\"),[T,C]=x.useState(\"\"),[M,y]=x.useState(\"\"),[L,z]=x.useState(\"\"),[j,G]=x.useState(\"\"),[ee,Z]=x.useState(\"\"),[_,B]=x.useState(!1),[J,ne]=x.useState(!1),[F,oe]=x.useState(!1),[ge,O]=x.useState(!1),k=x.useRef(null),U=he.useCallback(async()=>{if(Gn.isNativePlatform())try{if(!(await I0.isAvailable()).isAvailable)return;O(!0),await I0.verifyIdentity({reason:\"Authenticate to access your private node\",title:\"Login to FinHub\",subtitle:\"Use biometrics to login\",description:\"Touch the sensor to verify identity\",negativeButtonText:\"Cancel\"}),await l(\"2255\",!0)||O(!1)}catch(le){console.error(\"Biometric error:\",le),O(!1),navigator.vibrate&&navigator.vibrate([50,50])}},[l]);x.useEffect(()=>{g&&N?(A(N),f(\"verify\"),U()):E&&(A(E),f(\"verify\"))},[g,N,E,U]);const Q=he.useCallback(async()=>{if(w.length!==10)return;const le=await i(w);f(le?\"verify\":\"create_name\"),C(\"\")},[w,i]);x.useEffect(()=>{p===\"identity\"&&w.length===10&&Q()},[w,p,Q]);const ae=he.useCallback(async()=>{p===\"verify\"?await l(T,J)?(navigator.vibrate&&navigator.vibrate([10]),!J&&!g&&oe(!0)):q():p===\"create_pin\"?T.length===4&&(await o(w,T,M,J)||q()):p===\"reset_pin\"&&(j===ee&&j.length===4&&await h(w,j)?(f(\"verify\"),C(\"\"),G(\"\"),Z(\"\")):q())},[p,l,T,J,o,w,M,h,j,ee,g]);x.useEffect(()=>{p===\"verify\"&&T.length===4&&ae()},[T,p,ae]),x.useEffect(()=>{k.current&&(k.current.focus(),k.current.type!==\"hidden\"&&k.current.select())},[p]);const v=async()=>{await u(w)&&f(\"otp_reset\")},D=async()=>{if(M.trim().length<2)return;await u(w)&&f(\"otp_verify\")},W=async()=>{await d(w,L)?f(p===\"otp_verify\"?\"create_pin\":\"reset_pin\"):q()},q=()=>{B(!0),navigator.vibrate&&navigator.vibrate([50,30,50]),setTimeout(()=>B(!1),500),z(\"\"),C(\"\"),Z(\"\")},Y=()=>p===\"identity\"?w.length!==10:p===\"verify\"?T.length!==4:p===\"otp_verify\"||p===\"otp_reset\"?L.length!==4:p===\"create_name\"?M.trim().length<2:p===\"create_pin\"?T.length!==4:p===\"reset_pin\"?j.length!==4||ee.length!==4:!1,V=()=>{S(),f(\"identity\"),A(\"\"),C(\"\")},te=le=>{le.key===\"Enter\"&&!Y()&&me()()},me=()=>{switch(p){case\"identity\":return Q;case\"otp_verify\":case\"otp_reset\":return W;case\"create_name\":return D;case\"verify\":case\"create_pin\":case\"reset_pin\":return ae;default:return()=>{}}},ie=()=>{switch(p){case\"identity\":return\"Continue\";case\"otp_verify\":case\"otp_reset\":return\"Verify OTP\";case\"create_name\":return\"Next\";case\"verify\":return\"Login\";case\"create_pin\":return\"Create Account\";case\"reset_pin\":return\"Reset PIN\";default:return\"Continue\"}};return n.jsxs(\"div\",{className:\"fixed inset-0 flex flex-col items-center justify-center overflow-hidden font-sans auth-mesh-gradient z-[9999999]\",children:[n.jsx(\"div\",{className:\"absolute inset-0 z-0 bg-[url('/mesh-grid.svg')] opacity-20\"}),n.jsxs(Le.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},className:\"absolute top-12 z-10 flex flex-col items-center gap-2\",children:[n.jsx(\"img\",{src:\"/images/logo-dark.png\",alt:\"FinHub\",className:\"h-12 w-auto\"}),n.jsx(\"span\",{className:\"text-xs font-medium text-white/40 tracking-widest uppercase\",children:\"v0.1 Beta\"})]}),n.jsxs(\"div\",{className:\"z-10 w-full max-w-sm px-8\",children:[n.jsxs(Bn,{mode:\"wait\",children:[p===\"identity\"&&n.jsxs(Le.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},exit:{x:-20,opacity:0},className:\"flex flex-col gap-6\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Welcome\"}),n.jsx(\"p\",{className:\"text-white/50 text-sm mt-2\",children:\"Enter your mobile number to continue\"})]}),n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-sky-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"Mobile Number\"}),n.jsx(\"input\",{ref:k,type:\"text\",inputMode:\"numeric\",maxLength:10,value:w,onChange:le=>A(le.target.value.replace(/\\D/g,\"\")),onKeyDown:te,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"999 999 9999\"})]}),n.jsxs(\"div\",{onClick:()=>{ne(!J),navigator.vibrate&&navigator.vibrate(5)},className:\"flex items-center gap-3 cursor-pointer self-center\",children:[n.jsx(\"div\",{className:`h-5 w-5 rounded-md border transition-all flex items-center justify-center ${J?\"bg-sky-500 border-sky-500\":\"border-white/20 bg-white/5\"}`,children:J&&n.jsx(Cu,{className:\"h-3.5 w-3.5 text-white\"})}),n.jsx(\"span\",{className:\"text-sm text-white/60 font-medium\",children:\"Remember me for 30 days\"})]})]},\"identity\"),p===\"create_name\"&&n.jsxs(Le.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},exit:{x:-20,opacity:0},className:\"flex flex-col gap-6\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Who are you?\"}),n.jsx(\"p\",{className:\"text-white/50 text-sm mt-2\",children:\"Personalize your node experience\"})]}),n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-sky-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"Full Name\"}),n.jsx(\"input\",{ref:k,type:\"text\",value:M,onChange:le=>y(le.target.value),onKeyDown:te,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"Joe Doe\"})]})]},\"create_name\"),(p===\"otp_verify\"||p===\"otp_reset\")&&n.jsxs(Le.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,x:_?[0,-10,10,-10,10,0]:0},exit:{scale:1.1,opacity:0},className:\"relative flex flex-col gap-8 items-center\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"div\",{className:\"mb-4 flex justify-center\",children:n.jsx(\"div\",{className:\"p-4 rounded-full bg-white/5 ring-1 ring-white/10\",children:n.jsx(ky,{className:\"h-8 w-8 text-sky-400\"})})}),n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Verify Node\"}),n.jsxs(\"p\",{className:\"text-white/40 text-sm mt-2\",children:[\"Enter the 4-digit code sent to\",n.jsx(\"br\",{}),n.jsx(\"span\",{className:\"text-white/70\",children:w})]})]}),n.jsxs(\"div\",{className:\"group relative flex flex-col items-center justify-center rounded-[32px] bg-white/5 p-10 ring-1 ring-white/10 backdrop-blur-md\",children:[n.jsx(\"div\",{className:\"flex gap-5\",children:[0,1,2,3].map(le=>n.jsx(Le.div,{animate:{scale:le<L.length?1.2:1,backgroundColor:le<L.length?\"#fff\":\"rgba(255,255,255,0.1)\"},transition:{duration:.1},className:\"h-3.5 w-3.5 rounded-full\"},le))}),n.jsx(\"input\",{ref:k,type:\"password\",inputMode:\"numeric\",maxLength:4,value:L,onChange:le=>z(le.target.value.replace(/\\D/g,\"\")),onKeyDown:te,className:\"absolute inset-0 opacity-0 cursor-default\",\"aria-label\":\"One-time Password\",placeholder:\"OTP\"})]})]},\"otp\"),p===\"reset_pin\"&&n.jsxs(Le.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,x:_?[0,-10,10,-10,10,0]:0},exit:{scale:1.1,opacity:0},className:\"relative flex flex-col gap-8 items-center\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"div\",{className:\"mb-4 flex justify-center\",children:n.jsx(\"div\",{className:\"p-4 rounded-full bg-white/5 ring-1 ring-white/10\",children:n.jsx(Ty,{className:\"h-8 w-8 text-amber-400\"})})}),n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Reset PIN\"}),n.jsx(\"p\",{className:\"text-white/40 text-sm mt-2\",children:\"Choose a new secure 4-digit access code\"})]}),n.jsxs(\"div\",{className:\"space-y-4 w-full\",children:[n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-amber-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"New PIN\"}),n.jsx(\"input\",{type:\"password\",inputMode:\"numeric\",maxLength:4,value:j,onChange:le=>G(le.target.value.replace(/\\D/g,\"\")),onKeyDown:te,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"****\"})]}),n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-amber-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"Confirm PIN\"}),n.jsx(\"input\",{type:\"password\",inputMode:\"numeric\",maxLength:4,value:ee,onChange:le=>Z(le.target.value.replace(/\\D/g,\"\")),onKeyDown:te,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"****\"})]})]})]},\"reset_pin\"),(p===\"verify\"||p===\"create_pin\")&&n.jsxs(Le.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,x:_?[0,-10,10,-10,10,0]:0},exit:{scale:1.1,opacity:0},className:\"relative flex flex-col gap-8 items-center\",children:[n.jsx(Le.div,{initial:{opacity:0},animate:{opacity:1},className:\"fixed inset-0 z-[-1] bg-black/80 backdrop-blur-xl\"}),n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(Le.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:\"mb-4 flex justify-center\",children:n.jsx(\"div\",{className:\"p-4 rounded-full bg-white/5 ring-1 ring-white/10\",children:n.jsx(sl,{className:\"h-8 w-8 text-sky-400\"})})}),n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:p===\"verify\"?\"Private Access\":\"Secure Setup\"}),n.jsx(\"p\",{className:\"text-white/40 text-sm mt-2\",children:p===\"verify\"?\"Encrypted PIN required\":\"Create your master PIN\"})]}),n.jsxs(\"div\",{className:\"group relative flex flex-col items-center justify-center rounded-[32px] bg-white/5 p-10 ring-1 ring-white/10 backdrop-blur-md\",children:[n.jsx(\"div\",{className:\"flex gap-5\",children:[0,1,2,3].map(le=>n.jsx(Le.div,{animate:{scale:le<T.length?1.2:1,backgroundColor:le<T.length?\"#fff\":\"rgba(255,255,255,0.1)\"},transition:{duration:.1},className:\"h-3.5 w-3.5 rounded-full\"},le))}),n.jsx(\"input\",{ref:k,type:\"password\",inputMode:\"numeric\",maxLength:4,value:T,onChange:le=>C(le.target.value.replace(/\\D/g,\"\")),onKeyDown:te,className:\"absolute inset-0 opacity-0 cursor-default\",\"aria-label\":\"Access PIN\",placeholder:\"PIN\"})]}),p===\"verify\"&&n.jsxs(\"div\",{className:\"flex flex-col items-center gap-4\",children:[n.jsxs(\"button\",{onClick:U,className:\"flex items-center gap-2 text-sky-400 text-sm font-medium\",children:[n.jsx(Hn,{className:\"h-5 w-5\"}),\" Use Biometrics\"]}),n.jsx(\"button\",{onClick:v,className:\"text-white/30 text-xs hover:text-white/50 transition-colors\",children:\"Forgot PIN? Reset via SMS\"}),n.jsx(\"button\",{onClick:V,className:\"text-sky-500/50 text-[10px] font-bold uppercase tracking-widest hover:text-sky-400/80 transition-colors mt-2\",children:\"Login with another account\"})]})]},\"pin\")]}),n.jsxs(Le.button,{onClick:me(),disabled:Y(),className:`mt-8 flex w-full items-center justify-center gap-2 rounded-[22px] py-4 text-base font-semibold text-white shadow-lg transition-all ${Y()?\"cursor-not-allowed bg-[#3A3A3C] opacity-50\":\"bg-gradient-to-r from-[#0A84FF] to-[#0047AB] shadow-sky-500/20 active:scale-95\"}`,whileTap:{scale:.98},children:[ie(),!Y()&&n.jsx(P0,{className:\"h-4 w-4\"})]})]}),n.jsx(Bn,{children:F&&n.jsx(Le.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"fixed inset-0 z-[60] flex items-end justify-center bg-black/60 p-6 backdrop-blur-sm\",children:n.jsxs(Le.div,{initial:{y:100},animate:{y:0},exit:{y:100},className:\"w-full max-w-sm rounded-[32px] bg-[#1C1C1E] p-8 text-center ring-1 ring-white/10 shadow-2xl\",children:[n.jsx(\"div\",{className:\"mx-auto mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-sky-500/20 text-sky-400\",children:n.jsx(Cu,{className:\"h-8 w-8\"})}),n.jsx(\"h3\",{className:\"text-xl font-bold text-white\",children:\"Speed up your next login?\"}),n.jsx(\"p\",{className:\"mt-2 text-sm text-white/50\",children:\"We can securely remember your ID so you can skip the mobile entry next time.\"}),n.jsxs(\"div\",{className:\"mt-8 flex flex-col gap-3\",children:[n.jsx(\"button\",{onClick:()=>{localStorage.setItem(\"finhub_remembered_mobile\",w),oe(!1)},className:\"w-full rounded-2xl bg-sky-500 py-4 font-semibold text-white active:scale-95 transition-all\",children:\"Enable Smart Login\"}),n.jsx(\"button\",{onClick:()=>oe(!1),className:\"w-full py-2 text-sm font-medium text-white/30 active:text-white/50\",children:\"Maybe later\"})]})]})})}),n.jsx(Bn,{children:ge&&n.jsx(Le.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"fixed inset-0 z-[70] flex flex-col items-center justify-center bg-black/40 backdrop-blur-md\",children:n.jsxs(Le.div,{initial:{scale:.8},animate:{scale:1},className:\"flex flex-col items-center\",children:[n.jsxs(\"div\",{className:\"relative mb-6\",children:[n.jsx(Le.div,{animate:{scale:[1,1.2,1],opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0},className:\"absolute inset-0 rounded-full bg-sky-500/30 blur-2xl\"}),n.jsx(\"div\",{className:\"relative flex h-24 w-24 items-center justify-center rounded-full bg-white/5 ring-1 ring-white/20\",children:n.jsx(Hn,{className:\"h-12 w-12 text-sky-400\"})})]}),n.jsx(\"h3\",{className:\"text-lg font-medium text-white\",children:\"Scanning Biometrics\"}),n.jsx(\"p\",{className:\"mt-2 text-sm text-white/40 italic\",children:\"Verifying your node identity...\"}),n.jsx(\"button\",{onClick:()=>O(!1),className:\"mt-12 text-xs font-medium uppercase tracking-widest text-white/20 hover:text-white/40\",children:\"Cancel & use PIN\"})]})})}),n.jsx(\"div\",{className:\"absolute bottom-8 text-center text-[10px] text-white/20\",children:n.jsx(\"p\",{children:\"Protected by FinHub Security. Data is localized and encrypted.\"})})]})},B0=({message:i=\"Secure Node Handshake\",subMessage:l=\"Re-encrypting local session...\"})=>n.jsxs(\"div\",{className:\"fixed inset-0 z-[100] flex flex-col items-center justify-center bg-[#000000] overflow-hidden\",children:[n.jsx(Le.div,{animate:{opacity:[.1,.2,.1],scale:[1,1.1,1]},transition:{duration:4,repeat:1/0,ease:\"easeInOut\"},className:\"absolute h-[500px] w-[500px] rounded-full bg-sky-500/10 blur-[120px]\"}),n.jsxs(\"div\",{className:\"relative flex flex-col items-center justify-center gap-12\",children:[n.jsxs(\"div\",{className:\"relative flex items-center justify-center\",children:[[0,1,2].map(o=>n.jsx(Le.div,{className:\"absolute rounded-full border border-sky-400/20\",initial:{width:80,height:80,opacity:0},animate:{width:[80,250],height:[80,250],opacity:[.4,0]},transition:{duration:3,repeat:1/0,delay:o*1,ease:\"easeOut\"}},o)),n.jsx(Le.div,{animate:{y:[0,-10,0]},transition:{duration:4,repeat:1/0,ease:\"easeInOut\"},className:\"relative z-10\",children:n.jsx(Le.div,{animate:{scale:[1,1.1,1],filter:[\"drop-shadow(0 0 15px rgba(56,189,248,0.3))\",\"drop-shadow(0 0 30px rgba(56,189,248,0.6))\",\"drop-shadow(0 0 15px rgba(56,189,248,0.3))\"]},transition:{duration:3,repeat:1/0,ease:\"easeInOut\"},className:\"relative flex h-32 w-32 items-center justify-center rounded-[32px] bg-gradient-to-br from-[#1C1C1E] to-[#000000] ring-1 ring-white/10 shadow-2xl backdrop-blur-xl\",children:n.jsx(\"img\",{src:\"/images/logo-icon.png\",alt:\"FinHub\",className:\"h-20 w-20 object-contain drop-shadow-lg\"})})})]}),n.jsx(Le.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:\"flex flex-col items-center gap-2\",children:n.jsxs(\"div\",{className:\"flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/5 ring-1 ring-white/5 backdrop-blur-md\",children:[n.jsx(sl,{className:\"h-3 w-3 text-sky-400\"}),n.jsx(\"span\",{className:\"text-[10px] font-bold tracking-[0.2em] uppercase text-white/40\",children:i})]})})]}),n.jsxs(\"div\",{className:\"absolute bottom-16 w-full max-w-[200px] px-6\",children:[n.jsx(\"div\",{className:\"h-[2px] w-full overflow-hidden rounded-full bg-white/10\",children:n.jsx(Le.div,{initial:{x:\"-100%\"},animate:{x:\"100%\"},transition:{duration:1.5,repeat:1/0,ease:\"easeInOut\"},className:\"h-full w-1/3 bg-gradient-to-r from-transparent via-sky-400 to-transparent\"})}),n.jsx(\"div\",{className:\"mt-3 text-center\",children:n.jsx(\"span\",{className:\"text-[10px] font-medium text-white/20 italic tracking-wider\",children:l})})]})]}),yN=({isOpen:i,onClose:l})=>n.jsx(Bn,{children:i&&n.jsxs(n.Fragment,{children:[n.jsx(Le.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:l,className:\"fixed inset-0 z-[200] bg-black/60 backdrop-blur-sm\"}),n.jsx(\"div\",{className:\"fixed inset-0 z-[201] flex items-center justify-center p-4 pointer-events-none\",children:n.jsxs(Le.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:\"spring\",damping:25,stiffness:300},className:\"w-full max-w-md bg-slate-900 border border-white/5 rounded-[32px] shadow-2xl overflow-hidden pointer-events-auto relative\",children:[n.jsx(\"div\",{className:\"absolute top-0 inset-x-0 h-32 bg-gradient-to-b from-indigo-500/10 to-transparent pointer-events-none\"}),n.jsx(\"button\",{onClick:l,className:\"absolute top-6 right-6 p-2 rounded-full bg-white/5 text-slate-400 hover:text-white hover:bg-white/10 transition-colors z-10\",\"aria-label\":\"Close about us popup\",children:n.jsx(il,{className:\"w-5 h-5\"})}),n.jsxs(\"div\",{className:\"p-8 pt-12 space-y-8 relative\",children:[n.jsxs(\"div\",{className:\"flex flex-col items-center text-center gap-3\",children:[n.jsx(\"div\",{className:\"w-16 h-16 rounded-[22px] bg-indigo-600 flex items-center justify-center shadow-lg shadow-indigo-500/20\",children:n.jsx(Dy,{className:\"w-8 h-8 text-white\"})}),n.jsxs(\"div\",{children:[n.jsx(\"h2\",{className:\"text-2xl font-black text-white tracking-tight uppercase\",children:\"FinHub Core\"}),n.jsx(\"p\",{className:\"text-[10px] font-bold text-indigo-400 uppercase tracking-[0.3em]\",children:\"Quantum Fabric v50.3\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"section\",{className:\"space-y-2\",children:[n.jsxs(\"h3\",{className:\"text-[10px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2\",children:[n.jsx(Hn,{className:\"w-3.5 h-3.5\"}),\"Our Vision\"]}),n.jsx(\"p\",{className:\"text-sm text-slate-300 leading-relaxed font-medium\",children:\"FinHub is designed to be the central nervous system of your personal economy. We merge neural-inspired data models with high-precision tracking to navigate complex wealth landscapes.\"})]}),n.jsxs(\"section\",{className:\"space-y-2\",children:[n.jsxs(\"h3\",{className:\"text-[10px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2\",children:[n.jsx(sl,{className:\"w-3.5 h-3.5\"}),\"Core Features\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[n.jsxs(\"div\",{className:\"bg-white/5 p-3 rounded-2xl border border-white/5\",children:[n.jsx(\"span\",{className:\"block text-[8px] font-black text-indigo-400 uppercase mb-1\",children:\"Localization\"}),n.jsx(\"span\",{className:\"text-[10px] text-slate-400 leading-tight\",children:\"Sovereign identity via node storage.\"})]}),n.jsxs(\"div\",{className:\"bg-white/5 p-3 rounded-2xl border border-white/5\",children:[n.jsx(\"span\",{className:\"block text-[8px] font-black text-indigo-400 uppercase mb-1\",children:\"Clamping Logic\"}),n.jsx(\"span\",{className:\"text-[10px] text-slate-400 leading-tight\",children:\"Mathematical stability in all simulations.\"})]})]})]}),n.jsxs(\"div\",{className:\"pt-6 border-t border-white/5 flex flex-col items-center gap-2\",children:[n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-600 uppercase tracking-widest\",children:\"Architect: Sijo Joseph\"}),n.jsx(\"p\",{className:\"text-[10px] font-black text-slate-800 uppercase tracking-[0.2em]\",children:\"© 2025 Neural FinHub Fabric\"})]})]})]})]})})]})}),vN=i=>{const{accounts:l,recurringTransactions:o,goals:u}=i,d=new Date,h=new Date;h.setDate(d.getDate()+7);const g=l.filter(B=>B.type!==\"credit_card\"),N=g.reduce((B,J)=>B+(J.balance||0),0),E=o.filter(B=>{const J=new Date(B.startDate);return B.type===\"expense\"&&J<=h&&J>=d}).reduce((B,J)=>B+J.amount,0),S=u.reduce((B,J)=>B+(J.currentAmount||0),0),p=N-E-S,f=l.filter(B=>B.type===\"credit_card\"),w=f.reduce((B,J)=>{const ne=J.creditLimit||0,F=J.balance||0,oe=Math.max(0,ne-F),ge=J.safeLimitPercentage||30,O=ne*ge/100;return B+Math.min(oe,O)},0),A=p+w;let T=-1/0,C=null,M=null;g.forEach(B=>{const J=o.filter(oe=>oe.accountId===B.id&&oe.type===\"expense\").reduce((oe,ge)=>{const O=new Date(ge.startDate);return O<=h&&O>=d?oe+ge.amount:oe},0),ne=B.min_buffer||0,F=B.balance-J-ne;F>T&&(T=F,C=B.id,M=B.name)});let y=\"SAFE\";const L=g.some(B=>{const J=o.filter(ne=>ne.accountId===B.id&&ne.type===\"expense\").reduce((ne,F)=>{const oe=new Date(F.startDate);return oe<=h&&oe>=d?ne+F.amount:ne},0);return B.balance<J});p<0||L?y=\"CRITICAL\":(p<N*.1||p<2e3)&&(y=\"TIGHT\");let z=null;const j=f.find(B=>B.balance/(B.creditLimit||1)>.7),G=g.find(B=>{const J=o.filter(ne=>ne.accountId===B.id&&ne.type===\"expense\").reduce((ne,F)=>{const oe=new Date(F.startDate);return oe<=h&&oe>=d?ne+F.amount:ne},0);return B.balance<J});G?z=`Payment risk: ${G.name} insufficient for upcoming dues.`:y===\"TIGHT\"?z=\"Low Safe-to-Spend: Consider postponing large purchases.\":j&&(z=`High credit utilization on ${j.name} (>70%).`);const ee=o.filter(B=>B.type===\"expense\").map(B=>{const J=new Date(B.startDate),ne=Math.ceil((J.getTime()-d.getTime())/(1e3*60*60*24));return{...B,daysRemaining:ne}}).filter(B=>B.daysRemaining>=0).sort((B,J)=>B.daysRemaining-J.daysRemaining),Z=ee.length>0?{title:ee[0].description||\"Upcoming Payment\",amount:ee[0].amount,daysRemaining:ee[0].daysRemaining}:null;let _=null;if(y===\"CRITICAL\"&&G&&C&&C!==G.id){const B=o.filter(J=>J.accountId===G.id&&J.type===\"expense\").reduce((J,ne)=>{const F=new Date(ne.startDate);return F<=h&&F>=d?J+ne.amount:J},0);_={fromAccountId:C,toAccountId:G.id,amount:B-G.balance}}return{liquidBalance:N,upcomingDues:E,reservedAmount:S,liquidSafeSpend:p,creditSafeSpend:w,safeToSpendGlobal:A,suggestedSpendAccountId:C,suggestedSpendAccountName:M,suggestedReason:\"Highest free buffer after upcoming payments\",status:y,topAlert:z,quickFix:_,nextDue:Z}},wN=i=>({accounts:i.accounts||[],recurringTransactions:i.recurringTransactions||[],goals:i.goals||[],liabilities:i.liabilities||[],settings:i.settings||{}}),Zi={calculateStressFactor(i,l){if(l===0)return .6;const o=i/l;return o<=.3?1:o<=.5?.9:o<=.7?.75:.6},calculateHabitShare(i,l){if(l===0)return .02;const o=i/l;return Math.min(Math.max(o,.02),.4)},calculateSSR(i,l,o,u){const d=l-o-u,h=new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate(),g=h-new Date().getDate()+1,N=d*(g/h);return N<=0?.6:Math.min(Math.max(i/N,.6),1)},calculateBaseLimit(i,l,o){return i*l*o},calculateProjection(i,l,o){return l===0?i:i/l*o},isDiscretionary(i){const l=[\"entertainment\",\"dining\",\"out\",\"shopping\",\"leisure\",\"hobby\",\"gift\",\"travel\",\"dress\",\"luxury\",\"movie\"],o=i.toLowerCase();return l.some(u=>o.includes(u))},calculateGap(i,l){return i-l}};function jN({className:i,value:l,indicatorClassName:o,...u}){return n.jsx(My,{\"data-slot\":\"progress\",className:De(\"bg-primary/20 relative h-2 w-full overflow-hidden rounded-full\",i),...u,children:n.jsx(_y,{\"data-slot\":\"progress-indicator\",className:De(\"bg-primary h-full w-full flex-1 transition-all\",o),style:{transform:`translateX(-${100-(l||0)}%)`}})})}const NN=()=>{const{expenses:i,incomes:l,liabilities:o,goals:u,accounts:d,emergencyFundAmount:h,currency:g}=ai(),{availableToSpend:N}=Gp({accounts:d,goals:u,liabilities:o,expenses:i,emergencyFundAmount:h}),E=x.useMemo(()=>{const f=new Date,w=f.getMonth(),A=f.getFullYear(),C=(ne=>new Date(A,w-ne,1))(2),y=l.filter(ne=>new Date(ne.date)>=C).reduce((ne,F)=>ne+F.amount,0)/3,L=o.reduce((ne,F)=>ne+(F.emiAmount||0),0),z=u.filter(ne=>ne.type===\"stability\"||ne.type===\"protection\"||ne.name.toLowerCase().includes(\"emergency\")).reduce((ne,F)=>ne+(F.monthly_contribution||0),0),j=z>0?z:.1*y,G=y-L-j,ee=Zi.calculateStressFactor(L,y),Z=Zi.calculateSSR(N,y,L,j),_=i.filter(ne=>new Date(ne.date)>=C),B=_.reduce((ne,F)=>ne+F.amount,0)/3,J={};return Tu.forEach(ne=>{const oe=_.filter(U=>U.category===ne.value).reduce((U,Q)=>U+Q.amount,0)/3,ge=Zi.calculateHabitShare(oe,B),O=Zi.calculateBaseLimit(G,ge,ee),k=Zi.isDiscretionary(ne.value);J[ne.value]=k?O*Math.min(Math.max(Z,.6),1):O}),{limits:J}},[i,l,o,u,N]),{limits:S}=E,p=f=>new Intl.NumberFormat(\"en-IN\",{style:\"currency\",currency:g||\"INR\",maximumFractionDigits:0}).format(f);return n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"header\",{className:\"px-1\",children:[n.jsx(\"h2\",{className:\"text-2xl font-black text-white tracking-tight\",children:\"Financial Guardrails\"}),n.jsx(\"p\",{className:\"text-slate-500 text-[10px] font-bold uppercase tracking-[0.2em] mt-1\",children:\"Hybrid Budget Engine v1.1\"})]}),n.jsx(\"div\",{className:\"grid gap-4\",children:Tu.map(f=>{const w=S[f.value]||0,A=i.filter(C=>{const M=new Date(C.date);return C.category===f.value&&M.getMonth()===new Date().getMonth()&&M.getFullYear()===new Date().getFullYear()}).reduce((C,M)=>C+M.amount,0),T=w>0?A/w*100:0;return n.jsxs(\"div\",{className:\"rounded-3xl border border-white/5 bg-white/5 p-5 transition-all hover:bg-white/10\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-start mb-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-xl\",role:\"img\",\"aria-label\":f.value,children:f.emoji}),n.jsxs(\"div\",{children:[n.jsx(\"h3\",{className:\"text-sm font-bold text-white\",children:f.value}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 uppercase tracking-widest mt-0.5\",children:\"Category Limit\"})]})]}),n.jsxs(\"div\",{className:\"text-right\",children:[n.jsx(\"p\",{className:\"text-sm font-black text-white\",children:p(w)}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 uppercase tracking-widest mt-0.5\",children:\"Monthly\"})]})]}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[10px] font-bold uppercase tracking-tighter\",children:[n.jsxs(\"span\",{className:\"text-slate-400\",children:[\"Spent: \",p(A)]}),n.jsxs(\"span\",{className:De(T>90?\"text-red-400\":\"text-emerald-400\"),children:[Math.round(T),\"%\"]})]}),n.jsx(jN,{value:T,className:\"h-1.5\",indicatorClassName:De(T>100?\"bg-red-500 shadow-[0_0_8px_rgba(239,68,68,0.5)]\":T>80?\"bg-orange-500 shadow-[0_0_8px_rgba(249,115,22,0.5)]\":\"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]\")})]})]},f.value)})})]})},SN=x.lazy(()=>Fa(()=>import(\"./Dashboard-IVoRIJ8c.js\"),__vite__mapDeps([8,1,2,9,10,4,3])).then(i=>({default:i.Dashboard}))),CN=x.lazy(()=>Fa(()=>import(\"./TransactionList-rKWzJlT2.js\"),__vite__mapDeps([11,1,2,10,3,4])).then(i=>({default:i.TransactionList}))),EN=x.lazy(()=>Fa(()=>import(\"./GoalsTracker-D6OcmKwC.js\"),__vite__mapDeps([12,1,2,3,4])).then(i=>({default:i.GoalsTracker}))),AN=x.lazy(()=>Fa(()=>import(\"./EmergencyFundsTab-gXH3z62T.js\"),__vite__mapDeps([13,1,2,3,4])).then(i=>({default:i.EmergencyFundsTab}))),kN=x.lazy(()=>Fa(()=>import(\"./InvestmentsTab-B4180PLB.js\"),__vite__mapDeps([14,1,2,9,10,4,3])).then(i=>({default:i.InvestmentsTab})));function TN(){const{settings:i,expenses:l,incomes:o,debts:u,goals:d,accounts:h,liabilities:g,notifications:N,emergencyFundAmount:E,investments:S,isLoading:p,refreshData:f,updateSettings:w,userId:A,createExpense:T,updateExpense:C,deleteExpense:M,createIncome:y,updateIncome:L,deleteIncome:z,createDebt:j,updateDebt:G,deleteDebt:ee,settleDebt:Z,createGoal:_,updateGoal:B,deleteGoal:J,createAccount:ne,updateAccount:F,deleteAccount:oe,setEmergencyFundAmount:ge,setNotifications:O,isFundAllocationOpen:k,fundAllocationType:U,closeFundAllocation:Q,performFundAllocation:ae,transferFunds:v,authStatus:D,isOffline:W,authMessage:q,backfillRequest:Y,setBackfillRequest:V,executeBackfill:te,createRecurring:me,recurringTransactions:ie}=ai(),[le,je]=x.useState(\"dashboard\"),[Ae,pe]=x.useState(!1),[ve,xe]=x.useState(\"expense\"),[Ke,We]=x.useState(null),[Ue,it]=x.useState(!1),[Ve,ke]=x.useState(!1),[Ft,fe]=x.useState(!1),[Se,ze]=x.useState(null),[lt,mt]=x.useState(!1),[_a,ga]=x.useState(!1),[Ra,Kt]=x.useState(!1),[Oa,ea]=x.useState(!1),[zt]=x.useState(null);hN(()=>ke(!0),()=>fe(!0)),x.useEffect(()=>{if(Gn.isNativePlatform()){(async()=>{try{(await Cr.checkPermissions()).display!==\"granted\"&&await Cr.requestPermissions()}catch(Ee){console.error(\"Error checking notification permissions:\",Ee)}})();const Fe=Cr.addListener(\"localNotificationActionPerformed\",Ee=>{const{notification:rt}=Ee,Ct=rt.extra;console.log(\"Native notification clicked:\",rt),Ct&&(Ct.achievementId?(ze(Ct.achievementId),mt(!0)):Ct.view&&je(Ct.view))});return()=>{Fe.then(Ee=>Ee.remove())}}},[]),x.useEffect(()=>{i.theme===\"dark\"?document.documentElement.classList.add(\"dark\"):document.documentElement.classList.remove(\"dark\")},[i.theme]);const{openFundAllocation:Ht}=ai();x.useEffect(()=>{window.showFundAllocation=Ht},[Ht]);const{currentMonthExpenses:ta}=x.useMemo(()=>{const de=new Date,Fe=de.getMonth(),Ee=de.getFullYear();return{currentMonthExpenses:l.filter(et=>!et.isInternalTransfer).filter(et=>{const bt=new Date(et.date);return bt.getMonth()===Fe&&bt.getFullYear()===Ee})}},[l]),xt=x.useMemo(()=>{const de=o.reduce((Zt,ht)=>Zt+ht.amount,0),Fe=l.reduce((Zt,ht)=>Zt+ht.amount,0),Ee=u.reduce((Zt,ht)=>Zt+ht.amount,0);if(de===0&&Ee===0)return{score:50,savingsRate:0,debtRatio:0,spendingRatio:0};const rt=[...o,...l,...u];let Ct=1;if(rt.length>0){const Zt=rt.map(Ur=>new Date(Ur.date).getTime()),ht=new Date(Math.min(...Zt)),pn=Math.abs(new Date().getTime()-ht.getTime()),si=Math.ceil(pn/(1e3*60*60*24*30));Ct=Math.max(1,si)}const bt=de/Ct*12,Tt=de>0?(de-Fe)/de:0,yt=de>0?Fe/de:0,Jt=bt>0?Ee/bt:Ee>0?1/0:0;let jt=50;return Tt>=.4?jt+=30:Tt>=.2?jt+=20:Tt>=.1?jt+=10:Tt>0?jt+=5:jt-=20,Jt===0?jt+=20:Jt<=.3?jt+=10:Jt<=.6?jt-=10:Jt<=1?jt-=30:jt-=50,yt<=.5?jt+=20:yt<=.7?jt+=10:yt<=.9?jt+=0:jt-=10,{score:Math.max(0,Math.min(100,Math.round(jt))),savingsRate:Tt,debtRatio:Jt,spendingRatio:yt}},[o,l,u]),ni=x.useMemo(()=>({totalIncome:o.reduce((de,Fe)=>de+Fe.amount,0),totalExpenses:l.reduce((de,Fe)=>de+Fe.amount,0),activeDebts:u.filter(de=>de.status===\"pending\").length,goalsCount:d.length,recentTransactions:[...l.slice(0,5).map(de=>({type:\"expense\",...de})),...o.slice(0,5).map(de=>({type:\"income\",...de}))],expenses:l,incomes:o,accounts:h,investments:S,liabilities:g,goals:d,debts:u,currentMonthExpenses:ta,savingsRate:xt.savingsRate,healthScore:xt.score,brainSummary:Ij({investments:S,accounts:h,healthScore:xt.score,savingsRate:xt.savingsRate,totalIncome:o.reduce((de,Fe)=>de+Fe.amount,0),totalExpenses:l.reduce((de,Fe)=>de+Fe.amount,0),activeDebts:u.filter(de=>de.status===\"pending\").length,goalsCount:d.length},i.currency,le)}),[o,l,u,d,xt.savingsRate,xt.score,h,S,g,ta,i.currency,le]),Fn=x.useMemo(()=>{const de=wN({accounts:h,recurringTransactions:ie,goals:d,liabilities:g,settings:i});return vN(de)},[h,ie,d,g,i]);if(p)return n.jsx(B0,{});Gn.isNativePlatform()&&Ov.hide().catch(de=>console.error(\"Splash hide error:\",de));const xa=async()=>{await f()},mn=de=>{xe(de),We(null),pe(!0)},hn=de=>{xe(\"expense\"),We(de),pe(!0)},Ya=de=>{xe(\"income\"),We(de),pe(!0)},ba=de=>{xe(\"debt\"),We(de),pe(!0)},Me=de=>{Ke?ve===\"expense\"?C(Ke.id,de):ve===\"income\"?L(Ke.id,de):ve===\"debt\"&&G(Ke.id,de):ve===\"expense\"?(T(de),de.roundUpAmount&&dt(d.length>0?d[0].id:\"general\",\"goal\",void 0,de.roundUpAmount,de.accountId)):ve===\"income\"?y(de):ve===\"debt\"&&j(de)},dt=async(de,Fe,Ee,rt,Ct)=>{if(!rt&&!zt)return;const et=rt||(zt?zt.roundedAmount-zt.expenseAmount:0),bt=Ct||(zt?zt.accountId:\"\"),Tt=h.find(yt=>yt.id===bt);if(Tt&&await F(Tt.id,{balance:Tt.balance-et}),Fe===\"goal\"){const yt=d.find(Jt=>Jt.id===de);if(yt)await B(de,{currentAmount:yt.currentAmount+et}),ce.success(`Saved ${dn[i.currency]}${et} to ${yt.name}!`);else{const Jt=d.find(jt=>jt.name===\"General Savings\");if(Jt)await B(Jt.id,{currentAmount:Jt.currentAmount+et}),ce.success(`Saved ${dn[i.currency]}${et} to General Savings!`);else{const jt={name:\"General Savings\",targetAmount:1e4,currentAmount:et,targetDate:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString(),emoji:\"🐷\"};_(jt),ce.success(`Created \"General Savings\" and saved ${dn[i.currency]}${et}!`)}}}else ge(yt=>yt+et),ce.success(`Saved ${dn[i.currency]}${et} to Emergency Fund!`);ea(!1),Or({particleCount:50,spread:60,origin:{y:.7}})},kt=de=>{const Fe={today:1,week:7,month:30},Ee=new Date;Ee.setDate(Ee.getDate()+Fe[de]),localStorage.setItem(\"roundUpMutedUntil\",Ee.toISOString()),ea(!1),ce.info(`Round ups muted for ${de===\"today\"?\"today\":de===\"week\"?\"a week\":\"a month\"}`)};return n.jsxs(n.Fragment,{children:[n.jsx(Bn,{mode:\"wait\",children:(D===\"guest\"||D===\"authenticating\")&&n.jsx(Le.div,{className:\"fixed inset-0 z-0\",exit:{opacity:0,scale:.95,filter:\"blur(20px)\"},transition:{duration:.8},children:n.jsx(bN,{})},\"login-container\")}),n.jsx(Bn,{children:D===\"authenticating\"&&n.jsx(Le.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4},className:\"fixed inset-0 z-50\",children:n.jsx(B0,{message:q?.message,subMessage:q?.subMessage})},\"loading-sprite\")}),n.jsx(Bn,{mode:\"wait\",children:D===\"authenticated\"&&n.jsx(Le.div,{className:\"relative z-10\",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.8,ease:[.16,1,.3,1]},children:n.jsxs(\"div\",{className:\"min-h-screen bg-transparent text-foreground transition-colors font-sans\",children:[n.jsx(dj,{activeTab:le,onTabChange:de=>je(de),notificationCount:N.filter(de=>!de.read).length,onNotificationClick:()=>fe(!Ft),onSettingsClick:()=>ke(!Ve),forceHide:lt,renderFab:de=>n.jsx(pN,{isVisible:de&&!Ve&&!Ft&&!lt,onOpenAI:()=>it(!0),onAddTransaction:mn,onMigrate:()=>ga(!0)}),children:n.jsx(fN,{onRefresh:xa,children:n.jsx(xN,{children:n.jsxs(x.Suspense,{fallback:n.jsxs(\"div\",{className:\"space-y-6 pt-12\",children:[n.jsx(mN,{}),n.jsx(\"p\",{className:\"text-center text-slate-500 text-sm\",children:\"Loading Component...\"})]}),children:[le===\"dashboard\"&&n.jsx(\"div\",{className:\"space-y-6\",children:n.jsx(SN,{expenses:l,incomes:o,currency:i.currency,goals:d,liabilities:g,debts:u,investments:S,accounts:h,emergencyFundAmount:E,healthScore:xt.score,userName:i.name,isOffline:W,isSampleMode:i.isSampleMode,onNavigate:de=>je(de),onAddTransaction:de=>{xe(de),pe(!0)}})}),le===\"budgets\"&&n.jsx(\"div\",{className:\"px-4 py-6\",children:n.jsx(NN,{})}),le===\"transactions\"&&n.jsx(CN,{expenses:l,incomes:o,debts:u,accounts:h,currency:i.currency,onEditExpense:hn,onDeleteExpense:M,onEditIncome:Ya,onDeleteIncome:z,onEditDebt:ba,onDeleteDebt:ee,onSettleDebt:Z}),le===\"goals\"&&n.jsx(EN,{goals:d,currency:i.currency,accounts:h,expenses:l,incomes:o,onCreateGoal:_,onUpdateGoal:B,onDeleteGoal:J,onDeductFromAccount:async(de,Fe)=>{const Ee=h.find(rt=>rt.id===de);Ee&&await F(de,{balance:Ee.balance-Fe})}}),le===\"accounts\"&&n.jsx(uN,{accounts:h,currency:i.currency,onCreateAccount:ne,onUpdateAccount:F,onDeleteAccount:oe}),le===\"investments\"&&n.jsx(kN,{}),le===\"emergency\"&&n.jsx(AN,{currency:i.currency,userId:A,expenses:l,incomes:o,accounts:h,onEmergencyFundUpdate:de=>ge(de)}),le===\"recurring\"&&n.jsx(oj,{}),le===\"more\"&&n.jsx(nN,{onNavigate:de=>je(de),onOpenSettings:()=>ke(!0),onOpenNotifications:()=>fe(!0),emergencyFundAmount:E,bankAccountsCount:h.filter(de=>de.type===\"bank\").length,cardsCount:h.filter(de=>de.type===\"credit_card\").length,currency:i.currency,onOpenAbout:()=>Kt(!0)})]})})})}),Ae&&n.jsx(gj,{isOpen:Ae,onClose:()=>{pe(!1),We(null)},type:ve,onSubmit:Me,initialData:Ke,accounts:h,liabilities:g,currency:i.currency,roundUpEnabled:i.roundUpEnabled,defaultAccountId:Fn.suggestedSpendAccountId||void 0}),zt&&n.jsx(xj,{isOpen:Oa,onClose:()=>ea(!1),onConfirm:dt,expenseAmount:zt.expenseAmount,roundedAmount:zt.roundedAmount,currency:i.currency,goals:d,onMute:kt}),n.jsx(gN,{isOpen:Ue,onClose:()=>it(!1),context:ni,settings:i,isOffline:W}),n.jsx(aN,{isOpen:Ve,onClose:()=>ke(!1),settings:i,onUpdateSettings:w,onAchievementClick:de=>{ze(de),mt(!0),ke(!1)},onOpenAbout:()=>Kt(!0)}),n.jsx(lN,{isOpen:Ft,onClose:()=>fe(!1),notifications:N,onNotificationClick:async de=>{if(de.achievementId&&(ze(de.achievementId),mt(!0)),de.action&&de.action.type===\"verify_subscription\"&&de.action.status===\"completed\"){const{description:Fe,amount:Ee,category:rt,accountId:Ct,date:et}=de.action.payload;try{await me({type:\"expense\",description:Fe,amount:Ee,category:rt,accountId:Ct,frequency:\"monthly\",startDate:et||new Date().toISOString().split(\"T\")[0],tags:[\"auto-verified\",\"subscription\"]}),ce.success(`Verified: ${Fe} is now a recurring subscription.`),O(bt=>bt.map(Tt=>Tt.id===de.id?{...Tt,read:!0}:Tt))}catch{ce.error(\"Failed to automate subscription.\")}}else de.action&&de.action.status===\"dismissed\"&&(ce.info(\"Marked as one-time purchase.\"),O(Fe=>Fe.map(Ee=>Ee.id===de.id?{...Ee,read:!0}:Ee)));de.action||(de.category===\"reminders\"?je(\"recurring\"):de.category===\"transactions\"&&je(\"transactions\"),fe(!1))},onMarkAsRead:de=>{O(Fe=>Fe.map(Ee=>Ee.id===de?{...Ee,read:!0}:Ee))},onClearRead:()=>{O(de=>de.filter(Fe=>!Fe.read)),ce.success(\"Read notifications cleared\")}}),n.jsx(rN,{isOpen:lt,onClose:()=>{mt(!1),ze(null)},achievementId:Se}),n.jsx(oN,{isOpen:k,onClose:Q,accounts:h,goals:d,currency:i.currency,destinationType:U,emergencyFund:{currentAmount:E,targetAmount:1e5},onAllocate:ae,liabilities:g,expenses:l}),n.jsx(dN,{isOpen:_a,onClose:()=>ga(!1),accounts:h,currency:i.currency,onTransfer:v}),n.jsx(yN,{isOpen:Ra,onClose:()=>Kt(!1)})]})},\"main-app\")}),Y&&n.jsx(Rp,{open:!0,onOpenChange:()=>V(null),children:n.jsxs(Op,{className:\"bg-slate-900/95 border-white/10 text-slate-100 z-[99999999] backdrop-blur-xl\",children:[n.jsxs(zp,{children:[n.jsx(Up,{className:\"text-white text-xl font-bold font-sans\",children:\"Backfill Configuration Required\"}),n.jsxs(Ip,{className:\"text-slate-400 text-base\",children:[\"System detected \",n.jsxs(\"span\",{className:\"text-emerald-400 font-bold\",children:[Y.count,\" missing entries\"]}),\" in the transaction history\",Y.dates?.length>0&&n.jsxs(n.Fragment,{children:[\" \",\"from \",n.jsx(\"span\",{className:\"text-white font-medium\",children:Y.dates[0]?.toLocaleDateString(\"en-IN\",{day:\"numeric\",month:\"short\",year:\"numeric\"})}),\" \",\"to \",n.jsx(\"span\",{className:\"text-white font-medium\",children:Y.dates[Y.dates.length-1]?.toLocaleDateString(\"en-IN\",{day:\"numeric\",month:\"short\",year:\"numeric\"})})]}),\".\",n.jsx(\"br\",{}),n.jsx(\"br\",{}),\"Would you like to auto-populate the ledger for this period?\"]})]}),n.jsxs(Lp,{className:\"mt-4\",children:[n.jsx(qp,{onClick:()=>V(null),className:\"bg-white/5 border-white/5 text-slate-400 hover:text-white hover:bg-white/10 rounded-xl h-12 uppercase tracking-wider text-xs font-bold\",children:\"Cancel\"}),n.jsx(Bp,{onClick:()=>{te(),V(null)},className:\"bg-indigo-600 hover:bg-indigo-500 text-white border-0 font-bold rounded-xl h-12 px-8 shadow-lg shadow-indigo-600/20\",children:\"Generate Ledger\"})]})]})}),n.jsx(d1,{position:\"bottom-center\",richColors:!0,theme:\"dark\",toastOptions:{style:{background:\"#1C1C1E\",border:\"1px solid rgba(255, 255, 255, 0.1)\",color:\"#FFFFFF\",borderRadius:\"20px\",backdropFilter:\"none\",zIndex:9999999}},className:\"!z-[9999999]\"})]})}function DN({children:i,...l}){return n.jsx(jj,{...l,children:i})}function MN(i={}){const{immediate:l=!1,onNeedRefresh:o,onOfflineReady:u,onRegistered:d,onRegisteredSW:h,onRegisterError:g}=i;let N,E;const S=async(f=!0)=>{await E};async function p(){if(\"serviceWorker\"in navigator){if(N=await Fa(async()=>{const{Workbox:f}=await import(\"./workbox-window.prod.es5-BIl4cyR9.js\");return{Workbox:f}},[]).then(({Workbox:f})=>new f(\"/sw.js\",{scope:\"/\",type:\"classic\"})).catch(f=>{g?.(f)}),!N)return;N.addEventListener(\"activated\",f=>{(f.isUpdate||f.isExternal)&&window.location.reload()}),N.addEventListener(\"installed\",f=>{f.isUpdate||u?.()}),N.register({immediate:l}).then(f=>{h?h(\"/sw.js\",f):d?.(f)}).catch(f=>{g?.(f)})}}return E=p(),S}MN({immediate:!0});wv.createRoot(document.getElementById(\"root\")).render(n.jsx(H1,{children:n.jsx(DN,{attribute:\"class\",defaultTheme:\"dark\",forcedTheme:\"dark\",children:n.jsx(TN,{})})}));export{Bn as A,Re as B,Ki as C,us as D,Tu as E,C0 as F,LN as G,z0 as H,wt as I,L0 as J,ye as L,Qu as M,Ha as N,Ut as S,Ru as T,Uu as W,at as a,u0 as b,Zi as c,hu as d,pu as e,Ne as f,gu as g,Fu as h,mj as i,fp as j,Ot as k,De as l,Le as m,Iu as n,ds as o,fs as p,ms as q,hs as r,Bt as s,ce as t,Gp as u,It as v,qt as w,qe as x,vu as y,ai as z};"
      },
      {
        "file": "dist_test\\assets\\index-DHabN7TV.js",
        "line": 59,
        "snippet": "`.trim();return await lg(g,h,x,u)},tN=async(i,r)=>await lg(i,r,\"Respond with only the word 'OK' to verify connectivity.\",\"ASSISTANT\"),aN=i=>{if(i.aiProvider&&Dl(i.aiProvider,i))return i.aiProvider;const r=[\"openai\",\"anthropic\",\"gemini\",\"deepseek\",\"perplexity\"];for(const c of r)if(Dl(c,i))return c;return null},q0={BASE_URL:\"/\",DEV:!1,MODE:\"production\",PROD:!0,SSR:!1},nN=({isOpen:i,onClose:r,settings:c,onUpdateSettings:u,onAchievementClick:m,onOpenAbout:g})=>{const[h,y]=A.useState(c.name||\"\"),[p,x]=A.useState(c.photoURL||\"\"),[v,f]=A.useState(!1),[N,M]=A.useState(null),[O,B]=A.useState({}),[L,R]=A.useState(!1),{logout:P,scheduleAccountDeletion:V,migrateSubscriptions:S,cleanupDuplicates:se,clearAllData:he}=Di(),[ve,fe]=A.useState(!1),ye=async()=>{R(!0);try{await S()}catch(ce){console.error(\"Migration failed:\",ce),J.error(\"Migration failed\")}finally{R(!1)}},[Se,qe]=A.useState(\"USD\"),[Te,ee]=A.useState(\"100\"),[me,G]=A.useState(\"100000\"),[C,Y]=A.useState(\"10\"),[oe,ge]=A.useState(\"6\"),[z,T]=A.useState(!1),re=async()=>{const Ee={USD:\"US\",INR:\"IN\",GBP:\"GB\",EUR:\"EMU\",AED:\"AE\",SAR:\"SA\"}[c.currency]||\"US\";T(!0);try{const yt=await(await fetch(`https://api.worldbank.org/v2/country/${Ee}/indicator/FP.CPI.TOTL.ZG?format=json&per_page=1`)).json();if(yt&&yt[1]&&yt[1][0]&&yt[1][0].value){const Ut=yt[1][0].value;ge(Ut.toFixed(2)),J.success(`Inflation rate synced for ${c.currency}`)}}catch(He){console.error(\"Inflation sync failed:\",He),J.error(\"Failed to sync inflation rate.\")}finally{T(!1)}},$=Array.from({length:(parseInt(C)||0)+1},(ce,Ee)=>{const He=parseFloat(me)||0,yt=parseFloat(oe)||0,Ut=He*Math.pow(1+yt/100,Ee),Oa=He/Math.pow(1+yt/100,Ee);return{year:Ee,futureCost:Math.round(Ut),purchasingPower:Math.round(Oa)}}),le=[\"INR\",\"USD\",\"EUR\",\"GBP\",\"AED\",\"SAR\"],ue=c.currency;A.useEffect(()=>{y(c.name||\"\"),x(c.photoURL||\"\")},[c]),A.useEffect(()=>{i&&Ne()},[i,Se]);const Ne=async()=>{try{const Ee=await(await fetch(`https://api.exchangerate-api.com/v4/latest/${Se}`)).json();B(Ee.rates||{}),Te&&je(Te,Ee.rates)}catch(ce){console.error(\"Error loading exchange rates:\",ce)}},je=(ce,Ee)=>{const He=parseFloat(ce);if(!isNaN(He)&&He>0){const Ut=(Ee||O)[ue]||1;M(He*Ut)}else M(null)},de=ce=>{ee(ce),je(ce)},{setTheme:xe}=jj();A.useEffect(()=>{c.theme!==\"dark\"&&(xe(\"dark\"),u({theme:\"dark\"}))},[]);const Ke=()=>{u({name:h,photoURL:p}),f(!1)},Ie=ce=>{const Ee=ce.target.files?.[0];if(Ee){const He=new FileReader;He.onloadend=()=>{x(He.result)},He.readAsDataURL(Ee)}},Ve=n1(),rt=new Set(c.unlockedAchievements),De=c.aiProvider||\"openai\",tt=[{id:\"openai\",label:\"OpenAI\",placeholder:\"sk-...\"},{id:\"anthropic\",label:\"Anthropic\",placeholder:\"sk-ant-...\"},{id:\"gemini\",label:\"Gemini\",placeholder:\"AIza...\"},{id:\"deepseek\",label:\"Deepseek\",placeholder:\"sk-...\"},{id:\"perplexity\",label:\"Perplexity\",placeholder:\"pplx-...\"}],[St,mt]=A.useState(!1),[zt,ut]=A.useState(null),bt=A.useCallback((ce,Ee)=>{u({[ce]:Ee})},[u]),la=async()=>{const ce=Dl(De,c);if(!ce){J.error(\"No API key found in Settings or System Environment\");return}mt(!0),ut(null);try{const Ee=await tN(De,ce);Ee.error?(ut({success:!1,message:Ee.error}),J.error(`Connection failed: ${Ee.error}`)):(ut({success:!0,message:\"Neural link established.\"}),J.success(\"Connection successful!\"))}catch(Ee){const He=Ee.message||\"Unknown protocol error\";ut({success:!1,message:He}),J.error(`Protocol breach: ${He}`)}finally{mt(!1)}};return n.jsx(Xp,{open:i,onOpenChange:r,children:n.jsxs(Qp,{side:\"left\",className:\"w-full sm:max-w-lg overflow-y-auto px-0 bg-slate-950 border-white/5 text-slate-100 h-dvh\",children:[n.jsx(Zp,{className:\"sr-only\",children:\"Settings\"}),n.jsx(Kp,{className:\"sr-only\",children:\"Customize your FinHub core experience.\"}),n.jsxs(\"div\",{className:\"space-y-12 animate-in fade-in slide-in-from-left-4 duration-500 px-8 pt-12 pb-10 text-white relative\",children:[n.jsx(\"div\",{className:\"absolute top-4 right-4 z-20\",children:n.jsx(Ge,{variant:\"ghost\",size:\"icon\",onClick:r,className:\"w-10 h-10 rounded-full bg-white/5 text-slate-400 hover:text-white hover:bg-white/10\",children:n.jsx(Tl,{className:\"w-5 h-5\"})})}),n.jsxs(\"div\",{className:\"flex flex-col gap-2\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-1.5 h-8 bg-indigo-500 rounded-full shadow-[0_0_15px_rgba(99,102,241,0.5)]\"}),n.jsx(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tight leading-none text-white\",children:\"System Config\"})]}),n.jsx(\"p\",{className:\"text-slate-500 font-bold ml-4 text-sm\",children:\"Customize your FinHub core experience.\"})]}),n.jsxs(\"div\",{className:\"space-y-10\",children:[n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"h3\",{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Mu,{className:\"w-3.5 h-3.5\"}),\"User Identity\"]}),n.jsx(Ge,{variant:\"ghost\",size:\"sm\",onClick:()=>f(!v),className:\"text-[10px] font-black uppercase tracking-widest text-indigo-400 hover:text-indigo-300 hover:bg-white/5\",children:v?\"Abort\":\"Refine\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-8 bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-indigo-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsxs(\"div\",{className:\"relative\",children:[p?n.jsx(\"img\",{src:p,alt:\"Profile\",className:\"w-24 h-24 rounded-full object-cover border-4 border-slate-800 shadow-2xl\"}):n.jsx(\"div\",{className:\"w-24 h-24 bg-gradient-to-br from-indigo-600 to-purple-700 rounded-full flex items-center justify-center shadow-2xl\",children:n.jsx(Mu,{className:\"w-12 h-12 text-white/90\"})}),v&&n.jsxs(\"label\",{className:\"absolute bottom-0 right-0 w-9 h-9 bg-indigo-600 rounded-full flex items-center justify-center cursor-pointer hover:bg-indigo-500 shadow-lg border-4 border-slate-900 transition-transform active:scale-90\",children:[n.jsx(ty,{className:\"w-4 h-4 text-white\"}),n.jsx(\"input\",{type:\"file\",accept:\"image/*\",className:\"hidden\",onChange:Ie,\"aria-label\":\"Upload profile picture\"})]})]}),n.jsx(\"div\",{className:\"flex-1 min-w-0\",children:v?n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(Re,{htmlFor:\"settings-profile-name\",className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Alias\"}),n.jsx(Pt,{id:\"settings-profile-name\",name:\"name\",placeholder:\"e.g. Maverick\",value:h,onChange:ce=>y(ce.target.value),className:\"bg-white/5 border-white/5 rounded-xl h-12 text-white placeholder:text-slate-700 font-bold\",autoComplete:\"name\"})]}),n.jsx(Ge,{size:\"sm\",onClick:Ke,className:\"w-full h-12 bg-indigo-600 hover:bg-indigo-500 text-white font-black rounded-xl\",children:\"Commit Identity\"})]}):n.jsxs(n.Fragment,{children:[n.jsx(\"h4\",{className:\"text-2xl font-black text-slate-100 tracking-tight\",children:h||\"Guest User\"}),n.jsx(\"p\",{className:\"text-xs text-slate-500 font-bold uppercase tracking-widest mt-1\",children:\"FinHub Node // 0x50.3\"})]})})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsx(\"div\",{className:\"space-y-4\",children:n.jsxs(\"button\",{onClick:()=>u({roundUpEnabled:!c.roundUpEnabled}),className:`w-full flex items-center justify-between p-6 rounded-[32px] border transition-all relative overflow-hidden group ${c.roundUpEnabled?\"bg-emerald-500/10 border-emerald-500/50 shadow-[0_0_20px_rgba(16,185,129,0.1)]\":\"bg-slate-900/40 border-white/5 grayscale opacity-60 hover:opacity-100 hover:grayscale-0\"}`,children:[n.jsx(\"div\",{className:`absolute top-0 right-0 w-24 h-24 blur-3xl opacity-10 -mr-12 -mt-12 transition-colors ${c.roundUpEnabled?\"bg-emerald-500\":\"bg-slate-500\"}`}),n.jsxs(\"div\",{className:\"space-y-1 relative z-10 flex-1 pr-4 text-left\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-2 text-sm font-black text-slate-100 uppercase tracking-tight\",children:[n.jsx(Si,{className:`w-4 h-4 ${c.roundUpEnabled?\"text-emerald-500\":\"text-slate-500\"}`}),\"Virtual Round-Ups\"]}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 font-bold leading-relaxed uppercase tracking-widest\",children:\"Build your fortress automatically via expense spillover.\"})]}),n.jsx(\"div\",{className:`relative z-10 px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${c.roundUpEnabled?\"bg-emerald-500 text-white shadow-lg shadow-emerald-500/20\":\"bg-slate-800 text-slate-500\"}`,children:c.roundUpEnabled?\"Active\":\"Offline\"})]})}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(Re,{htmlFor:\"settings-currency\",className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Lh,{className:\"w-3.5 h-3.5\"}),\"Standard Denomination\"]}),n.jsxs(\"div\",{className:\"bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-indigo-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsx(\"div\",{className:\"space-y-2 relative z-10\",children:n.jsxs(ha,{value:c.currency,onValueChange:ce=>u({currency:ce}),children:[n.jsx(ga,{id:\"settings-currency\",name:\"currency\",className:\"bg-white/5 border-white/5 rounded-2xl h-14 font-black\",children:n.jsx(pa,{})}),n.jsxs(xa,{className:\"bg-slate-900 border-white/10 text-white\",children:[n.jsx(vt,{value:\"USD\",children:\"USD ($) - US Dollar\"}),n.jsx(vt,{value:\"EUR\",children:\"EUR (€) - Euro\"}),n.jsx(vt,{value:\"GBP\",children:\"GBP (£) - British Pound\"}),n.jsx(vt,{value:\"INR\",children:\"INR (₹) - Indian Rupee\"}),n.jsx(vt,{value:\"AED\",children:\"AED (د.إ) - UAE Dirham\"}),n.jsx(vt,{value:\"SAR\",children:\"SAR (﷼) - Saudi Riyal\"})]})]})})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(Re,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Lh,{className:\"w-3.5 h-3.5\"}),\"Foreign Exchange Probe\"]}),n.jsxs(\"div\",{className:\"space-y-6 p-6 bg-slate-900/40 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-blue-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4 relative z-10\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(Re,{htmlFor:\"converter-from-currency\",className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Source\"}),n.jsxs(ha,{value:Se,onValueChange:ce=>{qe(ce)},children:[n.jsx(ga,{id:\"converter-from-currency\",name:\"fromCurrency\",className:\"bg-white/5 border-white/5 rounded-2xl h-12\",children:n.jsx(pa,{})}),n.jsx(xa,{className:\"bg-slate-900 border-white/10 text-white\",children:le.map(ce=>n.jsxs(vt,{value:ce,children:[cn[ce],\" \",ce]},ce))})]})]}),n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(Re,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Target\"}),n.jsxs(\"div\",{className:\"h-12 flex items-center justify-center bg-indigo-500/10 rounded-2xl border border-indigo-500/20 text-xs font-black text-indigo-400\",children:[cn[ue],\" \",ue]})]})]}),n.jsxs(\"div\",{className:\"space-y-1.5 relative z-10\",children:[n.jsx(Re,{htmlFor:\"converter-amount\",className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Capital Amount\"}),n.jsx(Pt,{id:\"converter-amount\",name:\"amount\",type:\"number\",placeholder:\"Enter amount\",value:Te,onChange:ce=>{const Ee=ce.target.value;parseFloat(Ee)<0||de(Ee)},min:\"0\",className:\"bg-white/5 border-white/5 rounded-2xl h-14 font-black text-lg\",autoComplete:\"off\"})]}),N!==null&&n.jsxs(\"div\",{className:\"p-6 bg-white/5 rounded-2xl border border-white/5 animate-in fade-in slide-in-from-top-2 relative z-10\",children:[n.jsx(\"p\",{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 mb-2\",children:\"Calculated Projection\"}),n.jsxs(\"div\",{className:\"flex items-baseline gap-2\",children:[n.jsxs(\"p\",{className:\"text-2xl font-black text-emerald-400 tabular-nums\",children:[cn[ue],N.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold uppercase tracking-widest\",children:\"ESTIMATED VALUATION\"})]}),O[ue]&&n.jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-white/5 flex items-center justify-between\",children:[n.jsx(\"span\",{className:\"text-[8px] font-black uppercase tracking-[0.2em] text-slate-700\",children:\"Protocol Rate\"}),n.jsxs(\"span\",{className:\"text-[10px] font-black text-slate-500 tabular-nums\",children:[\"1 \",Se,\" = \",O[ue].toFixed(4),\" \",ue]})]})]})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(Re,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Si,{className:\"w-3.5 h-3.5 text-rose-500\"}),\"Inflation Projection Node\"]}),n.jsxs(\"div\",{className:\"space-y-6 p-6 bg-slate-900/40 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-rose-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsxs(\"div\",{className:\"space-y-4 relative z-10\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(Re,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Current Capital\"}),n.jsx(Pt,{type:\"number\",value:me,onChange:ce=>G(ce.target.value),className:\"bg-white/5 border-white/5 rounded-2xl h-12 font-black\",placeholder:\"e.g. 1000000\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(Re,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Horizon (Years)\"}),n.jsx(Pt,{type:\"number\",value:C,onChange:ce=>Y(ce.target.value),className:\"bg-white/5 border-white/5 rounded-2xl h-12 font-black\"})]}),n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between ml-1\",children:[n.jsx(Re,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500\",children:\"Rate (%)\"}),n.jsxs(\"button\",{onClick:re,disabled:z,className:\"text-[8px] font-black uppercase text-indigo-400 hover:text-indigo-300 disabled:opacity-50 flex items-center gap-1\",children:[z?n.jsx(uu,{className:\"w-2 h-2 animate-spin\"}):n.jsx(ay,{className:\"w-2 h-2\"}),\"Sync\"]})]}),n.jsx(Pt,{type:\"number\",value:oe,onChange:ce=>ge(ce.target.value),className:\"bg-white/5 border-white/5 rounded-2xl h-12 font-black\"})]})]}),me&&n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(\"div\",{className:\"h-32 w-full bg-black/20 rounded-2xl p-2 border border-white/5 overflow-hidden\",children:n.jsx(fv,{width:\"100%\",height:\"100%\",minHeight:128,minWidth:100,children:n.jsxs(mv,{data:$,children:[n.jsxs(\"defs\",{children:[n.jsxs(\"linearGradient\",{id:\"colorCost\",x1:\"0\",y1:\"0\",x2:\"0\",y2:\"1\",children:[n.jsx(\"stop\",{offset:\"5%\",stopColor:\"#FB7185\",stopOpacity:.3}),n.jsx(\"stop\",{offset:\"95%\",stopColor:\"#FB7185\",stopOpacity:0})]}),n.jsxs(\"linearGradient\",{id:\"colorPower\",x1:\"0\",y1:\"0\",x2:\"0\",y2:\"1\",children:[n.jsx(\"stop\",{offset:\"5%\",stopColor:\"#34D399\",stopOpacity:.3}),n.jsx(\"stop\",{offset:\"95%\",stopColor:\"#34D399\",stopOpacity:0})]})]}),n.jsx(hv,{strokeDasharray:\"3 3\",vertical:!1,stroke:\"rgba(255,255,255,0.05)\"}),n.jsx(pv,{contentStyle:{backgroundColor:\"#0f172a\",border:\"1px solid rgba(255,255,255,0.1)\",borderRadius:\"8px\",fontSize:\"10px\"},itemStyle:{color:\"#fff\",padding:\"2px 0\"}}),n.jsx(Fh,{type:\"monotone\",dataKey:\"futureCost\",stroke:\"#FB7185\",fillOpacity:1,fill:\"url(#colorCost)\"}),n.jsx(Fh,{type:\"monotone\",dataKey:\"purchasingPower\",stroke:\"#34D399\",fillOpacity:1,fill:\"url(#colorPower)\"})]})})}),n.jsxs(\"div\",{className:\"p-6 bg-white/5 rounded-2xl border border-white/5 space-y-4\",children:[n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 mb-2\",children:\"Future Cost\"}),n.jsxs(\"p\",{className:\"text-xl font-black text-rose-400 tabular-nums\",children:[cn[c.currency],Math.round(parseFloat(me)*Math.pow(1+parseFloat(oe)/100,parseFloat(C))).toLocaleString()]})]}),n.jsxs(\"div\",{className:\"pt-4 border-t border-white/5\",children:[n.jsx(\"p\",{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 mb-2\",children:\"Real Purchasing Power\"}),n.jsxs(\"p\",{className:\"text-xl font-black text-emerald-400 tabular-nums\",children:[cn[c.currency],Math.round(parseFloat(me)/Math.pow(1+parseFloat(oe)/100,parseFloat(C))).toLocaleString()]}),n.jsx(\"p\",{className:\"text-[8px] text-slate-600 font-bold uppercase tracking-widest mt-1\",children:\"VALUATION IN TODAY'S MONEY\"})]})]})]})]})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(Re,{className:\"text-[10px] font-bold uppercase tracking-[0.2em] text-slate-500 flex items-center gap-2\",children:[n.jsx(ny,{className:\"w-3.5 h-3.5 text-indigo-400\"}),\"AI Assistant Config\"]}),n.jsxs(\"div\",{className:\"space-y-6 bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsxs(\"div\",{className:\"space-y-1.5 relative z-10\",children:[n.jsx(Re,{htmlFor:\"ai-provider-select\",className:\"text-[9px] font-bold uppercase tracking-widest text-slate-500 ml-1\",children:\"Preferred Provider\"}),n.jsxs(ha,{value:De,onValueChange:ce=>u({aiProvider:ce}),children:[n.jsx(ga,{id:\"ai-provider-select\",name:\"aiProvider\",className:\"bg-slate-900 border-white/5 rounded-xl h-11 text-[10px] font-bold uppercase tracking-widest\",children:n.jsx(pa,{})}),n.jsx(xa,{className:\"bg-slate-900 border-white/10 text-white\",children:tt.map(ce=>n.jsx(vt,{value:ce.id,className:\"text-[10px] font-bold uppercase tracking-widest\",children:ce.label},ce.id))})]})]}),n.jsxs(\"div\",{className:\"space-y-4 pt-2 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between px-1\",children:[n.jsx(Re,{className:\"text-[9px] font-bold uppercase tracking-widest text-slate-500\",children:\"Active Credential\"}),n.jsx(\"div\",{className:\"flex items-center gap-1.5\",children:n.jsx(\"span\",{className:\"text-[8px] font-bold text-indigo-400/70 uppercase tracking-tighter\",children:tt.find(ce=>ce.id===De)?.label})})]}),tt.filter(ce=>ce.id===De).map(ce=>{const Ee=c.apiKeys?.[ce.id],He=`VITE_${ce.id.toUpperCase()}_API_KEY`,yt=!!q0[He];return n.jsxs(\"div\",{className:\"flex items-center gap-3 bg-indigo-500/5 p-4 rounded-2xl border border-indigo-500/20 group/active transition-all\",children:[n.jsx(\"div\",{className:\"flex-1 min-w-0\",children:n.jsxs(\"div\",{className:\"relative group/input\",children:[n.jsx(Pt,{type:\"password\",value:Ee||\"\",onChange:Ut=>bt(\"apiKeys\",{...c.apiKeys,[ce.id]:Ut.target.value}),placeholder:yt?\"Using System Environment Key\":`Enter ${ce.label} Key`,className:`bg-transparent border-none p-0 h-auto text-sm font-bold text-white placeholder:text-slate-700 focus-visible:ring-0 shadow-none ${yt&&!Ee?\"opacity-40 italic font-medium\":\"\"}`,disabled:yt&&!Ee}),yt&&!Ee&&n.jsx(\"div\",{className:\"flex items-center gap-1 mt-1\",children:n.jsx(\"span\",{className:\"text-[7px] font-black text-emerald-500 uppercase tracking-widest bg-emerald-500/10 px-1 py-0.5 rounded\",children:\"System Linked\"})})]})}),Ee&&n.jsx(\"button\",{onClick:()=>bt(\"apiKeys\",{...c.apiKeys,[ce.id]:\"\"}),className:\"text-slate-600 hover:text-rose-500 transition-colors p-1\",title:\"Clear saved key\",\"aria-label\":`Clear saved key for ${ce.label}`,children:n.jsx(Ai,{className:\"w-3.5 h-3.5\"})})]},ce.id)}),n.jsx(Ge,{onClick:la,disabled:St||!Dl(De,c),className:`w-full h-11 transition-all font-bold uppercase tracking-[0.2em] text-[10px] rounded-xl ${zt?.success?\"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20\":zt?.success===!1?\"bg-rose-500/10 text-rose-400 border border-rose-500/20\":\"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20\"}`,children:St?n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(uu,{className:\"w-3.5 h-3.5 animate-spin\"}),\"Verifying...\"]}):zt?.success?n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(Sl,{className:\"w-3.5 h-3.5\"}),\"Link Stable\"]}):\"Validate Connection\"})]}),n.jsxs(Ej,{className:\"relative z-10\",children:[n.jsx(Mj,{asChild:!0,children:n.jsxs(Ge,{variant:\"ghost\",className:\"w-full h-8 hover:bg-white/5 text-slate-500 hover:text-slate-300 text-[8px] font-bold uppercase tracking-widest group/trigger flex items-center justify-between px-2 rounded-lg\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(sy,{className:\"w-3 h-3 text-slate-600 group-hover/trigger:text-slate-400\"}),\"Alternative Nodes\"]}),n.jsx(Kr,{className:\"w-3 h-3 transition-transform duration-300 group-data-[state=open]/trigger:rotate-180\"})]})}),n.jsx(zj,{className:\"pt-4 space-y-3 animate-in fade-in slide-in-from-top-2 duration-300\",children:n.jsx(\"div\",{className:\"grid gap-2\",children:tt.filter(ce=>ce.id!==De).map(ce=>{const Ee=c.apiKeys?.[ce.id],He=`VITE_${ce.id.toUpperCase()}_API_KEY`,yt=!!q0[He];return n.jsxs(\"div\",{className:\"flex items-center gap-3 bg-slate-950/40 p-3 rounded-xl border border-white/5 hover:border-white/10 transition-colors\",children:[n.jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between mb-1\",children:[n.jsx(\"span\",{className:\"text-[8px] font-bold uppercase tracking-wider text-slate-500\",children:ce.label}),yt&&!Ee&&n.jsx(\"span\",{className:\"text-[7px] font-bold text-emerald-500/50 uppercase tracking-tighter\",children:\"System\"})]}),n.jsx(Pt,{type:\"password\",value:Ee||\"\",onChange:Ut=>bt(\"apiKeys\",{...c.apiKeys,[ce.id]:Ut.target.value}),placeholder:yt?\"Using System Default\":\"Key not found\",className:\"bg-transparent border-none p-0 h-auto text-[10px] text-slate-400 placeholder:text-slate-800 focus-visible:ring-0 shadow-none italic font-medium cursor-not-allowed\",disabled:yt&&!Ee})]}),Ee&&n.jsx(\"button\",{onClick:()=>bt(\"apiKeys\",{...c.apiKeys,[ce.id]:\"\"}),className:\"text-slate-800 hover:text-rose-500 transition-colors p-1\",title:\"Clear saved key\",\"aria-label\":`Clear saved key for ${ce.label}`,children:n.jsx(Ai,{className:\"w-3 h-3\"})})]},ce.id)})})})]})]})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(Re,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(du,{className:\"w-3.5 h-3.5 text-indigo-400\"}),\"Data Optimization Node\"]}),n.jsxs(\"div\",{className:\"p-6 bg-slate-900/40 rounded-[32px] border border-white/5 relative overflow-hidden\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-300\",children:\"Subscription Protocol Scan\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-wide mt-1\",children:\"DETECT & MIGRATE RECURRING SIGNALS\"})]}),n.jsx(Ge,{onClick:ye,disabled:L,className:\"bg-indigo-600 hover:bg-indigo-500 text-white font-black uppercase tracking-widest text-[9px] h-9 px-4 rounded-xl shadow-lg shadow-indigo-500/20\",children:L?n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(uu,{className:\"w-3 h-3 animate-spin\"}),\"Scanning...\"]}):\"Execute Scan\"})]}),n.jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-white/5 flex items-center justify-between\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-300\",children:\"Redundancy Purge\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-wide mt-1\",children:\"REMOVE BLANK & DUPLICATE ENTRIES\"})]}),n.jsx(Ge,{onClick:async()=>{const ce=J.loading(\"Purging duplicates...\");try{const Ee=await se();J.dismiss(ce)}catch{J.dismiss(ce),J.error(\"Purge failed\")}},className:\"bg-rose-500/10 hover:bg-rose-500/20 text-rose-400 border border-rose-500/20 font-black uppercase tracking-widest text-[9px] h-9 px-4 rounded-xl\",children:\"Purge Logs\"})]})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(Re,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(iy,{className:\"w-3.5 h-3.5 text-amber-500\"}),\"Reputation Rank (\",c.unlockedAchievements.length,\"/\",Ve.length,\")\"]}),n.jsx(\"div\",{className:\"grid grid-cols-4 sm:grid-cols-6 gap-3\",children:Ve.map(ce=>{const Ee=rt.has(ce.id);return n.jsx(\"button\",{onClick:()=>{Ee&&m&&m(ce.id)},disabled:!Ee,className:`w-12 h-12 rounded-xl border flex items-center justify-center text-xl transition-all ${Ee?\"border-amber-500/50 bg-amber-500/10 grayscale-0 hover:scale-110 hover:shadow-lg hover:shadow-amber-500/20 active:scale-95\":\"border-white/5 bg-white/5 grayscale opacity-20 cursor-not-allowed\"}`,children:ce.icon},ce.id)})}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 font-bold text-center leading-relaxed\",children:c.unlockedAchievements.length>0?\"Select a sigil to view the record of your triumph.\":\"Initiate financial protocols to manifest higher ranks.\"})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsx(\"div\",{className:\"space-y-4\",children:n.jsxs(\"div\",{className:\"p-4 bg-rose-500/5 border border-rose-500/10 rounded-2xl flex items-center justify-between\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"text-[10px] font-black uppercase tracking-widest text-rose-400\",children:\"Factory Reset\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-wide mt-1\",children:\"WIPE ALL TRANSACTIONS & RECURRING (KEEP ACCOUNT)\"})]}),n.jsx(Ge,{onClick:async()=>{confirm(\"Are you sure? This deletes ALL transaction data.\")&&await he()},className:\"bg-slate-950 hover:bg-rose-500 text-rose-500 hover:text-white border border-rose-500/20 font-black uppercase tracking-widest text-[9px] h-9 px-4 rounded-xl transition-colors\",children:\"Wipe Data\"})]})}),n.jsx(Rj,{className:\"bg-white/5\"}),n.jsxs(\"div\",{className:\"text-center pt-8 space-y-2 opacity-40 hover:opacity-100 transition-opacity duration-700 pb-10\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-[0.5em] text-slate-100\",children:\"Obsidian System Node\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-widest\",children:\"Architect: Sijo Joseph // BUILD 50.3.0 // QUANTUM CORE\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-700 uppercase tracking-widest mt-4\",children:\"© 2025 NEURAL FINHUB FABRIC\"}),n.jsx(\"button\",{onClick:g,className:\"mt-4 text-[8px] font-black text-indigo-400/60 hover:text-indigo-400 uppercase tracking-[0.2em] transition-colors\",children:\"[ Protocol Info // About ]\"})]}),n.jsxs(\"div\",{className:\"px-2 pb-10\",children:[n.jsxs(Ge,{variant:\"outline\",onClick:()=>{P(),r()},className:\"w-full h-14 bg-white/5 hover:bg-white/10 border-white/10 hover:border-white/20 text-white/60 hover:text-white font-black uppercase tracking-widest gap-3 rounded-[24px] transition-all group mb-4\",children:[n.jsx(ly,{className:\"w-5 h-5 group-hover:-translate-x-1 transition-transform\"}),\"Terminate Session\"]}),n.jsxs(Jp,{open:ve,onOpenChange:fe,children:[n.jsx(Oj,{asChild:!0,children:n.jsxs(Ge,{variant:\"outline\",className:\"w-full h-14 bg-rose-500/5 hover:bg-rose-500/10 border-rose-500/20 hover:border-rose-500/40 text-rose-500 font-black uppercase tracking-widest gap-3 rounded-[24px] transition-all group\",children:[n.jsx(du,{className:\"w-5 h-5 group-hover:scale-110 transition-transform\"}),\"Delete Account & Data\"]})}),n.jsxs(Wp,{className:\"bg-slate-950 border-white/10 text-white rounded-[32px] p-8\",children:[n.jsxs(eg,{children:[n.jsxs(ag,{className:\"text-2xl font-black tracking-tight flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"p-2 rounded-full bg-rose-500/20 text-rose-500\",children:n.jsx(du,{className:\"w-6 h-6\"})}),\"Irreversible Action?\"]}),n.jsxs(ng,{className:\"text-slate-400 font-medium leading-relaxed mt-4\",children:[\"Your account will be \",n.jsx(\"span\",{className:\"text-white font-bold italic\",children:\"deactivated immediately\"}),\" and scheduled for permanent deletion in \",n.jsx(\"span\",{className:\"text-white font-bold\",children:\"30 days\"}),\".\",n.jsx(\"br\",{}),n.jsx(\"br\",{}),\"Log in anytime before then to cancel this request and restore your data node.\"]})]}),n.jsxs(tg,{className:\"mt-8 gap-3\",children:[n.jsx(ig,{className:\"h-14 flex-1 rounded-2xl bg-white/5 border-white/10 text-slate-400 hover:bg-white/10 hover:text-white font-black uppercase tracking-widest transition-all\",children:\"Abort\"}),n.jsx(sg,{onClick:async()=>{await V(),r()},className:\"h-14 flex-1 rounded-2xl bg-rose-600 hover:bg-rose-500 text-white font-black uppercase tracking-widest shadow-lg shadow-rose-500/20 transition-all active:scale-95\",children:\"Confirm Purge\"})]})]})]})]})]})]})})};function sN({onNavigate:i,onOpenSettings:r,onOpenNotifications:c,emergencyFundAmount:u,bankAccountsCount:m,cardsCount:g,currency:h,onOpenAbout:y}){return n.jsxs(\"div\",{className:\"space-y-12 animate-in fade-in slide-in-from-bottom-4 duration-700 px-4 pb-20\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tight leading-none mb-3\",children:\"Settings & Assets\"}),n.jsx(\"p\",{className:\"text-slate-500 font-bold max-w-md\",children:\"Configure your financial universe and manage core system components.\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[n.jsxs(aa,{className:\"p-8 cursor-pointer bg-black border-white/5 sq-2xl border hover:bg-white/5 transition-all duration-300 group relative overflow-hidden\",onClick:()=>i(\"emergency\"),children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-blue-500 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20\"}),n.jsxs(\"div\",{className:\"relative z-10\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-blue-500/10 border border-blue-500/20 sq-md flex items-center justify-center text-blue-400 mb-8 group-hover:scale-110 transition-transform duration-500\",children:n.jsx(Ti,{className:\"w-8 h-8\"})}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100\",children:\"Emergency Fund\"}),n.jsx(\"p\",{className:\"text-2xl font-black tabular-nums text-blue-400\",children:$e(u,h)})]}),n.jsxs(\"div\",{className:\"mt-8 flex items-center justify-between text-slate-500\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest\",children:\"Financial Safety Net\"}),n.jsx(xn,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]})]})]}),n.jsxs(aa,{className:\"p-8 cursor-pointer bg-black border-white/5 sq-2xl border hover:bg-white/5 transition-all duration-300 group relative overflow-hidden\",onClick:()=>i(\"accounts\"),children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-emerald-500 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20\"}),n.jsxs(\"div\",{className:\"relative z-10\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-emerald-500/10 border border-emerald-500/20 sq-md flex items-center justify-center text-emerald-400 mb-8 group-hover:scale-110 transition-transform duration-500\",children:n.jsx(ep,{className:\"w-8 h-8\"})}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100\",children:\"Accounts & Cards\"}),n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsxs(\"div\",{className:\"space-y-0.5\",children:[n.jsx(\"p\",{className:\"text-2xl font-black tabular-nums text-emerald-400\",children:m}),n.jsx(\"p\",{className:\"text-[10px] font-bold text-slate-600 uppercase tracking-wider\",children:\"Banks\"})]}),n.jsx(\"div\",{className:\"w-px h-8 bg-white/5 self-center mt-2\"}),n.jsxs(\"div\",{className:\"space-y-0.5\",children:[n.jsx(\"p\",{className:\"text-2xl font-black tabular-nums text-emerald-400\",children:g}),n.jsx(\"p\",{className:\"text-[10px] font-bold text-slate-600 uppercase tracking-wider\",children:\"Cards\"})]})]})]}),n.jsxs(\"div\",{className:\"mt-8 flex items-center justify-between text-slate-500\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest\",children:\"Manage Liquidity\"}),n.jsx(xn,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]})]})]}),n.jsxs(aa,{className:\"p-8 cursor-pointer bg-black border-white/5 sq-2xl border hover:bg-white/5 transition-all duration-300 group relative overflow-hidden\",onClick:()=>i(\"recurring\"),children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-indigo-500 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20\"}),n.jsxs(\"div\",{className:\"relative z-10\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-indigo-500/10 border border-indigo-500/20 sq-md flex items-center justify-center text-indigo-400 mb-8 group-hover:scale-110 transition-transform duration-500\",children:n.jsx(Wr,{className:\"w-8 h-8\"})}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100\",children:\"Recurring Flow\"}),n.jsx(\"p\",{className:\"text-sm font-bold text-slate-400 uppercase tracking-tight\",children:\"Subscriptions & EMIs\"})]}),n.jsxs(\"div\",{className:\"mt-11 flex items-center justify-between text-slate-500\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest\",children:\"Active Commitments\"}),n.jsx(xn,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]})]})]})]}),n.jsxs(\"div\",{className:\"pt-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 mb-8\",children:[n.jsx(\"div\",{className:\"w-1.5 h-6 bg-slate-700 rounded-full\"}),n.jsx(\"h3\",{className:\"text-xs font-black uppercase tracking-[0.3em] text-slate-600\",children:\"System Configuration\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 gap-4\",children:[n.jsx(aa,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group\",onClick:r,children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400 group-hover:text-white transition-colors\",children:n.jsx(ry,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"App Settings\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"Preferences & Display\"})]})]}),n.jsx(xn,{className:\"w-5 h-5 text-slate-700 group-hover:text-slate-400 transition-colors\"})]})}),n.jsx(aa,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group\",onClick:c,children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400 group-hover:text-white transition-colors\",children:n.jsx(Gu,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"Alert Center\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"System Notifications\"})]})]}),n.jsx(xn,{className:\"w-5 h-5 text-slate-700 group-hover:text-slate-400 transition-colors\"})]})}),n.jsx(aa,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group opacity-60 hover:opacity-100\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400\",children:n.jsx(oy,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"Support\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"Documentation & Help\"})]})]}),n.jsx(xn,{className:\"w-5 h-5 text-slate-700 transition-colors\"})]})}),n.jsx(aa,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group opacity-60 hover:opacity-100\",onClick:y,children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400\",children:n.jsx(cy,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"About\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"Version 5.0 Stable Release\"})]})]}),n.jsx(xn,{className:\"w-5 h-5 text-slate-700 transition-colors\"})]})})]})]}),n.jsxs(\"div\",{className:\"text-center pt-8 border-t border-white/5\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-[0.5em] text-slate-700 mb-1\",children:\"FinHub Obsidian System\"}),n.jsx(\"p\",{className:\"text-[9px] font-bold text-slate-800\",children:\"BUILD 50.3.0 // QUANTUM CORE\"})]})]})}function iN({className:i,children:r,...c}){return n.jsxs(uy,{\"data-slot\":\"scroll-area\",className:ct(\"relative\",i),...c,children:[n.jsx(dy,{\"data-slot\":\"scroll-area-viewport\",className:\"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1\",children:r}),n.jsx(lN,{}),n.jsx(fy,{})]})}function lN({className:i,orientation:r=\"vertical\",...c}){return n.jsx(my,{\"data-slot\":\"scroll-area-scrollbar\",orientation:r,className:ct(\"flex touch-none p-px transition-colors select-none\",r===\"vertical\"&&\"h-full w-2.5 border-l border-l-transparent\",r===\"horizontal\"&&\"h-2.5 flex-col border-t border-t-transparent\",i),...c,children:n.jsx(hy,{\"data-slot\":\"scroll-area-thumb\",className:\"bg-border relative flex-1 rounded-full\"})})}function rN({isOpen:i,onClose:r,notifications:c,onNotificationClick:u,onMarkAsRead:m,onClearRead:g}){const h=c.filter(B=>!B.read).length,y=c.filter(B=>B.read).length,p=B=>{switch(B){case\"achievement\":return n.jsx(gy,{className:\"w-5 h-5 text-yellow-500\"});case\"goal\":return n.jsx(_s,{className:\"w-5 h-5 text-green-500\"});case\"insight\":return n.jsx(Si,{className:\"w-5 h-5 text-blue-500\"});case\"alert\":return n.jsx(Jr,{className:\"w-5 h-5 text-red-500\"});case\"reminder\":return n.jsx(Eu,{className:\"w-5 h-5 text-indigo-500\"})}},x=B=>{const L=new Date(B),P=new Date().getTime()-L.getTime(),V=Math.floor(P/6e4),S=Math.floor(P/36e5),se=Math.floor(P/864e5);return V<60?`${V}m ago`:S<24?`${S}h ago`:`${se}d ago`},[v,f]=A.useState({reminders:!0,transactions:!0,achievements:!1,insights:!1}),N=B=>{f(L=>({...L,[B]:!L[B]}))},M=[\"reminders\",\"transactions\",\"insights\",\"achievements\"],O=c.reduce((B,L)=>{const R=L.category||\"insights\";return B[R]||(B[R]=[]),B[R].push(L),B},{});return Object.keys(O).forEach(B=>{O[B].sort((L,R)=>L.read!==R.read?L.read?1:-1:new Date(R.timestamp).getTime()-new Date(L.timestamp).getTime())}),n.jsx(Xp,{open:i,onOpenChange:r,children:n.jsxs(Qp,{side:\"right\",className:\"w-full sm:max-w-lg p-0 flex flex-col h-dvh max-h-dvh bg-black border-white/5 text-slate-100 overflow-hidden z-[99999]\",children:[n.jsx(Zp,{className:\"sr-only\",children:\"Notifications\"}),n.jsx(Kp,{className:\"sr-only\",children:\"Protocol Intelligence Pulse\"}),n.jsxs(\"div\",{className:\"px-8 pt-28 pb-10 border-b border-white/5 bg-black relative overflow-hidden animate-in fade-in slide-in-from-right-4 duration-500\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-48 h-48 bg-indigo-500 blur-[120px] opacity-10 -mr-24 -mt-24\"}),n.jsx(\"div\",{className:\"absolute bottom-0 left-0 w-24 h-24 bg-blue-500 blur-[80px] opacity-5 -ml-12 -mb-12\"}),n.jsx(\"div\",{className:\"absolute top-8 right-8 z-30\",children:n.jsx(Ge,{variant:\"ghost\",size:\"icon\",onClick:r,className:\"w-10 h-10 sq-full bg-white/5 text-slate-400 hover:text-white hover:bg-white/10\",children:n.jsx(Tl,{className:\"w-5 h-5\"})})}),n.jsxs(\"div\",{className:\"flex items-center justify-between relative z-10\",children:[n.jsxs(\"div\",{className:\"flex flex-col gap-2\",children:[n.jsx(\"div\",{className:\"flex items-center gap-4\",children:n.jsxs(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tighter leading-none flex items-center gap-4\",children:[\"Pulse\",h>0&&n.jsx(\"span\",{className:\"flex items-center justify-center min-w-[24px] h-6 px-2 text-[10px] font-black bg-indigo-600 text-white sq-full shadow-[0_0_15px_rgba(79,70,229,0.4)]\",children:h})]})}),n.jsx(\"p\",{className:\"text-slate-500 font-black text-[10px] uppercase tracking-[0.3em] leading-none ml-0.5\",children:\"System Intelligence Stack\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[h>0&&n.jsx(Ge,{variant:\"ghost\",size:\"icon\",title:\"Mark all as read\",onClick:()=>{c.forEach(B=>{B.read||m?.(B.id)})},className:\"w-11 h-11 sq-md bg-white/5 text-slate-400 hover:text-indigo-400 hover:bg-white/10 transition-all duration-300 border border-white/5 active:scale-90\",children:n.jsx(py,{className:\"w-5 h-5\"})}),y>0&&n.jsx(Ge,{variant:\"ghost\",size:\"icon\",title:\"Clear history\",onClick:()=>{confirm(`Purge ${y} recorded protocol entries?`)&&g?.()},className:\"w-11 h-11 sq-md bg-white/5 text-slate-400 hover:text-rose-400 hover:bg-rose-500/10 transition-all duration-300 border border-white/5 active:scale-90\",children:n.jsx(Ai,{className:\"w-5 h-5\"})})]})]})]}),n.jsx(iN,{className:\"flex-1 w-full bg-black overflow-hidden custom-scrollbar\",children:n.jsx(\"div\",{className:\"px-6 space-y-12 py-8 pb-32\",children:c.length===0?n.jsxs(\"div\",{className:\"text-center py-32 flex flex-col items-center animate-in fade-in zoom-in duration-700\",children:[n.jsxs(\"div\",{className:\"w-24 h-24 bg-white/5 border border-white/5 sq-2xl flex items-center justify-center text-slate-800 mb-8 shadow-inner relative group\",children:[n.jsx(\"div\",{className:\"absolute inset-0 bg-indigo-500/5 blur-2xl sq-full group-hover:bg-indigo-500/10 transition-colors\"}),n.jsx(Gu,{className:\"w-10 h-10 relative z-10\"})]}),n.jsx(\"h4\",{className:\"text-2xl font-black text-slate-100 mb-3 tracking-tight\",children:\"Signal Silence\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-black uppercase tracking-[0.3em] max-w-[260px] leading-relaxed\",children:\"The protocol pulse is flat. We will alert you upon system breakthroughs.\"})]}):M.map(B=>{const L=O[B]||[];if(L.length===0)return null;const R=v[B],P=R?L.length:1,V=L.filter(S=>!S.read).length;return n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"button\",{onClick:()=>N(B),className:\"w-full flex items-center justify-between px-2 group\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-[0.4em] text-slate-500 group-hover:text-slate-300 transition-colors\",children:B}),V>0&&n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 sq-full animate-pulse shadow-[0_0_10px_rgba(99,102,241,0.6)]\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black text-slate-700\",children:L.length}),R?n.jsx(Vu,{className:\"w-3 h-3 text-slate-700\"}):n.jsx(Kr,{className:\"w-3 h-3 text-slate-700\"})]})]}),n.jsxs(\"div\",{className:\"space-y-3 relative\",children:[!R&&L.length>1&&n.jsxs(n.Fragment,{children:[n.jsx(\"div\",{className:\"absolute top-2 left-2 right-2 h-full bg-black/40 sq-xl -z-10 border border-white/5 translate-y-2 scale-[0.98]\"}),n.jsx(\"div\",{className:\"absolute top-4 left-4 right-4 h-full bg-black/20 sq-xl -z-20 border border-white/5 translate-y-4 scale-[0.96]\"})]}),L.slice(0,P).map((S,se)=>{const he={style:{\"--anim-delay\":`${se*50}ms`,\"--z-index\":100-se}};return n.jsxs(\"div\",{...he,className:`p-6 sq-xl border transition-all duration-500 group relative overflow-hidden cursor-pointer active:scale-[0.98] animate-in fade-in slide-in-from-right-4 fill-mode-both [animation-delay:var(--anim-delay)] z-[var(--z-index)] ${S.read?\"bg-black border-white/5\":\"bg-black border-indigo-500/30 shadow-lg shadow-indigo-500/5 hover:border-indigo-500/50\"}`,onClick:ve=>{ve.stopPropagation(),u?.(S),S.read||m?.(S.id)},children:[S.priority===\"high\"&&!S.read&&n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 bg-red-500 blur-[80px] opacity-10 -mr-16 -mt-16\"}),!S.read&&S.priority!==\"high\"&&n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 bg-indigo-500 blur-[80px] opacity-10 -mr-16 -mt-16 group-hover:opacity-20 transition-opacity\"}),n.jsxs(\"div\",{className:\"flex gap-4 relative z-10\",children:[n.jsx(\"div\",{className:`w-12 h-12 sq-md flex items-center justify-center shrink-0 border border-white/5 transition-all duration-500 ${S.read?\"bg-white/5 text-slate-600\":S.priority===\"high\"?\"bg-red-500/10 text-red-400\":\"bg-indigo-500/10 text-indigo-400 shadow-inner\"}`,children:p(S.type)}),n.jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[n.jsxs(\"div\",{className:\"flex items-start justify-between gap-4\",children:[n.jsx(\"h4\",{className:`text-sm font-black tracking-tight leading-tight ${S.read?\"text-slate-500\":\"text-slate-100\"}`,children:S.title}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-700 whitespace-nowrap pt-1\",children:x(S.timestamp)})]}),n.jsx(\"p\",{className:`text-xs mt-2 leading-relaxed font-bold tracking-tight ${S.read?\"text-slate-700\":\"text-slate-400\"}`,children:S.message}),S.priority===\"high\"&&!S.read&&n.jsxs(\"div\",{className:\"mt-4 flex items-center gap-2\",children:[n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-red-400 sq-full animate-ping\"}),n.jsx(\"span\",{className:\"text-[10px] font-black text-red-400 uppercase tracking-[0.2em]\",children:\"Critical Stability Alert\"})]}),S.action&&S.action.status===\"pending\"&&n.jsxs(\"div\",{className:\"mt-4 flex gap-3 animate-in fade-in slide-in-from-top-1\",children:[n.jsx(Ge,{size:\"sm\",className:\"h-8 text-[10px] font-black uppercase tracking-widest bg-emerald-600 hover:bg-emerald-500 text-white border-0\",onClick:ve=>{ve.stopPropagation(),S.action.status=\"completed\",u?.(S)},children:\"Yes, Automate\"}),n.jsx(Ge,{size:\"sm\",variant:\"ghost\",className:\"h-8 text-[10px] font-black uppercase tracking-widest text-slate-500 hover:text-slate-300 hover:bg-white/5\",onClick:ve=>{ve.stopPropagation(),S.action.status=\"dismissed\",S.read||m?.(S.id)},children:\"No, One-time\"})]})]})]})]},S.id)})]})]},B)})})})]})})}const I0=[{text:\"An investment in knowledge pays the best interest.\",author:\"Benjamin Franklin\",category:\"financial-literacy\"},{text:\"It's not how much money you make, but how much money you keep, how hard it works for you, and how many generations you keep it for.\",author:\"Robert Kiyosaki\",category:\"financial-literacy\"},{text:\"Financial peace isn't the acquisition of stuff. It's learning to live on less than you make, so you can give money back and have money to invest.\",author:\"Dave Ramsey\",category:\"financial-literacy\"},{text:\"Do not save what is left after spending; instead spend what is left after saving.\",author:\"Warren Buffett\",category:\"financial-literacy\"},{text:\"The stock market is a device for transferring money from the impatient to the patient.\",author:\"Warren Buffett\",category:\"financial-literacy\"},{text:\"Know what you own, and know why you own it.\",author:\"Peter Lynch\",category:\"financial-literacy\"},{text:\"The individual investor should act consistently as an investor and not as a speculator.\",author:\"Ben Graham\",category:\"financial-literacy\"},{text:\"Price is what you pay. Value is what you get.\",author:\"Warren Buffett\",category:\"financial-literacy\"},{text:\"The goal isn't more money. The goal is living life on your terms.\",author:\"Chris Brogan\",category:\"financial-freedom\"},{text:\"Financial freedom is available to those who learn about it and work for it.\",author:\"Robert Kiyosaki\",category:\"financial-freedom\"},{text:\"The rich invest in time, the poor invest in money.\",author:\"Warren Buffett\",category:\"financial-freedom\"},{text:\"Wealth is the ability to fully experience life.\",author:\"Henry David Thoreau\",category:\"financial-freedom\"},{text:\"It's not about having lots of money. It's about knowing how to manage the money you do have.\",author:\"Dave Ramsey\",category:\"financial-freedom\"},{text:\"Money is a terrible master but an excellent servant.\",author:\"P.T. Barnum\",category:\"financial-freedom\"},{text:\"The quickest way to double your money is to fold it in half and put it in your back pocket.\",author:\"Will Rogers\",category:\"financial-freedom\"},{text:\"The best time to plant a tree was 20 years ago. The second best time is now.\",author:\"Chinese Proverb\",category:\"motivation\"},{text:\"A journey of a thousand miles begins with a single step.\",author:\"Lao Tzu\",category:\"motivation\"},{text:\"Success is not final, failure is not fatal: it is the courage to continue that counts.\",author:\"Winston Churchill\",category:\"motivation\"},{text:\"The only way to do great work is to love what you do.\",author:\"Steve Jobs\",category:\"motivation\"},{text:\"Don't watch the clock; do what it does. Keep going.\",author:\"Sam Levenson\",category:\"motivation\"},{text:\"Wealth is not about having a lot of money; it's about having a lot of options.\",author:\"Chris Rock\",category:\"motivation\"},{text:\"Every time you borrow money, you're robbing your future self.\",author:\"Nathan W. Morris\",category:\"motivation\"},{text:\"The habit of saving is itself an education; it fosters every virtue, teaches self-denial, cultivates the sense of order, trains to forethought, and so broadens the mind.\",author:\"T.T. Munger\",category:\"motivation\"},{text:\"Too many people spend money they haven't earned, to buy things they don't want, to impress people they don't like.\",author:\"Will Rogers\",category:\"motivation\"},{text:\"A budget is telling your money where to go instead of wondering where it went.\",author:\"Dave Ramsey\",category:\"motivation\"},{text:\"Beware of little expenses. A small leak will sink a great ship.\",author:\"Benjamin Franklin\",category:\"motivation\"},{text:\"Never spend your money before you have earned it.\",author:\"Thomas Jefferson\",category:\"motivation\"}];function V0(){return I0[Math.floor(Math.random()*I0.length)]}function oN({isOpen:i,onClose:r,achievementId:c}){const[u,m]=A.useState(V0());if(A.useEffect(()=>{i&&c&&(m(V0()),ji({particleCount:150,spread:100,origin:{y:.6},colors:[\"#FFD700\",\"#FFA500\",\"#FF6347\",\"#9370DB\",\"#3CB371\"]}))},[i,c]),!c)return null;const g=gp(c);return g?n.jsx(Bs,{open:i,onOpenChange:r,children:n.jsxs(Ls,{className:\"w-[270px] sm:w-full sm:max-w-md bg-slate-950 border-[#38383A] p-0 overflow-hidden rounded-[32px] shadow-2xl transition-all duration-500\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 sm:w-64 sm:h-64 bg-yellow-500 blur-[60px] sm:blur-[120px] opacity-10 -mr-16 -mt-16 sm:-mr-32 sm:-mt-32\"}),n.jsx(\"div\",{className:\"absolute bottom-0 left-0 w-24 h-24 sm:w-48 sm:h-48 bg-indigo-500 blur-[50px] sm:blur-[100px] opacity-5 -ml-12 -mb-12 sm:-ml-24 sm:-mb-24\"}),n.jsxs(qs,{className:\"px-6 sm:px-10 pt-8 sm:pt-12 pb-0 relative z-10\",children:[n.jsx(Is,{className:\"text-center text-xl sm:text-3xl font-black text-white tracking-tight transition-all\",children:\"Achievement Unlocked\"}),n.jsx(Vs,{className:\"text-center text-[8px] sm:text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] sm:tracking-[0.3em] mt-1 sm:mt-2 transition-all\",children:\"Protocol Milestone Verified\"})]}),n.jsxs(\"div\",{className:\"space-y-6 sm:space-y-10 py-8 sm:py-12 px-6 sm:px-10 relative z-10\",children:[n.jsxs(\"div\",{className:\"relative flex justify-center\",children:[n.jsx(Oe.div,{className:\"relative z-10\",initial:{scale:0,rotateY:0},animate:{scale:1,rotateY:[0,1080],transition:{scale:{duration:.8,ease:\"backOut\"},rotateY:{duration:4,ease:\"easeInOut\"}}},children:n.jsxs(\"div\",{className:\"relative\",children:[n.jsx(Oe.div,{className:\"absolute inset-0 bg-yellow-400 blur-3xl opacity-20 rounded-full\",animate:{scale:[1,1.3,1],opacity:[.2,.4,.2]},transition:{duration:3,repeat:1/0,ease:\"easeInOut\"}}),n.jsxs(\"div\",{className:\"relative w-32 h-32 sm:w-44 sm:h-44 bg-gradient-to-br from-yellow-400 via-orange-500 to-yellow-600 rounded-[32px] sm:rounded-[48px] flex items-center justify-center shadow-[0_15px_40px_rgba(234,179,8,0.25)] border-4 border-white/20 transition-all\",children:[n.jsx(\"span\",{className:\"text-5xl sm:text-7xl drop-shadow-2xl transition-all\",children:g.icon}),n.jsx(\"div\",{className:\"absolute inset-0 bg-gradient-to-tr from-white/10 to-transparent pointer-events-none rounded-[28px] sm:rounded-[44px]\"})]})]})}),n.jsxs(\"div\",{className:\"absolute inset-0 z-20 flex justify-center items-center pointer-events-none\",children:[n.jsx(Oe.div,{className:\"absolute w-32 h-32 sm:w-48 sm:h-48 bg-yellow-500/40 blur-[40px] sm:blur-[60px] rounded-full\",initial:{scale:0,opacity:0},animate:{scale:1.4,opacity:1},transition:{delay:.3,duration:1.2,ease:\"easeOut\"}}),n.jsx(Oe.div,{className:\"absolute w-24 h-24 sm:w-36 sm:h-36 bg-indigo-500/30 blur-[30px] sm:blur-[45px] rounded-full -ml-8 -mt-6 sm:-ml-12 sm:-mt-10\",initial:{scale:0,opacity:0},animate:{scale:1.8,opacity:.8},transition:{delay:.4,duration:1.2,ease:\"easeOut\"}}),n.jsx(Oe.div,{className:\"absolute w-20 h-20 sm:w-32 sm:h-32 bg-rose-500/30 blur-[25px] sm:blur-[40px] rounded-full ml-10 mt-8 sm:ml-16 sm:mt-12\",initial:{scale:0,opacity:0},animate:{scale:1.6,opacity:.8},transition:{delay:.5,duration:1.2,ease:\"easeOut\"}})]})]}),n.jsxs(Oe.div,{className:\"text-center space-y-2 sm:space-y-4\",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:.6},children:[n.jsx(\"h3\",{className:\"text-lg sm:text-3xl font-black bg-gradient-to-r from-yellow-200 via-yellow-500 to-yellow-200 bg-clip-text text-transparent tracking-tight transition-all\",children:g.name}),n.jsx(\"p\",{className:\"text-slate-400 font-bold text-[11px] sm:text-sm leading-relaxed max-w-[200px] sm:max-w-[280px] mx-auto transition-all\",children:g.description})]}),n.jsx(Oe.div,{className:\"flex justify-center\",initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},children:n.jsxs(\"div\",{className:\"flex items-center gap-3 sm:gap-4\",children:[n.jsx(\"div\",{className:\"h-px w-12 sm:w-20 bg-gradient-to-r from-transparent via-white/10 to-transparent\"}),n.jsx(\"div\",{className:\"w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full bg-yellow-500/50 blur-[1px] animate-pulse\"}),n.jsx(\"div\",{className:\"h-px w-12 sm:w-20 bg-gradient-to-r from-transparent via-white/10 to-transparent\"})]})}),n.jsxs(Oe.div,{className:\"p-4 sm:p-8 bg-white/5 rounded-2xl sm:rounded-[32px] border border-white/5 relative overflow-hidden transition-all\",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:1},children:[n.jsx(\"div\",{className:\"absolute top-0 left-0 w-12 h-12 bg-indigo-500 blur-2xl opacity-5\"}),n.jsxs(\"div\",{className:\"flex items-start gap-3 sm:gap-6 relative z-10 text-left\",children:[n.jsx(\"span\",{className:\"text-xl sm:text-3xl pt-0 opacity-40\",children:'\"'}),n.jsxs(\"div\",{className:\"flex-1\",children:[n.jsx(\"p\",{className:\"text-[10px] sm:text-sm font-bold italic text-slate-300 leading-snug sm:leading-relaxed tracking-tight transition-all\",children:u.text}),n.jsxs(\"div\",{className:\"flex items-center gap-2 sm:gap-4 mt-3 sm:mt-6 transition-all\",children:[n.jsx(\"div\",{className:\"h-px flex-1 bg-white/5\"}),n.jsxs(\"p\",{className:\"text-[8px] sm:text-[10px] font-black text-slate-500 uppercase tracking-widest shrink-0\",children:[\"— \",u.author]})]})]})]})]})]})]})}):null}const cN=({accounts:i,goals:r,liabilities:c,expenses:u,emergencyFundAmount:m=0})=>{const g=A.useMemo(()=>i.filter(f=>f.type===\"bank\"||f.type===\"cash\").reduce((f,N)=>f+N.balance,0),[i]),h=A.useMemo(()=>i.filter(f=>f.type===\"credit_card\").reduce((f,N)=>f+Math.abs(N.balance),0),[i]),y=A.useMemo(()=>{const f=c.reduce((M,O)=>M+(O.emiAmount||0),0),N=u.filter(M=>M.isRecurring).reduce((M,O)=>M+O.amount,0);return f+N},[c,u]),p=A.useMemo(()=>r.reduce((N,M)=>N+M.currentAmount,0)+(m||0),[r,m]),x=A.useMemo(()=>p+y,[p,y]),v=A.useMemo(()=>{const f=g-x;return Math.max(0,f)},[g,x]);return{totalBankBalance:g,totalCreditUsage:h,totalCommitments:y,shadowWalletTotal:p,totalReserved:x,availableToSpend:v}},bl=({children:i,icon:r,variant:c=\"blue\",glow:u=!0,className:m,...g})=>{const h={blue:\"border-blue-500/50 text-blue-400 hover:border-blue-500 hover:shadow-[0_0_20px_rgba(59,130,246,0.4)] shadow-[0_0_10px_rgba(59,130,246,0.2)]\",green:\"border-emerald-500/50 text-emerald-400 hover:border-emerald-500 hover:shadow-[0_0_20px_rgba(16,185,129,0.4)] shadow-[0_0_10px_rgba(16,185,129,0.2)]\",purple:\"border-purple-500/50 text-purple-400 hover:border-purple-500 hover:shadow-[0_0_20px_rgba(168,85,247,0.4)] shadow-[0_0_10px_rgba(168,85,247,0.2)]\",rose:\"border-rose-500/50 text-rose-400 hover:border-rose-500 hover:shadow-[0_0_20px_rgba(244,63,94,0.4)] shadow-[0_0_10px_rgba(244,63,94,0.2)]\"};return n.jsxs(\"button\",{className:ct(\"relative group flex items-center justify-center gap-2 px-6 h-11\",\"bg-[#0A141E]/80 backdrop-blur-md border-2 rounded-2xl transition-all duration-300\",\"font-mono font-bold uppercase tracking-widest text-[10px]\",\"hover:scale-[1.02] active:scale-[0.98]\",h[c],m),...g,children:[r&&n.jsx(r,{className:\"w-4 h-4 transition-all duration-700 ease-quantum group-hover:rotate-[720deg] active:-rotate-12\"}),n.jsx(\"span\",{children:i})]})};function uN({isOpen:i,onClose:r,accounts:c,goals:u,currency:m,destinationType:g,emergencyFund:h,onAllocate:y,liabilities:p=[],expenses:x=[]}){const[v,f]=A.useState(\"\"),[N,M]=A.useState(\"\"),[O,B]=A.useState(\"\"),[L,R]=A.useState(!1),[P,V]=A.useState(!1),{availableToSpend:S,totalBankBalance:se,shadowWalletTotal:he,totalCommitments:ve}=cN({accounts:c,goals:u,liabilities:p,expenses:x,emergencyFundAmount:h?.currentAmount||0});A.useEffect(()=>{if(i&&!v&&c.length>0){const C=c.filter(Y=>Y.type===\"bank\"||Y.type===\"cash\");if(C.length>0){const Y=C.find(oe=>oe.balance>=S)||[...C].sort((oe,ge)=>ge.balance-oe.balance)[0];f(Y.id)}}},[i,S,c,v]);const fe=c.find(C=>C.id===v),ye=u.find(C=>C.id===N),Se=parseFloat(O)||0,qe=()=>{if(S>0){if(B(S.toString()),g===\"goal\"&&!N&&u.length>0){const C=[...u].sort((Y,oe)=>{const ge=new Date(Y.targetDate).getTime(),z=new Date(oe.targetDate).getTime();if(ge!==z)return ge-z;const T=Y.currentAmount/Y.targetAmount,re=oe.currentAmount/oe.targetAmount;return T-re});M(C[0].id),J.info(`Suggested: ${C[0].name} based on timeline & progress`,{icon:n.jsx(bn,{className:\"w-4 h-4 text-blue-400\"})})}}else J.error(\"No surplus liquidity available for auto-fill\")},Te=()=>{if(!v){J.error(\"Please select an account\");return}if(g===\"goal\"&&!N){J.error(\"Please select a goal\");return}if(!O||Se<=0){J.error(\"Please enter a valid amount\");return}if(fe&&Se>fe.balance){J.error(\"Insufficient balance in selected account\");return}R(!0)},ee=()=>{y({accountId:v,destinationId:g===\"goal\"?N:\"emergency-fund\",amount:Se,destinationType:g}),f(\"\"),M(\"\"),B(\"\"),R(!1),r()},me=()=>{R(!1)},G=()=>{f(\"\"),M(\"\"),B(\"\"),R(!1),V(!1),r()};return n.jsx(Bs,{open:i,onOpenChange:G,children:n.jsx(Ls,{className:\"max-w-md bg-black border-white/5 text-white p-0 custom-scrollbar sq-2xl overflow-hidden\",children:n.jsxs(\"div\",{className:\"max-h-[85vh] overflow-y-auto p-8 custom-scrollbar\",children:[n.jsxs(qs,{className:\"mb-6\",children:[n.jsx(Is,{className:\"text-xl font-black tracking-tight text-white mb-1\",children:g===\"goal\"?\"🎯 ALLOCATE TO GOAL\":\"🛡️ ALLOCATE TO RESERVE\"}),n.jsxs(Vs,{className:\"text-slate-500 text-[10px] uppercase font-black tracking-widest\",children:[\"Protocol: Move liquidity from account to \",g===\"goal\"?\"savings milestone\":\"emergency reserve\"]})]}),L?n.jsxs(\"div\",{className:\"space-y-6 py-4\",children:[n.jsx(\"div\",{className:\"text-center pt-2\",children:n.jsx(\"p\",{className:\"text-[10px] text-emerald-500 uppercase font-black tracking-[0.2em] animate-pulse\",children:\"Capital Allocation Protocol Ready\"})}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"div\",{className:\"p-5 bg-white/5 sq-md border border-white/10 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 p-2 opacity-5\",children:n.jsx(Hu,{className:\"w-8 h-8\"})}),n.jsx(\"p\",{className:\"text-[8px] text-slate-500 uppercase font-black tracking-widest mb-3 opacity-60\",children:\"Debit Source\"}),n.jsx(\"p\",{className:\"font-black text-sm text-white tracking-tight\",children:fe?.name}),n.jsxs(\"div\",{className:\"mt-4 space-y-2.5\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-medium\",children:[n.jsx(\"span\",{className:\"text-slate-400 uppercase tracking-tighter\",children:\"Current Liquidity\"}),n.jsx(\"span\",{className:\"font-mono text-white\",children:$e(fe?.balance||0,m)})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-bold text-rose-500\",children:[n.jsx(\"span\",{className:\"uppercase tracking-tighter\",children:\"Debit Volume\"}),n.jsxs(\"span\",{className:\"font-mono\",children:[\"-\",$e(Se,m)]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"flex justify-between text-xs font-black\",children:[n.jsx(\"span\",{className:\"text-slate-500 uppercase tracking-widest\",children:\"Post-Debit Projection\"}),n.jsx(\"span\",{className:\"text-blue-400 font-mono\",children:$e((fe?.balance||0)-Se,m)})]})]})]}),n.jsx(\"div\",{className:\"flex justify-center -my-2 relative z-10\",children:n.jsx(\"div\",{className:\"w-10 h-10 bg-blue-600 sq-md flex items-center justify-center shadow-[0_0_20px_rgba(37,99,235,0.3)] border border-blue-400/20\",children:n.jsx(ap,{className:\"w-5 h-5 text-white\"})})}),n.jsxs(\"div\",{className:`p-5 sq-md border relative overflow-hidden ${g===\"goal\"?\"bg-emerald-500/5 border-emerald-500/20\":\"bg-blue-500/5 border-blue-500/20\"}`,children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 p-2 opacity-10\",children:g===\"goal\"?n.jsx(bn,{className:\"w-8 h-8 text-emerald-500\"}):n.jsx(_s,{className:\"w-8 h-8 text-blue-500\"})}),n.jsx(\"p\",{className:\"text-[8px] text-slate-500 uppercase font-black tracking-widest mb-3 opacity-60\",children:\"Credit Destination\"}),n.jsxs(\"div\",{className:\"flex items-center gap-2 mb-4\",children:[n.jsx(\"span\",{className:\"text-xl\",children:g===\"goal\"?ye?.emoji:\"🛡️\"}),n.jsx(\"p\",{className:\"font-black text-sm text-white tracking-tight\",children:g===\"goal\"?ye?.name:\"Emergency Reserve\"})]}),n.jsxs(\"div\",{className:\"space-y-2.5\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-medium\",children:[n.jsx(\"span\",{className:\"text-slate-400 uppercase tracking-tighter\",children:\"Current Level\"}),n.jsx(\"span\",{className:\"font-mono text-white\",children:$e((g===\"goal\"?ye?.currentAmount:h?.currentAmount)||0,m)})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-bold text-emerald-400\",children:[n.jsx(\"span\",{className:\"uppercase tracking-tighter\",children:\"Credit Volume\"}),n.jsxs(\"span\",{className:\"font-mono\",children:[\"+\",$e(Se,m)]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"flex justify-between text-xs font-black\",children:[n.jsx(\"span\",{className:\"text-slate-500 uppercase tracking-widest\",children:\"Post-Credit Value\"}),n.jsx(\"span\",{className:\"text-emerald-400 font-mono\",children:$e(((g===\"goal\"?ye?.currentAmount:h?.currentAmount)||0)+Se,m)})]})]})]})]}),n.jsx(\"div\",{className:\"p-4 bg-amber-500/5 border border-amber-500/20 sq-md\",children:n.jsxs(\"div\",{className:\"flex gap-3\",children:[n.jsx(zu,{className:\"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5\"}),n.jsxs(\"div\",{className:\"text-[10px]\",children:[n.jsx(\"p\",{className:\"font-black text-amber-400 uppercase tracking-widest mb-1\",children:\"Node Equilibrium Warning\"}),n.jsxs(\"p\",{className:\"text-amber-500/70 font-bold leading-relaxed\",children:[\"Net Liquidity and \",fe?.name,\" reserves will be reduced by \",$e(Se,m),\" immediately. This action is final.\"]})]})]})}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(bl,{onClick:me,className:\"flex-1 h-12 text-slate-500 hover:text-white border-white/5 font-black tracking-[0.2em]\",children:\"Re-Configure\"}),n.jsx(bl,{onClick:ee,className:\"flex-1 h-12 bg-emerald-600/20 text-emerald-400 border-emerald-500/30 font-black tracking-[0.2em] shadow-lg shadow-emerald-500/10\",children:\"Execute Move\"})]})]}):n.jsxs(\"div\",{className:\"space-y-6\",children:[S>0&&n.jsxs(\"div\",{className:\"relative group overflow-hidden sq-xl border border-emerald-500/20 bg-emerald-500/5 p-5 transition-all hover:bg-emerald-500/10 mb-2\",children:[n.jsx(Fp,{variant:\"savings\"}),n.jsxs(\"div\",{className:\"relative z-10 flex flex-col gap-4\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-10 h-10 bg-emerald-500/20 sq-md flex items-center justify-center border border-emerald-500/30\",children:n.jsx(bn,{className:\"w-5 h-5 text-emerald-400\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-[9px] text-emerald-500/70 font-black uppercase tracking-widest\",children:\"Surplus Detected\"}),n.jsx(\"h4\",{className:\"text-xl font-black text-white tabular-nums\",children:$e(S,m)})]})]}),n.jsx(\"button\",{onClick:()=>V(!P),className:\"p-2 hover:bg-white/5 rounded-full transition-colors text-slate-500 hover:text-white\",title:\"Show Calculation\",children:P?n.jsx(Vu,{className:\"w-4 h-4\"}):n.jsx(xy,{className:\"w-4 h-4\"})})]}),P&&n.jsxs(\"div\",{className:\"py-3 border-t border-emerald-500/10 space-y-2 animate-in fade-in slide-in-from-top-2 duration-300\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-emerald-500/60 font-medium\",children:[n.jsx(\"span\",{children:\"Total Liquidity\"}),n.jsx(\"span\",{children:$e(se,m)})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-rose-500/60 font-medium\",children:[n.jsx(\"span\",{children:\"Shadow Wallet (Goals + EF)\"}),n.jsxs(\"span\",{children:[\"-\",$e(he,m)]})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-rose-500/60 font-medium pb-2 border-b border-emerald-500/10\",children:[n.jsx(\"span\",{children:\"Total Commitments (Bills)\"}),n.jsxs(\"span\",{children:[\"-\",$e(ve,m)]})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-emerald-400 font-bold uppercase pt-1\",children:[n.jsx(\"span\",{children:\"Available Safety Margin\"}),n.jsx(\"span\",{children:$e(S,m)})]})]}),n.jsx(bl,{onClick:()=>{qe(),S>fe?.balance&&J.warning(\"Surplus exceeds selected account balance. Source adjusted.\")},className:\"w-full h-11 bg-emerald-500/20 text-emerald-400 border-emerald-500/30 font-black tracking-widest\",children:\"Allocate All Surplus\"})]})]}),n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(Re,{htmlFor:\"allocate-from-account\",className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 mb-2 block\",children:\"Source Node\"}),n.jsxs(ha,{value:v,onValueChange:f,children:[n.jsx(ga,{id:\"allocate-from-account\",name:\"fromAccountId\",className:\"bg-black border-white/5 sq-md h-14 text-white focus:ring-1 focus:ring-blue-500/50\",children:n.jsx(pa,{placeholder:\"Select Capital Source\"})}),n.jsx(xa,{className:\"bg-black border-white/10 text-white sq-xl\",children:c.map(C=>n.jsx(vt,{value:C.id,className:\"hover:bg-white/5\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between w-full\",children:[n.jsxs(\"span\",{children:[C.icon,\" \",C.name]}),n.jsx(\"span\",{className:\"text-[10px] text-slate-500 ml-4 font-mono\",children:$e(C.balance,m)})]})},C.id))})]}),fe&&n.jsxs(\"p\",{className:\"text-[10px] text-slate-500 mt-2 italic px-1\",children:[\"Available Liquidity: \",$e(fe.balance,m)]})]}),g===\"goal\"?n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(Re,{htmlFor:\"allocate-to-goal\",className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 mb-2 block\",children:\"Target Milestone\"}),n.jsxs(ha,{value:N,onValueChange:M,children:[n.jsx(ga,{id:\"allocate-to-goal\",name:\"toGoalId\",className:\"bg-black border-white/5 sq-md h-14 text-white focus:ring-1 focus:ring-emerald-500/50\",children:n.jsx(pa,{placeholder:\"Choose Destination Goal\"})}),n.jsx(xa,{className:\"bg-black border-white/10 text-white sq-xl\",children:u.map(C=>{const Y=C.currentAmount/C.targetAmount*100;return n.jsx(vt,{value:C.id,className:\"hover:bg-white/5\",children:n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(\"span\",{className:\"text-lg\",children:C.emoji}),n.jsxs(\"div\",{className:\"min-w-0\",children:[n.jsx(\"div\",{className:\"font-bold text-xs uppercase tracking-tight\",children:C.name}),n.jsxs(\"div\",{className:\"text-[9px] text-slate-500 font-mono\",children:[Math.round(Y),\"% SYNCHRONIZED • \",$e(C.currentAmount,m)]})]})]})},C.id)})})]})]}):n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(Re,{className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 mb-2 block\",children:\"Stability Reserve\"}),n.jsx(\"div\",{className:\"p-4 bg-white/5 border border-white/10 sq-md\",children:n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-10 h-10 bg-blue-500/10 sq-md flex items-center justify-center border border-blue-500/20\",children:\"🛡️\"}),n.jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[n.jsx(\"p\",{className:\"font-black text-xs uppercase tracking-widest text-white\",children:\"Emergency Fund\"}),h&&n.jsxs(\"p\",{className:\"text-[9px] text-slate-500 font-mono mt-1\",children:[$e(h.currentAmount,m),\" / \",$e(h.targetAmount,m)]})]})]})})]}),n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(\"div\",{className:\"flex justify-between items-center mb-1\",children:n.jsx(Re,{htmlFor:\"allocate-amount\",className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 block\",children:\"Contribution Volume\"})}),n.jsxs(\"div\",{className:\"relative\",children:[n.jsx(\"span\",{className:\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500\",children:m===\"INR\"?\"₹\":\"$\"}),n.jsx(Pt,{id:\"allocate-amount\",name:\"amount\",type:\"number\",placeholder:\"0\",value:O,onChange:C=>B(C.target.value),className:\"pl-8 bg-black border-white/5 h-12\",min:\"0\",step:\"0.01\"})]}),fe&&Se>fe.balance&&n.jsxs(\"div\",{className:\"flex items-center gap-2 text-sm text-red-600\",children:[n.jsx(zu,{className:\"w-4 h-4\"}),n.jsx(\"span\",{children:\"Amount exceeds available balance\"})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(bl,{onClick:G,className:\"flex-1 h-12 text-slate-500 hover:text-white border-white/5 font-black tracking-[0.2em]\",children:\"Abort\"}),n.jsx(bl,{onClick:Te,className:\"flex-1 h-12 bg-blue-600/20 text-blue-400 border-blue-500/30 font-black tracking-[0.2em] shadow-lg shadow-blue-500/10\",children:\"Preview Mode\"})]})]})]})})})}const dN=[{name:\"HDFC Bank\",icon:\"🏦\",color:\"#1d4ed8\",type:\"bank\"},{name:\"ICICI Bank\",icon:\"🏦\",color:\"#ea580c\",type:\"bank\"},{name:\"State Bank of India\",icon:\"🏦\",color:\"#2563eb\",type:\"bank\"},{name:\"Axis Bank\",icon:\"🏦\",color:\"#9d174d\",type:\"bank\"},{name:\"Kotak Mahindra Bank\",icon:\"🏦\",color:\"#dc2626\",type:\"bank\"},{name:\"Bank of America\",icon:\"🏦\",color:\"#0033aa\",type:\"bank\"},{name:\"Chase Bank\",icon:\"🏦\",color:\"#117aca\",type:\"bank\"},{name:\"Wells Fargo\",icon:\"🏦\",color:\"#d71e28\",type:\"bank\"},{name:\"HSBC\",icon:\"🏦\",color:\"#db0011\",type:\"bank\"},{name:\"Barclays\",icon:\"🏦\",color:\"#00aeef\",type:\"bank\"},{name:\"Standard Chartered\",icon:\"🏦\",color:\"#00945e\",type:\"bank\"},{name:\"Citibank\",icon:\"🏦\",color:\"#003b70\",type:\"bank\"},{name:\"DBS Bank\",icon:\"🏦\",color:\"#ff0000\",type:\"bank\"},{name:\"Federal Bank\",icon:\"🏦\",color:\"#0b5a91\",type:\"bank\"},{name:\"American Express\",icon:\"💳\",color:\"#006fcf\",type:\"credit_card\"},{name:\"Discover\",icon:\"💳\",color:\"#ff6600\",type:\"credit_card\"},{name:\"Capital One\",icon:\"💳\",color:\"#d22e2e\",type:\"credit_card\"},{name:\"Goldman Sachs\",icon:\"🏦\",color:\"#725a34\",type:\"bank\"},{name:\"Morgan Stanley\",icon:\"🏦\",color:\"#000033\",type:\"bank\"},{name:\"Apple Card\",icon:\"💳\",color:\"#000000\",type:\"credit_card\"},{name:\"PayPal\",icon:\"💳\",color:\"#003087\",type:\"credit_card\"},{name:\"Revolut\",icon:\"💳\",color:\"#000000\",type:\"credit_card\"},{name:\"Monzo\",icon:\"💳\",color:\"#ff4d4f\",type:\"credit_card\"}];function fN({accounts:i,currency:r,onCreateAccount:c,onUpdateAccount:u,onDeleteAccount:m}){const[g,h]=A.useState(!1),[y,p]=A.useState(null),[x,v]=A.useState({name:\"\",type:\"bank\",balance:0,color:gu[0],icon:xu[0].value,creditLimit:0,safeLimitPercentage:30,serviceChargePercentage:0,statementDate:1}),[f,N]=A.useState([]),M=S=>{S?(p(S),v({name:S.name,type:S.type,balance:S.balance,color:S.color,icon:S.icon,creditLimit:S.creditLimit||0,safeLimitPercentage:S.safeLimitPercentage||30,serviceChargePercentage:S.serviceChargePercentage||0,statementDate:S.statementDate||1})):(p(null),v({name:\"\",type:\"bank\",balance:0,color:gu[0],icon:xu[0].value,creditLimit:0,safeLimitPercentage:30,serviceChargePercentage:0,statementDate:1})),N([]),h(!0)},O=S=>{if(v({...x,name:S}),S.length>1){const se=dN.filter(he=>he.name.toLowerCase().includes(S.toLowerCase())).slice(0,4);N(se)}else N([])},B=S=>{v({...x,name:S.name,type:S.type,icon:S.icon,color:S.color}),N([])},L=async S=>{if(S.preventDefault(),!x.name.trim()){J.error(\"Please enter an account name\");return}try{y?await u(y.id,x):await c(x),h(!1)}catch(se){console.error(\"Error saving account:\",se)}},R=async S=>{if(confirm(\"Are you sure you want to delete this account? This action cannot be undone.\"))try{await m(S)}catch(se){console.error(\"Error deleting account:\",se)}};return n.jsxs(\"div\",{className:\"space-y-12 animate-in fade-in slide-in-from-bottom-4 duration-700 px-4 pb-24\",children:[n.jsxs(\"div\",{className:\"flex items-end justify-between gap-6\",children:[n.jsxs(\"div\",{className:\"min-w-0\",children:[n.jsx(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tight leading-none mb-3 truncate\",children:\"Accounts & Cards\"}),n.jsxs(\"div\",{className:\"flex flex-wrap gap-2 mb-3\",children:[n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-emerald-500 bg-emerald-500/10 px-2 py-0.5 rounded-lg border border-emerald-500/20 whitespace-nowrap\",children:[i.filter(S=>S.type===\"bank\").length,\" Banks\"]}),n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-rose-500 bg-rose-500/10 px-2 py-0.5 rounded-lg border border-rose-500/20 whitespace-nowrap\",children:[i.filter(S=>S.type===\"credit_card\").length,\" Credit\"]}),n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-amber-500 bg-amber-500/10 px-2 py-0.5 rounded-lg border border-amber-500/20 whitespace-nowrap\",children:[i.filter(S=>S.type===\"cash\").length,\" Cash\"]}),n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-blue-500 bg-blue-500/10 px-2 py-0.5 rounded-lg border border-blue-500/20 whitespace-nowrap\",children:[i.filter(S=>S.type===\"investment\").length,\" Holding\"]})]}),n.jsx(\"p\",{className:\"text-slate-500 font-bold max-w-md text-[10px] truncate\",children:\"Monitor liquidity across core reservoirs and credit pools.\"})]}),n.jsxs(Ge,{onClick:()=>M(),className:\"bg-emerald-600 hover:bg-emerald-500 text-white rounded-xl px-6 h-12 font-bold shadow-lg shadow-emerald-600/20 transition-all active:scale-95 shrink-0\",children:[n.jsx(Nl,{className:\"w-4 h-4 sm:mr-2\"}),n.jsx(\"span\",{className:\"hidden sm:inline\",children:\"Add Account\"}),n.jsx(\"span\",{className:\"sm:hidden\",children:\"Add\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(by,{className:\"w-3.5 h-3.5\"}),\"Bank Accounts\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(S=>S.type===\"bank\").map(S=>n.jsx(P,{account:S},S.id)),i.filter(S=>S.type===\"bank\").length===0&&n.jsx(V,{message:\"No bank accounts detected.\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(yy,{className:\"w-3.5 h-3.5\"}),\"Credit Pools (Cards)\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(S=>S.type===\"credit_card\").map(S=>n.jsx(P,{account:S},S.id)),i.filter(S=>S.type===\"credit_card\").length===0&&n.jsx(V,{message:\"No credit pools detected.\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(Hu,{className:\"w-3.5 h-3.5\"}),\"Cash in Hand\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(S=>S.type===\"cash\").map(S=>n.jsx(P,{account:S},S.id)),i.filter(S=>S.type===\"cash\").length===0&&n.jsx(V,{message:\"No physical liquid reservoirs detected.\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(Si,{className:\"w-3.5 h-3.5\"}),\"Investment Holding Nodes\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(S=>S.type===\"investment\").map(S=>n.jsx(P,{account:S},S.id)),i.filter(S=>S.type===\"investment\").length===0&&n.jsx(\"div\",{className:\"md:col-span-2 lg:col-span-3 p-8 border border-dashed border-white/5 squircle-22 flex items-center justify-center text-slate-600 font-bold text-xs\",children:\"No investment nodes detected. Link them to track growth separately.\"})]})]}),n.jsx(Bs,{open:g,onOpenChange:h,children:n.jsxs(Ls,{className:\"max-w-md max-h-[90vh] overflow-y-auto bg-slate-950 border-white/10 text-white squircle-22 p-8 custom-scrollbar\",children:[n.jsxs(qs,{children:[n.jsx(Is,{className:\"text-3xl font-black tracking-tight text-white mb-2\",children:y?\"Refine Account\":\"New Liquidity Reservoir\"}),n.jsx(Vs,{className:\"text-slate-500 font-bold mb-6\",children:\"Establish a new liquidity pool in the Obsidian system.\"})]}),n.jsxs(\"form\",{onSubmit:L,className:\"space-y-8\",children:[n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"name\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Account Identity\"}),n.jsx(Pt,{id:\"name\",name:\"name\",value:x.name,onChange:S=>O(S.target.value),placeholder:\"e.g. Mercury Checking\",required:!0,className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white focus:ring-emerald-500/50\",autoComplete:\"off\"}),f.length>0&&n.jsxs(\"div\",{className:\"mt-3 p-4 bg-indigo-500/5 border border-indigo-500/10 squircle-12 flex items-start gap-4 animate-in fade-in zoom-in-95 duration-300\",children:[n.jsx(bn,{className:\"w-4 h-4 text-indigo-400 mt-1 flex-shrink-0\"}),n.jsxs(\"div\",{className:\"flex-1\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-widest text-indigo-300 mb-3 opacity-60\",children:\"Intelligence Suggested\"}),n.jsx(\"div\",{className:\"grid grid-cols-1 gap-2\",children:f.map(S=>n.jsxs(\"button\",{type:\"button\",onClick:()=>B(S),className:\"flex items-center gap-3 p-2.5 squircle-12 bg-white/5 hover:bg-white/10 transition-all group border border-white/5\",children:[n.jsx(\"span\",{className:\"text-lg group-hover:scale-110 transition-transform\",children:S.icon}),n.jsx(\"span\",{className:\"text-xs font-bold text-slate-300 group-hover:text-white transition-colors\",children:S.name})]},S.name))})]})]})]}),n.jsxs(\"div\",{className:\"grid grid-cols-3 gap-4\",children:[n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${x.type===\"bank\"?\"border-emerald-500 bg-emerald-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>v({...x,type:\"bank\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-emerald-500/20 flex items-center justify-center text-xl mb-2\",children:\"🏦\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Bank Reservoir\"})]}),n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${x.type===\"credit_card\"?\"border-rose-500 bg-rose-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>v({...x,type:\"credit_card\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-rose-500/20 flex items-center justify-center text-xl mb-2\",children:\"💳\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Credit Pool\"})]}),n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${x.type===\"cash\"?\"border-amber-500 bg-amber-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>v({...x,type:\"cash\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-amber-500/20 flex items-center justify-center text-xl mb-2\",children:\"💵\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Cash in Hand\"})]}),n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${x.type===\"investment\"?\"border-blue-500 bg-blue-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>v({...x,type:\"investment\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-blue-500/20 flex items-center justify-center text-xl mb-2\",children:\"📈\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Growth Node\"})]})]}),n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"balance\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:x.type===\"bank\"||x.type===\"cash\"||x.type===\"investment\"?\"Initial Liquidity\":\"Current Spent Balance\"}),n.jsx(Os,{id:\"balance\",name:\"balance\",value:x.balance,onChange:S=>v({...x,balance:parseFloat(S)||0}),placeholder:\"0.00\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]}),x.type===\"credit_card\"&&n.jsxs(\"div\",{className:\"space-y-6 animate-in slide-in-from-top-4 duration-500\",children:[n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"creditLimit\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Total Credit Limit\"}),n.jsx(Os,{id:\"creditLimit\",name:\"creditLimit\",value:x.creditLimit,onChange:S=>v({...x,creditLimit:parseFloat(S)||0}),placeholder:\"e.g. 100000\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]}),n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"safeLimit\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Safe Use Threshold (%)\"}),n.jsx(Os,{id:\"safeLimit\",name:\"safeLimitPercentage\",value:x.safeLimitPercentage,onChange:S=>v({...x,safeLimitPercentage:parseFloat(S)||30}),placeholder:\"30\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]})]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"serviceCharge\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Svc Charge (%)\"}),n.jsx(Os,{id:\"serviceCharge\",name:\"serviceChargePercentage\",value:x.serviceChargePercentage,onChange:S=>v({...x,serviceChargePercentage:parseFloat(S)||0}),placeholder:\"0.0\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]}),n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"statementDate\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Statement Date\"}),n.jsxs(ha,{value:x.statementDate.toString(),onValueChange:S=>v({...x,statementDate:parseInt(S)}),children:[n.jsx(ga,{id:\"statementDate\",name:\"statementDate\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",children:n.jsx(pa,{})}),n.jsx(xa,{className:\"bg-slate-900 border-white/10 text-white\",children:[...Array(31)].map((S,se)=>n.jsx(vt,{value:(se+1).toString(),children:se+1},se+1))})]})]})]})]}),n.jsxs(\"div\",{children:[n.jsx(Re,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"System Icon\"}),n.jsx(\"div\",{className:\"grid grid-cols-6 sm:grid-cols-9 gap-2\",children:xu.map(S=>n.jsx(\"button\",{type:\"button\",onClick:()=>v({...x,icon:S.value}),className:`w-10 h-10 squircle-12 flex items-center justify-center text-lg border-2 transition-all ${x.icon===S.value?\"border-emerald-500 bg-emerald-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,children:S.value},S.value))})]}),n.jsxs(\"div\",{children:[n.jsx(Re,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Brand Color\"}),n.jsx(\"div\",{className:\"flex flex-wrap gap-3\",children:gu.map(S=>{const se={style:{\"--btn-color\":S}};return n.jsx(\"button\",{type:\"button\",onClick:()=>v({...x,color:S}),\"aria-label\":`Select color ${S}`,className:`w-8 h-8 rounded-full border-4 transition-all bg-[length:100%_100%] bg-[var(--btn-color)] ${x.color===S?\"border-white scale-110 shadow-lg shadow-white/20\":\"border-transparent hover:scale-105\"}`,...se},S)})})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Ge,{type:\"button\",variant:\"ghost\",onClick:()=>h(!1),className:\"flex-1 h-14 squircle-12 font-bold text-slate-500 hover:text-white\",children:\"Abort\"}),n.jsx(Ge,{type:\"submit\",className:\"flex-1 h-14 squircle-12 bg-emerald-600 hover:bg-emerald-500 text-white font-black shadow-lg shadow-emerald-600/20\",children:y?\"Update Account\":\"Ignite Account\"})]})]})]})})]});function P({account:S}){const se=S.type===\"credit_card\",he=se?(S.creditLimit||0)*(S.safeLimitPercentage||30)/100:0,ve=se&&S.creditLimit?Math.abs(S.balance)/S.creditLimit*100:0,fe=se&&ve<=(S.safeLimitPercentage||30);return n.jsxs(aa,{className:\"p-6 bg-slate-900/40 border-white/5 squircle-22 border hover:bg-slate-900/60 transition-all duration-300 group relative overflow-hidden\",children:[(()=>{const ye={style:{\"--card-glow\":S.color}};return n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20 bg-[var(--card-glow)]\",...ye})})(),n.jsxs(\"div\",{className:\"flex items-start justify-between mb-8 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[(()=>{const ye={style:{\"--icon-bg\":S.color+\"15\"}};return n.jsx(\"div\",{className:\"w-16 h-16 squircle-12 flex items-center justify-center text-3xl shadow-inner border border-white/5 group-hover:scale-105 transition-transform bg-[var(--icon-bg)]\",...ye,children:S.icon})})(),n.jsxs(\"div\",{className:\"min-w-0\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100 truncate\",children:S.name}),n.jsxs(\"div\",{className:\"flex items-center gap-1.5 mt-1\",children:[n.jsx(\"div\",{className:`w-1.5 h-1.5 rounded-full ${se?fe?\"bg-indigo-500\":\"bg-rose-500\":\"bg-emerald-500\"}`}),n.jsx(\"span\",{className:\"text-[10px] uppercase font-black tracking-widest text-slate-500\",children:se?\"Credit Pool\":\"Bank Account\"})]})]})]}),n.jsxs(\"div\",{className:\"flex gap-2\",children:[n.jsx(Ge,{variant:\"ghost\",title:\"Edit Account\",size:\"sm\",onClick:()=>M(S),className:\"w-8 h-8 p-0 squircle-12 hover:bg-white/5 text-slate-600 hover:text-white transition-all\",children:n.jsx(vy,{className:\"w-3.5 h-3.5\"})}),n.jsx(Ge,{variant:\"ghost\",title:\"Delete Account\",size:\"sm\",onClick:()=>R(S.id),className:\"w-8 h-8 p-0 squircle-12 hover:bg-rose-500/10 text-slate-600 hover:text-rose-400 transition-all\",children:n.jsx(Ai,{className:\"w-3.5 h-3.5\"})})]})]}),n.jsxs(\"div\",{className:\"pt-6 border-t border-white/5 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-end\",children:[n.jsxs(\"div\",{className:\"space-y-1\",children:[n.jsx(\"p\",{className:\"text-[10px] uppercase font-black tracking-widest text-slate-600\",children:se?\"Current Obligation\":\"Available Liquidity\"}),(()=>{const ye={style:{\"--balance-color\":S.color}};return n.jsx(\"h4\",{className:\"text-2xl font-black tabular-nums tracking-tight text-[var(--balance-color)]\",...ye,children:$e(S.balance,r)})})()]}),se&&S.creditLimit?n.jsxs(\"div\",{className:\"text-right\",children:[n.jsx(\"p\",{className:\"text-[9px] font-black text-slate-600 uppercase mb-1\",children:\"Limit Use\"}),n.jsxs(\"p\",{className:`text-xs font-black tabular-nums ${fe?\"text-indigo-400\":\"text-rose-400\"}`,children:[ve.toFixed(1),\"%\"]})]}):n.jsx(\"div\",{className:\"bg-white/5 px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest text-slate-500 border border-white/5\",children:\"Synced\"})]}),se&&S.creditLimit&&n.jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-white/5 flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"space-y-1\",children:[n.jsx(\"p\",{className:\"text-[8px] font-black text-slate-700 uppercase\",children:\"Safe Threshold\"}),n.jsx(\"p\",{className:\"text-[10px] font-black text-slate-500\",children:$e(he,r)})]}),S.serviceChargePercentage?n.jsxs(\"div\",{className:\"text-right space-y-1\",children:[n.jsx(\"p\",{className:\"text-[8px] font-black text-slate-700 uppercase\",children:\"Svc Charge\"}),n.jsxs(\"p\",{className:\"text-[10px] font-black text-slate-500\",children:[S.serviceChargePercentage,\"%\"]})]}):null,se&&S.statementDate&&n.jsxs(\"div\",{className:\"text-right space-y-1 ml-auto\",children:[n.jsx(\"p\",{className:\"text-[8px] font-black text-slate-700 uppercase\",children:\"Statement\"}),n.jsxs(\"p\",{className:\"text-[10px] font-black text-slate-500\",children:[\"Day \",S.statementDate]})]})]})]})]})}function V({message:S}){return n.jsx(\"div\",{className:\"py-12 text-center bg-slate-800/20 squircle-22 border border-dashed border-white/10 col-span-full\",children:n.jsx(\"p\",{className:\"text-sm text-slate-500 font-bold\",children:S})})}}function mN({isOpen:i,onClose:r,accounts:c,currency:u,onTransfer:m}){const[g,h]=A.useState(\"\"),[y,p]=A.useState(\"\"),[x,v]=A.useState(\"\"),[f,N]=A.useState(!1),M=c.find(V=>V.id===g),O=c.find(V=>V.id===y),B=parseFloat(x)||0,L=()=>{if(!g){J.error(\"Please select source reservoir\");return}if(!y){J.error(\"Please select destination reservoir\");return}if(g===y){J.error(\"Source and destination must be different\");return}if(!x||B<=0){J.error(\"Please enter a valid amount\");return}if(M&&B>M.balance){J.error(\"Insufficient funds in source reservoir\");return}N(!0)},R=()=>{m(g,y,B),P()},P=()=>{h(\"\"),p(\"\"),v(\"\"),N(!1),r()};return n.jsx(Bs,{open:i,onOpenChange:P,children:n.jsxs(Ls,{className:\"max-w-md max-h-[90vh] overflow-y-auto bg-[#020408] border-white/5 p-0 shadow-2xl custom-scrollbar text-white\",children:[n.jsxs(\"div\",{className:\"px-8 pt-10 pb-8 border-b border-white/5 relative overflow-hidden bg-indigo-500/5\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 blur-[60px] opacity-20 -mr-16 -mt-16 bg-indigo-500\"}),n.jsxs(qs,{className:\"relative z-10\",children:[n.jsxs(Is,{className:\"text-2xl font-black tracking-tighter text-slate-100 flex items-center gap-3\",children:[n.jsx(Ru,{className:\"w-6 h-6 text-indigo-400\"}),\"Capital Migration\"]}),n.jsx(Vs,{className:\"text-slate-500 font-bold text-[10px] uppercase tracking-[0.2em] mt-1\",children:\"Transfer between core liquidity reservoirs\"})]})]}),n.jsx(\"div\",{className:\"p-8\",children:f?n.jsxs(\"div\",{className:\"space-y-6 animate-in fade-in zoom-in-95 duration-300\",children:[n.jsxs(\"div\",{className:\"p-6 bg-slate-900/50 border border-white/5 rounded-3xl space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between gap-4\",children:[n.jsxs(\"div\",{className:\"flex-1 text-center space-y-2\",children:[n.jsx(\"div\",{className:\"w-12 h-12 rounded-2xl bg-slate-800 border border-white/10 flex items-center justify-center text-2xl mx-auto\",children:M?.icon}),n.jsx(\"p\",{className:\"text-[10px] font-black uppercase text-slate-500 truncate\",children:M?.name})]}),n.jsxs(\"div\",{className:\"flex flex-col items-center gap-1\",children:[n.jsx(Ru,{className:\"w-6 h-6 text-indigo-400 animate-pulse\"}),n.jsx(\"p\",{className:\"text-[10px] font-black text-indigo-400\",children:$e(B,u)})]}),n.jsxs(\"div\",{className:\"flex-1 text-center space-y-2\",children:[n.jsx(\"div\",{className:\"w-12 h-12 rounded-2xl bg-slate-800 border border-white/10 flex items-center justify-center text-2xl mx-auto\",children:O?.icon}),n.jsx(\"p\",{className:\"text-[10px] font-black uppercase text-slate-500 truncate\",children:O?.name})]})]}),n.jsxs(\"div\",{className:\"space-y-4 pt-4 border-t border-white/5\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-center text-xs\",children:[n.jsx(\"span\",{className:\"text-slate-500 font-bold\",children:\"Source New Balance\"}),n.jsx(\"span\",{className:\"text-rose-400 font-black\",children:$e((M?.balance||0)-B,u)})]}),n.jsxs(\"div\",{className:\"flex justify-between items-center text-xs\",children:[n.jsx(\"span\",{className:\"text-slate-500 font-bold\",children:\"Dest. New Balance\"}),n.jsx(\"span\",{className:\"text-emerald-400 font-black\",children:$e((O?.balance||0)+B,u)})]})]})]}),n.jsxs(\"div\",{className:\"p-4 bg-amber-500/5 border border-amber-500/10 rounded-2xl flex gap-3\",children:[n.jsx(wy,{className:\"w-5 h-5 text-amber-500 flex-shrink-0\"}),n.jsx(\"p\",{className:\"text-[10px] text-amber-200/60 font-medium leading-relaxed\",children:\"Notice: This migration will instantly adjust the liquidity status of both reservoirs. This action is recorded in the central protocol.\"})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Ge,{variant:\"ghost\",onClick:()=>N(!1),className:\"flex-1 h-12 rounded-2xl text-slate-500 font-bold hover:bg-white/5\",children:\"Back\"}),n.jsx(Ge,{onClick:R,className:\"flex-1 h-12 rounded-2xl bg-indigo-600 hover:bg-indigo-500 text-white font-black shadow-lg shadow-indigo-600/20 transition-all active:scale-95\",children:\"Confirm Migration\"})]})]}):n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(Re,{htmlFor:\"source-reservoir\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Source Reservoir\"}),n.jsxs(ha,{value:g,onValueChange:h,children:[n.jsx(ga,{id:\"source-reservoir\",className:\"h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-200 font-bold\",children:n.jsx(pa,{placeholder:\"Select source\"})}),n.jsx(xa,{className:\"bg-slate-900 border-white/5 max-h-[40vh]\",children:c.map(V=>n.jsx(vt,{value:V.id,className:\"focus:bg-white/5 focus:text-white\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between w-full pr-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-xl\",children:V.icon}),n.jsx(\"span\",{children:V.name})]}),n.jsx(\"span\",{className:\"text-xs font-black text-slate-500\",children:$e(V.balance,u)})]})},V.id))})]})]}),n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(Re,{htmlFor:\"dest-reservoir\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Destination Reservoir\"}),n.jsxs(ha,{value:y,onValueChange:p,children:[n.jsx(ga,{id:\"dest-reservoir\",className:\"h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-200 font-bold\",children:n.jsx(pa,{placeholder:\"Select destination\"})}),n.jsx(xa,{className:\"bg-slate-900 border-white/5 max-h-[40vh]\",children:c.map(V=>n.jsx(vt,{value:V.id,className:\"focus:bg-white/5 focus:text-white\",disabled:V.id===g,children:n.jsxs(\"div\",{className:\"flex items-center justify-between w-full pr-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-xl\",children:V.icon}),n.jsx(\"span\",{children:V.name})]}),n.jsx(\"span\",{className:\"text-xs font-black text-slate-500\",children:$e(V.balance,u)})]})},V.id))})]})]}),n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(Re,{htmlFor:\"migration-amount\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Capital Amount\"}),n.jsxs(\"div\",{className:\"relative group\",children:[n.jsx(\"div\",{className:\"absolute left-5 top-1/2 -translate-y-1/2 text-slate-500 font-bold group-focus-within:text-indigo-400 transition-colors\",children:u===\"INR\"?\"₹\":\"$\"}),n.jsx(Pt,{id:\"migration-amount\",name:\"amount\",type:\"number\",placeholder:\"0.00\",value:x,onChange:V=>v(V.target.value),className:\"pl-12 h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-100 font-black text-xl\"})]}),M&&B>M.balance&&n.jsxs(\"div\",{className:\"flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-rose-400 ml-1 animate-in slide-in-from-top-1\",children:[n.jsx(zu,{className:\"w-3 h-3\"}),n.jsx(\"span\",{children:\"Insufficient stability in source reservoir\"})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Ge,{variant:\"ghost\",onClick:P,className:\"flex-1 h-12 rounded-2xl text-slate-500 font-bold hover:bg-white/5\",children:\"Cancel\"}),n.jsx(Ge,{onClick:L,className:\"flex-1 h-12 rounded-2xl bg-indigo-600 hover:bg-indigo-500 text-white font-black shadow-lg shadow-indigo-600/20 transition-all active:scale-95\",children:\"Verify Migration\"})]})]})})]})})}function hN({onRefresh:i,children:r}){const c=A.useRef(0),[u,m]=A.useState(0),[g,h]=A.useState(!1),y=A.useRef(null),p=80,x=f=>{y.current&&y.current.scrollTop===0&&(c.current=f.touches[0].clientY)};A.useEffect(()=>{const f=M=>{if(c.current===0)return;const B=M.touches[0].clientY-c.current;if(B>0&&y.current&&y.current.scrollTop===0){M.cancelable&&M.preventDefault();const L=Math.min(B,p*1.5);L>=p&&u<p&&window.navigator.vibrate&&window.navigator.vibrate(10),m(L)}},N=y.current;return N&&N.addEventListener(\"touchmove\",f,{passive:!1}),()=>{N&&N.removeEventListener(\"touchmove\",f)}},[]);const v=async()=>{u>=p&&!g&&(h(!0),await i(),h(!1)),m(0),c.current=0};return n.jsxs(\"div\",{ref:y,className:\"relative overflow-y-auto\",onTouchStart:x,onTouchEnd:v,children:[n.jsx(Oe.div,{className:\"absolute top-0 left-0 right-0 flex justify-center items-center\",style:{height:u,opacity:u/p},animate:{y:g?0:-p},children:n.jsxs(\"div\",{className:\"flex flex-col items-center gap-2 py-4\",children:[n.jsx(Oe.div,{animate:{rotate:g?360:u/p*180},transition:{rotate:{duration:g?1:0,repeat:g?1/0:0,ease:\"linear\"}},children:n.jsx(Wr,{className:\"w-6 h-6 text-[#0A84FF]\"})}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-[0.2em] text-[#8E8E93]\",children:g?\"Synchronizing...\":u>=p?\"Relinquish to Sync\":\"Pull to Synchronize\"})]})}),n.jsx(Oe.div,{animate:{y:g?60:0},transition:{duration:.2},children:r})]})}function Rs({className:i,...r}){return n.jsx(\"div\",{\"data-slot\":\"skeleton\",className:ct(\"bg-accent animate-pulse rounded-md\",i),...r})}function pN(){return n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(aa,{className:\"p-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 mb-4\",children:[n.jsx(Rs,{className:\"w-12 h-12 rounded-lg\"}),n.jsxs(\"div\",{className:\"space-y-2 flex-1\",children:[n.jsx(Rs,{className:\"h-5 w-32\"}),n.jsx(Rs,{className:\"h-4 w-48\"})]})]}),n.jsx(\"div\",{className:\"grid grid-cols-3 gap-3\",children:[1,2,3].map(i=>n.jsx(\"div\",{className:\"space-y-2\",children:n.jsx(Rs,{className:\"h-20 w-full rounded-lg\"})},i))})]}),[1,2,3].map(i=>n.jsx(aa,{className:\"p-6\",children:n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(Rs,{className:\"h-6 w-48\"}),n.jsx(Rs,{className:\"h-4 w-full\"}),n.jsx(Rs,{className:\"h-4 w-3/4\"})]})},i))]})}function gN(i,r,c=30){let u=0;const m=h=>{u=h.touches[0].clientX},g=h=>{const p=h.touches[0].clientX-u;u<c&&p>30&&(h.cancelable&&h.preventDefault(),window.navigator.vibrate&&window.navigator.vibrate(20),i(),u=window.innerWidth),u>window.innerWidth-c&&p<-30&&(h.cancelable&&h.preventDefault(),window.navigator.vibrate&&window.navigator.vibrate(20),r(),u=0)};return document.addEventListener(\"touchstart\",m,{passive:!0}),document.addEventListener(\"touchmove\",g,{passive:!1}),()=>{document.removeEventListener(\"touchstart\",m),document.removeEventListener(\"touchmove\",g)}}const xN=({onOpenAI:i,onAddTransaction:r,onMigrate:c,isVisible:u})=>n.jsxs(\"div\",{id:\"fab-dock\",className:`fixed right-5 bottom-[110px] flex flex-col gap-3.5 z-[110] transition-all duration-500 ease-quantum ${u?\"translate-x-0 opacity-100\":\"translate-x-[100px] opacity-0\"}`,children:[n.jsx(\"div\",{onClick:i,title:\"AI Assistant\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-[#a855f74d] shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-[#A855F7] hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(bn,{className:\"w-5 h-5 group-hover:rotate-12 transition-transform\"})}),n.jsx(\"div\",{onClick:c,title:\"Migrate Capital\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-indigo-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-indigo-400 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(Ru,{className:\"w-5 h-5 group-hover:scale-110 transition-transform\"})}),n.jsx(\"div\",{onClick:()=>r(\"debt\"),title:\"Added Personal IOU\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-yellow-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-yellow-500 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(tp,{className:\"w-5 h-5 group-hover:-translate-y-0.5 transition-transform\"})}),n.jsx(\"div\",{onClick:()=>r(\"income\"),title:\"Add Money In\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-emerald-500/40 shadow-[0_0_20px_rgba(16,185,129,0.1)] cursor-pointer text-emerald-500 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(Nl,{className:\"w-5 h-5 group-hover:rotate-90 transition-transform\"})}),n.jsx(\"div\",{onClick:()=>r(\"expense\"),title:\"Add Money Out\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-rose-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-rose-500 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(jy,{className:\"w-5 h-5 group-hover:scale-110 transition-transform\"})})]}),bN=({isOpen:i,onClose:r,context:c,settings:u,isOffline:m=!1})=>{const[g,h]=A.useState(\"\"),[y,p]=A.useState([{text:\"Hello! I've analyzed your cash flow. How can I assist with your goals?\",type:\"ai\"}]),[x,v]=A.useState(!1),f=A.useRef(null);A.useEffect(()=>{f.current&&f.current.scrollIntoView({behavior:\"smooth\"})},[y]);const N=async()=>{if(!g.trim()||x)return;const M=g.trim();h(\"\"),p(O=>[...O,{text:M,type:\"user\"}]),v(!0);try{if(m){setTimeout(()=>{p(B=>[...B,{text:\"FinHub is currently in 'Cached View' (Offline). I've analyzed your local financial fabric: your liquidity nodes are stable, but synchronizing with global AI intelligence requires a stable link. How can I help you optimize your local state?\",type:\"ai\"}]),v(!1)},1e3);return}const O=await eN({userPrompt:M,context:c,settings:u,persona:\"ANALYST\"});O.error?p(B=>[...B,{text:O.error,type:\"ai\"}]):p(B=>[...B,{text:O.text||\"Analyzing financial pattern...\",type:\"ai\"}])}catch{p(B=>[...B,{text:\"Connection error. FinHub has transitioned to local 'Cached View'.\",type:\"ai\"}])}finally{m||v(!1)}};return i?n.jsxs(\"div\",{id:\"ai-chat-overlay\",className:\"fixed inset-0 bg-[#020408] z-[200] flex flex-col p-6 animate-in fade-in zoom-in-95 duration-300\",children:[n.jsx(\"div\",{className:\"absolute inset-0 bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-indigo-500/10 via-transparent to-transparent opacity-50\"}),n.jsxs(\"div\",{className:\"flex justify-between items-center mb-10 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-indigo-500/10 rounded-2xl flex items-center justify-center border border-indigo-500/20\",children:n.jsx(bn,{className:\"text-indigo-400 w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"h2\",{className:\"font-black text-2xl text-white tracking-tight leading-none\",children:\"AI Analyst\"}),n.jsxs(\"div\",{className:\"flex items-center gap-2 mt-1\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500\",children:\"Neural Core Context\"}),m&&n.jsx(\"span\",{className:\"text-[8px] bg-amber-500/10 text-amber-500 px-1.5 py-0.5 rounded border border-amber-500/20 font-black tracking-tighter uppercase\",children:\"Cached View\"})]})]})]}),n.jsx(\"button\",{onClick:r,\"aria-label\":\"Close Chat\",className:\"bg-white/5 w-12 h-12 rounded-full flex items-center justify-center hover:bg-white/10 hover:text-white text-slate-400 transition-all active:scale-95\",children:n.jsx(Tl,{className:\"w-6 h-6\"})})]}),n.jsxs(\"div\",{id:\"chat-messages\",className:\"flex-1 overflow-y-auto space-y-4 pr-2 custom-scrollbar\",children:[y.map((M,O)=>n.jsxs(\"div\",{className:ct(\"p-4 rounded-[24px] text-sm leading-relaxed\",M.type===\"ai\"?\"bg-slate-900 border border-white/5 text-slate-200 self-start max-w-[85%]\":\"bg-indigo-600 text-white font-medium shadow-lg shadow-indigo-600/20 self-end max-w-[85%]\"),children:[M.type===\"ai\"&&n.jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[n.jsx(bn,{className:\"w-3 h-3 text-indigo-400 font-black\"}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500\",children:\"Guru Analysis\"})]}),M.text]},O)),x&&n.jsx(\"div\",{className:\"p-4 bg-slate-900 border border-white/5 rounded-[24px] self-start animate-pulse\",children:n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:0ms]\"}),n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:150ms]\"}),n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:300ms]\"})]})}),n.jsx(\"div\",{ref:f})]}),n.jsxs(\"div\",{className:\"mt-8 flex gap-3 p-2 bg-slate-900/40 rounded-[28px] border border-white/5 relative z-10\",children:[n.jsx(\"input\",{type:\"text\",value:g,onChange:M=>h(M.target.value),onKeyDown:M=>M.key===\"Enter\"&&N(),placeholder:\"Ask the analyst...\",className:\"flex-1 bg-transparent border-none px-6 py-4 text-white focus:outline-none placeholder:text-slate-600 font-bold\"}),n.jsx(\"button\",{onClick:N,disabled:x||!g.trim(),\"aria-label\":\"Send Message\",className:\"w-14 h-14 bg-indigo-600 rounded-[22px] flex items-center justify-center shadow-lg shadow-indigo-900/30 hover:bg-indigo-500 transition-all active:scale-90 disabled:opacity-50 disabled:cursor-not-allowed group\",children:n.jsx(Ny,{className:\"w-6 h-6 text-white group-hover:-translate-y-1 transition-transform\"})})]}),n.jsx(\"p\",{className:\"text-[9px] font-bold text-slate-600 text-center uppercase tracking-widest mt-4\",children:\"Encryption Verified // Neural Fabric Link Stable\"})]}):null};class yN extends A.Component{state={hasError:!1};static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,c){console.error(\"Uncaught error:\",r,c)}render(){return this.state.hasError?n.jsx(\"div\",{className:\"min-h-[400px] flex items-center justify-center p-6\",children:n.jsxs(aa,{className:\"max-w-md w-full p-8 bg-slate-900 border-white/10 text-center space-y-6 rounded-[32px]\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-rose-500/10 rounded-full flex items-center justify-center mx-auto\",children:n.jsx(Jr,{className:\"w-8 h-8 text-rose-500\"})}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(\"h2\",{className:\"text-xl font-black text-white uppercase tracking-tight\",children:\"System Glitch Detected\"}),n.jsx(\"p\",{className:\"text-sm text-slate-400 font-medium\",children:\"The neural link to this component was interrupted. This usually happens during background updates.\"})]}),this.state.error&&n.jsx(\"pre\",{className:\"text-[10px] bg-black/40 p-3 rounded-xl text-rose-400/80 overflow-x-auto text-left font-mono\",children:this.state.error.message}),n.jsxs(Ge,{onClick:()=>window.location.reload(),className:\"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-black py-6 rounded-2xl gap-2 h-auto\",children:[n.jsx(Wr,{className:\"w-4 h-4\"}),\"Re-establish Connection\"]})]})}):this.props.children}}const vN=()=>{const{checkIdentity:i,login:r,signup:c,sendOtp:u,verifyOtp:m,resetPin:g,isRememberedUser:h,rememberedMobile:y,pendingMobile:p,clearPendingSession:x}=Di(),[v,f]=A.useState(\"identity\"),[N,M]=A.useState(\"\"),[O,B]=A.useState(\"\"),[L,R]=A.useState(\"\"),[P,V]=A.useState(\"\"),[S,se]=A.useState(\"\"),[he,ve]=A.useState(\"\"),[fe,ye]=A.useState(!1),[Se,qe]=A.useState(!1),[Te,ee]=A.useState(!1),[me,G]=A.useState(!1),C=A.useRef(null);A.useEffect(()=>{h&&y?(M(y),f(\"verify\"),Y()):p&&(M(p),f(\"verify\"))},[h,y,p]);const Y=async()=>{G(!0),setTimeout(async()=>{Math.random()>.2?await r(\"2255\",!0)||G(!1):(G(!1),navigator.vibrate&&navigator.vibrate([50,50]))},1500)};A.useEffect(()=>{v===\"identity\"&&N.length===10&&oe()},[N,v]),A.useEffect(()=>{v===\"verify\"&&O.length===4&&re()},[O,v]),A.useEffect(()=>{C.current&&(C.current.focus(),C.current.type!==\"hidden\"&&C.current.select())},[v]);const oe=async()=>{if(N.length!==10)return;const xe=await i(N);f(xe?\"verify\":\"create_name\"),B(\"\")},ge=async()=>{await u(N)&&f(\"otp_reset\")},z=async()=>{if(L.trim().length<2)return;await u(N)&&f(\"otp_verify\")},T=async()=>{await m(N,P)?f(v===\"otp_verify\"?\"create_pin\":\"reset_pin\"):$()},re=async()=>{v===\"verify\"?await r(O,Se)?(navigator.vibrate&&navigator.vibrate([10]),!Se&&!h&&ee(!0)):$():v===\"create_pin\"?O.length===4&&(await c(N,O,L,Se)||$()):v===\"reset_pin\"&&(S===he&&S.length===4&&await g(N,S)?(f(\"verify\"),B(\"\"),se(\"\"),ve(\"\")):$())},$=()=>{ye(!0),navigator.vibrate&&navigator.vibrate([50,30,50]),setTimeout(()=>ye(!1),500),V(\"\"),B(\"\"),ve(\"\")},le=()=>v===\"identity\"?N.length!==10:v===\"verify\"?O.length!==4:v===\"otp_verify\"||v===\"otp_reset\"?P.length!==4:v===\"create_name\"?L.trim().length<2:v===\"create_pin\"?O.length!==4:v===\"reset_pin\"?S.length!==4||he.length!==4:!1,ue=()=>{x(),f(\"identity\"),M(\"\"),B(\"\")},Ne=xe=>{xe.key===\"Enter\"&&!le()&&je()()},je=()=>{switch(v){case\"identity\":return oe;case\"otp_verify\":case\"otp_reset\":return T;case\"create_name\":return z;case\"verify\":case\"create_pin\":case\"reset_pin\":return re;default:return()=>{}}},de=()=>{switch(v){case\"identity\":return\"Continue\";case\"otp_verify\":case\"otp_reset\":return\"Verify OTP\";case\"create_name\":return\"Next\";case\"verify\":return\"Login\";case\"create_pin\":return\"Create Account\";case\"reset_pin\":return\"Reset PIN\";default:return\"Continue\"}};return n.jsxs(\"div\",{className:\"fixed inset-0 flex flex-col items-center justify-center overflow-hidden font-sans auth-mesh-gradient z-[9999999]\",children:[n.jsx(\"div\",{className:\"absolute inset-0 z-0 bg-[url('/mesh-grid.svg')] opacity-20\"}),n.jsxs(Oe.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},className:\"absolute top-12 z-10 flex flex-col items-center gap-2\",children:[n.jsx(\"img\",{src:\"/images/logo-dark.png\",alt:\"FinHub\",className:\"h-12 w-auto\"}),n.jsx(\"span\",{className:\"text-xs font-medium text-white/40 tracking-widest uppercase\",children:\"v0.1 Beta\"})]}),n.jsxs(\"div\",{className:\"z-10 w-full max-w-sm px-8\",children:[n.jsxs(Bn,{mode:\"wait\",children:[v===\"identity\"&&n.jsxs(Oe.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},exit:{x:-20,opacity:0},className:\"flex flex-col gap-6\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Welcome\"}),n.jsx(\"p\",{className:\"text-white/50 text-sm mt-2\",children:\"Enter your mobile number to continue\"})]}),n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-sky-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"Mobile Number\"}),n.jsx(\"input\",{ref:C,type:\"text\",inputMode:\"numeric\",maxLength:10,value:N,onChange:xe=>M(xe.target.value.replace(/\\D/g,\"\")),onKeyDown:Ne,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"999 999 9999\"})]}),n.jsxs(\"div\",{onClick:()=>{qe(!Se),navigator.vibrate&&navigator.vibrate(5)},className:\"flex items-center gap-3 cursor-pointer self-center\",children:[n.jsx(\"div\",{className:`h-5 w-5 rounded-md border transition-all flex items-center justify-center ${Se?\"bg-sky-500 border-sky-500\":\"border-white/20 bg-white/5\"}`,children:Se&&n.jsx(Sl,{className:\"h-3.5 w-3.5 text-white\"})}),n.jsx(\"span\",{className:\"text-sm text-white/60 font-medium\",children:\"Remember me for 30 days\"})]})]},\"identity\"),v===\"create_name\"&&n.jsxs(Oe.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},exit:{x:-20,opacity:0},className:\"flex flex-col gap-6\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Who are you?\"}),n.jsx(\"p\",{className:\"text-white/50 text-sm mt-2\",children:\"Personalize your node experience\"})]}),n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-sky-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"Full Name\"}),n.jsx(\"input\",{ref:C,type:\"text\",value:L,onChange:xe=>R(xe.target.value),onKeyDown:Ne,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"Joe Doe\"})]})]},\"create_name\"),(v===\"otp_verify\"||v===\"otp_reset\")&&n.jsxs(Oe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,x:fe?[0,-10,10,-10,10,0]:0},exit:{scale:1.1,opacity:0},className:\"relative flex flex-col gap-8 items-center\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"div\",{className:\"mb-4 flex justify-center\",children:n.jsx(\"div\",{className:\"p-4 rounded-full bg-white/5 ring-1 ring-white/10\",children:n.jsx(Sy,{className:\"h-8 w-8 text-sky-400\"})})}),n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Verify Node\"}),n.jsxs(\"p\",{className:\"text-white/40 text-sm mt-2\",children:[\"Enter the 4-digit code sent to\",n.jsx(\"br\",{}),n.jsx(\"span\",{className:\"text-white/70\",children:N})]})]}),n.jsxs(\"div\",{className:\"group relative flex flex-col items-center justify-center rounded-[32px] bg-white/5 p-10 ring-1 ring-white/10 backdrop-blur-md\",children:[n.jsx(\"div\",{className:\"flex gap-5\",children:[0,1,2,3].map(xe=>n.jsx(Oe.div,{animate:{scale:xe<P.length?1.2:1,backgroundColor:xe<P.length?\"#fff\":\"rgba(255,255,255,0.1)\"},transition:{duration:.1},className:\"h-3.5 w-3.5 rounded-full\"},xe))}),n.jsx(\"input\",{ref:C,type:\"password\",inputMode:\"numeric\",maxLength:4,value:P,onChange:xe=>V(xe.target.value.replace(/\\D/g,\"\")),onKeyDown:Ne,className:\"absolute inset-0 opacity-0 cursor-default\",\"aria-label\":\"One-time Password\",placeholder:\"OTP\"})]})]},\"otp\"),v===\"reset_pin\"&&n.jsxs(Oe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,x:fe?[0,-10,10,-10,10,0]:0},exit:{scale:1.1,opacity:0},className:\"relative flex flex-col gap-8 items-center\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"div\",{className:\"mb-4 flex justify-center\",children:n.jsx(\"div\",{className:\"p-4 rounded-full bg-white/5 ring-1 ring-white/10\",children:n.jsx(Ay,{className:\"h-8 w-8 text-amber-400\"})})}),n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Reset PIN\"}),n.jsx(\"p\",{className:\"text-white/40 text-sm mt-2\",children:\"Choose a new secure 4-digit access code\"})]}),n.jsxs(\"div\",{className:\"space-y-4 w-full\",children:[n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-amber-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"New PIN\"}),n.jsx(\"input\",{type:\"password\",inputMode:\"numeric\",maxLength:4,value:S,onChange:xe=>se(xe.target.value.replace(/\\D/g,\"\")),onKeyDown:Ne,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"****\"})]}),n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-amber-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"Confirm PIN\"}),n.jsx(\"input\",{type:\"password\",inputMode:\"numeric\",maxLength:4,value:he,onChange:xe=>ve(xe.target.value.replace(/\\D/g,\"\")),onKeyDown:Ne,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"****\"})]})]})]},\"reset_pin\"),(v===\"verify\"||v===\"create_pin\")&&n.jsxs(Oe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,x:fe?[0,-10,10,-10,10,0]:0},exit:{scale:1.1,opacity:0},className:\"relative flex flex-col gap-8 items-center\",children:[n.jsx(Oe.div,{initial:{opacity:0},animate:{opacity:1},className:\"fixed inset-0 z-[-1] bg-black/80 backdrop-blur-xl\"}),n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(Oe.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:\"mb-4 flex justify-center\",children:n.jsx(\"div\",{className:\"p-4 rounded-full bg-white/5 ring-1 ring-white/10\",children:n.jsx(Ti,{className:\"h-8 w-8 text-sky-400\"})})}),n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:v===\"verify\"?\"Private Access\":\"Secure Setup\"}),n.jsx(\"p\",{className:\"text-white/40 text-sm mt-2\",children:v===\"verify\"?\"Encrypted PIN required\":\"Create your master PIN\"})]}),n.jsxs(\"div\",{className:\"group relative flex flex-col items-center justify-center rounded-[32px] bg-white/5 p-10 ring-1 ring-white/10 backdrop-blur-md\",children:[n.jsx(\"div\",{className:\"flex gap-5\",children:[0,1,2,3].map(xe=>n.jsx(Oe.div,{animate:{scale:xe<O.length?1.2:1,backgroundColor:xe<O.length?\"#fff\":\"rgba(255,255,255,0.1)\"},transition:{duration:.1},className:\"h-3.5 w-3.5 rounded-full\"},xe))}),n.jsx(\"input\",{ref:C,type:\"password\",inputMode:\"numeric\",maxLength:4,value:O,onChange:xe=>B(xe.target.value.replace(/\\D/g,\"\")),onKeyDown:Ne,className:\"absolute inset-0 opacity-0 cursor-default\",\"aria-label\":\"Access PIN\",placeholder:\"PIN\"})]}),v===\"verify\"&&n.jsxs(\"div\",{className:\"flex flex-col items-center gap-4\",children:[n.jsxs(\"button\",{onClick:Y,className:\"flex items-center gap-2 text-sky-400 text-sm font-medium\",children:[n.jsx(_s,{className:\"h-5 w-5\"}),\" Use Biometrics\"]}),n.jsx(\"button\",{onClick:ge,className:\"text-white/30 text-xs hover:text-white/50 transition-colors\",children:\"Forgot PIN? Reset via SMS\"}),n.jsx(\"button\",{onClick:ue,className:\"text-sky-500/50 text-[10px] font-bold uppercase tracking-widest hover:text-sky-400/80 transition-colors mt-2\",children:\"Login with another account\"})]})]},\"pin\")]}),n.jsxs(Oe.button,{onClick:je(),disabled:le(),className:`mt-8 flex w-full items-center justify-center gap-2 rounded-[22px] py-4 text-base font-semibold text-white shadow-lg transition-all ${le()?\"cursor-not-allowed bg-[#3A3A3C] opacity-50\":\"bg-gradient-to-r from-[#0A84FF] to-[#0047AB] shadow-sky-500/20 active:scale-95\"}`,whileTap:{scale:.98},children:[de(),!le()&&n.jsx(ap,{className:\"h-4 w-4\"})]})]}),n.jsx(Bn,{children:Te&&n.jsx(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"fixed inset-0 z-[60] flex items-end justify-center bg-black/60 p-6 backdrop-blur-sm\",children:n.jsxs(Oe.div,{initial:{y:100},animate:{y:0},exit:{y:100},className:\"w-full max-w-sm rounded-[32px] bg-[#1C1C1E] p-8 text-center ring-1 ring-white/10 shadow-2xl\",children:[n.jsx(\"div\",{className:\"mx-auto mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-sky-500/20 text-sky-400\",children:n.jsx(Sl,{className:\"h-8 w-8\"})}),n.jsx(\"h3\",{className:\"text-xl font-bold text-white\",children:\"Speed up your next login?\"}),n.jsx(\"p\",{className:\"mt-2 text-sm text-white/50\",children:\"We can securely remember your ID so you can skip the mobile entry next time.\"}),n.jsxs(\"div\",{className:\"mt-8 flex flex-col gap-3\",children:[n.jsx(\"button\",{onClick:()=>{localStorage.setItem(\"finhub_remembered_mobile\",N),ee(!1)},className:\"w-full rounded-2xl bg-sky-500 py-4 font-semibold text-white active:scale-95 transition-all\",children:\"Enable Smart Login\"}),n.jsx(\"button\",{onClick:()=>ee(!1),className:\"w-full py-2 text-sm font-medium text-white/30 active:text-white/50\",children:\"Maybe later\"})]})]})})}),n.jsx(Bn,{children:me&&n.jsx(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"fixed inset-0 z-[70] flex flex-col items-center justify-center bg-black/40 backdrop-blur-md\",children:n.jsxs(Oe.div,{initial:{scale:.8},animate:{scale:1},className:\"flex flex-col items-center\",children:[n.jsxs(\"div\",{className:\"relative mb-6\",children:[n.jsx(Oe.div,{animate:{scale:[1,1.2,1],opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0},className:\"absolute inset-0 rounded-full bg-sky-500/30 blur-2xl\"}),n.jsx(\"div\",{className:\"relative flex h-24 w-24 items-center justify-center rounded-full bg-white/5 ring-1 ring-white/20\",children:n.jsx(_s,{className:\"h-12 w-12 text-sky-400\"})})]}),n.jsx(\"h3\",{className:\"text-lg font-medium text-white\",children:\"Scanning Biometrics\"}),n.jsx(\"p\",{className:\"mt-2 text-sm text-white/40 italic\",children:\"Verifying your node identity...\"}),n.jsx(\"button\",{onClick:()=>G(!1),className:\"mt-12 text-xs font-medium uppercase tracking-widest text-white/20 hover:text-white/40\",children:\"Cancel & use PIN\"})]})})}),n.jsx(\"div\",{className:\"absolute bottom-8 text-center text-[10px] text-white/20\",children:n.jsx(\"p\",{children:\"Protected by FinHub Node Protocols. Data is localized and encrypted.\"})})]})},H0=({message:i=\"Secure Node Handshake\",subMessage:r=\"Re-encrypting local session...\"})=>n.jsxs(\"div\",{className:\"fixed inset-0 z-[100] flex flex-col items-center justify-center bg-[#000000] overflow-hidden\",children:[n.jsx(Oe.div,{animate:{opacity:[.1,.2,.1],scale:[1,1.1,1]},transition:{duration:4,repeat:1/0,ease:\"easeInOut\"},className:\"absolute h-[500px] w-[500px] rounded-full bg-sky-500/10 blur-[120px]\"}),n.jsxs(\"div\",{className:\"relative flex flex-col items-center justify-center gap-12\",children:[n.jsxs(\"div\",{className:\"relative flex items-center justify-center\",children:[[0,1,2].map(c=>n.jsx(Oe.div,{className:\"absolute rounded-full border border-sky-400/20\",initial:{width:80,height:80,opacity:0},animate:{width:[80,250],height:[80,250],opacity:[.4,0]},transition:{duration:3,repeat:1/0,delay:c*1,ease:\"easeOut\"}},c)),n.jsx(Oe.div,{animate:{y:[0,-10,0]},transition:{duration:4,repeat:1/0,ease:\"easeInOut\"},className:\"relative z-10\",children:n.jsx(Oe.div,{animate:{scale:[1,1.1,1],filter:[\"drop-shadow(0 0 15px rgba(56,189,248,0.3))\",\"drop-shadow(0 0 30px rgba(56,189,248,0.6))\",\"drop-shadow(0 0 15px rgba(56,189,248,0.3))\"]},transition:{duration:3,repeat:1/0,ease:\"easeInOut\"},className:\"relative flex h-32 w-32 items-center justify-center rounded-[32px] bg-gradient-to-br from-[#1C1C1E] to-[#000000] ring-1 ring-white/10 shadow-2xl backdrop-blur-xl\",children:n.jsx(\"img\",{src:\"/images/logo-icon.png\",alt:\"FinHub\",className:\"h-20 w-20 object-contain drop-shadow-lg\"})})})]}),n.jsx(Oe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:\"flex flex-col items-center gap-2\",children:n.jsxs(\"div\",{className:\"flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/5 ring-1 ring-white/5 backdrop-blur-md\",children:[n.jsx(Ti,{className:\"h-3 w-3 text-sky-400\"}),n.jsx(\"span\",{className:\"text-[10px] font-bold tracking-[0.2em] uppercase text-white/40\",children:i})]})})]}),n.jsxs(\"div\",{className:\"absolute bottom-16 w-full max-w-[200px] px-6\",children:[n.jsx(\"div\",{className:\"h-[2px] w-full overflow-hidden rounded-full bg-white/10\",children:n.jsx(Oe.div,{initial:{x:\"-100%\"},animate:{x:\"100%\"},transition:{duration:1.5,repeat:1/0,ease:\"easeInOut\"},className:\"h-full w-1/3 bg-gradient-to-r from-transparent via-sky-400 to-transparent\"})}),n.jsx(\"div\",{className:\"mt-3 text-center\",children:n.jsx(\"span\",{className:\"text-[10px] font-medium text-white/20 italic tracking-wider\",children:r})})]})]}),wN=({isOpen:i,onClose:r})=>n.jsx(Bn,{children:i&&n.jsxs(n.Fragment,{children:[n.jsx(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,className:\"fixed inset-0 z-[200] bg-black/60 backdrop-blur-sm\"}),n.jsx(\"div\",{className:\"fixed inset-0 z-[201] flex items-center justify-center p-4 pointer-events-none\",children:n.jsxs(Oe.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:\"spring\",damping:25,stiffness:300},className:\"w-full max-w-md bg-slate-900 border border-white/5 rounded-[32px] shadow-2xl overflow-hidden pointer-events-auto relative\",children:[n.jsx(\"div\",{className:\"absolute top-0 inset-x-0 h-32 bg-gradient-to-b from-indigo-500/10 to-transparent pointer-events-none\"}),n.jsx(\"button\",{onClick:r,className:\"absolute top-6 right-6 p-2 rounded-full bg-white/5 text-slate-400 hover:text-white hover:bg-white/10 transition-colors z-10\",\"aria-label\":\"Close about us popup\",children:n.jsx(Tl,{className:\"w-5 h-5\"})}),n.jsxs(\"div\",{className:\"p-8 pt-12 space-y-8 relative\",children:[n.jsxs(\"div\",{className:\"flex flex-col items-center text-center gap-3\",children:[n.jsx(\"div\",{className:\"w-16 h-16 rounded-[22px] bg-indigo-600 flex items-center justify-center shadow-lg shadow-indigo-500/20\",children:n.jsx(Dy,{className:\"w-8 h-8 text-white\"})}),n.jsxs(\"div\",{children:[n.jsx(\"h2\",{className:\"text-2xl font-black text-white tracking-tight uppercase\",children:\"FinHub Core\"}),n.jsx(\"p\",{className:\"text-[10px] font-bold text-indigo-400 uppercase tracking-[0.3em]\",children:\"Quantum Fabric v50.3\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"section\",{className:\"space-y-2\",children:[n.jsxs(\"h3\",{className:\"text-[10px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2\",children:[n.jsx(_s,{className:\"w-3.5 h-3.5\"}),\"Our Vision\"]}),n.jsx(\"p\",{className:\"text-sm text-slate-300 leading-relaxed font-medium\",children:\"FinHub is designed to be the central nervous system of your personal economy. We merge neural-inspired data models with high-precision tracking to navigate complex wealth landscapes.\"})]}),n.jsxs(\"section\",{className:\"space-y-2\",children:[n.jsxs(\"h3\",{className:\"text-[10px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2\",children:[n.jsx(Ti,{className:\"w-3.5 h-3.5\"}),\"Core Protocol\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[n.jsxs(\"div\",{className:\"bg-white/5 p-3 rounded-2xl border border-white/5\",children:[n.jsx(\"span\",{className:\"block text-[8px] font-black text-indigo-400 uppercase mb-1\",children:\"Localization\"}),n.jsx(\"span\",{className:\"text-[10px] text-slate-400 leading-tight\",children:\"Sovereign identity via node storage.\"})]}),n.jsxs(\"div\",{className:\"bg-white/5 p-3 rounded-2xl border border-white/5\",children:[n.jsx(\"span\",{className:\"block text-[8px] font-black text-indigo-400 uppercase mb-1\",children:\"Clamping Logic\"}),n.jsx(\"span\",{className:\"text-[10px] text-slate-400 leading-tight\",children:\"Mathematical stability in all simulations.\"})]})]})]}),n.jsxs(\"div\",{className:\"pt-6 border-t border-white/5 flex flex-col items-center gap-2\",children:[n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-600 uppercase tracking-widest\",children:\"Architect: Sijo Joseph\"}),n.jsx(\"p\",{className:\"text-[10px] font-black text-slate-800 uppercase tracking-[0.2em]\",children:\"© 2025 Neural FinHub Fabric\"})]})]})]})]})})]})}),jN=()=>{const{settings:i,updateSettings:r,createGoal:c,createLiability:u}=Di(),[m,g]=A.useState(1),[h,y]=A.useState(\"intro\"),[p,x]=A.useState(!1),[v,f]=A.useState([]),[N,M]=A.useState({name:\"\",amount:\"\",interest:\"\"}),[O,B]=A.useState(i.passiveIncomeTarget?.toString()||\"\"),L=async ye=>{await r({isSampleMode:ye})},R=async ye=>{x(!0),ye||(await c({name:\"Health Insurance\",targetAmount:5e5,currentAmount:0,targetDate:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString(),emoji:\"🏥\",type:\"protection\",status:\"active\",createdAt:new Date().toISOString()}),await c({name:\"Term Insurance\",targetAmount:1e7,currentAmount:0,targetDate:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString(),emoji:\"🛡️\",type:\"protection\",status:\"active\",createdAt:new Date().toISOString()})),y(\"completion\"),x(!1)},P=()=>{g(2),y(\"intro\")},V=()=>{N.name&&N.amount&&N.interest&&(f([...v,N]),M({name:\"\",amount:\"\",interest:\"\"}))},S=ye=>{f(v.filter((Se,qe)=>qe!==ye))},se=async()=>{x(!0);for(const ye of v){const Se=parseFloat(ye.interest);await u({name:ye.name,type:\"other\",principal:parseFloat(ye.amount),outstanding:parseFloat(ye.amount),interestRate:Se,emiAmount:0,startDate:new Date().toISOString(),tenure:12,penalty_applied:Se>10})}y(\"completion\"),x(!1)},he=()=>{g(3),y(\"intro\")},ve=async()=>{x(!0),await r({passiveIncomeTarget:parseFloat(O)||0}),y(\"completion\"),x(!1)},fe=async()=>{await r({onboardingPhase:3})};return n.jsxs(\"div\",{className:\"fixed inset-0 z-[300] flex items-center justify-center p-6 bg-black overflow-hidden\",children:[n.jsxs(\"div\",{className:\"absolute inset-0 overflow-hidden pointer-events-none transition-colors duration-1000\",children:[n.jsxs(Bn,{children:[m===1&&n.jsxs(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"absolute inset-0\",children:[n.jsx(\"div\",{className:\"absolute -top-[20%] -left-[10%] w-[60%] h-[60%] bg-teal-500/20 blur-[120px] rounded-full animate-pulse\"}),n.jsx(\"div\",{className:\"absolute -bottom-[20%] -right-[10%] w-[60%] h-[60%] bg-emerald-500/10 blur-[120px] rounded-full animate-pulse\"})]},\"teal-bg\"),m===2&&n.jsxs(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"absolute inset-0\",children:[n.jsx(\"div\",{className:\"absolute -top-[20%] -left-[10%] w-[60%] h-[60%] bg-orange-500/20 blur-[120px] rounded-full animate-pulse\"}),n.jsx(\"div\",{className:\"absolute -bottom-[20%] -right-[10%] w-[60%] h-[60%] bg-rose-500/10 blur-[120px] rounded-full animate-pulse\"})]},\"orange-bg\"),m===3&&n.jsxs(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"absolute inset-0\",children:[n.jsx(\"div\",{className:\"absolute -top-[20%] -left-[10%] w-[60%] h-[60%] bg-purple-500/20 blur-[120px] rounded-full animate-pulse\"}),n.jsx(\"div\",{className:\"absolute -bottom-[20%] -right-[10%] w-[60%] h-[60%] bg-amber-500/10 blur-[120px] rounded-full animate-pulse\"})]},\"purple-bg\")]}),n.jsx(\"div\",{className:\"absolute top-[30%] left-[20%] w-[40%] h-[40%] bg-white/5 blur-[100px] rounded-full\"})]}),n.jsxs(Bn,{mode:\"wait\",children:[m===1&&h===\"intro\"&&n.jsxs(Oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:\"max-w-md w-full text-center space-y-8 relative z-10\",children:[n.jsx(\"div\",{className:\"w-20 h-20 bg-teal-500/10 border border-teal-500/20 rounded-[28px] flex items-center justify-center mx-auto mb-6 shadow-2xl shadow-teal-500/20\",children:n.jsx(Ti,{className:\"w-10 h-10 text-teal-400\"})}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"h1\",{className:\"text-4xl font-black text-white tracking-tight leading-tight uppercase\",children:[\"Welcome to \",n.jsx(\"span\",{className:\"text-teal-400\",children:\"FinHub\"})]}),n.jsx(\"p\",{className:\"text-slate-400 text-lg font-medium leading-relaxed\",children:\"Before we look at your wealth, let's ensure it's protected.\"})]}),n.jsxs(\"div\",{className:\"flex flex-col gap-3 w-full\",children:[n.jsxs(\"button\",{onClick:()=>y(\"question\"),className:\"group py-5 bg-white text-black font-black uppercase tracking-[0.2em] rounded-24 flex items-center justify-center gap-3 hover:bg-teal-400 transition-all duration-500\",children:[\"Begin Shield \",n.jsx(xn,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]}),n.jsx(\"button\",{onClick:()=>L(!0),className:\"py-3 text-slate-500 font-bold uppercase tracking-widest text-[10px] hover:text-teal-400 transition-colors\",children:\"View Sample Node\"})]})]},\"p1-intro\"),m===1&&h===\"question\"&&n.jsxs(Oe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:\"max-w-md w-full space-y-8 relative z-10\",children:[n.jsxs(\"div\",{className:\"space-y-4 text-center\",children:[n.jsx(\"div\",{className:\"text-[10px] font-black text-teal-500 uppercase tracking-[0.4em] mb-2\",children:\"Protocol: Protection Check\"}),n.jsx(\"h2\",{className:\"text-3xl font-black text-white tracking-tight leading-tight\",children:\"Do you have Health and Term Insurance?\"}),n.jsx(\"p\",{className:\"text-slate-500 font-bold\",children:\"These are the foundations of any terminal wealth flight path.\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 gap-4 pt-4 text-left\",children:[n.jsx(\"button\",{onClick:()=>R(!0),disabled:p,className:\"p-6 bg-slate-900/50 border border-white/5 rounded-3xl text-left hover:border-teal-500/30 hover:bg-teal-500/5 transition-all group\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"space-y-1\",children:[n.jsx(\"p\",{className:\"text-white font-black uppercase tracking-widest group-hover:text-teal-400 transition-colors\",children:\"Yes, I'm covered\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 font-bold uppercase\",children:\"Shield is active\"})]}),n.jsx(Sl,{className:\"w-6 h-6 text-slate-700 group-hover:text-teal-500 transition-colors\"})]})}),n.jsx(\"button\",{onClick:()=>R(!1),disabled:p,className:\"p-6 bg-slate-900/50 border border-white/5 rounded-3xl text-left hover:border-amber-500/30 hover:bg-amber-500/5 transition-all group\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"space-y-1\",children:[n.jsx(\"p\",{className:\"text-white font-black uppercase tracking-widest group-hover:text-amber-400 transition-colors\",children:\"Not yet\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 font-bold uppercase\",children:\"Security leak detected\"})]}),n.jsx(Jr,{className:\"w-6 h-6 text-slate-700 group-hover:text-amber-500 transition-colors\"})]})})]})]},\"p1-question\"),m===1&&h===\"completion\"&&n.jsxs(Oe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:\"max-w-md w-full text-center space-y-8 relative z-10\",children:[n.jsx(\"div\",{className:\"w-20 h-20 bg-teal-500/10 border border-teal-500/20 rounded-[28px] flex items-center justify-center mx-auto mb-6\",children:n.jsx(Sl,{className:\"w-10 h-10 text-teal-400\"})}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(\"h2\",{className:\"text-3xl font-black text-white tracking-tight leading-tight uppercase\",children:\"Shield Protocol Deployed\"}),n.jsx(\"p\",{className:\"text-slate-400 text-lg font-medium leading-relaxed\",children:\"Understood. We've prioritized these. A single emergency shouldn't crash your flight path.\"})]}),n.jsx(\"button\",{onClick:P,className:\"w-full py-5 bg-teal-500 text-black font-black uppercase tracking-[0.2em] rounded-24 hover:bg-teal-400 transition-all duration-500 shadow-xl shadow-teal-500/20\",children:\"Initialize Phase 2\"})]},\"p1-comp\"),m===2&&h===\"intro\"&&n.jsxs(Oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:\"max-w-md w-full text-center space-y-8 relative z-10\",children:[n.jsx(\"div\",{className:\"w-20 h-20 bg-orange-500/10 border border-orange-500/20 rounded-[28px] flex items-center justify-center mx-auto mb-6 shadow-2xl shadow-orange-500/20\",children:n.jsx(qh,{className:\"w-10 h-10 text-orange-400\"})}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"h1\",{className:\"text-4xl font-black text-white tracking-tight leading-tight uppercase\",children:[\"Action \",n.jsx(\"span\",{className:\"text-orange-400\",children:\"Zone\"})]}),n.jsx(\"p\",{className:\"text-slate-400 text-lg font-medium leading-relaxed\",children:\"Now, let's find the 'Wealth Leaks' that are slowing you down.\"})]}),n.jsxs(\"div\",{className:\"flex flex-col gap-3 w-full\",children:[n.jsxs(\"button\",{onClick:()=>y(\"question\"),className:\"group py-5 bg-white text-black font-black uppercase tracking-[0.2em] rounded-24 flex items-center justify-center gap-3 hover:bg-orange-400 transition-all duration-500\",children:[\"Run Scan \",n.jsx(xn,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]}),n.jsx(\"button\",{onClick:()=>L(!0),className:\"py-3 text-slate-500 font-bold uppercase tracking-widest text-[10px] hover:text-orange-400 transition-colors\",children:\"View Sample Node\"})]})]},\"p2-intro\"),m===2&&h===\"question\"&&n.jsxs(Oe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:\"max-w-md w-full space-y-6 relative z-10 flex flex-col h-[80vh]\",children:[n.jsxs(\"div\",{className:\"space-y-2 text-center shrink-0\",children:[n.jsx(\"div\",{className:\"text-[10px] font-black text-orange-500 uppercase tracking-[0.4em] mb-1\",children:\"Alert: High-Interest Detection\"}),n.jsx(\"h2\",{className:\"text-2xl font-black text-white tracking-tight uppercase\",children:\"Identify High-Interest Debt\"}),n.jsx(\"p\",{className:\"text-slate-500 text-xs font-bold leading-relaxed\",children:\"List liabilities (Credit Cards, Personal Loans) with interest above 10%.\"})]}),n.jsxs(\"div\",{className:\"space-y-3 bg-white/5 p-4 rounded-3xl border border-white/5 shrink-0\",children:[n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-2\",children:[n.jsx(\"input\",{placeholder:\"Name (e.g. ICICI CC)\",className:\"bg-black/50 border border-white/10 p-3 rounded-xl text-xs font-bold focus:border-orange-500 outline-none transition-colors\",value:N.name,onChange:ye=>M({...N,name:ye.target.value})}),n.jsx(\"input\",{type:\"number\",placeholder:\"Amount\",className:\"bg-black/50 border border-white/10 p-3 rounded-xl text-xs font-bold focus:border-orange-500 outline-none transition-colors\",value:N.amount,onChange:ye=>M({...N,amount:ye.target.value})})]}),n.jsxs(\"div\",{className:\"flex gap-2\",children:[n.jsx(\"input\",{type:\"number\",placeholder:\"Interest % (e.g. 14)\",className:\"flex-1 bg-black/50 border border-white/10 p-3 rounded-xl text-xs font-bold focus:border-orange-500 outline-none transition-colors\",value:N.interest,onChange:ye=>M({...N,interest:ye.target.value})}),n.jsx(\"button\",{onClick:V,className:\"px-6 bg-orange-500 hover:bg-orange-400 text-black rounded-xl p-3 transition-colors shrink-0\",\"aria-label\":\"Add liability\",children:n.jsx(Nl,{className:\"w-5 h-5\"})})]})]}),n.jsxs(\"div\",{className:\"flex-1 overflow-y-auto space-y-2 py-2 pr-1 custom-scrollbar\",children:[v.map((ye,Se)=>n.jsxs(Oe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:\"flex items-center justify-between p-4 bg-slate-900/40 border border-white/5 rounded-2xl group\",children:[n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-xs font-black uppercase text-white\",children:ye.name}),n.jsxs(\"p\",{className:\"text-[10px] font-bold text-slate-500 uppercase\",children:[\"₹\",ye.amount,\" @ \",ye.interest,\"%\"]})]}),n.jsx(\"button\",{onClick:()=>S(Se),className:\"text-slate-600 hover:text-rose-500 transition-colors\",\"aria-label\":\"Remove liability\",children:n.jsx(Ai,{className:\"w-4 h-4\"})})]},Se)),v.length===0&&n.jsx(\"div\",{className:\"h-20 flex items-center justify-center border border-dashed border-white/5 rounded-2xl\",children:n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold uppercase tracking-widest\",children:\"No leaks added yet\"})})]}),n.jsxs(\"div\",{className:\"pt-4 shrink-0 flex gap-3\",children:[n.jsx(\"button\",{onClick:()=>y(\"completion\"),className:\"flex-1 py-4 text-slate-500 font-black uppercase text-xs tracking-widest hover:text-white transition-colors\",children:\"Skip (No High Debt)\"}),n.jsx(\"button\",{onClick:se,disabled:v.length===0||p,className:\"flex-1 py-4 bg-orange-500 text-black font-black uppercase text-xs tracking-widest rounded-2xl disabled:opacity-50 hover:bg-orange-400 transition-all shadow-lg shadow-orange-500/20\",children:\"Patch Leaks\"})]})]},\"p2-question\"),m===2&&h===\"completion\"&&n.jsxs(Oe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:\"max-w-md w-full text-center space-y-8 relative z-10\",children:[n.jsx(\"div\",{className:\"w-20 h-20 bg-rose-500/10 border border-rose-500/20 rounded-[28px] flex items-center justify-center mx-auto mb-6\",children:n.jsx(qh,{className:\"w-10 h-10 text-rose-400\"})}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(\"h2\",{className:\"text-3xl font-black text-white tracking-tight leading-tight uppercase\",children:\"Analysis Complete\"}),n.jsxs(\"p\",{className:\"text-slate-400 text-lg font-medium leading-relaxed leading-relaxed\",children:[\"Found them. Paying these off isn't an expense—it's a \",n.jsx(\"span\",{className:\"text-rose-400\",children:\"guaranteed profit\"}),\". We'll tackle these before we scale your investments.\"]})]}),n.jsx(\"button\",{onClick:he,className:\"w-full py-5 bg-orange-500 text-black font-black uppercase tracking-[0.2em] rounded-24 hover:bg-orange-400 transition-all duration-500 shadow-xl shadow-orange-500/20\",children:\"Initialize Phase 3\"})]},\"p2-comp\"),m===3&&h===\"intro\"&&n.jsxs(Oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:\"max-w-md w-full text-center space-y-8 relative z-10\",children:[n.jsx(\"div\",{className:\"w-20 h-20 bg-purple-500/10 border border-purple-500/20 rounded-[28px] flex items-center justify-center mx-auto mb-6 shadow-2xl shadow-purple-500/20\",children:n.jsx(bn,{className:\"w-10 h-10 text-purple-400\"})}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"h1\",{className:\"text-4xl font-black text-white tracking-tight leading-tight uppercase\",children:[\"Growth \",n.jsx(\"span\",{className:\"text-purple-400\",children:\"Zone\"})]}),n.jsx(\"p\",{className:\"text-slate-400 text-lg font-medium leading-relaxed\",children:\"Your foundation is set. Now, what does freedom look like for you?\"})]}),n.jsxs(\"div\",{className:\"flex flex-col gap-3 w-full\",children:[n.jsxs(\"button\",{onClick:()=>y(\"question\"),className:\"group py-5 bg-white text-black font-black uppercase tracking-[0.2em] rounded-24 flex items-center justify-center gap-3 hover:bg-purple-400 transition-all duration-500\",children:[\"Set Target \",n.jsx(xn,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]}),n.jsx(\"button\",{onClick:()=>L(!0),className:\"py-3 text-slate-500 font-bold uppercase tracking-widest text-[10px] hover:text-purple-400 transition-colors\",children:\"View Sample Node\"})]})]},\"p3-intro\"),m===3&&h===\"question\"&&n.jsxs(Oe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:\"max-w-md w-full space-y-8 relative z-10\",children:[n.jsxs(\"div\",{className:\"space-y-4 text-center\",children:[n.jsx(\"div\",{className:\"text-[10px] font-black text-purple-500 uppercase tracking-[0.4em] mb-2\",children:\"Protocol: Freedom Metric\"}),n.jsx(\"h2\",{className:\"text-3xl font-black text-white tracking-tight leading-tight uppercase\",children:\"Target Monthly Passive Income\"}),n.jsx(\"p\",{className:\"text-slate-500 font-bold text-sm leading-relaxed\",children:\"This sets the baseline for your Freedom Meter. Every rupee you save now will be measured in Time.\"})]}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"div\",{className:\"relative\",children:[n.jsx(\"span\",{className:\"absolute left-6 top-1/2 -translate-y-1/2 text-2xl font-black text-slate-700\",children:\"₹\"}),n.jsx(\"input\",{type:\"number\",placeholder:\"50,000\",className:\"w-full bg-slate-900/50 border border-white/5 p-8 pl-12 rounded-[32px] text-4xl font-black text-white outline-none focus:border-purple-500/50 transition-all tabular-nums\",value:O,onChange:ye=>B(ye.target.value)})]}),n.jsx(\"button\",{onClick:ve,disabled:!O||p,className:\"w-full py-5 bg-purple-500 text-black font-black uppercase tracking-[0.2em] rounded-24 hover:bg-purple-400 transition-all duration-500 shadow-xl shadow-purple-500/20 disabled:opacity-50\",children:\"Lock Horizon\"})]})]},\"p3-question\"),m===3&&h===\"completion\"&&n.jsxs(Oe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:\"max-w-md w-full text-center space-y-8 relative z-10\",children:[n.jsx(\"div\",{className:\"w-20 h-20 bg-amber-500/10 border border-amber-500/20 rounded-[28px] flex items-center justify-center mx-auto mb-6\",children:n.jsx(W0,{className:\"w-10 h-10 text-amber-400\"})}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(\"h2\",{className:\"text-3xl font-black text-white tracking-tight leading-tight uppercase\",children:\"Target Locked\"}),n.jsxs(\"p\",{className:\"text-slate-400 text-lg font-medium leading-relaxed leading-relaxed\",children:[\"Welcome to the cockpit. Every rupee you save now will be measured in \",n.jsx(\"span\",{className:\"text-amber-400\",children:\"Time\"}),\", not just numbers.\"]})]}),n.jsx(\"button\",{onClick:fe,className:\"w-full py-5 bg-amber-500 text-black font-black uppercase tracking-[0.2em] rounded-24 hover:bg-amber-400 transition-all duration-500 shadow-xl shadow-amber-500/20\",children:\"Launch Terminal\"})]},\"p3-comp\")]})]})},NN=A.lazy(()=>Us(()=>import(\"./Dashboard-77mHvodX.js\"),__vite__mapDeps([0,1,2,3,4,5,6,7])).then(i=>({default:i.Dashboard}))),SN=A.lazy(()=>Us(()=>import(\"./TransactionList-C9g51JND.js\"),__vite__mapDeps([8,1,2,4,7,6])).then(i=>({default:i.TransactionList}))),AN=A.lazy(()=>Us(()=>import(\"./GoalsTracker-CDWKNqoN.js\"),__vite__mapDeps([9,1,2,7,6])).then(i=>({default:i.GoalsTracker}))),DN=A.lazy(()=>Us(()=>import(\"./EmergencyFundsTab-VfBln1SL.js\"),__vite__mapDeps([10,1,2,7,6])).then(i=>({default:i.EmergencyFundsTab}))),TN=A.lazy(()=>Us(()=>import(\"./InvestmentsTab-7b7ZOF_8.js\"),__vite__mapDeps([11,1,2,3,4,12,6,7])).then(i=>({default:i.InvestmentsTab}))),kN=A.lazy(()=>Us(()=>import(\"./LiabilityTab-Cihd-oaZ.js\"),__vite__mapDeps([13,1,2,7,6])).then(i=>({default:i.LiabilityTab}))),CN=A.lazy(()=>Us(()=>import(\"./LiabilityDashboard-BEre0Oy9.js\"),__vite__mapDeps([14,1,2,5,12,7,6])).then(i=>({default:i.LiabilityDashboard})));function EN(){const{settings:i,expenses:r,incomes:c,debts:u,goals:m,accounts:g,liabilities:h,notifications:y,emergencyFundAmount:p,investments:x,isLoading:v,refreshData:f,updateSettings:N,userId:M,createExpense:O,updateExpense:B,deleteExpense:L,createIncome:R,updateIncome:P,deleteIncome:V,createDebt:S,updateDebt:se,deleteDebt:he,settleDebt:ve,createGoal:fe,updateGoal:ye,deleteGoal:Se,createAccount:qe,updateAccount:Te,deleteAccount:ee,setEmergencyFundAmount:me,setNotifications:G,isFundAllocationOpen:C,fundAllocationType:Y,closeFundAllocation:oe,performFundAllocation:ge,transferFunds:z,authStatus:T,isOffline:re,authMessage:$,backfillRequest:le,setBackfillRequest:ue,executeBackfill:Ne,createRecurring:je}=Di(),[de,xe]=A.useState(\"dashboard\"),[Ke,Ie]=A.useState(!1),[Ve,rt]=A.useState(\"expense\"),[De,tt]=A.useState(null),[St,mt]=A.useState(!1),[zt,ut]=A.useState(!1),[bt,la]=A.useState(!1),[ce,Ee]=A.useState(null),[He,yt]=A.useState(!1),[Ut,Oa]=A.useState(!1),[_a,ba]=A.useState(!1),[ma,ja]=A.useState(!1),[It]=A.useState(null);A.useEffect(()=>gN(()=>ut(!0),()=>la(!0)),[]),A.useEffect(()=>{i.theme===\"dark\"?document.documentElement.classList.add(\"dark\"):document.documentElement.classList.remove(\"dark\")},[i.theme]);const{openFundAllocation:Na}=Di();A.useEffect(()=>{window.showFundAllocation=Na},[Na]);const{currentMonthExpenses:Gt}=A.useMemo(()=>{const ie=new Date,Le=ie.getMonth(),ft=ie.getFullYear();return{currentMonthExpenses:r.filter(Mt=>!Mt.isInternalTransfer).filter(Mt=>{const Ct=new Date(Mt.date);return Ct.getMonth()===Le&&Ct.getFullYear()===ft})}},[r]),kt=A.useMemo(()=>{const ie=c.reduce(($a,na)=>$a+na.amount,0),Le=r.reduce(($a,na)=>$a+na.amount,0),ft=u.reduce(($a,na)=>$a+na.amount,0);if(ie===0&&ft===0)return{score:50,savingsRate:0,debtRatio:0,spendingRatio:0};const at=[...c,...r,...u];let Bt=1;if(at.length>0){const $a=at.map(fs=>new Date(fs.date).getTime()),na=new Date(Math.min(...$a)),sa=Math.abs(new Date().getTime()-na.getTime()),dn=Math.ceil(sa/(1e3*60*60*24*30));Bt=Math.max(1,dn)}const Ct=ie/Bt*12,ht=ie>0?(ie-Le)/ie:0,Yt=ie>0?Le/ie:0,Rt=Ct>0?ft/Ct:ft>0?1/0:0;let Ye=50;return ht>=.4?Ye+=30:ht>=.2?Ye+=20:ht>=.1?Ye+=10:ht>0?Ye+=5:Ye-=20,Rt===0?Ye+=20:Rt<=.3?Ye+=10:Rt<=.6?Ye-=10:Rt<=1?Ye-=30:Ye-=50,Yt<=.5?Ye+=20:Yt<=.7?Ye+=10:Yt<=.9?Ye+=0:Ye-=10,{score:Math.max(0,Math.min(100,Math.round(Ye))),savingsRate:ht,debtRatio:Rt,spendingRatio:Yt}},[c,r,u]),dt=A.useMemo(()=>({totalIncome:c.reduce((ie,Le)=>ie+Le.amount,0),totalExpenses:r.reduce((ie,Le)=>ie+Le.amount,0),activeDebts:u.filter(ie=>ie.status===\"pending\").length,goalsCount:m.length,recentTransactions:[...r.slice(0,5).map(ie=>({type:\"expense\",...ie})),...c.slice(0,5).map(ie=>({type:\"income\",...ie}))],expenses:r,incomes:c,accounts:g,investments:x,liabilities:h,goals:m,debts:u,currentMonthExpenses:Gt,savingsRate:kt.savingsRate,healthScore:kt.score,brainSummary:qj({investments:x,accounts:g,healthScore:kt.score,savingsRate:kt.savingsRate,totalIncome:c.reduce((ie,Le)=>ie+Le.amount,0),totalExpenses:r.reduce((ie,Le)=>ie+Le.amount,0),activeDebts:u.filter(ie=>ie.status===\"pending\").length,goalsCount:m.length},i.currency,de)}),[c,r,u,m,kt.savingsRate,kt.score,g,x,h,Gt,i.currency,de]),ds=A.useMemo(()=>c.reduce((ie,Le)=>ie+Le.amount,0),[c]);if(v)return n.jsx(H0,{});const Sa=async()=>{await f()},Aa=ie=>{rt(ie),tt(null),Ie(!0)},un=ie=>{rt(\"expense\"),tt(ie),Ie(!0)},nn=ie=>{rt(\"income\"),tt(ie),Ie(!0)},Fa=ie=>{rt(\"debt\"),tt(ie),Ie(!0)},Da=ie=>{De?Ve===\"expense\"?B(De.id,ie):Ve===\"income\"?P(De.id,ie):Ve===\"debt\"&&se(De.id,ie):Ve===\"expense\"?(O(ie),ie.roundUpAmount&&Ue(m.length>0?m[0].id:\"general\",\"goal\",void 0,ie.roundUpAmount,ie.accountId)):Ve===\"income\"?R(ie):Ve===\"debt\"&&S(ie)},Ue=async(ie,Le,ft,at,Bt)=>{if(!at&&!It)return;const Mt=at||(It?It.roundedAmount-It.expenseAmount:0),Ct=Bt||(It?It.accountId:\"\"),ht=g.find(Yt=>Yt.id===Ct);if(ht&&await Te(ht.id,{balance:ht.balance-Mt}),Le===\"goal\"){const Yt=m.find(Rt=>Rt.id===ie);if(Yt)await ye(ie,{currentAmount:Yt.currentAmount+Mt}),J.success(`Saved ${cn[i.currency]}${Mt} to ${Yt.name}!`);else{const Rt=m.find(Ye=>Ye.name===\"General Savings\");if(Rt)await ye(Rt.id,{currentAmount:Rt.currentAmount+Mt}),J.success(`Saved ${cn[i.currency]}${Mt} to General Savings!`);else{const Ye={name:\"General Savings\",targetAmount:1e4,currentAmount:Mt,targetDate:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString(),emoji:\"🐷\"};fe(Ye),J.success(`Created \"General Savings\" and saved ${cn[i.currency]}${Mt}!`)}}}else me(Yt=>Yt+Mt),J.success(`Saved ${cn[i.currency]}${Mt} to Emergency Fund!`);ja(!1),ji({particleCount:50,spread:60,origin:{y:.7}})},wt=ie=>{const Le={today:1,week:7,month:30},ft=new Date;ft.setDate(ft.getDate()+Le[ie]),localStorage.setItem(\"roundUpMutedUntil\",ft.toISOString()),ja(!1),J.info(`Round ups muted for ${ie===\"today\"?\"today\":ie===\"week\"?\"a week\":\"a month\"}`)};return n.jsxs(n.Fragment,{children:[n.jsx(Bn,{mode:\"wait\",children:(T===\"guest\"||T===\"authenticating\")&&n.jsx(Oe.div,{className:\"fixed inset-0 z-0\",exit:{opacity:0,scale:.95,filter:\"blur(20px)\"},transition:{duration:.8},children:n.jsx(vN,{})},\"login-container\")}),n.jsx(Bn,{children:T===\"authenticating\"&&n.jsx(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4},className:\"fixed inset-0 z-50\",children:n.jsx(H0,{message:$?.message,subMessage:$?.subMessage})},\"loading-sprite\")}),n.jsxs(Bn,{mode:\"wait\",children:[T===\"authenticated\"&&(!i.onboardingPhase||i.onboardingPhase<3)&&!i.isSampleMode&&n.jsx(jN,{}),T===\"authenticated\"&&((i.onboardingPhase??0)>=3||i.isSampleMode)&&n.jsx(Oe.div,{className:\"relative z-10\",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.8,ease:[.16,1,.3,1]},children:n.jsxs(\"div\",{className:\"min-h-screen bg-transparent text-foreground transition-colors font-sans\",children:[n.jsx(hj,{activeTab:de,onTabChange:ie=>xe(ie),notificationCount:y.filter(ie=>!ie.read).length,onNotificationClick:()=>la(!bt),onSettingsClick:()=>ut(!zt),forceHide:He,renderFab:ie=>n.jsx(xN,{isVisible:ie&&!zt&&!bt&&!He,onOpenAI:()=>mt(!0),onAddTransaction:Aa,onMigrate:()=>Oa(!0)}),children:n.jsx(hN,{onRefresh:Sa,children:n.jsx(yN,{children:n.jsxs(A.Suspense,{fallback:n.jsxs(\"div\",{className:\"space-y-6 pt-12\",children:[n.jsx(pN,{}),n.jsx(\"p\",{className:\"text-center text-slate-500 text-sm\",children:\"Loading Component...\"})]}),children:[de===\"dashboard\"&&n.jsx(\"div\",{className:\"space-y-6\",children:n.jsx(NN,{expenses:r,incomes:c,currency:i.currency,goals:m,liabilities:h,debts:u,investments:x,accounts:g,emergencyFundAmount:p,healthScore:kt.score,userName:i.name,isOffline:re,isSampleMode:i.isSampleMode,onResumeOnboarding:()=>N({isSampleMode:!1})})}),de===\"transactions\"&&n.jsx(SN,{expenses:r,incomes:c,debts:u,accounts:g,currency:i.currency,onEditExpense:un,onDeleteExpense:L,onEditIncome:nn,onDeleteIncome:V,onEditDebt:Fa,onDeleteDebt:he,onSettleDebt:ve}),de===\"goals\"&&n.jsx(AN,{goals:m,currency:i.currency,accounts:g,expenses:r,incomes:c,onCreateGoal:fe,onUpdateGoal:ye,onDeleteGoal:Se,onDeductFromAccount:async(ie,Le)=>{const ft=g.find(at=>at.id===ie);ft&&await Te(ie,{balance:ft.balance-Le})}}),de===\"accounts\"&&n.jsx(fN,{accounts:g,currency:i.currency,onCreateAccount:qe,onUpdateAccount:Te,onDeleteAccount:ee}),de===\"investments\"&&n.jsx(TN,{}),de===\"emergency\"&&n.jsx(DN,{currency:i.currency,userId:M,expenses:r,incomes:c,accounts:g,onEmergencyFundUpdate:ie=>me(ie)}),de===\"liability\"&&n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsx(CN,{liabilities:h,currency:i.currency,totalMonthlyIncome:ds}),n.jsx(kN,{currency:i.currency,expenses:r,accounts:g})]}),de===\"recurring\"&&n.jsx(dj,{}),de===\"more\"&&n.jsx(sN,{onNavigate:ie=>xe(ie),onOpenSettings:()=>ut(!0),onOpenNotifications:()=>la(!0),emergencyFundAmount:p,bankAccountsCount:g.filter(ie=>ie.type===\"bank\").length,cardsCount:g.filter(ie=>ie.type===\"credit_card\").length,currency:i.currency,onOpenAbout:()=>ba(!0)})]})})})}),n.jsx(xj,{isOpen:Ke,onClose:()=>{Ie(!1),tt(null)},type:Ve,onSubmit:Da,initialData:De,accounts:g,currency:i.currency,roundUpEnabled:i.roundUpEnabled}),It&&n.jsx(bj,{isOpen:ma,onClose:()=>ja(!1),onConfirm:Ue,expenseAmount:It.expenseAmount,roundedAmount:It.roundedAmount,currency:i.currency,goals:m,onMute:wt}),n.jsx(bN,{isOpen:St,onClose:()=>mt(!1),context:dt,settings:i,isOffline:re}),n.jsx(nN,{isOpen:zt,onClose:()=>ut(!1),settings:i,onUpdateSettings:N,onAchievementClick:ie=>{Ee(ie),yt(!0),ut(!1)},onOpenAbout:()=>ba(!0)}),n.jsx(rN,{isOpen:bt,onClose:()=>la(!1),notifications:y,onNotificationClick:async ie=>{if(ie.achievementId&&(Ee(ie.achievementId),yt(!0)),ie.action&&ie.action.type===\"verify_subscription\"&&ie.action.status===\"completed\"){const{description:Le,amount:ft,category:at,accountId:Bt,date:Mt}=ie.action.payload;try{await je({type:\"expense\",description:Le,amount:ft,category:at,accountId:Bt,frequency:\"monthly\",startDate:Mt||new Date().toISOString().split(\"T\")[0],tags:[\"auto-verified\",\"subscription\"]}),J.success(`Verified: ${Le} is now a recurring subscription.`),G(Ct=>Ct.map(ht=>ht.id===ie.id?{...ht,read:!0}:ht))}catch{J.error(\"Failed to automate subscription.\")}}else ie.action&&ie.action.status===\"dismissed\"&&(J.info(\"Marked as one-time purchase.\"),G(Le=>Le.map(ft=>ft.id===ie.id?{...ft,read:!0}:ft)));ie.action||la(!1)},onMarkAsRead:ie=>{G(Le=>Le.map(ft=>ft.id===ie?{...ft,read:!0}:ft))},onClearRead:()=>{G(ie=>ie.filter(Le=>!Le.read)),J.success(\"Read notifications cleared\")}}),n.jsx(oN,{isOpen:He,onClose:()=>{yt(!1),Ee(null)},achievementId:ce}),n.jsx(uN,{isOpen:C,onClose:oe,accounts:g,goals:m,currency:i.currency,destinationType:Y,emergencyFund:{currentAmount:p,targetAmount:1e5},onAllocate:ge,liabilities:h,expenses:r}),n.jsx(mN,{isOpen:Ut,onClose:()=>Oa(!1),accounts:g,currency:i.currency,onTransfer:z}),n.jsx(wN,{isOpen:_a,onClose:()=>ba(!1)})]})},\"main-app\")]}),le&&n.jsx(Jp,{open:!0,onOpenChange:()=>ue(null),children:n.jsxs(Wp,{className:\"bg-slate-900/95 border-white/10 text-slate-100 z-[99999999] backdrop-blur-xl\",children:[n.jsxs(eg,{children:[n.jsx(ag,{className:\"text-white text-xl font-bold font-sans\",children:\"Backfill Configuration Required\"}),n.jsxs(ng,{className:\"text-slate-400 text-base\",children:[\"System detected \",n.jsxs(\"span\",{className:\"text-emerald-400 font-bold\",children:[le.count,\" missing entries\"]}),\" in the transaction history from \",n.jsx(\"span\",{className:\"text-white font-medium\",children:le.dates[0]?.toLocaleDateString(\"en-IN\",{day:\"numeric\",month:\"short\",year:\"numeric\"})}),\"to \",n.jsx(\"span\",{className:\"text-white font-medium\",children:le.dates[le.dates.length-1]?.toLocaleDateString(\"en-IN\",{day:\"numeric\",month:\"short\",year:\"numeric\"})}),\".\",n.jsx(\"br\",{}),n.jsx(\"br\",{}),\"Would you like to auto-populate the ledger for this period?\"]})]}),n.jsxs(tg,{className:\"mt-4\",children:[n.jsx(ig,{onClick:()=>ue(null),className:\"bg-white/5 border-white/5 text-slate-400 hover:text-white hover:bg-white/10 rounded-xl h-12 uppercase tracking-wider text-xs font-bold\",children:\"Cancel\"}),n.jsx(sg,{onClick:()=>{Ne(),ue(null)},className:\"bg-indigo-600 hover:bg-indigo-500 text-white border-0 font-bold rounded-xl h-12 px-8 shadow-lg shadow-indigo-600/20\",children:\"Generate Ledger\"})]})]})}),n.jsx(t1,{position:\"bottom-center\",richColors:!0,theme:\"dark\",toastOptions:{style:{background:\"#1C1C1E\",border:\"1px solid rgba(255, 255, 255, 0.1)\",color:\"#FFFFFF\",borderRadius:\"20px\",backdropFilter:\"none\",zIndex:999999}},className:\"!z-[999999]\"})]})}function MN({children:i,...r}){return n.jsx(Nj,{...r,children:i})}vv.createRoot(document.getElementById(\"root\")).render(n.jsx(r1,{children:n.jsx(MN,{attribute:\"class\",defaultTheme:\"dark\",forcedTheme:\"dark\",children:n.jsx(EN,{})})}));export{Bn as A,Ge as B,bl as C,Bs as D,Pt as I,Re as L,Fp as M,Os as N,ha as S,BN as a,V1 as b,Ku as c,yp as d,aa as e,$e as f,ct as g,Ls as h,gj as i,qs as j,Is as k,Vs as l,Oe as m,ga as n,pa as o,xa as p,vt as q,ku as r,Di as s,J as t,cN as u,LN as v,UN as w};"
      },
      {
        "file": "dist_test\\assets\\index-DHabN7TV.js",
        "line": 59,
        "snippet": "`.trim();return await lg(g,h,x,u)},tN=async(i,r)=>await lg(i,r,\"Respond with only the word 'OK' to verify connectivity.\",\"ASSISTANT\"),aN=i=>{if(i.aiProvider&&Dl(i.aiProvider,i))return i.aiProvider;const r=[\"openai\",\"anthropic\",\"gemini\",\"deepseek\",\"perplexity\"];for(const c of r)if(Dl(c,i))return c;return null},q0={BASE_URL:\"/\",DEV:!1,MODE:\"production\",PROD:!0,SSR:!1},nN=({isOpen:i,onClose:r,settings:c,onUpdateSettings:u,onAchievementClick:m,onOpenAbout:g})=>{const[h,y]=A.useState(c.name||\"\"),[p,x]=A.useState(c.photoURL||\"\"),[v,f]=A.useState(!1),[N,M]=A.useState(null),[O,B]=A.useState({}),[L,R]=A.useState(!1),{logout:P,scheduleAccountDeletion:V,migrateSubscriptions:S,cleanupDuplicates:se,clearAllData:he}=Di(),[ve,fe]=A.useState(!1),ye=async()=>{R(!0);try{await S()}catch(ce){console.error(\"Migration failed:\",ce),J.error(\"Migration failed\")}finally{R(!1)}},[Se,qe]=A.useState(\"USD\"),[Te,ee]=A.useState(\"100\"),[me,G]=A.useState(\"100000\"),[C,Y]=A.useState(\"10\"),[oe,ge]=A.useState(\"6\"),[z,T]=A.useState(!1),re=async()=>{const Ee={USD:\"US\",INR:\"IN\",GBP:\"GB\",EUR:\"EMU\",AED:\"AE\",SAR:\"SA\"}[c.currency]||\"US\";T(!0);try{const yt=await(await fetch(`https://api.worldbank.org/v2/country/${Ee}/indicator/FP.CPI.TOTL.ZG?format=json&per_page=1`)).json();if(yt&&yt[1]&&yt[1][0]&&yt[1][0].value){const Ut=yt[1][0].value;ge(Ut.toFixed(2)),J.success(`Inflation rate synced for ${c.currency}`)}}catch(He){console.error(\"Inflation sync failed:\",He),J.error(\"Failed to sync inflation rate.\")}finally{T(!1)}},$=Array.from({length:(parseInt(C)||0)+1},(ce,Ee)=>{const He=parseFloat(me)||0,yt=parseFloat(oe)||0,Ut=He*Math.pow(1+yt/100,Ee),Oa=He/Math.pow(1+yt/100,Ee);return{year:Ee,futureCost:Math.round(Ut),purchasingPower:Math.round(Oa)}}),le=[\"INR\",\"USD\",\"EUR\",\"GBP\",\"AED\",\"SAR\"],ue=c.currency;A.useEffect(()=>{y(c.name||\"\"),x(c.photoURL||\"\")},[c]),A.useEffect(()=>{i&&Ne()},[i,Se]);const Ne=async()=>{try{const Ee=await(await fetch(`https://api.exchangerate-api.com/v4/latest/${Se}`)).json();B(Ee.rates||{}),Te&&je(Te,Ee.rates)}catch(ce){console.error(\"Error loading exchange rates:\",ce)}},je=(ce,Ee)=>{const He=parseFloat(ce);if(!isNaN(He)&&He>0){const Ut=(Ee||O)[ue]||1;M(He*Ut)}else M(null)},de=ce=>{ee(ce),je(ce)},{setTheme:xe}=jj();A.useEffect(()=>{c.theme!==\"dark\"&&(xe(\"dark\"),u({theme:\"dark\"}))},[]);const Ke=()=>{u({name:h,photoURL:p}),f(!1)},Ie=ce=>{const Ee=ce.target.files?.[0];if(Ee){const He=new FileReader;He.onloadend=()=>{x(He.result)},He.readAsDataURL(Ee)}},Ve=n1(),rt=new Set(c.unlockedAchievements),De=c.aiProvider||\"openai\",tt=[{id:\"openai\",label:\"OpenAI\",placeholder:\"sk-...\"},{id:\"anthropic\",label:\"Anthropic\",placeholder:\"sk-ant-...\"},{id:\"gemini\",label:\"Gemini\",placeholder:\"AIza...\"},{id:\"deepseek\",label:\"Deepseek\",placeholder:\"sk-...\"},{id:\"perplexity\",label:\"Perplexity\",placeholder:\"pplx-...\"}],[St,mt]=A.useState(!1),[zt,ut]=A.useState(null),bt=A.useCallback((ce,Ee)=>{u({[ce]:Ee})},[u]),la=async()=>{const ce=Dl(De,c);if(!ce){J.error(\"No API key found in Settings or System Environment\");return}mt(!0),ut(null);try{const Ee=await tN(De,ce);Ee.error?(ut({success:!1,message:Ee.error}),J.error(`Connection failed: ${Ee.error}`)):(ut({success:!0,message:\"Neural link established.\"}),J.success(\"Connection successful!\"))}catch(Ee){const He=Ee.message||\"Unknown protocol error\";ut({success:!1,message:He}),J.error(`Protocol breach: ${He}`)}finally{mt(!1)}};return n.jsx(Xp,{open:i,onOpenChange:r,children:n.jsxs(Qp,{side:\"left\",className:\"w-full sm:max-w-lg overflow-y-auto px-0 bg-slate-950 border-white/5 text-slate-100 h-dvh\",children:[n.jsx(Zp,{className:\"sr-only\",children:\"Settings\"}),n.jsx(Kp,{className:\"sr-only\",children:\"Customize your FinHub core experience.\"}),n.jsxs(\"div\",{className:\"space-y-12 animate-in fade-in slide-in-from-left-4 duration-500 px-8 pt-12 pb-10 text-white relative\",children:[n.jsx(\"div\",{className:\"absolute top-4 right-4 z-20\",children:n.jsx(Ge,{variant:\"ghost\",size:\"icon\",onClick:r,className:\"w-10 h-10 rounded-full bg-white/5 text-slate-400 hover:text-white hover:bg-white/10\",children:n.jsx(Tl,{className:\"w-5 h-5\"})})}),n.jsxs(\"div\",{className:\"flex flex-col gap-2\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-1.5 h-8 bg-indigo-500 rounded-full shadow-[0_0_15px_rgba(99,102,241,0.5)]\"}),n.jsx(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tight leading-none text-white\",children:\"System Config\"})]}),n.jsx(\"p\",{className:\"text-slate-500 font-bold ml-4 text-sm\",children:\"Customize your FinHub core experience.\"})]}),n.jsxs(\"div\",{className:\"space-y-10\",children:[n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"h3\",{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Mu,{className:\"w-3.5 h-3.5\"}),\"User Identity\"]}),n.jsx(Ge,{variant:\"ghost\",size:\"sm\",onClick:()=>f(!v),className:\"text-[10px] font-black uppercase tracking-widest text-indigo-400 hover:text-indigo-300 hover:bg-white/5\",children:v?\"Abort\":\"Refine\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-8 bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-indigo-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsxs(\"div\",{className:\"relative\",children:[p?n.jsx(\"img\",{src:p,alt:\"Profile\",className:\"w-24 h-24 rounded-full object-cover border-4 border-slate-800 shadow-2xl\"}):n.jsx(\"div\",{className:\"w-24 h-24 bg-gradient-to-br from-indigo-600 to-purple-700 rounded-full flex items-center justify-center shadow-2xl\",children:n.jsx(Mu,{className:\"w-12 h-12 text-white/90\"})}),v&&n.jsxs(\"label\",{className:\"absolute bottom-0 right-0 w-9 h-9 bg-indigo-600 rounded-full flex items-center justify-center cursor-pointer hover:bg-indigo-500 shadow-lg border-4 border-slate-900 transition-transform active:scale-90\",children:[n.jsx(ty,{className:\"w-4 h-4 text-white\"}),n.jsx(\"input\",{type:\"file\",accept:\"image/*\",className:\"hidden\",onChange:Ie,\"aria-label\":\"Upload profile picture\"})]})]}),n.jsx(\"div\",{className:\"flex-1 min-w-0\",children:v?n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(Re,{htmlFor:\"settings-profile-name\",className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Alias\"}),n.jsx(Pt,{id:\"settings-profile-name\",name:\"name\",placeholder:\"e.g. Maverick\",value:h,onChange:ce=>y(ce.target.value),className:\"bg-white/5 border-white/5 rounded-xl h-12 text-white placeholder:text-slate-700 font-bold\",autoComplete:\"name\"})]}),n.jsx(Ge,{size:\"sm\",onClick:Ke,className:\"w-full h-12 bg-indigo-600 hover:bg-indigo-500 text-white font-black rounded-xl\",children:\"Commit Identity\"})]}):n.jsxs(n.Fragment,{children:[n.jsx(\"h4\",{className:\"text-2xl font-black text-slate-100 tracking-tight\",children:h||\"Guest User\"}),n.jsx(\"p\",{className:\"text-xs text-slate-500 font-bold uppercase tracking-widest mt-1\",children:\"FinHub Node // 0x50.3\"})]})})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsx(\"div\",{className:\"space-y-4\",children:n.jsxs(\"button\",{onClick:()=>u({roundUpEnabled:!c.roundUpEnabled}),className:`w-full flex items-center justify-between p-6 rounded-[32px] border transition-all relative overflow-hidden group ${c.roundUpEnabled?\"bg-emerald-500/10 border-emerald-500/50 shadow-[0_0_20px_rgba(16,185,129,0.1)]\":\"bg-slate-900/40 border-white/5 grayscale opacity-60 hover:opacity-100 hover:grayscale-0\"}`,children:[n.jsx(\"div\",{className:`absolute top-0 right-0 w-24 h-24 blur-3xl opacity-10 -mr-12 -mt-12 transition-colors ${c.roundUpEnabled?\"bg-emerald-500\":\"bg-slate-500\"}`}),n.jsxs(\"div\",{className:\"space-y-1 relative z-10 flex-1 pr-4 text-left\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-2 text-sm font-black text-slate-100 uppercase tracking-tight\",children:[n.jsx(Si,{className:`w-4 h-4 ${c.roundUpEnabled?\"text-emerald-500\":\"text-slate-500\"}`}),\"Virtual Round-Ups\"]}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 font-bold leading-relaxed uppercase tracking-widest\",children:\"Build your fortress automatically via expense spillover.\"})]}),n.jsx(\"div\",{className:`relative z-10 px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${c.roundUpEnabled?\"bg-emerald-500 text-white shadow-lg shadow-emerald-500/20\":\"bg-slate-800 text-slate-500\"}`,children:c.roundUpEnabled?\"Active\":\"Offline\"})]})}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(Re,{htmlFor:\"settings-currency\",className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Lh,{className:\"w-3.5 h-3.5\"}),\"Standard Denomination\"]}),n.jsxs(\"div\",{className:\"bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-indigo-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsx(\"div\",{className:\"space-y-2 relative z-10\",children:n.jsxs(ha,{value:c.currency,onValueChange:ce=>u({currency:ce}),children:[n.jsx(ga,{id:\"settings-currency\",name:\"currency\",className:\"bg-white/5 border-white/5 rounded-2xl h-14 font-black\",children:n.jsx(pa,{})}),n.jsxs(xa,{className:\"bg-slate-900 border-white/10 text-white\",children:[n.jsx(vt,{value:\"USD\",children:\"USD ($) - US Dollar\"}),n.jsx(vt,{value:\"EUR\",children:\"EUR (€) - Euro\"}),n.jsx(vt,{value:\"GBP\",children:\"GBP (£) - British Pound\"}),n.jsx(vt,{value:\"INR\",children:\"INR (₹) - Indian Rupee\"}),n.jsx(vt,{value:\"AED\",children:\"AED (د.إ) - UAE Dirham\"}),n.jsx(vt,{value:\"SAR\",children:\"SAR (﷼) - Saudi Riyal\"})]})]})})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(Re,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Lh,{className:\"w-3.5 h-3.5\"}),\"Foreign Exchange Probe\"]}),n.jsxs(\"div\",{className:\"space-y-6 p-6 bg-slate-900/40 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-blue-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4 relative z-10\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(Re,{htmlFor:\"converter-from-currency\",className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Source\"}),n.jsxs(ha,{value:Se,onValueChange:ce=>{qe(ce)},children:[n.jsx(ga,{id:\"converter-from-currency\",name:\"fromCurrency\",className:\"bg-white/5 border-white/5 rounded-2xl h-12\",children:n.jsx(pa,{})}),n.jsx(xa,{className:\"bg-slate-900 border-white/10 text-white\",children:le.map(ce=>n.jsxs(vt,{value:ce,children:[cn[ce],\" \",ce]},ce))})]})]}),n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(Re,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Target\"}),n.jsxs(\"div\",{className:\"h-12 flex items-center justify-center bg-indigo-500/10 rounded-2xl border border-indigo-500/20 text-xs font-black text-indigo-400\",children:[cn[ue],\" \",ue]})]})]}),n.jsxs(\"div\",{className:\"space-y-1.5 relative z-10\",children:[n.jsx(Re,{htmlFor:\"converter-amount\",className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Capital Amount\"}),n.jsx(Pt,{id:\"converter-amount\",name:\"amount\",type:\"number\",placeholder:\"Enter amount\",value:Te,onChange:ce=>{const Ee=ce.target.value;parseFloat(Ee)<0||de(Ee)},min:\"0\",className:\"bg-white/5 border-white/5 rounded-2xl h-14 font-black text-lg\",autoComplete:\"off\"})]}),N!==null&&n.jsxs(\"div\",{className:\"p-6 bg-white/5 rounded-2xl border border-white/5 animate-in fade-in slide-in-from-top-2 relative z-10\",children:[n.jsx(\"p\",{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 mb-2\",children:\"Calculated Projection\"}),n.jsxs(\"div\",{className:\"flex items-baseline gap-2\",children:[n.jsxs(\"p\",{className:\"text-2xl font-black text-emerald-400 tabular-nums\",children:[cn[ue],N.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold uppercase tracking-widest\",children:\"ESTIMATED VALUATION\"})]}),O[ue]&&n.jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-white/5 flex items-center justify-between\",children:[n.jsx(\"span\",{className:\"text-[8px] font-black uppercase tracking-[0.2em] text-slate-700\",children:\"Protocol Rate\"}),n.jsxs(\"span\",{className:\"text-[10px] font-black text-slate-500 tabular-nums\",children:[\"1 \",Se,\" = \",O[ue].toFixed(4),\" \",ue]})]})]})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(Re,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Si,{className:\"w-3.5 h-3.5 text-rose-500\"}),\"Inflation Projection Node\"]}),n.jsxs(\"div\",{className:\"space-y-6 p-6 bg-slate-900/40 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-rose-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsxs(\"div\",{className:\"space-y-4 relative z-10\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(Re,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Current Capital\"}),n.jsx(Pt,{type:\"number\",value:me,onChange:ce=>G(ce.target.value),className:\"bg-white/5 border-white/5 rounded-2xl h-12 font-black\",placeholder:\"e.g. 1000000\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(Re,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Horizon (Years)\"}),n.jsx(Pt,{type:\"number\",value:C,onChange:ce=>Y(ce.target.value),className:\"bg-white/5 border-white/5 rounded-2xl h-12 font-black\"})]}),n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between ml-1\",children:[n.jsx(Re,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500\",children:\"Rate (%)\"}),n.jsxs(\"button\",{onClick:re,disabled:z,className:\"text-[8px] font-black uppercase text-indigo-400 hover:text-indigo-300 disabled:opacity-50 flex items-center gap-1\",children:[z?n.jsx(uu,{className:\"w-2 h-2 animate-spin\"}):n.jsx(ay,{className:\"w-2 h-2\"}),\"Sync\"]})]}),n.jsx(Pt,{type:\"number\",value:oe,onChange:ce=>ge(ce.target.value),className:\"bg-white/5 border-white/5 rounded-2xl h-12 font-black\"})]})]}),me&&n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(\"div\",{className:\"h-32 w-full bg-black/20 rounded-2xl p-2 border border-white/5 overflow-hidden\",children:n.jsx(fv,{width:\"100%\",height:\"100%\",minHeight:128,minWidth:100,children:n.jsxs(mv,{data:$,children:[n.jsxs(\"defs\",{children:[n.jsxs(\"linearGradient\",{id:\"colorCost\",x1:\"0\",y1:\"0\",x2:\"0\",y2:\"1\",children:[n.jsx(\"stop\",{offset:\"5%\",stopColor:\"#FB7185\",stopOpacity:.3}),n.jsx(\"stop\",{offset:\"95%\",stopColor:\"#FB7185\",stopOpacity:0})]}),n.jsxs(\"linearGradient\",{id:\"colorPower\",x1:\"0\",y1:\"0\",x2:\"0\",y2:\"1\",children:[n.jsx(\"stop\",{offset:\"5%\",stopColor:\"#34D399\",stopOpacity:.3}),n.jsx(\"stop\",{offset:\"95%\",stopColor:\"#34D399\",stopOpacity:0})]})]}),n.jsx(hv,{strokeDasharray:\"3 3\",vertical:!1,stroke:\"rgba(255,255,255,0.05)\"}),n.jsx(pv,{contentStyle:{backgroundColor:\"#0f172a\",border:\"1px solid rgba(255,255,255,0.1)\",borderRadius:\"8px\",fontSize:\"10px\"},itemStyle:{color:\"#fff\",padding:\"2px 0\"}}),n.jsx(Fh,{type:\"monotone\",dataKey:\"futureCost\",stroke:\"#FB7185\",fillOpacity:1,fill:\"url(#colorCost)\"}),n.jsx(Fh,{type:\"monotone\",dataKey:\"purchasingPower\",stroke:\"#34D399\",fillOpacity:1,fill:\"url(#colorPower)\"})]})})}),n.jsxs(\"div\",{className:\"p-6 bg-white/5 rounded-2xl border border-white/5 space-y-4\",children:[n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 mb-2\",children:\"Future Cost\"}),n.jsxs(\"p\",{className:\"text-xl font-black text-rose-400 tabular-nums\",children:[cn[c.currency],Math.round(parseFloat(me)*Math.pow(1+parseFloat(oe)/100,parseFloat(C))).toLocaleString()]})]}),n.jsxs(\"div\",{className:\"pt-4 border-t border-white/5\",children:[n.jsx(\"p\",{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 mb-2\",children:\"Real Purchasing Power\"}),n.jsxs(\"p\",{className:\"text-xl font-black text-emerald-400 tabular-nums\",children:[cn[c.currency],Math.round(parseFloat(me)/Math.pow(1+parseFloat(oe)/100,parseFloat(C))).toLocaleString()]}),n.jsx(\"p\",{className:\"text-[8px] text-slate-600 font-bold uppercase tracking-widest mt-1\",children:\"VALUATION IN TODAY'S MONEY\"})]})]})]})]})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(Re,{className:\"text-[10px] font-bold uppercase tracking-[0.2em] text-slate-500 flex items-center gap-2\",children:[n.jsx(ny,{className:\"w-3.5 h-3.5 text-indigo-400\"}),\"AI Assistant Config\"]}),n.jsxs(\"div\",{className:\"space-y-6 bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsxs(\"div\",{className:\"space-y-1.5 relative z-10\",children:[n.jsx(Re,{htmlFor:\"ai-provider-select\",className:\"text-[9px] font-bold uppercase tracking-widest text-slate-500 ml-1\",children:\"Preferred Provider\"}),n.jsxs(ha,{value:De,onValueChange:ce=>u({aiProvider:ce}),children:[n.jsx(ga,{id:\"ai-provider-select\",name:\"aiProvider\",className:\"bg-slate-900 border-white/5 rounded-xl h-11 text-[10px] font-bold uppercase tracking-widest\",children:n.jsx(pa,{})}),n.jsx(xa,{className:\"bg-slate-900 border-white/10 text-white\",children:tt.map(ce=>n.jsx(vt,{value:ce.id,className:\"text-[10px] font-bold uppercase tracking-widest\",children:ce.label},ce.id))})]})]}),n.jsxs(\"div\",{className:\"space-y-4 pt-2 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between px-1\",children:[n.jsx(Re,{className:\"text-[9px] font-bold uppercase tracking-widest text-slate-500\",children:\"Active Credential\"}),n.jsx(\"div\",{className:\"flex items-center gap-1.5\",children:n.jsx(\"span\",{className:\"text-[8px] font-bold text-indigo-400/70 uppercase tracking-tighter\",children:tt.find(ce=>ce.id===De)?.label})})]}),tt.filter(ce=>ce.id===De).map(ce=>{const Ee=c.apiKeys?.[ce.id],He=`VITE_${ce.id.toUpperCase()}_API_KEY`,yt=!!q0[He];return n.jsxs(\"div\",{className:\"flex items-center gap-3 bg-indigo-500/5 p-4 rounded-2xl border border-indigo-500/20 group/active transition-all\",children:[n.jsx(\"div\",{className:\"flex-1 min-w-0\",children:n.jsxs(\"div\",{className:\"relative group/input\",children:[n.jsx(Pt,{type:\"password\",value:Ee||\"\",onChange:Ut=>bt(\"apiKeys\",{...c.apiKeys,[ce.id]:Ut.target.value}),placeholder:yt?\"Using System Environment Key\":`Enter ${ce.label} Key`,className:`bg-transparent border-none p-0 h-auto text-sm font-bold text-white placeholder:text-slate-700 focus-visible:ring-0 shadow-none ${yt&&!Ee?\"opacity-40 italic font-medium\":\"\"}`,disabled:yt&&!Ee}),yt&&!Ee&&n.jsx(\"div\",{className:\"flex items-center gap-1 mt-1\",children:n.jsx(\"span\",{className:\"text-[7px] font-black text-emerald-500 uppercase tracking-widest bg-emerald-500/10 px-1 py-0.5 rounded\",children:\"System Linked\"})})]})}),Ee&&n.jsx(\"button\",{onClick:()=>bt(\"apiKeys\",{...c.apiKeys,[ce.id]:\"\"}),className:\"text-slate-600 hover:text-rose-500 transition-colors p-1\",title:\"Clear saved key\",\"aria-label\":`Clear saved key for ${ce.label}`,children:n.jsx(Ai,{className:\"w-3.5 h-3.5\"})})]},ce.id)}),n.jsx(Ge,{onClick:la,disabled:St||!Dl(De,c),className:`w-full h-11 transition-all font-bold uppercase tracking-[0.2em] text-[10px] rounded-xl ${zt?.success?\"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20\":zt?.success===!1?\"bg-rose-500/10 text-rose-400 border border-rose-500/20\":\"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20\"}`,children:St?n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(uu,{className:\"w-3.5 h-3.5 animate-spin\"}),\"Verifying...\"]}):zt?.success?n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(Sl,{className:\"w-3.5 h-3.5\"}),\"Link Stable\"]}):\"Validate Connection\"})]}),n.jsxs(Ej,{className:\"relative z-10\",children:[n.jsx(Mj,{asChild:!0,children:n.jsxs(Ge,{variant:\"ghost\",className:\"w-full h-8 hover:bg-white/5 text-slate-500 hover:text-slate-300 text-[8px] font-bold uppercase tracking-widest group/trigger flex items-center justify-between px-2 rounded-lg\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(sy,{className:\"w-3 h-3 text-slate-600 group-hover/trigger:text-slate-400\"}),\"Alternative Nodes\"]}),n.jsx(Kr,{className:\"w-3 h-3 transition-transform duration-300 group-data-[state=open]/trigger:rotate-180\"})]})}),n.jsx(zj,{className:\"pt-4 space-y-3 animate-in fade-in slide-in-from-top-2 duration-300\",children:n.jsx(\"div\",{className:\"grid gap-2\",children:tt.filter(ce=>ce.id!==De).map(ce=>{const Ee=c.apiKeys?.[ce.id],He=`VITE_${ce.id.toUpperCase()}_API_KEY`,yt=!!q0[He];return n.jsxs(\"div\",{className:\"flex items-center gap-3 bg-slate-950/40 p-3 rounded-xl border border-white/5 hover:border-white/10 transition-colors\",children:[n.jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between mb-1\",children:[n.jsx(\"span\",{className:\"text-[8px] font-bold uppercase tracking-wider text-slate-500\",children:ce.label}),yt&&!Ee&&n.jsx(\"span\",{className:\"text-[7px] font-bold text-emerald-500/50 uppercase tracking-tighter\",children:\"System\"})]}),n.jsx(Pt,{type:\"password\",value:Ee||\"\",onChange:Ut=>bt(\"apiKeys\",{...c.apiKeys,[ce.id]:Ut.target.value}),placeholder:yt?\"Using System Default\":\"Key not found\",className:\"bg-transparent border-none p-0 h-auto text-[10px] text-slate-400 placeholder:text-slate-800 focus-visible:ring-0 shadow-none italic font-medium cursor-not-allowed\",disabled:yt&&!Ee})]}),Ee&&n.jsx(\"button\",{onClick:()=>bt(\"apiKeys\",{...c.apiKeys,[ce.id]:\"\"}),className:\"text-slate-800 hover:text-rose-500 transition-colors p-1\",title:\"Clear saved key\",\"aria-label\":`Clear saved key for ${ce.label}`,children:n.jsx(Ai,{className:\"w-3 h-3\"})})]},ce.id)})})})]})]})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(Re,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(du,{className:\"w-3.5 h-3.5 text-indigo-400\"}),\"Data Optimization Node\"]}),n.jsxs(\"div\",{className:\"p-6 bg-slate-900/40 rounded-[32px] border border-white/5 relative overflow-hidden\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-300\",children:\"Subscription Protocol Scan\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-wide mt-1\",children:\"DETECT & MIGRATE RECURRING SIGNALS\"})]}),n.jsx(Ge,{onClick:ye,disabled:L,className:\"bg-indigo-600 hover:bg-indigo-500 text-white font-black uppercase tracking-widest text-[9px] h-9 px-4 rounded-xl shadow-lg shadow-indigo-500/20\",children:L?n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(uu,{className:\"w-3 h-3 animate-spin\"}),\"Scanning...\"]}):\"Execute Scan\"})]}),n.jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-white/5 flex items-center justify-between\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-300\",children:\"Redundancy Purge\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-wide mt-1\",children:\"REMOVE BLANK & DUPLICATE ENTRIES\"})]}),n.jsx(Ge,{onClick:async()=>{const ce=J.loading(\"Purging duplicates...\");try{const Ee=await se();J.dismiss(ce)}catch{J.dismiss(ce),J.error(\"Purge failed\")}},className:\"bg-rose-500/10 hover:bg-rose-500/20 text-rose-400 border border-rose-500/20 font-black uppercase tracking-widest text-[9px] h-9 px-4 rounded-xl\",children:\"Purge Logs\"})]})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(Re,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(iy,{className:\"w-3.5 h-3.5 text-amber-500\"}),\"Reputation Rank (\",c.unlockedAchievements.length,\"/\",Ve.length,\")\"]}),n.jsx(\"div\",{className:\"grid grid-cols-4 sm:grid-cols-6 gap-3\",children:Ve.map(ce=>{const Ee=rt.has(ce.id);return n.jsx(\"button\",{onClick:()=>{Ee&&m&&m(ce.id)},disabled:!Ee,className:`w-12 h-12 rounded-xl border flex items-center justify-center text-xl transition-all ${Ee?\"border-amber-500/50 bg-amber-500/10 grayscale-0 hover:scale-110 hover:shadow-lg hover:shadow-amber-500/20 active:scale-95\":\"border-white/5 bg-white/5 grayscale opacity-20 cursor-not-allowed\"}`,children:ce.icon},ce.id)})}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 font-bold text-center leading-relaxed\",children:c.unlockedAchievements.length>0?\"Select a sigil to view the record of your triumph.\":\"Initiate financial protocols to manifest higher ranks.\"})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsx(\"div\",{className:\"space-y-4\",children:n.jsxs(\"div\",{className:\"p-4 bg-rose-500/5 border border-rose-500/10 rounded-2xl flex items-center justify-between\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"text-[10px] font-black uppercase tracking-widest text-rose-400\",children:\"Factory Reset\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-wide mt-1\",children:\"WIPE ALL TRANSACTIONS & RECURRING (KEEP ACCOUNT)\"})]}),n.jsx(Ge,{onClick:async()=>{confirm(\"Are you sure? This deletes ALL transaction data.\")&&await he()},className:\"bg-slate-950 hover:bg-rose-500 text-rose-500 hover:text-white border border-rose-500/20 font-black uppercase tracking-widest text-[9px] h-9 px-4 rounded-xl transition-colors\",children:\"Wipe Data\"})]})}),n.jsx(Rj,{className:\"bg-white/5\"}),n.jsxs(\"div\",{className:\"text-center pt-8 space-y-2 opacity-40 hover:opacity-100 transition-opacity duration-700 pb-10\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-[0.5em] text-slate-100\",children:\"Obsidian System Node\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-widest\",children:\"Architect: Sijo Joseph // BUILD 50.3.0 // QUANTUM CORE\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-700 uppercase tracking-widest mt-4\",children:\"© 2025 NEURAL FINHUB FABRIC\"}),n.jsx(\"button\",{onClick:g,className:\"mt-4 text-[8px] font-black text-indigo-400/60 hover:text-indigo-400 uppercase tracking-[0.2em] transition-colors\",children:\"[ Protocol Info // About ]\"})]}),n.jsxs(\"div\",{className:\"px-2 pb-10\",children:[n.jsxs(Ge,{variant:\"outline\",onClick:()=>{P(),r()},className:\"w-full h-14 bg-white/5 hover:bg-white/10 border-white/10 hover:border-white/20 text-white/60 hover:text-white font-black uppercase tracking-widest gap-3 rounded-[24px] transition-all group mb-4\",children:[n.jsx(ly,{className:\"w-5 h-5 group-hover:-translate-x-1 transition-transform\"}),\"Terminate Session\"]}),n.jsxs(Jp,{open:ve,onOpenChange:fe,children:[n.jsx(Oj,{asChild:!0,children:n.jsxs(Ge,{variant:\"outline\",className:\"w-full h-14 bg-rose-500/5 hover:bg-rose-500/10 border-rose-500/20 hover:border-rose-500/40 text-rose-500 font-black uppercase tracking-widest gap-3 rounded-[24px] transition-all group\",children:[n.jsx(du,{className:\"w-5 h-5 group-hover:scale-110 transition-transform\"}),\"Delete Account & Data\"]})}),n.jsxs(Wp,{className:\"bg-slate-950 border-white/10 text-white rounded-[32px] p-8\",children:[n.jsxs(eg,{children:[n.jsxs(ag,{className:\"text-2xl font-black tracking-tight flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"p-2 rounded-full bg-rose-500/20 text-rose-500\",children:n.jsx(du,{className:\"w-6 h-6\"})}),\"Irreversible Action?\"]}),n.jsxs(ng,{className:\"text-slate-400 font-medium leading-relaxed mt-4\",children:[\"Your account will be \",n.jsx(\"span\",{className:\"text-white font-bold italic\",children:\"deactivated immediately\"}),\" and scheduled for permanent deletion in \",n.jsx(\"span\",{className:\"text-white font-bold\",children:\"30 days\"}),\".\",n.jsx(\"br\",{}),n.jsx(\"br\",{}),\"Log in anytime before then to cancel this request and restore your data node.\"]})]}),n.jsxs(tg,{className:\"mt-8 gap-3\",children:[n.jsx(ig,{className:\"h-14 flex-1 rounded-2xl bg-white/5 border-white/10 text-slate-400 hover:bg-white/10 hover:text-white font-black uppercase tracking-widest transition-all\",children:\"Abort\"}),n.jsx(sg,{onClick:async()=>{await V(),r()},className:\"h-14 flex-1 rounded-2xl bg-rose-600 hover:bg-rose-500 text-white font-black uppercase tracking-widest shadow-lg shadow-rose-500/20 transition-all active:scale-95\",children:\"Confirm Purge\"})]})]})]})]})]})]})})};function sN({onNavigate:i,onOpenSettings:r,onOpenNotifications:c,emergencyFundAmount:u,bankAccountsCount:m,cardsCount:g,currency:h,onOpenAbout:y}){return n.jsxs(\"div\",{className:\"space-y-12 animate-in fade-in slide-in-from-bottom-4 duration-700 px-4 pb-20\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tight leading-none mb-3\",children:\"Settings & Assets\"}),n.jsx(\"p\",{className:\"text-slate-500 font-bold max-w-md\",children:\"Configure your financial universe and manage core system components.\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[n.jsxs(aa,{className:\"p-8 cursor-pointer bg-black border-white/5 sq-2xl border hover:bg-white/5 transition-all duration-300 group relative overflow-hidden\",onClick:()=>i(\"emergency\"),children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-blue-500 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20\"}),n.jsxs(\"div\",{className:\"relative z-10\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-blue-500/10 border border-blue-500/20 sq-md flex items-center justify-center text-blue-400 mb-8 group-hover:scale-110 transition-transform duration-500\",children:n.jsx(Ti,{className:\"w-8 h-8\"})}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100\",children:\"Emergency Fund\"}),n.jsx(\"p\",{className:\"text-2xl font-black tabular-nums text-blue-400\",children:$e(u,h)})]}),n.jsxs(\"div\",{className:\"mt-8 flex items-center justify-between text-slate-500\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest\",children:\"Financial Safety Net\"}),n.jsx(xn,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]})]})]}),n.jsxs(aa,{className:\"p-8 cursor-pointer bg-black border-white/5 sq-2xl border hover:bg-white/5 transition-all duration-300 group relative overflow-hidden\",onClick:()=>i(\"accounts\"),children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-emerald-500 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20\"}),n.jsxs(\"div\",{className:\"relative z-10\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-emerald-500/10 border border-emerald-500/20 sq-md flex items-center justify-center text-emerald-400 mb-8 group-hover:scale-110 transition-transform duration-500\",children:n.jsx(ep,{className:\"w-8 h-8\"})}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100\",children:\"Accounts & Cards\"}),n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsxs(\"div\",{className:\"space-y-0.5\",children:[n.jsx(\"p\",{className:\"text-2xl font-black tabular-nums text-emerald-400\",children:m}),n.jsx(\"p\",{className:\"text-[10px] font-bold text-slate-600 uppercase tracking-wider\",children:\"Banks\"})]}),n.jsx(\"div\",{className:\"w-px h-8 bg-white/5 self-center mt-2\"}),n.jsxs(\"div\",{className:\"space-y-0.5\",children:[n.jsx(\"p\",{className:\"text-2xl font-black tabular-nums text-emerald-400\",children:g}),n.jsx(\"p\",{className:\"text-[10px] font-bold text-slate-600 uppercase tracking-wider\",children:\"Cards\"})]})]})]}),n.jsxs(\"div\",{className:\"mt-8 flex items-center justify-between text-slate-500\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest\",children:\"Manage Liquidity\"}),n.jsx(xn,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]})]})]}),n.jsxs(aa,{className:\"p-8 cursor-pointer bg-black border-white/5 sq-2xl border hover:bg-white/5 transition-all duration-300 group relative overflow-hidden\",onClick:()=>i(\"recurring\"),children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-indigo-500 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20\"}),n.jsxs(\"div\",{className:\"relative z-10\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-indigo-500/10 border border-indigo-500/20 sq-md flex items-center justify-center text-indigo-400 mb-8 group-hover:scale-110 transition-transform duration-500\",children:n.jsx(Wr,{className:\"w-8 h-8\"})}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100\",children:\"Recurring Flow\"}),n.jsx(\"p\",{className:\"text-sm font-bold text-slate-400 uppercase tracking-tight\",children:\"Subscriptions & EMIs\"})]}),n.jsxs(\"div\",{className:\"mt-11 flex items-center justify-between text-slate-500\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest\",children:\"Active Commitments\"}),n.jsx(xn,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]})]})]})]}),n.jsxs(\"div\",{className:\"pt-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 mb-8\",children:[n.jsx(\"div\",{className:\"w-1.5 h-6 bg-slate-700 rounded-full\"}),n.jsx(\"h3\",{className:\"text-xs font-black uppercase tracking-[0.3em] text-slate-600\",children:\"System Configuration\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 gap-4\",children:[n.jsx(aa,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group\",onClick:r,children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400 group-hover:text-white transition-colors\",children:n.jsx(ry,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"App Settings\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"Preferences & Display\"})]})]}),n.jsx(xn,{className:\"w-5 h-5 text-slate-700 group-hover:text-slate-400 transition-colors\"})]})}),n.jsx(aa,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group\",onClick:c,children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400 group-hover:text-white transition-colors\",children:n.jsx(Gu,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"Alert Center\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"System Notifications\"})]})]}),n.jsx(xn,{className:\"w-5 h-5 text-slate-700 group-hover:text-slate-400 transition-colors\"})]})}),n.jsx(aa,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group opacity-60 hover:opacity-100\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400\",children:n.jsx(oy,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"Support\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"Documentation & Help\"})]})]}),n.jsx(xn,{className:\"w-5 h-5 text-slate-700 transition-colors\"})]})}),n.jsx(aa,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group opacity-60 hover:opacity-100\",onClick:y,children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400\",children:n.jsx(cy,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"About\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"Version 5.0 Stable Release\"})]})]}),n.jsx(xn,{className:\"w-5 h-5 text-slate-700 transition-colors\"})]})})]})]}),n.jsxs(\"div\",{className:\"text-center pt-8 border-t border-white/5\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-[0.5em] text-slate-700 mb-1\",children:\"FinHub Obsidian System\"}),n.jsx(\"p\",{className:\"text-[9px] font-bold text-slate-800\",children:\"BUILD 50.3.0 // QUANTUM CORE\"})]})]})}function iN({className:i,children:r,...c}){return n.jsxs(uy,{\"data-slot\":\"scroll-area\",className:ct(\"relative\",i),...c,children:[n.jsx(dy,{\"data-slot\":\"scroll-area-viewport\",className:\"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1\",children:r}),n.jsx(lN,{}),n.jsx(fy,{})]})}function lN({className:i,orientation:r=\"vertical\",...c}){return n.jsx(my,{\"data-slot\":\"scroll-area-scrollbar\",orientation:r,className:ct(\"flex touch-none p-px transition-colors select-none\",r===\"vertical\"&&\"h-full w-2.5 border-l border-l-transparent\",r===\"horizontal\"&&\"h-2.5 flex-col border-t border-t-transparent\",i),...c,children:n.jsx(hy,{\"data-slot\":\"scroll-area-thumb\",className:\"bg-border relative flex-1 rounded-full\"})})}function rN({isOpen:i,onClose:r,notifications:c,onNotificationClick:u,onMarkAsRead:m,onClearRead:g}){const h=c.filter(B=>!B.read).length,y=c.filter(B=>B.read).length,p=B=>{switch(B){case\"achievement\":return n.jsx(gy,{className:\"w-5 h-5 text-yellow-500\"});case\"goal\":return n.jsx(_s,{className:\"w-5 h-5 text-green-500\"});case\"insight\":return n.jsx(Si,{className:\"w-5 h-5 text-blue-500\"});case\"alert\":return n.jsx(Jr,{className:\"w-5 h-5 text-red-500\"});case\"reminder\":return n.jsx(Eu,{className:\"w-5 h-5 text-indigo-500\"})}},x=B=>{const L=new Date(B),P=new Date().getTime()-L.getTime(),V=Math.floor(P/6e4),S=Math.floor(P/36e5),se=Math.floor(P/864e5);return V<60?`${V}m ago`:S<24?`${S}h ago`:`${se}d ago`},[v,f]=A.useState({reminders:!0,transactions:!0,achievements:!1,insights:!1}),N=B=>{f(L=>({...L,[B]:!L[B]}))},M=[\"reminders\",\"transactions\",\"insights\",\"achievements\"],O=c.reduce((B,L)=>{const R=L.category||\"insights\";return B[R]||(B[R]=[]),B[R].push(L),B},{});return Object.keys(O).forEach(B=>{O[B].sort((L,R)=>L.read!==R.read?L.read?1:-1:new Date(R.timestamp).getTime()-new Date(L.timestamp).getTime())}),n.jsx(Xp,{open:i,onOpenChange:r,children:n.jsxs(Qp,{side:\"right\",className:\"w-full sm:max-w-lg p-0 flex flex-col h-dvh max-h-dvh bg-black border-white/5 text-slate-100 overflow-hidden z-[99999]\",children:[n.jsx(Zp,{className:\"sr-only\",children:\"Notifications\"}),n.jsx(Kp,{className:\"sr-only\",children:\"Protocol Intelligence Pulse\"}),n.jsxs(\"div\",{className:\"px-8 pt-28 pb-10 border-b border-white/5 bg-black relative overflow-hidden animate-in fade-in slide-in-from-right-4 duration-500\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-48 h-48 bg-indigo-500 blur-[120px] opacity-10 -mr-24 -mt-24\"}),n.jsx(\"div\",{className:\"absolute bottom-0 left-0 w-24 h-24 bg-blue-500 blur-[80px] opacity-5 -ml-12 -mb-12\"}),n.jsx(\"div\",{className:\"absolute top-8 right-8 z-30\",children:n.jsx(Ge,{variant:\"ghost\",size:\"icon\",onClick:r,className:\"w-10 h-10 sq-full bg-white/5 text-slate-400 hover:text-white hover:bg-white/10\",children:n.jsx(Tl,{className:\"w-5 h-5\"})})}),n.jsxs(\"div\",{className:\"flex items-center justify-between relative z-10\",children:[n.jsxs(\"div\",{className:\"flex flex-col gap-2\",children:[n.jsx(\"div\",{className:\"flex items-center gap-4\",children:n.jsxs(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tighter leading-none flex items-center gap-4\",children:[\"Pulse\",h>0&&n.jsx(\"span\",{className:\"flex items-center justify-center min-w-[24px] h-6 px-2 text-[10px] font-black bg-indigo-600 text-white sq-full shadow-[0_0_15px_rgba(79,70,229,0.4)]\",children:h})]})}),n.jsx(\"p\",{className:\"text-slate-500 font-black text-[10px] uppercase tracking-[0.3em] leading-none ml-0.5\",children:\"System Intelligence Stack\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[h>0&&n.jsx(Ge,{variant:\"ghost\",size:\"icon\",title:\"Mark all as read\",onClick:()=>{c.forEach(B=>{B.read||m?.(B.id)})},className:\"w-11 h-11 sq-md bg-white/5 text-slate-400 hover:text-indigo-400 hover:bg-white/10 transition-all duration-300 border border-white/5 active:scale-90\",children:n.jsx(py,{className:\"w-5 h-5\"})}),y>0&&n.jsx(Ge,{variant:\"ghost\",size:\"icon\",title:\"Clear history\",onClick:()=>{confirm(`Purge ${y} recorded protocol entries?`)&&g?.()},className:\"w-11 h-11 sq-md bg-white/5 text-slate-400 hover:text-rose-400 hover:bg-rose-500/10 transition-all duration-300 border border-white/5 active:scale-90\",children:n.jsx(Ai,{className:\"w-5 h-5\"})})]})]})]}),n.jsx(iN,{className:\"flex-1 w-full bg-black overflow-hidden custom-scrollbar\",children:n.jsx(\"div\",{className:\"px-6 space-y-12 py-8 pb-32\",children:c.length===0?n.jsxs(\"div\",{className:\"text-center py-32 flex flex-col items-center animate-in fade-in zoom-in duration-700\",children:[n.jsxs(\"div\",{className:\"w-24 h-24 bg-white/5 border border-white/5 sq-2xl flex items-center justify-center text-slate-800 mb-8 shadow-inner relative group\",children:[n.jsx(\"div\",{className:\"absolute inset-0 bg-indigo-500/5 blur-2xl sq-full group-hover:bg-indigo-500/10 transition-colors\"}),n.jsx(Gu,{className:\"w-10 h-10 relative z-10\"})]}),n.jsx(\"h4\",{className:\"text-2xl font-black text-slate-100 mb-3 tracking-tight\",children:\"Signal Silence\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-black uppercase tracking-[0.3em] max-w-[260px] leading-relaxed\",children:\"The protocol pulse is flat. We will alert you upon system breakthroughs.\"})]}):M.map(B=>{const L=O[B]||[];if(L.length===0)return null;const R=v[B],P=R?L.length:1,V=L.filter(S=>!S.read).length;return n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"button\",{onClick:()=>N(B),className:\"w-full flex items-center justify-between px-2 group\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-[0.4em] text-slate-500 group-hover:text-slate-300 transition-colors\",children:B}),V>0&&n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 sq-full animate-pulse shadow-[0_0_10px_rgba(99,102,241,0.6)]\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black text-slate-700\",children:L.length}),R?n.jsx(Vu,{className:\"w-3 h-3 text-slate-700\"}):n.jsx(Kr,{className:\"w-3 h-3 text-slate-700\"})]})]}),n.jsxs(\"div\",{className:\"space-y-3 relative\",children:[!R&&L.length>1&&n.jsxs(n.Fragment,{children:[n.jsx(\"div\",{className:\"absolute top-2 left-2 right-2 h-full bg-black/40 sq-xl -z-10 border border-white/5 translate-y-2 scale-[0.98]\"}),n.jsx(\"div\",{className:\"absolute top-4 left-4 right-4 h-full bg-black/20 sq-xl -z-20 border border-white/5 translate-y-4 scale-[0.96]\"})]}),L.slice(0,P).map((S,se)=>{const he={style:{\"--anim-delay\":`${se*50}ms`,\"--z-index\":100-se}};return n.jsxs(\"div\",{...he,className:`p-6 sq-xl border transition-all duration-500 group relative overflow-hidden cursor-pointer active:scale-[0.98] animate-in fade-in slide-in-from-right-4 fill-mode-both [animation-delay:var(--anim-delay)] z-[var(--z-index)] ${S.read?\"bg-black border-white/5\":\"bg-black border-indigo-500/30 shadow-lg shadow-indigo-500/5 hover:border-indigo-500/50\"}`,onClick:ve=>{ve.stopPropagation(),u?.(S),S.read||m?.(S.id)},children:[S.priority===\"high\"&&!S.read&&n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 bg-red-500 blur-[80px] opacity-10 -mr-16 -mt-16\"}),!S.read&&S.priority!==\"high\"&&n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 bg-indigo-500 blur-[80px] opacity-10 -mr-16 -mt-16 group-hover:opacity-20 transition-opacity\"}),n.jsxs(\"div\",{className:\"flex gap-4 relative z-10\",children:[n.jsx(\"div\",{className:`w-12 h-12 sq-md flex items-center justify-center shrink-0 border border-white/5 transition-all duration-500 ${S.read?\"bg-white/5 text-slate-600\":S.priority===\"high\"?\"bg-red-500/10 text-red-400\":\"bg-indigo-500/10 text-indigo-400 shadow-inner\"}`,children:p(S.type)}),n.jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[n.jsxs(\"div\",{className:\"flex items-start justify-between gap-4\",children:[n.jsx(\"h4\",{className:`text-sm font-black tracking-tight leading-tight ${S.read?\"text-slate-500\":\"text-slate-100\"}`,children:S.title}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-700 whitespace-nowrap pt-1\",children:x(S.timestamp)})]}),n.jsx(\"p\",{className:`text-xs mt-2 leading-relaxed font-bold tracking-tight ${S.read?\"text-slate-700\":\"text-slate-400\"}`,children:S.message}),S.priority===\"high\"&&!S.read&&n.jsxs(\"div\",{className:\"mt-4 flex items-center gap-2\",children:[n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-red-400 sq-full animate-ping\"}),n.jsx(\"span\",{className:\"text-[10px] font-black text-red-400 uppercase tracking-[0.2em]\",children:\"Critical Stability Alert\"})]}),S.action&&S.action.status===\"pending\"&&n.jsxs(\"div\",{className:\"mt-4 flex gap-3 animate-in fade-in slide-in-from-top-1\",children:[n.jsx(Ge,{size:\"sm\",className:\"h-8 text-[10px] font-black uppercase tracking-widest bg-emerald-600 hover:bg-emerald-500 text-white border-0\",onClick:ve=>{ve.stopPropagation(),S.action.status=\"completed\",u?.(S)},children:\"Yes, Automate\"}),n.jsx(Ge,{size:\"sm\",variant:\"ghost\",className:\"h-8 text-[10px] font-black uppercase tracking-widest text-slate-500 hover:text-slate-300 hover:bg-white/5\",onClick:ve=>{ve.stopPropagation(),S.action.status=\"dismissed\",S.read||m?.(S.id)},children:\"No, One-time\"})]})]})]})]},S.id)})]})]},B)})})})]})})}const I0=[{text:\"An investment in knowledge pays the best interest.\",author:\"Benjamin Franklin\",category:\"financial-literacy\"},{text:\"It's not how much money you make, but how much money you keep, how hard it works for you, and how many generations you keep it for.\",author:\"Robert Kiyosaki\",category:\"financial-literacy\"},{text:\"Financial peace isn't the acquisition of stuff. It's learning to live on less than you make, so you can give money back and have money to invest.\",author:\"Dave Ramsey\",category:\"financial-literacy\"},{text:\"Do not save what is left after spending; instead spend what is left after saving.\",author:\"Warren Buffett\",category:\"financial-literacy\"},{text:\"The stock market is a device for transferring money from the impatient to the patient.\",author:\"Warren Buffett\",category:\"financial-literacy\"},{text:\"Know what you own, and know why you own it.\",author:\"Peter Lynch\",category:\"financial-literacy\"},{text:\"The individual investor should act consistently as an investor and not as a speculator.\",author:\"Ben Graham\",category:\"financial-literacy\"},{text:\"Price is what you pay. Value is what you get.\",author:\"Warren Buffett\",category:\"financial-literacy\"},{text:\"The goal isn't more money. The goal is living life on your terms.\",author:\"Chris Brogan\",category:\"financial-freedom\"},{text:\"Financial freedom is available to those who learn about it and work for it.\",author:\"Robert Kiyosaki\",category:\"financial-freedom\"},{text:\"The rich invest in time, the poor invest in money.\",author:\"Warren Buffett\",category:\"financial-freedom\"},{text:\"Wealth is the ability to fully experience life.\",author:\"Henry David Thoreau\",category:\"financial-freedom\"},{text:\"It's not about having lots of money. It's about knowing how to manage the money you do have.\",author:\"Dave Ramsey\",category:\"financial-freedom\"},{text:\"Money is a terrible master but an excellent servant.\",author:\"P.T. Barnum\",category:\"financial-freedom\"},{text:\"The quickest way to double your money is to fold it in half and put it in your back pocket.\",author:\"Will Rogers\",category:\"financial-freedom\"},{text:\"The best time to plant a tree was 20 years ago. The second best time is now.\",author:\"Chinese Proverb\",category:\"motivation\"},{text:\"A journey of a thousand miles begins with a single step.\",author:\"Lao Tzu\",category:\"motivation\"},{text:\"Success is not final, failure is not fatal: it is the courage to continue that counts.\",author:\"Winston Churchill\",category:\"motivation\"},{text:\"The only way to do great work is to love what you do.\",author:\"Steve Jobs\",category:\"motivation\"},{text:\"Don't watch the clock; do what it does. Keep going.\",author:\"Sam Levenson\",category:\"motivation\"},{text:\"Wealth is not about having a lot of money; it's about having a lot of options.\",author:\"Chris Rock\",category:\"motivation\"},{text:\"Every time you borrow money, you're robbing your future self.\",author:\"Nathan W. Morris\",category:\"motivation\"},{text:\"The habit of saving is itself an education; it fosters every virtue, teaches self-denial, cultivates the sense of order, trains to forethought, and so broadens the mind.\",author:\"T.T. Munger\",category:\"motivation\"},{text:\"Too many people spend money they haven't earned, to buy things they don't want, to impress people they don't like.\",author:\"Will Rogers\",category:\"motivation\"},{text:\"A budget is telling your money where to go instead of wondering where it went.\",author:\"Dave Ramsey\",category:\"motivation\"},{text:\"Beware of little expenses. A small leak will sink a great ship.\",author:\"Benjamin Franklin\",category:\"motivation\"},{text:\"Never spend your money before you have earned it.\",author:\"Thomas Jefferson\",category:\"motivation\"}];function V0(){return I0[Math.floor(Math.random()*I0.length)]}function oN({isOpen:i,onClose:r,achievementId:c}){const[u,m]=A.useState(V0());if(A.useEffect(()=>{i&&c&&(m(V0()),ji({particleCount:150,spread:100,origin:{y:.6},colors:[\"#FFD700\",\"#FFA500\",\"#FF6347\",\"#9370DB\",\"#3CB371\"]}))},[i,c]),!c)return null;const g=gp(c);return g?n.jsx(Bs,{open:i,onOpenChange:r,children:n.jsxs(Ls,{className:\"w-[270px] sm:w-full sm:max-w-md bg-slate-950 border-[#38383A] p-0 overflow-hidden rounded-[32px] shadow-2xl transition-all duration-500\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 sm:w-64 sm:h-64 bg-yellow-500 blur-[60px] sm:blur-[120px] opacity-10 -mr-16 -mt-16 sm:-mr-32 sm:-mt-32\"}),n.jsx(\"div\",{className:\"absolute bottom-0 left-0 w-24 h-24 sm:w-48 sm:h-48 bg-indigo-500 blur-[50px] sm:blur-[100px] opacity-5 -ml-12 -mb-12 sm:-ml-24 sm:-mb-24\"}),n.jsxs(qs,{className:\"px-6 sm:px-10 pt-8 sm:pt-12 pb-0 relative z-10\",children:[n.jsx(Is,{className:\"text-center text-xl sm:text-3xl font-black text-white tracking-tight transition-all\",children:\"Achievement Unlocked\"}),n.jsx(Vs,{className:\"text-center text-[8px] sm:text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] sm:tracking-[0.3em] mt-1 sm:mt-2 transition-all\",children:\"Protocol Milestone Verified\"})]}),n.jsxs(\"div\",{className:\"space-y-6 sm:space-y-10 py-8 sm:py-12 px-6 sm:px-10 relative z-10\",children:[n.jsxs(\"div\",{className:\"relative flex justify-center\",children:[n.jsx(Oe.div,{className:\"relative z-10\",initial:{scale:0,rotateY:0},animate:{scale:1,rotateY:[0,1080],transition:{scale:{duration:.8,ease:\"backOut\"},rotateY:{duration:4,ease:\"easeInOut\"}}},children:n.jsxs(\"div\",{className:\"relative\",children:[n.jsx(Oe.div,{className:\"absolute inset-0 bg-yellow-400 blur-3xl opacity-20 rounded-full\",animate:{scale:[1,1.3,1],opacity:[.2,.4,.2]},transition:{duration:3,repeat:1/0,ease:\"easeInOut\"}}),n.jsxs(\"div\",{className:\"relative w-32 h-32 sm:w-44 sm:h-44 bg-gradient-to-br from-yellow-400 via-orange-500 to-yellow-600 rounded-[32px] sm:rounded-[48px] flex items-center justify-center shadow-[0_15px_40px_rgba(234,179,8,0.25)] border-4 border-white/20 transition-all\",children:[n.jsx(\"span\",{className:\"text-5xl sm:text-7xl drop-shadow-2xl transition-all\",children:g.icon}),n.jsx(\"div\",{className:\"absolute inset-0 bg-gradient-to-tr from-white/10 to-transparent pointer-events-none rounded-[28px] sm:rounded-[44px]\"})]})]})}),n.jsxs(\"div\",{className:\"absolute inset-0 z-20 flex justify-center items-center pointer-events-none\",children:[n.jsx(Oe.div,{className:\"absolute w-32 h-32 sm:w-48 sm:h-48 bg-yellow-500/40 blur-[40px] sm:blur-[60px] rounded-full\",initial:{scale:0,opacity:0},animate:{scale:1.4,opacity:1},transition:{delay:.3,duration:1.2,ease:\"easeOut\"}}),n.jsx(Oe.div,{className:\"absolute w-24 h-24 sm:w-36 sm:h-36 bg-indigo-500/30 blur-[30px] sm:blur-[45px] rounded-full -ml-8 -mt-6 sm:-ml-12 sm:-mt-10\",initial:{scale:0,opacity:0},animate:{scale:1.8,opacity:.8},transition:{delay:.4,duration:1.2,ease:\"easeOut\"}}),n.jsx(Oe.div,{className:\"absolute w-20 h-20 sm:w-32 sm:h-32 bg-rose-500/30 blur-[25px] sm:blur-[40px] rounded-full ml-10 mt-8 sm:ml-16 sm:mt-12\",initial:{scale:0,opacity:0},animate:{scale:1.6,opacity:.8},transition:{delay:.5,duration:1.2,ease:\"easeOut\"}})]})]}),n.jsxs(Oe.div,{className:\"text-center space-y-2 sm:space-y-4\",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:.6},children:[n.jsx(\"h3\",{className:\"text-lg sm:text-3xl font-black bg-gradient-to-r from-yellow-200 via-yellow-500 to-yellow-200 bg-clip-text text-transparent tracking-tight transition-all\",children:g.name}),n.jsx(\"p\",{className:\"text-slate-400 font-bold text-[11px] sm:text-sm leading-relaxed max-w-[200px] sm:max-w-[280px] mx-auto transition-all\",children:g.description})]}),n.jsx(Oe.div,{className:\"flex justify-center\",initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},children:n.jsxs(\"div\",{className:\"flex items-center gap-3 sm:gap-4\",children:[n.jsx(\"div\",{className:\"h-px w-12 sm:w-20 bg-gradient-to-r from-transparent via-white/10 to-transparent\"}),n.jsx(\"div\",{className:\"w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full bg-yellow-500/50 blur-[1px] animate-pulse\"}),n.jsx(\"div\",{className:\"h-px w-12 sm:w-20 bg-gradient-to-r from-transparent via-white/10 to-transparent\"})]})}),n.jsxs(Oe.div,{className:\"p-4 sm:p-8 bg-white/5 rounded-2xl sm:rounded-[32px] border border-white/5 relative overflow-hidden transition-all\",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:1},children:[n.jsx(\"div\",{className:\"absolute top-0 left-0 w-12 h-12 bg-indigo-500 blur-2xl opacity-5\"}),n.jsxs(\"div\",{className:\"flex items-start gap-3 sm:gap-6 relative z-10 text-left\",children:[n.jsx(\"span\",{className:\"text-xl sm:text-3xl pt-0 opacity-40\",children:'\"'}),n.jsxs(\"div\",{className:\"flex-1\",children:[n.jsx(\"p\",{className:\"text-[10px] sm:text-sm font-bold italic text-slate-300 leading-snug sm:leading-relaxed tracking-tight transition-all\",children:u.text}),n.jsxs(\"div\",{className:\"flex items-center gap-2 sm:gap-4 mt-3 sm:mt-6 transition-all\",children:[n.jsx(\"div\",{className:\"h-px flex-1 bg-white/5\"}),n.jsxs(\"p\",{className:\"text-[8px] sm:text-[10px] font-black text-slate-500 uppercase tracking-widest shrink-0\",children:[\"— \",u.author]})]})]})]})]})]})]})}):null}const cN=({accounts:i,goals:r,liabilities:c,expenses:u,emergencyFundAmount:m=0})=>{const g=A.useMemo(()=>i.filter(f=>f.type===\"bank\"||f.type===\"cash\").reduce((f,N)=>f+N.balance,0),[i]),h=A.useMemo(()=>i.filter(f=>f.type===\"credit_card\").reduce((f,N)=>f+Math.abs(N.balance),0),[i]),y=A.useMemo(()=>{const f=c.reduce((M,O)=>M+(O.emiAmount||0),0),N=u.filter(M=>M.isRecurring).reduce((M,O)=>M+O.amount,0);return f+N},[c,u]),p=A.useMemo(()=>r.reduce((N,M)=>N+M.currentAmount,0)+(m||0),[r,m]),x=A.useMemo(()=>p+y,[p,y]),v=A.useMemo(()=>{const f=g-x;return Math.max(0,f)},[g,x]);return{totalBankBalance:g,totalCreditUsage:h,totalCommitments:y,shadowWalletTotal:p,totalReserved:x,availableToSpend:v}},bl=({children:i,icon:r,variant:c=\"blue\",glow:u=!0,className:m,...g})=>{const h={blue:\"border-blue-500/50 text-blue-400 hover:border-blue-500 hover:shadow-[0_0_20px_rgba(59,130,246,0.4)] shadow-[0_0_10px_rgba(59,130,246,0.2)]\",green:\"border-emerald-500/50 text-emerald-400 hover:border-emerald-500 hover:shadow-[0_0_20px_rgba(16,185,129,0.4)] shadow-[0_0_10px_rgba(16,185,129,0.2)]\",purple:\"border-purple-500/50 text-purple-400 hover:border-purple-500 hover:shadow-[0_0_20px_rgba(168,85,247,0.4)] shadow-[0_0_10px_rgba(168,85,247,0.2)]\",rose:\"border-rose-500/50 text-rose-400 hover:border-rose-500 hover:shadow-[0_0_20px_rgba(244,63,94,0.4)] shadow-[0_0_10px_rgba(244,63,94,0.2)]\"};return n.jsxs(\"button\",{className:ct(\"relative group flex items-center justify-center gap-2 px-6 h-11\",\"bg-[#0A141E]/80 backdrop-blur-md border-2 rounded-2xl transition-all duration-300\",\"font-mono font-bold uppercase tracking-widest text-[10px]\",\"hover:scale-[1.02] active:scale-[0.98]\",h[c],m),...g,children:[r&&n.jsx(r,{className:\"w-4 h-4 transition-all duration-700 ease-quantum group-hover:rotate-[720deg] active:-rotate-12\"}),n.jsx(\"span\",{children:i})]})};function uN({isOpen:i,onClose:r,accounts:c,goals:u,currency:m,destinationType:g,emergencyFund:h,onAllocate:y,liabilities:p=[],expenses:x=[]}){const[v,f]=A.useState(\"\"),[N,M]=A.useState(\"\"),[O,B]=A.useState(\"\"),[L,R]=A.useState(!1),[P,V]=A.useState(!1),{availableToSpend:S,totalBankBalance:se,shadowWalletTotal:he,totalCommitments:ve}=cN({accounts:c,goals:u,liabilities:p,expenses:x,emergencyFundAmount:h?.currentAmount||0});A.useEffect(()=>{if(i&&!v&&c.length>0){const C=c.filter(Y=>Y.type===\"bank\"||Y.type===\"cash\");if(C.length>0){const Y=C.find(oe=>oe.balance>=S)||[...C].sort((oe,ge)=>ge.balance-oe.balance)[0];f(Y.id)}}},[i,S,c,v]);const fe=c.find(C=>C.id===v),ye=u.find(C=>C.id===N),Se=parseFloat(O)||0,qe=()=>{if(S>0){if(B(S.toString()),g===\"goal\"&&!N&&u.length>0){const C=[...u].sort((Y,oe)=>{const ge=new Date(Y.targetDate).getTime(),z=new Date(oe.targetDate).getTime();if(ge!==z)return ge-z;const T=Y.currentAmount/Y.targetAmount,re=oe.currentAmount/oe.targetAmount;return T-re});M(C[0].id),J.info(`Suggested: ${C[0].name} based on timeline & progress`,{icon:n.jsx(bn,{className:\"w-4 h-4 text-blue-400\"})})}}else J.error(\"No surplus liquidity available for auto-fill\")},Te=()=>{if(!v){J.error(\"Please select an account\");return}if(g===\"goal\"&&!N){J.error(\"Please select a goal\");return}if(!O||Se<=0){J.error(\"Please enter a valid amount\");return}if(fe&&Se>fe.balance){J.error(\"Insufficient balance in selected account\");return}R(!0)},ee=()=>{y({accountId:v,destinationId:g===\"goal\"?N:\"emergency-fund\",amount:Se,destinationType:g}),f(\"\"),M(\"\"),B(\"\"),R(!1),r()},me=()=>{R(!1)},G=()=>{f(\"\"),M(\"\"),B(\"\"),R(!1),V(!1),r()};return n.jsx(Bs,{open:i,onOpenChange:G,children:n.jsx(Ls,{className:\"max-w-md bg-black border-white/5 text-white p-0 custom-scrollbar sq-2xl overflow-hidden\",children:n.jsxs(\"div\",{className:\"max-h-[85vh] overflow-y-auto p-8 custom-scrollbar\",children:[n.jsxs(qs,{className:\"mb-6\",children:[n.jsx(Is,{className:\"text-xl font-black tracking-tight text-white mb-1\",children:g===\"goal\"?\"🎯 ALLOCATE TO GOAL\":\"🛡️ ALLOCATE TO RESERVE\"}),n.jsxs(Vs,{className:\"text-slate-500 text-[10px] uppercase font-black tracking-widest\",children:[\"Protocol: Move liquidity from account to \",g===\"goal\"?\"savings milestone\":\"emergency reserve\"]})]}),L?n.jsxs(\"div\",{className:\"space-y-6 py-4\",children:[n.jsx(\"div\",{className:\"text-center pt-2\",children:n.jsx(\"p\",{className:\"text-[10px] text-emerald-500 uppercase font-black tracking-[0.2em] animate-pulse\",children:\"Capital Allocation Protocol Ready\"})}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"div\",{className:\"p-5 bg-white/5 sq-md border border-white/10 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 p-2 opacity-5\",children:n.jsx(Hu,{className:\"w-8 h-8\"})}),n.jsx(\"p\",{className:\"text-[8px] text-slate-500 uppercase font-black tracking-widest mb-3 opacity-60\",children:\"Debit Source\"}),n.jsx(\"p\",{className:\"font-black text-sm text-white tracking-tight\",children:fe?.name}),n.jsxs(\"div\",{className:\"mt-4 space-y-2.5\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-medium\",children:[n.jsx(\"span\",{className:\"text-slate-400 uppercase tracking-tighter\",children:\"Current Liquidity\"}),n.jsx(\"span\",{className:\"font-mono text-white\",children:$e(fe?.balance||0,m)})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-bold text-rose-500\",children:[n.jsx(\"span\",{className:\"uppercase tracking-tighter\",children:\"Debit Volume\"}),n.jsxs(\"span\",{className:\"font-mono\",children:[\"-\",$e(Se,m)]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"flex justify-between text-xs font-black\",children:[n.jsx(\"span\",{className:\"text-slate-500 uppercase tracking-widest\",children:\"Post-Debit Projection\"}),n.jsx(\"span\",{className:\"text-blue-400 font-mono\",children:$e((fe?.balance||0)-Se,m)})]})]})]}),n.jsx(\"div\",{className:\"flex justify-center -my-2 relative z-10\",children:n.jsx(\"div\",{className:\"w-10 h-10 bg-blue-600 sq-md flex items-center justify-center shadow-[0_0_20px_rgba(37,99,235,0.3)] border border-blue-400/20\",children:n.jsx(ap,{className:\"w-5 h-5 text-white\"})})}),n.jsxs(\"div\",{className:`p-5 sq-md border relative overflow-hidden ${g===\"goal\"?\"bg-emerald-500/5 border-emerald-500/20\":\"bg-blue-500/5 border-blue-500/20\"}`,children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 p-2 opacity-10\",children:g===\"goal\"?n.jsx(bn,{className:\"w-8 h-8 text-emerald-500\"}):n.jsx(_s,{className:\"w-8 h-8 text-blue-500\"})}),n.jsx(\"p\",{className:\"text-[8px] text-slate-500 uppercase font-black tracking-widest mb-3 opacity-60\",children:\"Credit Destination\"}),n.jsxs(\"div\",{className:\"flex items-center gap-2 mb-4\",children:[n.jsx(\"span\",{className:\"text-xl\",children:g===\"goal\"?ye?.emoji:\"🛡️\"}),n.jsx(\"p\",{className:\"font-black text-sm text-white tracking-tight\",children:g===\"goal\"?ye?.name:\"Emergency Reserve\"})]}),n.jsxs(\"div\",{className:\"space-y-2.5\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-medium\",children:[n.jsx(\"span\",{className:\"text-slate-400 uppercase tracking-tighter\",children:\"Current Level\"}),n.jsx(\"span\",{className:\"font-mono text-white\",children:$e((g===\"goal\"?ye?.currentAmount:h?.currentAmount)||0,m)})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-bold text-emerald-400\",children:[n.jsx(\"span\",{className:\"uppercase tracking-tighter\",children:\"Credit Volume\"}),n.jsxs(\"span\",{className:\"font-mono\",children:[\"+\",$e(Se,m)]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"flex justify-between text-xs font-black\",children:[n.jsx(\"span\",{className:\"text-slate-500 uppercase tracking-widest\",children:\"Post-Credit Value\"}),n.jsx(\"span\",{className:\"text-emerald-400 font-mono\",children:$e(((g===\"goal\"?ye?.currentAmount:h?.currentAmount)||0)+Se,m)})]})]})]})]}),n.jsx(\"div\",{className:\"p-4 bg-amber-500/5 border border-amber-500/20 sq-md\",children:n.jsxs(\"div\",{className:\"flex gap-3\",children:[n.jsx(zu,{className:\"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5\"}),n.jsxs(\"div\",{className:\"text-[10px]\",children:[n.jsx(\"p\",{className:\"font-black text-amber-400 uppercase tracking-widest mb-1\",children:\"Node Equilibrium Warning\"}),n.jsxs(\"p\",{className:\"text-amber-500/70 font-bold leading-relaxed\",children:[\"Net Liquidity and \",fe?.name,\" reserves will be reduced by \",$e(Se,m),\" immediately. This action is final.\"]})]})]})}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(bl,{onClick:me,className:\"flex-1 h-12 text-slate-500 hover:text-white border-white/5 font-black tracking-[0.2em]\",children:\"Re-Configure\"}),n.jsx(bl,{onClick:ee,className:\"flex-1 h-12 bg-emerald-600/20 text-emerald-400 border-emerald-500/30 font-black tracking-[0.2em] shadow-lg shadow-emerald-500/10\",children:\"Execute Move\"})]})]}):n.jsxs(\"div\",{className:\"space-y-6\",children:[S>0&&n.jsxs(\"div\",{className:\"relative group overflow-hidden sq-xl border border-emerald-500/20 bg-emerald-500/5 p-5 transition-all hover:bg-emerald-500/10 mb-2\",children:[n.jsx(Fp,{variant:\"savings\"}),n.jsxs(\"div\",{className:\"relative z-10 flex flex-col gap-4\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-10 h-10 bg-emerald-500/20 sq-md flex items-center justify-center border border-emerald-500/30\",children:n.jsx(bn,{className:\"w-5 h-5 text-emerald-400\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-[9px] text-emerald-500/70 font-black uppercase tracking-widest\",children:\"Surplus Detected\"}),n.jsx(\"h4\",{className:\"text-xl font-black text-white tabular-nums\",children:$e(S,m)})]})]}),n.jsx(\"button\",{onClick:()=>V(!P),className:\"p-2 hover:bg-white/5 rounded-full transition-colors text-slate-500 hover:text-white\",title:\"Show Calculation\",children:P?n.jsx(Vu,{className:\"w-4 h-4\"}):n.jsx(xy,{className:\"w-4 h-4\"})})]}),P&&n.jsxs(\"div\",{className:\"py-3 border-t border-emerald-500/10 space-y-2 animate-in fade-in slide-in-from-top-2 duration-300\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-emerald-500/60 font-medium\",children:[n.jsx(\"span\",{children:\"Total Liquidity\"}),n.jsx(\"span\",{children:$e(se,m)})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-rose-500/60 font-medium\",children:[n.jsx(\"span\",{children:\"Shadow Wallet (Goals + EF)\"}),n.jsxs(\"span\",{children:[\"-\",$e(he,m)]})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-rose-500/60 font-medium pb-2 border-b border-emerald-500/10\",children:[n.jsx(\"span\",{children:\"Total Commitments (Bills)\"}),n.jsxs(\"span\",{children:[\"-\",$e(ve,m)]})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-emerald-400 font-bold uppercase pt-1\",children:[n.jsx(\"span\",{children:\"Available Safety Margin\"}),n.jsx(\"span\",{children:$e(S,m)})]})]}),n.jsx(bl,{onClick:()=>{qe(),S>fe?.balance&&J.warning(\"Surplus exceeds selected account balance. Source adjusted.\")},className:\"w-full h-11 bg-emerald-500/20 text-emerald-400 border-emerald-500/30 font-black tracking-widest\",children:\"Allocate All Surplus\"})]})]}),n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(Re,{htmlFor:\"allocate-from-account\",className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 mb-2 block\",children:\"Source Node\"}),n.jsxs(ha,{value:v,onValueChange:f,children:[n.jsx(ga,{id:\"allocate-from-account\",name:\"fromAccountId\",className:\"bg-black border-white/5 sq-md h-14 text-white focus:ring-1 focus:ring-blue-500/50\",children:n.jsx(pa,{placeholder:\"Select Capital Source\"})}),n.jsx(xa,{className:\"bg-black border-white/10 text-white sq-xl\",children:c.map(C=>n.jsx(vt,{value:C.id,className:\"hover:bg-white/5\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between w-full\",children:[n.jsxs(\"span\",{children:[C.icon,\" \",C.name]}),n.jsx(\"span\",{className:\"text-[10px] text-slate-500 ml-4 font-mono\",children:$e(C.balance,m)})]})},C.id))})]}),fe&&n.jsxs(\"p\",{className:\"text-[10px] text-slate-500 mt-2 italic px-1\",children:[\"Available Liquidity: \",$e(fe.balance,m)]})]}),g===\"goal\"?n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(Re,{htmlFor:\"allocate-to-goal\",className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 mb-2 block\",children:\"Target Milestone\"}),n.jsxs(ha,{value:N,onValueChange:M,children:[n.jsx(ga,{id:\"allocate-to-goal\",name:\"toGoalId\",className:\"bg-black border-white/5 sq-md h-14 text-white focus:ring-1 focus:ring-emerald-500/50\",children:n.jsx(pa,{placeholder:\"Choose Destination Goal\"})}),n.jsx(xa,{className:\"bg-black border-white/10 text-white sq-xl\",children:u.map(C=>{const Y=C.currentAmount/C.targetAmount*100;return n.jsx(vt,{value:C.id,className:\"hover:bg-white/5\",children:n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(\"span\",{className:\"text-lg\",children:C.emoji}),n.jsxs(\"div\",{className:\"min-w-0\",children:[n.jsx(\"div\",{className:\"font-bold text-xs uppercase tracking-tight\",children:C.name}),n.jsxs(\"div\",{className:\"text-[9px] text-slate-500 font-mono\",children:[Math.round(Y),\"% SYNCHRONIZED • \",$e(C.currentAmount,m)]})]})]})},C.id)})})]})]}):n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(Re,{className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 mb-2 block\",children:\"Stability Reserve\"}),n.jsx(\"div\",{className:\"p-4 bg-white/5 border border-white/10 sq-md\",children:n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-10 h-10 bg-blue-500/10 sq-md flex items-center justify-center border border-blue-500/20\",children:\"🛡️\"}),n.jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[n.jsx(\"p\",{className:\"font-black text-xs uppercase tracking-widest text-white\",children:\"Emergency Fund\"}),h&&n.jsxs(\"p\",{className:\"text-[9px] text-slate-500 font-mono mt-1\",children:[$e(h.currentAmount,m),\" / \",$e(h.targetAmount,m)]})]})]})})]}),n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(\"div\",{className:\"flex justify-between items-center mb-1\",children:n.jsx(Re,{htmlFor:\"allocate-amount\",className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 block\",children:\"Contribution Volume\"})}),n.jsxs(\"div\",{className:\"relative\",children:[n.jsx(\"span\",{className:\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500\",children:m===\"INR\"?\"₹\":\"$\"}),n.jsx(Pt,{id:\"allocate-amount\",name:\"amount\",type:\"number\",placeholder:\"0\",value:O,onChange:C=>B(C.target.value),className:\"pl-8 bg-black border-white/5 h-12\",min:\"0\",step:\"0.01\"})]}),fe&&Se>fe.balance&&n.jsxs(\"div\",{className:\"flex items-center gap-2 text-sm text-red-600\",children:[n.jsx(zu,{className:\"w-4 h-4\"}),n.jsx(\"span\",{children:\"Amount exceeds available balance\"})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(bl,{onClick:G,className:\"flex-1 h-12 text-slate-500 hover:text-white border-white/5 font-black tracking-[0.2em]\",children:\"Abort\"}),n.jsx(bl,{onClick:Te,className:\"flex-1 h-12 bg-blue-600/20 text-blue-400 border-blue-500/30 font-black tracking-[0.2em] shadow-lg shadow-blue-500/10\",children:\"Preview Mode\"})]})]})]})})})}const dN=[{name:\"HDFC Bank\",icon:\"🏦\",color:\"#1d4ed8\",type:\"bank\"},{name:\"ICICI Bank\",icon:\"🏦\",color:\"#ea580c\",type:\"bank\"},{name:\"State Bank of India\",icon:\"🏦\",color:\"#2563eb\",type:\"bank\"},{name:\"Axis Bank\",icon:\"🏦\",color:\"#9d174d\",type:\"bank\"},{name:\"Kotak Mahindra Bank\",icon:\"🏦\",color:\"#dc2626\",type:\"bank\"},{name:\"Bank of America\",icon:\"🏦\",color:\"#0033aa\",type:\"bank\"},{name:\"Chase Bank\",icon:\"🏦\",color:\"#117aca\",type:\"bank\"},{name:\"Wells Fargo\",icon:\"🏦\",color:\"#d71e28\",type:\"bank\"},{name:\"HSBC\",icon:\"🏦\",color:\"#db0011\",type:\"bank\"},{name:\"Barclays\",icon:\"🏦\",color:\"#00aeef\",type:\"bank\"},{name:\"Standard Chartered\",icon:\"🏦\",color:\"#00945e\",type:\"bank\"},{name:\"Citibank\",icon:\"🏦\",color:\"#003b70\",type:\"bank\"},{name:\"DBS Bank\",icon:\"🏦\",color:\"#ff0000\",type:\"bank\"},{name:\"Federal Bank\",icon:\"🏦\",color:\"#0b5a91\",type:\"bank\"},{name:\"American Express\",icon:\"💳\",color:\"#006fcf\",type:\"credit_card\"},{name:\"Discover\",icon:\"💳\",color:\"#ff6600\",type:\"credit_card\"},{name:\"Capital One\",icon:\"💳\",color:\"#d22e2e\",type:\"credit_card\"},{name:\"Goldman Sachs\",icon:\"🏦\",color:\"#725a34\",type:\"bank\"},{name:\"Morgan Stanley\",icon:\"🏦\",color:\"#000033\",type:\"bank\"},{name:\"Apple Card\",icon:\"💳\",color:\"#000000\",type:\"credit_card\"},{name:\"PayPal\",icon:\"💳\",color:\"#003087\",type:\"credit_card\"},{name:\"Revolut\",icon:\"💳\",color:\"#000000\",type:\"credit_card\"},{name:\"Monzo\",icon:\"💳\",color:\"#ff4d4f\",type:\"credit_card\"}];function fN({accounts:i,currency:r,onCreateAccount:c,onUpdateAccount:u,onDeleteAccount:m}){const[g,h]=A.useState(!1),[y,p]=A.useState(null),[x,v]=A.useState({name:\"\",type:\"bank\",balance:0,color:gu[0],icon:xu[0].value,creditLimit:0,safeLimitPercentage:30,serviceChargePercentage:0,statementDate:1}),[f,N]=A.useState([]),M=S=>{S?(p(S),v({name:S.name,type:S.type,balance:S.balance,color:S.color,icon:S.icon,creditLimit:S.creditLimit||0,safeLimitPercentage:S.safeLimitPercentage||30,serviceChargePercentage:S.serviceChargePercentage||0,statementDate:S.statementDate||1})):(p(null),v({name:\"\",type:\"bank\",balance:0,color:gu[0],icon:xu[0].value,creditLimit:0,safeLimitPercentage:30,serviceChargePercentage:0,statementDate:1})),N([]),h(!0)},O=S=>{if(v({...x,name:S}),S.length>1){const se=dN.filter(he=>he.name.toLowerCase().includes(S.toLowerCase())).slice(0,4);N(se)}else N([])},B=S=>{v({...x,name:S.name,type:S.type,icon:S.icon,color:S.color}),N([])},L=async S=>{if(S.preventDefault(),!x.name.trim()){J.error(\"Please enter an account name\");return}try{y?await u(y.id,x):await c(x),h(!1)}catch(se){console.error(\"Error saving account:\",se)}},R=async S=>{if(confirm(\"Are you sure you want to delete this account? This action cannot be undone.\"))try{await m(S)}catch(se){console.error(\"Error deleting account:\",se)}};return n.jsxs(\"div\",{className:\"space-y-12 animate-in fade-in slide-in-from-bottom-4 duration-700 px-4 pb-24\",children:[n.jsxs(\"div\",{className:\"flex items-end justify-between gap-6\",children:[n.jsxs(\"div\",{className:\"min-w-0\",children:[n.jsx(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tight leading-none mb-3 truncate\",children:\"Accounts & Cards\"}),n.jsxs(\"div\",{className:\"flex flex-wrap gap-2 mb-3\",children:[n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-emerald-500 bg-emerald-500/10 px-2 py-0.5 rounded-lg border border-emerald-500/20 whitespace-nowrap\",children:[i.filter(S=>S.type===\"bank\").length,\" Banks\"]}),n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-rose-500 bg-rose-500/10 px-2 py-0.5 rounded-lg border border-rose-500/20 whitespace-nowrap\",children:[i.filter(S=>S.type===\"credit_card\").length,\" Credit\"]}),n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-amber-500 bg-amber-500/10 px-2 py-0.5 rounded-lg border border-amber-500/20 whitespace-nowrap\",children:[i.filter(S=>S.type===\"cash\").length,\" Cash\"]}),n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-blue-500 bg-blue-500/10 px-2 py-0.5 rounded-lg border border-blue-500/20 whitespace-nowrap\",children:[i.filter(S=>S.type===\"investment\").length,\" Holding\"]})]}),n.jsx(\"p\",{className:\"text-slate-500 font-bold max-w-md text-[10px] truncate\",children:\"Monitor liquidity across core reservoirs and credit pools.\"})]}),n.jsxs(Ge,{onClick:()=>M(),className:\"bg-emerald-600 hover:bg-emerald-500 text-white rounded-xl px-6 h-12 font-bold shadow-lg shadow-emerald-600/20 transition-all active:scale-95 shrink-0\",children:[n.jsx(Nl,{className:\"w-4 h-4 sm:mr-2\"}),n.jsx(\"span\",{className:\"hidden sm:inline\",children:\"Add Account\"}),n.jsx(\"span\",{className:\"sm:hidden\",children:\"Add\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(by,{className:\"w-3.5 h-3.5\"}),\"Bank Accounts\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(S=>S.type===\"bank\").map(S=>n.jsx(P,{account:S},S.id)),i.filter(S=>S.type===\"bank\").length===0&&n.jsx(V,{message:\"No bank accounts detected.\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(yy,{className:\"w-3.5 h-3.5\"}),\"Credit Pools (Cards)\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(S=>S.type===\"credit_card\").map(S=>n.jsx(P,{account:S},S.id)),i.filter(S=>S.type===\"credit_card\").length===0&&n.jsx(V,{message:\"No credit pools detected.\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(Hu,{className:\"w-3.5 h-3.5\"}),\"Cash in Hand\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(S=>S.type===\"cash\").map(S=>n.jsx(P,{account:S},S.id)),i.filter(S=>S.type===\"cash\").length===0&&n.jsx(V,{message:\"No physical liquid reservoirs detected.\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(Si,{className:\"w-3.5 h-3.5\"}),\"Investment Holding Nodes\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(S=>S.type===\"investment\").map(S=>n.jsx(P,{account:S},S.id)),i.filter(S=>S.type===\"investment\").length===0&&n.jsx(\"div\",{className:\"md:col-span-2 lg:col-span-3 p-8 border border-dashed border-white/5 squircle-22 flex items-center justify-center text-slate-600 font-bold text-xs\",children:\"No investment nodes detected. Link them to track growth separately.\"})]})]}),n.jsx(Bs,{open:g,onOpenChange:h,children:n.jsxs(Ls,{className:\"max-w-md max-h-[90vh] overflow-y-auto bg-slate-950 border-white/10 text-white squircle-22 p-8 custom-scrollbar\",children:[n.jsxs(qs,{children:[n.jsx(Is,{className:\"text-3xl font-black tracking-tight text-white mb-2\",children:y?\"Refine Account\":\"New Liquidity Reservoir\"}),n.jsx(Vs,{className:\"text-slate-500 font-bold mb-6\",children:\"Establish a new liquidity pool in the Obsidian system.\"})]}),n.jsxs(\"form\",{onSubmit:L,className:\"space-y-8\",children:[n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"name\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Account Identity\"}),n.jsx(Pt,{id:\"name\",name:\"name\",value:x.name,onChange:S=>O(S.target.value),placeholder:\"e.g. Mercury Checking\",required:!0,className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white focus:ring-emerald-500/50\",autoComplete:\"off\"}),f.length>0&&n.jsxs(\"div\",{className:\"mt-3 p-4 bg-indigo-500/5 border border-indigo-500/10 squircle-12 flex items-start gap-4 animate-in fade-in zoom-in-95 duration-300\",children:[n.jsx(bn,{className:\"w-4 h-4 text-indigo-400 mt-1 flex-shrink-0\"}),n.jsxs(\"div\",{className:\"flex-1\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-widest text-indigo-300 mb-3 opacity-60\",children:\"Intelligence Suggested\"}),n.jsx(\"div\",{className:\"grid grid-cols-1 gap-2\",children:f.map(S=>n.jsxs(\"button\",{type:\"button\",onClick:()=>B(S),className:\"flex items-center gap-3 p-2.5 squircle-12 bg-white/5 hover:bg-white/10 transition-all group border border-white/5\",children:[n.jsx(\"span\",{className:\"text-lg group-hover:scale-110 transition-transform\",children:S.icon}),n.jsx(\"span\",{className:\"text-xs font-bold text-slate-300 group-hover:text-white transition-colors\",children:S.name})]},S.name))})]})]})]}),n.jsxs(\"div\",{className:\"grid grid-cols-3 gap-4\",children:[n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${x.type===\"bank\"?\"border-emerald-500 bg-emerald-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>v({...x,type:\"bank\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-emerald-500/20 flex items-center justify-center text-xl mb-2\",children:\"🏦\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Bank Reservoir\"})]}),n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${x.type===\"credit_card\"?\"border-rose-500 bg-rose-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>v({...x,type:\"credit_card\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-rose-500/20 flex items-center justify-center text-xl mb-2\",children:\"💳\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Credit Pool\"})]}),n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${x.type===\"cash\"?\"border-amber-500 bg-amber-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>v({...x,type:\"cash\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-amber-500/20 flex items-center justify-center text-xl mb-2\",children:\"💵\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Cash in Hand\"})]}),n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${x.type===\"investment\"?\"border-blue-500 bg-blue-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>v({...x,type:\"investment\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-blue-500/20 flex items-center justify-center text-xl mb-2\",children:\"📈\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Growth Node\"})]})]}),n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"balance\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:x.type===\"bank\"||x.type===\"cash\"||x.type===\"investment\"?\"Initial Liquidity\":\"Current Spent Balance\"}),n.jsx(Os,{id:\"balance\",name:\"balance\",value:x.balance,onChange:S=>v({...x,balance:parseFloat(S)||0}),placeholder:\"0.00\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]}),x.type===\"credit_card\"&&n.jsxs(\"div\",{className:\"space-y-6 animate-in slide-in-from-top-4 duration-500\",children:[n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"creditLimit\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Total Credit Limit\"}),n.jsx(Os,{id:\"creditLimit\",name:\"creditLimit\",value:x.creditLimit,onChange:S=>v({...x,creditLimit:parseFloat(S)||0}),placeholder:\"e.g. 100000\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]}),n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"safeLimit\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Safe Use Threshold (%)\"}),n.jsx(Os,{id:\"safeLimit\",name:\"safeLimitPercentage\",value:x.safeLimitPercentage,onChange:S=>v({...x,safeLimitPercentage:parseFloat(S)||30}),placeholder:\"30\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]})]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"serviceCharge\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Svc Charge (%)\"}),n.jsx(Os,{id:\"serviceCharge\",name:\"serviceChargePercentage\",value:x.serviceChargePercentage,onChange:S=>v({...x,serviceChargePercentage:parseFloat(S)||0}),placeholder:\"0.0\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]}),n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"statementDate\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Statement Date\"}),n.jsxs(ha,{value:x.statementDate.toString(),onValueChange:S=>v({...x,statementDate:parseInt(S)}),children:[n.jsx(ga,{id:\"statementDate\",name:\"statementDate\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",children:n.jsx(pa,{})}),n.jsx(xa,{className:\"bg-slate-900 border-white/10 text-white\",children:[...Array(31)].map((S,se)=>n.jsx(vt,{value:(se+1).toString(),children:se+1},se+1))})]})]})]})]}),n.jsxs(\"div\",{children:[n.jsx(Re,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"System Icon\"}),n.jsx(\"div\",{className:\"grid grid-cols-6 sm:grid-cols-9 gap-2\",children:xu.map(S=>n.jsx(\"button\",{type:\"button\",onClick:()=>v({...x,icon:S.value}),className:`w-10 h-10 squircle-12 flex items-center justify-center text-lg border-2 transition-all ${x.icon===S.value?\"border-emerald-500 bg-emerald-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,children:S.value},S.value))})]}),n.jsxs(\"div\",{children:[n.jsx(Re,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Brand Color\"}),n.jsx(\"div\",{className:\"flex flex-wrap gap-3\",children:gu.map(S=>{const se={style:{\"--btn-color\":S}};return n.jsx(\"button\",{type:\"button\",onClick:()=>v({...x,color:S}),\"aria-label\":`Select color ${S}`,className:`w-8 h-8 rounded-full border-4 transition-all bg-[length:100%_100%] bg-[var(--btn-color)] ${x.color===S?\"border-white scale-110 shadow-lg shadow-white/20\":\"border-transparent hover:scale-105\"}`,...se},S)})})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Ge,{type:\"button\",variant:\"ghost\",onClick:()=>h(!1),className:\"flex-1 h-14 squircle-12 font-bold text-slate-500 hover:text-white\",children:\"Abort\"}),n.jsx(Ge,{type:\"submit\",className:\"flex-1 h-14 squircle-12 bg-emerald-600 hover:bg-emerald-500 text-white font-black shadow-lg shadow-emerald-600/20\",children:y?\"Update Account\":\"Ignite Account\"})]})]})]})})]});function P({account:S}){const se=S.type===\"credit_card\",he=se?(S.creditLimit||0)*(S.safeLimitPercentage||30)/100:0,ve=se&&S.creditLimit?Math.abs(S.balance)/S.creditLimit*100:0,fe=se&&ve<=(S.safeLimitPercentage||30);return n.jsxs(aa,{className:\"p-6 bg-slate-900/40 border-white/5 squircle-22 border hover:bg-slate-900/60 transition-all duration-300 group relative overflow-hidden\",children:[(()=>{const ye={style:{\"--card-glow\":S.color}};return n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20 bg-[var(--card-glow)]\",...ye})})(),n.jsxs(\"div\",{className:\"flex items-start justify-between mb-8 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[(()=>{const ye={style:{\"--icon-bg\":S.color+\"15\"}};return n.jsx(\"div\",{className:\"w-16 h-16 squircle-12 flex items-center justify-center text-3xl shadow-inner border border-white/5 group-hover:scale-105 transition-transform bg-[var(--icon-bg)]\",...ye,children:S.icon})})(),n.jsxs(\"div\",{className:\"min-w-0\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100 truncate\",children:S.name}),n.jsxs(\"div\",{className:\"flex items-center gap-1.5 mt-1\",children:[n.jsx(\"div\",{className:`w-1.5 h-1.5 rounded-full ${se?fe?\"bg-indigo-500\":\"bg-rose-500\":\"bg-emerald-500\"}`}),n.jsx(\"span\",{className:\"text-[10px] uppercase font-black tracking-widest text-slate-500\",children:se?\"Credit Pool\":\"Bank Account\"})]})]})]}),n.jsxs(\"div\",{className:\"flex gap-2\",children:[n.jsx(Ge,{variant:\"ghost\",title:\"Edit Account\",size:\"sm\",onClick:()=>M(S),className:\"w-8 h-8 p-0 squircle-12 hover:bg-white/5 text-slate-600 hover:text-white transition-all\",children:n.jsx(vy,{className:\"w-3.5 h-3.5\"})}),n.jsx(Ge,{variant:\"ghost\",title:\"Delete Account\",size:\"sm\",onClick:()=>R(S.id),className:\"w-8 h-8 p-0 squircle-12 hover:bg-rose-500/10 text-slate-600 hover:text-rose-400 transition-all\",children:n.jsx(Ai,{className:\"w-3.5 h-3.5\"})})]})]}),n.jsxs(\"div\",{className:\"pt-6 border-t border-white/5 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-end\",children:[n.jsxs(\"div\",{className:\"space-y-1\",children:[n.jsx(\"p\",{className:\"text-[10px] uppercase font-black tracking-widest text-slate-600\",children:se?\"Current Obligation\":\"Available Liquidity\"}),(()=>{const ye={style:{\"--balance-color\":S.color}};return n.jsx(\"h4\",{className:\"text-2xl font-black tabular-nums tracking-tight text-[var(--balance-color)]\",...ye,children:$e(S.balance,r)})})()]}),se&&S.creditLimit?n.jsxs(\"div\",{className:\"text-right\",children:[n.jsx(\"p\",{className:\"text-[9px] font-black text-slate-600 uppercase mb-1\",children:\"Limit Use\"}),n.jsxs(\"p\",{className:`text-xs font-black tabular-nums ${fe?\"text-indigo-400\":\"text-rose-400\"}`,children:[ve.toFixed(1),\"%\"]})]}):n.jsx(\"div\",{className:\"bg-white/5 px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest text-slate-500 border border-white/5\",children:\"Synced\"})]}),se&&S.creditLimit&&n.jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-white/5 flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"space-y-1\",children:[n.jsx(\"p\",{className:\"text-[8px] font-black text-slate-700 uppercase\",children:\"Safe Threshold\"}),n.jsx(\"p\",{className:\"text-[10px] font-black text-slate-500\",children:$e(he,r)})]}),S.serviceChargePercentage?n.jsxs(\"div\",{className:\"text-right space-y-1\",children:[n.jsx(\"p\",{className:\"text-[8px] font-black text-slate-700 uppercase\",children:\"Svc Charge\"}),n.jsxs(\"p\",{className:\"text-[10px] font-black text-slate-500\",children:[S.serviceChargePercentage,\"%\"]})]}):null,se&&S.statementDate&&n.jsxs(\"div\",{className:\"text-right space-y-1 ml-auto\",children:[n.jsx(\"p\",{className:\"text-[8px] font-black text-slate-700 uppercase\",children:\"Statement\"}),n.jsxs(\"p\",{className:\"text-[10px] font-black text-slate-500\",children:[\"Day \",S.statementDate]})]})]})]})]})}function V({message:S}){return n.jsx(\"div\",{className:\"py-12 text-center bg-slate-800/20 squircle-22 border border-dashed border-white/10 col-span-full\",children:n.jsx(\"p\",{className:\"text-sm text-slate-500 font-bold\",children:S})})}}function mN({isOpen:i,onClose:r,accounts:c,currency:u,onTransfer:m}){const[g,h]=A.useState(\"\"),[y,p]=A.useState(\"\"),[x,v]=A.useState(\"\"),[f,N]=A.useState(!1),M=c.find(V=>V.id===g),O=c.find(V=>V.id===y),B=parseFloat(x)||0,L=()=>{if(!g){J.error(\"Please select source reservoir\");return}if(!y){J.error(\"Please select destination reservoir\");return}if(g===y){J.error(\"Source and destination must be different\");return}if(!x||B<=0){J.error(\"Please enter a valid amount\");return}if(M&&B>M.balance){J.error(\"Insufficient funds in source reservoir\");return}N(!0)},R=()=>{m(g,y,B),P()},P=()=>{h(\"\"),p(\"\"),v(\"\"),N(!1),r()};return n.jsx(Bs,{open:i,onOpenChange:P,children:n.jsxs(Ls,{className:\"max-w-md max-h-[90vh] overflow-y-auto bg-[#020408] border-white/5 p-0 shadow-2xl custom-scrollbar text-white\",children:[n.jsxs(\"div\",{className:\"px-8 pt-10 pb-8 border-b border-white/5 relative overflow-hidden bg-indigo-500/5\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 blur-[60px] opacity-20 -mr-16 -mt-16 bg-indigo-500\"}),n.jsxs(qs,{className:\"relative z-10\",children:[n.jsxs(Is,{className:\"text-2xl font-black tracking-tighter text-slate-100 flex items-center gap-3\",children:[n.jsx(Ru,{className:\"w-6 h-6 text-indigo-400\"}),\"Capital Migration\"]}),n.jsx(Vs,{className:\"text-slate-500 font-bold text-[10px] uppercase tracking-[0.2em] mt-1\",children:\"Transfer between core liquidity reservoirs\"})]})]}),n.jsx(\"div\",{className:\"p-8\",children:f?n.jsxs(\"div\",{className:\"space-y-6 animate-in fade-in zoom-in-95 duration-300\",children:[n.jsxs(\"div\",{className:\"p-6 bg-slate-900/50 border border-white/5 rounded-3xl space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between gap-4\",children:[n.jsxs(\"div\",{className:\"flex-1 text-center space-y-2\",children:[n.jsx(\"div\",{className:\"w-12 h-12 rounded-2xl bg-slate-800 border border-white/10 flex items-center justify-center text-2xl mx-auto\",children:M?.icon}),n.jsx(\"p\",{className:\"text-[10px] font-black uppercase text-slate-500 truncate\",children:M?.name})]}),n.jsxs(\"div\",{className:\"flex flex-col items-center gap-1\",children:[n.jsx(Ru,{className:\"w-6 h-6 text-indigo-400 animate-pulse\"}),n.jsx(\"p\",{className:\"text-[10px] font-black text-indigo-400\",children:$e(B,u)})]}),n.jsxs(\"div\",{className:\"flex-1 text-center space-y-2\",children:[n.jsx(\"div\",{className:\"w-12 h-12 rounded-2xl bg-slate-800 border border-white/10 flex items-center justify-center text-2xl mx-auto\",children:O?.icon}),n.jsx(\"p\",{className:\"text-[10px] font-black uppercase text-slate-500 truncate\",children:O?.name})]})]}),n.jsxs(\"div\",{className:\"space-y-4 pt-4 border-t border-white/5\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-center text-xs\",children:[n.jsx(\"span\",{className:\"text-slate-500 font-bold\",children:\"Source New Balance\"}),n.jsx(\"span\",{className:\"text-rose-400 font-black\",children:$e((M?.balance||0)-B,u)})]}),n.jsxs(\"div\",{className:\"flex justify-between items-center text-xs\",children:[n.jsx(\"span\",{className:\"text-slate-500 font-bold\",children:\"Dest. New Balance\"}),n.jsx(\"span\",{className:\"text-emerald-400 font-black\",children:$e((O?.balance||0)+B,u)})]})]})]}),n.jsxs(\"div\",{className:\"p-4 bg-amber-500/5 border border-amber-500/10 rounded-2xl flex gap-3\",children:[n.jsx(wy,{className:\"w-5 h-5 text-amber-500 flex-shrink-0\"}),n.jsx(\"p\",{className:\"text-[10px] text-amber-200/60 font-medium leading-relaxed\",children:\"Notice: This migration will instantly adjust the liquidity status of both reservoirs. This action is recorded in the central protocol.\"})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Ge,{variant:\"ghost\",onClick:()=>N(!1),className:\"flex-1 h-12 rounded-2xl text-slate-500 font-bold hover:bg-white/5\",children:\"Back\"}),n.jsx(Ge,{onClick:R,className:\"flex-1 h-12 rounded-2xl bg-indigo-600 hover:bg-indigo-500 text-white font-black shadow-lg shadow-indigo-600/20 transition-all active:scale-95\",children:\"Confirm Migration\"})]})]}):n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(Re,{htmlFor:\"source-reservoir\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Source Reservoir\"}),n.jsxs(ha,{value:g,onValueChange:h,children:[n.jsx(ga,{id:\"source-reservoir\",className:\"h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-200 font-bold\",children:n.jsx(pa,{placeholder:\"Select source\"})}),n.jsx(xa,{className:\"bg-slate-900 border-white/5 max-h-[40vh]\",children:c.map(V=>n.jsx(vt,{value:V.id,className:\"focus:bg-white/5 focus:text-white\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between w-full pr-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-xl\",children:V.icon}),n.jsx(\"span\",{children:V.name})]}),n.jsx(\"span\",{className:\"text-xs font-black text-slate-500\",children:$e(V.balance,u)})]})},V.id))})]})]}),n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(Re,{htmlFor:\"dest-reservoir\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Destination Reservoir\"}),n.jsxs(ha,{value:y,onValueChange:p,children:[n.jsx(ga,{id:\"dest-reservoir\",className:\"h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-200 font-bold\",children:n.jsx(pa,{placeholder:\"Select destination\"})}),n.jsx(xa,{className:\"bg-slate-900 border-white/5 max-h-[40vh]\",children:c.map(V=>n.jsx(vt,{value:V.id,className:\"focus:bg-white/5 focus:text-white\",disabled:V.id===g,children:n.jsxs(\"div\",{className:\"flex items-center justify-between w-full pr-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-xl\",children:V.icon}),n.jsx(\"span\",{children:V.name})]}),n.jsx(\"span\",{className:\"text-xs font-black text-slate-500\",children:$e(V.balance,u)})]})},V.id))})]})]}),n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(Re,{htmlFor:\"migration-amount\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Capital Amount\"}),n.jsxs(\"div\",{className:\"relative group\",children:[n.jsx(\"div\",{className:\"absolute left-5 top-1/2 -translate-y-1/2 text-slate-500 font-bold group-focus-within:text-indigo-400 transition-colors\",children:u===\"INR\"?\"₹\":\"$\"}),n.jsx(Pt,{id:\"migration-amount\",name:\"amount\",type:\"number\",placeholder:\"0.00\",value:x,onChange:V=>v(V.target.value),className:\"pl-12 h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-100 font-black text-xl\"})]}),M&&B>M.balance&&n.jsxs(\"div\",{className:\"flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-rose-400 ml-1 animate-in slide-in-from-top-1\",children:[n.jsx(zu,{className:\"w-3 h-3\"}),n.jsx(\"span\",{children:\"Insufficient stability in source reservoir\"})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Ge,{variant:\"ghost\",onClick:P,className:\"flex-1 h-12 rounded-2xl text-slate-500 font-bold hover:bg-white/5\",children:\"Cancel\"}),n.jsx(Ge,{onClick:L,className:\"flex-1 h-12 rounded-2xl bg-indigo-600 hover:bg-indigo-500 text-white font-black shadow-lg shadow-indigo-600/20 transition-all active:scale-95\",children:\"Verify Migration\"})]})]})})]})})}function hN({onRefresh:i,children:r}){const c=A.useRef(0),[u,m]=A.useState(0),[g,h]=A.useState(!1),y=A.useRef(null),p=80,x=f=>{y.current&&y.current.scrollTop===0&&(c.current=f.touches[0].clientY)};A.useEffect(()=>{const f=M=>{if(c.current===0)return;const B=M.touches[0].clientY-c.current;if(B>0&&y.current&&y.current.scrollTop===0){M.cancelable&&M.preventDefault();const L=Math.min(B,p*1.5);L>=p&&u<p&&window.navigator.vibrate&&window.navigator.vibrate(10),m(L)}},N=y.current;return N&&N.addEventListener(\"touchmove\",f,{passive:!1}),()=>{N&&N.removeEventListener(\"touchmove\",f)}},[]);const v=async()=>{u>=p&&!g&&(h(!0),await i(),h(!1)),m(0),c.current=0};return n.jsxs(\"div\",{ref:y,className:\"relative overflow-y-auto\",onTouchStart:x,onTouchEnd:v,children:[n.jsx(Oe.div,{className:\"absolute top-0 left-0 right-0 flex justify-center items-center\",style:{height:u,opacity:u/p},animate:{y:g?0:-p},children:n.jsxs(\"div\",{className:\"flex flex-col items-center gap-2 py-4\",children:[n.jsx(Oe.div,{animate:{rotate:g?360:u/p*180},transition:{rotate:{duration:g?1:0,repeat:g?1/0:0,ease:\"linear\"}},children:n.jsx(Wr,{className:\"w-6 h-6 text-[#0A84FF]\"})}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-[0.2em] text-[#8E8E93]\",children:g?\"Synchronizing...\":u>=p?\"Relinquish to Sync\":\"Pull to Synchronize\"})]})}),n.jsx(Oe.div,{animate:{y:g?60:0},transition:{duration:.2},children:r})]})}function Rs({className:i,...r}){return n.jsx(\"div\",{\"data-slot\":\"skeleton\",className:ct(\"bg-accent animate-pulse rounded-md\",i),...r})}function pN(){return n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(aa,{className:\"p-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 mb-4\",children:[n.jsx(Rs,{className:\"w-12 h-12 rounded-lg\"}),n.jsxs(\"div\",{className:\"space-y-2 flex-1\",children:[n.jsx(Rs,{className:\"h-5 w-32\"}),n.jsx(Rs,{className:\"h-4 w-48\"})]})]}),n.jsx(\"div\",{className:\"grid grid-cols-3 gap-3\",children:[1,2,3].map(i=>n.jsx(\"div\",{className:\"space-y-2\",children:n.jsx(Rs,{className:\"h-20 w-full rounded-lg\"})},i))})]}),[1,2,3].map(i=>n.jsx(aa,{className:\"p-6\",children:n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(Rs,{className:\"h-6 w-48\"}),n.jsx(Rs,{className:\"h-4 w-full\"}),n.jsx(Rs,{className:\"h-4 w-3/4\"})]})},i))]})}function gN(i,r,c=30){let u=0;const m=h=>{u=h.touches[0].clientX},g=h=>{const p=h.touches[0].clientX-u;u<c&&p>30&&(h.cancelable&&h.preventDefault(),window.navigator.vibrate&&window.navigator.vibrate(20),i(),u=window.innerWidth),u>window.innerWidth-c&&p<-30&&(h.cancelable&&h.preventDefault(),window.navigator.vibrate&&window.navigator.vibrate(20),r(),u=0)};return document.addEventListener(\"touchstart\",m,{passive:!0}),document.addEventListener(\"touchmove\",g,{passive:!1}),()=>{document.removeEventListener(\"touchstart\",m),document.removeEventListener(\"touchmove\",g)}}const xN=({onOpenAI:i,onAddTransaction:r,onMigrate:c,isVisible:u})=>n.jsxs(\"div\",{id:\"fab-dock\",className:`fixed right-5 bottom-[110px] flex flex-col gap-3.5 z-[110] transition-all duration-500 ease-quantum ${u?\"translate-x-0 opacity-100\":\"translate-x-[100px] opacity-0\"}`,children:[n.jsx(\"div\",{onClick:i,title:\"AI Assistant\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-[#a855f74d] shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-[#A855F7] hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(bn,{className:\"w-5 h-5 group-hover:rotate-12 transition-transform\"})}),n.jsx(\"div\",{onClick:c,title:\"Migrate Capital\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-indigo-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-indigo-400 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(Ru,{className:\"w-5 h-5 group-hover:scale-110 transition-transform\"})}),n.jsx(\"div\",{onClick:()=>r(\"debt\"),title:\"Added Personal IOU\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-yellow-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-yellow-500 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(tp,{className:\"w-5 h-5 group-hover:-translate-y-0.5 transition-transform\"})}),n.jsx(\"div\",{onClick:()=>r(\"income\"),title:\"Add Money In\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-emerald-500/40 shadow-[0_0_20px_rgba(16,185,129,0.1)] cursor-pointer text-emerald-500 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(Nl,{className:\"w-5 h-5 group-hover:rotate-90 transition-transform\"})}),n.jsx(\"div\",{onClick:()=>r(\"expense\"),title:\"Add Money Out\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-rose-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-rose-500 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(jy,{className:\"w-5 h-5 group-hover:scale-110 transition-transform\"})})]}),bN=({isOpen:i,onClose:r,context:c,settings:u,isOffline:m=!1})=>{const[g,h]=A.useState(\"\"),[y,p]=A.useState([{text:\"Hello! I've analyzed your cash flow. How can I assist with your goals?\",type:\"ai\"}]),[x,v]=A.useState(!1),f=A.useRef(null);A.useEffect(()=>{f.current&&f.current.scrollIntoView({behavior:\"smooth\"})},[y]);const N=async()=>{if(!g.trim()||x)return;const M=g.trim();h(\"\"),p(O=>[...O,{text:M,type:\"user\"}]),v(!0);try{if(m){setTimeout(()=>{p(B=>[...B,{text:\"FinHub is currently in 'Cached View' (Offline). I've analyzed your local financial fabric: your liquidity nodes are stable, but synchronizing with global AI intelligence requires a stable link. How can I help you optimize your local state?\",type:\"ai\"}]),v(!1)},1e3);return}const O=await eN({userPrompt:M,context:c,settings:u,persona:\"ANALYST\"});O.error?p(B=>[...B,{text:O.error,type:\"ai\"}]):p(B=>[...B,{text:O.text||\"Analyzing financial pattern...\",type:\"ai\"}])}catch{p(B=>[...B,{text:\"Connection error. FinHub has transitioned to local 'Cached View'.\",type:\"ai\"}])}finally{m||v(!1)}};return i?n.jsxs(\"div\",{id:\"ai-chat-overlay\",className:\"fixed inset-0 bg-[#020408] z-[200] flex flex-col p-6 animate-in fade-in zoom-in-95 duration-300\",children:[n.jsx(\"div\",{className:\"absolute inset-0 bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-indigo-500/10 via-transparent to-transparent opacity-50\"}),n.jsxs(\"div\",{className:\"flex justify-between items-center mb-10 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-indigo-500/10 rounded-2xl flex items-center justify-center border border-indigo-500/20\",children:n.jsx(bn,{className:\"text-indigo-400 w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"h2\",{className:\"font-black text-2xl text-white tracking-tight leading-none\",children:\"AI Analyst\"}),n.jsxs(\"div\",{className:\"flex items-center gap-2 mt-1\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500\",children:\"Neural Core Context\"}),m&&n.jsx(\"span\",{className:\"text-[8px] bg-amber-500/10 text-amber-500 px-1.5 py-0.5 rounded border border-amber-500/20 font-black tracking-tighter uppercase\",children:\"Cached View\"})]})]})]}),n.jsx(\"button\",{onClick:r,\"aria-label\":\"Close Chat\",className:\"bg-white/5 w-12 h-12 rounded-full flex items-center justify-center hover:bg-white/10 hover:text-white text-slate-400 transition-all active:scale-95\",children:n.jsx(Tl,{className:\"w-6 h-6\"})})]}),n.jsxs(\"div\",{id:\"chat-messages\",className:\"flex-1 overflow-y-auto space-y-4 pr-2 custom-scrollbar\",children:[y.map((M,O)=>n.jsxs(\"div\",{className:ct(\"p-4 rounded-[24px] text-sm leading-relaxed\",M.type===\"ai\"?\"bg-slate-900 border border-white/5 text-slate-200 self-start max-w-[85%]\":\"bg-indigo-600 text-white font-medium shadow-lg shadow-indigo-600/20 self-end max-w-[85%]\"),children:[M.type===\"ai\"&&n.jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[n.jsx(bn,{className:\"w-3 h-3 text-indigo-400 font-black\"}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500\",children:\"Guru Analysis\"})]}),M.text]},O)),x&&n.jsx(\"div\",{className:\"p-4 bg-slate-900 border border-white/5 rounded-[24px] self-start animate-pulse\",children:n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:0ms]\"}),n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:150ms]\"}),n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:300ms]\"})]})}),n.jsx(\"div\",{ref:f})]}),n.jsxs(\"div\",{className:\"mt-8 flex gap-3 p-2 bg-slate-900/40 rounded-[28px] border border-white/5 relative z-10\",children:[n.jsx(\"input\",{type:\"text\",value:g,onChange:M=>h(M.target.value),onKeyDown:M=>M.key===\"Enter\"&&N(),placeholder:\"Ask the analyst...\",className:\"flex-1 bg-transparent border-none px-6 py-4 text-white focus:outline-none placeholder:text-slate-600 font-bold\"}),n.jsx(\"button\",{onClick:N,disabled:x||!g.trim(),\"aria-label\":\"Send Message\",className:\"w-14 h-14 bg-indigo-600 rounded-[22px] flex items-center justify-center shadow-lg shadow-indigo-900/30 hover:bg-indigo-500 transition-all active:scale-90 disabled:opacity-50 disabled:cursor-not-allowed group\",children:n.jsx(Ny,{className:\"w-6 h-6 text-white group-hover:-translate-y-1 transition-transform\"})})]}),n.jsx(\"p\",{className:\"text-[9px] font-bold text-slate-600 text-center uppercase tracking-widest mt-4\",children:\"Encryption Verified // Neural Fabric Link Stable\"})]}):null};class yN extends A.Component{state={hasError:!1};static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,c){console.error(\"Uncaught error:\",r,c)}render(){return this.state.hasError?n.jsx(\"div\",{className:\"min-h-[400px] flex items-center justify-center p-6\",children:n.jsxs(aa,{className:\"max-w-md w-full p-8 bg-slate-900 border-white/10 text-center space-y-6 rounded-[32px]\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-rose-500/10 rounded-full flex items-center justify-center mx-auto\",children:n.jsx(Jr,{className:\"w-8 h-8 text-rose-500\"})}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(\"h2\",{className:\"text-xl font-black text-white uppercase tracking-tight\",children:\"System Glitch Detected\"}),n.jsx(\"p\",{className:\"text-sm text-slate-400 font-medium\",children:\"The neural link to this component was interrupted. This usually happens during background updates.\"})]}),this.state.error&&n.jsx(\"pre\",{className:\"text-[10px] bg-black/40 p-3 rounded-xl text-rose-400/80 overflow-x-auto text-left font-mono\",children:this.state.error.message}),n.jsxs(Ge,{onClick:()=>window.location.reload(),className:\"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-black py-6 rounded-2xl gap-2 h-auto\",children:[n.jsx(Wr,{className:\"w-4 h-4\"}),\"Re-establish Connection\"]})]})}):this.props.children}}const vN=()=>{const{checkIdentity:i,login:r,signup:c,sendOtp:u,verifyOtp:m,resetPin:g,isRememberedUser:h,rememberedMobile:y,pendingMobile:p,clearPendingSession:x}=Di(),[v,f]=A.useState(\"identity\"),[N,M]=A.useState(\"\"),[O,B]=A.useState(\"\"),[L,R]=A.useState(\"\"),[P,V]=A.useState(\"\"),[S,se]=A.useState(\"\"),[he,ve]=A.useState(\"\"),[fe,ye]=A.useState(!1),[Se,qe]=A.useState(!1),[Te,ee]=A.useState(!1),[me,G]=A.useState(!1),C=A.useRef(null);A.useEffect(()=>{h&&y?(M(y),f(\"verify\"),Y()):p&&(M(p),f(\"verify\"))},[h,y,p]);const Y=async()=>{G(!0),setTimeout(async()=>{Math.random()>.2?await r(\"2255\",!0)||G(!1):(G(!1),navigator.vibrate&&navigator.vibrate([50,50]))},1500)};A.useEffect(()=>{v===\"identity\"&&N.length===10&&oe()},[N,v]),A.useEffect(()=>{v===\"verify\"&&O.length===4&&re()},[O,v]),A.useEffect(()=>{C.current&&(C.current.focus(),C.current.type!==\"hidden\"&&C.current.select())},[v]);const oe=async()=>{if(N.length!==10)return;const xe=await i(N);f(xe?\"verify\":\"create_name\"),B(\"\")},ge=async()=>{await u(N)&&f(\"otp_reset\")},z=async()=>{if(L.trim().length<2)return;await u(N)&&f(\"otp_verify\")},T=async()=>{await m(N,P)?f(v===\"otp_verify\"?\"create_pin\":\"reset_pin\"):$()},re=async()=>{v===\"verify\"?await r(O,Se)?(navigator.vibrate&&navigator.vibrate([10]),!Se&&!h&&ee(!0)):$():v===\"create_pin\"?O.length===4&&(await c(N,O,L,Se)||$()):v===\"reset_pin\"&&(S===he&&S.length===4&&await g(N,S)?(f(\"verify\"),B(\"\"),se(\"\"),ve(\"\")):$())},$=()=>{ye(!0),navigator.vibrate&&navigator.vibrate([50,30,50]),setTimeout(()=>ye(!1),500),V(\"\"),B(\"\"),ve(\"\")},le=()=>v===\"identity\"?N.length!==10:v===\"verify\"?O.length!==4:v===\"otp_verify\"||v===\"otp_reset\"?P.length!==4:v===\"create_name\"?L.trim().length<2:v===\"create_pin\"?O.length!==4:v===\"reset_pin\"?S.length!==4||he.length!==4:!1,ue=()=>{x(),f(\"identity\"),M(\"\"),B(\"\")},Ne=xe=>{xe.key===\"Enter\"&&!le()&&je()()},je=()=>{switch(v){case\"identity\":return oe;case\"otp_verify\":case\"otp_reset\":return T;case\"create_name\":return z;case\"verify\":case\"create_pin\":case\"reset_pin\":return re;default:return()=>{}}},de=()=>{switch(v){case\"identity\":return\"Continue\";case\"otp_verify\":case\"otp_reset\":return\"Verify OTP\";case\"create_name\":return\"Next\";case\"verify\":return\"Login\";case\"create_pin\":return\"Create Account\";case\"reset_pin\":return\"Reset PIN\";default:return\"Continue\"}};return n.jsxs(\"div\",{className:\"fixed inset-0 flex flex-col items-center justify-center overflow-hidden font-sans auth-mesh-gradient z-[9999999]\",children:[n.jsx(\"div\",{className:\"absolute inset-0 z-0 bg-[url('/mesh-grid.svg')] opacity-20\"}),n.jsxs(Oe.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},className:\"absolute top-12 z-10 flex flex-col items-center gap-2\",children:[n.jsx(\"img\",{src:\"/images/logo-dark.png\",alt:\"FinHub\",className:\"h-12 w-auto\"}),n.jsx(\"span\",{className:\"text-xs font-medium text-white/40 tracking-widest uppercase\",children:\"v0.1 Beta\"})]}),n.jsxs(\"div\",{className:\"z-10 w-full max-w-sm px-8\",children:[n.jsxs(Bn,{mode:\"wait\",children:[v===\"identity\"&&n.jsxs(Oe.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},exit:{x:-20,opacity:0},className:\"flex flex-col gap-6\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Welcome\"}),n.jsx(\"p\",{className:\"text-white/50 text-sm mt-2\",children:\"Enter your mobile number to continue\"})]}),n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-sky-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"Mobile Number\"}),n.jsx(\"input\",{ref:C,type:\"text\",inputMode:\"numeric\",maxLength:10,value:N,onChange:xe=>M(xe.target.value.replace(/\\D/g,\"\")),onKeyDown:Ne,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"999 999 9999\"})]}),n.jsxs(\"div\",{onClick:()=>{qe(!Se),navigator.vibrate&&navigator.vibrate(5)},className:\"flex items-center gap-3 cursor-pointer self-center\",children:[n.jsx(\"div\",{className:`h-5 w-5 rounded-md border transition-all flex items-center justify-center ${Se?\"bg-sky-500 border-sky-500\":\"border-white/20 bg-white/5\"}`,children:Se&&n.jsx(Sl,{className:\"h-3.5 w-3.5 text-white\"})}),n.jsx(\"span\",{className:\"text-sm text-white/60 font-medium\",children:\"Remember me for 30 days\"})]})]},\"identity\"),v===\"create_name\"&&n.jsxs(Oe.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},exit:{x:-20,opacity:0},className:\"flex flex-col gap-6\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Who are you?\"}),n.jsx(\"p\",{className:\"text-white/50 text-sm mt-2\",children:\"Personalize your node experience\"})]}),n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-sky-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"Full Name\"}),n.jsx(\"input\",{ref:C,type:\"text\",value:L,onChange:xe=>R(xe.target.value),onKeyDown:Ne,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"Joe Doe\"})]})]},\"create_name\"),(v===\"otp_verify\"||v===\"otp_reset\")&&n.jsxs(Oe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,x:fe?[0,-10,10,-10,10,0]:0},exit:{scale:1.1,opacity:0},className:\"relative flex flex-col gap-8 items-center\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"div\",{className:\"mb-4 flex justify-center\",children:n.jsx(\"div\",{className:\"p-4 rounded-full bg-white/5 ring-1 ring-white/10\",children:n.jsx(Sy,{className:\"h-8 w-8 text-sky-400\"})})}),n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Verify Node\"}),n.jsxs(\"p\",{className:\"text-white/40 text-sm mt-2\",children:[\"Enter the 4-digit code sent to\",n.jsx(\"br\",{}),n.jsx(\"span\",{className:\"text-white/70\",children:N})]})]}),n.jsxs(\"div\",{className:\"group relative flex flex-col items-center justify-center rounded-[32px] bg-white/5 p-10 ring-1 ring-white/10 backdrop-blur-md\",children:[n.jsx(\"div\",{className:\"flex gap-5\",children:[0,1,2,3].map(xe=>n.jsx(Oe.div,{animate:{scale:xe<P.length?1.2:1,backgroundColor:xe<P.length?\"#fff\":\"rgba(255,255,255,0.1)\"},transition:{duration:.1},className:\"h-3.5 w-3.5 rounded-full\"},xe))}),n.jsx(\"input\",{ref:C,type:\"password\",inputMode:\"numeric\",maxLength:4,value:P,onChange:xe=>V(xe.target.value.replace(/\\D/g,\"\")),onKeyDown:Ne,className:\"absolute inset-0 opacity-0 cursor-default\",\"aria-label\":\"One-time Password\",placeholder:\"OTP\"})]})]},\"otp\"),v===\"reset_pin\"&&n.jsxs(Oe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,x:fe?[0,-10,10,-10,10,0]:0},exit:{scale:1.1,opacity:0},className:\"relative flex flex-col gap-8 items-center\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"div\",{className:\"mb-4 flex justify-center\",children:n.jsx(\"div\",{className:\"p-4 rounded-full bg-white/5 ring-1 ring-white/10\",children:n.jsx(Ay,{className:\"h-8 w-8 text-amber-400\"})})}),n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Reset PIN\"}),n.jsx(\"p\",{className:\"text-white/40 text-sm mt-2\",children:\"Choose a new secure 4-digit access code\"})]}),n.jsxs(\"div\",{className:\"space-y-4 w-full\",children:[n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-amber-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"New PIN\"}),n.jsx(\"input\",{type:\"password\",inputMode:\"numeric\",maxLength:4,value:S,onChange:xe=>se(xe.target.value.replace(/\\D/g,\"\")),onKeyDown:Ne,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"****\"})]}),n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-amber-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"Confirm PIN\"}),n.jsx(\"input\",{type:\"password\",inputMode:\"numeric\",maxLength:4,value:he,onChange:xe=>ve(xe.target.value.replace(/\\D/g,\"\")),onKeyDown:Ne,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"****\"})]})]})]},\"reset_pin\"),(v===\"verify\"||v===\"create_pin\")&&n.jsxs(Oe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,x:fe?[0,-10,10,-10,10,0]:0},exit:{scale:1.1,opacity:0},className:\"relative flex flex-col gap-8 items-center\",children:[n.jsx(Oe.div,{initial:{opacity:0},animate:{opacity:1},className:\"fixed inset-0 z-[-1] bg-black/80 backdrop-blur-xl\"}),n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(Oe.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:\"mb-4 flex justify-center\",children:n.jsx(\"div\",{className:\"p-4 rounded-full bg-white/5 ring-1 ring-white/10\",children:n.jsx(Ti,{className:\"h-8 w-8 text-sky-400\"})})}),n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:v===\"verify\"?\"Private Access\":\"Secure Setup\"}),n.jsx(\"p\",{className:\"text-white/40 text-sm mt-2\",children:v===\"verify\"?\"Encrypted PIN required\":\"Create your master PIN\"})]}),n.jsxs(\"div\",{className:\"group relative flex flex-col items-center justify-center rounded-[32px] bg-white/5 p-10 ring-1 ring-white/10 backdrop-blur-md\",children:[n.jsx(\"div\",{className:\"flex gap-5\",children:[0,1,2,3].map(xe=>n.jsx(Oe.div,{animate:{scale:xe<O.length?1.2:1,backgroundColor:xe<O.length?\"#fff\":\"rgba(255,255,255,0.1)\"},transition:{duration:.1},className:\"h-3.5 w-3.5 rounded-full\"},xe))}),n.jsx(\"input\",{ref:C,type:\"password\",inputMode:\"numeric\",maxLength:4,value:O,onChange:xe=>B(xe.target.value.replace(/\\D/g,\"\")),onKeyDown:Ne,className:\"absolute inset-0 opacity-0 cursor-default\",\"aria-label\":\"Access PIN\",placeholder:\"PIN\"})]}),v===\"verify\"&&n.jsxs(\"div\",{className:\"flex flex-col items-center gap-4\",children:[n.jsxs(\"button\",{onClick:Y,className:\"flex items-center gap-2 text-sky-400 text-sm font-medium\",children:[n.jsx(_s,{className:\"h-5 w-5\"}),\" Use Biometrics\"]}),n.jsx(\"button\",{onClick:ge,className:\"text-white/30 text-xs hover:text-white/50 transition-colors\",children:\"Forgot PIN? Reset via SMS\"}),n.jsx(\"button\",{onClick:ue,className:\"text-sky-500/50 text-[10px] font-bold uppercase tracking-widest hover:text-sky-400/80 transition-colors mt-2\",children:\"Login with another account\"})]})]},\"pin\")]}),n.jsxs(Oe.button,{onClick:je(),disabled:le(),className:`mt-8 flex w-full items-center justify-center gap-2 rounded-[22px] py-4 text-base font-semibold text-white shadow-lg transition-all ${le()?\"cursor-not-allowed bg-[#3A3A3C] opacity-50\":\"bg-gradient-to-r from-[#0A84FF] to-[#0047AB] shadow-sky-500/20 active:scale-95\"}`,whileTap:{scale:.98},children:[de(),!le()&&n.jsx(ap,{className:\"h-4 w-4\"})]})]}),n.jsx(Bn,{children:Te&&n.jsx(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"fixed inset-0 z-[60] flex items-end justify-center bg-black/60 p-6 backdrop-blur-sm\",children:n.jsxs(Oe.div,{initial:{y:100},animate:{y:0},exit:{y:100},className:\"w-full max-w-sm rounded-[32px] bg-[#1C1C1E] p-8 text-center ring-1 ring-white/10 shadow-2xl\",children:[n.jsx(\"div\",{className:\"mx-auto mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-sky-500/20 text-sky-400\",children:n.jsx(Sl,{className:\"h-8 w-8\"})}),n.jsx(\"h3\",{className:\"text-xl font-bold text-white\",children:\"Speed up your next login?\"}),n.jsx(\"p\",{className:\"mt-2 text-sm text-white/50\",children:\"We can securely remember your ID so you can skip the mobile entry next time.\"}),n.jsxs(\"div\",{className:\"mt-8 flex flex-col gap-3\",children:[n.jsx(\"button\",{onClick:()=>{localStorage.setItem(\"finhub_remembered_mobile\",N),ee(!1)},className:\"w-full rounded-2xl bg-sky-500 py-4 font-semibold text-white active:scale-95 transition-all\",children:\"Enable Smart Login\"}),n.jsx(\"button\",{onClick:()=>ee(!1),className:\"w-full py-2 text-sm font-medium text-white/30 active:text-white/50\",children:\"Maybe later\"})]})]})})}),n.jsx(Bn,{children:me&&n.jsx(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"fixed inset-0 z-[70] flex flex-col items-center justify-center bg-black/40 backdrop-blur-md\",children:n.jsxs(Oe.div,{initial:{scale:.8},animate:{scale:1},className:\"flex flex-col items-center\",children:[n.jsxs(\"div\",{className:\"relative mb-6\",children:[n.jsx(Oe.div,{animate:{scale:[1,1.2,1],opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0},className:\"absolute inset-0 rounded-full bg-sky-500/30 blur-2xl\"}),n.jsx(\"div\",{className:\"relative flex h-24 w-24 items-center justify-center rounded-full bg-white/5 ring-1 ring-white/20\",children:n.jsx(_s,{className:\"h-12 w-12 text-sky-400\"})})]}),n.jsx(\"h3\",{className:\"text-lg font-medium text-white\",children:\"Scanning Biometrics\"}),n.jsx(\"p\",{className:\"mt-2 text-sm text-white/40 italic\",children:\"Verifying your node identity...\"}),n.jsx(\"button\",{onClick:()=>G(!1),className:\"mt-12 text-xs font-medium uppercase tracking-widest text-white/20 hover:text-white/40\",children:\"Cancel & use PIN\"})]})})}),n.jsx(\"div\",{className:\"absolute bottom-8 text-center text-[10px] text-white/20\",children:n.jsx(\"p\",{children:\"Protected by FinHub Node Protocols. Data is localized and encrypted.\"})})]})},H0=({message:i=\"Secure Node Handshake\",subMessage:r=\"Re-encrypting local session...\"})=>n.jsxs(\"div\",{className:\"fixed inset-0 z-[100] flex flex-col items-center justify-center bg-[#000000] overflow-hidden\",children:[n.jsx(Oe.div,{animate:{opacity:[.1,.2,.1],scale:[1,1.1,1]},transition:{duration:4,repeat:1/0,ease:\"easeInOut\"},className:\"absolute h-[500px] w-[500px] rounded-full bg-sky-500/10 blur-[120px]\"}),n.jsxs(\"div\",{className:\"relative flex flex-col items-center justify-center gap-12\",children:[n.jsxs(\"div\",{className:\"relative flex items-center justify-center\",children:[[0,1,2].map(c=>n.jsx(Oe.div,{className:\"absolute rounded-full border border-sky-400/20\",initial:{width:80,height:80,opacity:0},animate:{width:[80,250],height:[80,250],opacity:[.4,0]},transition:{duration:3,repeat:1/0,delay:c*1,ease:\"easeOut\"}},c)),n.jsx(Oe.div,{animate:{y:[0,-10,0]},transition:{duration:4,repeat:1/0,ease:\"easeInOut\"},className:\"relative z-10\",children:n.jsx(Oe.div,{animate:{scale:[1,1.1,1],filter:[\"drop-shadow(0 0 15px rgba(56,189,248,0.3))\",\"drop-shadow(0 0 30px rgba(56,189,248,0.6))\",\"drop-shadow(0 0 15px rgba(56,189,248,0.3))\"]},transition:{duration:3,repeat:1/0,ease:\"easeInOut\"},className:\"relative flex h-32 w-32 items-center justify-center rounded-[32px] bg-gradient-to-br from-[#1C1C1E] to-[#000000] ring-1 ring-white/10 shadow-2xl backdrop-blur-xl\",children:n.jsx(\"img\",{src:\"/images/logo-icon.png\",alt:\"FinHub\",className:\"h-20 w-20 object-contain drop-shadow-lg\"})})})]}),n.jsx(Oe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:\"flex flex-col items-center gap-2\",children:n.jsxs(\"div\",{className:\"flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/5 ring-1 ring-white/5 backdrop-blur-md\",children:[n.jsx(Ti,{className:\"h-3 w-3 text-sky-400\"}),n.jsx(\"span\",{className:\"text-[10px] font-bold tracking-[0.2em] uppercase text-white/40\",children:i})]})})]}),n.jsxs(\"div\",{className:\"absolute bottom-16 w-full max-w-[200px] px-6\",children:[n.jsx(\"div\",{className:\"h-[2px] w-full overflow-hidden rounded-full bg-white/10\",children:n.jsx(Oe.div,{initial:{x:\"-100%\"},animate:{x:\"100%\"},transition:{duration:1.5,repeat:1/0,ease:\"easeInOut\"},className:\"h-full w-1/3 bg-gradient-to-r from-transparent via-sky-400 to-transparent\"})}),n.jsx(\"div\",{className:\"mt-3 text-center\",children:n.jsx(\"span\",{className:\"text-[10px] font-medium text-white/20 italic tracking-wider\",children:r})})]})]}),wN=({isOpen:i,onClose:r})=>n.jsx(Bn,{children:i&&n.jsxs(n.Fragment,{children:[n.jsx(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,className:\"fixed inset-0 z-[200] bg-black/60 backdrop-blur-sm\"}),n.jsx(\"div\",{className:\"fixed inset-0 z-[201] flex items-center justify-center p-4 pointer-events-none\",children:n.jsxs(Oe.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:\"spring\",damping:25,stiffness:300},className:\"w-full max-w-md bg-slate-900 border border-white/5 rounded-[32px] shadow-2xl overflow-hidden pointer-events-auto relative\",children:[n.jsx(\"div\",{className:\"absolute top-0 inset-x-0 h-32 bg-gradient-to-b from-indigo-500/10 to-transparent pointer-events-none\"}),n.jsx(\"button\",{onClick:r,className:\"absolute top-6 right-6 p-2 rounded-full bg-white/5 text-slate-400 hover:text-white hover:bg-white/10 transition-colors z-10\",\"aria-label\":\"Close about us popup\",children:n.jsx(Tl,{className:\"w-5 h-5\"})}),n.jsxs(\"div\",{className:\"p-8 pt-12 space-y-8 relative\",children:[n.jsxs(\"div\",{className:\"flex flex-col items-center text-center gap-3\",children:[n.jsx(\"div\",{className:\"w-16 h-16 rounded-[22px] bg-indigo-600 flex items-center justify-center shadow-lg shadow-indigo-500/20\",children:n.jsx(Dy,{className:\"w-8 h-8 text-white\"})}),n.jsxs(\"div\",{children:[n.jsx(\"h2\",{className:\"text-2xl font-black text-white tracking-tight uppercase\",children:\"FinHub Core\"}),n.jsx(\"p\",{className:\"text-[10px] font-bold text-indigo-400 uppercase tracking-[0.3em]\",children:\"Quantum Fabric v50.3\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"section\",{className:\"space-y-2\",children:[n.jsxs(\"h3\",{className:\"text-[10px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2\",children:[n.jsx(_s,{className:\"w-3.5 h-3.5\"}),\"Our Vision\"]}),n.jsx(\"p\",{className:\"text-sm text-slate-300 leading-relaxed font-medium\",children:\"FinHub is designed to be the central nervous system of your personal economy. We merge neural-inspired data models with high-precision tracking to navigate complex wealth landscapes.\"})]}),n.jsxs(\"section\",{className:\"space-y-2\",children:[n.jsxs(\"h3\",{className:\"text-[10px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2\",children:[n.jsx(Ti,{className:\"w-3.5 h-3.5\"}),\"Core Protocol\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[n.jsxs(\"div\",{className:\"bg-white/5 p-3 rounded-2xl border border-white/5\",children:[n.jsx(\"span\",{className:\"block text-[8px] font-black text-indigo-400 uppercase mb-1\",children:\"Localization\"}),n.jsx(\"span\",{className:\"text-[10px] text-slate-400 leading-tight\",children:\"Sovereign identity via node storage.\"})]}),n.jsxs(\"div\",{className:\"bg-white/5 p-3 rounded-2xl border border-white/5\",children:[n.jsx(\"span\",{className:\"block text-[8px] font-black text-indigo-400 uppercase mb-1\",children:\"Clamping Logic\"}),n.jsx(\"span\",{className:\"text-[10px] text-slate-400 leading-tight\",children:\"Mathematical stability in all simulations.\"})]})]})]}),n.jsxs(\"div\",{className:\"pt-6 border-t border-white/5 flex flex-col items-center gap-2\",children:[n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-600 uppercase tracking-widest\",children:\"Architect: Sijo Joseph\"}),n.jsx(\"p\",{className:\"text-[10px] font-black text-slate-800 uppercase tracking-[0.2em]\",children:\"© 2025 Neural FinHub Fabric\"})]})]})]})]})})]})}),jN=()=>{const{settings:i,updateSettings:r,createGoal:c,createLiability:u}=Di(),[m,g]=A.useState(1),[h,y]=A.useState(\"intro\"),[p,x]=A.useState(!1),[v,f]=A.useState([]),[N,M]=A.useState({name:\"\",amount:\"\",interest:\"\"}),[O,B]=A.useState(i.passiveIncomeTarget?.toString()||\"\"),L=async ye=>{await r({isSampleMode:ye})},R=async ye=>{x(!0),ye||(await c({name:\"Health Insurance\",targetAmount:5e5,currentAmount:0,targetDate:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString(),emoji:\"🏥\",type:\"protection\",status:\"active\",createdAt:new Date().toISOString()}),await c({name:\"Term Insurance\",targetAmount:1e7,currentAmount:0,targetDate:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString(),emoji:\"🛡️\",type:\"protection\",status:\"active\",createdAt:new Date().toISOString()})),y(\"completion\"),x(!1)},P=()=>{g(2),y(\"intro\")},V=()=>{N.name&&N.amount&&N.interest&&(f([...v,N]),M({name:\"\",amount:\"\",interest:\"\"}))},S=ye=>{f(v.filter((Se,qe)=>qe!==ye))},se=async()=>{x(!0);for(const ye of v){const Se=parseFloat(ye.interest);await u({name:ye.name,type:\"other\",principal:parseFloat(ye.amount),outstanding:parseFloat(ye.amount),interestRate:Se,emiAmount:0,startDate:new Date().toISOString(),tenure:12,penalty_applied:Se>10})}y(\"completion\"),x(!1)},he=()=>{g(3),y(\"intro\")},ve=async()=>{x(!0),await r({passiveIncomeTarget:parseFloat(O)||0}),y(\"completion\"),x(!1)},fe=async()=>{await r({onboardingPhase:3})};return n.jsxs(\"div\",{className:\"fixed inset-0 z-[300] flex items-center justify-center p-6 bg-black overflow-hidden\",children:[n.jsxs(\"div\",{className:\"absolute inset-0 overflow-hidden pointer-events-none transition-colors duration-1000\",children:[n.jsxs(Bn,{children:[m===1&&n.jsxs(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"absolute inset-0\",children:[n.jsx(\"div\",{className:\"absolute -top-[20%] -left-[10%] w-[60%] h-[60%] bg-teal-500/20 blur-[120px] rounded-full animate-pulse\"}),n.jsx(\"div\",{className:\"absolute -bottom-[20%] -right-[10%] w-[60%] h-[60%] bg-emerald-500/10 blur-[120px] rounded-full animate-pulse\"})]},\"teal-bg\"),m===2&&n.jsxs(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"absolute inset-0\",children:[n.jsx(\"div\",{className:\"absolute -top-[20%] -left-[10%] w-[60%] h-[60%] bg-orange-500/20 blur-[120px] rounded-full animate-pulse\"}),n.jsx(\"div\",{className:\"absolute -bottom-[20%] -right-[10%] w-[60%] h-[60%] bg-rose-500/10 blur-[120px] rounded-full animate-pulse\"})]},\"orange-bg\"),m===3&&n.jsxs(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"absolute inset-0\",children:[n.jsx(\"div\",{className:\"absolute -top-[20%] -left-[10%] w-[60%] h-[60%] bg-purple-500/20 blur-[120px] rounded-full animate-pulse\"}),n.jsx(\"div\",{className:\"absolute -bottom-[20%] -right-[10%] w-[60%] h-[60%] bg-amber-500/10 blur-[120px] rounded-full animate-pulse\"})]},\"purple-bg\")]}),n.jsx(\"div\",{className:\"absolute top-[30%] left-[20%] w-[40%] h-[40%] bg-white/5 blur-[100px] rounded-full\"})]}),n.jsxs(Bn,{mode:\"wait\",children:[m===1&&h===\"intro\"&&n.jsxs(Oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:\"max-w-md w-full text-center space-y-8 relative z-10\",children:[n.jsx(\"div\",{className:\"w-20 h-20 bg-teal-500/10 border border-teal-500/20 rounded-[28px] flex items-center justify-center mx-auto mb-6 shadow-2xl shadow-teal-500/20\",children:n.jsx(Ti,{className:\"w-10 h-10 text-teal-400\"})}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"h1\",{className:\"text-4xl font-black text-white tracking-tight leading-tight uppercase\",children:[\"Welcome to \",n.jsx(\"span\",{className:\"text-teal-400\",children:\"FinHub\"})]}),n.jsx(\"p\",{className:\"text-slate-400 text-lg font-medium leading-relaxed\",children:\"Before we look at your wealth, let's ensure it's protected.\"})]}),n.jsxs(\"div\",{className:\"flex flex-col gap-3 w-full\",children:[n.jsxs(\"button\",{onClick:()=>y(\"question\"),className:\"group py-5 bg-white text-black font-black uppercase tracking-[0.2em] rounded-24 flex items-center justify-center gap-3 hover:bg-teal-400 transition-all duration-500\",children:[\"Begin Shield \",n.jsx(xn,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]}),n.jsx(\"button\",{onClick:()=>L(!0),className:\"py-3 text-slate-500 font-bold uppercase tracking-widest text-[10px] hover:text-teal-400 transition-colors\",children:\"View Sample Node\"})]})]},\"p1-intro\"),m===1&&h===\"question\"&&n.jsxs(Oe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:\"max-w-md w-full space-y-8 relative z-10\",children:[n.jsxs(\"div\",{className:\"space-y-4 text-center\",children:[n.jsx(\"div\",{className:\"text-[10px] font-black text-teal-500 uppercase tracking-[0.4em] mb-2\",children:\"Protocol: Protection Check\"}),n.jsx(\"h2\",{className:\"text-3xl font-black text-white tracking-tight leading-tight\",children:\"Do you have Health and Term Insurance?\"}),n.jsx(\"p\",{className:\"text-slate-500 font-bold\",children:\"These are the foundations of any terminal wealth flight path.\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 gap-4 pt-4 text-left\",children:[n.jsx(\"button\",{onClick:()=>R(!0),disabled:p,className:\"p-6 bg-slate-900/50 border border-white/5 rounded-3xl text-left hover:border-teal-500/30 hover:bg-teal-500/5 transition-all group\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"space-y-1\",children:[n.jsx(\"p\",{className:\"text-white font-black uppercase tracking-widest group-hover:text-teal-400 transition-colors\",children:\"Yes, I'm covered\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 font-bold uppercase\",children:\"Shield is active\"})]}),n.jsx(Sl,{className:\"w-6 h-6 text-slate-700 group-hover:text-teal-500 transition-colors\"})]})}),n.jsx(\"button\",{onClick:()=>R(!1),disabled:p,className:\"p-6 bg-slate-900/50 border border-white/5 rounded-3xl text-left hover:border-amber-500/30 hover:bg-amber-500/5 transition-all group\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"space-y-1\",children:[n.jsx(\"p\",{className:\"text-white font-black uppercase tracking-widest group-hover:text-amber-400 transition-colors\",children:\"Not yet\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 font-bold uppercase\",children:\"Security leak detected\"})]}),n.jsx(Jr,{className:\"w-6 h-6 text-slate-700 group-hover:text-amber-500 transition-colors\"})]})})]})]},\"p1-question\"),m===1&&h===\"completion\"&&n.jsxs(Oe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:\"max-w-md w-full text-center space-y-8 relative z-10\",children:[n.jsx(\"div\",{className:\"w-20 h-20 bg-teal-500/10 border border-teal-500/20 rounded-[28px] flex items-center justify-center mx-auto mb-6\",children:n.jsx(Sl,{className:\"w-10 h-10 text-teal-400\"})}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(\"h2\",{className:\"text-3xl font-black text-white tracking-tight leading-tight uppercase\",children:\"Shield Protocol Deployed\"}),n.jsx(\"p\",{className:\"text-slate-400 text-lg font-medium leading-relaxed\",children:\"Understood. We've prioritized these. A single emergency shouldn't crash your flight path.\"})]}),n.jsx(\"button\",{onClick:P,className:\"w-full py-5 bg-teal-500 text-black font-black uppercase tracking-[0.2em] rounded-24 hover:bg-teal-400 transition-all duration-500 shadow-xl shadow-teal-500/20\",children:\"Initialize Phase 2\"})]},\"p1-comp\"),m===2&&h===\"intro\"&&n.jsxs(Oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:\"max-w-md w-full text-center space-y-8 relative z-10\",children:[n.jsx(\"div\",{className:\"w-20 h-20 bg-orange-500/10 border border-orange-500/20 rounded-[28px] flex items-center justify-center mx-auto mb-6 shadow-2xl shadow-orange-500/20\",children:n.jsx(qh,{className:\"w-10 h-10 text-orange-400\"})}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"h1\",{className:\"text-4xl font-black text-white tracking-tight leading-tight uppercase\",children:[\"Action \",n.jsx(\"span\",{className:\"text-orange-400\",children:\"Zone\"})]}),n.jsx(\"p\",{className:\"text-slate-400 text-lg font-medium leading-relaxed\",children:\"Now, let's find the 'Wealth Leaks' that are slowing you down.\"})]}),n.jsxs(\"div\",{className:\"flex flex-col gap-3 w-full\",children:[n.jsxs(\"button\",{onClick:()=>y(\"question\"),className:\"group py-5 bg-white text-black font-black uppercase tracking-[0.2em] rounded-24 flex items-center justify-center gap-3 hover:bg-orange-400 transition-all duration-500\",children:[\"Run Scan \",n.jsx(xn,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]}),n.jsx(\"button\",{onClick:()=>L(!0),className:\"py-3 text-slate-500 font-bold uppercase tracking-widest text-[10px] hover:text-orange-400 transition-colors\",children:\"View Sample Node\"})]})]},\"p2-intro\"),m===2&&h===\"question\"&&n.jsxs(Oe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:\"max-w-md w-full space-y-6 relative z-10 flex flex-col h-[80vh]\",children:[n.jsxs(\"div\",{className:\"space-y-2 text-center shrink-0\",children:[n.jsx(\"div\",{className:\"text-[10px] font-black text-orange-500 uppercase tracking-[0.4em] mb-1\",children:\"Alert: High-Interest Detection\"}),n.jsx(\"h2\",{className:\"text-2xl font-black text-white tracking-tight uppercase\",children:\"Identify High-Interest Debt\"}),n.jsx(\"p\",{className:\"text-slate-500 text-xs font-bold leading-relaxed\",children:\"List liabilities (Credit Cards, Personal Loans) with interest above 10%.\"})]}),n.jsxs(\"div\",{className:\"space-y-3 bg-white/5 p-4 rounded-3xl border border-white/5 shrink-0\",children:[n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-2\",children:[n.jsx(\"input\",{placeholder:\"Name (e.g. ICICI CC)\",className:\"bg-black/50 border border-white/10 p-3 rounded-xl text-xs font-bold focus:border-orange-500 outline-none transition-colors\",value:N.name,onChange:ye=>M({...N,name:ye.target.value})}),n.jsx(\"input\",{type:\"number\",placeholder:\"Amount\",className:\"bg-black/50 border border-white/10 p-3 rounded-xl text-xs font-bold focus:border-orange-500 outline-none transition-colors\",value:N.amount,onChange:ye=>M({...N,amount:ye.target.value})})]}),n.jsxs(\"div\",{className:\"flex gap-2\",children:[n.jsx(\"input\",{type:\"number\",placeholder:\"Interest % (e.g. 14)\",className:\"flex-1 bg-black/50 border border-white/10 p-3 rounded-xl text-xs font-bold focus:border-orange-500 outline-none transition-colors\",value:N.interest,onChange:ye=>M({...N,interest:ye.target.value})}),n.jsx(\"button\",{onClick:V,className:\"px-6 bg-orange-500 hover:bg-orange-400 text-black rounded-xl p-3 transition-colors shrink-0\",\"aria-label\":\"Add liability\",children:n.jsx(Nl,{className:\"w-5 h-5\"})})]})]}),n.jsxs(\"div\",{className:\"flex-1 overflow-y-auto space-y-2 py-2 pr-1 custom-scrollbar\",children:[v.map((ye,Se)=>n.jsxs(Oe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:\"flex items-center justify-between p-4 bg-slate-900/40 border border-white/5 rounded-2xl group\",children:[n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-xs font-black uppercase text-white\",children:ye.name}),n.jsxs(\"p\",{className:\"text-[10px] font-bold text-slate-500 uppercase\",children:[\"₹\",ye.amount,\" @ \",ye.interest,\"%\"]})]}),n.jsx(\"button\",{onClick:()=>S(Se),className:\"text-slate-600 hover:text-rose-500 transition-colors\",\"aria-label\":\"Remove liability\",children:n.jsx(Ai,{className:\"w-4 h-4\"})})]},Se)),v.length===0&&n.jsx(\"div\",{className:\"h-20 flex items-center justify-center border border-dashed border-white/5 rounded-2xl\",children:n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold uppercase tracking-widest\",children:\"No leaks added yet\"})})]}),n.jsxs(\"div\",{className:\"pt-4 shrink-0 flex gap-3\",children:[n.jsx(\"button\",{onClick:()=>y(\"completion\"),className:\"flex-1 py-4 text-slate-500 font-black uppercase text-xs tracking-widest hover:text-white transition-colors\",children:\"Skip (No High Debt)\"}),n.jsx(\"button\",{onClick:se,disabled:v.length===0||p,className:\"flex-1 py-4 bg-orange-500 text-black font-black uppercase text-xs tracking-widest rounded-2xl disabled:opacity-50 hover:bg-orange-400 transition-all shadow-lg shadow-orange-500/20\",children:\"Patch Leaks\"})]})]},\"p2-question\"),m===2&&h===\"completion\"&&n.jsxs(Oe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:\"max-w-md w-full text-center space-y-8 relative z-10\",children:[n.jsx(\"div\",{className:\"w-20 h-20 bg-rose-500/10 border border-rose-500/20 rounded-[28px] flex items-center justify-center mx-auto mb-6\",children:n.jsx(qh,{className:\"w-10 h-10 text-rose-400\"})}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(\"h2\",{className:\"text-3xl font-black text-white tracking-tight leading-tight uppercase\",children:\"Analysis Complete\"}),n.jsxs(\"p\",{className:\"text-slate-400 text-lg font-medium leading-relaxed leading-relaxed\",children:[\"Found them. Paying these off isn't an expense—it's a \",n.jsx(\"span\",{className:\"text-rose-400\",children:\"guaranteed profit\"}),\". We'll tackle these before we scale your investments.\"]})]}),n.jsx(\"button\",{onClick:he,className:\"w-full py-5 bg-orange-500 text-black font-black uppercase tracking-[0.2em] rounded-24 hover:bg-orange-400 transition-all duration-500 shadow-xl shadow-orange-500/20\",children:\"Initialize Phase 3\"})]},\"p2-comp\"),m===3&&h===\"intro\"&&n.jsxs(Oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:\"max-w-md w-full text-center space-y-8 relative z-10\",children:[n.jsx(\"div\",{className:\"w-20 h-20 bg-purple-500/10 border border-purple-500/20 rounded-[28px] flex items-center justify-center mx-auto mb-6 shadow-2xl shadow-purple-500/20\",children:n.jsx(bn,{className:\"w-10 h-10 text-purple-400\"})}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"h1\",{className:\"text-4xl font-black text-white tracking-tight leading-tight uppercase\",children:[\"Growth \",n.jsx(\"span\",{className:\"text-purple-400\",children:\"Zone\"})]}),n.jsx(\"p\",{className:\"text-slate-400 text-lg font-medium leading-relaxed\",children:\"Your foundation is set. Now, what does freedom look like for you?\"})]}),n.jsxs(\"div\",{className:\"flex flex-col gap-3 w-full\",children:[n.jsxs(\"button\",{onClick:()=>y(\"question\"),className:\"group py-5 bg-white text-black font-black uppercase tracking-[0.2em] rounded-24 flex items-center justify-center gap-3 hover:bg-purple-400 transition-all duration-500\",children:[\"Set Target \",n.jsx(xn,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]}),n.jsx(\"button\",{onClick:()=>L(!0),className:\"py-3 text-slate-500 font-bold uppercase tracking-widest text-[10px] hover:text-purple-400 transition-colors\",children:\"View Sample Node\"})]})]},\"p3-intro\"),m===3&&h===\"question\"&&n.jsxs(Oe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:\"max-w-md w-full space-y-8 relative z-10\",children:[n.jsxs(\"div\",{className:\"space-y-4 text-center\",children:[n.jsx(\"div\",{className:\"text-[10px] font-black text-purple-500 uppercase tracking-[0.4em] mb-2\",children:\"Protocol: Freedom Metric\"}),n.jsx(\"h2\",{className:\"text-3xl font-black text-white tracking-tight leading-tight uppercase\",children:\"Target Monthly Passive Income\"}),n.jsx(\"p\",{className:\"text-slate-500 font-bold text-sm leading-relaxed\",children:\"This sets the baseline for your Freedom Meter. Every rupee you save now will be measured in Time.\"})]}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"div\",{className:\"relative\",children:[n.jsx(\"span\",{className:\"absolute left-6 top-1/2 -translate-y-1/2 text-2xl font-black text-slate-700\",children:\"₹\"}),n.jsx(\"input\",{type:\"number\",placeholder:\"50,000\",className:\"w-full bg-slate-900/50 border border-white/5 p-8 pl-12 rounded-[32px] text-4xl font-black text-white outline-none focus:border-purple-500/50 transition-all tabular-nums\",value:O,onChange:ye=>B(ye.target.value)})]}),n.jsx(\"button\",{onClick:ve,disabled:!O||p,className:\"w-full py-5 bg-purple-500 text-black font-black uppercase tracking-[0.2em] rounded-24 hover:bg-purple-400 transition-all duration-500 shadow-xl shadow-purple-500/20 disabled:opacity-50\",children:\"Lock Horizon\"})]})]},\"p3-question\"),m===3&&h===\"completion\"&&n.jsxs(Oe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:\"max-w-md w-full text-center space-y-8 relative z-10\",children:[n.jsx(\"div\",{className:\"w-20 h-20 bg-amber-500/10 border border-amber-500/20 rounded-[28px] flex items-center justify-center mx-auto mb-6\",children:n.jsx(W0,{className:\"w-10 h-10 text-amber-400\"})}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(\"h2\",{className:\"text-3xl font-black text-white tracking-tight leading-tight uppercase\",children:\"Target Locked\"}),n.jsxs(\"p\",{className:\"text-slate-400 text-lg font-medium leading-relaxed leading-relaxed\",children:[\"Welcome to the cockpit. Every rupee you save now will be measured in \",n.jsx(\"span\",{className:\"text-amber-400\",children:\"Time\"}),\", not just numbers.\"]})]}),n.jsx(\"button\",{onClick:fe,className:\"w-full py-5 bg-amber-500 text-black font-black uppercase tracking-[0.2em] rounded-24 hover:bg-amber-400 transition-all duration-500 shadow-xl shadow-amber-500/20\",children:\"Launch Terminal\"})]},\"p3-comp\")]})]})},NN=A.lazy(()=>Us(()=>import(\"./Dashboard-77mHvodX.js\"),__vite__mapDeps([0,1,2,3,4,5,6,7])).then(i=>({default:i.Dashboard}))),SN=A.lazy(()=>Us(()=>import(\"./TransactionList-C9g51JND.js\"),__vite__mapDeps([8,1,2,4,7,6])).then(i=>({default:i.TransactionList}))),AN=A.lazy(()=>Us(()=>import(\"./GoalsTracker-CDWKNqoN.js\"),__vite__mapDeps([9,1,2,7,6])).then(i=>({default:i.GoalsTracker}))),DN=A.lazy(()=>Us(()=>import(\"./EmergencyFundsTab-VfBln1SL.js\"),__vite__mapDeps([10,1,2,7,6])).then(i=>({default:i.EmergencyFundsTab}))),TN=A.lazy(()=>Us(()=>import(\"./InvestmentsTab-7b7ZOF_8.js\"),__vite__mapDeps([11,1,2,3,4,12,6,7])).then(i=>({default:i.InvestmentsTab}))),kN=A.lazy(()=>Us(()=>import(\"./LiabilityTab-Cihd-oaZ.js\"),__vite__mapDeps([13,1,2,7,6])).then(i=>({default:i.LiabilityTab}))),CN=A.lazy(()=>Us(()=>import(\"./LiabilityDashboard-BEre0Oy9.js\"),__vite__mapDeps([14,1,2,5,12,7,6])).then(i=>({default:i.LiabilityDashboard})));function EN(){const{settings:i,expenses:r,incomes:c,debts:u,goals:m,accounts:g,liabilities:h,notifications:y,emergencyFundAmount:p,investments:x,isLoading:v,refreshData:f,updateSettings:N,userId:M,createExpense:O,updateExpense:B,deleteExpense:L,createIncome:R,updateIncome:P,deleteIncome:V,createDebt:S,updateDebt:se,deleteDebt:he,settleDebt:ve,createGoal:fe,updateGoal:ye,deleteGoal:Se,createAccount:qe,updateAccount:Te,deleteAccount:ee,setEmergencyFundAmount:me,setNotifications:G,isFundAllocationOpen:C,fundAllocationType:Y,closeFundAllocation:oe,performFundAllocation:ge,transferFunds:z,authStatus:T,isOffline:re,authMessage:$,backfillRequest:le,setBackfillRequest:ue,executeBackfill:Ne,createRecurring:je}=Di(),[de,xe]=A.useState(\"dashboard\"),[Ke,Ie]=A.useState(!1),[Ve,rt]=A.useState(\"expense\"),[De,tt]=A.useState(null),[St,mt]=A.useState(!1),[zt,ut]=A.useState(!1),[bt,la]=A.useState(!1),[ce,Ee]=A.useState(null),[He,yt]=A.useState(!1),[Ut,Oa]=A.useState(!1),[_a,ba]=A.useState(!1),[ma,ja]=A.useState(!1),[It]=A.useState(null);A.useEffect(()=>gN(()=>ut(!0),()=>la(!0)),[]),A.useEffect(()=>{i.theme===\"dark\"?document.documentElement.classList.add(\"dark\"):document.documentElement.classList.remove(\"dark\")},[i.theme]);const{openFundAllocation:Na}=Di();A.useEffect(()=>{window.showFundAllocation=Na},[Na]);const{currentMonthExpenses:Gt}=A.useMemo(()=>{const ie=new Date,Le=ie.getMonth(),ft=ie.getFullYear();return{currentMonthExpenses:r.filter(Mt=>!Mt.isInternalTransfer).filter(Mt=>{const Ct=new Date(Mt.date);return Ct.getMonth()===Le&&Ct.getFullYear()===ft})}},[r]),kt=A.useMemo(()=>{const ie=c.reduce(($a,na)=>$a+na.amount,0),Le=r.reduce(($a,na)=>$a+na.amount,0),ft=u.reduce(($a,na)=>$a+na.amount,0);if(ie===0&&ft===0)return{score:50,savingsRate:0,debtRatio:0,spendingRatio:0};const at=[...c,...r,...u];let Bt=1;if(at.length>0){const $a=at.map(fs=>new Date(fs.date).getTime()),na=new Date(Math.min(...$a)),sa=Math.abs(new Date().getTime()-na.getTime()),dn=Math.ceil(sa/(1e3*60*60*24*30));Bt=Math.max(1,dn)}const Ct=ie/Bt*12,ht=ie>0?(ie-Le)/ie:0,Yt=ie>0?Le/ie:0,Rt=Ct>0?ft/Ct:ft>0?1/0:0;let Ye=50;return ht>=.4?Ye+=30:ht>=.2?Ye+=20:ht>=.1?Ye+=10:ht>0?Ye+=5:Ye-=20,Rt===0?Ye+=20:Rt<=.3?Ye+=10:Rt<=.6?Ye-=10:Rt<=1?Ye-=30:Ye-=50,Yt<=.5?Ye+=20:Yt<=.7?Ye+=10:Yt<=.9?Ye+=0:Ye-=10,{score:Math.max(0,Math.min(100,Math.round(Ye))),savingsRate:ht,debtRatio:Rt,spendingRatio:Yt}},[c,r,u]),dt=A.useMemo(()=>({totalIncome:c.reduce((ie,Le)=>ie+Le.amount,0),totalExpenses:r.reduce((ie,Le)=>ie+Le.amount,0),activeDebts:u.filter(ie=>ie.status===\"pending\").length,goalsCount:m.length,recentTransactions:[...r.slice(0,5).map(ie=>({type:\"expense\",...ie})),...c.slice(0,5).map(ie=>({type:\"income\",...ie}))],expenses:r,incomes:c,accounts:g,investments:x,liabilities:h,goals:m,debts:u,currentMonthExpenses:Gt,savingsRate:kt.savingsRate,healthScore:kt.score,brainSummary:qj({investments:x,accounts:g,healthScore:kt.score,savingsRate:kt.savingsRate,totalIncome:c.reduce((ie,Le)=>ie+Le.amount,0),totalExpenses:r.reduce((ie,Le)=>ie+Le.amount,0),activeDebts:u.filter(ie=>ie.status===\"pending\").length,goalsCount:m.length},i.currency,de)}),[c,r,u,m,kt.savingsRate,kt.score,g,x,h,Gt,i.currency,de]),ds=A.useMemo(()=>c.reduce((ie,Le)=>ie+Le.amount,0),[c]);if(v)return n.jsx(H0,{});const Sa=async()=>{await f()},Aa=ie=>{rt(ie),tt(null),Ie(!0)},un=ie=>{rt(\"expense\"),tt(ie),Ie(!0)},nn=ie=>{rt(\"income\"),tt(ie),Ie(!0)},Fa=ie=>{rt(\"debt\"),tt(ie),Ie(!0)},Da=ie=>{De?Ve===\"expense\"?B(De.id,ie):Ve===\"income\"?P(De.id,ie):Ve===\"debt\"&&se(De.id,ie):Ve===\"expense\"?(O(ie),ie.roundUpAmount&&Ue(m.length>0?m[0].id:\"general\",\"goal\",void 0,ie.roundUpAmount,ie.accountId)):Ve===\"income\"?R(ie):Ve===\"debt\"&&S(ie)},Ue=async(ie,Le,ft,at,Bt)=>{if(!at&&!It)return;const Mt=at||(It?It.roundedAmount-It.expenseAmount:0),Ct=Bt||(It?It.accountId:\"\"),ht=g.find(Yt=>Yt.id===Ct);if(ht&&await Te(ht.id,{balance:ht.balance-Mt}),Le===\"goal\"){const Yt=m.find(Rt=>Rt.id===ie);if(Yt)await ye(ie,{currentAmount:Yt.currentAmount+Mt}),J.success(`Saved ${cn[i.currency]}${Mt} to ${Yt.name}!`);else{const Rt=m.find(Ye=>Ye.name===\"General Savings\");if(Rt)await ye(Rt.id,{currentAmount:Rt.currentAmount+Mt}),J.success(`Saved ${cn[i.currency]}${Mt} to General Savings!`);else{const Ye={name:\"General Savings\",targetAmount:1e4,currentAmount:Mt,targetDate:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString(),emoji:\"🐷\"};fe(Ye),J.success(`Created \"General Savings\" and saved ${cn[i.currency]}${Mt}!`)}}}else me(Yt=>Yt+Mt),J.success(`Saved ${cn[i.currency]}${Mt} to Emergency Fund!`);ja(!1),ji({particleCount:50,spread:60,origin:{y:.7}})},wt=ie=>{const Le={today:1,week:7,month:30},ft=new Date;ft.setDate(ft.getDate()+Le[ie]),localStorage.setItem(\"roundUpMutedUntil\",ft.toISOString()),ja(!1),J.info(`Round ups muted for ${ie===\"today\"?\"today\":ie===\"week\"?\"a week\":\"a month\"}`)};return n.jsxs(n.Fragment,{children:[n.jsx(Bn,{mode:\"wait\",children:(T===\"guest\"||T===\"authenticating\")&&n.jsx(Oe.div,{className:\"fixed inset-0 z-0\",exit:{opacity:0,scale:.95,filter:\"blur(20px)\"},transition:{duration:.8},children:n.jsx(vN,{})},\"login-container\")}),n.jsx(Bn,{children:T===\"authenticating\"&&n.jsx(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4},className:\"fixed inset-0 z-50\",children:n.jsx(H0,{message:$?.message,subMessage:$?.subMessage})},\"loading-sprite\")}),n.jsxs(Bn,{mode:\"wait\",children:[T===\"authenticated\"&&(!i.onboardingPhase||i.onboardingPhase<3)&&!i.isSampleMode&&n.jsx(jN,{}),T===\"authenticated\"&&((i.onboardingPhase??0)>=3||i.isSampleMode)&&n.jsx(Oe.div,{className:\"relative z-10\",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.8,ease:[.16,1,.3,1]},children:n.jsxs(\"div\",{className:\"min-h-screen bg-transparent text-foreground transition-colors font-sans\",children:[n.jsx(hj,{activeTab:de,onTabChange:ie=>xe(ie),notificationCount:y.filter(ie=>!ie.read).length,onNotificationClick:()=>la(!bt),onSettingsClick:()=>ut(!zt),forceHide:He,renderFab:ie=>n.jsx(xN,{isVisible:ie&&!zt&&!bt&&!He,onOpenAI:()=>mt(!0),onAddTransaction:Aa,onMigrate:()=>Oa(!0)}),children:n.jsx(hN,{onRefresh:Sa,children:n.jsx(yN,{children:n.jsxs(A.Suspense,{fallback:n.jsxs(\"div\",{className:\"space-y-6 pt-12\",children:[n.jsx(pN,{}),n.jsx(\"p\",{className:\"text-center text-slate-500 text-sm\",children:\"Loading Component...\"})]}),children:[de===\"dashboard\"&&n.jsx(\"div\",{className:\"space-y-6\",children:n.jsx(NN,{expenses:r,incomes:c,currency:i.currency,goals:m,liabilities:h,debts:u,investments:x,accounts:g,emergencyFundAmount:p,healthScore:kt.score,userName:i.name,isOffline:re,isSampleMode:i.isSampleMode,onResumeOnboarding:()=>N({isSampleMode:!1})})}),de===\"transactions\"&&n.jsx(SN,{expenses:r,incomes:c,debts:u,accounts:g,currency:i.currency,onEditExpense:un,onDeleteExpense:L,onEditIncome:nn,onDeleteIncome:V,onEditDebt:Fa,onDeleteDebt:he,onSettleDebt:ve}),de===\"goals\"&&n.jsx(AN,{goals:m,currency:i.currency,accounts:g,expenses:r,incomes:c,onCreateGoal:fe,onUpdateGoal:ye,onDeleteGoal:Se,onDeductFromAccount:async(ie,Le)=>{const ft=g.find(at=>at.id===ie);ft&&await Te(ie,{balance:ft.balance-Le})}}),de===\"accounts\"&&n.jsx(fN,{accounts:g,currency:i.currency,onCreateAccount:qe,onUpdateAccount:Te,onDeleteAccount:ee}),de===\"investments\"&&n.jsx(TN,{}),de===\"emergency\"&&n.jsx(DN,{currency:i.currency,userId:M,expenses:r,incomes:c,accounts:g,onEmergencyFundUpdate:ie=>me(ie)}),de===\"liability\"&&n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsx(CN,{liabilities:h,currency:i.currency,totalMonthlyIncome:ds}),n.jsx(kN,{currency:i.currency,expenses:r,accounts:g})]}),de===\"recurring\"&&n.jsx(dj,{}),de===\"more\"&&n.jsx(sN,{onNavigate:ie=>xe(ie),onOpenSettings:()=>ut(!0),onOpenNotifications:()=>la(!0),emergencyFundAmount:p,bankAccountsCount:g.filter(ie=>ie.type===\"bank\").length,cardsCount:g.filter(ie=>ie.type===\"credit_card\").length,currency:i.currency,onOpenAbout:()=>ba(!0)})]})})})}),n.jsx(xj,{isOpen:Ke,onClose:()=>{Ie(!1),tt(null)},type:Ve,onSubmit:Da,initialData:De,accounts:g,currency:i.currency,roundUpEnabled:i.roundUpEnabled}),It&&n.jsx(bj,{isOpen:ma,onClose:()=>ja(!1),onConfirm:Ue,expenseAmount:It.expenseAmount,roundedAmount:It.roundedAmount,currency:i.currency,goals:m,onMute:wt}),n.jsx(bN,{isOpen:St,onClose:()=>mt(!1),context:dt,settings:i,isOffline:re}),n.jsx(nN,{isOpen:zt,onClose:()=>ut(!1),settings:i,onUpdateSettings:N,onAchievementClick:ie=>{Ee(ie),yt(!0),ut(!1)},onOpenAbout:()=>ba(!0)}),n.jsx(rN,{isOpen:bt,onClose:()=>la(!1),notifications:y,onNotificationClick:async ie=>{if(ie.achievementId&&(Ee(ie.achievementId),yt(!0)),ie.action&&ie.action.type===\"verify_subscription\"&&ie.action.status===\"completed\"){const{description:Le,amount:ft,category:at,accountId:Bt,date:Mt}=ie.action.payload;try{await je({type:\"expense\",description:Le,amount:ft,category:at,accountId:Bt,frequency:\"monthly\",startDate:Mt||new Date().toISOString().split(\"T\")[0],tags:[\"auto-verified\",\"subscription\"]}),J.success(`Verified: ${Le} is now a recurring subscription.`),G(Ct=>Ct.map(ht=>ht.id===ie.id?{...ht,read:!0}:ht))}catch{J.error(\"Failed to automate subscription.\")}}else ie.action&&ie.action.status===\"dismissed\"&&(J.info(\"Marked as one-time purchase.\"),G(Le=>Le.map(ft=>ft.id===ie.id?{...ft,read:!0}:ft)));ie.action||la(!1)},onMarkAsRead:ie=>{G(Le=>Le.map(ft=>ft.id===ie?{...ft,read:!0}:ft))},onClearRead:()=>{G(ie=>ie.filter(Le=>!Le.read)),J.success(\"Read notifications cleared\")}}),n.jsx(oN,{isOpen:He,onClose:()=>{yt(!1),Ee(null)},achievementId:ce}),n.jsx(uN,{isOpen:C,onClose:oe,accounts:g,goals:m,currency:i.currency,destinationType:Y,emergencyFund:{currentAmount:p,targetAmount:1e5},onAllocate:ge,liabilities:h,expenses:r}),n.jsx(mN,{isOpen:Ut,onClose:()=>Oa(!1),accounts:g,currency:i.currency,onTransfer:z}),n.jsx(wN,{isOpen:_a,onClose:()=>ba(!1)})]})},\"main-app\")]}),le&&n.jsx(Jp,{open:!0,onOpenChange:()=>ue(null),children:n.jsxs(Wp,{className:\"bg-slate-900/95 border-white/10 text-slate-100 z-[99999999] backdrop-blur-xl\",children:[n.jsxs(eg,{children:[n.jsx(ag,{className:\"text-white text-xl font-bold font-sans\",children:\"Backfill Configuration Required\"}),n.jsxs(ng,{className:\"text-slate-400 text-base\",children:[\"System detected \",n.jsxs(\"span\",{className:\"text-emerald-400 font-bold\",children:[le.count,\" missing entries\"]}),\" in the transaction history from \",n.jsx(\"span\",{className:\"text-white font-medium\",children:le.dates[0]?.toLocaleDateString(\"en-IN\",{day:\"numeric\",month:\"short\",year:\"numeric\"})}),\"to \",n.jsx(\"span\",{className:\"text-white font-medium\",children:le.dates[le.dates.length-1]?.toLocaleDateString(\"en-IN\",{day:\"numeric\",month:\"short\",year:\"numeric\"})}),\".\",n.jsx(\"br\",{}),n.jsx(\"br\",{}),\"Would you like to auto-populate the ledger for this period?\"]})]}),n.jsxs(tg,{className:\"mt-4\",children:[n.jsx(ig,{onClick:()=>ue(null),className:\"bg-white/5 border-white/5 text-slate-400 hover:text-white hover:bg-white/10 rounded-xl h-12 uppercase tracking-wider text-xs font-bold\",children:\"Cancel\"}),n.jsx(sg,{onClick:()=>{Ne(),ue(null)},className:\"bg-indigo-600 hover:bg-indigo-500 text-white border-0 font-bold rounded-xl h-12 px-8 shadow-lg shadow-indigo-600/20\",children:\"Generate Ledger\"})]})]})}),n.jsx(t1,{position:\"bottom-center\",richColors:!0,theme:\"dark\",toastOptions:{style:{background:\"#1C1C1E\",border:\"1px solid rgba(255, 255, 255, 0.1)\",color:\"#FFFFFF\",borderRadius:\"20px\",backdropFilter:\"none\",zIndex:999999}},className:\"!z-[999999]\"})]})}function MN({children:i,...r}){return n.jsx(Nj,{...r,children:i})}vv.createRoot(document.getElementById(\"root\")).render(n.jsx(r1,{children:n.jsx(MN,{attribute:\"class\",defaultTheme:\"dark\",forcedTheme:\"dark\",children:n.jsx(EN,{})})}));export{Bn as A,Ge as B,bl as C,Bs as D,Pt as I,Re as L,Fp as M,Os as N,ha as S,BN as a,V1 as b,Ku as c,yp as d,aa as e,$e as f,ct as g,Ls as h,gj as i,qs as j,Is as k,Vs as l,Oe as m,ga as n,pa as o,xa as p,vt as q,ku as r,Di as s,J as t,cN as u,LN as v,UN as w};"
      },
      {
        "file": "src\\App.tsx",
        "line": 69,
        "snippet": "type View = \"dashboard\" | \"transactions\" | \"goals\" | \"investments\" | \"accounts\" | \"emergency\" | \"more\" | \"recurring\" | \"budgets\";"
      },
      {
        "file": "src\\App.tsx",
        "line": 611,
        "snippet": "{view === \"accounts\" && ("
      },
      {
        "file": "src\\components\\MoreTab.tsx",
        "line": 14,
        "snippet": "onNavigate: (view: 'emergency' | 'accounts' | 'recurring') => void;"
      },
      {
        "file": "src\\components\\MoreTab.tsx",
        "line": 73,
        "snippet": "onClick={() => onNavigate('accounts')}"
      },
      {
        "file": "src\\config\\dbTables.ts",
        "line": 7,
        "snippet": "ACCOUNTS: 'accounts',"
      },
      {
        "file": "src\\repositories\\supa.ts",
        "line": 9,
        "snippet": "* // Instead of: supabase.from(\"accounts\")"
      },
      {
        "file": "src\\repositories\\supa.ts",
        "line": 9,
        "snippet": "* // Instead of: supabase.from(\"accounts\")"
      }
    ]
  ],
  [
    "category_limits",
    [
      {
        "file": "src\\config\\dbTables.ts",
        "line": 12,
        "snippet": "CATEGORY_LIMITS: 'category_limits',"
      }
    ]
  ],
  [
    "credit_cards",
    [
      {
        "file": "src\\config\\dbTables.ts",
        "line": 15,
        "snippet": "CREDIT_CARDS: 'credit_cards',"
      }
    ]
  ],
  [
    "DB_TABLES.ACCOUNTS",
    [
      {
        "file": "src\\repositories\\supa.ts",
        "line": 10,
        "snippet": "* // Use: fromTable(DB_TABLES.ACCOUNTS)"
      }
    ]
  ],
  [
    "DB_TABLES.FEE_RULES",
    [
      {
        "file": "src\\features\\feeDetection\\repo.ts",
        "line": 8,
        "snippet": "const { data, error } = await fromTable(DB_TABLES.FEE_RULES)"
      },
      {
        "file": "src\\features\\feeDetection\\repo.ts",
        "line": 26,
        "snippet": "const { data, error } = await fromTable(DB_TABLES.FEE_RULES)"
      },
      {
        "file": "src\\features\\feeDetection\\repo.ts",
        "line": 46,
        "snippet": "const { error } = await fromTable(DB_TABLES.FEE_RULES)"
      },
      {
        "file": "src\\features\\feeDetection\\repo.ts",
        "line": 61,
        "snippet": "const { error } = await fromTable(DB_TABLES.FEE_RULES)"
      }
    ]
  ],
  [
    "DB_TABLES.IOU_PAYMENTS",
    [
      {
        "file": "src\\features\\ious\\repo.ts",
        "line": 26,
        "snippet": "const { data, error } = await fromTable(DB_TABLES.IOU_PAYMENTS)"
      },
      {
        "file": "src\\features\\ious\\repo.ts",
        "line": 86,
        "snippet": "const { error: paymentError } = await fromTable(DB_TABLES.IOU_PAYMENTS)"
      }
    ]
  ],
  [
    "DB_TABLES.IOUS",
    [
      {
        "file": "src\\features\\ious\\repo.ts",
        "line": 9,
        "snippet": "const { data, error } = await fromTable(DB_TABLES.IOUS)"
      },
      {
        "file": "src\\features\\ious\\repo.ts",
        "line": 50,
        "snippet": "const { data, error } = await fromTable(DB_TABLES.IOUS)"
      },
      {
        "file": "src\\features\\ious\\repo.ts",
        "line": 72,
        "snippet": "const iou = await fromTable(DB_TABLES.IOUS)"
      },
      {
        "file": "src\\features\\ious\\repo.ts",
        "line": 104,
        "snippet": "const { error: updateError } = await fromTable(DB_TABLES.IOUS)"
      },
      {
        "file": "src\\features\\ious\\repo.ts",
        "line": 122,
        "snippet": "const { error } = await fromTable(DB_TABLES.IOUS)"
      },
      {
        "file": "src\\features\\ious\\repo.ts",
        "line": 137,
        "snippet": "const { error } = await fromTable(DB_TABLES.IOUS)"
      }
    ]
  ],
  [
    "fee_rules",
    [
      {
        "file": "src\\config\\dbTables.ts",
        "line": 25,
        "snippet": "FEE_RULES: 'fee_rules',"
      }
    ]
  ],
  [
    "iou_installments",
    [
      {
        "file": "src\\config\\dbTables.ts",
        "line": 20,
        "snippet": "IOU_INSTALLMENTS: 'iou_installments',"
      }
    ]
  ],
  [
    "iou_payments",
    [
      {
        "file": "src\\config\\dbTables.ts",
        "line": 19,
        "snippet": "IOU_PAYMENTS: 'iou_payments',"
      }
    ]
  ],
  [
    "ious",
    [
      {
        "file": "src\\config\\dbTables.ts",
        "line": 18,
        "snippet": "IOUS: 'ious',"
      }
    ]
  ],
  [
    "kv_store",
    [
      {
        "file": "src\\config\\dbTables.ts",
        "line": 23,
        "snippet": "KV_STORE: 'kv_store',"
      },
      {
        "file": "src\\supabase\\functions\\server\\kv_store.tsx",
        "line": 3,
        "snippet": "const KV_TABLE = \"kv_store\";"
      }
    ]
  ],
  [
    "smart_suggestions",
    [
      {
        "file": "src\\config\\dbTables.ts",
        "line": 24,
        "snippet": "SMART_SUGGESTIONS: 'smart_suggestions',"
      }
    ]
  ],
  [
    "transactions",
    [
      {
        "file": "android\\app\\src\\main\\assets\\public\\assets\\index-i0Euu4OB.js",
        "line": 11,
        "snippet": "`);try{v=new Worker(URL.createObjectURL(new Blob([Y])))}catch(V){return typeof console<\"u\"&&typeof console.warn==\"function\"&&console.warn(\"🎊 Could not load worker\",V),null}q(v)}return v}})(),A={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:[\"square\",\"circle\"],zIndex:100,colors:[\"#26ccff\",\"#a25afd\",\"#ff5e7e\",\"#88ff5a\",\"#fcff42\",\"#ffa62d\",\"#ff36ff\"],disableForReducedMotion:!1,scalar:1};function T(v,D){return D?D(v):v}function C(v){return v!=null}function M(v,D,W){return T(v&&C(v[D])?v[D]:A[D],W)}function y(v){return v<0?0:Math.floor(v)}function L(v,D){return Math.floor(Math.random()*(D-v))+v}function z(v){return parseInt(v,16)}function j(v){return v.map(G)}function G(v){var D=String(v).replace(/[^0-9a-f]/gi,\"\");return D.length<6&&(D=D[0]+D[0]+D[1]+D[1]+D[2]+D[2]),{r:z(D.substring(0,2)),g:z(D.substring(2,4)),b:z(D.substring(4,6))}}function ee(v){var D=M(v,\"origin\",Object);return D.x=M(D,\"x\",Number),D.y=M(D,\"y\",Number),D}function Z(v){v.width=document.documentElement.clientWidth,v.height=document.documentElement.clientHeight}function _(v){var D=v.getBoundingClientRect();v.width=D.width,v.height=D.height}function B(v){var D=document.createElement(\"canvas\");return D.style.position=\"fixed\",D.style.top=\"0px\",D.style.left=\"0px\",D.style.pointerEvents=\"none\",D.style.zIndex=v,D}function J(v,D,W,q,Y,V,te,me,ie){v.save(),v.translate(D,W),v.rotate(V),v.scale(q,Y),v.arc(0,0,1,te,me,ie),v.restore()}function ne(v){var D=v.angle*(Math.PI/180),W=v.spread*(Math.PI/180);return{x:v.x,y:v.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:v.startVelocity*.5+Math.random()*v.startVelocity,angle2D:-D+(.5*W-Math.random()*W),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:v.color,shape:v.shape,tick:0,totalTicks:v.ticks,decay:v.decay,drift:v.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:v.gravity*3,ovalScalar:.6,scalar:v.scalar,flat:v.flat}}function F(v,D){D.x+=Math.cos(D.angle2D)*D.velocity+D.drift,D.y+=Math.sin(D.angle2D)*D.velocity+D.gravity,D.velocity*=D.decay,D.flat?(D.wobble=0,D.wobbleX=D.x+10*D.scalar,D.wobbleY=D.y+10*D.scalar,D.tiltSin=0,D.tiltCos=0,D.random=1):(D.wobble+=D.wobbleSpeed,D.wobbleX=D.x+10*D.scalar*Math.cos(D.wobble),D.wobbleY=D.y+10*D.scalar*Math.sin(D.wobble),D.tiltAngle+=.1,D.tiltSin=Math.sin(D.tiltAngle),D.tiltCos=Math.cos(D.tiltAngle),D.random=Math.random()+2);var W=D.tick++/D.totalTicks,q=D.x+D.random*D.tiltCos,Y=D.y+D.random*D.tiltSin,V=D.wobbleX+D.random*D.tiltCos,te=D.wobbleY+D.random*D.tiltSin;if(v.fillStyle=\"rgba(\"+D.color.r+\", \"+D.color.g+\", \"+D.color.b+\", \"+(1-W)+\")\",v.beginPath(),g&&D.shape.type===\"path\"&&typeof D.shape.path==\"string\"&&Array.isArray(D.shape.matrix))v.fill(U(D.shape.path,D.shape.matrix,D.x,D.y,Math.abs(V-q)*.1,Math.abs(te-Y)*.1,Math.PI/10*D.wobble));else if(D.shape.type===\"bitmap\"){var me=Math.PI/10*D.wobble,ie=Math.abs(V-q)*.1,le=Math.abs(te-Y)*.1,je=D.shape.bitmap.width*D.scalar,Ae=D.shape.bitmap.height*D.scalar,pe=new DOMMatrix([Math.cos(me)*ie,Math.sin(me)*ie,-Math.sin(me)*le,Math.cos(me)*le,D.x,D.y]);pe.multiplySelf(new DOMMatrix(D.shape.matrix));var ve=v.createPattern(p.transform(D.shape.bitmap),\"no-repeat\");ve.setTransform(pe),v.globalAlpha=1-W,v.fillStyle=ve,v.fillRect(D.x-je/2,D.y-Ae/2,je,Ae),v.globalAlpha=1}else if(D.shape===\"circle\")v.ellipse?v.ellipse(D.x,D.y,Math.abs(V-q)*D.ovalScalar,Math.abs(te-Y)*D.ovalScalar,Math.PI/10*D.wobble,0,2*Math.PI):J(v,D.x,D.y,Math.abs(V-q)*D.ovalScalar,Math.abs(te-Y)*D.ovalScalar,Math.PI/10*D.wobble,0,2*Math.PI);else if(D.shape===\"star\")for(var xe=Math.PI/2*3,Ke=4*D.scalar,We=8*D.scalar,Ue=D.x,it=D.y,Ve=5,ke=Math.PI/Ve;Ve--;)Ue=D.x+Math.cos(xe)*We,it=D.y+Math.sin(xe)*We,v.lineTo(Ue,it),xe+=ke,Ue=D.x+Math.cos(xe)*Ke,it=D.y+Math.sin(xe)*Ke,v.lineTo(Ue,it),xe+=ke;else v.moveTo(Math.floor(D.x),Math.floor(D.y)),v.lineTo(Math.floor(D.wobbleX),Math.floor(Y)),v.lineTo(Math.floor(V),Math.floor(te)),v.lineTo(Math.floor(q),Math.floor(D.wobbleY));return v.closePath(),v.fill(),D.tick<D.totalTicks}function oe(v,D,W,q,Y){var V=D.slice(),te=v.getContext(\"2d\"),me,ie,le=S(function(je){function Ae(){me=ie=null,te.clearRect(0,0,q.width,q.height),p.clear(),Y(),je()}function pe(){u&&!(q.width===d.width&&q.height===d.height)&&(q.width=v.width=d.width,q.height=v.height=d.height),!q.width&&!q.height&&(W(v),q.width=v.width,q.height=v.height),te.clearRect(0,0,q.width,q.height),V=V.filter(function(ve){return F(te,ve)}),V.length?me=f.frame(pe):Ae()}me=f.frame(pe),ie=Ae});return{addFettis:function(je){return V=V.concat(je),le},canvas:v,promise:le,reset:function(){me&&f.cancel(me),ie&&ie()}}}function ge(v,D){var W=!v,q=!!M(D||{},\"resize\"),Y=!1,V=M(D,\"disableForReducedMotion\",Boolean),te=h&&!!M(D||{},\"useWorker\"),me=te?w():null,ie=W?Z:_,le=v&&me?!!v.__confetti_initialized:!1,je=typeof matchMedia==\"function\"&&matchMedia(\"(prefers-reduced-motion)\").matches,Ae;function pe(xe,Ke,We){for(var Ue=M(xe,\"particleCount\",y),it=M(xe,\"angle\",Number),Ve=M(xe,\"spread\",Number),ke=M(xe,\"startVelocity\",Number),Ft=M(xe,\"decay\",Number),fe=M(xe,\"gravity\",Number),Se=M(xe,\"drift\",Number),ze=M(xe,\"colors\",j),lt=M(xe,\"ticks\",Number),mt=M(xe,\"shapes\"),_a=M(xe,\"scalar\"),ga=!!M(xe,\"flat\"),Ra=ee(xe),Kt=Ue,Oa=[],ea=v.width*Ra.x,zt=v.height*Ra.y;Kt--;)Oa.push(ne({x:ea,y:zt,angle:it,spread:Ve,startVelocity:ke,color:ze[Kt%ze.length],shape:mt[L(0,mt.length)],ticks:lt,decay:Ft,gravity:fe,drift:Se,scalar:_a,flat:ga}));return Ae?Ae.addFettis(Oa):(Ae=oe(v,Oa,ie,Ke,We),Ae.promise)}function ve(xe){var Ke=V||M(xe,\"disableForReducedMotion\",Boolean),We=M(xe,\"zIndex\",Number);if(Ke&&je)return S(function(ke){ke()});W&&Ae?v=Ae.canvas:W&&!v&&(v=B(We),document.body.appendChild(v)),q&&!le&&ie(v);var Ue={width:v.width,height:v.height};me&&!le&&me.init(v),le=!0,me&&(v.__confetti_initialized=!0);function it(){if(me){var ke={getBoundingClientRect:function(){if(!W)return v.getBoundingClientRect()}};ie(ke),me.postMessage({resize:{width:ke.width,height:ke.height}});return}Ue.width=Ue.height=null}function Ve(){Ae=null,q&&(Y=!1,l.removeEventListener(\"resize\",it)),W&&v&&(document.body.contains(v)&&document.body.removeChild(v),v=null,le=!1)}return q&&!Y&&(Y=!0,l.addEventListener(\"resize\",it,!1)),me?me.fire(xe,Ue,Ve):pe(xe,Ue,Ve)}return ve.reset=function(){me&&me.reset(),Ae&&Ae.reset()},ve}var O;function k(){return O||(O=ge(null,{useWorker:!0,resize:!0})),O}function U(v,D,W,q,Y,V,te){var me=new Path2D(v),ie=new Path2D;ie.addPath(me,new DOMMatrix(D));var le=new Path2D;return le.addPath(ie,new DOMMatrix([Math.cos(te)*Y,Math.sin(te)*Y,-Math.sin(te)*V,Math.cos(te)*V,W,q])),le}function Q(v){if(!g)throw new Error(\"path confetti are not supported in this browser\");var D,W;typeof v==\"string\"?D=v:(D=v.path,W=v.matrix);var q=new Path2D(D),Y=document.createElement(\"canvas\"),V=Y.getContext(\"2d\");if(!W){for(var te=1e3,me=te,ie=te,le=0,je=0,Ae,pe,ve=0;ve<te;ve+=2)for(var xe=0;xe<te;xe+=2)V.isPointInPath(q,ve,xe,\"nonzero\")&&(me=Math.min(me,ve),ie=Math.min(ie,xe),le=Math.max(le,ve),je=Math.max(je,xe));Ae=le-me,pe=je-ie;var Ke=10,We=Math.min(Ke/Ae,Ke/pe);W=[We,0,0,We,-Math.round(Ae/2+me)*We,-Math.round(pe/2+ie)*We]}return{type:\"path\",path:D,matrix:W}}function ae(v){var D,W=1,q=\"#000000\",Y='\"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\", \"EmojiOne Color\", \"Android Emoji\", \"Twemoji Mozilla\", \"system emoji\", sans-serif';typeof v==\"string\"?D=v:(D=v.text,W=\"scalar\"in v?v.scalar:W,Y=\"fontFamily\"in v?v.fontFamily:Y,q=\"color\"in v?v.color:q);var V=10*W,te=\"\"+V+\"px \"+Y,me=new OffscreenCanvas(V,V),ie=me.getContext(\"2d\");ie.font=te;var le=ie.measureText(D),je=Math.ceil(le.actualBoundingBoxRight+le.actualBoundingBoxLeft),Ae=Math.ceil(le.actualBoundingBoxAscent+le.actualBoundingBoxDescent),pe=2,ve=le.actualBoundingBoxLeft+pe,xe=le.actualBoundingBoxAscent+pe;je+=pe+pe,Ae+=pe+pe,me=new OffscreenCanvas(je,Ae),ie=me.getContext(\"2d\"),ie.font=te,ie.fillStyle=q,ie.fillText(D,ve,xe);var Ke=1/W;return{type:\"bitmap\",bitmap:me.transferToImageBitmap(),matrix:[Ke,0,0,Ke,-je*Ke/2,-Ae*Ke/2]}}o.exports=function(){return k().apply(this,arguments)},o.exports.reset=function(){k().reset()},o.exports.create=ge,o.exports.shapeFromPath=Q,o.exports.shapeFromText=ae})((function(){return typeof window<\"u\"?window:typeof self<\"u\"?self:this||{}})(),Bu,!1);const Or=Bu.exports;Bu.exports.create;const S1=(i,l)=>{const{userId:o,goals:u,setGoals:d,recurringTransactions:h}=i,g=x.useRef({goals:u,recurringTransactions:h});x.useEffect(()=>{g.current={goals:u,recurringTransactions:h}},[u,h]);const N=x.useRef(l);x.useEffect(()=>{N.current=l},[l]);const E=x.useCallback(async f=>{try{const w=await _e.createGoal(o,f);if(w.success){if(d(A=>[...A,w.goal]),f.monthly_contribution>0){const{createRecurringTransaction:A}=N.current;await A({type:\"expense\",description:`Goal Contribution: ${w.goal.name}`,amount:f.monthly_contribution,category:\"Transfer\",accountId:f.accountId||\"none\",frequency:\"monthly\",startDate:f.startDate||w.goal.createdAt.split(\"T\")[0],tags:[\"goal\",\"contribution\",w.goal.name.toLowerCase()],goalId:w.goal.id})}ce.success(\"Goal created\")}}catch{const w={id:`temp_${Date.now()}`,...f,createdAt:new Date().toISOString()};d(A=>[...A,w]),ce.warning(\"Created in offline mode\")}},[o,d]),S=x.useCallback(async(f,w)=>{try{const A=await _e.updateGoal(o,f,w);if(A.success){const{goals:T,recurringTransactions:C}=g.current,M=T.find(y=>y.id===f);if(M){const{createRecurringTransaction:y,updateRecurringTransaction:L,deleteRecurringTransaction:z}=N.current;if((A.goal.monthly_contribution||0)>0){const j=C.find(G=>G.goalId===f);j?await L(j.id,{amount:A.goal.monthly_contribution||0,description:`Goal Contribution: ${A.goal.name}`}):await y({type:\"expense\",description:`Goal Contribution: ${A.goal.name}`,amount:A.goal.monthly_contribution||0,category:\"Transfer\",accountId:A.goal.accountId||\"none\",frequency:\"monthly\",startDate:A.goal.startDate||M.createdAt?.split(\"T\")[0]||new Date().toISOString().split(\"T\")[0],tags:[\"goal\",\"contribution\",A.goal.name.toLowerCase()],goalId:A.goal.id})}else if(M.monthly_contribution&&M.monthly_contribution>0){const j=C.find(G=>G.goalId===f);j&&await z(j.id)}}d(y=>y.map(L=>L.id===f?A.goal:L)),A.goal.currentAmount>=A.goal.targetAmount?(ce.success(`🎉 Goal \"${A.goal.name}\" completed!`),Or({particleCount:200,spread:120,origin:{y:.5}})):ce.success(\"Goal updated\")}}catch{d(A=>A.map(T=>T.id===f?{...T,...w}:T)),ce.warning(\"Updated locally\")}},[o,d]),p=x.useCallback(async f=>{try{(await _e.deleteGoal(o,f)).success&&(d(A=>A.filter(T=>T.id!==f)),ce.success(\"Goal deleted\"))}catch{d(w=>w.filter(A=>A.id!==f)),ce.warning(\"Deleted locally\")}},[o,d]);return x.useMemo(()=>({createGoal:E,updateGoal:S,deleteGoal:p}),[E,S,p])},C1=(i,l)=>{const{userId:o,investments:u,setInvestments:d,accounts:h,setExpenses:g,recurringTransactions:N}=i,E=x.useRef({investments:u,accounts:h,recurringTransactions:N});x.useEffect(()=>{E.current={investments:u,accounts:h,recurringTransactions:N}},[u,h,N]);const S=x.useRef(l);x.useEffect(()=>{S.current=l},[l]);const p=x.useCallback(async(A,T)=>{try{const C=await _e.createInvestment(o,A);if(C.success){if(d(M=>[...M,C.investment]),T&&T!==\"none\"){const{updateAccount:M}=S.current,{accounts:y}=E.current,L=y.find(z=>z.id===T);if(L){const z=A.buyPrice*A.quantity;await M(T,{balance:L.balance-z});const j={description:`Asset Purchase: ${A.symbol} (${A.quantity} units)`,amount:z,category:\"Transfer\",date:A.purchaseDate||new Date().toISOString().split(\"T\")[0],tags:[\"investment\",\"principal\",A.symbol],accountId:T},G=await _e.createExpense(o,j);G.success&&g(ee=>[...ee,G.expense])}}if(C.investment.type===\"sip\"){const{createRecurringTransaction:M}=S.current;await M({type:\"expense\",description:`SIP: ${C.investment.symbol} (${C.investment.name})`,amount:C.investment.buyPrice*C.investment.quantity,category:\"Investment\",accountId:T||\"none\",frequency:\"monthly\",startDate:C.investment.purchaseDate,tags:[\"sip\",\"investment\",C.investment.symbol.toLowerCase()],investmentId:C.investment.id})}ce.success(\"Investment created\")}}catch{const C={id:`temp_${Date.now()}`,...A,createdAt:new Date().toISOString()};d(M=>[...M,C]),ce.warning(\"Created locally\")}},[o,g,d]),f=x.useCallback(async(A,T)=>{try{const C=await _e.updateInvestment(o,A,T);if(C.success){const{investments:M,recurringTransactions:y}=E.current,L=M.find(z=>z.id===A);if(L){const{updateRecurringTransaction:z,createRecurringTransaction:j,deleteRecurringTransaction:G}=S.current;if(C.investment.type===\"sip\"){const ee=y.find(Z=>Z.investmentId===A);ee?await z(ee.id,{amount:C.investment.buyPrice*C.investment.quantity,description:`SIP: ${C.investment.symbol} (${C.investment.name})`}):await j({type:\"expense\",description:`SIP: ${C.investment.symbol} (${C.investment.name})`,amount:C.investment.buyPrice*C.investment.quantity,category:\"Investment\",accountId:C.investment.accountId||\"none\",frequency:\"monthly\",startDate:C.investment.purchaseDate,tags:[\"sip\",\"investment\",C.investment.symbol.toLowerCase()],investmentId:C.investment.id})}else if(L.type===\"sip\"){const ee=y.find(Z=>Z.investmentId===A);ee&&await G(ee.id)}}d(z=>z.map(j=>j.id===A?C.investment:j)),ce.success(\"Investment updated\")}}catch{d(C=>C.map(M=>M.id===A?{...M,...T}:M)),ce.warning(\"Updated locally\")}},[o,d]),w=x.useCallback(async A=>{try{(await _e.deleteInvestment(o,A)).success&&(d(C=>C.filter(M=>M.id!==A)),ce.success(\"Investment deleted\"))}catch{d(T=>T.filter(C=>C.id!==A)),ce.warning(\"Deleted locally\")}},[o,d]);return x.useMemo(()=>({createInvestment:p,updateInvestment:f,deleteInvestment:w}),[p,f,w])},E1=(i,l)=>{const{userId:o,liabilities:u,setLiabilities:d,recurringTransactions:h}=i,g=x.useRef({liabilities:u,recurringTransactions:h});x.useEffect(()=>{g.current={liabilities:u,recurringTransactions:h}},[u,h]);const N=x.useRef(l);x.useEffect(()=>{N.current=l},[l]);const E=x.useCallback(async f=>{try{const w=await _e.createLiability(o,f);if(w.success&&(d(A=>[...A,w.liability]),ce.success(\"Liability created\"),w.liability.emiAmount>0)){const{createRecurringTransaction:A}=N.current;await A({type:\"expense\",description:`EMI: ${w.liability.name}`,amount:w.liability.emiAmount,category:\"EMI\",accountId:w.liability.accountId||\"none\",frequency:\"monthly\",startDate:w.liability.startDate,tags:[\"emi\",\"liability\",w.liability.name.toLowerCase()],liabilityId:w.liability.id})}}catch{const w={id:`temp_${Date.now()}`,...f,createdAt:new Date().toISOString()};d(A=>[...A,w]),ce.warning(\"Created locally\")}},[o,d]),S=x.useCallback(async(f,w)=>{try{const A=await _e.updateLiability(o,f,w);if(A.success){const{liabilities:T,recurringTransactions:C}=g.current,M=T.find(y=>y.id===f);if(M){const{createRecurringTransaction:y,updateRecurringTransaction:L,deleteRecurringTransaction:z}=N.current;if(A.liability.emiAmount>0){const j=C.find(G=>G.liabilityId===f);j?await L(j.id,{amount:A.liability.emiAmount,description:`EMI: ${A.liability.name}`}):await y({type:\"expense\",description:`EMI: ${A.liability.name}`,amount:A.liability.emiAmount,category:\"EMI\",accountId:A.liability.accountId||\"none\",frequency:\"monthly\",startDate:A.liability.startDate,tags:[\"emi\",\"liability\",A.liability.name.toLowerCase()],liabilityId:A.liability.id})}else if(M.emiAmount>0){const j=C.find(G=>G.liabilityId===f);j&&await z(j.id)}}d(y=>y.map(L=>L.id===f?A.liability:L)),ce.success(\"Liability updated\")}}catch{d(A=>A.map(T=>T.id===f?{...T,...w}:T)),ce.warning(\"Updated locally\")}},[o,d]),p=x.useCallback(async f=>{try{(await _e.deleteLiability(o,f)).success&&(d(A=>A.filter(T=>T.id!==f)),ce.success(\"Liability deleted\"))}catch{d(w=>w.filter(A=>A.id!==f)),ce.warning(\"Deleted locally\")}},[o,d]);return x.useMemo(()=>({createLiability:E,updateLiability:S,deleteLiability:p}),[E,S,p])},A1={netflix:\"Subscription\",spotify:\"Subscription\",google:\"Subscription\",apple:\"Subscription\",icloud:\"Subscription\",youtube:\"Subscription\",disney:\"Subscription\",hotstar:\"Subscription\",\"prime video\":\"Subscription\",\"prime membership\":\"Subscription\",\"amazon prime\":\"Subscription\",audible:\"Subscription\",kindle:\"Subscription\",hulu:\"Subscription\",hbomax:\"Subscription\",hbo:\"Subscription\",\"paramount+\":\"Subscription\",peacock:\"Subscription\",crunchyroll:\"Subscription\",chaisai:\"Subscription\",\"google play\":\"Subscription\",\"google one\":\"Subscription\",\"app store\":\"Subscription\",microsoft:\"Subscription\",\"office 365\":\"Subscription\",dropbox:\"Subscription\",zoom:\"Subscription\",canva:\"Subscription\",adobe:\"Subscription\",\"creative cloud\":\"Subscription\",jio:\"Subscription\",airtel:\"Subscription\",vodafone:\"Subscription\",idea:\"Subscription\",bsnl:\"Subscription\",\"vi \":\"Subscription\",broadband:\"Subscription\",isp:\"Subscription\",\"act fiber\":\"Subscription\",hathway:\"Subscription\",\"internet bill\":\"Subscription\",telecom:\"Subscription\",coffee:\"Food & Dining\",starbucks:\"Food & Dining\",cafe:\"Food & Dining\",restaurant:\"Food & Dining\",lunch:\"Food & Dining\",dinner:\"Food & Dining\",pizza:\"Food & Dining\",burger:\"Food & Dining\",mcdonalds:\"Food & Dining\",kfc:\"Food & Dining\",food:\"Food & Dining\",zomato:\"Food & Dining\",swiggy:\"Food & Dining\",beer:\"Food & Dining\",bar:\"Food & Dining\",uber:\"Transportation\",ola:\"Transportation\",cab:\"Transportation\",taxi:\"Transportation\",bus:\"Transportation\",train:\"Transportation\",metro:\"Transportation\",fuel:\"Transportation\",petrol:\"Transportation\",gas:\"Transportation\",parking:\"Transportation\",amazon:\"Shopping\",flipkart:\"Shopping\",clothes:\"Shopping\",zara:\"Shopping\",nike:\"Shopping\",shoes:\"Shopping\",mall:\"Shopping\",grocery:\"Groceries\",supermarket:\"Groceries\",vegetables:\"Groceries\",fruits:\"Groceries\",milk:\"Groceries\",electricity:\"Bills & Utilities\",water:\"Bills & Utilities\",\"gas bill\":\"Bills & Utilities\",rent:\"Bills & Utilities\",maintenance:\"Bills & Utilities\",movie:\"Entertainment\",cinema:\"Entertainment\",game:\"Entertainment\",steam:\"Entertainment\",playstation:\"Entertainment\",xbox:\"Entertainment\",doctor:\"Health & Wellbeing\",medical:\"Health & Wellbeing\",pharmacy:\"Health & Wellbeing\",medicine:\"Health & Wellbeing\",gym:\"Health & Wellbeing\",fitness:\"Health & Wellbeing\",hospital:\"Health & Wellbeing\",transfer:\"Transfer\",payment:\"Transfer\",\"cc bill\":\"Transfer\",internal:\"Transfer\",membership:\"Subscription\",subscription:\"Subscription\",recurring:\"Subscription\",premium:\"Subscription\",\"monthly bill\":\"Subscription\"},op=[{keywords:[\"netflix\"],displayName:\"Netflix Premium\",defaultAmount:649,category:\"Subscription\"},{keywords:[\"hotstar\",\"disney\"],displayName:\"Disney+ Hotstar\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"prime video\",\"amazon prime\"],displayName:\"Amazon Prime\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"hulu\"],displayName:\"Hulu\",defaultAmount:650,category:\"Subscription\"},{keywords:[\"youtube\",\"yt premium\"],displayName:\"YouTube Premium\",defaultAmount:129,category:\"Subscription\"},{keywords:[\"sonyliv\"],displayName:\"SonyLIV\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"zee5\"],displayName:\"Zee5\",defaultAmount:100,category:\"Subscription\"},{keywords:[\"jiocinema\"],displayName:\"JioCinema Premium\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"apple tv\"],displayName:\"Apple TV+\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"spotify\"],displayName:\"Spotify Premium\",defaultAmount:119,category:\"Subscription\"},{keywords:[\"apple music\"],displayName:\"Apple Music\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"audible\"],displayName:\"Audible\",defaultAmount:199,category:\"Subscription\"},{keywords:[\"wynk\"],displayName:\"Wynk Music\",defaultAmount:49,category:\"Subscription\"},{keywords:[\"gaana\"],displayName:\"Gaana Plus\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"jiosaavn\"],displayName:\"JioSaavn Pro\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"google one\",\"google storage\"],displayName:\"Google One\",defaultAmount:130,category:\"Subscription\"},{keywords:[\"chatgpt\",\"openai\"],displayName:\"ChatGPT Plus\",defaultAmount:1999,category:\"Subscription\"},{keywords:[\"claude\",\"anthropic\"],displayName:\"Claude Pro\",defaultAmount:1999,category:\"Subscription\"},{keywords:[\"github\"],displayName:\"GitHub Copilot\",defaultAmount:830,category:\"Subscription\"},{keywords:[\"midjourney\"],displayName:\"Midjourney\",defaultAmount:830,category:\"Subscription\"},{keywords:[\"canva\"],displayName:\"Canva Pro\",defaultAmount:499,category:\"Subscription\"},{keywords:[\"adobe\",\"creative cloud\"],displayName:\"Adobe CC\",defaultAmount:2300,category:\"Subscription\"},{keywords:[\"jio\",\"myjio\"],displayName:\"Jio Mobile\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"airtel\"],displayName:\"Airtel Mobile\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"vi \",\"vodafone\"],displayName:\"Vi Mobile\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"act fiber\",\"act net\"],displayName:\"ACT Fibernet\",defaultAmount:820,category:\"Bills & Utilities\"},{keywords:[\"hathway\"],displayName:\"Hathway Broadband\",defaultAmount:600,category:\"Bills & Utilities\"}],Er=i=>{const l=i.toLowerCase();return op.some(o=>o.keywords.some(u=>l.includes(u)))},qu=i=>{const l=i.toLowerCase();for(const o of op)if(o.keywords.some(u=>l.includes(u))){const u=[\"subscription\",\"online\"];return{category:o.category,tags:u,suggestedAmount:o.defaultAmount,suggestedDescription:o.displayName}}for(const[o,u]of Object.entries(A1))if(l.includes(o)){const d=[];return l.includes(\"online\")&&d.push(\"online\"),l.includes(\"subscription\")&&d.push(\"subscription\"),{category:u,tags:d}}return null},k1=(i,l)=>{const{userId:o,expenses:u,setExpenses:d,accounts:h,goals:g,emergencyFundAmount:N,setEmergencyFundAmount:E,liabilities:S,setNotifications:p}=i,f=x.useRef({expenses:u,accounts:h,goals:g,emergencyFundAmount:N,liabilities:S});x.useEffect(()=>{f.current={expenses:u,accounts:h,goals:g,emergencyFundAmount:N,liabilities:S}},[u,h,g,N,S]);const w=x.useCallback(y=>{p(L=>{const z=Array.isArray(y)?y:[y],j=[...L];return z.forEach(G=>{j.some(ee=>ee.id===G.id)||j.unshift(G)}),j.slice(0,100)})},[p]),A=x.useRef(l);x.useEffect(()=>{A.current=l},[l]);const T=x.useCallback(async y=>{const{accounts:L,goals:z,emergencyFundAmount:j,liabilities:G}=f.current,{updateAccount:ee,updateGoal:Z,updateLiability:_,createRecurringTransaction:B}=A.current;try{const J=L.reduce((Q,ae)=>Q+(ae.type!==\"credit_card\"?ae.balance:0),0),ne=z.reduce((Q,ae)=>Q+ae.currentAmount,0)+j,F=G.reduce((Q,ae)=>Q+ae.emiAmount,0),oe=Math.max(0,J-ne-F),ge=y.amount;if(ge>oe){let ae=ge-oe;const v=[];z.forEach(q=>{const Y=q.type||\"growth\";let V=1;Y===\"stability\"&&(V=2),Y===\"protection\"&&(V=3),q.currentAmount>0&&v.push({id:q.id,type:\"goal\",currentAmount:q.currentAmount,priority:V,name:q.name})}),j>0&&v.push({id:\"emergency-fund\",type:\"emergency\",currentAmount:j,priority:3,name:\"Emergency Fund\"}),v.sort((q,Y)=>q.priority-Y.priority);const D=[],W=[];for(const q of v){if(ae<=0)break;const Y=Math.min(q.currentAmount,ae);ae-=Y,q.type===\"goal\"?(D.push(Z(q.id,{currentAmount:q.currentAmount-Y,status:\"leaking\"})),W.push({id:`leak_${q.id}_${new Date().toISOString().split(\"T\")[0]}`,type:\"alert\",priority:\"medium\",category:\"transactions\",title:\"Shadow Wallet Leakage\",message:`₹${Y} spent reduced your '${q.name}' reserve.`,timestamp:new Date,read:!1})):q.type===\"emergency\"&&(E(V=>V-Y),W.push({id:`leak_emergency_${new Date().toISOString().split(\"T\")[0]}`,type:\"alert\",priority:\"medium\",category:\"transactions\",title:\"Emergency Fund Alert\",message:`Warning: ₹${Y} withdrawn from Emergency Fund to cover spending.`,timestamp:new Date,read:!1}))}await Promise.all(D),W.length>0&&(w(W),W.forEach(q=>ce.error(q.title,{description:q.message})))}const O=L.find(Q=>Q.id===y.accountId),k={...y};if(O?.type===\"credit_card\"){const Q=O.serviceChargePercentage||0;Q>0&&(k.serviceChargeAmount=y.amount*Q/100);const ae=O.creditLimit||0,v=O.safeLimitPercentage||30,D=ae*v/100,q=Math.abs(O.balance)+y.amount;q>D&&ae>0&&(y.isIncomeGenerating||(ce.warning(\"High Interest Risk Detected\",{description:`This transaction puts your CC usage at ${(q/ae*100).toFixed(1)}%, exceeding your ${v}% safe limit with no income-justification.`,duration:6e3}),w({id:`cc_limit_${O.id}_${new Date().toISOString().split(\"T\")[0]}`,type:\"alert\",priority:\"medium\",category:\"transactions\",title:\"Credit Stability Breach\",message:`Card '${O.name}' usage protocol exceeded ${v}% threshold. Avoid non-essential outflow.`,timestamp:new Date,read:!1})))}if(!k.category||k.category===\"Other\"){const Q=qu(k.description);Q&&Q.category===\"Subscription\"&&(k.category=\"Subscription\",k.tags=Array.from(new Set([...k.tags||[],\"auto-detected\"])))}if(y.registerAsLiability)try{const Q=y.tenureUnit===\"years\"?y.tenure*12:y.tenure,ae=await _e.createLiability(o,{name:y.description,type:y.liabilityType||\"other\",principal:y.principal||y.amount,outstanding:y.principal||y.amount,interestRate:y.interestRate||0,emiAmount:y.amount,startDate:y.date,tenure:Q,accountId:y.accountId});ae.success&&(k.liabilityId=ae.liability.id,y.isRecurring=!1)}catch(Q){console.error(\"Failed to auto-register liability:\",Q)}const U=await _e.createExpense(o,k);if(U.success){if(d(Q=>[...Q,U.expense]),Rr.ensureCatalogAndLink(o,\"transaction\",U.expense.id,\"merchant\",k.description,{amount:k.amount,category:k.category}).catch(Q=>console.error(\"Catalog link failed\",Q)),O){const Q=y.amount+(k.serviceChargeAmount||0),ae=O.type===\"credit_card\"?O.balance+Q:O.balance-Q;await ee(O.id,{balance:ae})}if(k.liabilityId){const Q=G.find(ae=>ae.id===k.liabilityId);if(Q){const ae=Math.max(0,Q.outstanding-y.amount);await _(Q.id,{outstanding:ae}),ce.info(`Updated '${Q.name}' balance`,{description:`New outstanding: ₹${ae.toLocaleString()}`})}}y.isRecurring?await B({type:\"expense\",description:y.description,amount:y.amount,category:y.category,accountId:y.accountId,frequency:y.frequency||\"monthly\",customIntervalDays:y.customIntervalDays,startDate:y.date,endDate:y.endDate,tags:y.tags}):(ce.success(\"Expense added!\"),Er(y.description)&&!y.isRecurring&&w({id:`verify_sub_${U.expense.id}`,type:\"insight\",priority:\"medium\",category:\"transactions\",title:\"Automate Payment?\",message:`Detected '${y.description}' as a subscription. Add to cyclical routine?`,timestamp:new Date,read:!1,action:{type:\"verify_subscription\",label:\"Automate\",status:\"pending\",payload:{id:U.expense.id,description:y.description,amount:y.amount,category:y.category,accountId:y.accountId,date:y.date}}}))}}catch{d(J=>[...J,{id:`temp_${Date.now()}`,...y,createdAt:new Date().toISOString()}]),ce.warning(\"Added in offline mode\")}},[o,w,E,d]),C=x.useCallback(async(y,L)=>{const{expenses:z,accounts:j}=f.current,{updateAccount:G}=A.current;try{const ee=await _e.updateExpense(o,y,L);if(ee.success){const Z=z.find(_=>_.id===y);if(Z){const _=j.find(ne=>ne.id===Z.accountId);if(_){const ne=Z.amount+(Z.serviceChargeAmount||0),F=_.type===\"credit_card\"?_.balance-ne:_.balance+ne;await G(_.id,{balance:F})}const B=ee.expense,J=j.find(ne=>ne.id===B.accountId);if(J){const ne=B.amount+(B.serviceChargeAmount||0),F=J.type===\"credit_card\"?J.balance+ne:J.balance-ne;await G(J.id,{balance:F})}}d(_=>_.map(B=>B.id===y?ee.expense:B)),ce.success(\"Expense updated\")}}catch{d(ee=>ee.map(Z=>Z.id===y?{...Z,...L}:Z)),ce.warning(\"Updated in offline mode\")}},[o,d]),M=x.useCallback(async y=>{const{expenses:L,accounts:z}=f.current,{updateAccount:j}=A.current;try{if((await _e.deleteExpense(o,y)).success){const ee=L.find(Z=>Z.id===y);if(ee){const Z=z.find(_=>_.id===ee.accountId);if(Z){const _=ee.amount+(ee.serviceChargeAmount||0),B=Z.type===\"credit_card\"?Z.balance-_:Z.balance+_;await j(Z.id,{balance:B})}}d(Z=>Z.filter(_=>_.id!==y)),ce.success(\"Expense deleted\")}}catch{d(G=>G.filter(ee=>ee.id!==y)),ce.warning(\"Deleted in offline mode\")}},[o,d]);return x.useMemo(()=>({createExpense:T,updateExpense:C,deleteExpense:M,addNotifications:w}),[T,C,M,w])},T1=(i,l)=>{const{userId:o,incomes:u,setIncomes:d,accounts:h}=i,g=x.useRef({incomes:u,accounts:h});x.useEffect(()=>{g.current={incomes:u,accounts:h}},[u,h]);const N=x.useRef(l);x.useEffect(()=>{N.current=l},[l]);const E=x.useCallback(async f=>{try{const w=await _e.createIncome(o,f);if(w.success){d(C=>[...C,w.income]),Rr.ensureCatalogAndLink(o,\"transaction\",w.income.id,\"merchant\",f.description,{amount:f.amount,category:f.category}).catch(C=>console.error(\"Catalog link failed\",C));const{accounts:A}=g.current,T=A.find(C=>C.id===f.accountId);if(T){const{updateAccount:C,createRecurringTransaction:M}=N.current,y=T.type===\"credit_card\"?T.balance-f.amount:T.balance+f.amount;await C(T.id,{balance:y}),f.isRecurring?await M({type:\"income\",description:f.description,amount:f.amount,category:f.category,accountId:f.accountId,frequency:f.frequency||\"monthly\",customIntervalDays:f.customIntervalDays,startDate:f.date,endDate:f.endDate,tags:f.tags}):ce.success(\"Income added!\")}else ce.success(\"Income added!\")}}catch(w){console.error(\"Error creating income:\",w),d(A=>[...A,{id:`temp_${Date.now()}`,...f,createdAt:new Date().toISOString()}]),ce.warning(\"Added in offline mode\")}},[o,d]),S=x.useCallback(async(f,w)=>{try{const A=await _e.updateIncome(o,f,w);if(A.success){const{incomes:T,accounts:C}=g.current,M=T.find(y=>y.id===f);if(M){const{updateAccount:y}=N.current,L=C.find(G=>G.id===M.accountId);if(L){const G=L.type===\"credit_card\"?L.balance+M.amount:L.balance-M.amount;await y(L.id,{balance:G})}const z=A.income,j=C.find(G=>G.id===z.accountId);if(j){const G=j.type===\"credit_card\"?j.balance-z.amount:j.balance+z.amount;await y(j.id,{balance:G})}}d(y=>y.map(L=>L.id===f?A.income:L)),ce.success(\"Income updated\")}}catch{d(A=>A.map(T=>T.id===f?{...T,...w}:T)),ce.warning(\"Updated in offline mode\")}},[o,d]),p=x.useCallback(async f=>{try{if((await _e.deleteIncome(o,f)).success){const{incomes:A,accounts:T}=g.current,C=A.find(M=>M.id===f);if(C){const{updateAccount:M}=N.current,y=T.find(L=>L.id===C.accountId);if(y){const L=y.type===\"credit_card\"?y.balance+C.amount:y.balance-C.amount;await M(y.id,{balance:L})}}d(M=>M.filter(y=>y.id!==f)),ce.success(\"Income deleted\")}}catch{d(w=>w.filter(A=>A.id!==f)),ce.warning(\"Deleted in offline mode\")}},[o,d]);return x.useMemo(()=>({createIncome:E,updateIncome:S,deleteIncome:p}),[E,S,p])},D1=(i,l)=>{const{userId:o,debts:u,setDebts:d,accounts:h,setExpenses:g,setIncomes:N}=i,E=x.useRef({debts:u,accounts:h});x.useEffect(()=>{E.current={debts:u,accounts:h}},[u,h]);const S=x.useRef(l);x.useEffect(()=>{S.current=l},[l]);const p=x.useCallback(async T=>{try{const C=await _e.createDebt(o,T);if(C.success){d(L=>[...L,C.debt]);const{accounts:M}=E.current,y=M.find(L=>L.id===T.accountId);if(y){const{updateAccount:L}=S.current,z=T.type===\"borrowed\"?T.amount:-T.amount,j=y.type===\"credit_card\"?y.balance-z:y.balance+z;await L(y.id,{balance:j})}if(T.isRecurring){const{createRecurringTransaction:L}=S.current;await L({type:\"expense\",description:`Debt: ${T.personName} (${T.type})`,amount:T.amount,category:\"Debt\",accountId:T.accountId,frequency:T.frequency||\"monthly\",startDate:T.date,tags:[...T.tags||[],\"debt\"]})}ce.success(\"Debt created\")}}catch{d(C=>[...C,{id:`temp_${Date.now()}`,...T,status:\"pending\",createdAt:new Date().toISOString()}]),ce.warning(\"Added in offline mode\")}},[o,d]),f=x.useCallback(async(T,C)=>{try{const M=await _e.updateDebt(o,T,C);if(M.success){const{debts:y,accounts:L}=E.current,z=y.find(j=>j.id===T);if(z){const{updateAccount:j,updateRecurringTransaction:G,createRecurringTransaction:ee}=S.current,Z=L.find(J=>J.id===z.accountId);if(Z){const J=z.type===\"borrowed\"?-z.amount:z.amount,ne=Z.type===\"credit_card\"?Z.balance-J:Z.balance+J;await j(Z.id,{balance:ne})}const _=M.debt,B=L.find(J=>J.id===_.accountId);if(B){const J=_.type===\"borrowed\"?_.amount:-_.amount,ne=B.type===\"credit_card\"?B.balance-J:B.balance+J;await j(B.id,{balance:ne})}C.isRecurring&&(z.recurringId?await G(z.recurringId,{amount:C.amount,description:`Debt: ${C.personName} (${C.type})`}):await ee({type:\"expense\",description:`Debt: ${C.personName} (${C.type})`,amount:C.amount,category:\"Debt\",accountId:C.accountId,frequency:C.frequency||\"monthly\",startDate:C.date,tags:[...C.tags||[],\"debt\"]}))}d(j=>j.map(G=>G.id===T?M.debt:G)),ce.success(\"Debt updated\")}}catch{d(M=>M.map(y=>y.id===T?{...y,...C}:y)),ce.warning(\"Updated in offline mode\")}},[o,d]),w=x.useCallback(async T=>{try{const C=await _e.updateDebt(o,T,{status:\"settled\"});if(C.success){const{debts:M,accounts:y}=E.current,L=M.find(z=>z.id===T);if(L&&L.status!==\"settled\"){const{updateAccount:z}=S.current,j=y.find(G=>G.id===L.accountId);if(j){const G=L.type===\"borrowed\"?-L.amount:L.amount,ee=j.type===\"credit_card\"?j.balance-G:j.balance+G;await z(j.id,{balance:ee});const Z={description:`Debt Settlement: ${L.personName}`,amount:L.amount,category:\"Transfer\",date:new Date().toISOString().split(\"T\")[0],tags:[\"debt-settlement\"],accountId:L.accountId};if(L.type===\"borrowed\"){const _=await _e.createExpense(o,Z);_.success&&g(B=>[...B,_.expense])}else{const _=await _e.createIncome(o,Z);_.success&&N(B=>[...B,_.income])}}}d(z=>z.map(j=>j.id===T?C.debt:j)),ce.success(\"🎉 Debt settled! Great job!\"),Or({particleCount:150,spread:100,origin:{y:.6}})}}catch{d(C=>C.map(M=>M.id===T?{...M,status:\"settled\"}:M)),ce.warning(\"Marked as settled locally\")}},[o,g,N,d]),A=x.useCallback(async T=>{try{if((await _e.deleteDebt(o,T)).success){const{debts:M,accounts:y}=E.current,L=M.find(z=>z.id===T);if(L){const{updateAccount:z}=S.current,j=y.find(G=>G.id===L.accountId);if(j){const G=L.type===\"borrowed\"?-L.amount:L.amount,ee=j.type===\"credit_card\"?j.balance-G:j.balance+G;await z(j.id,{balance:ee})}}d(z=>z.filter(j=>j.id!==T)),ce.success(\"Debt deleted\")}}catch{d(C=>C.filter(M=>M.id!==T)),ce.warning(\"Deleted in offline mode\")}},[o,d]);return x.useMemo(()=>({createDebt:p,updateDebt:f,settleDebt:w,deleteDebt:A}),[p,f,w,A])},lu=`https://${ll}.supabase.co/rest/v1`,ru={\"Content-Type\":\"application/json\",apikey:fn,Authorization:`Bearer ${fn}`},Ws={async getSuggestions(i,l=\"new\",o=20){const u=new URLSearchParams({user_id:`eq.${i}`,order:\"created_at.desc\",limit:o.toString()});l!==\"all\"&&u.append(\"status\",`eq.${l}`);try{const d=await fetch(`${lu}/smart_suggestions?${u}`,{headers:ru});return d.ok?await d.json():[]}catch(d){return console.error(\"Fetch suggestions error:\",d),[]}},async createSuggestion(i){try{const o=await(await fetch(`${lu}/smart_suggestions`,{method:\"POST\",headers:{...ru,Prefer:\"return=representation\"},body:JSON.stringify(i)})).json();return Array.isArray(o)?o[0]:o}catch(l){return console.error(\"Create suggestion error:\",l),null}},async updateStatus(i,l){try{return(await fetch(`${lu}/smart_suggestions?id=eq.${i}`,{method:\"PATCH\",headers:ru,body:JSON.stringify({status:l})})).ok}catch(o){return console.error(\"Update suggestion status error:\",o),!1}}};function o0(i,l){const o=JSON.stringify(l.payload||{}),u=l.type||\"UNKNOWN\";return`${i}_${u}_${o}`}const M1={detectSubscriptions(i){const l={};i.forEach(u=>{const d=u.note?.toLowerCase().trim()||u.merchant?.toLowerCase()||\"unknown\";d!==\"unknown\"&&(l[d]||(l[d]=[]),l[d].push(u))});const o=[];return Object.entries(l).forEach(([u,d])=>{if(d.length<3)return;const h=d.sort((S,p)=>new Date(S.txn_date).getTime()-new Date(p.txn_date).getTime()),g=h[h.length-1],N=h[h.length-2],E=Math.abs(new Date(g.txn_date).getTime()-new Date(N.txn_date).getTime())/(1e3*3600*24);E>=25&&E<=35&&o.push({type:\"subscription_detected\",title:\"New Subscription Detected\",message:`You've had 3 recurring payments to \"${u}\". Would you like to track this as a subscription?`,severity:\"low\",action:{type:\"CREATE_SUBSCRIPTION\",payload:{name:u,amount:g.amount,currency_code:g.currency_code}}})}),o}},_1=`https://${ll}.supabase.co/rest/v1`,R1={apikey:fn,Authorization:`Bearer ${fn}`},O1={async getTopSuggestions(i,l=5){return await Ws.getSuggestions(i,\"new\",l)},async generateForUser(i){try{const l=await Ws.getSuggestions(i,\"all\",100),o=new Set(l.map(N=>o0(N.type,N.action))),d=await(await fetch(`${_1}/transactions?user_id=eq.${i}&order=txn_date.desc&limit=100`,{headers:R1})).json(),h=[...M1.detectSubscriptions(d)];let g=0;for(const N of h){const E=o0(N.type,N.action);o.has(E)||(await Ws.createSuggestion({user_id:i,...N,status:\"new\",source:\"rule\",expires_at:null}),g++,o.add(E))}return g}catch(l){return console.error(\"Error generating suggestions:\",l),0}},async markSeen(i){return await Ws.updateStatus(i,\"seen\")},async dismiss(i){return await Ws.updateStatus(i,\"dismissed\")},async accept(i){return await Ws.updateStatus(i,\"accepted\")}},z1=(i,l)=>{const{userId:o,settings:u,setSettings:d,setAccounts:h,setExpenses:g,setIncomes:N,setDebts:E,setGoals:S,setLiabilities:p,setInvestments:f,setRecurringTransactions:w,setNotifications:A,setEmergencyFundAmount:T,setIsOffline:C,setApiStatus:M,backfillRequest:y,setBackfillRequest:L,expenses:z,incomes:j,goals:G,accounts:ee,liabilities:Z,recurringTransactions:_,setIsRefreshing:B}=i,J=x.useRef({expenses:z,incomes:j,goals:G,accounts:ee,liabilities:Z,recurringTransactions:_,settings:u});x.useEffect(()=>{J.current={expenses:z,incomes:j,goals:G,accounts:ee,liabilities:Z,recurringTransactions:_,settings:u}},[z,j,G,ee,Z,_,u]);const{updateAccount:ne,createRecurringTransaction:F,deleteExpense:oe,deleteIncome:ge,applyTheme:O}=l,k=x.useCallback(async Y=>{d(V=>({...V,...Y})),Y.theme&&O(Y.theme);try{const V=await _e.updateSettings(o,Y);if(V.success)d(te=>({...te,...V.settings,aiProvider:V.settings.aiProvider||te.aiProvider,apiKeys:{...te.apiKeys,...V.settings.apiKeys}}));else throw new Error(V.error)}catch(V){console.error(\"Failed to sync settings\",V),ce.error(\"Settings saved locally only\")}},[o,d,O]),U=x.useCallback(async()=>{try{try{await _e.processRecurring(o)}catch(ve){console.error(\"Skip recurring process\",ve)}const[Y,V,te,me,ie,le,je,Ae,pe]=await Promise.all([_e.getSettings(o).catch(()=>({success:!1,settings:void 0})),_e.getAccounts(o).catch(()=>({success:!1,accounts:[]})),_e.getExpenses(o).catch(()=>({success:!1,expenses:[]})),_e.getIncomes(o).catch(()=>({success:!1,incomes:[]})),_e.getDebts(o).catch(()=>({success:!1,debts:[]})),_e.getGoals(o).catch(()=>({success:!1,goals:[]})),_e.getLiabilities(o).catch(()=>({success:!1,liabilities:[]})),_e.getInvestments(o).catch(()=>({success:!1,investments:[]})),_e.getRecurring(o).catch(()=>({success:!1,recurring:[]}))]);C(!1),M(\"online\"),Y.success&&Y.settings&&(d(ve=>({...ve,...Y.settings,aiProvider:Y.settings.aiProvider||ve.aiProvider,apiKeys:{...ve.apiKeys,...Y.settings.apiKeys}})),O(Y.settings.theme)),V.success&&h(V.accounts||[]),te.success&&g(te.expenses||[]),me.success&&N(me.incomes||[]),ie.success&&E(ie.debts||[]),le.success&&S(le.goals||[]),je.success&&p(je.liabilities||[]),Ae.success&&f(Ae.investments||[]),pe.success&&w(pe.recurring||[]),O1.generateForUser(o).catch(ve=>console.error(\"Suggestions update failed\",ve)),ce.success(\"Sync complete\")}catch(Y){console.error(\"API Sync failed\",Y),C(!0),M(\"offline\")}},[o,d,h,g,N,E,S,p,f,w,C,M,O]),Q=x.useCallback(async()=>{B(!0),await U(),B(!1)},[B,U]),ae=x.useCallback(async()=>{if(!y)return;const{count:Y,dates:V,recurring:te}=y,{accounts:me,goals:ie,liabilities:le}=J.current;L(null);const je=ce.loading(`Generating ${Y} entries...`),Ae=[],pe=[];let ve=0;const xe=me.find(Ue=>Ue.id===te.accountId),Ke={},We={};try{for(const Ue of V){const it=Ue.toISOString().split(\"T\")[0],Ve={description:te.description,source:te.source,amount:te.amount,category:te.category,date:it,tags:[...te.tags||[],\"auto-backfill\"],accountId:te.accountId,isRecurring:!0,recurringId:te.id,liabilityId:te.liabilityId,investmentId:te.investmentId};if(te.type===\"expense\"){const ke=await _e.createExpense(o,Ve);ke.success&&(pe.push(ke.expense),xe&&(ve+=xe.type===\"credit_card\"?ke.expense.amount:-ke.expense.amount),te.goalId&&(Ke[te.goalId]=(Ke[te.goalId]||0)+ke.expense.amount),te.liabilityId&&(We[te.liabilityId]=(We[te.liabilityId]||0)+ke.expense.amount))}else{const ke=await _e.createIncome(o,Ve);ke.success&&(Ae.push(ke.income),xe&&(ve+=xe.type===\"credit_card\"?-ke.income.amount:ke.income.amount))}await new Promise(ke=>setTimeout(ke,30))}Ae.length>0&&N(Ue=>[...Ue,...Ae]),pe.length>0&&g(Ue=>[...Ue,...pe]);for(const[Ue,it]of Object.entries(Ke)){const Ve=ie.find(ke=>ke.id===Ue);if(Ve){const ke=Ve.currentAmount+it;await _e.updateGoal(o,Ue,{currentAmount:ke}),S(Ft=>Ft.map(fe=>fe.id===Ue?{...fe,currentAmount:ke}:fe))}}for(const[Ue,it]of Object.entries(We)){const Ve=le.find(ke=>ke.id===Ue);if(Ve){const ke=Math.max(0,Ve.outstanding-it);await _e.updateLiability(o,Ue,{outstanding:ke}),p(Ft=>Ft.map(fe=>fe.id===Ue?{...fe,outstanding:ke}:fe))}}xe&&ve!==0&&await ne(xe.id,{balance:xe.balance+ve}),ce.success(\"Backfill complete\",{id:je})}catch(Ue){console.error(\"Backfill failed\",Ue),ce.error(\"Backfill partial failure\",{id:je})}},[o,y,N,g,S,p,ne,L]),v=x.useCallback(async()=>{let Y=0;const V=J.current.expenses,te=[];for(const me of V)if(me.category!==\"Subscription\"&&Er(me.description)){const ie=qu(me.description);ie&&ie.category===\"Subscription\"&&(te.push(l.updateExpense(me.id,{category:\"Subscription\",tags:[...new Set([...me.tags,\"auto-migrated\",\"subscription\"])]})),Y++)}return te.length>0?(await Promise.all(te),ce.success(`Migrated ${Y} transactions to Subscriptions`)):ce.info(\"No subscription transactions found to migrate\"),{count:Y}},[l]),D=x.useCallback(async()=>{let Y=0;const{expenses:V,incomes:te}=J.current,me=[],ie=new Set,le=new Set;V.forEach(pe=>{const ve=`${pe.date}-${pe.description?.toLowerCase().trim()}-${pe.amount}`;!pe.description||pe.description.trim()===\"\"||pe.amount===0||ie.has(ve)?le.add(pe.id):ie.add(ve)});const je=new Map;V.forEach(pe=>{if(!le.has(pe.id)&&(pe.category===\"Subscription\"||pe.isRecurring||Er(pe.description))){const ve=new Date(pe.date),xe=`${pe.description.toLowerCase().trim()}-${ve.getFullYear()}-${ve.getMonth()}`;je.has(xe)||je.set(xe,[]),je.get(xe).push(pe)}}),je.forEach(pe=>{if(pe.length>1){pe.sort((ve,xe)=>ve.isRecurring!==xe.isRecurring?ve.isRecurring?-1:1:new Date(xe.date).getTime()-new Date(ve.date).getTime());for(let ve=1;ve<pe.length;ve++)le.add(pe[ve].id)}}),le.forEach(pe=>{me.push(oe(pe)),Y++});const Ae=new Set;for(const pe of te){const ve=`${pe.date}-${pe.source?.toLowerCase().trim()}-${pe.amount}`;!pe.source||pe.source.trim()===\"\"||pe.amount===0||Ae.has(ve)?(me.push(ge(pe.id)),Y++):Ae.add(ve)}return me.length>0?(await Promise.all(me),ce.success(`Cleaned up ${Y} entries`)):ce.info(\"Logs are clean.\"),{count:Y}},[oe,ge]),W=x.useCallback(()=>{Object.values(Oe).forEach(Y=>{Y!==Oe.AUTH&&Y!==Oe.REMEMBERED_MOBILE&&localStorage.removeItem(Y)}),g([]),N([]),E([]),S([]),h([]),f([]),p([]),w([]),A([]),T(0),ce.success(\"All data cleared successfully. You remain logged in.\")},[g,N,E,S,h,f,p,w,A,T]),q=x.useCallback(()=>{const Y=J.current.recurringTransactions;g(V=>{const te=[...V],me=te.filter(ie=>Er(ie.description));return me.length>0&&me.forEach(ie=>{if(ie.category===\"Subscription\")return;ie.category=\"Subscription\",ie.tags=Array.from(new Set([...ie.tags||[],\"auto-migrated\"])),Y.some(je=>je.description?.toLowerCase().includes(ie.description.toLowerCase())||ie.description.toLowerCase().includes(je.description?.toLowerCase()||\"\"))||setTimeout(()=>{F({type:\"expense\",description:ie.description,amount:ie.amount,category:\"Subscription\",accountId:ie.accountId,frequency:\"monthly\",startDate:ie.date,tags:[\"auto-migrated\"]})},100)}),te})},[F,g]);return x.useMemo(()=>({updateSettings:k,fetchFromApi:U,refreshData:Q,executeBackfill:ae,migrateSubscriptions:v,cleanupDuplicates:D,purgeAllData:W,runCategorizationMigration:q}),[k,U,Q,ae,v,D,W,q])},Hu=[{id:\"first_transaction\",name:\"Getting Started\",description:\"Add your first transaction\",icon:\"🎯\",condition:i=>i.totalTransactions>=1},{id:\"early_bird\",name:\"Early Bird\",description:\"Log in for the first time today\",icon:\"🌅\",condition:i=>i.dailyLogin===!0},{id:\"ten_transactions\",name:\"Building Habits\",description:\"Log 10 transactions\",icon:\"📊\",condition:i=>i.totalTransactions>=10},{id:\"fifty_transactions\",name:\"Momentum Builder\",description:\"Log 50 transactions\",icon:\"⚡\",condition:i=>i.totalTransactions>=50},{id:\"financial_guru\",name:\"Financial Guru\",description:\"Complete 100 transactions\",icon:\"🧙\",condition:i=>i.totalTransactions>=100},{id:\"three_day_streak\",name:\"Streak Starter\",description:\"Log in for 3 days in a row\",icon:\"🔥\",condition:i=>i.currentStreak>=3},{id:\"consistent_tracker\",name:\"Consistent Tracker\",description:\"Log transactions for 7 days in a row\",icon:\"📅\",condition:i=>i.currentStreak>=7},{id:\"habit_master\",name:\"Habit Master\",description:\"Maintain a 30-day streak\",icon:\"🏅\",condition:i=>i.currentStreak>=30},{id:\"dedication_champion\",name:\"Dedication Champion\",description:\"Achieve a 100-day streak\",icon:\"👑\",condition:i=>i.currentStreak>=100},{id:\"first_goal\",name:\"Goal Setter\",description:\"Create your first savings goal\",icon:\"🎯\",condition:i=>i.totalGoals>=1},{id:\"goal_achiever\",name:\"Goal Achiever\",description:\"Complete your first savings goal\",icon:\"🏆\",condition:i=>i.completedGoals>=1},{id:\"triple_winner\",name:\"Triple Winner\",description:\"Complete 3 savings goals\",icon:\"🎖️\",condition:i=>i.completedGoals>=3},{id:\"goal_crusher\",name:\"Goal Crusher\",description:\"Complete 5 savings goals\",icon:\"💎\",condition:i=>i.completedGoals>=5},{id:\"debt_aware\",name:\"Debt Aware\",description:\"Track your first debt\",icon:\"📝\",condition:i=>i.totalDebts>=1},{id:\"debt_settler\",name:\"Debt Settler\",description:\"Settle your first debt\",icon:\"✅\",condition:i=>i.settledDebts>=1},{id:\"debt_destroyer\",name:\"Debt Destroyer\",description:\"Settle 5 debts\",icon:\"💪\",condition:i=>i.settledDebts>=5},{id:\"debt_free_hero\",name:\"Debt-Free Hero\",description:\"Maintain zero pending debts\",icon:\"🦸\",condition:i=>i.totalDebts>0&&i.settledDebts===i.totalDebts},{id:\"first_saver\",name:\"First Saver\",description:\"Achieve 10%+ savings rate\",icon:\"🌱\",condition:i=>i.savingsRate>=.1},{id:\"super_saver\",name:\"Super Saver\",description:\"Maintain a 20%+ savings rate\",icon:\"💰\",condition:i=>i.savingsRate>=.2},{id:\"elite_saver\",name:\"Elite Saver\",description:\"Achieve 30%+ savings rate\",icon:\"💸\",condition:i=>i.savingsRate>=.3},{id:\"legendary_saver\",name:\"Legendary Saver\",description:\"Maintain 50%+ savings rate\",icon:\"🏰\",condition:i=>i.savingsRate>=.5},{id:\"budget_conscious\",name:\"Budget Conscious\",description:\"Keep spending under 80% of income\",icon:\"📊\",condition:i=>i.monthlySpendingRatio<=.8},{id:\"budget_master\",name:\"Budget Master\",description:\"Keep spending under 70% of income\",icon:\"👑\",condition:i=>i.monthlySpendingRatio<=.7},{id:\"frugal_champion\",name:\"Frugal Champion\",description:\"Keep spending under 50% of income\",icon:\"🌟\",condition:i=>i.monthlySpendingRatio<=.5},{id:\"stay_notified\",name:\"Stay Notified\",description:\"Enable notifications\",icon:\"🔔\",condition:i=>i.notificationsEnabled===!0},{id:\"ai_curious\",name:\"AI Curious\",description:\"Chat with AI Guru for the first time\",icon:\"🤖\",condition:i=>i.aiInteractions>=1},{id:\"ai_enthusiast\",name:\"AI Enthusiast\",description:\"Chat with AI Guru 10 times\",icon:\"🧠\",condition:i=>i.aiInteractions>=10},{id:\"profile_complete\",name:\"Profile Complete\",description:\"Add your name and photo\",icon:\"👤\",condition:i=>i.profileComplete===!0},{id:\"account_organizer\",name:\"Account Organizer\",description:\"Create 3 or more accounts\",icon:\"🏦\",condition:i=>i.totalAccounts>=3}];function L1(i,l){const o=[];return Hu.forEach(u=>{!l.includes(u.id)&&u.condition(i)&&o.push(u.id)}),o}function cp(i){return Hu.find(l=>l.id===i)}function U1(){return Hu}const I1=(i,l)=>{const{accounts:o,goals:u,emergencyFundAmount:d,liabilities:h,debts:g,settings:N,recurringTransactions:E,setSettings:S}=i,p=x.useRef({accounts:o,goals:u,emergencyFundAmount:d,liabilities:h,debts:g,settings:N,recurringTransactions:E,expenses:i.expenses});x.useEffect(()=>{p.current={accounts:o,goals:u,emergencyFundAmount:d,liabilities:h,debts:g,settings:N,recurringTransactions:E,expenses:i.expenses}},[o,u,d,h,g,N,E,i.expenses]);const f=x.useRef(l);x.useEffect(()=>{f.current=l},[l]);const w=x.useCallback(()=>{const{addNotifications:T}=f.current,C=new Date;C.setHours(0,0,0,0);const{accounts:M,goals:y,emergencyFundAmount:L,liabilities:z,debts:j}=p.current,G=M.reduce((B,J)=>B+(J.type===\"bank\"||J.type===\"cash\"?J.balance:0),0),ee=y.reduce((B,J)=>B+J.currentAmount,0)+L,Z=Math.max(0,G-ee),_=[];if(z.forEach(B=>{const J=new Date(B.startDate),ne=new Date(C.getFullYear(),C.getMonth(),J.getDate());ne<C&&ne.setMonth(ne.getMonth()+1),Math.ceil((ne.getTime()-C.getTime())/(1e3*60*60*24))<=10&&_.push({name:B.name,amount:B.emiAmount,dueDate:ne,type:\"EMI\"})}),j.filter(B=>B.status!==\"settled\").forEach(B=>{if(B.dueDate){const J=new Date(B.dueDate),ne=Math.ceil((J.getTime()-C.getTime())/(1e3*60*60*24));ne<=10&&ne>=-30&&_.push({name:`Debt: ${B.personName}`,amount:B.amount,dueDate:J,type:\"Debt\"})}}),_.length>0){const B=_.reduce((J,ne)=>J+ne.amount,0);B>Z&&T({id:`smart_due_liquidity_${C.toISOString().split(\"T\")[0]}`,type:\"alert\",priority:\"high\",category:\"reminders\",title:\"Liquidity Warning\",message:`You have ₹${B.toLocaleString()} in dues within 10 days, but only ₹${Z.toLocaleString()} available.`,timestamp:new Date,read:!1})}},[]),A=x.useCallback(()=>{const{addNotifications:T}=f.current,{expenses:C,goals:M,emergencyFundAmount:y,debts:L,accounts:z,recurringTransactions:j,settings:G}=p.current,ee={totalExpenses:C.length,totalSavings:M.reduce((_,B)=>_+B.currentAmount,0),emergencyFund:y,debtsSettled:L.filter(_=>_.status===\"settled\").length,accountsCount:z.length,recurringCount:j.length},Z=L1(ee,G.unlockedAchievements||[]);Z.length>0&&(Z.forEach(_=>{const B=cp(_);B&&T({id:`achievement_${_}_${Date.now()}`,type:\"achievement\",priority:\"high\",category:\"system\",title:\"New Achievement!\",message:`You've unlocked: ${B.name}`,timestamp:new Date,read:!1,achievementId:_})}),S(_=>({..._,unlockedAchievements:[..._.unlockedAchievements||[],...Z]})))},[S]);return x.useMemo(()=>({checkSmartDues:w,checkForAchievements:A}),[w,A])},B1=(i,l)=>{const{userId:o,setSettings:u,setExpenses:d,setIncomes:h,setDebts:g,setGoals:N,setAccounts:E,setInvestments:S,setLiabilities:p,setNotifications:f,setEmergencyFundAmount:w,setRecurringTransactions:A,setRememberedMobile:T,setPendingMobile:C,setIsRememberedUser:M,setDeletionDate:y,setIsLoading:L}=i,z=x.useRef(l);x.useEffect(()=>{z.current=l},[l]);const j=x.useCallback(async()=>{const{applyTheme:G,fetchFromApi:ee,purgeAllData:Z,runCategorizationMigration:_}=z.current;L(!0);try{const J=localStorage.getItem(Oe.SETTINGS);if(J){const q=JSON.parse(J);u(q),G(q.theme)}const ne=localStorage.getItem(Oe.EXPENSES);ne&&d(JSON.parse(ne));const F=localStorage.getItem(Oe.INCOMES);F&&h(JSON.parse(F));const oe=localStorage.getItem(Oe.DEBTS);oe&&g(JSON.parse(oe));const ge=localStorage.getItem(Oe.GOALS);ge&&N(JSON.parse(ge));const O=localStorage.getItem(Oe.ACCOUNTS);O&&E(JSON.parse(O));const k=localStorage.getItem(Oe.INVESTMENTS);k&&S(JSON.parse(k));const U=localStorage.getItem(Oe.LIABILITIES);U&&p(JSON.parse(U));const Q=localStorage.getItem(Oe.NOTIFICATIONS);if(Q){const Y=JSON.parse(Q).filter((V,te,me)=>me.findIndex(ie=>ie.id===V.id||ie.message===V.message&&ie.type===V.type)===te);f(Y.slice(0,100))}const ae=localStorage.getItem(Oe.EMERGENCY_FUND);ae&&w(JSON.parse(ae));const v=localStorage.getItem(Oe.RECURRING);v&&A(JSON.parse(v));const D=localStorage.getItem(Oe.REMEMBERED_MOBILE);D&&(T(D),C(D),M(!0));const W=localStorage.getItem(Oe.DELETION_SCHEDULE);if(W){const q=new Date(W).getTime();new Date().getTime()>=q?Z():y(W)}}catch(J){console.error(\"Error loading local data:\",J)}await ee(),!localStorage.getItem(\"finhub_subscription_migration_v3\")&&o&&(_(),localStorage.setItem(\"finhub_subscription_migration_v3\",\"true\")),L(!1)},[o,u,d,h,g,N,E,S,p,f,w,A,T,C,M,y,L]);return x.useMemo(()=>({loadInitialData:j}),[j])},q1=(i,l)=>{const{accounts:o,goals:u,setEmergencyFundAmount:d}=i,h=x.useRef({accounts:o,goals:u});x.useEffect(()=>{h.current={accounts:o,goals:u}},[o,u]);const g=x.useRef(l);x.useEffect(()=>{g.current=l},[l]);const[N,E]=x.useState(!1),[S,p]=x.useState(\"goal\"),f=x.useCallback(M=>{p(M),E(!0)},[]),w=x.useCallback(()=>{E(!1)},[]),A=x.useCallback(async(M,y)=>{const{updateAccount:L}=g.current,{accounts:z}=h.current,j=z.find(G=>G.id===M);j&&await L(M,{balance:j.balance-y})},[]),T=x.useCallback(async M=>{try{const{updateGoal:y}=g.current;if(await A(M.accountId,M.amount),M.destinationType===\"goal\"){const{goals:L}=h.current,z=L.find(j=>j.id===M.destinationId);z&&await y(M.destinationId,{currentAmount:z.currentAmount+M.amount})}else d(L=>L+M.amount);ce.success(\"Funds allocated successfully!\"),w()}catch(y){console.error(\"Fund allocation failed\",y),ce.error(\"Allocation failed\")}},[A,d,w]),C=x.useCallback(async(M,y,L)=>{try{const{updateAccount:z}=g.current,{accounts:j}=h.current,G=j.find(Z=>Z.id===M),ee=j.find(Z=>Z.id===y);G&&ee&&(await z(M,{balance:G.balance-L}),await z(y,{balance:ee.balance+L}),ce.success(\"Transfer complete\"))}catch(z){console.error(\"Transfer failed\",z),ce.error(\"Transfer failed\")}},[]);return x.useMemo(()=>({isFundAllocationOpen:N,fundAllocationType:S,openFundAllocation:f,closeFundAllocation:w,performFundAllocation:T,deductFromAccount:A,transferFunds:C}),[N,S,f,w,T,A,C])},up=x.createContext(void 0),ai=()=>{const i=x.useContext(up);if(!i)throw new Error(\"useFinance must be used within a FinanceProvider\");return i},H1=({children:i})=>{const l=Iv(),{applyTheme:o}=h1(),{addNotifications:u}=p1(l.setNotifications),d=f1(),h=d.currentUser?.id||\"demo-user-001\",g=x.useMemo(()=>({...l,...d,userId:h}),[l,d,h]),N=b1(g),E=N1(g),S=x.useMemo(()=>({...N,...E,applyTheme:o,addNotifications:u}),[N,E,o,u]),p=S1(g,S),f=C1(g,{...S,...p}),w=E1(g,S),A=x.useMemo(()=>({...S,...p,...f,...w}),[S,p,f,w]),T=k1(g,A),C=T1(g,A),M=D1(g,A),y=x.useMemo(()=>({...A,...T,...C,...M}),[A,T,C,M]),L=z1(g,y),z=q1(g,y),j=I1(g,{...y,...L}),G=B1(g,{...y,...L});m1(l),x.useEffect(()=>{d.authStatus===\"authenticated\"&&G.loadInitialData()},[d.authStatus,G]),x.useEffect(()=>{const Z=setInterval(()=>{d.authStatus===\"authenticated\"&&(j.checkSmartDues(),j.checkForAchievements())},36e5);return()=>clearInterval(Z)},[d.authStatus,j]),x.useEffect(()=>{if(d.authStatus===\"authenticated\"){const Z=setTimeout(()=>{Pi.backfillAll(h).catch(console.error)},5e3);return()=>clearTimeout(Z)}},[d.authStatus,h]),x.useEffect(()=>{let Z;const _=()=>{Z&&clearTimeout(Z),d.authStatus===\"authenticated\"&&(Z=setTimeout(()=>{d.logout()},12e5))};return window.addEventListener(\"mousemove\",_),window.addEventListener(\"keypress\",_),_(),()=>{window.removeEventListener(\"mousemove\",_),window.removeEventListener(\"keypress\",_),Z&&clearTimeout(Z)}},[d.authStatus,d]);const ee=x.useMemo(()=>({...l,...d,...y,...L,...z,...j,...G,userId:h,currency:l.settings.currency,clearAllData:L.purgeAllData,createRecurring:E.createRecurringTransaction,processRecurringTransactions:async()=>{await Pi.backfillAll(h)}}),[l,d,y,L,z,j,G,h,E]);return n.jsx(up.Provider,{value:ee,children:i})};function Ne(i,l=\"USD\",o=!1){const u=typeof i==\"string\"?parseFloat(i.replace(/,/g,\"\")):i;if(isNaN(u))return\"\";const d=l===\"INR\"?\"en-IN\":\"en-US\",h={style:\"currency\",currency:l,notation:o?\"compact\":\"standard\",maximumFractionDigits:o?1:2};try{return new Intl.NumberFormat(d,h).format(u)}catch{return new Intl.NumberFormat(d,{...h,style:\"decimal\"}).format(u)}}function Gu(i,l=\"en-IN\"){const o=typeof i==\"string\"?parseFloat(i.replace(/,/g,\"\")):i;return isNaN(o)?\"\":new Intl.NumberFormat(l).format(o)}const ou=Gu;function G1(i){return i===\"\"||i===\"-\"?!0:/^-?\\d*\\.?\\d*$/.test(i)}function c0(i){return i.replace(/,/g,\"\")}function V1(i){if(i<=0)return\"0 months\";const l=Math.floor(i/12),o=i%12,u=[];return l>0&&u.push(`${l} ${l===1?\"year\":\"years\"}`),(o>0||l===0)&&u.push(`${o} ${o===1?\"month\":\"months\"}`),u.join(\", \")}function u0(i,l=\"INR\"){const o=Math.abs(i),u=i<0?\"-\":\"\";if(l===\"INR\"){if(o>=1e7)return`${u}${(o/1e7).toFixed(2).replace(/\\.00$/,\"\")}C`;if(o>=1e5)return`${u}${(o/1e5).toFixed(2).replace(/\\.00$/,\"\")}L`;if(o>=1e4)return`${u}${(o/1e3).toFixed(1).replace(/\\.0$/,\"\")}K`}else{if(o>=1e9)return`${u}${(o/1e9).toFixed(2).replace(/\\.00$/,\"\")}B`;if(o>=1e6)return`${u}${(o/1e6).toFixed(2).replace(/\\.00$/,\"\")}M`;if(o>=1e4)return`${u}${(o/1e3).toFixed(1).replace(/\\.0$/,\"\")}K`}return u+Gu(o,l===\"INR\"?\"en-IN\":\"en-US\")}function LN(i,l=\"INR\"){const o=Math.abs(i),u=i<0?\"-\":\"\",d=(h,g)=>{let N=2;return h>=100?N=0:h>=10&&(N=1),`${u}${h.toFixed(N).replace(/\\.0+$/,\"\")}${g}`};if(l===\"INR\"){if(o>=1e7)return d(o/1e7,\"Cr\");if(o>=1e5)return d(o/1e5,\"L\");if(o>=1e3)return d(o/1e3,\"K\")}else{if(o>=1e9)return d(o/1e9,\"B\");if(o>=1e6)return d(o/1e6,\"M\");if(o>=1e3)return d(o/1e3,\"K\")}return u+Gu(o,l===\"INR\"?\"en-IN\":\"en-US\")}const Vu=x.createContext({});function Fu(i){const l=x.useRef(null);return l.current===null&&(l.current=i()),l.current}const dp=typeof window<\"u\",fp=dp?x.useLayoutEffect:x.useEffect,zr=x.createContext(null),Yu=x.createContext({transformPagePoint:i=>i,isStatic:!1,reducedMotion:\"never\"});function d0(i,l){if(typeof i==\"function\")return i(l);i!=null&&(i.current=l)}function F1(...i){return l=>{let o=!1;const u=i.map(d=>{const h=d0(d,l);return!o&&typeof h==\"function\"&&(o=!0),h});if(o)return()=>{for(let d=0;d<u.length;d++){const h=u[d];typeof h==\"function\"?h():d0(i[d],null)}}}}function Y1(...i){return x.useCallback(F1(...i),i)}class $1 extends x.Component{getSnapshotBeforeUpdate(l){const o=this.props.childRef.current;if(o&&l.isPresent&&!this.props.isPresent){const u=o.offsetParent,d=zy(u)&&u.offsetWidth||0,h=this.props.sizeRef.current;h.height=o.offsetHeight||0,h.width=o.offsetWidth||0,h.top=o.offsetTop,h.left=o.offsetLeft,h.right=d-h.width-h.left}return null}componentDidUpdate(){}render(){return this.props.children}}function X1({children:i,isPresent:l,anchorX:o,root:u}){const d=x.useId(),h=x.useRef(null),g=x.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:N}=x.useContext(Yu),E=i.props?.ref??i?.ref,S=Y1(h,E);return x.useInsertionEffect(()=>{const{width:p,height:f,top:w,left:A,right:T}=g.current;if(l||!h.current||!p||!f)return;const C=o===\"left\"?`left: ${A}`:`right: ${T}`;h.current.dataset.motionPopId=d;const M=document.createElement(\"style\");N&&(M.nonce=N);const y=u??document.head;return y.appendChild(M),M.sheet&&M.sheet.insertRule(`"
      },
      {
        "file": "android\\app\\src\\main\\assets\\public\\assets\\index-i0Euu4OB.js",
        "line": 11,
        "snippet": "`);try{v=new Worker(URL.createObjectURL(new Blob([Y])))}catch(V){return typeof console<\"u\"&&typeof console.warn==\"function\"&&console.warn(\"🎊 Could not load worker\",V),null}q(v)}return v}})(),A={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:[\"square\",\"circle\"],zIndex:100,colors:[\"#26ccff\",\"#a25afd\",\"#ff5e7e\",\"#88ff5a\",\"#fcff42\",\"#ffa62d\",\"#ff36ff\"],disableForReducedMotion:!1,scalar:1};function T(v,D){return D?D(v):v}function C(v){return v!=null}function M(v,D,W){return T(v&&C(v[D])?v[D]:A[D],W)}function y(v){return v<0?0:Math.floor(v)}function L(v,D){return Math.floor(Math.random()*(D-v))+v}function z(v){return parseInt(v,16)}function j(v){return v.map(G)}function G(v){var D=String(v).replace(/[^0-9a-f]/gi,\"\");return D.length<6&&(D=D[0]+D[0]+D[1]+D[1]+D[2]+D[2]),{r:z(D.substring(0,2)),g:z(D.substring(2,4)),b:z(D.substring(4,6))}}function ee(v){var D=M(v,\"origin\",Object);return D.x=M(D,\"x\",Number),D.y=M(D,\"y\",Number),D}function Z(v){v.width=document.documentElement.clientWidth,v.height=document.documentElement.clientHeight}function _(v){var D=v.getBoundingClientRect();v.width=D.width,v.height=D.height}function B(v){var D=document.createElement(\"canvas\");return D.style.position=\"fixed\",D.style.top=\"0px\",D.style.left=\"0px\",D.style.pointerEvents=\"none\",D.style.zIndex=v,D}function J(v,D,W,q,Y,V,te,me,ie){v.save(),v.translate(D,W),v.rotate(V),v.scale(q,Y),v.arc(0,0,1,te,me,ie),v.restore()}function ne(v){var D=v.angle*(Math.PI/180),W=v.spread*(Math.PI/180);return{x:v.x,y:v.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:v.startVelocity*.5+Math.random()*v.startVelocity,angle2D:-D+(.5*W-Math.random()*W),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:v.color,shape:v.shape,tick:0,totalTicks:v.ticks,decay:v.decay,drift:v.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:v.gravity*3,ovalScalar:.6,scalar:v.scalar,flat:v.flat}}function F(v,D){D.x+=Math.cos(D.angle2D)*D.velocity+D.drift,D.y+=Math.sin(D.angle2D)*D.velocity+D.gravity,D.velocity*=D.decay,D.flat?(D.wobble=0,D.wobbleX=D.x+10*D.scalar,D.wobbleY=D.y+10*D.scalar,D.tiltSin=0,D.tiltCos=0,D.random=1):(D.wobble+=D.wobbleSpeed,D.wobbleX=D.x+10*D.scalar*Math.cos(D.wobble),D.wobbleY=D.y+10*D.scalar*Math.sin(D.wobble),D.tiltAngle+=.1,D.tiltSin=Math.sin(D.tiltAngle),D.tiltCos=Math.cos(D.tiltAngle),D.random=Math.random()+2);var W=D.tick++/D.totalTicks,q=D.x+D.random*D.tiltCos,Y=D.y+D.random*D.tiltSin,V=D.wobbleX+D.random*D.tiltCos,te=D.wobbleY+D.random*D.tiltSin;if(v.fillStyle=\"rgba(\"+D.color.r+\", \"+D.color.g+\", \"+D.color.b+\", \"+(1-W)+\")\",v.beginPath(),g&&D.shape.type===\"path\"&&typeof D.shape.path==\"string\"&&Array.isArray(D.shape.matrix))v.fill(U(D.shape.path,D.shape.matrix,D.x,D.y,Math.abs(V-q)*.1,Math.abs(te-Y)*.1,Math.PI/10*D.wobble));else if(D.shape.type===\"bitmap\"){var me=Math.PI/10*D.wobble,ie=Math.abs(V-q)*.1,le=Math.abs(te-Y)*.1,je=D.shape.bitmap.width*D.scalar,Ae=D.shape.bitmap.height*D.scalar,pe=new DOMMatrix([Math.cos(me)*ie,Math.sin(me)*ie,-Math.sin(me)*le,Math.cos(me)*le,D.x,D.y]);pe.multiplySelf(new DOMMatrix(D.shape.matrix));var ve=v.createPattern(p.transform(D.shape.bitmap),\"no-repeat\");ve.setTransform(pe),v.globalAlpha=1-W,v.fillStyle=ve,v.fillRect(D.x-je/2,D.y-Ae/2,je,Ae),v.globalAlpha=1}else if(D.shape===\"circle\")v.ellipse?v.ellipse(D.x,D.y,Math.abs(V-q)*D.ovalScalar,Math.abs(te-Y)*D.ovalScalar,Math.PI/10*D.wobble,0,2*Math.PI):J(v,D.x,D.y,Math.abs(V-q)*D.ovalScalar,Math.abs(te-Y)*D.ovalScalar,Math.PI/10*D.wobble,0,2*Math.PI);else if(D.shape===\"star\")for(var xe=Math.PI/2*3,Ke=4*D.scalar,We=8*D.scalar,Ue=D.x,it=D.y,Ve=5,ke=Math.PI/Ve;Ve--;)Ue=D.x+Math.cos(xe)*We,it=D.y+Math.sin(xe)*We,v.lineTo(Ue,it),xe+=ke,Ue=D.x+Math.cos(xe)*Ke,it=D.y+Math.sin(xe)*Ke,v.lineTo(Ue,it),xe+=ke;else v.moveTo(Math.floor(D.x),Math.floor(D.y)),v.lineTo(Math.floor(D.wobbleX),Math.floor(Y)),v.lineTo(Math.floor(V),Math.floor(te)),v.lineTo(Math.floor(q),Math.floor(D.wobbleY));return v.closePath(),v.fill(),D.tick<D.totalTicks}function oe(v,D,W,q,Y){var V=D.slice(),te=v.getContext(\"2d\"),me,ie,le=S(function(je){function Ae(){me=ie=null,te.clearRect(0,0,q.width,q.height),p.clear(),Y(),je()}function pe(){u&&!(q.width===d.width&&q.height===d.height)&&(q.width=v.width=d.width,q.height=v.height=d.height),!q.width&&!q.height&&(W(v),q.width=v.width,q.height=v.height),te.clearRect(0,0,q.width,q.height),V=V.filter(function(ve){return F(te,ve)}),V.length?me=f.frame(pe):Ae()}me=f.frame(pe),ie=Ae});return{addFettis:function(je){return V=V.concat(je),le},canvas:v,promise:le,reset:function(){me&&f.cancel(me),ie&&ie()}}}function ge(v,D){var W=!v,q=!!M(D||{},\"resize\"),Y=!1,V=M(D,\"disableForReducedMotion\",Boolean),te=h&&!!M(D||{},\"useWorker\"),me=te?w():null,ie=W?Z:_,le=v&&me?!!v.__confetti_initialized:!1,je=typeof matchMedia==\"function\"&&matchMedia(\"(prefers-reduced-motion)\").matches,Ae;function pe(xe,Ke,We){for(var Ue=M(xe,\"particleCount\",y),it=M(xe,\"angle\",Number),Ve=M(xe,\"spread\",Number),ke=M(xe,\"startVelocity\",Number),Ft=M(xe,\"decay\",Number),fe=M(xe,\"gravity\",Number),Se=M(xe,\"drift\",Number),ze=M(xe,\"colors\",j),lt=M(xe,\"ticks\",Number),mt=M(xe,\"shapes\"),_a=M(xe,\"scalar\"),ga=!!M(xe,\"flat\"),Ra=ee(xe),Kt=Ue,Oa=[],ea=v.width*Ra.x,zt=v.height*Ra.y;Kt--;)Oa.push(ne({x:ea,y:zt,angle:it,spread:Ve,startVelocity:ke,color:ze[Kt%ze.length],shape:mt[L(0,mt.length)],ticks:lt,decay:Ft,gravity:fe,drift:Se,scalar:_a,flat:ga}));return Ae?Ae.addFettis(Oa):(Ae=oe(v,Oa,ie,Ke,We),Ae.promise)}function ve(xe){var Ke=V||M(xe,\"disableForReducedMotion\",Boolean),We=M(xe,\"zIndex\",Number);if(Ke&&je)return S(function(ke){ke()});W&&Ae?v=Ae.canvas:W&&!v&&(v=B(We),document.body.appendChild(v)),q&&!le&&ie(v);var Ue={width:v.width,height:v.height};me&&!le&&me.init(v),le=!0,me&&(v.__confetti_initialized=!0);function it(){if(me){var ke={getBoundingClientRect:function(){if(!W)return v.getBoundingClientRect()}};ie(ke),me.postMessage({resize:{width:ke.width,height:ke.height}});return}Ue.width=Ue.height=null}function Ve(){Ae=null,q&&(Y=!1,l.removeEventListener(\"resize\",it)),W&&v&&(document.body.contains(v)&&document.body.removeChild(v),v=null,le=!1)}return q&&!Y&&(Y=!0,l.addEventListener(\"resize\",it,!1)),me?me.fire(xe,Ue,Ve):pe(xe,Ue,Ve)}return ve.reset=function(){me&&me.reset(),Ae&&Ae.reset()},ve}var O;function k(){return O||(O=ge(null,{useWorker:!0,resize:!0})),O}function U(v,D,W,q,Y,V,te){var me=new Path2D(v),ie=new Path2D;ie.addPath(me,new DOMMatrix(D));var le=new Path2D;return le.addPath(ie,new DOMMatrix([Math.cos(te)*Y,Math.sin(te)*Y,-Math.sin(te)*V,Math.cos(te)*V,W,q])),le}function Q(v){if(!g)throw new Error(\"path confetti are not supported in this browser\");var D,W;typeof v==\"string\"?D=v:(D=v.path,W=v.matrix);var q=new Path2D(D),Y=document.createElement(\"canvas\"),V=Y.getContext(\"2d\");if(!W){for(var te=1e3,me=te,ie=te,le=0,je=0,Ae,pe,ve=0;ve<te;ve+=2)for(var xe=0;xe<te;xe+=2)V.isPointInPath(q,ve,xe,\"nonzero\")&&(me=Math.min(me,ve),ie=Math.min(ie,xe),le=Math.max(le,ve),je=Math.max(je,xe));Ae=le-me,pe=je-ie;var Ke=10,We=Math.min(Ke/Ae,Ke/pe);W=[We,0,0,We,-Math.round(Ae/2+me)*We,-Math.round(pe/2+ie)*We]}return{type:\"path\",path:D,matrix:W}}function ae(v){var D,W=1,q=\"#000000\",Y='\"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\", \"EmojiOne Color\", \"Android Emoji\", \"Twemoji Mozilla\", \"system emoji\", sans-serif';typeof v==\"string\"?D=v:(D=v.text,W=\"scalar\"in v?v.scalar:W,Y=\"fontFamily\"in v?v.fontFamily:Y,q=\"color\"in v?v.color:q);var V=10*W,te=\"\"+V+\"px \"+Y,me=new OffscreenCanvas(V,V),ie=me.getContext(\"2d\");ie.font=te;var le=ie.measureText(D),je=Math.ceil(le.actualBoundingBoxRight+le.actualBoundingBoxLeft),Ae=Math.ceil(le.actualBoundingBoxAscent+le.actualBoundingBoxDescent),pe=2,ve=le.actualBoundingBoxLeft+pe,xe=le.actualBoundingBoxAscent+pe;je+=pe+pe,Ae+=pe+pe,me=new OffscreenCanvas(je,Ae),ie=me.getContext(\"2d\"),ie.font=te,ie.fillStyle=q,ie.fillText(D,ve,xe);var Ke=1/W;return{type:\"bitmap\",bitmap:me.transferToImageBitmap(),matrix:[Ke,0,0,Ke,-je*Ke/2,-Ae*Ke/2]}}o.exports=function(){return k().apply(this,arguments)},o.exports.reset=function(){k().reset()},o.exports.create=ge,o.exports.shapeFromPath=Q,o.exports.shapeFromText=ae})((function(){return typeof window<\"u\"?window:typeof self<\"u\"?self:this||{}})(),Bu,!1);const Or=Bu.exports;Bu.exports.create;const S1=(i,l)=>{const{userId:o,goals:u,setGoals:d,recurringTransactions:h}=i,g=x.useRef({goals:u,recurringTransactions:h});x.useEffect(()=>{g.current={goals:u,recurringTransactions:h}},[u,h]);const N=x.useRef(l);x.useEffect(()=>{N.current=l},[l]);const E=x.useCallback(async f=>{try{const w=await _e.createGoal(o,f);if(w.success){if(d(A=>[...A,w.goal]),f.monthly_contribution>0){const{createRecurringTransaction:A}=N.current;await A({type:\"expense\",description:`Goal Contribution: ${w.goal.name}`,amount:f.monthly_contribution,category:\"Transfer\",accountId:f.accountId||\"none\",frequency:\"monthly\",startDate:f.startDate||w.goal.createdAt.split(\"T\")[0],tags:[\"goal\",\"contribution\",w.goal.name.toLowerCase()],goalId:w.goal.id})}ce.success(\"Goal created\")}}catch{const w={id:`temp_${Date.now()}`,...f,createdAt:new Date().toISOString()};d(A=>[...A,w]),ce.warning(\"Created in offline mode\")}},[o,d]),S=x.useCallback(async(f,w)=>{try{const A=await _e.updateGoal(o,f,w);if(A.success){const{goals:T,recurringTransactions:C}=g.current,M=T.find(y=>y.id===f);if(M){const{createRecurringTransaction:y,updateRecurringTransaction:L,deleteRecurringTransaction:z}=N.current;if((A.goal.monthly_contribution||0)>0){const j=C.find(G=>G.goalId===f);j?await L(j.id,{amount:A.goal.monthly_contribution||0,description:`Goal Contribution: ${A.goal.name}`}):await y({type:\"expense\",description:`Goal Contribution: ${A.goal.name}`,amount:A.goal.monthly_contribution||0,category:\"Transfer\",accountId:A.goal.accountId||\"none\",frequency:\"monthly\",startDate:A.goal.startDate||M.createdAt?.split(\"T\")[0]||new Date().toISOString().split(\"T\")[0],tags:[\"goal\",\"contribution\",A.goal.name.toLowerCase()],goalId:A.goal.id})}else if(M.monthly_contribution&&M.monthly_contribution>0){const j=C.find(G=>G.goalId===f);j&&await z(j.id)}}d(y=>y.map(L=>L.id===f?A.goal:L)),A.goal.currentAmount>=A.goal.targetAmount?(ce.success(`🎉 Goal \"${A.goal.name}\" completed!`),Or({particleCount:200,spread:120,origin:{y:.5}})):ce.success(\"Goal updated\")}}catch{d(A=>A.map(T=>T.id===f?{...T,...w}:T)),ce.warning(\"Updated locally\")}},[o,d]),p=x.useCallback(async f=>{try{(await _e.deleteGoal(o,f)).success&&(d(A=>A.filter(T=>T.id!==f)),ce.success(\"Goal deleted\"))}catch{d(w=>w.filter(A=>A.id!==f)),ce.warning(\"Deleted locally\")}},[o,d]);return x.useMemo(()=>({createGoal:E,updateGoal:S,deleteGoal:p}),[E,S,p])},C1=(i,l)=>{const{userId:o,investments:u,setInvestments:d,accounts:h,setExpenses:g,recurringTransactions:N}=i,E=x.useRef({investments:u,accounts:h,recurringTransactions:N});x.useEffect(()=>{E.current={investments:u,accounts:h,recurringTransactions:N}},[u,h,N]);const S=x.useRef(l);x.useEffect(()=>{S.current=l},[l]);const p=x.useCallback(async(A,T)=>{try{const C=await _e.createInvestment(o,A);if(C.success){if(d(M=>[...M,C.investment]),T&&T!==\"none\"){const{updateAccount:M}=S.current,{accounts:y}=E.current,L=y.find(z=>z.id===T);if(L){const z=A.buyPrice*A.quantity;await M(T,{balance:L.balance-z});const j={description:`Asset Purchase: ${A.symbol} (${A.quantity} units)`,amount:z,category:\"Transfer\",date:A.purchaseDate||new Date().toISOString().split(\"T\")[0],tags:[\"investment\",\"principal\",A.symbol],accountId:T},G=await _e.createExpense(o,j);G.success&&g(ee=>[...ee,G.expense])}}if(C.investment.type===\"sip\"){const{createRecurringTransaction:M}=S.current;await M({type:\"expense\",description:`SIP: ${C.investment.symbol} (${C.investment.name})`,amount:C.investment.buyPrice*C.investment.quantity,category:\"Investment\",accountId:T||\"none\",frequency:\"monthly\",startDate:C.investment.purchaseDate,tags:[\"sip\",\"investment\",C.investment.symbol.toLowerCase()],investmentId:C.investment.id})}ce.success(\"Investment created\")}}catch{const C={id:`temp_${Date.now()}`,...A,createdAt:new Date().toISOString()};d(M=>[...M,C]),ce.warning(\"Created locally\")}},[o,g,d]),f=x.useCallback(async(A,T)=>{try{const C=await _e.updateInvestment(o,A,T);if(C.success){const{investments:M,recurringTransactions:y}=E.current,L=M.find(z=>z.id===A);if(L){const{updateRecurringTransaction:z,createRecurringTransaction:j,deleteRecurringTransaction:G}=S.current;if(C.investment.type===\"sip\"){const ee=y.find(Z=>Z.investmentId===A);ee?await z(ee.id,{amount:C.investment.buyPrice*C.investment.quantity,description:`SIP: ${C.investment.symbol} (${C.investment.name})`}):await j({type:\"expense\",description:`SIP: ${C.investment.symbol} (${C.investment.name})`,amount:C.investment.buyPrice*C.investment.quantity,category:\"Investment\",accountId:C.investment.accountId||\"none\",frequency:\"monthly\",startDate:C.investment.purchaseDate,tags:[\"sip\",\"investment\",C.investment.symbol.toLowerCase()],investmentId:C.investment.id})}else if(L.type===\"sip\"){const ee=y.find(Z=>Z.investmentId===A);ee&&await G(ee.id)}}d(z=>z.map(j=>j.id===A?C.investment:j)),ce.success(\"Investment updated\")}}catch{d(C=>C.map(M=>M.id===A?{...M,...T}:M)),ce.warning(\"Updated locally\")}},[o,d]),w=x.useCallback(async A=>{try{(await _e.deleteInvestment(o,A)).success&&(d(C=>C.filter(M=>M.id!==A)),ce.success(\"Investment deleted\"))}catch{d(T=>T.filter(C=>C.id!==A)),ce.warning(\"Deleted locally\")}},[o,d]);return x.useMemo(()=>({createInvestment:p,updateInvestment:f,deleteInvestment:w}),[p,f,w])},E1=(i,l)=>{const{userId:o,liabilities:u,setLiabilities:d,recurringTransactions:h}=i,g=x.useRef({liabilities:u,recurringTransactions:h});x.useEffect(()=>{g.current={liabilities:u,recurringTransactions:h}},[u,h]);const N=x.useRef(l);x.useEffect(()=>{N.current=l},[l]);const E=x.useCallback(async f=>{try{const w=await _e.createLiability(o,f);if(w.success&&(d(A=>[...A,w.liability]),ce.success(\"Liability created\"),w.liability.emiAmount>0)){const{createRecurringTransaction:A}=N.current;await A({type:\"expense\",description:`EMI: ${w.liability.name}`,amount:w.liability.emiAmount,category:\"EMI\",accountId:w.liability.accountId||\"none\",frequency:\"monthly\",startDate:w.liability.startDate,tags:[\"emi\",\"liability\",w.liability.name.toLowerCase()],liabilityId:w.liability.id})}}catch{const w={id:`temp_${Date.now()}`,...f,createdAt:new Date().toISOString()};d(A=>[...A,w]),ce.warning(\"Created locally\")}},[o,d]),S=x.useCallback(async(f,w)=>{try{const A=await _e.updateLiability(o,f,w);if(A.success){const{liabilities:T,recurringTransactions:C}=g.current,M=T.find(y=>y.id===f);if(M){const{createRecurringTransaction:y,updateRecurringTransaction:L,deleteRecurringTransaction:z}=N.current;if(A.liability.emiAmount>0){const j=C.find(G=>G.liabilityId===f);j?await L(j.id,{amount:A.liability.emiAmount,description:`EMI: ${A.liability.name}`}):await y({type:\"expense\",description:`EMI: ${A.liability.name}`,amount:A.liability.emiAmount,category:\"EMI\",accountId:A.liability.accountId||\"none\",frequency:\"monthly\",startDate:A.liability.startDate,tags:[\"emi\",\"liability\",A.liability.name.toLowerCase()],liabilityId:A.liability.id})}else if(M.emiAmount>0){const j=C.find(G=>G.liabilityId===f);j&&await z(j.id)}}d(y=>y.map(L=>L.id===f?A.liability:L)),ce.success(\"Liability updated\")}}catch{d(A=>A.map(T=>T.id===f?{...T,...w}:T)),ce.warning(\"Updated locally\")}},[o,d]),p=x.useCallback(async f=>{try{(await _e.deleteLiability(o,f)).success&&(d(A=>A.filter(T=>T.id!==f)),ce.success(\"Liability deleted\"))}catch{d(w=>w.filter(A=>A.id!==f)),ce.warning(\"Deleted locally\")}},[o,d]);return x.useMemo(()=>({createLiability:E,updateLiability:S,deleteLiability:p}),[E,S,p])},A1={netflix:\"Subscription\",spotify:\"Subscription\",google:\"Subscription\",apple:\"Subscription\",icloud:\"Subscription\",youtube:\"Subscription\",disney:\"Subscription\",hotstar:\"Subscription\",\"prime video\":\"Subscription\",\"prime membership\":\"Subscription\",\"amazon prime\":\"Subscription\",audible:\"Subscription\",kindle:\"Subscription\",hulu:\"Subscription\",hbomax:\"Subscription\",hbo:\"Subscription\",\"paramount+\":\"Subscription\",peacock:\"Subscription\",crunchyroll:\"Subscription\",chaisai:\"Subscription\",\"google play\":\"Subscription\",\"google one\":\"Subscription\",\"app store\":\"Subscription\",microsoft:\"Subscription\",\"office 365\":\"Subscription\",dropbox:\"Subscription\",zoom:\"Subscription\",canva:\"Subscription\",adobe:\"Subscription\",\"creative cloud\":\"Subscription\",jio:\"Subscription\",airtel:\"Subscription\",vodafone:\"Subscription\",idea:\"Subscription\",bsnl:\"Subscription\",\"vi \":\"Subscription\",broadband:\"Subscription\",isp:\"Subscription\",\"act fiber\":\"Subscription\",hathway:\"Subscription\",\"internet bill\":\"Subscription\",telecom:\"Subscription\",coffee:\"Food & Dining\",starbucks:\"Food & Dining\",cafe:\"Food & Dining\",restaurant:\"Food & Dining\",lunch:\"Food & Dining\",dinner:\"Food & Dining\",pizza:\"Food & Dining\",burger:\"Food & Dining\",mcdonalds:\"Food & Dining\",kfc:\"Food & Dining\",food:\"Food & Dining\",zomato:\"Food & Dining\",swiggy:\"Food & Dining\",beer:\"Food & Dining\",bar:\"Food & Dining\",uber:\"Transportation\",ola:\"Transportation\",cab:\"Transportation\",taxi:\"Transportation\",bus:\"Transportation\",train:\"Transportation\",metro:\"Transportation\",fuel:\"Transportation\",petrol:\"Transportation\",gas:\"Transportation\",parking:\"Transportation\",amazon:\"Shopping\",flipkart:\"Shopping\",clothes:\"Shopping\",zara:\"Shopping\",nike:\"Shopping\",shoes:\"Shopping\",mall:\"Shopping\",grocery:\"Groceries\",supermarket:\"Groceries\",vegetables:\"Groceries\",fruits:\"Groceries\",milk:\"Groceries\",electricity:\"Bills & Utilities\",water:\"Bills & Utilities\",\"gas bill\":\"Bills & Utilities\",rent:\"Bills & Utilities\",maintenance:\"Bills & Utilities\",movie:\"Entertainment\",cinema:\"Entertainment\",game:\"Entertainment\",steam:\"Entertainment\",playstation:\"Entertainment\",xbox:\"Entertainment\",doctor:\"Health & Wellbeing\",medical:\"Health & Wellbeing\",pharmacy:\"Health & Wellbeing\",medicine:\"Health & Wellbeing\",gym:\"Health & Wellbeing\",fitness:\"Health & Wellbeing\",hospital:\"Health & Wellbeing\",transfer:\"Transfer\",payment:\"Transfer\",\"cc bill\":\"Transfer\",internal:\"Transfer\",membership:\"Subscription\",subscription:\"Subscription\",recurring:\"Subscription\",premium:\"Subscription\",\"monthly bill\":\"Subscription\"},op=[{keywords:[\"netflix\"],displayName:\"Netflix Premium\",defaultAmount:649,category:\"Subscription\"},{keywords:[\"hotstar\",\"disney\"],displayName:\"Disney+ Hotstar\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"prime video\",\"amazon prime\"],displayName:\"Amazon Prime\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"hulu\"],displayName:\"Hulu\",defaultAmount:650,category:\"Subscription\"},{keywords:[\"youtube\",\"yt premium\"],displayName:\"YouTube Premium\",defaultAmount:129,category:\"Subscription\"},{keywords:[\"sonyliv\"],displayName:\"SonyLIV\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"zee5\"],displayName:\"Zee5\",defaultAmount:100,category:\"Subscription\"},{keywords:[\"jiocinema\"],displayName:\"JioCinema Premium\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"apple tv\"],displayName:\"Apple TV+\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"spotify\"],displayName:\"Spotify Premium\",defaultAmount:119,category:\"Subscription\"},{keywords:[\"apple music\"],displayName:\"Apple Music\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"audible\"],displayName:\"Audible\",defaultAmount:199,category:\"Subscription\"},{keywords:[\"wynk\"],displayName:\"Wynk Music\",defaultAmount:49,category:\"Subscription\"},{keywords:[\"gaana\"],displayName:\"Gaana Plus\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"jiosaavn\"],displayName:\"JioSaavn Pro\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"google one\",\"google storage\"],displayName:\"Google One\",defaultAmount:130,category:\"Subscription\"},{keywords:[\"chatgpt\",\"openai\"],displayName:\"ChatGPT Plus\",defaultAmount:1999,category:\"Subscription\"},{keywords:[\"claude\",\"anthropic\"],displayName:\"Claude Pro\",defaultAmount:1999,category:\"Subscription\"},{keywords:[\"github\"],displayName:\"GitHub Copilot\",defaultAmount:830,category:\"Subscription\"},{keywords:[\"midjourney\"],displayName:\"Midjourney\",defaultAmount:830,category:\"Subscription\"},{keywords:[\"canva\"],displayName:\"Canva Pro\",defaultAmount:499,category:\"Subscription\"},{keywords:[\"adobe\",\"creative cloud\"],displayName:\"Adobe CC\",defaultAmount:2300,category:\"Subscription\"},{keywords:[\"jio\",\"myjio\"],displayName:\"Jio Mobile\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"airtel\"],displayName:\"Airtel Mobile\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"vi \",\"vodafone\"],displayName:\"Vi Mobile\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"act fiber\",\"act net\"],displayName:\"ACT Fibernet\",defaultAmount:820,category:\"Bills & Utilities\"},{keywords:[\"hathway\"],displayName:\"Hathway Broadband\",defaultAmount:600,category:\"Bills & Utilities\"}],Er=i=>{const l=i.toLowerCase();return op.some(o=>o.keywords.some(u=>l.includes(u)))},qu=i=>{const l=i.toLowerCase();for(const o of op)if(o.keywords.some(u=>l.includes(u))){const u=[\"subscription\",\"online\"];return{category:o.category,tags:u,suggestedAmount:o.defaultAmount,suggestedDescription:o.displayName}}for(const[o,u]of Object.entries(A1))if(l.includes(o)){const d=[];return l.includes(\"online\")&&d.push(\"online\"),l.includes(\"subscription\")&&d.push(\"subscription\"),{category:u,tags:d}}return null},k1=(i,l)=>{const{userId:o,expenses:u,setExpenses:d,accounts:h,goals:g,emergencyFundAmount:N,setEmergencyFundAmount:E,liabilities:S,setNotifications:p}=i,f=x.useRef({expenses:u,accounts:h,goals:g,emergencyFundAmount:N,liabilities:S});x.useEffect(()=>{f.current={expenses:u,accounts:h,goals:g,emergencyFundAmount:N,liabilities:S}},[u,h,g,N,S]);const w=x.useCallback(y=>{p(L=>{const z=Array.isArray(y)?y:[y],j=[...L];return z.forEach(G=>{j.some(ee=>ee.id===G.id)||j.unshift(G)}),j.slice(0,100)})},[p]),A=x.useRef(l);x.useEffect(()=>{A.current=l},[l]);const T=x.useCallback(async y=>{const{accounts:L,goals:z,emergencyFundAmount:j,liabilities:G}=f.current,{updateAccount:ee,updateGoal:Z,updateLiability:_,createRecurringTransaction:B}=A.current;try{const J=L.reduce((Q,ae)=>Q+(ae.type!==\"credit_card\"?ae.balance:0),0),ne=z.reduce((Q,ae)=>Q+ae.currentAmount,0)+j,F=G.reduce((Q,ae)=>Q+ae.emiAmount,0),oe=Math.max(0,J-ne-F),ge=y.amount;if(ge>oe){let ae=ge-oe;const v=[];z.forEach(q=>{const Y=q.type||\"growth\";let V=1;Y===\"stability\"&&(V=2),Y===\"protection\"&&(V=3),q.currentAmount>0&&v.push({id:q.id,type:\"goal\",currentAmount:q.currentAmount,priority:V,name:q.name})}),j>0&&v.push({id:\"emergency-fund\",type:\"emergency\",currentAmount:j,priority:3,name:\"Emergency Fund\"}),v.sort((q,Y)=>q.priority-Y.priority);const D=[],W=[];for(const q of v){if(ae<=0)break;const Y=Math.min(q.currentAmount,ae);ae-=Y,q.type===\"goal\"?(D.push(Z(q.id,{currentAmount:q.currentAmount-Y,status:\"leaking\"})),W.push({id:`leak_${q.id}_${new Date().toISOString().split(\"T\")[0]}`,type:\"alert\",priority:\"medium\",category:\"transactions\",title:\"Shadow Wallet Leakage\",message:`₹${Y} spent reduced your '${q.name}' reserve.`,timestamp:new Date,read:!1})):q.type===\"emergency\"&&(E(V=>V-Y),W.push({id:`leak_emergency_${new Date().toISOString().split(\"T\")[0]}`,type:\"alert\",priority:\"medium\",category:\"transactions\",title:\"Emergency Fund Alert\",message:`Warning: ₹${Y} withdrawn from Emergency Fund to cover spending.`,timestamp:new Date,read:!1}))}await Promise.all(D),W.length>0&&(w(W),W.forEach(q=>ce.error(q.title,{description:q.message})))}const O=L.find(Q=>Q.id===y.accountId),k={...y};if(O?.type===\"credit_card\"){const Q=O.serviceChargePercentage||0;Q>0&&(k.serviceChargeAmount=y.amount*Q/100);const ae=O.creditLimit||0,v=O.safeLimitPercentage||30,D=ae*v/100,q=Math.abs(O.balance)+y.amount;q>D&&ae>0&&(y.isIncomeGenerating||(ce.warning(\"High Interest Risk Detected\",{description:`This transaction puts your CC usage at ${(q/ae*100).toFixed(1)}%, exceeding your ${v}% safe limit with no income-justification.`,duration:6e3}),w({id:`cc_limit_${O.id}_${new Date().toISOString().split(\"T\")[0]}`,type:\"alert\",priority:\"medium\",category:\"transactions\",title:\"Credit Stability Breach\",message:`Card '${O.name}' usage protocol exceeded ${v}% threshold. Avoid non-essential outflow.`,timestamp:new Date,read:!1})))}if(!k.category||k.category===\"Other\"){const Q=qu(k.description);Q&&Q.category===\"Subscription\"&&(k.category=\"Subscription\",k.tags=Array.from(new Set([...k.tags||[],\"auto-detected\"])))}if(y.registerAsLiability)try{const Q=y.tenureUnit===\"years\"?y.tenure*12:y.tenure,ae=await _e.createLiability(o,{name:y.description,type:y.liabilityType||\"other\",principal:y.principal||y.amount,outstanding:y.principal||y.amount,interestRate:y.interestRate||0,emiAmount:y.amount,startDate:y.date,tenure:Q,accountId:y.accountId});ae.success&&(k.liabilityId=ae.liability.id,y.isRecurring=!1)}catch(Q){console.error(\"Failed to auto-register liability:\",Q)}const U=await _e.createExpense(o,k);if(U.success){if(d(Q=>[...Q,U.expense]),Rr.ensureCatalogAndLink(o,\"transaction\",U.expense.id,\"merchant\",k.description,{amount:k.amount,category:k.category}).catch(Q=>console.error(\"Catalog link failed\",Q)),O){const Q=y.amount+(k.serviceChargeAmount||0),ae=O.type===\"credit_card\"?O.balance+Q:O.balance-Q;await ee(O.id,{balance:ae})}if(k.liabilityId){const Q=G.find(ae=>ae.id===k.liabilityId);if(Q){const ae=Math.max(0,Q.outstanding-y.amount);await _(Q.id,{outstanding:ae}),ce.info(`Updated '${Q.name}' balance`,{description:`New outstanding: ₹${ae.toLocaleString()}`})}}y.isRecurring?await B({type:\"expense\",description:y.description,amount:y.amount,category:y.category,accountId:y.accountId,frequency:y.frequency||\"monthly\",customIntervalDays:y.customIntervalDays,startDate:y.date,endDate:y.endDate,tags:y.tags}):(ce.success(\"Expense added!\"),Er(y.description)&&!y.isRecurring&&w({id:`verify_sub_${U.expense.id}`,type:\"insight\",priority:\"medium\",category:\"transactions\",title:\"Automate Payment?\",message:`Detected '${y.description}' as a subscription. Add to cyclical routine?`,timestamp:new Date,read:!1,action:{type:\"verify_subscription\",label:\"Automate\",status:\"pending\",payload:{id:U.expense.id,description:y.description,amount:y.amount,category:y.category,accountId:y.accountId,date:y.date}}}))}}catch{d(J=>[...J,{id:`temp_${Date.now()}`,...y,createdAt:new Date().toISOString()}]),ce.warning(\"Added in offline mode\")}},[o,w,E,d]),C=x.useCallback(async(y,L)=>{const{expenses:z,accounts:j}=f.current,{updateAccount:G}=A.current;try{const ee=await _e.updateExpense(o,y,L);if(ee.success){const Z=z.find(_=>_.id===y);if(Z){const _=j.find(ne=>ne.id===Z.accountId);if(_){const ne=Z.amount+(Z.serviceChargeAmount||0),F=_.type===\"credit_card\"?_.balance-ne:_.balance+ne;await G(_.id,{balance:F})}const B=ee.expense,J=j.find(ne=>ne.id===B.accountId);if(J){const ne=B.amount+(B.serviceChargeAmount||0),F=J.type===\"credit_card\"?J.balance+ne:J.balance-ne;await G(J.id,{balance:F})}}d(_=>_.map(B=>B.id===y?ee.expense:B)),ce.success(\"Expense updated\")}}catch{d(ee=>ee.map(Z=>Z.id===y?{...Z,...L}:Z)),ce.warning(\"Updated in offline mode\")}},[o,d]),M=x.useCallback(async y=>{const{expenses:L,accounts:z}=f.current,{updateAccount:j}=A.current;try{if((await _e.deleteExpense(o,y)).success){const ee=L.find(Z=>Z.id===y);if(ee){const Z=z.find(_=>_.id===ee.accountId);if(Z){const _=ee.amount+(ee.serviceChargeAmount||0),B=Z.type===\"credit_card\"?Z.balance-_:Z.balance+_;await j(Z.id,{balance:B})}}d(Z=>Z.filter(_=>_.id!==y)),ce.success(\"Expense deleted\")}}catch{d(G=>G.filter(ee=>ee.id!==y)),ce.warning(\"Deleted in offline mode\")}},[o,d]);return x.useMemo(()=>({createExpense:T,updateExpense:C,deleteExpense:M,addNotifications:w}),[T,C,M,w])},T1=(i,l)=>{const{userId:o,incomes:u,setIncomes:d,accounts:h}=i,g=x.useRef({incomes:u,accounts:h});x.useEffect(()=>{g.current={incomes:u,accounts:h}},[u,h]);const N=x.useRef(l);x.useEffect(()=>{N.current=l},[l]);const E=x.useCallback(async f=>{try{const w=await _e.createIncome(o,f);if(w.success){d(C=>[...C,w.income]),Rr.ensureCatalogAndLink(o,\"transaction\",w.income.id,\"merchant\",f.description,{amount:f.amount,category:f.category}).catch(C=>console.error(\"Catalog link failed\",C));const{accounts:A}=g.current,T=A.find(C=>C.id===f.accountId);if(T){const{updateAccount:C,createRecurringTransaction:M}=N.current,y=T.type===\"credit_card\"?T.balance-f.amount:T.balance+f.amount;await C(T.id,{balance:y}),f.isRecurring?await M({type:\"income\",description:f.description,amount:f.amount,category:f.category,accountId:f.accountId,frequency:f.frequency||\"monthly\",customIntervalDays:f.customIntervalDays,startDate:f.date,endDate:f.endDate,tags:f.tags}):ce.success(\"Income added!\")}else ce.success(\"Income added!\")}}catch(w){console.error(\"Error creating income:\",w),d(A=>[...A,{id:`temp_${Date.now()}`,...f,createdAt:new Date().toISOString()}]),ce.warning(\"Added in offline mode\")}},[o,d]),S=x.useCallback(async(f,w)=>{try{const A=await _e.updateIncome(o,f,w);if(A.success){const{incomes:T,accounts:C}=g.current,M=T.find(y=>y.id===f);if(M){const{updateAccount:y}=N.current,L=C.find(G=>G.id===M.accountId);if(L){const G=L.type===\"credit_card\"?L.balance+M.amount:L.balance-M.amount;await y(L.id,{balance:G})}const z=A.income,j=C.find(G=>G.id===z.accountId);if(j){const G=j.type===\"credit_card\"?j.balance-z.amount:j.balance+z.amount;await y(j.id,{balance:G})}}d(y=>y.map(L=>L.id===f?A.income:L)),ce.success(\"Income updated\")}}catch{d(A=>A.map(T=>T.id===f?{...T,...w}:T)),ce.warning(\"Updated in offline mode\")}},[o,d]),p=x.useCallback(async f=>{try{if((await _e.deleteIncome(o,f)).success){const{incomes:A,accounts:T}=g.current,C=A.find(M=>M.id===f);if(C){const{updateAccount:M}=N.current,y=T.find(L=>L.id===C.accountId);if(y){const L=y.type===\"credit_card\"?y.balance+C.amount:y.balance-C.amount;await M(y.id,{balance:L})}}d(M=>M.filter(y=>y.id!==f)),ce.success(\"Income deleted\")}}catch{d(w=>w.filter(A=>A.id!==f)),ce.warning(\"Deleted in offline mode\")}},[o,d]);return x.useMemo(()=>({createIncome:E,updateIncome:S,deleteIncome:p}),[E,S,p])},D1=(i,l)=>{const{userId:o,debts:u,setDebts:d,accounts:h,setExpenses:g,setIncomes:N}=i,E=x.useRef({debts:u,accounts:h});x.useEffect(()=>{E.current={debts:u,accounts:h}},[u,h]);const S=x.useRef(l);x.useEffect(()=>{S.current=l},[l]);const p=x.useCallback(async T=>{try{const C=await _e.createDebt(o,T);if(C.success){d(L=>[...L,C.debt]);const{accounts:M}=E.current,y=M.find(L=>L.id===T.accountId);if(y){const{updateAccount:L}=S.current,z=T.type===\"borrowed\"?T.amount:-T.amount,j=y.type===\"credit_card\"?y.balance-z:y.balance+z;await L(y.id,{balance:j})}if(T.isRecurring){const{createRecurringTransaction:L}=S.current;await L({type:\"expense\",description:`Debt: ${T.personName} (${T.type})`,amount:T.amount,category:\"Debt\",accountId:T.accountId,frequency:T.frequency||\"monthly\",startDate:T.date,tags:[...T.tags||[],\"debt\"]})}ce.success(\"Debt created\")}}catch{d(C=>[...C,{id:`temp_${Date.now()}`,...T,status:\"pending\",createdAt:new Date().toISOString()}]),ce.warning(\"Added in offline mode\")}},[o,d]),f=x.useCallback(async(T,C)=>{try{const M=await _e.updateDebt(o,T,C);if(M.success){const{debts:y,accounts:L}=E.current,z=y.find(j=>j.id===T);if(z){const{updateAccount:j,updateRecurringTransaction:G,createRecurringTransaction:ee}=S.current,Z=L.find(J=>J.id===z.accountId);if(Z){const J=z.type===\"borrowed\"?-z.amount:z.amount,ne=Z.type===\"credit_card\"?Z.balance-J:Z.balance+J;await j(Z.id,{balance:ne})}const _=M.debt,B=L.find(J=>J.id===_.accountId);if(B){const J=_.type===\"borrowed\"?_.amount:-_.amount,ne=B.type===\"credit_card\"?B.balance-J:B.balance+J;await j(B.id,{balance:ne})}C.isRecurring&&(z.recurringId?await G(z.recurringId,{amount:C.amount,description:`Debt: ${C.personName} (${C.type})`}):await ee({type:\"expense\",description:`Debt: ${C.personName} (${C.type})`,amount:C.amount,category:\"Debt\",accountId:C.accountId,frequency:C.frequency||\"monthly\",startDate:C.date,tags:[...C.tags||[],\"debt\"]}))}d(j=>j.map(G=>G.id===T?M.debt:G)),ce.success(\"Debt updated\")}}catch{d(M=>M.map(y=>y.id===T?{...y,...C}:y)),ce.warning(\"Updated in offline mode\")}},[o,d]),w=x.useCallback(async T=>{try{const C=await _e.updateDebt(o,T,{status:\"settled\"});if(C.success){const{debts:M,accounts:y}=E.current,L=M.find(z=>z.id===T);if(L&&L.status!==\"settled\"){const{updateAccount:z}=S.current,j=y.find(G=>G.id===L.accountId);if(j){const G=L.type===\"borrowed\"?-L.amount:L.amount,ee=j.type===\"credit_card\"?j.balance-G:j.balance+G;await z(j.id,{balance:ee});const Z={description:`Debt Settlement: ${L.personName}`,amount:L.amount,category:\"Transfer\",date:new Date().toISOString().split(\"T\")[0],tags:[\"debt-settlement\"],accountId:L.accountId};if(L.type===\"borrowed\"){const _=await _e.createExpense(o,Z);_.success&&g(B=>[...B,_.expense])}else{const _=await _e.createIncome(o,Z);_.success&&N(B=>[...B,_.income])}}}d(z=>z.map(j=>j.id===T?C.debt:j)),ce.success(\"🎉 Debt settled! Great job!\"),Or({particleCount:150,spread:100,origin:{y:.6}})}}catch{d(C=>C.map(M=>M.id===T?{...M,status:\"settled\"}:M)),ce.warning(\"Marked as settled locally\")}},[o,g,N,d]),A=x.useCallback(async T=>{try{if((await _e.deleteDebt(o,T)).success){const{debts:M,accounts:y}=E.current,L=M.find(z=>z.id===T);if(L){const{updateAccount:z}=S.current,j=y.find(G=>G.id===L.accountId);if(j){const G=L.type===\"borrowed\"?-L.amount:L.amount,ee=j.type===\"credit_card\"?j.balance-G:j.balance+G;await z(j.id,{balance:ee})}}d(z=>z.filter(j=>j.id!==T)),ce.success(\"Debt deleted\")}}catch{d(C=>C.filter(M=>M.id!==T)),ce.warning(\"Deleted in offline mode\")}},[o,d]);return x.useMemo(()=>({createDebt:p,updateDebt:f,settleDebt:w,deleteDebt:A}),[p,f,w,A])},lu=`https://${ll}.supabase.co/rest/v1`,ru={\"Content-Type\":\"application/json\",apikey:fn,Authorization:`Bearer ${fn}`},Ws={async getSuggestions(i,l=\"new\",o=20){const u=new URLSearchParams({user_id:`eq.${i}`,order:\"created_at.desc\",limit:o.toString()});l!==\"all\"&&u.append(\"status\",`eq.${l}`);try{const d=await fetch(`${lu}/smart_suggestions?${u}`,{headers:ru});return d.ok?await d.json():[]}catch(d){return console.error(\"Fetch suggestions error:\",d),[]}},async createSuggestion(i){try{const o=await(await fetch(`${lu}/smart_suggestions`,{method:\"POST\",headers:{...ru,Prefer:\"return=representation\"},body:JSON.stringify(i)})).json();return Array.isArray(o)?o[0]:o}catch(l){return console.error(\"Create suggestion error:\",l),null}},async updateStatus(i,l){try{return(await fetch(`${lu}/smart_suggestions?id=eq.${i}`,{method:\"PATCH\",headers:ru,body:JSON.stringify({status:l})})).ok}catch(o){return console.error(\"Update suggestion status error:\",o),!1}}};function o0(i,l){const o=JSON.stringify(l.payload||{}),u=l.type||\"UNKNOWN\";return`${i}_${u}_${o}`}const M1={detectSubscriptions(i){const l={};i.forEach(u=>{const d=u.note?.toLowerCase().trim()||u.merchant?.toLowerCase()||\"unknown\";d!==\"unknown\"&&(l[d]||(l[d]=[]),l[d].push(u))});const o=[];return Object.entries(l).forEach(([u,d])=>{if(d.length<3)return;const h=d.sort((S,p)=>new Date(S.txn_date).getTime()-new Date(p.txn_date).getTime()),g=h[h.length-1],N=h[h.length-2],E=Math.abs(new Date(g.txn_date).getTime()-new Date(N.txn_date).getTime())/(1e3*3600*24);E>=25&&E<=35&&o.push({type:\"subscription_detected\",title:\"New Subscription Detected\",message:`You've had 3 recurring payments to \"${u}\". Would you like to track this as a subscription?`,severity:\"low\",action:{type:\"CREATE_SUBSCRIPTION\",payload:{name:u,amount:g.amount,currency_code:g.currency_code}}})}),o}},_1=`https://${ll}.supabase.co/rest/v1`,R1={apikey:fn,Authorization:`Bearer ${fn}`},O1={async getTopSuggestions(i,l=5){return await Ws.getSuggestions(i,\"new\",l)},async generateForUser(i){try{const l=await Ws.getSuggestions(i,\"all\",100),o=new Set(l.map(N=>o0(N.type,N.action))),d=await(await fetch(`${_1}/transactions?user_id=eq.${i}&order=txn_date.desc&limit=100`,{headers:R1})).json(),h=[...M1.detectSubscriptions(d)];let g=0;for(const N of h){const E=o0(N.type,N.action);o.has(E)||(await Ws.createSuggestion({user_id:i,...N,status:\"new\",source:\"rule\",expires_at:null}),g++,o.add(E))}return g}catch(l){return console.error(\"Error generating suggestions:\",l),0}},async markSeen(i){return await Ws.updateStatus(i,\"seen\")},async dismiss(i){return await Ws.updateStatus(i,\"dismissed\")},async accept(i){return await Ws.updateStatus(i,\"accepted\")}},z1=(i,l)=>{const{userId:o,settings:u,setSettings:d,setAccounts:h,setExpenses:g,setIncomes:N,setDebts:E,setGoals:S,setLiabilities:p,setInvestments:f,setRecurringTransactions:w,setNotifications:A,setEmergencyFundAmount:T,setIsOffline:C,setApiStatus:M,backfillRequest:y,setBackfillRequest:L,expenses:z,incomes:j,goals:G,accounts:ee,liabilities:Z,recurringTransactions:_,setIsRefreshing:B}=i,J=x.useRef({expenses:z,incomes:j,goals:G,accounts:ee,liabilities:Z,recurringTransactions:_,settings:u});x.useEffect(()=>{J.current={expenses:z,incomes:j,goals:G,accounts:ee,liabilities:Z,recurringTransactions:_,settings:u}},[z,j,G,ee,Z,_,u]);const{updateAccount:ne,createRecurringTransaction:F,deleteExpense:oe,deleteIncome:ge,applyTheme:O}=l,k=x.useCallback(async Y=>{d(V=>({...V,...Y})),Y.theme&&O(Y.theme);try{const V=await _e.updateSettings(o,Y);if(V.success)d(te=>({...te,...V.settings,aiProvider:V.settings.aiProvider||te.aiProvider,apiKeys:{...te.apiKeys,...V.settings.apiKeys}}));else throw new Error(V.error)}catch(V){console.error(\"Failed to sync settings\",V),ce.error(\"Settings saved locally only\")}},[o,d,O]),U=x.useCallback(async()=>{try{try{await _e.processRecurring(o)}catch(ve){console.error(\"Skip recurring process\",ve)}const[Y,V,te,me,ie,le,je,Ae,pe]=await Promise.all([_e.getSettings(o).catch(()=>({success:!1,settings:void 0})),_e.getAccounts(o).catch(()=>({success:!1,accounts:[]})),_e.getExpenses(o).catch(()=>({success:!1,expenses:[]})),_e.getIncomes(o).catch(()=>({success:!1,incomes:[]})),_e.getDebts(o).catch(()=>({success:!1,debts:[]})),_e.getGoals(o).catch(()=>({success:!1,goals:[]})),_e.getLiabilities(o).catch(()=>({success:!1,liabilities:[]})),_e.getInvestments(o).catch(()=>({success:!1,investments:[]})),_e.getRecurring(o).catch(()=>({success:!1,recurring:[]}))]);C(!1),M(\"online\"),Y.success&&Y.settings&&(d(ve=>({...ve,...Y.settings,aiProvider:Y.settings.aiProvider||ve.aiProvider,apiKeys:{...ve.apiKeys,...Y.settings.apiKeys}})),O(Y.settings.theme)),V.success&&h(V.accounts||[]),te.success&&g(te.expenses||[]),me.success&&N(me.incomes||[]),ie.success&&E(ie.debts||[]),le.success&&S(le.goals||[]),je.success&&p(je.liabilities||[]),Ae.success&&f(Ae.investments||[]),pe.success&&w(pe.recurring||[]),O1.generateForUser(o).catch(ve=>console.error(\"Suggestions update failed\",ve)),ce.success(\"Sync complete\")}catch(Y){console.error(\"API Sync failed\",Y),C(!0),M(\"offline\")}},[o,d,h,g,N,E,S,p,f,w,C,M,O]),Q=x.useCallback(async()=>{B(!0),await U(),B(!1)},[B,U]),ae=x.useCallback(async()=>{if(!y)return;const{count:Y,dates:V,recurring:te}=y,{accounts:me,goals:ie,liabilities:le}=J.current;L(null);const je=ce.loading(`Generating ${Y} entries...`),Ae=[],pe=[];let ve=0;const xe=me.find(Ue=>Ue.id===te.accountId),Ke={},We={};try{for(const Ue of V){const it=Ue.toISOString().split(\"T\")[0],Ve={description:te.description,source:te.source,amount:te.amount,category:te.category,date:it,tags:[...te.tags||[],\"auto-backfill\"],accountId:te.accountId,isRecurring:!0,recurringId:te.id,liabilityId:te.liabilityId,investmentId:te.investmentId};if(te.type===\"expense\"){const ke=await _e.createExpense(o,Ve);ke.success&&(pe.push(ke.expense),xe&&(ve+=xe.type===\"credit_card\"?ke.expense.amount:-ke.expense.amount),te.goalId&&(Ke[te.goalId]=(Ke[te.goalId]||0)+ke.expense.amount),te.liabilityId&&(We[te.liabilityId]=(We[te.liabilityId]||0)+ke.expense.amount))}else{const ke=await _e.createIncome(o,Ve);ke.success&&(Ae.push(ke.income),xe&&(ve+=xe.type===\"credit_card\"?-ke.income.amount:ke.income.amount))}await new Promise(ke=>setTimeout(ke,30))}Ae.length>0&&N(Ue=>[...Ue,...Ae]),pe.length>0&&g(Ue=>[...Ue,...pe]);for(const[Ue,it]of Object.entries(Ke)){const Ve=ie.find(ke=>ke.id===Ue);if(Ve){const ke=Ve.currentAmount+it;await _e.updateGoal(o,Ue,{currentAmount:ke}),S(Ft=>Ft.map(fe=>fe.id===Ue?{...fe,currentAmount:ke}:fe))}}for(const[Ue,it]of Object.entries(We)){const Ve=le.find(ke=>ke.id===Ue);if(Ve){const ke=Math.max(0,Ve.outstanding-it);await _e.updateLiability(o,Ue,{outstanding:ke}),p(Ft=>Ft.map(fe=>fe.id===Ue?{...fe,outstanding:ke}:fe))}}xe&&ve!==0&&await ne(xe.id,{balance:xe.balance+ve}),ce.success(\"Backfill complete\",{id:je})}catch(Ue){console.error(\"Backfill failed\",Ue),ce.error(\"Backfill partial failure\",{id:je})}},[o,y,N,g,S,p,ne,L]),v=x.useCallback(async()=>{let Y=0;const V=J.current.expenses,te=[];for(const me of V)if(me.category!==\"Subscription\"&&Er(me.description)){const ie=qu(me.description);ie&&ie.category===\"Subscription\"&&(te.push(l.updateExpense(me.id,{category:\"Subscription\",tags:[...new Set([...me.tags,\"auto-migrated\",\"subscription\"])]})),Y++)}return te.length>0?(await Promise.all(te),ce.success(`Migrated ${Y} transactions to Subscriptions`)):ce.info(\"No subscription transactions found to migrate\"),{count:Y}},[l]),D=x.useCallback(async()=>{let Y=0;const{expenses:V,incomes:te}=J.current,me=[],ie=new Set,le=new Set;V.forEach(pe=>{const ve=`${pe.date}-${pe.description?.toLowerCase().trim()}-${pe.amount}`;!pe.description||pe.description.trim()===\"\"||pe.amount===0||ie.has(ve)?le.add(pe.id):ie.add(ve)});const je=new Map;V.forEach(pe=>{if(!le.has(pe.id)&&(pe.category===\"Subscription\"||pe.isRecurring||Er(pe.description))){const ve=new Date(pe.date),xe=`${pe.description.toLowerCase().trim()}-${ve.getFullYear()}-${ve.getMonth()}`;je.has(xe)||je.set(xe,[]),je.get(xe).push(pe)}}),je.forEach(pe=>{if(pe.length>1){pe.sort((ve,xe)=>ve.isRecurring!==xe.isRecurring?ve.isRecurring?-1:1:new Date(xe.date).getTime()-new Date(ve.date).getTime());for(let ve=1;ve<pe.length;ve++)le.add(pe[ve].id)}}),le.forEach(pe=>{me.push(oe(pe)),Y++});const Ae=new Set;for(const pe of te){const ve=`${pe.date}-${pe.source?.toLowerCase().trim()}-${pe.amount}`;!pe.source||pe.source.trim()===\"\"||pe.amount===0||Ae.has(ve)?(me.push(ge(pe.id)),Y++):Ae.add(ve)}return me.length>0?(await Promise.all(me),ce.success(`Cleaned up ${Y} entries`)):ce.info(\"Logs are clean.\"),{count:Y}},[oe,ge]),W=x.useCallback(()=>{Object.values(Oe).forEach(Y=>{Y!==Oe.AUTH&&Y!==Oe.REMEMBERED_MOBILE&&localStorage.removeItem(Y)}),g([]),N([]),E([]),S([]),h([]),f([]),p([]),w([]),A([]),T(0),ce.success(\"All data cleared successfully. You remain logged in.\")},[g,N,E,S,h,f,p,w,A,T]),q=x.useCallback(()=>{const Y=J.current.recurringTransactions;g(V=>{const te=[...V],me=te.filter(ie=>Er(ie.description));return me.length>0&&me.forEach(ie=>{if(ie.category===\"Subscription\")return;ie.category=\"Subscription\",ie.tags=Array.from(new Set([...ie.tags||[],\"auto-migrated\"])),Y.some(je=>je.description?.toLowerCase().includes(ie.description.toLowerCase())||ie.description.toLowerCase().includes(je.description?.toLowerCase()||\"\"))||setTimeout(()=>{F({type:\"expense\",description:ie.description,amount:ie.amount,category:\"Subscription\",accountId:ie.accountId,frequency:\"monthly\",startDate:ie.date,tags:[\"auto-migrated\"]})},100)}),te})},[F,g]);return x.useMemo(()=>({updateSettings:k,fetchFromApi:U,refreshData:Q,executeBackfill:ae,migrateSubscriptions:v,cleanupDuplicates:D,purgeAllData:W,runCategorizationMigration:q}),[k,U,Q,ae,v,D,W,q])},Hu=[{id:\"first_transaction\",name:\"Getting Started\",description:\"Add your first transaction\",icon:\"🎯\",condition:i=>i.totalTransactions>=1},{id:\"early_bird\",name:\"Early Bird\",description:\"Log in for the first time today\",icon:\"🌅\",condition:i=>i.dailyLogin===!0},{id:\"ten_transactions\",name:\"Building Habits\",description:\"Log 10 transactions\",icon:\"📊\",condition:i=>i.totalTransactions>=10},{id:\"fifty_transactions\",name:\"Momentum Builder\",description:\"Log 50 transactions\",icon:\"⚡\",condition:i=>i.totalTransactions>=50},{id:\"financial_guru\",name:\"Financial Guru\",description:\"Complete 100 transactions\",icon:\"🧙\",condition:i=>i.totalTransactions>=100},{id:\"three_day_streak\",name:\"Streak Starter\",description:\"Log in for 3 days in a row\",icon:\"🔥\",condition:i=>i.currentStreak>=3},{id:\"consistent_tracker\",name:\"Consistent Tracker\",description:\"Log transactions for 7 days in a row\",icon:\"📅\",condition:i=>i.currentStreak>=7},{id:\"habit_master\",name:\"Habit Master\",description:\"Maintain a 30-day streak\",icon:\"🏅\",condition:i=>i.currentStreak>=30},{id:\"dedication_champion\",name:\"Dedication Champion\",description:\"Achieve a 100-day streak\",icon:\"👑\",condition:i=>i.currentStreak>=100},{id:\"first_goal\",name:\"Goal Setter\",description:\"Create your first savings goal\",icon:\"🎯\",condition:i=>i.totalGoals>=1},{id:\"goal_achiever\",name:\"Goal Achiever\",description:\"Complete your first savings goal\",icon:\"🏆\",condition:i=>i.completedGoals>=1},{id:\"triple_winner\",name:\"Triple Winner\",description:\"Complete 3 savings goals\",icon:\"🎖️\",condition:i=>i.completedGoals>=3},{id:\"goal_crusher\",name:\"Goal Crusher\",description:\"Complete 5 savings goals\",icon:\"💎\",condition:i=>i.completedGoals>=5},{id:\"debt_aware\",name:\"Debt Aware\",description:\"Track your first debt\",icon:\"📝\",condition:i=>i.totalDebts>=1},{id:\"debt_settler\",name:\"Debt Settler\",description:\"Settle your first debt\",icon:\"✅\",condition:i=>i.settledDebts>=1},{id:\"debt_destroyer\",name:\"Debt Destroyer\",description:\"Settle 5 debts\",icon:\"💪\",condition:i=>i.settledDebts>=5},{id:\"debt_free_hero\",name:\"Debt-Free Hero\",description:\"Maintain zero pending debts\",icon:\"🦸\",condition:i=>i.totalDebts>0&&i.settledDebts===i.totalDebts},{id:\"first_saver\",name:\"First Saver\",description:\"Achieve 10%+ savings rate\",icon:\"🌱\",condition:i=>i.savingsRate>=.1},{id:\"super_saver\",name:\"Super Saver\",description:\"Maintain a 20%+ savings rate\",icon:\"💰\",condition:i=>i.savingsRate>=.2},{id:\"elite_saver\",name:\"Elite Saver\",description:\"Achieve 30%+ savings rate\",icon:\"💸\",condition:i=>i.savingsRate>=.3},{id:\"legendary_saver\",name:\"Legendary Saver\",description:\"Maintain 50%+ savings rate\",icon:\"🏰\",condition:i=>i.savingsRate>=.5},{id:\"budget_conscious\",name:\"Budget Conscious\",description:\"Keep spending under 80% of income\",icon:\"📊\",condition:i=>i.monthlySpendingRatio<=.8},{id:\"budget_master\",name:\"Budget Master\",description:\"Keep spending under 70% of income\",icon:\"👑\",condition:i=>i.monthlySpendingRatio<=.7},{id:\"frugal_champion\",name:\"Frugal Champion\",description:\"Keep spending under 50% of income\",icon:\"🌟\",condition:i=>i.monthlySpendingRatio<=.5},{id:\"stay_notified\",name:\"Stay Notified\",description:\"Enable notifications\",icon:\"🔔\",condition:i=>i.notificationsEnabled===!0},{id:\"ai_curious\",name:\"AI Curious\",description:\"Chat with AI Guru for the first time\",icon:\"🤖\",condition:i=>i.aiInteractions>=1},{id:\"ai_enthusiast\",name:\"AI Enthusiast\",description:\"Chat with AI Guru 10 times\",icon:\"🧠\",condition:i=>i.aiInteractions>=10},{id:\"profile_complete\",name:\"Profile Complete\",description:\"Add your name and photo\",icon:\"👤\",condition:i=>i.profileComplete===!0},{id:\"account_organizer\",name:\"Account Organizer\",description:\"Create 3 or more accounts\",icon:\"🏦\",condition:i=>i.totalAccounts>=3}];function L1(i,l){const o=[];return Hu.forEach(u=>{!l.includes(u.id)&&u.condition(i)&&o.push(u.id)}),o}function cp(i){return Hu.find(l=>l.id===i)}function U1(){return Hu}const I1=(i,l)=>{const{accounts:o,goals:u,emergencyFundAmount:d,liabilities:h,debts:g,settings:N,recurringTransactions:E,setSettings:S}=i,p=x.useRef({accounts:o,goals:u,emergencyFundAmount:d,liabilities:h,debts:g,settings:N,recurringTransactions:E,expenses:i.expenses});x.useEffect(()=>{p.current={accounts:o,goals:u,emergencyFundAmount:d,liabilities:h,debts:g,settings:N,recurringTransactions:E,expenses:i.expenses}},[o,u,d,h,g,N,E,i.expenses]);const f=x.useRef(l);x.useEffect(()=>{f.current=l},[l]);const w=x.useCallback(()=>{const{addNotifications:T}=f.current,C=new Date;C.setHours(0,0,0,0);const{accounts:M,goals:y,emergencyFundAmount:L,liabilities:z,debts:j}=p.current,G=M.reduce((B,J)=>B+(J.type===\"bank\"||J.type===\"cash\"?J.balance:0),0),ee=y.reduce((B,J)=>B+J.currentAmount,0)+L,Z=Math.max(0,G-ee),_=[];if(z.forEach(B=>{const J=new Date(B.startDate),ne=new Date(C.getFullYear(),C.getMonth(),J.getDate());ne<C&&ne.setMonth(ne.getMonth()+1),Math.ceil((ne.getTime()-C.getTime())/(1e3*60*60*24))<=10&&_.push({name:B.name,amount:B.emiAmount,dueDate:ne,type:\"EMI\"})}),j.filter(B=>B.status!==\"settled\").forEach(B=>{if(B.dueDate){const J=new Date(B.dueDate),ne=Math.ceil((J.getTime()-C.getTime())/(1e3*60*60*24));ne<=10&&ne>=-30&&_.push({name:`Debt: ${B.personName}`,amount:B.amount,dueDate:J,type:\"Debt\"})}}),_.length>0){const B=_.reduce((J,ne)=>J+ne.amount,0);B>Z&&T({id:`smart_due_liquidity_${C.toISOString().split(\"T\")[0]}`,type:\"alert\",priority:\"high\",category:\"reminders\",title:\"Liquidity Warning\",message:`You have ₹${B.toLocaleString()} in dues within 10 days, but only ₹${Z.toLocaleString()} available.`,timestamp:new Date,read:!1})}},[]),A=x.useCallback(()=>{const{addNotifications:T}=f.current,{expenses:C,goals:M,emergencyFundAmount:y,debts:L,accounts:z,recurringTransactions:j,settings:G}=p.current,ee={totalExpenses:C.length,totalSavings:M.reduce((_,B)=>_+B.currentAmount,0),emergencyFund:y,debtsSettled:L.filter(_=>_.status===\"settled\").length,accountsCount:z.length,recurringCount:j.length},Z=L1(ee,G.unlockedAchievements||[]);Z.length>0&&(Z.forEach(_=>{const B=cp(_);B&&T({id:`achievement_${_}_${Date.now()}`,type:\"achievement\",priority:\"high\",category:\"system\",title:\"New Achievement!\",message:`You've unlocked: ${B.name}`,timestamp:new Date,read:!1,achievementId:_})}),S(_=>({..._,unlockedAchievements:[..._.unlockedAchievements||[],...Z]})))},[S]);return x.useMemo(()=>({checkSmartDues:w,checkForAchievements:A}),[w,A])},B1=(i,l)=>{const{userId:o,setSettings:u,setExpenses:d,setIncomes:h,setDebts:g,setGoals:N,setAccounts:E,setInvestments:S,setLiabilities:p,setNotifications:f,setEmergencyFundAmount:w,setRecurringTransactions:A,setRememberedMobile:T,setPendingMobile:C,setIsRememberedUser:M,setDeletionDate:y,setIsLoading:L}=i,z=x.useRef(l);x.useEffect(()=>{z.current=l},[l]);const j=x.useCallback(async()=>{const{applyTheme:G,fetchFromApi:ee,purgeAllData:Z,runCategorizationMigration:_}=z.current;L(!0);try{const J=localStorage.getItem(Oe.SETTINGS);if(J){const q=JSON.parse(J);u(q),G(q.theme)}const ne=localStorage.getItem(Oe.EXPENSES);ne&&d(JSON.parse(ne));const F=localStorage.getItem(Oe.INCOMES);F&&h(JSON.parse(F));const oe=localStorage.getItem(Oe.DEBTS);oe&&g(JSON.parse(oe));const ge=localStorage.getItem(Oe.GOALS);ge&&N(JSON.parse(ge));const O=localStorage.getItem(Oe.ACCOUNTS);O&&E(JSON.parse(O));const k=localStorage.getItem(Oe.INVESTMENTS);k&&S(JSON.parse(k));const U=localStorage.getItem(Oe.LIABILITIES);U&&p(JSON.parse(U));const Q=localStorage.getItem(Oe.NOTIFICATIONS);if(Q){const Y=JSON.parse(Q).filter((V,te,me)=>me.findIndex(ie=>ie.id===V.id||ie.message===V.message&&ie.type===V.type)===te);f(Y.slice(0,100))}const ae=localStorage.getItem(Oe.EMERGENCY_FUND);ae&&w(JSON.parse(ae));const v=localStorage.getItem(Oe.RECURRING);v&&A(JSON.parse(v));const D=localStorage.getItem(Oe.REMEMBERED_MOBILE);D&&(T(D),C(D),M(!0));const W=localStorage.getItem(Oe.DELETION_SCHEDULE);if(W){const q=new Date(W).getTime();new Date().getTime()>=q?Z():y(W)}}catch(J){console.error(\"Error loading local data:\",J)}await ee(),!localStorage.getItem(\"finhub_subscription_migration_v3\")&&o&&(_(),localStorage.setItem(\"finhub_subscription_migration_v3\",\"true\")),L(!1)},[o,u,d,h,g,N,E,S,p,f,w,A,T,C,M,y,L]);return x.useMemo(()=>({loadInitialData:j}),[j])},q1=(i,l)=>{const{accounts:o,goals:u,setEmergencyFundAmount:d}=i,h=x.useRef({accounts:o,goals:u});x.useEffect(()=>{h.current={accounts:o,goals:u}},[o,u]);const g=x.useRef(l);x.useEffect(()=>{g.current=l},[l]);const[N,E]=x.useState(!1),[S,p]=x.useState(\"goal\"),f=x.useCallback(M=>{p(M),E(!0)},[]),w=x.useCallback(()=>{E(!1)},[]),A=x.useCallback(async(M,y)=>{const{updateAccount:L}=g.current,{accounts:z}=h.current,j=z.find(G=>G.id===M);j&&await L(M,{balance:j.balance-y})},[]),T=x.useCallback(async M=>{try{const{updateGoal:y}=g.current;if(await A(M.accountId,M.amount),M.destinationType===\"goal\"){const{goals:L}=h.current,z=L.find(j=>j.id===M.destinationId);z&&await y(M.destinationId,{currentAmount:z.currentAmount+M.amount})}else d(L=>L+M.amount);ce.success(\"Funds allocated successfully!\"),w()}catch(y){console.error(\"Fund allocation failed\",y),ce.error(\"Allocation failed\")}},[A,d,w]),C=x.useCallback(async(M,y,L)=>{try{const{updateAccount:z}=g.current,{accounts:j}=h.current,G=j.find(Z=>Z.id===M),ee=j.find(Z=>Z.id===y);G&&ee&&(await z(M,{balance:G.balance-L}),await z(y,{balance:ee.balance+L}),ce.success(\"Transfer complete\"))}catch(z){console.error(\"Transfer failed\",z),ce.error(\"Transfer failed\")}},[]);return x.useMemo(()=>({isFundAllocationOpen:N,fundAllocationType:S,openFundAllocation:f,closeFundAllocation:w,performFundAllocation:T,deductFromAccount:A,transferFunds:C}),[N,S,f,w,T,A,C])},up=x.createContext(void 0),ai=()=>{const i=x.useContext(up);if(!i)throw new Error(\"useFinance must be used within a FinanceProvider\");return i},H1=({children:i})=>{const l=Iv(),{applyTheme:o}=h1(),{addNotifications:u}=p1(l.setNotifications),d=f1(),h=d.currentUser?.id||\"demo-user-001\",g=x.useMemo(()=>({...l,...d,userId:h}),[l,d,h]),N=b1(g),E=N1(g),S=x.useMemo(()=>({...N,...E,applyTheme:o,addNotifications:u}),[N,E,o,u]),p=S1(g,S),f=C1(g,{...S,...p}),w=E1(g,S),A=x.useMemo(()=>({...S,...p,...f,...w}),[S,p,f,w]),T=k1(g,A),C=T1(g,A),M=D1(g,A),y=x.useMemo(()=>({...A,...T,...C,...M}),[A,T,C,M]),L=z1(g,y),z=q1(g,y),j=I1(g,{...y,...L}),G=B1(g,{...y,...L});m1(l),x.useEffect(()=>{d.authStatus===\"authenticated\"&&G.loadInitialData()},[d.authStatus,G]),x.useEffect(()=>{const Z=setInterval(()=>{d.authStatus===\"authenticated\"&&(j.checkSmartDues(),j.checkForAchievements())},36e5);return()=>clearInterval(Z)},[d.authStatus,j]),x.useEffect(()=>{if(d.authStatus===\"authenticated\"){const Z=setTimeout(()=>{Pi.backfillAll(h).catch(console.error)},5e3);return()=>clearTimeout(Z)}},[d.authStatus,h]),x.useEffect(()=>{let Z;const _=()=>{Z&&clearTimeout(Z),d.authStatus===\"authenticated\"&&(Z=setTimeout(()=>{d.logout()},12e5))};return window.addEventListener(\"mousemove\",_),window.addEventListener(\"keypress\",_),_(),()=>{window.removeEventListener(\"mousemove\",_),window.removeEventListener(\"keypress\",_),Z&&clearTimeout(Z)}},[d.authStatus,d]);const ee=x.useMemo(()=>({...l,...d,...y,...L,...z,...j,...G,userId:h,currency:l.settings.currency,clearAllData:L.purgeAllData,createRecurring:E.createRecurringTransaction,processRecurringTransactions:async()=>{await Pi.backfillAll(h)}}),[l,d,y,L,z,j,G,h,E]);return n.jsx(up.Provider,{value:ee,children:i})};function Ne(i,l=\"USD\",o=!1){const u=typeof i==\"string\"?parseFloat(i.replace(/,/g,\"\")):i;if(isNaN(u))return\"\";const d=l===\"INR\"?\"en-IN\":\"en-US\",h={style:\"currency\",currency:l,notation:o?\"compact\":\"standard\",maximumFractionDigits:o?1:2};try{return new Intl.NumberFormat(d,h).format(u)}catch{return new Intl.NumberFormat(d,{...h,style:\"decimal\"}).format(u)}}function Gu(i,l=\"en-IN\"){const o=typeof i==\"string\"?parseFloat(i.replace(/,/g,\"\")):i;return isNaN(o)?\"\":new Intl.NumberFormat(l).format(o)}const ou=Gu;function G1(i){return i===\"\"||i===\"-\"?!0:/^-?\\d*\\.?\\d*$/.test(i)}function c0(i){return i.replace(/,/g,\"\")}function V1(i){if(i<=0)return\"0 months\";const l=Math.floor(i/12),o=i%12,u=[];return l>0&&u.push(`${l} ${l===1?\"year\":\"years\"}`),(o>0||l===0)&&u.push(`${o} ${o===1?\"month\":\"months\"}`),u.join(\", \")}function u0(i,l=\"INR\"){const o=Math.abs(i),u=i<0?\"-\":\"\";if(l===\"INR\"){if(o>=1e7)return`${u}${(o/1e7).toFixed(2).replace(/\\.00$/,\"\")}C`;if(o>=1e5)return`${u}${(o/1e5).toFixed(2).replace(/\\.00$/,\"\")}L`;if(o>=1e4)return`${u}${(o/1e3).toFixed(1).replace(/\\.0$/,\"\")}K`}else{if(o>=1e9)return`${u}${(o/1e9).toFixed(2).replace(/\\.00$/,\"\")}B`;if(o>=1e6)return`${u}${(o/1e6).toFixed(2).replace(/\\.00$/,\"\")}M`;if(o>=1e4)return`${u}${(o/1e3).toFixed(1).replace(/\\.0$/,\"\")}K`}return u+Gu(o,l===\"INR\"?\"en-IN\":\"en-US\")}function LN(i,l=\"INR\"){const o=Math.abs(i),u=i<0?\"-\":\"\",d=(h,g)=>{let N=2;return h>=100?N=0:h>=10&&(N=1),`${u}${h.toFixed(N).replace(/\\.0+$/,\"\")}${g}`};if(l===\"INR\"){if(o>=1e7)return d(o/1e7,\"Cr\");if(o>=1e5)return d(o/1e5,\"L\");if(o>=1e3)return d(o/1e3,\"K\")}else{if(o>=1e9)return d(o/1e9,\"B\");if(o>=1e6)return d(o/1e6,\"M\");if(o>=1e3)return d(o/1e3,\"K\")}return u+Gu(o,l===\"INR\"?\"en-IN\":\"en-US\")}const Vu=x.createContext({});function Fu(i){const l=x.useRef(null);return l.current===null&&(l.current=i()),l.current}const dp=typeof window<\"u\",fp=dp?x.useLayoutEffect:x.useEffect,zr=x.createContext(null),Yu=x.createContext({transformPagePoint:i=>i,isStatic:!1,reducedMotion:\"never\"});function d0(i,l){if(typeof i==\"function\")return i(l);i!=null&&(i.current=l)}function F1(...i){return l=>{let o=!1;const u=i.map(d=>{const h=d0(d,l);return!o&&typeof h==\"function\"&&(o=!0),h});if(o)return()=>{for(let d=0;d<u.length;d++){const h=u[d];typeof h==\"function\"?h():d0(i[d],null)}}}}function Y1(...i){return x.useCallback(F1(...i),i)}class $1 extends x.Component{getSnapshotBeforeUpdate(l){const o=this.props.childRef.current;if(o&&l.isPresent&&!this.props.isPresent){const u=o.offsetParent,d=zy(u)&&u.offsetWidth||0,h=this.props.sizeRef.current;h.height=o.offsetHeight||0,h.width=o.offsetWidth||0,h.top=o.offsetTop,h.left=o.offsetLeft,h.right=d-h.width-h.left}return null}componentDidUpdate(){}render(){return this.props.children}}function X1({children:i,isPresent:l,anchorX:o,root:u}){const d=x.useId(),h=x.useRef(null),g=x.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:N}=x.useContext(Yu),E=i.props?.ref??i?.ref,S=Y1(h,E);return x.useInsertionEffect(()=>{const{width:p,height:f,top:w,left:A,right:T}=g.current;if(l||!h.current||!p||!f)return;const C=o===\"left\"?`left: ${A}`:`right: ${T}`;h.current.dataset.motionPopId=d;const M=document.createElement(\"style\");N&&(M.nonce=N);const y=u??document.head;return y.appendChild(M),M.sheet&&M.sheet.insertRule(`"
      },
      {
        "file": "android\\app\\src\\main\\assets\\public\\assets\\index-i0Euu4OB.js",
        "line": 11,
        "snippet": "`);try{v=new Worker(URL.createObjectURL(new Blob([Y])))}catch(V){return typeof console<\"u\"&&typeof console.warn==\"function\"&&console.warn(\"🎊 Could not load worker\",V),null}q(v)}return v}})(),A={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:[\"square\",\"circle\"],zIndex:100,colors:[\"#26ccff\",\"#a25afd\",\"#ff5e7e\",\"#88ff5a\",\"#fcff42\",\"#ffa62d\",\"#ff36ff\"],disableForReducedMotion:!1,scalar:1};function T(v,D){return D?D(v):v}function C(v){return v!=null}function M(v,D,W){return T(v&&C(v[D])?v[D]:A[D],W)}function y(v){return v<0?0:Math.floor(v)}function L(v,D){return Math.floor(Math.random()*(D-v))+v}function z(v){return parseInt(v,16)}function j(v){return v.map(G)}function G(v){var D=String(v).replace(/[^0-9a-f]/gi,\"\");return D.length<6&&(D=D[0]+D[0]+D[1]+D[1]+D[2]+D[2]),{r:z(D.substring(0,2)),g:z(D.substring(2,4)),b:z(D.substring(4,6))}}function ee(v){var D=M(v,\"origin\",Object);return D.x=M(D,\"x\",Number),D.y=M(D,\"y\",Number),D}function Z(v){v.width=document.documentElement.clientWidth,v.height=document.documentElement.clientHeight}function _(v){var D=v.getBoundingClientRect();v.width=D.width,v.height=D.height}function B(v){var D=document.createElement(\"canvas\");return D.style.position=\"fixed\",D.style.top=\"0px\",D.style.left=\"0px\",D.style.pointerEvents=\"none\",D.style.zIndex=v,D}function J(v,D,W,q,Y,V,te,me,ie){v.save(),v.translate(D,W),v.rotate(V),v.scale(q,Y),v.arc(0,0,1,te,me,ie),v.restore()}function ne(v){var D=v.angle*(Math.PI/180),W=v.spread*(Math.PI/180);return{x:v.x,y:v.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:v.startVelocity*.5+Math.random()*v.startVelocity,angle2D:-D+(.5*W-Math.random()*W),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:v.color,shape:v.shape,tick:0,totalTicks:v.ticks,decay:v.decay,drift:v.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:v.gravity*3,ovalScalar:.6,scalar:v.scalar,flat:v.flat}}function F(v,D){D.x+=Math.cos(D.angle2D)*D.velocity+D.drift,D.y+=Math.sin(D.angle2D)*D.velocity+D.gravity,D.velocity*=D.decay,D.flat?(D.wobble=0,D.wobbleX=D.x+10*D.scalar,D.wobbleY=D.y+10*D.scalar,D.tiltSin=0,D.tiltCos=0,D.random=1):(D.wobble+=D.wobbleSpeed,D.wobbleX=D.x+10*D.scalar*Math.cos(D.wobble),D.wobbleY=D.y+10*D.scalar*Math.sin(D.wobble),D.tiltAngle+=.1,D.tiltSin=Math.sin(D.tiltAngle),D.tiltCos=Math.cos(D.tiltAngle),D.random=Math.random()+2);var W=D.tick++/D.totalTicks,q=D.x+D.random*D.tiltCos,Y=D.y+D.random*D.tiltSin,V=D.wobbleX+D.random*D.tiltCos,te=D.wobbleY+D.random*D.tiltSin;if(v.fillStyle=\"rgba(\"+D.color.r+\", \"+D.color.g+\", \"+D.color.b+\", \"+(1-W)+\")\",v.beginPath(),g&&D.shape.type===\"path\"&&typeof D.shape.path==\"string\"&&Array.isArray(D.shape.matrix))v.fill(U(D.shape.path,D.shape.matrix,D.x,D.y,Math.abs(V-q)*.1,Math.abs(te-Y)*.1,Math.PI/10*D.wobble));else if(D.shape.type===\"bitmap\"){var me=Math.PI/10*D.wobble,ie=Math.abs(V-q)*.1,le=Math.abs(te-Y)*.1,je=D.shape.bitmap.width*D.scalar,Ae=D.shape.bitmap.height*D.scalar,pe=new DOMMatrix([Math.cos(me)*ie,Math.sin(me)*ie,-Math.sin(me)*le,Math.cos(me)*le,D.x,D.y]);pe.multiplySelf(new DOMMatrix(D.shape.matrix));var ve=v.createPattern(p.transform(D.shape.bitmap),\"no-repeat\");ve.setTransform(pe),v.globalAlpha=1-W,v.fillStyle=ve,v.fillRect(D.x-je/2,D.y-Ae/2,je,Ae),v.globalAlpha=1}else if(D.shape===\"circle\")v.ellipse?v.ellipse(D.x,D.y,Math.abs(V-q)*D.ovalScalar,Math.abs(te-Y)*D.ovalScalar,Math.PI/10*D.wobble,0,2*Math.PI):J(v,D.x,D.y,Math.abs(V-q)*D.ovalScalar,Math.abs(te-Y)*D.ovalScalar,Math.PI/10*D.wobble,0,2*Math.PI);else if(D.shape===\"star\")for(var xe=Math.PI/2*3,Ke=4*D.scalar,We=8*D.scalar,Ue=D.x,it=D.y,Ve=5,ke=Math.PI/Ve;Ve--;)Ue=D.x+Math.cos(xe)*We,it=D.y+Math.sin(xe)*We,v.lineTo(Ue,it),xe+=ke,Ue=D.x+Math.cos(xe)*Ke,it=D.y+Math.sin(xe)*Ke,v.lineTo(Ue,it),xe+=ke;else v.moveTo(Math.floor(D.x),Math.floor(D.y)),v.lineTo(Math.floor(D.wobbleX),Math.floor(Y)),v.lineTo(Math.floor(V),Math.floor(te)),v.lineTo(Math.floor(q),Math.floor(D.wobbleY));return v.closePath(),v.fill(),D.tick<D.totalTicks}function oe(v,D,W,q,Y){var V=D.slice(),te=v.getContext(\"2d\"),me,ie,le=S(function(je){function Ae(){me=ie=null,te.clearRect(0,0,q.width,q.height),p.clear(),Y(),je()}function pe(){u&&!(q.width===d.width&&q.height===d.height)&&(q.width=v.width=d.width,q.height=v.height=d.height),!q.width&&!q.height&&(W(v),q.width=v.width,q.height=v.height),te.clearRect(0,0,q.width,q.height),V=V.filter(function(ve){return F(te,ve)}),V.length?me=f.frame(pe):Ae()}me=f.frame(pe),ie=Ae});return{addFettis:function(je){return V=V.concat(je),le},canvas:v,promise:le,reset:function(){me&&f.cancel(me),ie&&ie()}}}function ge(v,D){var W=!v,q=!!M(D||{},\"resize\"),Y=!1,V=M(D,\"disableForReducedMotion\",Boolean),te=h&&!!M(D||{},\"useWorker\"),me=te?w():null,ie=W?Z:_,le=v&&me?!!v.__confetti_initialized:!1,je=typeof matchMedia==\"function\"&&matchMedia(\"(prefers-reduced-motion)\").matches,Ae;function pe(xe,Ke,We){for(var Ue=M(xe,\"particleCount\",y),it=M(xe,\"angle\",Number),Ve=M(xe,\"spread\",Number),ke=M(xe,\"startVelocity\",Number),Ft=M(xe,\"decay\",Number),fe=M(xe,\"gravity\",Number),Se=M(xe,\"drift\",Number),ze=M(xe,\"colors\",j),lt=M(xe,\"ticks\",Number),mt=M(xe,\"shapes\"),_a=M(xe,\"scalar\"),ga=!!M(xe,\"flat\"),Ra=ee(xe),Kt=Ue,Oa=[],ea=v.width*Ra.x,zt=v.height*Ra.y;Kt--;)Oa.push(ne({x:ea,y:zt,angle:it,spread:Ve,startVelocity:ke,color:ze[Kt%ze.length],shape:mt[L(0,mt.length)],ticks:lt,decay:Ft,gravity:fe,drift:Se,scalar:_a,flat:ga}));return Ae?Ae.addFettis(Oa):(Ae=oe(v,Oa,ie,Ke,We),Ae.promise)}function ve(xe){var Ke=V||M(xe,\"disableForReducedMotion\",Boolean),We=M(xe,\"zIndex\",Number);if(Ke&&je)return S(function(ke){ke()});W&&Ae?v=Ae.canvas:W&&!v&&(v=B(We),document.body.appendChild(v)),q&&!le&&ie(v);var Ue={width:v.width,height:v.height};me&&!le&&me.init(v),le=!0,me&&(v.__confetti_initialized=!0);function it(){if(me){var ke={getBoundingClientRect:function(){if(!W)return v.getBoundingClientRect()}};ie(ke),me.postMessage({resize:{width:ke.width,height:ke.height}});return}Ue.width=Ue.height=null}function Ve(){Ae=null,q&&(Y=!1,l.removeEventListener(\"resize\",it)),W&&v&&(document.body.contains(v)&&document.body.removeChild(v),v=null,le=!1)}return q&&!Y&&(Y=!0,l.addEventListener(\"resize\",it,!1)),me?me.fire(xe,Ue,Ve):pe(xe,Ue,Ve)}return ve.reset=function(){me&&me.reset(),Ae&&Ae.reset()},ve}var O;function k(){return O||(O=ge(null,{useWorker:!0,resize:!0})),O}function U(v,D,W,q,Y,V,te){var me=new Path2D(v),ie=new Path2D;ie.addPath(me,new DOMMatrix(D));var le=new Path2D;return le.addPath(ie,new DOMMatrix([Math.cos(te)*Y,Math.sin(te)*Y,-Math.sin(te)*V,Math.cos(te)*V,W,q])),le}function Q(v){if(!g)throw new Error(\"path confetti are not supported in this browser\");var D,W;typeof v==\"string\"?D=v:(D=v.path,W=v.matrix);var q=new Path2D(D),Y=document.createElement(\"canvas\"),V=Y.getContext(\"2d\");if(!W){for(var te=1e3,me=te,ie=te,le=0,je=0,Ae,pe,ve=0;ve<te;ve+=2)for(var xe=0;xe<te;xe+=2)V.isPointInPath(q,ve,xe,\"nonzero\")&&(me=Math.min(me,ve),ie=Math.min(ie,xe),le=Math.max(le,ve),je=Math.max(je,xe));Ae=le-me,pe=je-ie;var Ke=10,We=Math.min(Ke/Ae,Ke/pe);W=[We,0,0,We,-Math.round(Ae/2+me)*We,-Math.round(pe/2+ie)*We]}return{type:\"path\",path:D,matrix:W}}function ae(v){var D,W=1,q=\"#000000\",Y='\"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\", \"EmojiOne Color\", \"Android Emoji\", \"Twemoji Mozilla\", \"system emoji\", sans-serif';typeof v==\"string\"?D=v:(D=v.text,W=\"scalar\"in v?v.scalar:W,Y=\"fontFamily\"in v?v.fontFamily:Y,q=\"color\"in v?v.color:q);var V=10*W,te=\"\"+V+\"px \"+Y,me=new OffscreenCanvas(V,V),ie=me.getContext(\"2d\");ie.font=te;var le=ie.measureText(D),je=Math.ceil(le.actualBoundingBoxRight+le.actualBoundingBoxLeft),Ae=Math.ceil(le.actualBoundingBoxAscent+le.actualBoundingBoxDescent),pe=2,ve=le.actualBoundingBoxLeft+pe,xe=le.actualBoundingBoxAscent+pe;je+=pe+pe,Ae+=pe+pe,me=new OffscreenCanvas(je,Ae),ie=me.getContext(\"2d\"),ie.font=te,ie.fillStyle=q,ie.fillText(D,ve,xe);var Ke=1/W;return{type:\"bitmap\",bitmap:me.transferToImageBitmap(),matrix:[Ke,0,0,Ke,-je*Ke/2,-Ae*Ke/2]}}o.exports=function(){return k().apply(this,arguments)},o.exports.reset=function(){k().reset()},o.exports.create=ge,o.exports.shapeFromPath=Q,o.exports.shapeFromText=ae})((function(){return typeof window<\"u\"?window:typeof self<\"u\"?self:this||{}})(),Bu,!1);const Or=Bu.exports;Bu.exports.create;const S1=(i,l)=>{const{userId:o,goals:u,setGoals:d,recurringTransactions:h}=i,g=x.useRef({goals:u,recurringTransactions:h});x.useEffect(()=>{g.current={goals:u,recurringTransactions:h}},[u,h]);const N=x.useRef(l);x.useEffect(()=>{N.current=l},[l]);const E=x.useCallback(async f=>{try{const w=await _e.createGoal(o,f);if(w.success){if(d(A=>[...A,w.goal]),f.monthly_contribution>0){const{createRecurringTransaction:A}=N.current;await A({type:\"expense\",description:`Goal Contribution: ${w.goal.name}`,amount:f.monthly_contribution,category:\"Transfer\",accountId:f.accountId||\"none\",frequency:\"monthly\",startDate:f.startDate||w.goal.createdAt.split(\"T\")[0],tags:[\"goal\",\"contribution\",w.goal.name.toLowerCase()],goalId:w.goal.id})}ce.success(\"Goal created\")}}catch{const w={id:`temp_${Date.now()}`,...f,createdAt:new Date().toISOString()};d(A=>[...A,w]),ce.warning(\"Created in offline mode\")}},[o,d]),S=x.useCallback(async(f,w)=>{try{const A=await _e.updateGoal(o,f,w);if(A.success){const{goals:T,recurringTransactions:C}=g.current,M=T.find(y=>y.id===f);if(M){const{createRecurringTransaction:y,updateRecurringTransaction:L,deleteRecurringTransaction:z}=N.current;if((A.goal.monthly_contribution||0)>0){const j=C.find(G=>G.goalId===f);j?await L(j.id,{amount:A.goal.monthly_contribution||0,description:`Goal Contribution: ${A.goal.name}`}):await y({type:\"expense\",description:`Goal Contribution: ${A.goal.name}`,amount:A.goal.monthly_contribution||0,category:\"Transfer\",accountId:A.goal.accountId||\"none\",frequency:\"monthly\",startDate:A.goal.startDate||M.createdAt?.split(\"T\")[0]||new Date().toISOString().split(\"T\")[0],tags:[\"goal\",\"contribution\",A.goal.name.toLowerCase()],goalId:A.goal.id})}else if(M.monthly_contribution&&M.monthly_contribution>0){const j=C.find(G=>G.goalId===f);j&&await z(j.id)}}d(y=>y.map(L=>L.id===f?A.goal:L)),A.goal.currentAmount>=A.goal.targetAmount?(ce.success(`🎉 Goal \"${A.goal.name}\" completed!`),Or({particleCount:200,spread:120,origin:{y:.5}})):ce.success(\"Goal updated\")}}catch{d(A=>A.map(T=>T.id===f?{...T,...w}:T)),ce.warning(\"Updated locally\")}},[o,d]),p=x.useCallback(async f=>{try{(await _e.deleteGoal(o,f)).success&&(d(A=>A.filter(T=>T.id!==f)),ce.success(\"Goal deleted\"))}catch{d(w=>w.filter(A=>A.id!==f)),ce.warning(\"Deleted locally\")}},[o,d]);return x.useMemo(()=>({createGoal:E,updateGoal:S,deleteGoal:p}),[E,S,p])},C1=(i,l)=>{const{userId:o,investments:u,setInvestments:d,accounts:h,setExpenses:g,recurringTransactions:N}=i,E=x.useRef({investments:u,accounts:h,recurringTransactions:N});x.useEffect(()=>{E.current={investments:u,accounts:h,recurringTransactions:N}},[u,h,N]);const S=x.useRef(l);x.useEffect(()=>{S.current=l},[l]);const p=x.useCallback(async(A,T)=>{try{const C=await _e.createInvestment(o,A);if(C.success){if(d(M=>[...M,C.investment]),T&&T!==\"none\"){const{updateAccount:M}=S.current,{accounts:y}=E.current,L=y.find(z=>z.id===T);if(L){const z=A.buyPrice*A.quantity;await M(T,{balance:L.balance-z});const j={description:`Asset Purchase: ${A.symbol} (${A.quantity} units)`,amount:z,category:\"Transfer\",date:A.purchaseDate||new Date().toISOString().split(\"T\")[0],tags:[\"investment\",\"principal\",A.symbol],accountId:T},G=await _e.createExpense(o,j);G.success&&g(ee=>[...ee,G.expense])}}if(C.investment.type===\"sip\"){const{createRecurringTransaction:M}=S.current;await M({type:\"expense\",description:`SIP: ${C.investment.symbol} (${C.investment.name})`,amount:C.investment.buyPrice*C.investment.quantity,category:\"Investment\",accountId:T||\"none\",frequency:\"monthly\",startDate:C.investment.purchaseDate,tags:[\"sip\",\"investment\",C.investment.symbol.toLowerCase()],investmentId:C.investment.id})}ce.success(\"Investment created\")}}catch{const C={id:`temp_${Date.now()}`,...A,createdAt:new Date().toISOString()};d(M=>[...M,C]),ce.warning(\"Created locally\")}},[o,g,d]),f=x.useCallback(async(A,T)=>{try{const C=await _e.updateInvestment(o,A,T);if(C.success){const{investments:M,recurringTransactions:y}=E.current,L=M.find(z=>z.id===A);if(L){const{updateRecurringTransaction:z,createRecurringTransaction:j,deleteRecurringTransaction:G}=S.current;if(C.investment.type===\"sip\"){const ee=y.find(Z=>Z.investmentId===A);ee?await z(ee.id,{amount:C.investment.buyPrice*C.investment.quantity,description:`SIP: ${C.investment.symbol} (${C.investment.name})`}):await j({type:\"expense\",description:`SIP: ${C.investment.symbol} (${C.investment.name})`,amount:C.investment.buyPrice*C.investment.quantity,category:\"Investment\",accountId:C.investment.accountId||\"none\",frequency:\"monthly\",startDate:C.investment.purchaseDate,tags:[\"sip\",\"investment\",C.investment.symbol.toLowerCase()],investmentId:C.investment.id})}else if(L.type===\"sip\"){const ee=y.find(Z=>Z.investmentId===A);ee&&await G(ee.id)}}d(z=>z.map(j=>j.id===A?C.investment:j)),ce.success(\"Investment updated\")}}catch{d(C=>C.map(M=>M.id===A?{...M,...T}:M)),ce.warning(\"Updated locally\")}},[o,d]),w=x.useCallback(async A=>{try{(await _e.deleteInvestment(o,A)).success&&(d(C=>C.filter(M=>M.id!==A)),ce.success(\"Investment deleted\"))}catch{d(T=>T.filter(C=>C.id!==A)),ce.warning(\"Deleted locally\")}},[o,d]);return x.useMemo(()=>({createInvestment:p,updateInvestment:f,deleteInvestment:w}),[p,f,w])},E1=(i,l)=>{const{userId:o,liabilities:u,setLiabilities:d,recurringTransactions:h}=i,g=x.useRef({liabilities:u,recurringTransactions:h});x.useEffect(()=>{g.current={liabilities:u,recurringTransactions:h}},[u,h]);const N=x.useRef(l);x.useEffect(()=>{N.current=l},[l]);const E=x.useCallback(async f=>{try{const w=await _e.createLiability(o,f);if(w.success&&(d(A=>[...A,w.liability]),ce.success(\"Liability created\"),w.liability.emiAmount>0)){const{createRecurringTransaction:A}=N.current;await A({type:\"expense\",description:`EMI: ${w.liability.name}`,amount:w.liability.emiAmount,category:\"EMI\",accountId:w.liability.accountId||\"none\",frequency:\"monthly\",startDate:w.liability.startDate,tags:[\"emi\",\"liability\",w.liability.name.toLowerCase()],liabilityId:w.liability.id})}}catch{const w={id:`temp_${Date.now()}`,...f,createdAt:new Date().toISOString()};d(A=>[...A,w]),ce.warning(\"Created locally\")}},[o,d]),S=x.useCallback(async(f,w)=>{try{const A=await _e.updateLiability(o,f,w);if(A.success){const{liabilities:T,recurringTransactions:C}=g.current,M=T.find(y=>y.id===f);if(M){const{createRecurringTransaction:y,updateRecurringTransaction:L,deleteRecurringTransaction:z}=N.current;if(A.liability.emiAmount>0){const j=C.find(G=>G.liabilityId===f);j?await L(j.id,{amount:A.liability.emiAmount,description:`EMI: ${A.liability.name}`}):await y({type:\"expense\",description:`EMI: ${A.liability.name}`,amount:A.liability.emiAmount,category:\"EMI\",accountId:A.liability.accountId||\"none\",frequency:\"monthly\",startDate:A.liability.startDate,tags:[\"emi\",\"liability\",A.liability.name.toLowerCase()],liabilityId:A.liability.id})}else if(M.emiAmount>0){const j=C.find(G=>G.liabilityId===f);j&&await z(j.id)}}d(y=>y.map(L=>L.id===f?A.liability:L)),ce.success(\"Liability updated\")}}catch{d(A=>A.map(T=>T.id===f?{...T,...w}:T)),ce.warning(\"Updated locally\")}},[o,d]),p=x.useCallback(async f=>{try{(await _e.deleteLiability(o,f)).success&&(d(A=>A.filter(T=>T.id!==f)),ce.success(\"Liability deleted\"))}catch{d(w=>w.filter(A=>A.id!==f)),ce.warning(\"Deleted locally\")}},[o,d]);return x.useMemo(()=>({createLiability:E,updateLiability:S,deleteLiability:p}),[E,S,p])},A1={netflix:\"Subscription\",spotify:\"Subscription\",google:\"Subscription\",apple:\"Subscription\",icloud:\"Subscription\",youtube:\"Subscription\",disney:\"Subscription\",hotstar:\"Subscription\",\"prime video\":\"Subscription\",\"prime membership\":\"Subscription\",\"amazon prime\":\"Subscription\",audible:\"Subscription\",kindle:\"Subscription\",hulu:\"Subscription\",hbomax:\"Subscription\",hbo:\"Subscription\",\"paramount+\":\"Subscription\",peacock:\"Subscription\",crunchyroll:\"Subscription\",chaisai:\"Subscription\",\"google play\":\"Subscription\",\"google one\":\"Subscription\",\"app store\":\"Subscription\",microsoft:\"Subscription\",\"office 365\":\"Subscription\",dropbox:\"Subscription\",zoom:\"Subscription\",canva:\"Subscription\",adobe:\"Subscription\",\"creative cloud\":\"Subscription\",jio:\"Subscription\",airtel:\"Subscription\",vodafone:\"Subscription\",idea:\"Subscription\",bsnl:\"Subscription\",\"vi \":\"Subscription\",broadband:\"Subscription\",isp:\"Subscription\",\"act fiber\":\"Subscription\",hathway:\"Subscription\",\"internet bill\":\"Subscription\",telecom:\"Subscription\",coffee:\"Food & Dining\",starbucks:\"Food & Dining\",cafe:\"Food & Dining\",restaurant:\"Food & Dining\",lunch:\"Food & Dining\",dinner:\"Food & Dining\",pizza:\"Food & Dining\",burger:\"Food & Dining\",mcdonalds:\"Food & Dining\",kfc:\"Food & Dining\",food:\"Food & Dining\",zomato:\"Food & Dining\",swiggy:\"Food & Dining\",beer:\"Food & Dining\",bar:\"Food & Dining\",uber:\"Transportation\",ola:\"Transportation\",cab:\"Transportation\",taxi:\"Transportation\",bus:\"Transportation\",train:\"Transportation\",metro:\"Transportation\",fuel:\"Transportation\",petrol:\"Transportation\",gas:\"Transportation\",parking:\"Transportation\",amazon:\"Shopping\",flipkart:\"Shopping\",clothes:\"Shopping\",zara:\"Shopping\",nike:\"Shopping\",shoes:\"Shopping\",mall:\"Shopping\",grocery:\"Groceries\",supermarket:\"Groceries\",vegetables:\"Groceries\",fruits:\"Groceries\",milk:\"Groceries\",electricity:\"Bills & Utilities\",water:\"Bills & Utilities\",\"gas bill\":\"Bills & Utilities\",rent:\"Bills & Utilities\",maintenance:\"Bills & Utilities\",movie:\"Entertainment\",cinema:\"Entertainment\",game:\"Entertainment\",steam:\"Entertainment\",playstation:\"Entertainment\",xbox:\"Entertainment\",doctor:\"Health & Wellbeing\",medical:\"Health & Wellbeing\",pharmacy:\"Health & Wellbeing\",medicine:\"Health & Wellbeing\",gym:\"Health & Wellbeing\",fitness:\"Health & Wellbeing\",hospital:\"Health & Wellbeing\",transfer:\"Transfer\",payment:\"Transfer\",\"cc bill\":\"Transfer\",internal:\"Transfer\",membership:\"Subscription\",subscription:\"Subscription\",recurring:\"Subscription\",premium:\"Subscription\",\"monthly bill\":\"Subscription\"},op=[{keywords:[\"netflix\"],displayName:\"Netflix Premium\",defaultAmount:649,category:\"Subscription\"},{keywords:[\"hotstar\",\"disney\"],displayName:\"Disney+ Hotstar\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"prime video\",\"amazon prime\"],displayName:\"Amazon Prime\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"hulu\"],displayName:\"Hulu\",defaultAmount:650,category:\"Subscription\"},{keywords:[\"youtube\",\"yt premium\"],displayName:\"YouTube Premium\",defaultAmount:129,category:\"Subscription\"},{keywords:[\"sonyliv\"],displayName:\"SonyLIV\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"zee5\"],displayName:\"Zee5\",defaultAmount:100,category:\"Subscription\"},{keywords:[\"jiocinema\"],displayName:\"JioCinema Premium\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"apple tv\"],displayName:\"Apple TV+\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"spotify\"],displayName:\"Spotify Premium\",defaultAmount:119,category:\"Subscription\"},{keywords:[\"apple music\"],displayName:\"Apple Music\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"audible\"],displayName:\"Audible\",defaultAmount:199,category:\"Subscription\"},{keywords:[\"wynk\"],displayName:\"Wynk Music\",defaultAmount:49,category:\"Subscription\"},{keywords:[\"gaana\"],displayName:\"Gaana Plus\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"jiosaavn\"],displayName:\"JioSaavn Pro\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"google one\",\"google storage\"],displayName:\"Google One\",defaultAmount:130,category:\"Subscription\"},{keywords:[\"chatgpt\",\"openai\"],displayName:\"ChatGPT Plus\",defaultAmount:1999,category:\"Subscription\"},{keywords:[\"claude\",\"anthropic\"],displayName:\"Claude Pro\",defaultAmount:1999,category:\"Subscription\"},{keywords:[\"github\"],displayName:\"GitHub Copilot\",defaultAmount:830,category:\"Subscription\"},{keywords:[\"midjourney\"],displayName:\"Midjourney\",defaultAmount:830,category:\"Subscription\"},{keywords:[\"canva\"],displayName:\"Canva Pro\",defaultAmount:499,category:\"Subscription\"},{keywords:[\"adobe\",\"creative cloud\"],displayName:\"Adobe CC\",defaultAmount:2300,category:\"Subscription\"},{keywords:[\"jio\",\"myjio\"],displayName:\"Jio Mobile\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"airtel\"],displayName:\"Airtel Mobile\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"vi \",\"vodafone\"],displayName:\"Vi Mobile\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"act fiber\",\"act net\"],displayName:\"ACT Fibernet\",defaultAmount:820,category:\"Bills & Utilities\"},{keywords:[\"hathway\"],displayName:\"Hathway Broadband\",defaultAmount:600,category:\"Bills & Utilities\"}],Er=i=>{const l=i.toLowerCase();return op.some(o=>o.keywords.some(u=>l.includes(u)))},qu=i=>{const l=i.toLowerCase();for(const o of op)if(o.keywords.some(u=>l.includes(u))){const u=[\"subscription\",\"online\"];return{category:o.category,tags:u,suggestedAmount:o.defaultAmount,suggestedDescription:o.displayName}}for(const[o,u]of Object.entries(A1))if(l.includes(o)){const d=[];return l.includes(\"online\")&&d.push(\"online\"),l.includes(\"subscription\")&&d.push(\"subscription\"),{category:u,tags:d}}return null},k1=(i,l)=>{const{userId:o,expenses:u,setExpenses:d,accounts:h,goals:g,emergencyFundAmount:N,setEmergencyFundAmount:E,liabilities:S,setNotifications:p}=i,f=x.useRef({expenses:u,accounts:h,goals:g,emergencyFundAmount:N,liabilities:S});x.useEffect(()=>{f.current={expenses:u,accounts:h,goals:g,emergencyFundAmount:N,liabilities:S}},[u,h,g,N,S]);const w=x.useCallback(y=>{p(L=>{const z=Array.isArray(y)?y:[y],j=[...L];return z.forEach(G=>{j.some(ee=>ee.id===G.id)||j.unshift(G)}),j.slice(0,100)})},[p]),A=x.useRef(l);x.useEffect(()=>{A.current=l},[l]);const T=x.useCallback(async y=>{const{accounts:L,goals:z,emergencyFundAmount:j,liabilities:G}=f.current,{updateAccount:ee,updateGoal:Z,updateLiability:_,createRecurringTransaction:B}=A.current;try{const J=L.reduce((Q,ae)=>Q+(ae.type!==\"credit_card\"?ae.balance:0),0),ne=z.reduce((Q,ae)=>Q+ae.currentAmount,0)+j,F=G.reduce((Q,ae)=>Q+ae.emiAmount,0),oe=Math.max(0,J-ne-F),ge=y.amount;if(ge>oe){let ae=ge-oe;const v=[];z.forEach(q=>{const Y=q.type||\"growth\";let V=1;Y===\"stability\"&&(V=2),Y===\"protection\"&&(V=3),q.currentAmount>0&&v.push({id:q.id,type:\"goal\",currentAmount:q.currentAmount,priority:V,name:q.name})}),j>0&&v.push({id:\"emergency-fund\",type:\"emergency\",currentAmount:j,priority:3,name:\"Emergency Fund\"}),v.sort((q,Y)=>q.priority-Y.priority);const D=[],W=[];for(const q of v){if(ae<=0)break;const Y=Math.min(q.currentAmount,ae);ae-=Y,q.type===\"goal\"?(D.push(Z(q.id,{currentAmount:q.currentAmount-Y,status:\"leaking\"})),W.push({id:`leak_${q.id}_${new Date().toISOString().split(\"T\")[0]}`,type:\"alert\",priority:\"medium\",category:\"transactions\",title:\"Shadow Wallet Leakage\",message:`₹${Y} spent reduced your '${q.name}' reserve.`,timestamp:new Date,read:!1})):q.type===\"emergency\"&&(E(V=>V-Y),W.push({id:`leak_emergency_${new Date().toISOString().split(\"T\")[0]}`,type:\"alert\",priority:\"medium\",category:\"transactions\",title:\"Emergency Fund Alert\",message:`Warning: ₹${Y} withdrawn from Emergency Fund to cover spending.`,timestamp:new Date,read:!1}))}await Promise.all(D),W.length>0&&(w(W),W.forEach(q=>ce.error(q.title,{description:q.message})))}const O=L.find(Q=>Q.id===y.accountId),k={...y};if(O?.type===\"credit_card\"){const Q=O.serviceChargePercentage||0;Q>0&&(k.serviceChargeAmount=y.amount*Q/100);const ae=O.creditLimit||0,v=O.safeLimitPercentage||30,D=ae*v/100,q=Math.abs(O.balance)+y.amount;q>D&&ae>0&&(y.isIncomeGenerating||(ce.warning(\"High Interest Risk Detected\",{description:`This transaction puts your CC usage at ${(q/ae*100).toFixed(1)}%, exceeding your ${v}% safe limit with no income-justification.`,duration:6e3}),w({id:`cc_limit_${O.id}_${new Date().toISOString().split(\"T\")[0]}`,type:\"alert\",priority:\"medium\",category:\"transactions\",title:\"Credit Stability Breach\",message:`Card '${O.name}' usage protocol exceeded ${v}% threshold. Avoid non-essential outflow.`,timestamp:new Date,read:!1})))}if(!k.category||k.category===\"Other\"){const Q=qu(k.description);Q&&Q.category===\"Subscription\"&&(k.category=\"Subscription\",k.tags=Array.from(new Set([...k.tags||[],\"auto-detected\"])))}if(y.registerAsLiability)try{const Q=y.tenureUnit===\"years\"?y.tenure*12:y.tenure,ae=await _e.createLiability(o,{name:y.description,type:y.liabilityType||\"other\",principal:y.principal||y.amount,outstanding:y.principal||y.amount,interestRate:y.interestRate||0,emiAmount:y.amount,startDate:y.date,tenure:Q,accountId:y.accountId});ae.success&&(k.liabilityId=ae.liability.id,y.isRecurring=!1)}catch(Q){console.error(\"Failed to auto-register liability:\",Q)}const U=await _e.createExpense(o,k);if(U.success){if(d(Q=>[...Q,U.expense]),Rr.ensureCatalogAndLink(o,\"transaction\",U.expense.id,\"merchant\",k.description,{amount:k.amount,category:k.category}).catch(Q=>console.error(\"Catalog link failed\",Q)),O){const Q=y.amount+(k.serviceChargeAmount||0),ae=O.type===\"credit_card\"?O.balance+Q:O.balance-Q;await ee(O.id,{balance:ae})}if(k.liabilityId){const Q=G.find(ae=>ae.id===k.liabilityId);if(Q){const ae=Math.max(0,Q.outstanding-y.amount);await _(Q.id,{outstanding:ae}),ce.info(`Updated '${Q.name}' balance`,{description:`New outstanding: ₹${ae.toLocaleString()}`})}}y.isRecurring?await B({type:\"expense\",description:y.description,amount:y.amount,category:y.category,accountId:y.accountId,frequency:y.frequency||\"monthly\",customIntervalDays:y.customIntervalDays,startDate:y.date,endDate:y.endDate,tags:y.tags}):(ce.success(\"Expense added!\"),Er(y.description)&&!y.isRecurring&&w({id:`verify_sub_${U.expense.id}`,type:\"insight\",priority:\"medium\",category:\"transactions\",title:\"Automate Payment?\",message:`Detected '${y.description}' as a subscription. Add to cyclical routine?`,timestamp:new Date,read:!1,action:{type:\"verify_subscription\",label:\"Automate\",status:\"pending\",payload:{id:U.expense.id,description:y.description,amount:y.amount,category:y.category,accountId:y.accountId,date:y.date}}}))}}catch{d(J=>[...J,{id:`temp_${Date.now()}`,...y,createdAt:new Date().toISOString()}]),ce.warning(\"Added in offline mode\")}},[o,w,E,d]),C=x.useCallback(async(y,L)=>{const{expenses:z,accounts:j}=f.current,{updateAccount:G}=A.current;try{const ee=await _e.updateExpense(o,y,L);if(ee.success){const Z=z.find(_=>_.id===y);if(Z){const _=j.find(ne=>ne.id===Z.accountId);if(_){const ne=Z.amount+(Z.serviceChargeAmount||0),F=_.type===\"credit_card\"?_.balance-ne:_.balance+ne;await G(_.id,{balance:F})}const B=ee.expense,J=j.find(ne=>ne.id===B.accountId);if(J){const ne=B.amount+(B.serviceChargeAmount||0),F=J.type===\"credit_card\"?J.balance+ne:J.balance-ne;await G(J.id,{balance:F})}}d(_=>_.map(B=>B.id===y?ee.expense:B)),ce.success(\"Expense updated\")}}catch{d(ee=>ee.map(Z=>Z.id===y?{...Z,...L}:Z)),ce.warning(\"Updated in offline mode\")}},[o,d]),M=x.useCallback(async y=>{const{expenses:L,accounts:z}=f.current,{updateAccount:j}=A.current;try{if((await _e.deleteExpense(o,y)).success){const ee=L.find(Z=>Z.id===y);if(ee){const Z=z.find(_=>_.id===ee.accountId);if(Z){const _=ee.amount+(ee.serviceChargeAmount||0),B=Z.type===\"credit_card\"?Z.balance-_:Z.balance+_;await j(Z.id,{balance:B})}}d(Z=>Z.filter(_=>_.id!==y)),ce.success(\"Expense deleted\")}}catch{d(G=>G.filter(ee=>ee.id!==y)),ce.warning(\"Deleted in offline mode\")}},[o,d]);return x.useMemo(()=>({createExpense:T,updateExpense:C,deleteExpense:M,addNotifications:w}),[T,C,M,w])},T1=(i,l)=>{const{userId:o,incomes:u,setIncomes:d,accounts:h}=i,g=x.useRef({incomes:u,accounts:h});x.useEffect(()=>{g.current={incomes:u,accounts:h}},[u,h]);const N=x.useRef(l);x.useEffect(()=>{N.current=l},[l]);const E=x.useCallback(async f=>{try{const w=await _e.createIncome(o,f);if(w.success){d(C=>[...C,w.income]),Rr.ensureCatalogAndLink(o,\"transaction\",w.income.id,\"merchant\",f.description,{amount:f.amount,category:f.category}).catch(C=>console.error(\"Catalog link failed\",C));const{accounts:A}=g.current,T=A.find(C=>C.id===f.accountId);if(T){const{updateAccount:C,createRecurringTransaction:M}=N.current,y=T.type===\"credit_card\"?T.balance-f.amount:T.balance+f.amount;await C(T.id,{balance:y}),f.isRecurring?await M({type:\"income\",description:f.description,amount:f.amount,category:f.category,accountId:f.accountId,frequency:f.frequency||\"monthly\",customIntervalDays:f.customIntervalDays,startDate:f.date,endDate:f.endDate,tags:f.tags}):ce.success(\"Income added!\")}else ce.success(\"Income added!\")}}catch(w){console.error(\"Error creating income:\",w),d(A=>[...A,{id:`temp_${Date.now()}`,...f,createdAt:new Date().toISOString()}]),ce.warning(\"Added in offline mode\")}},[o,d]),S=x.useCallback(async(f,w)=>{try{const A=await _e.updateIncome(o,f,w);if(A.success){const{incomes:T,accounts:C}=g.current,M=T.find(y=>y.id===f);if(M){const{updateAccount:y}=N.current,L=C.find(G=>G.id===M.accountId);if(L){const G=L.type===\"credit_card\"?L.balance+M.amount:L.balance-M.amount;await y(L.id,{balance:G})}const z=A.income,j=C.find(G=>G.id===z.accountId);if(j){const G=j.type===\"credit_card\"?j.balance-z.amount:j.balance+z.amount;await y(j.id,{balance:G})}}d(y=>y.map(L=>L.id===f?A.income:L)),ce.success(\"Income updated\")}}catch{d(A=>A.map(T=>T.id===f?{...T,...w}:T)),ce.warning(\"Updated in offline mode\")}},[o,d]),p=x.useCallback(async f=>{try{if((await _e.deleteIncome(o,f)).success){const{incomes:A,accounts:T}=g.current,C=A.find(M=>M.id===f);if(C){const{updateAccount:M}=N.current,y=T.find(L=>L.id===C.accountId);if(y){const L=y.type===\"credit_card\"?y.balance+C.amount:y.balance-C.amount;await M(y.id,{balance:L})}}d(M=>M.filter(y=>y.id!==f)),ce.success(\"Income deleted\")}}catch{d(w=>w.filter(A=>A.id!==f)),ce.warning(\"Deleted in offline mode\")}},[o,d]);return x.useMemo(()=>({createIncome:E,updateIncome:S,deleteIncome:p}),[E,S,p])},D1=(i,l)=>{const{userId:o,debts:u,setDebts:d,accounts:h,setExpenses:g,setIncomes:N}=i,E=x.useRef({debts:u,accounts:h});x.useEffect(()=>{E.current={debts:u,accounts:h}},[u,h]);const S=x.useRef(l);x.useEffect(()=>{S.current=l},[l]);const p=x.useCallback(async T=>{try{const C=await _e.createDebt(o,T);if(C.success){d(L=>[...L,C.debt]);const{accounts:M}=E.current,y=M.find(L=>L.id===T.accountId);if(y){const{updateAccount:L}=S.current,z=T.type===\"borrowed\"?T.amount:-T.amount,j=y.type===\"credit_card\"?y.balance-z:y.balance+z;await L(y.id,{balance:j})}if(T.isRecurring){const{createRecurringTransaction:L}=S.current;await L({type:\"expense\",description:`Debt: ${T.personName} (${T.type})`,amount:T.amount,category:\"Debt\",accountId:T.accountId,frequency:T.frequency||\"monthly\",startDate:T.date,tags:[...T.tags||[],\"debt\"]})}ce.success(\"Debt created\")}}catch{d(C=>[...C,{id:`temp_${Date.now()}`,...T,status:\"pending\",createdAt:new Date().toISOString()}]),ce.warning(\"Added in offline mode\")}},[o,d]),f=x.useCallback(async(T,C)=>{try{const M=await _e.updateDebt(o,T,C);if(M.success){const{debts:y,accounts:L}=E.current,z=y.find(j=>j.id===T);if(z){const{updateAccount:j,updateRecurringTransaction:G,createRecurringTransaction:ee}=S.current,Z=L.find(J=>J.id===z.accountId);if(Z){const J=z.type===\"borrowed\"?-z.amount:z.amount,ne=Z.type===\"credit_card\"?Z.balance-J:Z.balance+J;await j(Z.id,{balance:ne})}const _=M.debt,B=L.find(J=>J.id===_.accountId);if(B){const J=_.type===\"borrowed\"?_.amount:-_.amount,ne=B.type===\"credit_card\"?B.balance-J:B.balance+J;await j(B.id,{balance:ne})}C.isRecurring&&(z.recurringId?await G(z.recurringId,{amount:C.amount,description:`Debt: ${C.personName} (${C.type})`}):await ee({type:\"expense\",description:`Debt: ${C.personName} (${C.type})`,amount:C.amount,category:\"Debt\",accountId:C.accountId,frequency:C.frequency||\"monthly\",startDate:C.date,tags:[...C.tags||[],\"debt\"]}))}d(j=>j.map(G=>G.id===T?M.debt:G)),ce.success(\"Debt updated\")}}catch{d(M=>M.map(y=>y.id===T?{...y,...C}:y)),ce.warning(\"Updated in offline mode\")}},[o,d]),w=x.useCallback(async T=>{try{const C=await _e.updateDebt(o,T,{status:\"settled\"});if(C.success){const{debts:M,accounts:y}=E.current,L=M.find(z=>z.id===T);if(L&&L.status!==\"settled\"){const{updateAccount:z}=S.current,j=y.find(G=>G.id===L.accountId);if(j){const G=L.type===\"borrowed\"?-L.amount:L.amount,ee=j.type===\"credit_card\"?j.balance-G:j.balance+G;await z(j.id,{balance:ee});const Z={description:`Debt Settlement: ${L.personName}`,amount:L.amount,category:\"Transfer\",date:new Date().toISOString().split(\"T\")[0],tags:[\"debt-settlement\"],accountId:L.accountId};if(L.type===\"borrowed\"){const _=await _e.createExpense(o,Z);_.success&&g(B=>[...B,_.expense])}else{const _=await _e.createIncome(o,Z);_.success&&N(B=>[...B,_.income])}}}d(z=>z.map(j=>j.id===T?C.debt:j)),ce.success(\"🎉 Debt settled! Great job!\"),Or({particleCount:150,spread:100,origin:{y:.6}})}}catch{d(C=>C.map(M=>M.id===T?{...M,status:\"settled\"}:M)),ce.warning(\"Marked as settled locally\")}},[o,g,N,d]),A=x.useCallback(async T=>{try{if((await _e.deleteDebt(o,T)).success){const{debts:M,accounts:y}=E.current,L=M.find(z=>z.id===T);if(L){const{updateAccount:z}=S.current,j=y.find(G=>G.id===L.accountId);if(j){const G=L.type===\"borrowed\"?-L.amount:L.amount,ee=j.type===\"credit_card\"?j.balance-G:j.balance+G;await z(j.id,{balance:ee})}}d(z=>z.filter(j=>j.id!==T)),ce.success(\"Debt deleted\")}}catch{d(C=>C.filter(M=>M.id!==T)),ce.warning(\"Deleted in offline mode\")}},[o,d]);return x.useMemo(()=>({createDebt:p,updateDebt:f,settleDebt:w,deleteDebt:A}),[p,f,w,A])},lu=`https://${ll}.supabase.co/rest/v1`,ru={\"Content-Type\":\"application/json\",apikey:fn,Authorization:`Bearer ${fn}`},Ws={async getSuggestions(i,l=\"new\",o=20){const u=new URLSearchParams({user_id:`eq.${i}`,order:\"created_at.desc\",limit:o.toString()});l!==\"all\"&&u.append(\"status\",`eq.${l}`);try{const d=await fetch(`${lu}/smart_suggestions?${u}`,{headers:ru});return d.ok?await d.json():[]}catch(d){return console.error(\"Fetch suggestions error:\",d),[]}},async createSuggestion(i){try{const o=await(await fetch(`${lu}/smart_suggestions`,{method:\"POST\",headers:{...ru,Prefer:\"return=representation\"},body:JSON.stringify(i)})).json();return Array.isArray(o)?o[0]:o}catch(l){return console.error(\"Create suggestion error:\",l),null}},async updateStatus(i,l){try{return(await fetch(`${lu}/smart_suggestions?id=eq.${i}`,{method:\"PATCH\",headers:ru,body:JSON.stringify({status:l})})).ok}catch(o){return console.error(\"Update suggestion status error:\",o),!1}}};function o0(i,l){const o=JSON.stringify(l.payload||{}),u=l.type||\"UNKNOWN\";return`${i}_${u}_${o}`}const M1={detectSubscriptions(i){const l={};i.forEach(u=>{const d=u.note?.toLowerCase().trim()||u.merchant?.toLowerCase()||\"unknown\";d!==\"unknown\"&&(l[d]||(l[d]=[]),l[d].push(u))});const o=[];return Object.entries(l).forEach(([u,d])=>{if(d.length<3)return;const h=d.sort((S,p)=>new Date(S.txn_date).getTime()-new Date(p.txn_date).getTime()),g=h[h.length-1],N=h[h.length-2],E=Math.abs(new Date(g.txn_date).getTime()-new Date(N.txn_date).getTime())/(1e3*3600*24);E>=25&&E<=35&&o.push({type:\"subscription_detected\",title:\"New Subscription Detected\",message:`You've had 3 recurring payments to \"${u}\". Would you like to track this as a subscription?`,severity:\"low\",action:{type:\"CREATE_SUBSCRIPTION\",payload:{name:u,amount:g.amount,currency_code:g.currency_code}}})}),o}},_1=`https://${ll}.supabase.co/rest/v1`,R1={apikey:fn,Authorization:`Bearer ${fn}`},O1={async getTopSuggestions(i,l=5){return await Ws.getSuggestions(i,\"new\",l)},async generateForUser(i){try{const l=await Ws.getSuggestions(i,\"all\",100),o=new Set(l.map(N=>o0(N.type,N.action))),d=await(await fetch(`${_1}/transactions?user_id=eq.${i}&order=txn_date.desc&limit=100`,{headers:R1})).json(),h=[...M1.detectSubscriptions(d)];let g=0;for(const N of h){const E=o0(N.type,N.action);o.has(E)||(await Ws.createSuggestion({user_id:i,...N,status:\"new\",source:\"rule\",expires_at:null}),g++,o.add(E))}return g}catch(l){return console.error(\"Error generating suggestions:\",l),0}},async markSeen(i){return await Ws.updateStatus(i,\"seen\")},async dismiss(i){return await Ws.updateStatus(i,\"dismissed\")},async accept(i){return await Ws.updateStatus(i,\"accepted\")}},z1=(i,l)=>{const{userId:o,settings:u,setSettings:d,setAccounts:h,setExpenses:g,setIncomes:N,setDebts:E,setGoals:S,setLiabilities:p,setInvestments:f,setRecurringTransactions:w,setNotifications:A,setEmergencyFundAmount:T,setIsOffline:C,setApiStatus:M,backfillRequest:y,setBackfillRequest:L,expenses:z,incomes:j,goals:G,accounts:ee,liabilities:Z,recurringTransactions:_,setIsRefreshing:B}=i,J=x.useRef({expenses:z,incomes:j,goals:G,accounts:ee,liabilities:Z,recurringTransactions:_,settings:u});x.useEffect(()=>{J.current={expenses:z,incomes:j,goals:G,accounts:ee,liabilities:Z,recurringTransactions:_,settings:u}},[z,j,G,ee,Z,_,u]);const{updateAccount:ne,createRecurringTransaction:F,deleteExpense:oe,deleteIncome:ge,applyTheme:O}=l,k=x.useCallback(async Y=>{d(V=>({...V,...Y})),Y.theme&&O(Y.theme);try{const V=await _e.updateSettings(o,Y);if(V.success)d(te=>({...te,...V.settings,aiProvider:V.settings.aiProvider||te.aiProvider,apiKeys:{...te.apiKeys,...V.settings.apiKeys}}));else throw new Error(V.error)}catch(V){console.error(\"Failed to sync settings\",V),ce.error(\"Settings saved locally only\")}},[o,d,O]),U=x.useCallback(async()=>{try{try{await _e.processRecurring(o)}catch(ve){console.error(\"Skip recurring process\",ve)}const[Y,V,te,me,ie,le,je,Ae,pe]=await Promise.all([_e.getSettings(o).catch(()=>({success:!1,settings:void 0})),_e.getAccounts(o).catch(()=>({success:!1,accounts:[]})),_e.getExpenses(o).catch(()=>({success:!1,expenses:[]})),_e.getIncomes(o).catch(()=>({success:!1,incomes:[]})),_e.getDebts(o).catch(()=>({success:!1,debts:[]})),_e.getGoals(o).catch(()=>({success:!1,goals:[]})),_e.getLiabilities(o).catch(()=>({success:!1,liabilities:[]})),_e.getInvestments(o).catch(()=>({success:!1,investments:[]})),_e.getRecurring(o).catch(()=>({success:!1,recurring:[]}))]);C(!1),M(\"online\"),Y.success&&Y.settings&&(d(ve=>({...ve,...Y.settings,aiProvider:Y.settings.aiProvider||ve.aiProvider,apiKeys:{...ve.apiKeys,...Y.settings.apiKeys}})),O(Y.settings.theme)),V.success&&h(V.accounts||[]),te.success&&g(te.expenses||[]),me.success&&N(me.incomes||[]),ie.success&&E(ie.debts||[]),le.success&&S(le.goals||[]),je.success&&p(je.liabilities||[]),Ae.success&&f(Ae.investments||[]),pe.success&&w(pe.recurring||[]),O1.generateForUser(o).catch(ve=>console.error(\"Suggestions update failed\",ve)),ce.success(\"Sync complete\")}catch(Y){console.error(\"API Sync failed\",Y),C(!0),M(\"offline\")}},[o,d,h,g,N,E,S,p,f,w,C,M,O]),Q=x.useCallback(async()=>{B(!0),await U(),B(!1)},[B,U]),ae=x.useCallback(async()=>{if(!y)return;const{count:Y,dates:V,recurring:te}=y,{accounts:me,goals:ie,liabilities:le}=J.current;L(null);const je=ce.loading(`Generating ${Y} entries...`),Ae=[],pe=[];let ve=0;const xe=me.find(Ue=>Ue.id===te.accountId),Ke={},We={};try{for(const Ue of V){const it=Ue.toISOString().split(\"T\")[0],Ve={description:te.description,source:te.source,amount:te.amount,category:te.category,date:it,tags:[...te.tags||[],\"auto-backfill\"],accountId:te.accountId,isRecurring:!0,recurringId:te.id,liabilityId:te.liabilityId,investmentId:te.investmentId};if(te.type===\"expense\"){const ke=await _e.createExpense(o,Ve);ke.success&&(pe.push(ke.expense),xe&&(ve+=xe.type===\"credit_card\"?ke.expense.amount:-ke.expense.amount),te.goalId&&(Ke[te.goalId]=(Ke[te.goalId]||0)+ke.expense.amount),te.liabilityId&&(We[te.liabilityId]=(We[te.liabilityId]||0)+ke.expense.amount))}else{const ke=await _e.createIncome(o,Ve);ke.success&&(Ae.push(ke.income),xe&&(ve+=xe.type===\"credit_card\"?-ke.income.amount:ke.income.amount))}await new Promise(ke=>setTimeout(ke,30))}Ae.length>0&&N(Ue=>[...Ue,...Ae]),pe.length>0&&g(Ue=>[...Ue,...pe]);for(const[Ue,it]of Object.entries(Ke)){const Ve=ie.find(ke=>ke.id===Ue);if(Ve){const ke=Ve.currentAmount+it;await _e.updateGoal(o,Ue,{currentAmount:ke}),S(Ft=>Ft.map(fe=>fe.id===Ue?{...fe,currentAmount:ke}:fe))}}for(const[Ue,it]of Object.entries(We)){const Ve=le.find(ke=>ke.id===Ue);if(Ve){const ke=Math.max(0,Ve.outstanding-it);await _e.updateLiability(o,Ue,{outstanding:ke}),p(Ft=>Ft.map(fe=>fe.id===Ue?{...fe,outstanding:ke}:fe))}}xe&&ve!==0&&await ne(xe.id,{balance:xe.balance+ve}),ce.success(\"Backfill complete\",{id:je})}catch(Ue){console.error(\"Backfill failed\",Ue),ce.error(\"Backfill partial failure\",{id:je})}},[o,y,N,g,S,p,ne,L]),v=x.useCallback(async()=>{let Y=0;const V=J.current.expenses,te=[];for(const me of V)if(me.category!==\"Subscription\"&&Er(me.description)){const ie=qu(me.description);ie&&ie.category===\"Subscription\"&&(te.push(l.updateExpense(me.id,{category:\"Subscription\",tags:[...new Set([...me.tags,\"auto-migrated\",\"subscription\"])]})),Y++)}return te.length>0?(await Promise.all(te),ce.success(`Migrated ${Y} transactions to Subscriptions`)):ce.info(\"No subscription transactions found to migrate\"),{count:Y}},[l]),D=x.useCallback(async()=>{let Y=0;const{expenses:V,incomes:te}=J.current,me=[],ie=new Set,le=new Set;V.forEach(pe=>{const ve=`${pe.date}-${pe.description?.toLowerCase().trim()}-${pe.amount}`;!pe.description||pe.description.trim()===\"\"||pe.amount===0||ie.has(ve)?le.add(pe.id):ie.add(ve)});const je=new Map;V.forEach(pe=>{if(!le.has(pe.id)&&(pe.category===\"Subscription\"||pe.isRecurring||Er(pe.description))){const ve=new Date(pe.date),xe=`${pe.description.toLowerCase().trim()}-${ve.getFullYear()}-${ve.getMonth()}`;je.has(xe)||je.set(xe,[]),je.get(xe).push(pe)}}),je.forEach(pe=>{if(pe.length>1){pe.sort((ve,xe)=>ve.isRecurring!==xe.isRecurring?ve.isRecurring?-1:1:new Date(xe.date).getTime()-new Date(ve.date).getTime());for(let ve=1;ve<pe.length;ve++)le.add(pe[ve].id)}}),le.forEach(pe=>{me.push(oe(pe)),Y++});const Ae=new Set;for(const pe of te){const ve=`${pe.date}-${pe.source?.toLowerCase().trim()}-${pe.amount}`;!pe.source||pe.source.trim()===\"\"||pe.amount===0||Ae.has(ve)?(me.push(ge(pe.id)),Y++):Ae.add(ve)}return me.length>0?(await Promise.all(me),ce.success(`Cleaned up ${Y} entries`)):ce.info(\"Logs are clean.\"),{count:Y}},[oe,ge]),W=x.useCallback(()=>{Object.values(Oe).forEach(Y=>{Y!==Oe.AUTH&&Y!==Oe.REMEMBERED_MOBILE&&localStorage.removeItem(Y)}),g([]),N([]),E([]),S([]),h([]),f([]),p([]),w([]),A([]),T(0),ce.success(\"All data cleared successfully. You remain logged in.\")},[g,N,E,S,h,f,p,w,A,T]),q=x.useCallback(()=>{const Y=J.current.recurringTransactions;g(V=>{const te=[...V],me=te.filter(ie=>Er(ie.description));return me.length>0&&me.forEach(ie=>{if(ie.category===\"Subscription\")return;ie.category=\"Subscription\",ie.tags=Array.from(new Set([...ie.tags||[],\"auto-migrated\"])),Y.some(je=>je.description?.toLowerCase().includes(ie.description.toLowerCase())||ie.description.toLowerCase().includes(je.description?.toLowerCase()||\"\"))||setTimeout(()=>{F({type:\"expense\",description:ie.description,amount:ie.amount,category:\"Subscription\",accountId:ie.accountId,frequency:\"monthly\",startDate:ie.date,tags:[\"auto-migrated\"]})},100)}),te})},[F,g]);return x.useMemo(()=>({updateSettings:k,fetchFromApi:U,refreshData:Q,executeBackfill:ae,migrateSubscriptions:v,cleanupDuplicates:D,purgeAllData:W,runCategorizationMigration:q}),[k,U,Q,ae,v,D,W,q])},Hu=[{id:\"first_transaction\",name:\"Getting Started\",description:\"Add your first transaction\",icon:\"🎯\",condition:i=>i.totalTransactions>=1},{id:\"early_bird\",name:\"Early Bird\",description:\"Log in for the first time today\",icon:\"🌅\",condition:i=>i.dailyLogin===!0},{id:\"ten_transactions\",name:\"Building Habits\",description:\"Log 10 transactions\",icon:\"📊\",condition:i=>i.totalTransactions>=10},{id:\"fifty_transactions\",name:\"Momentum Builder\",description:\"Log 50 transactions\",icon:\"⚡\",condition:i=>i.totalTransactions>=50},{id:\"financial_guru\",name:\"Financial Guru\",description:\"Complete 100 transactions\",icon:\"🧙\",condition:i=>i.totalTransactions>=100},{id:\"three_day_streak\",name:\"Streak Starter\",description:\"Log in for 3 days in a row\",icon:\"🔥\",condition:i=>i.currentStreak>=3},{id:\"consistent_tracker\",name:\"Consistent Tracker\",description:\"Log transactions for 7 days in a row\",icon:\"📅\",condition:i=>i.currentStreak>=7},{id:\"habit_master\",name:\"Habit Master\",description:\"Maintain a 30-day streak\",icon:\"🏅\",condition:i=>i.currentStreak>=30},{id:\"dedication_champion\",name:\"Dedication Champion\",description:\"Achieve a 100-day streak\",icon:\"👑\",condition:i=>i.currentStreak>=100},{id:\"first_goal\",name:\"Goal Setter\",description:\"Create your first savings goal\",icon:\"🎯\",condition:i=>i.totalGoals>=1},{id:\"goal_achiever\",name:\"Goal Achiever\",description:\"Complete your first savings goal\",icon:\"🏆\",condition:i=>i.completedGoals>=1},{id:\"triple_winner\",name:\"Triple Winner\",description:\"Complete 3 savings goals\",icon:\"🎖️\",condition:i=>i.completedGoals>=3},{id:\"goal_crusher\",name:\"Goal Crusher\",description:\"Complete 5 savings goals\",icon:\"💎\",condition:i=>i.completedGoals>=5},{id:\"debt_aware\",name:\"Debt Aware\",description:\"Track your first debt\",icon:\"📝\",condition:i=>i.totalDebts>=1},{id:\"debt_settler\",name:\"Debt Settler\",description:\"Settle your first debt\",icon:\"✅\",condition:i=>i.settledDebts>=1},{id:\"debt_destroyer\",name:\"Debt Destroyer\",description:\"Settle 5 debts\",icon:\"💪\",condition:i=>i.settledDebts>=5},{id:\"debt_free_hero\",name:\"Debt-Free Hero\",description:\"Maintain zero pending debts\",icon:\"🦸\",condition:i=>i.totalDebts>0&&i.settledDebts===i.totalDebts},{id:\"first_saver\",name:\"First Saver\",description:\"Achieve 10%+ savings rate\",icon:\"🌱\",condition:i=>i.savingsRate>=.1},{id:\"super_saver\",name:\"Super Saver\",description:\"Maintain a 20%+ savings rate\",icon:\"💰\",condition:i=>i.savingsRate>=.2},{id:\"elite_saver\",name:\"Elite Saver\",description:\"Achieve 30%+ savings rate\",icon:\"💸\",condition:i=>i.savingsRate>=.3},{id:\"legendary_saver\",name:\"Legendary Saver\",description:\"Maintain 50%+ savings rate\",icon:\"🏰\",condition:i=>i.savingsRate>=.5},{id:\"budget_conscious\",name:\"Budget Conscious\",description:\"Keep spending under 80% of income\",icon:\"📊\",condition:i=>i.monthlySpendingRatio<=.8},{id:\"budget_master\",name:\"Budget Master\",description:\"Keep spending under 70% of income\",icon:\"👑\",condition:i=>i.monthlySpendingRatio<=.7},{id:\"frugal_champion\",name:\"Frugal Champion\",description:\"Keep spending under 50% of income\",icon:\"🌟\",condition:i=>i.monthlySpendingRatio<=.5},{id:\"stay_notified\",name:\"Stay Notified\",description:\"Enable notifications\",icon:\"🔔\",condition:i=>i.notificationsEnabled===!0},{id:\"ai_curious\",name:\"AI Curious\",description:\"Chat with AI Guru for the first time\",icon:\"🤖\",condition:i=>i.aiInteractions>=1},{id:\"ai_enthusiast\",name:\"AI Enthusiast\",description:\"Chat with AI Guru 10 times\",icon:\"🧠\",condition:i=>i.aiInteractions>=10},{id:\"profile_complete\",name:\"Profile Complete\",description:\"Add your name and photo\",icon:\"👤\",condition:i=>i.profileComplete===!0},{id:\"account_organizer\",name:\"Account Organizer\",description:\"Create 3 or more accounts\",icon:\"🏦\",condition:i=>i.totalAccounts>=3}];function L1(i,l){const o=[];return Hu.forEach(u=>{!l.includes(u.id)&&u.condition(i)&&o.push(u.id)}),o}function cp(i){return Hu.find(l=>l.id===i)}function U1(){return Hu}const I1=(i,l)=>{const{accounts:o,goals:u,emergencyFundAmount:d,liabilities:h,debts:g,settings:N,recurringTransactions:E,setSettings:S}=i,p=x.useRef({accounts:o,goals:u,emergencyFundAmount:d,liabilities:h,debts:g,settings:N,recurringTransactions:E,expenses:i.expenses});x.useEffect(()=>{p.current={accounts:o,goals:u,emergencyFundAmount:d,liabilities:h,debts:g,settings:N,recurringTransactions:E,expenses:i.expenses}},[o,u,d,h,g,N,E,i.expenses]);const f=x.useRef(l);x.useEffect(()=>{f.current=l},[l]);const w=x.useCallback(()=>{const{addNotifications:T}=f.current,C=new Date;C.setHours(0,0,0,0);const{accounts:M,goals:y,emergencyFundAmount:L,liabilities:z,debts:j}=p.current,G=M.reduce((B,J)=>B+(J.type===\"bank\"||J.type===\"cash\"?J.balance:0),0),ee=y.reduce((B,J)=>B+J.currentAmount,0)+L,Z=Math.max(0,G-ee),_=[];if(z.forEach(B=>{const J=new Date(B.startDate),ne=new Date(C.getFullYear(),C.getMonth(),J.getDate());ne<C&&ne.setMonth(ne.getMonth()+1),Math.ceil((ne.getTime()-C.getTime())/(1e3*60*60*24))<=10&&_.push({name:B.name,amount:B.emiAmount,dueDate:ne,type:\"EMI\"})}),j.filter(B=>B.status!==\"settled\").forEach(B=>{if(B.dueDate){const J=new Date(B.dueDate),ne=Math.ceil((J.getTime()-C.getTime())/(1e3*60*60*24));ne<=10&&ne>=-30&&_.push({name:`Debt: ${B.personName}`,amount:B.amount,dueDate:J,type:\"Debt\"})}}),_.length>0){const B=_.reduce((J,ne)=>J+ne.amount,0);B>Z&&T({id:`smart_due_liquidity_${C.toISOString().split(\"T\")[0]}`,type:\"alert\",priority:\"high\",category:\"reminders\",title:\"Liquidity Warning\",message:`You have ₹${B.toLocaleString()} in dues within 10 days, but only ₹${Z.toLocaleString()} available.`,timestamp:new Date,read:!1})}},[]),A=x.useCallback(()=>{const{addNotifications:T}=f.current,{expenses:C,goals:M,emergencyFundAmount:y,debts:L,accounts:z,recurringTransactions:j,settings:G}=p.current,ee={totalExpenses:C.length,totalSavings:M.reduce((_,B)=>_+B.currentAmount,0),emergencyFund:y,debtsSettled:L.filter(_=>_.status===\"settled\").length,accountsCount:z.length,recurringCount:j.length},Z=L1(ee,G.unlockedAchievements||[]);Z.length>0&&(Z.forEach(_=>{const B=cp(_);B&&T({id:`achievement_${_}_${Date.now()}`,type:\"achievement\",priority:\"high\",category:\"system\",title:\"New Achievement!\",message:`You've unlocked: ${B.name}`,timestamp:new Date,read:!1,achievementId:_})}),S(_=>({..._,unlockedAchievements:[..._.unlockedAchievements||[],...Z]})))},[S]);return x.useMemo(()=>({checkSmartDues:w,checkForAchievements:A}),[w,A])},B1=(i,l)=>{const{userId:o,setSettings:u,setExpenses:d,setIncomes:h,setDebts:g,setGoals:N,setAccounts:E,setInvestments:S,setLiabilities:p,setNotifications:f,setEmergencyFundAmount:w,setRecurringTransactions:A,setRememberedMobile:T,setPendingMobile:C,setIsRememberedUser:M,setDeletionDate:y,setIsLoading:L}=i,z=x.useRef(l);x.useEffect(()=>{z.current=l},[l]);const j=x.useCallback(async()=>{const{applyTheme:G,fetchFromApi:ee,purgeAllData:Z,runCategorizationMigration:_}=z.current;L(!0);try{const J=localStorage.getItem(Oe.SETTINGS);if(J){const q=JSON.parse(J);u(q),G(q.theme)}const ne=localStorage.getItem(Oe.EXPENSES);ne&&d(JSON.parse(ne));const F=localStorage.getItem(Oe.INCOMES);F&&h(JSON.parse(F));const oe=localStorage.getItem(Oe.DEBTS);oe&&g(JSON.parse(oe));const ge=localStorage.getItem(Oe.GOALS);ge&&N(JSON.parse(ge));const O=localStorage.getItem(Oe.ACCOUNTS);O&&E(JSON.parse(O));const k=localStorage.getItem(Oe.INVESTMENTS);k&&S(JSON.parse(k));const U=localStorage.getItem(Oe.LIABILITIES);U&&p(JSON.parse(U));const Q=localStorage.getItem(Oe.NOTIFICATIONS);if(Q){const Y=JSON.parse(Q).filter((V,te,me)=>me.findIndex(ie=>ie.id===V.id||ie.message===V.message&&ie.type===V.type)===te);f(Y.slice(0,100))}const ae=localStorage.getItem(Oe.EMERGENCY_FUND);ae&&w(JSON.parse(ae));const v=localStorage.getItem(Oe.RECURRING);v&&A(JSON.parse(v));const D=localStorage.getItem(Oe.REMEMBERED_MOBILE);D&&(T(D),C(D),M(!0));const W=localStorage.getItem(Oe.DELETION_SCHEDULE);if(W){const q=new Date(W).getTime();new Date().getTime()>=q?Z():y(W)}}catch(J){console.error(\"Error loading local data:\",J)}await ee(),!localStorage.getItem(\"finhub_subscription_migration_v3\")&&o&&(_(),localStorage.setItem(\"finhub_subscription_migration_v3\",\"true\")),L(!1)},[o,u,d,h,g,N,E,S,p,f,w,A,T,C,M,y,L]);return x.useMemo(()=>({loadInitialData:j}),[j])},q1=(i,l)=>{const{accounts:o,goals:u,setEmergencyFundAmount:d}=i,h=x.useRef({accounts:o,goals:u});x.useEffect(()=>{h.current={accounts:o,goals:u}},[o,u]);const g=x.useRef(l);x.useEffect(()=>{g.current=l},[l]);const[N,E]=x.useState(!1),[S,p]=x.useState(\"goal\"),f=x.useCallback(M=>{p(M),E(!0)},[]),w=x.useCallback(()=>{E(!1)},[]),A=x.useCallback(async(M,y)=>{const{updateAccount:L}=g.current,{accounts:z}=h.current,j=z.find(G=>G.id===M);j&&await L(M,{balance:j.balance-y})},[]),T=x.useCallback(async M=>{try{const{updateGoal:y}=g.current;if(await A(M.accountId,M.amount),M.destinationType===\"goal\"){const{goals:L}=h.current,z=L.find(j=>j.id===M.destinationId);z&&await y(M.destinationId,{currentAmount:z.currentAmount+M.amount})}else d(L=>L+M.amount);ce.success(\"Funds allocated successfully!\"),w()}catch(y){console.error(\"Fund allocation failed\",y),ce.error(\"Allocation failed\")}},[A,d,w]),C=x.useCallback(async(M,y,L)=>{try{const{updateAccount:z}=g.current,{accounts:j}=h.current,G=j.find(Z=>Z.id===M),ee=j.find(Z=>Z.id===y);G&&ee&&(await z(M,{balance:G.balance-L}),await z(y,{balance:ee.balance+L}),ce.success(\"Transfer complete\"))}catch(z){console.error(\"Transfer failed\",z),ce.error(\"Transfer failed\")}},[]);return x.useMemo(()=>({isFundAllocationOpen:N,fundAllocationType:S,openFundAllocation:f,closeFundAllocation:w,performFundAllocation:T,deductFromAccount:A,transferFunds:C}),[N,S,f,w,T,A,C])},up=x.createContext(void 0),ai=()=>{const i=x.useContext(up);if(!i)throw new Error(\"useFinance must be used within a FinanceProvider\");return i},H1=({children:i})=>{const l=Iv(),{applyTheme:o}=h1(),{addNotifications:u}=p1(l.setNotifications),d=f1(),h=d.currentUser?.id||\"demo-user-001\",g=x.useMemo(()=>({...l,...d,userId:h}),[l,d,h]),N=b1(g),E=N1(g),S=x.useMemo(()=>({...N,...E,applyTheme:o,addNotifications:u}),[N,E,o,u]),p=S1(g,S),f=C1(g,{...S,...p}),w=E1(g,S),A=x.useMemo(()=>({...S,...p,...f,...w}),[S,p,f,w]),T=k1(g,A),C=T1(g,A),M=D1(g,A),y=x.useMemo(()=>({...A,...T,...C,...M}),[A,T,C,M]),L=z1(g,y),z=q1(g,y),j=I1(g,{...y,...L}),G=B1(g,{...y,...L});m1(l),x.useEffect(()=>{d.authStatus===\"authenticated\"&&G.loadInitialData()},[d.authStatus,G]),x.useEffect(()=>{const Z=setInterval(()=>{d.authStatus===\"authenticated\"&&(j.checkSmartDues(),j.checkForAchievements())},36e5);return()=>clearInterval(Z)},[d.authStatus,j]),x.useEffect(()=>{if(d.authStatus===\"authenticated\"){const Z=setTimeout(()=>{Pi.backfillAll(h).catch(console.error)},5e3);return()=>clearTimeout(Z)}},[d.authStatus,h]),x.useEffect(()=>{let Z;const _=()=>{Z&&clearTimeout(Z),d.authStatus===\"authenticated\"&&(Z=setTimeout(()=>{d.logout()},12e5))};return window.addEventListener(\"mousemove\",_),window.addEventListener(\"keypress\",_),_(),()=>{window.removeEventListener(\"mousemove\",_),window.removeEventListener(\"keypress\",_),Z&&clearTimeout(Z)}},[d.authStatus,d]);const ee=x.useMemo(()=>({...l,...d,...y,...L,...z,...j,...G,userId:h,currency:l.settings.currency,clearAllData:L.purgeAllData,createRecurring:E.createRecurringTransaction,processRecurringTransactions:async()=>{await Pi.backfillAll(h)}}),[l,d,y,L,z,j,G,h,E]);return n.jsx(up.Provider,{value:ee,children:i})};function Ne(i,l=\"USD\",o=!1){const u=typeof i==\"string\"?parseFloat(i.replace(/,/g,\"\")):i;if(isNaN(u))return\"\";const d=l===\"INR\"?\"en-IN\":\"en-US\",h={style:\"currency\",currency:l,notation:o?\"compact\":\"standard\",maximumFractionDigits:o?1:2};try{return new Intl.NumberFormat(d,h).format(u)}catch{return new Intl.NumberFormat(d,{...h,style:\"decimal\"}).format(u)}}function Gu(i,l=\"en-IN\"){const o=typeof i==\"string\"?parseFloat(i.replace(/,/g,\"\")):i;return isNaN(o)?\"\":new Intl.NumberFormat(l).format(o)}const ou=Gu;function G1(i){return i===\"\"||i===\"-\"?!0:/^-?\\d*\\.?\\d*$/.test(i)}function c0(i){return i.replace(/,/g,\"\")}function V1(i){if(i<=0)return\"0 months\";const l=Math.floor(i/12),o=i%12,u=[];return l>0&&u.push(`${l} ${l===1?\"year\":\"years\"}`),(o>0||l===0)&&u.push(`${o} ${o===1?\"month\":\"months\"}`),u.join(\", \")}function u0(i,l=\"INR\"){const o=Math.abs(i),u=i<0?\"-\":\"\";if(l===\"INR\"){if(o>=1e7)return`${u}${(o/1e7).toFixed(2).replace(/\\.00$/,\"\")}C`;if(o>=1e5)return`${u}${(o/1e5).toFixed(2).replace(/\\.00$/,\"\")}L`;if(o>=1e4)return`${u}${(o/1e3).toFixed(1).replace(/\\.0$/,\"\")}K`}else{if(o>=1e9)return`${u}${(o/1e9).toFixed(2).replace(/\\.00$/,\"\")}B`;if(o>=1e6)return`${u}${(o/1e6).toFixed(2).replace(/\\.00$/,\"\")}M`;if(o>=1e4)return`${u}${(o/1e3).toFixed(1).replace(/\\.0$/,\"\")}K`}return u+Gu(o,l===\"INR\"?\"en-IN\":\"en-US\")}function LN(i,l=\"INR\"){const o=Math.abs(i),u=i<0?\"-\":\"\",d=(h,g)=>{let N=2;return h>=100?N=0:h>=10&&(N=1),`${u}${h.toFixed(N).replace(/\\.0+$/,\"\")}${g}`};if(l===\"INR\"){if(o>=1e7)return d(o/1e7,\"Cr\");if(o>=1e5)return d(o/1e5,\"L\");if(o>=1e3)return d(o/1e3,\"K\")}else{if(o>=1e9)return d(o/1e9,\"B\");if(o>=1e6)return d(o/1e6,\"M\");if(o>=1e3)return d(o/1e3,\"K\")}return u+Gu(o,l===\"INR\"?\"en-IN\":\"en-US\")}const Vu=x.createContext({});function Fu(i){const l=x.useRef(null);return l.current===null&&(l.current=i()),l.current}const dp=typeof window<\"u\",fp=dp?x.useLayoutEffect:x.useEffect,zr=x.createContext(null),Yu=x.createContext({transformPagePoint:i=>i,isStatic:!1,reducedMotion:\"never\"});function d0(i,l){if(typeof i==\"function\")return i(l);i!=null&&(i.current=l)}function F1(...i){return l=>{let o=!1;const u=i.map(d=>{const h=d0(d,l);return!o&&typeof h==\"function\"&&(o=!0),h});if(o)return()=>{for(let d=0;d<u.length;d++){const h=u[d];typeof h==\"function\"?h():d0(i[d],null)}}}}function Y1(...i){return x.useCallback(F1(...i),i)}class $1 extends x.Component{getSnapshotBeforeUpdate(l){const o=this.props.childRef.current;if(o&&l.isPresent&&!this.props.isPresent){const u=o.offsetParent,d=zy(u)&&u.offsetWidth||0,h=this.props.sizeRef.current;h.height=o.offsetHeight||0,h.width=o.offsetWidth||0,h.top=o.offsetTop,h.left=o.offsetLeft,h.right=d-h.width-h.left}return null}componentDidUpdate(){}render(){return this.props.children}}function X1({children:i,isPresent:l,anchorX:o,root:u}){const d=x.useId(),h=x.useRef(null),g=x.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:N}=x.useContext(Yu),E=i.props?.ref??i?.ref,S=Y1(h,E);return x.useInsertionEffect(()=>{const{width:p,height:f,top:w,left:A,right:T}=g.current;if(l||!h.current||!p||!f)return;const C=o===\"left\"?`left: ${A}`:`right: ${T}`;h.current.dataset.motionPopId=d;const M=document.createElement(\"style\");N&&(M.nonce=N);const y=u??document.head;return y.appendChild(M),M.sheet&&M.sheet.insertRule(`"
      },
      {
        "file": "android\\app\\src\\main\\assets\\public\\assets\\index-i0Euu4OB.js",
        "line": 11,
        "snippet": "`);try{v=new Worker(URL.createObjectURL(new Blob([Y])))}catch(V){return typeof console<\"u\"&&typeof console.warn==\"function\"&&console.warn(\"🎊 Could not load worker\",V),null}q(v)}return v}})(),A={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:[\"square\",\"circle\"],zIndex:100,colors:[\"#26ccff\",\"#a25afd\",\"#ff5e7e\",\"#88ff5a\",\"#fcff42\",\"#ffa62d\",\"#ff36ff\"],disableForReducedMotion:!1,scalar:1};function T(v,D){return D?D(v):v}function C(v){return v!=null}function M(v,D,W){return T(v&&C(v[D])?v[D]:A[D],W)}function y(v){return v<0?0:Math.floor(v)}function L(v,D){return Math.floor(Math.random()*(D-v))+v}function z(v){return parseInt(v,16)}function j(v){return v.map(G)}function G(v){var D=String(v).replace(/[^0-9a-f]/gi,\"\");return D.length<6&&(D=D[0]+D[0]+D[1]+D[1]+D[2]+D[2]),{r:z(D.substring(0,2)),g:z(D.substring(2,4)),b:z(D.substring(4,6))}}function ee(v){var D=M(v,\"origin\",Object);return D.x=M(D,\"x\",Number),D.y=M(D,\"y\",Number),D}function Z(v){v.width=document.documentElement.clientWidth,v.height=document.documentElement.clientHeight}function _(v){var D=v.getBoundingClientRect();v.width=D.width,v.height=D.height}function B(v){var D=document.createElement(\"canvas\");return D.style.position=\"fixed\",D.style.top=\"0px\",D.style.left=\"0px\",D.style.pointerEvents=\"none\",D.style.zIndex=v,D}function J(v,D,W,q,Y,V,te,me,ie){v.save(),v.translate(D,W),v.rotate(V),v.scale(q,Y),v.arc(0,0,1,te,me,ie),v.restore()}function ne(v){var D=v.angle*(Math.PI/180),W=v.spread*(Math.PI/180);return{x:v.x,y:v.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:v.startVelocity*.5+Math.random()*v.startVelocity,angle2D:-D+(.5*W-Math.random()*W),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:v.color,shape:v.shape,tick:0,totalTicks:v.ticks,decay:v.decay,drift:v.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:v.gravity*3,ovalScalar:.6,scalar:v.scalar,flat:v.flat}}function F(v,D){D.x+=Math.cos(D.angle2D)*D.velocity+D.drift,D.y+=Math.sin(D.angle2D)*D.velocity+D.gravity,D.velocity*=D.decay,D.flat?(D.wobble=0,D.wobbleX=D.x+10*D.scalar,D.wobbleY=D.y+10*D.scalar,D.tiltSin=0,D.tiltCos=0,D.random=1):(D.wobble+=D.wobbleSpeed,D.wobbleX=D.x+10*D.scalar*Math.cos(D.wobble),D.wobbleY=D.y+10*D.scalar*Math.sin(D.wobble),D.tiltAngle+=.1,D.tiltSin=Math.sin(D.tiltAngle),D.tiltCos=Math.cos(D.tiltAngle),D.random=Math.random()+2);var W=D.tick++/D.totalTicks,q=D.x+D.random*D.tiltCos,Y=D.y+D.random*D.tiltSin,V=D.wobbleX+D.random*D.tiltCos,te=D.wobbleY+D.random*D.tiltSin;if(v.fillStyle=\"rgba(\"+D.color.r+\", \"+D.color.g+\", \"+D.color.b+\", \"+(1-W)+\")\",v.beginPath(),g&&D.shape.type===\"path\"&&typeof D.shape.path==\"string\"&&Array.isArray(D.shape.matrix))v.fill(U(D.shape.path,D.shape.matrix,D.x,D.y,Math.abs(V-q)*.1,Math.abs(te-Y)*.1,Math.PI/10*D.wobble));else if(D.shape.type===\"bitmap\"){var me=Math.PI/10*D.wobble,ie=Math.abs(V-q)*.1,le=Math.abs(te-Y)*.1,je=D.shape.bitmap.width*D.scalar,Ae=D.shape.bitmap.height*D.scalar,pe=new DOMMatrix([Math.cos(me)*ie,Math.sin(me)*ie,-Math.sin(me)*le,Math.cos(me)*le,D.x,D.y]);pe.multiplySelf(new DOMMatrix(D.shape.matrix));var ve=v.createPattern(p.transform(D.shape.bitmap),\"no-repeat\");ve.setTransform(pe),v.globalAlpha=1-W,v.fillStyle=ve,v.fillRect(D.x-je/2,D.y-Ae/2,je,Ae),v.globalAlpha=1}else if(D.shape===\"circle\")v.ellipse?v.ellipse(D.x,D.y,Math.abs(V-q)*D.ovalScalar,Math.abs(te-Y)*D.ovalScalar,Math.PI/10*D.wobble,0,2*Math.PI):J(v,D.x,D.y,Math.abs(V-q)*D.ovalScalar,Math.abs(te-Y)*D.ovalScalar,Math.PI/10*D.wobble,0,2*Math.PI);else if(D.shape===\"star\")for(var xe=Math.PI/2*3,Ke=4*D.scalar,We=8*D.scalar,Ue=D.x,it=D.y,Ve=5,ke=Math.PI/Ve;Ve--;)Ue=D.x+Math.cos(xe)*We,it=D.y+Math.sin(xe)*We,v.lineTo(Ue,it),xe+=ke,Ue=D.x+Math.cos(xe)*Ke,it=D.y+Math.sin(xe)*Ke,v.lineTo(Ue,it),xe+=ke;else v.moveTo(Math.floor(D.x),Math.floor(D.y)),v.lineTo(Math.floor(D.wobbleX),Math.floor(Y)),v.lineTo(Math.floor(V),Math.floor(te)),v.lineTo(Math.floor(q),Math.floor(D.wobbleY));return v.closePath(),v.fill(),D.tick<D.totalTicks}function oe(v,D,W,q,Y){var V=D.slice(),te=v.getContext(\"2d\"),me,ie,le=S(function(je){function Ae(){me=ie=null,te.clearRect(0,0,q.width,q.height),p.clear(),Y(),je()}function pe(){u&&!(q.width===d.width&&q.height===d.height)&&(q.width=v.width=d.width,q.height=v.height=d.height),!q.width&&!q.height&&(W(v),q.width=v.width,q.height=v.height),te.clearRect(0,0,q.width,q.height),V=V.filter(function(ve){return F(te,ve)}),V.length?me=f.frame(pe):Ae()}me=f.frame(pe),ie=Ae});return{addFettis:function(je){return V=V.concat(je),le},canvas:v,promise:le,reset:function(){me&&f.cancel(me),ie&&ie()}}}function ge(v,D){var W=!v,q=!!M(D||{},\"resize\"),Y=!1,V=M(D,\"disableForReducedMotion\",Boolean),te=h&&!!M(D||{},\"useWorker\"),me=te?w():null,ie=W?Z:_,le=v&&me?!!v.__confetti_initialized:!1,je=typeof matchMedia==\"function\"&&matchMedia(\"(prefers-reduced-motion)\").matches,Ae;function pe(xe,Ke,We){for(var Ue=M(xe,\"particleCount\",y),it=M(xe,\"angle\",Number),Ve=M(xe,\"spread\",Number),ke=M(xe,\"startVelocity\",Number),Ft=M(xe,\"decay\",Number),fe=M(xe,\"gravity\",Number),Se=M(xe,\"drift\",Number),ze=M(xe,\"colors\",j),lt=M(xe,\"ticks\",Number),mt=M(xe,\"shapes\"),_a=M(xe,\"scalar\"),ga=!!M(xe,\"flat\"),Ra=ee(xe),Kt=Ue,Oa=[],ea=v.width*Ra.x,zt=v.height*Ra.y;Kt--;)Oa.push(ne({x:ea,y:zt,angle:it,spread:Ve,startVelocity:ke,color:ze[Kt%ze.length],shape:mt[L(0,mt.length)],ticks:lt,decay:Ft,gravity:fe,drift:Se,scalar:_a,flat:ga}));return Ae?Ae.addFettis(Oa):(Ae=oe(v,Oa,ie,Ke,We),Ae.promise)}function ve(xe){var Ke=V||M(xe,\"disableForReducedMotion\",Boolean),We=M(xe,\"zIndex\",Number);if(Ke&&je)return S(function(ke){ke()});W&&Ae?v=Ae.canvas:W&&!v&&(v=B(We),document.body.appendChild(v)),q&&!le&&ie(v);var Ue={width:v.width,height:v.height};me&&!le&&me.init(v),le=!0,me&&(v.__confetti_initialized=!0);function it(){if(me){var ke={getBoundingClientRect:function(){if(!W)return v.getBoundingClientRect()}};ie(ke),me.postMessage({resize:{width:ke.width,height:ke.height}});return}Ue.width=Ue.height=null}function Ve(){Ae=null,q&&(Y=!1,l.removeEventListener(\"resize\",it)),W&&v&&(document.body.contains(v)&&document.body.removeChild(v),v=null,le=!1)}return q&&!Y&&(Y=!0,l.addEventListener(\"resize\",it,!1)),me?me.fire(xe,Ue,Ve):pe(xe,Ue,Ve)}return ve.reset=function(){me&&me.reset(),Ae&&Ae.reset()},ve}var O;function k(){return O||(O=ge(null,{useWorker:!0,resize:!0})),O}function U(v,D,W,q,Y,V,te){var me=new Path2D(v),ie=new Path2D;ie.addPath(me,new DOMMatrix(D));var le=new Path2D;return le.addPath(ie,new DOMMatrix([Math.cos(te)*Y,Math.sin(te)*Y,-Math.sin(te)*V,Math.cos(te)*V,W,q])),le}function Q(v){if(!g)throw new Error(\"path confetti are not supported in this browser\");var D,W;typeof v==\"string\"?D=v:(D=v.path,W=v.matrix);var q=new Path2D(D),Y=document.createElement(\"canvas\"),V=Y.getContext(\"2d\");if(!W){for(var te=1e3,me=te,ie=te,le=0,je=0,Ae,pe,ve=0;ve<te;ve+=2)for(var xe=0;xe<te;xe+=2)V.isPointInPath(q,ve,xe,\"nonzero\")&&(me=Math.min(me,ve),ie=Math.min(ie,xe),le=Math.max(le,ve),je=Math.max(je,xe));Ae=le-me,pe=je-ie;var Ke=10,We=Math.min(Ke/Ae,Ke/pe);W=[We,0,0,We,-Math.round(Ae/2+me)*We,-Math.round(pe/2+ie)*We]}return{type:\"path\",path:D,matrix:W}}function ae(v){var D,W=1,q=\"#000000\",Y='\"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\", \"EmojiOne Color\", \"Android Emoji\", \"Twemoji Mozilla\", \"system emoji\", sans-serif';typeof v==\"string\"?D=v:(D=v.text,W=\"scalar\"in v?v.scalar:W,Y=\"fontFamily\"in v?v.fontFamily:Y,q=\"color\"in v?v.color:q);var V=10*W,te=\"\"+V+\"px \"+Y,me=new OffscreenCanvas(V,V),ie=me.getContext(\"2d\");ie.font=te;var le=ie.measureText(D),je=Math.ceil(le.actualBoundingBoxRight+le.actualBoundingBoxLeft),Ae=Math.ceil(le.actualBoundingBoxAscent+le.actualBoundingBoxDescent),pe=2,ve=le.actualBoundingBoxLeft+pe,xe=le.actualBoundingBoxAscent+pe;je+=pe+pe,Ae+=pe+pe,me=new OffscreenCanvas(je,Ae),ie=me.getContext(\"2d\"),ie.font=te,ie.fillStyle=q,ie.fillText(D,ve,xe);var Ke=1/W;return{type:\"bitmap\",bitmap:me.transferToImageBitmap(),matrix:[Ke,0,0,Ke,-je*Ke/2,-Ae*Ke/2]}}o.exports=function(){return k().apply(this,arguments)},o.exports.reset=function(){k().reset()},o.exports.create=ge,o.exports.shapeFromPath=Q,o.exports.shapeFromText=ae})((function(){return typeof window<\"u\"?window:typeof self<\"u\"?self:this||{}})(),Bu,!1);const Or=Bu.exports;Bu.exports.create;const S1=(i,l)=>{const{userId:o,goals:u,setGoals:d,recurringTransactions:h}=i,g=x.useRef({goals:u,recurringTransactions:h});x.useEffect(()=>{g.current={goals:u,recurringTransactions:h}},[u,h]);const N=x.useRef(l);x.useEffect(()=>{N.current=l},[l]);const E=x.useCallback(async f=>{try{const w=await _e.createGoal(o,f);if(w.success){if(d(A=>[...A,w.goal]),f.monthly_contribution>0){const{createRecurringTransaction:A}=N.current;await A({type:\"expense\",description:`Goal Contribution: ${w.goal.name}`,amount:f.monthly_contribution,category:\"Transfer\",accountId:f.accountId||\"none\",frequency:\"monthly\",startDate:f.startDate||w.goal.createdAt.split(\"T\")[0],tags:[\"goal\",\"contribution\",w.goal.name.toLowerCase()],goalId:w.goal.id})}ce.success(\"Goal created\")}}catch{const w={id:`temp_${Date.now()}`,...f,createdAt:new Date().toISOString()};d(A=>[...A,w]),ce.warning(\"Created in offline mode\")}},[o,d]),S=x.useCallback(async(f,w)=>{try{const A=await _e.updateGoal(o,f,w);if(A.success){const{goals:T,recurringTransactions:C}=g.current,M=T.find(y=>y.id===f);if(M){const{createRecurringTransaction:y,updateRecurringTransaction:L,deleteRecurringTransaction:z}=N.current;if((A.goal.monthly_contribution||0)>0){const j=C.find(G=>G.goalId===f);j?await L(j.id,{amount:A.goal.monthly_contribution||0,description:`Goal Contribution: ${A.goal.name}`}):await y({type:\"expense\",description:`Goal Contribution: ${A.goal.name}`,amount:A.goal.monthly_contribution||0,category:\"Transfer\",accountId:A.goal.accountId||\"none\",frequency:\"monthly\",startDate:A.goal.startDate||M.createdAt?.split(\"T\")[0]||new Date().toISOString().split(\"T\")[0],tags:[\"goal\",\"contribution\",A.goal.name.toLowerCase()],goalId:A.goal.id})}else if(M.monthly_contribution&&M.monthly_contribution>0){const j=C.find(G=>G.goalId===f);j&&await z(j.id)}}d(y=>y.map(L=>L.id===f?A.goal:L)),A.goal.currentAmount>=A.goal.targetAmount?(ce.success(`🎉 Goal \"${A.goal.name}\" completed!`),Or({particleCount:200,spread:120,origin:{y:.5}})):ce.success(\"Goal updated\")}}catch{d(A=>A.map(T=>T.id===f?{...T,...w}:T)),ce.warning(\"Updated locally\")}},[o,d]),p=x.useCallback(async f=>{try{(await _e.deleteGoal(o,f)).success&&(d(A=>A.filter(T=>T.id!==f)),ce.success(\"Goal deleted\"))}catch{d(w=>w.filter(A=>A.id!==f)),ce.warning(\"Deleted locally\")}},[o,d]);return x.useMemo(()=>({createGoal:E,updateGoal:S,deleteGoal:p}),[E,S,p])},C1=(i,l)=>{const{userId:o,investments:u,setInvestments:d,accounts:h,setExpenses:g,recurringTransactions:N}=i,E=x.useRef({investments:u,accounts:h,recurringTransactions:N});x.useEffect(()=>{E.current={investments:u,accounts:h,recurringTransactions:N}},[u,h,N]);const S=x.useRef(l);x.useEffect(()=>{S.current=l},[l]);const p=x.useCallback(async(A,T)=>{try{const C=await _e.createInvestment(o,A);if(C.success){if(d(M=>[...M,C.investment]),T&&T!==\"none\"){const{updateAccount:M}=S.current,{accounts:y}=E.current,L=y.find(z=>z.id===T);if(L){const z=A.buyPrice*A.quantity;await M(T,{balance:L.balance-z});const j={description:`Asset Purchase: ${A.symbol} (${A.quantity} units)`,amount:z,category:\"Transfer\",date:A.purchaseDate||new Date().toISOString().split(\"T\")[0],tags:[\"investment\",\"principal\",A.symbol],accountId:T},G=await _e.createExpense(o,j);G.success&&g(ee=>[...ee,G.expense])}}if(C.investment.type===\"sip\"){const{createRecurringTransaction:M}=S.current;await M({type:\"expense\",description:`SIP: ${C.investment.symbol} (${C.investment.name})`,amount:C.investment.buyPrice*C.investment.quantity,category:\"Investment\",accountId:T||\"none\",frequency:\"monthly\",startDate:C.investment.purchaseDate,tags:[\"sip\",\"investment\",C.investment.symbol.toLowerCase()],investmentId:C.investment.id})}ce.success(\"Investment created\")}}catch{const C={id:`temp_${Date.now()}`,...A,createdAt:new Date().toISOString()};d(M=>[...M,C]),ce.warning(\"Created locally\")}},[o,g,d]),f=x.useCallback(async(A,T)=>{try{const C=await _e.updateInvestment(o,A,T);if(C.success){const{investments:M,recurringTransactions:y}=E.current,L=M.find(z=>z.id===A);if(L){const{updateRecurringTransaction:z,createRecurringTransaction:j,deleteRecurringTransaction:G}=S.current;if(C.investment.type===\"sip\"){const ee=y.find(Z=>Z.investmentId===A);ee?await z(ee.id,{amount:C.investment.buyPrice*C.investment.quantity,description:`SIP: ${C.investment.symbol} (${C.investment.name})`}):await j({type:\"expense\",description:`SIP: ${C.investment.symbol} (${C.investment.name})`,amount:C.investment.buyPrice*C.investment.quantity,category:\"Investment\",accountId:C.investment.accountId||\"none\",frequency:\"monthly\",startDate:C.investment.purchaseDate,tags:[\"sip\",\"investment\",C.investment.symbol.toLowerCase()],investmentId:C.investment.id})}else if(L.type===\"sip\"){const ee=y.find(Z=>Z.investmentId===A);ee&&await G(ee.id)}}d(z=>z.map(j=>j.id===A?C.investment:j)),ce.success(\"Investment updated\")}}catch{d(C=>C.map(M=>M.id===A?{...M,...T}:M)),ce.warning(\"Updated locally\")}},[o,d]),w=x.useCallback(async A=>{try{(await _e.deleteInvestment(o,A)).success&&(d(C=>C.filter(M=>M.id!==A)),ce.success(\"Investment deleted\"))}catch{d(T=>T.filter(C=>C.id!==A)),ce.warning(\"Deleted locally\")}},[o,d]);return x.useMemo(()=>({createInvestment:p,updateInvestment:f,deleteInvestment:w}),[p,f,w])},E1=(i,l)=>{const{userId:o,liabilities:u,setLiabilities:d,recurringTransactions:h}=i,g=x.useRef({liabilities:u,recurringTransactions:h});x.useEffect(()=>{g.current={liabilities:u,recurringTransactions:h}},[u,h]);const N=x.useRef(l);x.useEffect(()=>{N.current=l},[l]);const E=x.useCallback(async f=>{try{const w=await _e.createLiability(o,f);if(w.success&&(d(A=>[...A,w.liability]),ce.success(\"Liability created\"),w.liability.emiAmount>0)){const{createRecurringTransaction:A}=N.current;await A({type:\"expense\",description:`EMI: ${w.liability.name}`,amount:w.liability.emiAmount,category:\"EMI\",accountId:w.liability.accountId||\"none\",frequency:\"monthly\",startDate:w.liability.startDate,tags:[\"emi\",\"liability\",w.liability.name.toLowerCase()],liabilityId:w.liability.id})}}catch{const w={id:`temp_${Date.now()}`,...f,createdAt:new Date().toISOString()};d(A=>[...A,w]),ce.warning(\"Created locally\")}},[o,d]),S=x.useCallback(async(f,w)=>{try{const A=await _e.updateLiability(o,f,w);if(A.success){const{liabilities:T,recurringTransactions:C}=g.current,M=T.find(y=>y.id===f);if(M){const{createRecurringTransaction:y,updateRecurringTransaction:L,deleteRecurringTransaction:z}=N.current;if(A.liability.emiAmount>0){const j=C.find(G=>G.liabilityId===f);j?await L(j.id,{amount:A.liability.emiAmount,description:`EMI: ${A.liability.name}`}):await y({type:\"expense\",description:`EMI: ${A.liability.name}`,amount:A.liability.emiAmount,category:\"EMI\",accountId:A.liability.accountId||\"none\",frequency:\"monthly\",startDate:A.liability.startDate,tags:[\"emi\",\"liability\",A.liability.name.toLowerCase()],liabilityId:A.liability.id})}else if(M.emiAmount>0){const j=C.find(G=>G.liabilityId===f);j&&await z(j.id)}}d(y=>y.map(L=>L.id===f?A.liability:L)),ce.success(\"Liability updated\")}}catch{d(A=>A.map(T=>T.id===f?{...T,...w}:T)),ce.warning(\"Updated locally\")}},[o,d]),p=x.useCallback(async f=>{try{(await _e.deleteLiability(o,f)).success&&(d(A=>A.filter(T=>T.id!==f)),ce.success(\"Liability deleted\"))}catch{d(w=>w.filter(A=>A.id!==f)),ce.warning(\"Deleted locally\")}},[o,d]);return x.useMemo(()=>({createLiability:E,updateLiability:S,deleteLiability:p}),[E,S,p])},A1={netflix:\"Subscription\",spotify:\"Subscription\",google:\"Subscription\",apple:\"Subscription\",icloud:\"Subscription\",youtube:\"Subscription\",disney:\"Subscription\",hotstar:\"Subscription\",\"prime video\":\"Subscription\",\"prime membership\":\"Subscription\",\"amazon prime\":\"Subscription\",audible:\"Subscription\",kindle:\"Subscription\",hulu:\"Subscription\",hbomax:\"Subscription\",hbo:\"Subscription\",\"paramount+\":\"Subscription\",peacock:\"Subscription\",crunchyroll:\"Subscription\",chaisai:\"Subscription\",\"google play\":\"Subscription\",\"google one\":\"Subscription\",\"app store\":\"Subscription\",microsoft:\"Subscription\",\"office 365\":\"Subscription\",dropbox:\"Subscription\",zoom:\"Subscription\",canva:\"Subscription\",adobe:\"Subscription\",\"creative cloud\":\"Subscription\",jio:\"Subscription\",airtel:\"Subscription\",vodafone:\"Subscription\",idea:\"Subscription\",bsnl:\"Subscription\",\"vi \":\"Subscription\",broadband:\"Subscription\",isp:\"Subscription\",\"act fiber\":\"Subscription\",hathway:\"Subscription\",\"internet bill\":\"Subscription\",telecom:\"Subscription\",coffee:\"Food & Dining\",starbucks:\"Food & Dining\",cafe:\"Food & Dining\",restaurant:\"Food & Dining\",lunch:\"Food & Dining\",dinner:\"Food & Dining\",pizza:\"Food & Dining\",burger:\"Food & Dining\",mcdonalds:\"Food & Dining\",kfc:\"Food & Dining\",food:\"Food & Dining\",zomato:\"Food & Dining\",swiggy:\"Food & Dining\",beer:\"Food & Dining\",bar:\"Food & Dining\",uber:\"Transportation\",ola:\"Transportation\",cab:\"Transportation\",taxi:\"Transportation\",bus:\"Transportation\",train:\"Transportation\",metro:\"Transportation\",fuel:\"Transportation\",petrol:\"Transportation\",gas:\"Transportation\",parking:\"Transportation\",amazon:\"Shopping\",flipkart:\"Shopping\",clothes:\"Shopping\",zara:\"Shopping\",nike:\"Shopping\",shoes:\"Shopping\",mall:\"Shopping\",grocery:\"Groceries\",supermarket:\"Groceries\",vegetables:\"Groceries\",fruits:\"Groceries\",milk:\"Groceries\",electricity:\"Bills & Utilities\",water:\"Bills & Utilities\",\"gas bill\":\"Bills & Utilities\",rent:\"Bills & Utilities\",maintenance:\"Bills & Utilities\",movie:\"Entertainment\",cinema:\"Entertainment\",game:\"Entertainment\",steam:\"Entertainment\",playstation:\"Entertainment\",xbox:\"Entertainment\",doctor:\"Health & Wellbeing\",medical:\"Health & Wellbeing\",pharmacy:\"Health & Wellbeing\",medicine:\"Health & Wellbeing\",gym:\"Health & Wellbeing\",fitness:\"Health & Wellbeing\",hospital:\"Health & Wellbeing\",transfer:\"Transfer\",payment:\"Transfer\",\"cc bill\":\"Transfer\",internal:\"Transfer\",membership:\"Subscription\",subscription:\"Subscription\",recurring:\"Subscription\",premium:\"Subscription\",\"monthly bill\":\"Subscription\"},op=[{keywords:[\"netflix\"],displayName:\"Netflix Premium\",defaultAmount:649,category:\"Subscription\"},{keywords:[\"hotstar\",\"disney\"],displayName:\"Disney+ Hotstar\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"prime video\",\"amazon prime\"],displayName:\"Amazon Prime\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"hulu\"],displayName:\"Hulu\",defaultAmount:650,category:\"Subscription\"},{keywords:[\"youtube\",\"yt premium\"],displayName:\"YouTube Premium\",defaultAmount:129,category:\"Subscription\"},{keywords:[\"sonyliv\"],displayName:\"SonyLIV\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"zee5\"],displayName:\"Zee5\",defaultAmount:100,category:\"Subscription\"},{keywords:[\"jiocinema\"],displayName:\"JioCinema Premium\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"apple tv\"],displayName:\"Apple TV+\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"spotify\"],displayName:\"Spotify Premium\",defaultAmount:119,category:\"Subscription\"},{keywords:[\"apple music\"],displayName:\"Apple Music\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"audible\"],displayName:\"Audible\",defaultAmount:199,category:\"Subscription\"},{keywords:[\"wynk\"],displayName:\"Wynk Music\",defaultAmount:49,category:\"Subscription\"},{keywords:[\"gaana\"],displayName:\"Gaana Plus\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"jiosaavn\"],displayName:\"JioSaavn Pro\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"google one\",\"google storage\"],displayName:\"Google One\",defaultAmount:130,category:\"Subscription\"},{keywords:[\"chatgpt\",\"openai\"],displayName:\"ChatGPT Plus\",defaultAmount:1999,category:\"Subscription\"},{keywords:[\"claude\",\"anthropic\"],displayName:\"Claude Pro\",defaultAmount:1999,category:\"Subscription\"},{keywords:[\"github\"],displayName:\"GitHub Copilot\",defaultAmount:830,category:\"Subscription\"},{keywords:[\"midjourney\"],displayName:\"Midjourney\",defaultAmount:830,category:\"Subscription\"},{keywords:[\"canva\"],displayName:\"Canva Pro\",defaultAmount:499,category:\"Subscription\"},{keywords:[\"adobe\",\"creative cloud\"],displayName:\"Adobe CC\",defaultAmount:2300,category:\"Subscription\"},{keywords:[\"jio\",\"myjio\"],displayName:\"Jio Mobile\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"airtel\"],displayName:\"Airtel Mobile\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"vi \",\"vodafone\"],displayName:\"Vi Mobile\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"act fiber\",\"act net\"],displayName:\"ACT Fibernet\",defaultAmount:820,category:\"Bills & Utilities\"},{keywords:[\"hathway\"],displayName:\"Hathway Broadband\",defaultAmount:600,category:\"Bills & Utilities\"}],Er=i=>{const l=i.toLowerCase();return op.some(o=>o.keywords.some(u=>l.includes(u)))},qu=i=>{const l=i.toLowerCase();for(const o of op)if(o.keywords.some(u=>l.includes(u))){const u=[\"subscription\",\"online\"];return{category:o.category,tags:u,suggestedAmount:o.defaultAmount,suggestedDescription:o.displayName}}for(const[o,u]of Object.entries(A1))if(l.includes(o)){const d=[];return l.includes(\"online\")&&d.push(\"online\"),l.includes(\"subscription\")&&d.push(\"subscription\"),{category:u,tags:d}}return null},k1=(i,l)=>{const{userId:o,expenses:u,setExpenses:d,accounts:h,goals:g,emergencyFundAmount:N,setEmergencyFundAmount:E,liabilities:S,setNotifications:p}=i,f=x.useRef({expenses:u,accounts:h,goals:g,emergencyFundAmount:N,liabilities:S});x.useEffect(()=>{f.current={expenses:u,accounts:h,goals:g,emergencyFundAmount:N,liabilities:S}},[u,h,g,N,S]);const w=x.useCallback(y=>{p(L=>{const z=Array.isArray(y)?y:[y],j=[...L];return z.forEach(G=>{j.some(ee=>ee.id===G.id)||j.unshift(G)}),j.slice(0,100)})},[p]),A=x.useRef(l);x.useEffect(()=>{A.current=l},[l]);const T=x.useCallback(async y=>{const{accounts:L,goals:z,emergencyFundAmount:j,liabilities:G}=f.current,{updateAccount:ee,updateGoal:Z,updateLiability:_,createRecurringTransaction:B}=A.current;try{const J=L.reduce((Q,ae)=>Q+(ae.type!==\"credit_card\"?ae.balance:0),0),ne=z.reduce((Q,ae)=>Q+ae.currentAmount,0)+j,F=G.reduce((Q,ae)=>Q+ae.emiAmount,0),oe=Math.max(0,J-ne-F),ge=y.amount;if(ge>oe){let ae=ge-oe;const v=[];z.forEach(q=>{const Y=q.type||\"growth\";let V=1;Y===\"stability\"&&(V=2),Y===\"protection\"&&(V=3),q.currentAmount>0&&v.push({id:q.id,type:\"goal\",currentAmount:q.currentAmount,priority:V,name:q.name})}),j>0&&v.push({id:\"emergency-fund\",type:\"emergency\",currentAmount:j,priority:3,name:\"Emergency Fund\"}),v.sort((q,Y)=>q.priority-Y.priority);const D=[],W=[];for(const q of v){if(ae<=0)break;const Y=Math.min(q.currentAmount,ae);ae-=Y,q.type===\"goal\"?(D.push(Z(q.id,{currentAmount:q.currentAmount-Y,status:\"leaking\"})),W.push({id:`leak_${q.id}_${new Date().toISOString().split(\"T\")[0]}`,type:\"alert\",priority:\"medium\",category:\"transactions\",title:\"Shadow Wallet Leakage\",message:`₹${Y} spent reduced your '${q.name}' reserve.`,timestamp:new Date,read:!1})):q.type===\"emergency\"&&(E(V=>V-Y),W.push({id:`leak_emergency_${new Date().toISOString().split(\"T\")[0]}`,type:\"alert\",priority:\"medium\",category:\"transactions\",title:\"Emergency Fund Alert\",message:`Warning: ₹${Y} withdrawn from Emergency Fund to cover spending.`,timestamp:new Date,read:!1}))}await Promise.all(D),W.length>0&&(w(W),W.forEach(q=>ce.error(q.title,{description:q.message})))}const O=L.find(Q=>Q.id===y.accountId),k={...y};if(O?.type===\"credit_card\"){const Q=O.serviceChargePercentage||0;Q>0&&(k.serviceChargeAmount=y.amount*Q/100);const ae=O.creditLimit||0,v=O.safeLimitPercentage||30,D=ae*v/100,q=Math.abs(O.balance)+y.amount;q>D&&ae>0&&(y.isIncomeGenerating||(ce.warning(\"High Interest Risk Detected\",{description:`This transaction puts your CC usage at ${(q/ae*100).toFixed(1)}%, exceeding your ${v}% safe limit with no income-justification.`,duration:6e3}),w({id:`cc_limit_${O.id}_${new Date().toISOString().split(\"T\")[0]}`,type:\"alert\",priority:\"medium\",category:\"transactions\",title:\"Credit Stability Breach\",message:`Card '${O.name}' usage protocol exceeded ${v}% threshold. Avoid non-essential outflow.`,timestamp:new Date,read:!1})))}if(!k.category||k.category===\"Other\"){const Q=qu(k.description);Q&&Q.category===\"Subscription\"&&(k.category=\"Subscription\",k.tags=Array.from(new Set([...k.tags||[],\"auto-detected\"])))}if(y.registerAsLiability)try{const Q=y.tenureUnit===\"years\"?y.tenure*12:y.tenure,ae=await _e.createLiability(o,{name:y.description,type:y.liabilityType||\"other\",principal:y.principal||y.amount,outstanding:y.principal||y.amount,interestRate:y.interestRate||0,emiAmount:y.amount,startDate:y.date,tenure:Q,accountId:y.accountId});ae.success&&(k.liabilityId=ae.liability.id,y.isRecurring=!1)}catch(Q){console.error(\"Failed to auto-register liability:\",Q)}const U=await _e.createExpense(o,k);if(U.success){if(d(Q=>[...Q,U.expense]),Rr.ensureCatalogAndLink(o,\"transaction\",U.expense.id,\"merchant\",k.description,{amount:k.amount,category:k.category}).catch(Q=>console.error(\"Catalog link failed\",Q)),O){const Q=y.amount+(k.serviceChargeAmount||0),ae=O.type===\"credit_card\"?O.balance+Q:O.balance-Q;await ee(O.id,{balance:ae})}if(k.liabilityId){const Q=G.find(ae=>ae.id===k.liabilityId);if(Q){const ae=Math.max(0,Q.outstanding-y.amount);await _(Q.id,{outstanding:ae}),ce.info(`Updated '${Q.name}' balance`,{description:`New outstanding: ₹${ae.toLocaleString()}`})}}y.isRecurring?await B({type:\"expense\",description:y.description,amount:y.amount,category:y.category,accountId:y.accountId,frequency:y.frequency||\"monthly\",customIntervalDays:y.customIntervalDays,startDate:y.date,endDate:y.endDate,tags:y.tags}):(ce.success(\"Expense added!\"),Er(y.description)&&!y.isRecurring&&w({id:`verify_sub_${U.expense.id}`,type:\"insight\",priority:\"medium\",category:\"transactions\",title:\"Automate Payment?\",message:`Detected '${y.description}' as a subscription. Add to cyclical routine?`,timestamp:new Date,read:!1,action:{type:\"verify_subscription\",label:\"Automate\",status:\"pending\",payload:{id:U.expense.id,description:y.description,amount:y.amount,category:y.category,accountId:y.accountId,date:y.date}}}))}}catch{d(J=>[...J,{id:`temp_${Date.now()}`,...y,createdAt:new Date().toISOString()}]),ce.warning(\"Added in offline mode\")}},[o,w,E,d]),C=x.useCallback(async(y,L)=>{const{expenses:z,accounts:j}=f.current,{updateAccount:G}=A.current;try{const ee=await _e.updateExpense(o,y,L);if(ee.success){const Z=z.find(_=>_.id===y);if(Z){const _=j.find(ne=>ne.id===Z.accountId);if(_){const ne=Z.amount+(Z.serviceChargeAmount||0),F=_.type===\"credit_card\"?_.balance-ne:_.balance+ne;await G(_.id,{balance:F})}const B=ee.expense,J=j.find(ne=>ne.id===B.accountId);if(J){const ne=B.amount+(B.serviceChargeAmount||0),F=J.type===\"credit_card\"?J.balance+ne:J.balance-ne;await G(J.id,{balance:F})}}d(_=>_.map(B=>B.id===y?ee.expense:B)),ce.success(\"Expense updated\")}}catch{d(ee=>ee.map(Z=>Z.id===y?{...Z,...L}:Z)),ce.warning(\"Updated in offline mode\")}},[o,d]),M=x.useCallback(async y=>{const{expenses:L,accounts:z}=f.current,{updateAccount:j}=A.current;try{if((await _e.deleteExpense(o,y)).success){const ee=L.find(Z=>Z.id===y);if(ee){const Z=z.find(_=>_.id===ee.accountId);if(Z){const _=ee.amount+(ee.serviceChargeAmount||0),B=Z.type===\"credit_card\"?Z.balance-_:Z.balance+_;await j(Z.id,{balance:B})}}d(Z=>Z.filter(_=>_.id!==y)),ce.success(\"Expense deleted\")}}catch{d(G=>G.filter(ee=>ee.id!==y)),ce.warning(\"Deleted in offline mode\")}},[o,d]);return x.useMemo(()=>({createExpense:T,updateExpense:C,deleteExpense:M,addNotifications:w}),[T,C,M,w])},T1=(i,l)=>{const{userId:o,incomes:u,setIncomes:d,accounts:h}=i,g=x.useRef({incomes:u,accounts:h});x.useEffect(()=>{g.current={incomes:u,accounts:h}},[u,h]);const N=x.useRef(l);x.useEffect(()=>{N.current=l},[l]);const E=x.useCallback(async f=>{try{const w=await _e.createIncome(o,f);if(w.success){d(C=>[...C,w.income]),Rr.ensureCatalogAndLink(o,\"transaction\",w.income.id,\"merchant\",f.description,{amount:f.amount,category:f.category}).catch(C=>console.error(\"Catalog link failed\",C));const{accounts:A}=g.current,T=A.find(C=>C.id===f.accountId);if(T){const{updateAccount:C,createRecurringTransaction:M}=N.current,y=T.type===\"credit_card\"?T.balance-f.amount:T.balance+f.amount;await C(T.id,{balance:y}),f.isRecurring?await M({type:\"income\",description:f.description,amount:f.amount,category:f.category,accountId:f.accountId,frequency:f.frequency||\"monthly\",customIntervalDays:f.customIntervalDays,startDate:f.date,endDate:f.endDate,tags:f.tags}):ce.success(\"Income added!\")}else ce.success(\"Income added!\")}}catch(w){console.error(\"Error creating income:\",w),d(A=>[...A,{id:`temp_${Date.now()}`,...f,createdAt:new Date().toISOString()}]),ce.warning(\"Added in offline mode\")}},[o,d]),S=x.useCallback(async(f,w)=>{try{const A=await _e.updateIncome(o,f,w);if(A.success){const{incomes:T,accounts:C}=g.current,M=T.find(y=>y.id===f);if(M){const{updateAccount:y}=N.current,L=C.find(G=>G.id===M.accountId);if(L){const G=L.type===\"credit_card\"?L.balance+M.amount:L.balance-M.amount;await y(L.id,{balance:G})}const z=A.income,j=C.find(G=>G.id===z.accountId);if(j){const G=j.type===\"credit_card\"?j.balance-z.amount:j.balance+z.amount;await y(j.id,{balance:G})}}d(y=>y.map(L=>L.id===f?A.income:L)),ce.success(\"Income updated\")}}catch{d(A=>A.map(T=>T.id===f?{...T,...w}:T)),ce.warning(\"Updated in offline mode\")}},[o,d]),p=x.useCallback(async f=>{try{if((await _e.deleteIncome(o,f)).success){const{incomes:A,accounts:T}=g.current,C=A.find(M=>M.id===f);if(C){const{updateAccount:M}=N.current,y=T.find(L=>L.id===C.accountId);if(y){const L=y.type===\"credit_card\"?y.balance+C.amount:y.balance-C.amount;await M(y.id,{balance:L})}}d(M=>M.filter(y=>y.id!==f)),ce.success(\"Income deleted\")}}catch{d(w=>w.filter(A=>A.id!==f)),ce.warning(\"Deleted in offline mode\")}},[o,d]);return x.useMemo(()=>({createIncome:E,updateIncome:S,deleteIncome:p}),[E,S,p])},D1=(i,l)=>{const{userId:o,debts:u,setDebts:d,accounts:h,setExpenses:g,setIncomes:N}=i,E=x.useRef({debts:u,accounts:h});x.useEffect(()=>{E.current={debts:u,accounts:h}},[u,h]);const S=x.useRef(l);x.useEffect(()=>{S.current=l},[l]);const p=x.useCallback(async T=>{try{const C=await _e.createDebt(o,T);if(C.success){d(L=>[...L,C.debt]);const{accounts:M}=E.current,y=M.find(L=>L.id===T.accountId);if(y){const{updateAccount:L}=S.current,z=T.type===\"borrowed\"?T.amount:-T.amount,j=y.type===\"credit_card\"?y.balance-z:y.balance+z;await L(y.id,{balance:j})}if(T.isRecurring){const{createRecurringTransaction:L}=S.current;await L({type:\"expense\",description:`Debt: ${T.personName} (${T.type})`,amount:T.amount,category:\"Debt\",accountId:T.accountId,frequency:T.frequency||\"monthly\",startDate:T.date,tags:[...T.tags||[],\"debt\"]})}ce.success(\"Debt created\")}}catch{d(C=>[...C,{id:`temp_${Date.now()}`,...T,status:\"pending\",createdAt:new Date().toISOString()}]),ce.warning(\"Added in offline mode\")}},[o,d]),f=x.useCallback(async(T,C)=>{try{const M=await _e.updateDebt(o,T,C);if(M.success){const{debts:y,accounts:L}=E.current,z=y.find(j=>j.id===T);if(z){const{updateAccount:j,updateRecurringTransaction:G,createRecurringTransaction:ee}=S.current,Z=L.find(J=>J.id===z.accountId);if(Z){const J=z.type===\"borrowed\"?-z.amount:z.amount,ne=Z.type===\"credit_card\"?Z.balance-J:Z.balance+J;await j(Z.id,{balance:ne})}const _=M.debt,B=L.find(J=>J.id===_.accountId);if(B){const J=_.type===\"borrowed\"?_.amount:-_.amount,ne=B.type===\"credit_card\"?B.balance-J:B.balance+J;await j(B.id,{balance:ne})}C.isRecurring&&(z.recurringId?await G(z.recurringId,{amount:C.amount,description:`Debt: ${C.personName} (${C.type})`}):await ee({type:\"expense\",description:`Debt: ${C.personName} (${C.type})`,amount:C.amount,category:\"Debt\",accountId:C.accountId,frequency:C.frequency||\"monthly\",startDate:C.date,tags:[...C.tags||[],\"debt\"]}))}d(j=>j.map(G=>G.id===T?M.debt:G)),ce.success(\"Debt updated\")}}catch{d(M=>M.map(y=>y.id===T?{...y,...C}:y)),ce.warning(\"Updated in offline mode\")}},[o,d]),w=x.useCallback(async T=>{try{const C=await _e.updateDebt(o,T,{status:\"settled\"});if(C.success){const{debts:M,accounts:y}=E.current,L=M.find(z=>z.id===T);if(L&&L.status!==\"settled\"){const{updateAccount:z}=S.current,j=y.find(G=>G.id===L.accountId);if(j){const G=L.type===\"borrowed\"?-L.amount:L.amount,ee=j.type===\"credit_card\"?j.balance-G:j.balance+G;await z(j.id,{balance:ee});const Z={description:`Debt Settlement: ${L.personName}`,amount:L.amount,category:\"Transfer\",date:new Date().toISOString().split(\"T\")[0],tags:[\"debt-settlement\"],accountId:L.accountId};if(L.type===\"borrowed\"){const _=await _e.createExpense(o,Z);_.success&&g(B=>[...B,_.expense])}else{const _=await _e.createIncome(o,Z);_.success&&N(B=>[...B,_.income])}}}d(z=>z.map(j=>j.id===T?C.debt:j)),ce.success(\"🎉 Debt settled! Great job!\"),Or({particleCount:150,spread:100,origin:{y:.6}})}}catch{d(C=>C.map(M=>M.id===T?{...M,status:\"settled\"}:M)),ce.warning(\"Marked as settled locally\")}},[o,g,N,d]),A=x.useCallback(async T=>{try{if((await _e.deleteDebt(o,T)).success){const{debts:M,accounts:y}=E.current,L=M.find(z=>z.id===T);if(L){const{updateAccount:z}=S.current,j=y.find(G=>G.id===L.accountId);if(j){const G=L.type===\"borrowed\"?-L.amount:L.amount,ee=j.type===\"credit_card\"?j.balance-G:j.balance+G;await z(j.id,{balance:ee})}}d(z=>z.filter(j=>j.id!==T)),ce.success(\"Debt deleted\")}}catch{d(C=>C.filter(M=>M.id!==T)),ce.warning(\"Deleted in offline mode\")}},[o,d]);return x.useMemo(()=>({createDebt:p,updateDebt:f,settleDebt:w,deleteDebt:A}),[p,f,w,A])},lu=`https://${ll}.supabase.co/rest/v1`,ru={\"Content-Type\":\"application/json\",apikey:fn,Authorization:`Bearer ${fn}`},Ws={async getSuggestions(i,l=\"new\",o=20){const u=new URLSearchParams({user_id:`eq.${i}`,order:\"created_at.desc\",limit:o.toString()});l!==\"all\"&&u.append(\"status\",`eq.${l}`);try{const d=await fetch(`${lu}/smart_suggestions?${u}`,{headers:ru});return d.ok?await d.json():[]}catch(d){return console.error(\"Fetch suggestions error:\",d),[]}},async createSuggestion(i){try{const o=await(await fetch(`${lu}/smart_suggestions`,{method:\"POST\",headers:{...ru,Prefer:\"return=representation\"},body:JSON.stringify(i)})).json();return Array.isArray(o)?o[0]:o}catch(l){return console.error(\"Create suggestion error:\",l),null}},async updateStatus(i,l){try{return(await fetch(`${lu}/smart_suggestions?id=eq.${i}`,{method:\"PATCH\",headers:ru,body:JSON.stringify({status:l})})).ok}catch(o){return console.error(\"Update suggestion status error:\",o),!1}}};function o0(i,l){const o=JSON.stringify(l.payload||{}),u=l.type||\"UNKNOWN\";return`${i}_${u}_${o}`}const M1={detectSubscriptions(i){const l={};i.forEach(u=>{const d=u.note?.toLowerCase().trim()||u.merchant?.toLowerCase()||\"unknown\";d!==\"unknown\"&&(l[d]||(l[d]=[]),l[d].push(u))});const o=[];return Object.entries(l).forEach(([u,d])=>{if(d.length<3)return;const h=d.sort((S,p)=>new Date(S.txn_date).getTime()-new Date(p.txn_date).getTime()),g=h[h.length-1],N=h[h.length-2],E=Math.abs(new Date(g.txn_date).getTime()-new Date(N.txn_date).getTime())/(1e3*3600*24);E>=25&&E<=35&&o.push({type:\"subscription_detected\",title:\"New Subscription Detected\",message:`You've had 3 recurring payments to \"${u}\". Would you like to track this as a subscription?`,severity:\"low\",action:{type:\"CREATE_SUBSCRIPTION\",payload:{name:u,amount:g.amount,currency_code:g.currency_code}}})}),o}},_1=`https://${ll}.supabase.co/rest/v1`,R1={apikey:fn,Authorization:`Bearer ${fn}`},O1={async getTopSuggestions(i,l=5){return await Ws.getSuggestions(i,\"new\",l)},async generateForUser(i){try{const l=await Ws.getSuggestions(i,\"all\",100),o=new Set(l.map(N=>o0(N.type,N.action))),d=await(await fetch(`${_1}/transactions?user_id=eq.${i}&order=txn_date.desc&limit=100`,{headers:R1})).json(),h=[...M1.detectSubscriptions(d)];let g=0;for(const N of h){const E=o0(N.type,N.action);o.has(E)||(await Ws.createSuggestion({user_id:i,...N,status:\"new\",source:\"rule\",expires_at:null}),g++,o.add(E))}return g}catch(l){return console.error(\"Error generating suggestions:\",l),0}},async markSeen(i){return await Ws.updateStatus(i,\"seen\")},async dismiss(i){return await Ws.updateStatus(i,\"dismissed\")},async accept(i){return await Ws.updateStatus(i,\"accepted\")}},z1=(i,l)=>{const{userId:o,settings:u,setSettings:d,setAccounts:h,setExpenses:g,setIncomes:N,setDebts:E,setGoals:S,setLiabilities:p,setInvestments:f,setRecurringTransactions:w,setNotifications:A,setEmergencyFundAmount:T,setIsOffline:C,setApiStatus:M,backfillRequest:y,setBackfillRequest:L,expenses:z,incomes:j,goals:G,accounts:ee,liabilities:Z,recurringTransactions:_,setIsRefreshing:B}=i,J=x.useRef({expenses:z,incomes:j,goals:G,accounts:ee,liabilities:Z,recurringTransactions:_,settings:u});x.useEffect(()=>{J.current={expenses:z,incomes:j,goals:G,accounts:ee,liabilities:Z,recurringTransactions:_,settings:u}},[z,j,G,ee,Z,_,u]);const{updateAccount:ne,createRecurringTransaction:F,deleteExpense:oe,deleteIncome:ge,applyTheme:O}=l,k=x.useCallback(async Y=>{d(V=>({...V,...Y})),Y.theme&&O(Y.theme);try{const V=await _e.updateSettings(o,Y);if(V.success)d(te=>({...te,...V.settings,aiProvider:V.settings.aiProvider||te.aiProvider,apiKeys:{...te.apiKeys,...V.settings.apiKeys}}));else throw new Error(V.error)}catch(V){console.error(\"Failed to sync settings\",V),ce.error(\"Settings saved locally only\")}},[o,d,O]),U=x.useCallback(async()=>{try{try{await _e.processRecurring(o)}catch(ve){console.error(\"Skip recurring process\",ve)}const[Y,V,te,me,ie,le,je,Ae,pe]=await Promise.all([_e.getSettings(o).catch(()=>({success:!1,settings:void 0})),_e.getAccounts(o).catch(()=>({success:!1,accounts:[]})),_e.getExpenses(o).catch(()=>({success:!1,expenses:[]})),_e.getIncomes(o).catch(()=>({success:!1,incomes:[]})),_e.getDebts(o).catch(()=>({success:!1,debts:[]})),_e.getGoals(o).catch(()=>({success:!1,goals:[]})),_e.getLiabilities(o).catch(()=>({success:!1,liabilities:[]})),_e.getInvestments(o).catch(()=>({success:!1,investments:[]})),_e.getRecurring(o).catch(()=>({success:!1,recurring:[]}))]);C(!1),M(\"online\"),Y.success&&Y.settings&&(d(ve=>({...ve,...Y.settings,aiProvider:Y.settings.aiProvider||ve.aiProvider,apiKeys:{...ve.apiKeys,...Y.settings.apiKeys}})),O(Y.settings.theme)),V.success&&h(V.accounts||[]),te.success&&g(te.expenses||[]),me.success&&N(me.incomes||[]),ie.success&&E(ie.debts||[]),le.success&&S(le.goals||[]),je.success&&p(je.liabilities||[]),Ae.success&&f(Ae.investments||[]),pe.success&&w(pe.recurring||[]),O1.generateForUser(o).catch(ve=>console.error(\"Suggestions update failed\",ve)),ce.success(\"Sync complete\")}catch(Y){console.error(\"API Sync failed\",Y),C(!0),M(\"offline\")}},[o,d,h,g,N,E,S,p,f,w,C,M,O]),Q=x.useCallback(async()=>{B(!0),await U(),B(!1)},[B,U]),ae=x.useCallback(async()=>{if(!y)return;const{count:Y,dates:V,recurring:te}=y,{accounts:me,goals:ie,liabilities:le}=J.current;L(null);const je=ce.loading(`Generating ${Y} entries...`),Ae=[],pe=[];let ve=0;const xe=me.find(Ue=>Ue.id===te.accountId),Ke={},We={};try{for(const Ue of V){const it=Ue.toISOString().split(\"T\")[0],Ve={description:te.description,source:te.source,amount:te.amount,category:te.category,date:it,tags:[...te.tags||[],\"auto-backfill\"],accountId:te.accountId,isRecurring:!0,recurringId:te.id,liabilityId:te.liabilityId,investmentId:te.investmentId};if(te.type===\"expense\"){const ke=await _e.createExpense(o,Ve);ke.success&&(pe.push(ke.expense),xe&&(ve+=xe.type===\"credit_card\"?ke.expense.amount:-ke.expense.amount),te.goalId&&(Ke[te.goalId]=(Ke[te.goalId]||0)+ke.expense.amount),te.liabilityId&&(We[te.liabilityId]=(We[te.liabilityId]||0)+ke.expense.amount))}else{const ke=await _e.createIncome(o,Ve);ke.success&&(Ae.push(ke.income),xe&&(ve+=xe.type===\"credit_card\"?-ke.income.amount:ke.income.amount))}await new Promise(ke=>setTimeout(ke,30))}Ae.length>0&&N(Ue=>[...Ue,...Ae]),pe.length>0&&g(Ue=>[...Ue,...pe]);for(const[Ue,it]of Object.entries(Ke)){const Ve=ie.find(ke=>ke.id===Ue);if(Ve){const ke=Ve.currentAmount+it;await _e.updateGoal(o,Ue,{currentAmount:ke}),S(Ft=>Ft.map(fe=>fe.id===Ue?{...fe,currentAmount:ke}:fe))}}for(const[Ue,it]of Object.entries(We)){const Ve=le.find(ke=>ke.id===Ue);if(Ve){const ke=Math.max(0,Ve.outstanding-it);await _e.updateLiability(o,Ue,{outstanding:ke}),p(Ft=>Ft.map(fe=>fe.id===Ue?{...fe,outstanding:ke}:fe))}}xe&&ve!==0&&await ne(xe.id,{balance:xe.balance+ve}),ce.success(\"Backfill complete\",{id:je})}catch(Ue){console.error(\"Backfill failed\",Ue),ce.error(\"Backfill partial failure\",{id:je})}},[o,y,N,g,S,p,ne,L]),v=x.useCallback(async()=>{let Y=0;const V=J.current.expenses,te=[];for(const me of V)if(me.category!==\"Subscription\"&&Er(me.description)){const ie=qu(me.description);ie&&ie.category===\"Subscription\"&&(te.push(l.updateExpense(me.id,{category:\"Subscription\",tags:[...new Set([...me.tags,\"auto-migrated\",\"subscription\"])]})),Y++)}return te.length>0?(await Promise.all(te),ce.success(`Migrated ${Y} transactions to Subscriptions`)):ce.info(\"No subscription transactions found to migrate\"),{count:Y}},[l]),D=x.useCallback(async()=>{let Y=0;const{expenses:V,incomes:te}=J.current,me=[],ie=new Set,le=new Set;V.forEach(pe=>{const ve=`${pe.date}-${pe.description?.toLowerCase().trim()}-${pe.amount}`;!pe.description||pe.description.trim()===\"\"||pe.amount===0||ie.has(ve)?le.add(pe.id):ie.add(ve)});const je=new Map;V.forEach(pe=>{if(!le.has(pe.id)&&(pe.category===\"Subscription\"||pe.isRecurring||Er(pe.description))){const ve=new Date(pe.date),xe=`${pe.description.toLowerCase().trim()}-${ve.getFullYear()}-${ve.getMonth()}`;je.has(xe)||je.set(xe,[]),je.get(xe).push(pe)}}),je.forEach(pe=>{if(pe.length>1){pe.sort((ve,xe)=>ve.isRecurring!==xe.isRecurring?ve.isRecurring?-1:1:new Date(xe.date).getTime()-new Date(ve.date).getTime());for(let ve=1;ve<pe.length;ve++)le.add(pe[ve].id)}}),le.forEach(pe=>{me.push(oe(pe)),Y++});const Ae=new Set;for(const pe of te){const ve=`${pe.date}-${pe.source?.toLowerCase().trim()}-${pe.amount}`;!pe.source||pe.source.trim()===\"\"||pe.amount===0||Ae.has(ve)?(me.push(ge(pe.id)),Y++):Ae.add(ve)}return me.length>0?(await Promise.all(me),ce.success(`Cleaned up ${Y} entries`)):ce.info(\"Logs are clean.\"),{count:Y}},[oe,ge]),W=x.useCallback(()=>{Object.values(Oe).forEach(Y=>{Y!==Oe.AUTH&&Y!==Oe.REMEMBERED_MOBILE&&localStorage.removeItem(Y)}),g([]),N([]),E([]),S([]),h([]),f([]),p([]),w([]),A([]),T(0),ce.success(\"All data cleared successfully. You remain logged in.\")},[g,N,E,S,h,f,p,w,A,T]),q=x.useCallback(()=>{const Y=J.current.recurringTransactions;g(V=>{const te=[...V],me=te.filter(ie=>Er(ie.description));return me.length>0&&me.forEach(ie=>{if(ie.category===\"Subscription\")return;ie.category=\"Subscription\",ie.tags=Array.from(new Set([...ie.tags||[],\"auto-migrated\"])),Y.some(je=>je.description?.toLowerCase().includes(ie.description.toLowerCase())||ie.description.toLowerCase().includes(je.description?.toLowerCase()||\"\"))||setTimeout(()=>{F({type:\"expense\",description:ie.description,amount:ie.amount,category:\"Subscription\",accountId:ie.accountId,frequency:\"monthly\",startDate:ie.date,tags:[\"auto-migrated\"]})},100)}),te})},[F,g]);return x.useMemo(()=>({updateSettings:k,fetchFromApi:U,refreshData:Q,executeBackfill:ae,migrateSubscriptions:v,cleanupDuplicates:D,purgeAllData:W,runCategorizationMigration:q}),[k,U,Q,ae,v,D,W,q])},Hu=[{id:\"first_transaction\",name:\"Getting Started\",description:\"Add your first transaction\",icon:\"🎯\",condition:i=>i.totalTransactions>=1},{id:\"early_bird\",name:\"Early Bird\",description:\"Log in for the first time today\",icon:\"🌅\",condition:i=>i.dailyLogin===!0},{id:\"ten_transactions\",name:\"Building Habits\",description:\"Log 10 transactions\",icon:\"📊\",condition:i=>i.totalTransactions>=10},{id:\"fifty_transactions\",name:\"Momentum Builder\",description:\"Log 50 transactions\",icon:\"⚡\",condition:i=>i.totalTransactions>=50},{id:\"financial_guru\",name:\"Financial Guru\",description:\"Complete 100 transactions\",icon:\"🧙\",condition:i=>i.totalTransactions>=100},{id:\"three_day_streak\",name:\"Streak Starter\",description:\"Log in for 3 days in a row\",icon:\"🔥\",condition:i=>i.currentStreak>=3},{id:\"consistent_tracker\",name:\"Consistent Tracker\",description:\"Log transactions for 7 days in a row\",icon:\"📅\",condition:i=>i.currentStreak>=7},{id:\"habit_master\",name:\"Habit Master\",description:\"Maintain a 30-day streak\",icon:\"🏅\",condition:i=>i.currentStreak>=30},{id:\"dedication_champion\",name:\"Dedication Champion\",description:\"Achieve a 100-day streak\",icon:\"👑\",condition:i=>i.currentStreak>=100},{id:\"first_goal\",name:\"Goal Setter\",description:\"Create your first savings goal\",icon:\"🎯\",condition:i=>i.totalGoals>=1},{id:\"goal_achiever\",name:\"Goal Achiever\",description:\"Complete your first savings goal\",icon:\"🏆\",condition:i=>i.completedGoals>=1},{id:\"triple_winner\",name:\"Triple Winner\",description:\"Complete 3 savings goals\",icon:\"🎖️\",condition:i=>i.completedGoals>=3},{id:\"goal_crusher\",name:\"Goal Crusher\",description:\"Complete 5 savings goals\",icon:\"💎\",condition:i=>i.completedGoals>=5},{id:\"debt_aware\",name:\"Debt Aware\",description:\"Track your first debt\",icon:\"📝\",condition:i=>i.totalDebts>=1},{id:\"debt_settler\",name:\"Debt Settler\",description:\"Settle your first debt\",icon:\"✅\",condition:i=>i.settledDebts>=1},{id:\"debt_destroyer\",name:\"Debt Destroyer\",description:\"Settle 5 debts\",icon:\"💪\",condition:i=>i.settledDebts>=5},{id:\"debt_free_hero\",name:\"Debt-Free Hero\",description:\"Maintain zero pending debts\",icon:\"🦸\",condition:i=>i.totalDebts>0&&i.settledDebts===i.totalDebts},{id:\"first_saver\",name:\"First Saver\",description:\"Achieve 10%+ savings rate\",icon:\"🌱\",condition:i=>i.savingsRate>=.1},{id:\"super_saver\",name:\"Super Saver\",description:\"Maintain a 20%+ savings rate\",icon:\"💰\",condition:i=>i.savingsRate>=.2},{id:\"elite_saver\",name:\"Elite Saver\",description:\"Achieve 30%+ savings rate\",icon:\"💸\",condition:i=>i.savingsRate>=.3},{id:\"legendary_saver\",name:\"Legendary Saver\",description:\"Maintain 50%+ savings rate\",icon:\"🏰\",condition:i=>i.savingsRate>=.5},{id:\"budget_conscious\",name:\"Budget Conscious\",description:\"Keep spending under 80% of income\",icon:\"📊\",condition:i=>i.monthlySpendingRatio<=.8},{id:\"budget_master\",name:\"Budget Master\",description:\"Keep spending under 70% of income\",icon:\"👑\",condition:i=>i.monthlySpendingRatio<=.7},{id:\"frugal_champion\",name:\"Frugal Champion\",description:\"Keep spending under 50% of income\",icon:\"🌟\",condition:i=>i.monthlySpendingRatio<=.5},{id:\"stay_notified\",name:\"Stay Notified\",description:\"Enable notifications\",icon:\"🔔\",condition:i=>i.notificationsEnabled===!0},{id:\"ai_curious\",name:\"AI Curious\",description:\"Chat with AI Guru for the first time\",icon:\"🤖\",condition:i=>i.aiInteractions>=1},{id:\"ai_enthusiast\",name:\"AI Enthusiast\",description:\"Chat with AI Guru 10 times\",icon:\"🧠\",condition:i=>i.aiInteractions>=10},{id:\"profile_complete\",name:\"Profile Complete\",description:\"Add your name and photo\",icon:\"👤\",condition:i=>i.profileComplete===!0},{id:\"account_organizer\",name:\"Account Organizer\",description:\"Create 3 or more accounts\",icon:\"🏦\",condition:i=>i.totalAccounts>=3}];function L1(i,l){const o=[];return Hu.forEach(u=>{!l.includes(u.id)&&u.condition(i)&&o.push(u.id)}),o}function cp(i){return Hu.find(l=>l.id===i)}function U1(){return Hu}const I1=(i,l)=>{const{accounts:o,goals:u,emergencyFundAmount:d,liabilities:h,debts:g,settings:N,recurringTransactions:E,setSettings:S}=i,p=x.useRef({accounts:o,goals:u,emergencyFundAmount:d,liabilities:h,debts:g,settings:N,recurringTransactions:E,expenses:i.expenses});x.useEffect(()=>{p.current={accounts:o,goals:u,emergencyFundAmount:d,liabilities:h,debts:g,settings:N,recurringTransactions:E,expenses:i.expenses}},[o,u,d,h,g,N,E,i.expenses]);const f=x.useRef(l);x.useEffect(()=>{f.current=l},[l]);const w=x.useCallback(()=>{const{addNotifications:T}=f.current,C=new Date;C.setHours(0,0,0,0);const{accounts:M,goals:y,emergencyFundAmount:L,liabilities:z,debts:j}=p.current,G=M.reduce((B,J)=>B+(J.type===\"bank\"||J.type===\"cash\"?J.balance:0),0),ee=y.reduce((B,J)=>B+J.currentAmount,0)+L,Z=Math.max(0,G-ee),_=[];if(z.forEach(B=>{const J=new Date(B.startDate),ne=new Date(C.getFullYear(),C.getMonth(),J.getDate());ne<C&&ne.setMonth(ne.getMonth()+1),Math.ceil((ne.getTime()-C.getTime())/(1e3*60*60*24))<=10&&_.push({name:B.name,amount:B.emiAmount,dueDate:ne,type:\"EMI\"})}),j.filter(B=>B.status!==\"settled\").forEach(B=>{if(B.dueDate){const J=new Date(B.dueDate),ne=Math.ceil((J.getTime()-C.getTime())/(1e3*60*60*24));ne<=10&&ne>=-30&&_.push({name:`Debt: ${B.personName}`,amount:B.amount,dueDate:J,type:\"Debt\"})}}),_.length>0){const B=_.reduce((J,ne)=>J+ne.amount,0);B>Z&&T({id:`smart_due_liquidity_${C.toISOString().split(\"T\")[0]}`,type:\"alert\",priority:\"high\",category:\"reminders\",title:\"Liquidity Warning\",message:`You have ₹${B.toLocaleString()} in dues within 10 days, but only ₹${Z.toLocaleString()} available.`,timestamp:new Date,read:!1})}},[]),A=x.useCallback(()=>{const{addNotifications:T}=f.current,{expenses:C,goals:M,emergencyFundAmount:y,debts:L,accounts:z,recurringTransactions:j,settings:G}=p.current,ee={totalExpenses:C.length,totalSavings:M.reduce((_,B)=>_+B.currentAmount,0),emergencyFund:y,debtsSettled:L.filter(_=>_.status===\"settled\").length,accountsCount:z.length,recurringCount:j.length},Z=L1(ee,G.unlockedAchievements||[]);Z.length>0&&(Z.forEach(_=>{const B=cp(_);B&&T({id:`achievement_${_}_${Date.now()}`,type:\"achievement\",priority:\"high\",category:\"system\",title:\"New Achievement!\",message:`You've unlocked: ${B.name}`,timestamp:new Date,read:!1,achievementId:_})}),S(_=>({..._,unlockedAchievements:[..._.unlockedAchievements||[],...Z]})))},[S]);return x.useMemo(()=>({checkSmartDues:w,checkForAchievements:A}),[w,A])},B1=(i,l)=>{const{userId:o,setSettings:u,setExpenses:d,setIncomes:h,setDebts:g,setGoals:N,setAccounts:E,setInvestments:S,setLiabilities:p,setNotifications:f,setEmergencyFundAmount:w,setRecurringTransactions:A,setRememberedMobile:T,setPendingMobile:C,setIsRememberedUser:M,setDeletionDate:y,setIsLoading:L}=i,z=x.useRef(l);x.useEffect(()=>{z.current=l},[l]);const j=x.useCallback(async()=>{const{applyTheme:G,fetchFromApi:ee,purgeAllData:Z,runCategorizationMigration:_}=z.current;L(!0);try{const J=localStorage.getItem(Oe.SETTINGS);if(J){const q=JSON.parse(J);u(q),G(q.theme)}const ne=localStorage.getItem(Oe.EXPENSES);ne&&d(JSON.parse(ne));const F=localStorage.getItem(Oe.INCOMES);F&&h(JSON.parse(F));const oe=localStorage.getItem(Oe.DEBTS);oe&&g(JSON.parse(oe));const ge=localStorage.getItem(Oe.GOALS);ge&&N(JSON.parse(ge));const O=localStorage.getItem(Oe.ACCOUNTS);O&&E(JSON.parse(O));const k=localStorage.getItem(Oe.INVESTMENTS);k&&S(JSON.parse(k));const U=localStorage.getItem(Oe.LIABILITIES);U&&p(JSON.parse(U));const Q=localStorage.getItem(Oe.NOTIFICATIONS);if(Q){const Y=JSON.parse(Q).filter((V,te,me)=>me.findIndex(ie=>ie.id===V.id||ie.message===V.message&&ie.type===V.type)===te);f(Y.slice(0,100))}const ae=localStorage.getItem(Oe.EMERGENCY_FUND);ae&&w(JSON.parse(ae));const v=localStorage.getItem(Oe.RECURRING);v&&A(JSON.parse(v));const D=localStorage.getItem(Oe.REMEMBERED_MOBILE);D&&(T(D),C(D),M(!0));const W=localStorage.getItem(Oe.DELETION_SCHEDULE);if(W){const q=new Date(W).getTime();new Date().getTime()>=q?Z():y(W)}}catch(J){console.error(\"Error loading local data:\",J)}await ee(),!localStorage.getItem(\"finhub_subscription_migration_v3\")&&o&&(_(),localStorage.setItem(\"finhub_subscription_migration_v3\",\"true\")),L(!1)},[o,u,d,h,g,N,E,S,p,f,w,A,T,C,M,y,L]);return x.useMemo(()=>({loadInitialData:j}),[j])},q1=(i,l)=>{const{accounts:o,goals:u,setEmergencyFundAmount:d}=i,h=x.useRef({accounts:o,goals:u});x.useEffect(()=>{h.current={accounts:o,goals:u}},[o,u]);const g=x.useRef(l);x.useEffect(()=>{g.current=l},[l]);const[N,E]=x.useState(!1),[S,p]=x.useState(\"goal\"),f=x.useCallback(M=>{p(M),E(!0)},[]),w=x.useCallback(()=>{E(!1)},[]),A=x.useCallback(async(M,y)=>{const{updateAccount:L}=g.current,{accounts:z}=h.current,j=z.find(G=>G.id===M);j&&await L(M,{balance:j.balance-y})},[]),T=x.useCallback(async M=>{try{const{updateGoal:y}=g.current;if(await A(M.accountId,M.amount),M.destinationType===\"goal\"){const{goals:L}=h.current,z=L.find(j=>j.id===M.destinationId);z&&await y(M.destinationId,{currentAmount:z.currentAmount+M.amount})}else d(L=>L+M.amount);ce.success(\"Funds allocated successfully!\"),w()}catch(y){console.error(\"Fund allocation failed\",y),ce.error(\"Allocation failed\")}},[A,d,w]),C=x.useCallback(async(M,y,L)=>{try{const{updateAccount:z}=g.current,{accounts:j}=h.current,G=j.find(Z=>Z.id===M),ee=j.find(Z=>Z.id===y);G&&ee&&(await z(M,{balance:G.balance-L}),await z(y,{balance:ee.balance+L}),ce.success(\"Transfer complete\"))}catch(z){console.error(\"Transfer failed\",z),ce.error(\"Transfer failed\")}},[]);return x.useMemo(()=>({isFundAllocationOpen:N,fundAllocationType:S,openFundAllocation:f,closeFundAllocation:w,performFundAllocation:T,deductFromAccount:A,transferFunds:C}),[N,S,f,w,T,A,C])},up=x.createContext(void 0),ai=()=>{const i=x.useContext(up);if(!i)throw new Error(\"useFinance must be used within a FinanceProvider\");return i},H1=({children:i})=>{const l=Iv(),{applyTheme:o}=h1(),{addNotifications:u}=p1(l.setNotifications),d=f1(),h=d.currentUser?.id||\"demo-user-001\",g=x.useMemo(()=>({...l,...d,userId:h}),[l,d,h]),N=b1(g),E=N1(g),S=x.useMemo(()=>({...N,...E,applyTheme:o,addNotifications:u}),[N,E,o,u]),p=S1(g,S),f=C1(g,{...S,...p}),w=E1(g,S),A=x.useMemo(()=>({...S,...p,...f,...w}),[S,p,f,w]),T=k1(g,A),C=T1(g,A),M=D1(g,A),y=x.useMemo(()=>({...A,...T,...C,...M}),[A,T,C,M]),L=z1(g,y),z=q1(g,y),j=I1(g,{...y,...L}),G=B1(g,{...y,...L});m1(l),x.useEffect(()=>{d.authStatus===\"authenticated\"&&G.loadInitialData()},[d.authStatus,G]),x.useEffect(()=>{const Z=setInterval(()=>{d.authStatus===\"authenticated\"&&(j.checkSmartDues(),j.checkForAchievements())},36e5);return()=>clearInterval(Z)},[d.authStatus,j]),x.useEffect(()=>{if(d.authStatus===\"authenticated\"){const Z=setTimeout(()=>{Pi.backfillAll(h).catch(console.error)},5e3);return()=>clearTimeout(Z)}},[d.authStatus,h]),x.useEffect(()=>{let Z;const _=()=>{Z&&clearTimeout(Z),d.authStatus===\"authenticated\"&&(Z=setTimeout(()=>{d.logout()},12e5))};return window.addEventListener(\"mousemove\",_),window.addEventListener(\"keypress\",_),_(),()=>{window.removeEventListener(\"mousemove\",_),window.removeEventListener(\"keypress\",_),Z&&clearTimeout(Z)}},[d.authStatus,d]);const ee=x.useMemo(()=>({...l,...d,...y,...L,...z,...j,...G,userId:h,currency:l.settings.currency,clearAllData:L.purgeAllData,createRecurring:E.createRecurringTransaction,processRecurringTransactions:async()=>{await Pi.backfillAll(h)}}),[l,d,y,L,z,j,G,h,E]);return n.jsx(up.Provider,{value:ee,children:i})};function Ne(i,l=\"USD\",o=!1){const u=typeof i==\"string\"?parseFloat(i.replace(/,/g,\"\")):i;if(isNaN(u))return\"\";const d=l===\"INR\"?\"en-IN\":\"en-US\",h={style:\"currency\",currency:l,notation:o?\"compact\":\"standard\",maximumFractionDigits:o?1:2};try{return new Intl.NumberFormat(d,h).format(u)}catch{return new Intl.NumberFormat(d,{...h,style:\"decimal\"}).format(u)}}function Gu(i,l=\"en-IN\"){const o=typeof i==\"string\"?parseFloat(i.replace(/,/g,\"\")):i;return isNaN(o)?\"\":new Intl.NumberFormat(l).format(o)}const ou=Gu;function G1(i){return i===\"\"||i===\"-\"?!0:/^-?\\d*\\.?\\d*$/.test(i)}function c0(i){return i.replace(/,/g,\"\")}function V1(i){if(i<=0)return\"0 months\";const l=Math.floor(i/12),o=i%12,u=[];return l>0&&u.push(`${l} ${l===1?\"year\":\"years\"}`),(o>0||l===0)&&u.push(`${o} ${o===1?\"month\":\"months\"}`),u.join(\", \")}function u0(i,l=\"INR\"){const o=Math.abs(i),u=i<0?\"-\":\"\";if(l===\"INR\"){if(o>=1e7)return`${u}${(o/1e7).toFixed(2).replace(/\\.00$/,\"\")}C`;if(o>=1e5)return`${u}${(o/1e5).toFixed(2).replace(/\\.00$/,\"\")}L`;if(o>=1e4)return`${u}${(o/1e3).toFixed(1).replace(/\\.0$/,\"\")}K`}else{if(o>=1e9)return`${u}${(o/1e9).toFixed(2).replace(/\\.00$/,\"\")}B`;if(o>=1e6)return`${u}${(o/1e6).toFixed(2).replace(/\\.00$/,\"\")}M`;if(o>=1e4)return`${u}${(o/1e3).toFixed(1).replace(/\\.0$/,\"\")}K`}return u+Gu(o,l===\"INR\"?\"en-IN\":\"en-US\")}function LN(i,l=\"INR\"){const o=Math.abs(i),u=i<0?\"-\":\"\",d=(h,g)=>{let N=2;return h>=100?N=0:h>=10&&(N=1),`${u}${h.toFixed(N).replace(/\\.0+$/,\"\")}${g}`};if(l===\"INR\"){if(o>=1e7)return d(o/1e7,\"Cr\");if(o>=1e5)return d(o/1e5,\"L\");if(o>=1e3)return d(o/1e3,\"K\")}else{if(o>=1e9)return d(o/1e9,\"B\");if(o>=1e6)return d(o/1e6,\"M\");if(o>=1e3)return d(o/1e3,\"K\")}return u+Gu(o,l===\"INR\"?\"en-IN\":\"en-US\")}const Vu=x.createContext({});function Fu(i){const l=x.useRef(null);return l.current===null&&(l.current=i()),l.current}const dp=typeof window<\"u\",fp=dp?x.useLayoutEffect:x.useEffect,zr=x.createContext(null),Yu=x.createContext({transformPagePoint:i=>i,isStatic:!1,reducedMotion:\"never\"});function d0(i,l){if(typeof i==\"function\")return i(l);i!=null&&(i.current=l)}function F1(...i){return l=>{let o=!1;const u=i.map(d=>{const h=d0(d,l);return!o&&typeof h==\"function\"&&(o=!0),h});if(o)return()=>{for(let d=0;d<u.length;d++){const h=u[d];typeof h==\"function\"?h():d0(i[d],null)}}}}function Y1(...i){return x.useCallback(F1(...i),i)}class $1 extends x.Component{getSnapshotBeforeUpdate(l){const o=this.props.childRef.current;if(o&&l.isPresent&&!this.props.isPresent){const u=o.offsetParent,d=zy(u)&&u.offsetWidth||0,h=this.props.sizeRef.current;h.height=o.offsetHeight||0,h.width=o.offsetWidth||0,h.top=o.offsetTop,h.left=o.offsetLeft,h.right=d-h.width-h.left}return null}componentDidUpdate(){}render(){return this.props.children}}function X1({children:i,isPresent:l,anchorX:o,root:u}){const d=x.useId(),h=x.useRef(null),g=x.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:N}=x.useContext(Yu),E=i.props?.ref??i?.ref,S=Y1(h,E);return x.useInsertionEffect(()=>{const{width:p,height:f,top:w,left:A,right:T}=g.current;if(l||!h.current||!p||!f)return;const C=o===\"left\"?`left: ${A}`:`right: ${T}`;h.current.dataset.motionPopId=d;const M=document.createElement(\"style\");N&&(M.nonce=N);const y=u??document.head;return y.appendChild(M),M.sheet&&M.sheet.insertRule(`"
      },
      {
        "file": "android\\app\\src\\main\\assets\\public\\assets\\index-i0Euu4OB.js",
        "line": 19,
        "snippet": "`),()=>{y.contains(M)&&y.removeChild(M)}},[l]),n.jsx($1,{isPresent:l,childRef:h,sizeRef:g,children:x.cloneElement(i,{ref:S})})}const Q1=({children:i,initial:l,isPresent:o,onExitComplete:u,custom:d,presenceAffectsLayout:h,mode:g,anchorX:N,root:E})=>{const S=Fu(K1),p=x.useId();let f=!0,w=x.useMemo(()=>(f=!1,{id:p,initial:l,isPresent:o,custom:d,onExitComplete:A=>{S.set(A,!0);for(const T of S.values())if(!T)return;u&&u()},register:A=>(S.set(A,!1),()=>S.delete(A))}),[o,S,u]);return h&&f&&(w={...w}),x.useMemo(()=>{S.forEach((A,T)=>S.set(T,!1))},[o]),x.useEffect(()=>{!o&&!S.size&&u&&u()},[o]),g===\"popLayout\"&&(i=n.jsx(X1,{isPresent:o,anchorX:N,root:E,children:i})),n.jsx(zr.Provider,{value:w,children:i})};function K1(){return new Map}function mp(i=!0){const l=x.useContext(zr);if(l===null)return[!0,null];const{isPresent:o,onExitComplete:u,register:d}=l,h=x.useId();x.useEffect(()=>{if(i)return d(h)},[i]);const g=x.useCallback(()=>i&&u&&u(h),[h,u,i]);return!o&&u?[!1,g]:[!0]}const jr=i=>i.key||\"\";function f0(i){const l=[];return x.Children.forEach(i,o=>{x.isValidElement(o)&&l.push(o)}),l}const Bn=({children:i,custom:l,initial:o=!0,onExitComplete:u,presenceAffectsLayout:d=!0,mode:h=\"sync\",propagate:g=!1,anchorX:N=\"left\",root:E})=>{const[S,p]=mp(g),f=x.useMemo(()=>f0(i),[i]),w=g&&!S?[]:f.map(jr),A=x.useRef(!0),T=x.useRef(f),C=Fu(()=>new Map),M=x.useRef(new Set),[y,L]=x.useState(f),[z,j]=x.useState(f);fp(()=>{A.current=!1,T.current=f;for(let Z=0;Z<z.length;Z++){const _=jr(z[Z]);w.includes(_)?(C.delete(_),M.current.delete(_)):C.get(_)!==!0&&C.set(_,!1)}},[z,w.length,w.join(\"-\")]);const G=[];if(f!==y){let Z=[...f];for(let _=0;_<z.length;_++){const B=z[_],J=jr(B);w.includes(J)||(Z.splice(_,0,B),G.push(B))}return h===\"wait\"&&G.length&&(Z=G),j(f0(Z)),L(f),null}const{forceRender:ee}=x.useContext(Vu);return n.jsx(n.Fragment,{children:z.map(Z=>{const _=jr(Z),B=g&&!S?!1:f===z||w.includes(_),J=()=>{if(M.current.has(_))return;if(M.current.add(_),C.has(_))C.set(_,!0);else return;let ne=!0;C.forEach(F=>{F||(ne=!1)}),ne&&(ee?.(),j(T.current),g&&p?.(),u&&u())};return n.jsx(Q1,{isPresent:B,initial:!A.current||o?void 0:!1,custom:l,presenceAffectsLayout:d,mode:h,root:E,onExitComplete:B?void 0:J,anchorX:N,children:Z},_)})})},hp=x.createContext({strict:!1}),m0={animation:[\"animate\",\"variants\",\"whileHover\",\"whileTap\",\"exit\",\"whileInView\",\"whileFocus\",\"whileDrag\"],exit:[\"exit\"],drag:[\"drag\",\"dragControls\"],focus:[\"whileFocus\"],hover:[\"whileHover\",\"onHoverStart\",\"onHoverEnd\"],tap:[\"whileTap\",\"onTap\",\"onTapStart\",\"onTapCancel\"],pan:[\"onPan\",\"onPanStart\",\"onPanSessionStart\",\"onPanEnd\"],inView:[\"whileInView\",\"onViewportEnter\",\"onViewportLeave\"],layout:[\"layout\",\"layoutId\"]};let h0=!1;function Z1(){if(h0)return;const i={};for(const l in m0)i[l]={isEnabled:o=>m0[l].some(u=>!!o[u])};W0(i),h0=!0}function pp(){return Z1(),Ly()}function J1(i){const l=pp();for(const o in i)l[o]={...l[o],...i[o]};W0(l)}const P1=new Set([\"animate\",\"exit\",\"variants\",\"initial\",\"style\",\"values\",\"variants\",\"transition\",\"transformTemplate\",\"custom\",\"inherit\",\"onBeforeLayoutMeasure\",\"onAnimationStart\",\"onAnimationComplete\",\"onUpdate\",\"onDragStart\",\"onDrag\",\"onDragEnd\",\"onMeasureDragConstraints\",\"onDirectionLock\",\"onDragTransitionEnd\",\"_dragX\",\"_dragY\",\"onHoverStart\",\"onHoverEnd\",\"onViewportEnter\",\"onViewportLeave\",\"globalTapTarget\",\"ignoreStrict\",\"viewport\"]);function Mr(i){return i.startsWith(\"while\")||i.startsWith(\"drag\")&&i!==\"draggable\"||i.startsWith(\"layout\")||i.startsWith(\"onTap\")||i.startsWith(\"onPan\")||i.startsWith(\"onLayout\")||P1.has(i)}let gp=i=>!Mr(i);function W1(i){typeof i==\"function\"&&(gp=l=>l.startsWith(\"on\")?!Mr(l):i(l))}try{W1(require(\"@emotion/is-prop-valid\").default)}catch{}function ew(i,l,o){const u={};for(const d in i)d===\"values\"&&typeof i.values==\"object\"||(gp(d)||o===!0&&Mr(d)||!l&&!Mr(d)||i.draggable&&d.startsWith(\"onDrag\"))&&(u[d]=i[d]);return u}const Lr=x.createContext({});function tw(i,l){if(ep(i)){const{initial:o,animate:u}=i;return{initial:o===!1||Vh(o)?o:void 0,animate:Vh(u)?u:void 0}}return i.inherit!==!1?l:{}}function aw(i){const{initial:l,animate:o}=tw(i,x.useContext(Lr));return x.useMemo(()=>({initial:l,animate:o}),[p0(l),p0(o)])}function p0(i){return Array.isArray(i)?i.join(\" \"):i}const $u=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function xp(i,l,o){for(const u in l)!tp(l[u])&&!Uy(u,o)&&(i[u]=l[u])}function nw({transformTemplate:i},l){return x.useMemo(()=>{const o=$u();return Iy(o,l,i),Object.assign({},o.vars,o.style)},[l])}function sw(i,l){const o=i.style||{},u={};return xp(u,o,i),Object.assign(u,nw(i,l)),u}function iw(i,l){const o={},u=sw(i,l);return i.drag&&i.dragListener!==!1&&(o.draggable=!1,u.userSelect=u.WebkitUserSelect=u.WebkitTouchCallout=\"none\",u.touchAction=i.drag===!0?\"none\":`pan-${i.drag===\"x\"?\"y\":\"x\"}`),i.tabIndex===void 0&&(i.onTap||i.onTapStart||i.whileTap)&&(o.tabIndex=0),o.style=u,o}const bp=()=>({...$u(),attrs:{}});function lw(i,l,o,u){const d=x.useMemo(()=>{const h=bp();return By(h,l,qy(u),i.transformTemplate,i.style),{...h.attrs,style:{...h.style}}},[l]);if(i.style){const h={};xp(h,i.style,i),d.style={...h,...d.style}}return d}const rw=[\"animate\",\"circle\",\"defs\",\"desc\",\"ellipse\",\"g\",\"image\",\"line\",\"filter\",\"marker\",\"mask\",\"metadata\",\"path\",\"pattern\",\"polygon\",\"polyline\",\"rect\",\"stop\",\"switch\",\"symbol\",\"svg\",\"text\",\"tspan\",\"use\",\"view\"];function Xu(i){return typeof i!=\"string\"||i.includes(\"-\")?!1:!!(rw.indexOf(i)>-1||/[A-Z]/u.test(i))}function ow(i,l,o,{latestValues:u},d,h=!1,g){const E=(g??Xu(i)?lw:iw)(l,u,d,i),S=ew(l,typeof i==\"string\",h),p=i!==x.Fragment?{...S,...E,ref:o}:{},{children:f}=l,w=x.useMemo(()=>tp(f)?f.get():f,[f]);return x.createElement(i,{...p,children:w})}function cw({scrapeMotionValuesFromProps:i,createRenderState:l},o,u,d){return{latestValues:uw(o,u,d,i),renderState:l()}}function uw(i,l,o,u){const d={},h=u(i,{});for(const w in h)d[w]=Hy(h[w]);let{initial:g,animate:N}=i;const E=ep(i),S=Gy(i);l&&S&&!E&&i.inherit!==!1&&(g===void 0&&(g=l.initial),N===void 0&&(N=l.animate));let p=o?o.initial===!1:!1;p=p||g===!1;const f=p?N:g;if(f&&typeof f!=\"boolean\"&&!ap(f)){const w=Array.isArray(f)?f:[f];for(let A=0;A<w.length;A++){const T=Vy(i,w[A]);if(T){const{transitionEnd:C,transition:M,...y}=T;for(const L in y){let z=y[L];if(Array.isArray(z)){const j=p?z.length-1:0;z=z[j]}z!==null&&(d[L]=z)}for(const L in C)d[L]=C[L]}}}return d}const yp=i=>(l,o)=>{const u=x.useContext(Lr),d=x.useContext(zr),h=()=>cw(i,l,u,d);return o?h():Fu(h)},dw=yp({scrapeMotionValuesFromProps:Fy,createRenderState:$u}),fw=yp({scrapeMotionValuesFromProps:Yy,createRenderState:bp}),mw=Symbol.for(\"motionComponentSymbol\");function hw(i,l,o){const u=x.useRef(o);x.useInsertionEffect(()=>{u.current=o});const d=x.useRef(null);return x.useCallback(h=>{h&&i.onMount?.(h),l&&(h?l.mount(h):l.unmount());const g=u.current;if(typeof g==\"function\")if(h){const N=g(h);typeof N==\"function\"&&(d.current=N)}else d.current?(d.current(),d.current=null):g(h);else g&&(g.current=h)},[l])}const vp=x.createContext({});function Ji(i){return i&&typeof i==\"object\"&&Object.prototype.hasOwnProperty.call(i,\"current\")}function pw(i,l,o,u,d,h){const{visualElement:g}=x.useContext(Lr),N=x.useContext(hp),E=x.useContext(zr),S=x.useContext(Yu).reducedMotion,p=x.useRef(null);u=u||N.renderer,!p.current&&u&&(p.current=u(i,{visualState:l,parent:g,props:o,presenceContext:E,blockInitialAnimation:E?E.initial===!1:!1,reducedMotionConfig:S,isSVG:h}));const f=p.current,w=x.useContext(vp);f&&!f.projection&&d&&(f.type===\"html\"||f.type===\"svg\")&&gw(p.current,o,d,w);const A=x.useRef(!1);x.useInsertionEffect(()=>{f&&A.current&&f.update(o,E)});const T=o[$y],C=x.useRef(!!T&&!window.MotionHandoffIsComplete?.(T)&&window.MotionHasOptimisedAnimation?.(T));return fp(()=>{f&&(A.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),C.current&&f.animationState&&f.animationState.animateChanges())}),x.useEffect(()=>{f&&(!C.current&&f.animationState&&f.animationState.animateChanges(),C.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(T)}),C.current=!1),f.enteringChildren=void 0)}),f}function gw(i,l,o,u){const{layoutId:d,layout:h,drag:g,dragConstraints:N,layoutScroll:E,layoutRoot:S,layoutCrossfade:p}=l;i.projection=new o(i.latestValues,l[\"data-framer-portal-id\"]?void 0:wp(i.parent)),i.projection.setOptions({layoutId:d,layout:h,alwaysMeasureLayout:!!g||N&&Ji(N),visualElement:i,animationType:typeof h==\"string\"?h:\"both\",initialPromotionConfig:u,crossfade:p,layoutScroll:E,layoutRoot:S})}function wp(i){if(i)return i.options.allowProjection!==!1?i.projection:wp(i.parent)}function cu(i,{forwardMotionProps:l=!1,type:o}={},u,d){u&&J1(u);const h=o?o===\"svg\":Xu(i),g=h?fw:dw;function N(S,p){let f;const w={...x.useContext(Yu),...S,layoutId:xw(S)},{isStatic:A}=w,T=aw(S),C=g(S,A);if(!A&&dp){bw();const M=yw(w);f=M.MeasureLayout,T.visualElement=pw(i,C,w,d,M.ProjectionNode,h)}return n.jsxs(Lr.Provider,{value:T,children:[f&&T.visualElement?n.jsx(f,{visualElement:T.visualElement,...w}):null,ow(i,S,hw(C,T.visualElement,p),C,A,l,h)]})}N.displayName=`motion.${typeof i==\"string\"?i:`create(${i.displayName??i.name??\"\"})`}`;const E=x.forwardRef(N);return E[mw]=i,E}function xw({layoutId:i}){const l=x.useContext(Vu).id;return l&&i!==void 0?l+\"-\"+i:i}function bw(i,l){x.useContext(hp).strict}function yw(i){const l=pp(),{drag:o,layout:u}=l;if(!o&&!u)return{};const d={...o,...u};return{MeasureLayout:o?.isEnabled(i)||u?.isEnabled(i)?d.MeasureLayout:void 0,ProjectionNode:d.ProjectionNode}}function vw(i,l){if(typeof Proxy>\"u\")return cu;const o=new Map,u=(h,g)=>cu(h,g,i,l),d=(h,g)=>u(h,g);return new Proxy(d,{get:(h,g)=>g===\"create\"?u:(o.has(g)||o.set(g,cu(g,void 0,i,l)),o.get(g))})}const ww=(i,l)=>l.isSVG??Xu(i)?new Xy(l):new Qy(l,{allowProjection:i!==x.Fragment});class jw extends Vn{constructor(l){super(l),l.animationState||(l.animationState=Ky(l))}updateAnimationControlsSubscription(){const{animate:l}=this.node.getProps();ap(l)&&(this.unmountControls=l.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:l}=this.node.getProps(),{animate:o}=this.node.prevProps||{};l!==o&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Nw=0;class Sw extends Vn{constructor(){super(...arguments),this.id=Nw++}update(){if(!this.node.presenceContext)return;const{isPresent:l,onExitComplete:o}=this.node.presenceContext,{isPresent:u}=this.node.prevPresenceContext||{};if(!this.node.animationState||l===u)return;const d=this.node.animationState.setActive(\"exit\",!l);o&&!l&&d.then(()=>{o(this.id)})}mount(){const{register:l,onExitComplete:o}=this.node.presenceContext||{};o&&o(this.id),l&&(this.unmount=l(this.id))}unmount(){}}const Cw={animation:{Feature:jw},exit:{Feature:Sw}};function rl(i){return{point:{x:i.pageX,y:i.pageY}}}const Ew=i=>l=>np(l)&&i(l,rl(l));function Wi(i,l,o,u){return Tr(i,l,Ew(o),u)}const jp=({current:i})=>i?i.ownerDocument.defaultView:null,g0=new Set([\"auto\",\"scroll\"]);class Np{constructor(l,o,{transformPagePoint:u,contextWindow:d=window,dragSnapToOrigin:h=!1,distanceThreshold:g=3,element:N}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=A=>{this.handleScroll(A.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=du(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,C=Zy(A.offset,{x:0,y:0})>=this.distanceThreshold;if(!T&&!C)return;const{point:M}=A,{timestamp:y}=Fh;this.history.push({...M,timestamp:y});const{onStart:L,onMove:z}=this.handlers;T||(L&&L(this.lastMoveEvent,A),this.startEvent=this.lastMoveEvent),z&&z(this.lastMoveEvent,A)},this.handlePointerMove=(A,T)=>{this.lastMoveEvent=A,this.lastMoveEventInfo=uu(T,this.transformPagePoint),Va.update(this.updatePoint,!0)},this.handlePointerUp=(A,T)=>{this.end();const{onEnd:C,onSessionEnd:M,resumeAnimation:y}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const L=du(A.type===\"pointercancel\"?this.lastMoveEventInfo:uu(T,this.transformPagePoint),this.history);this.startEvent&&C&&C(A,L),M&&M(A,L)},!np(l))return;this.dragSnapToOrigin=h,this.handlers=o,this.transformPagePoint=u,this.distanceThreshold=g,this.contextWindow=d||window;const E=rl(l),S=uu(E,this.transformPagePoint),{point:p}=S,{timestamp:f}=Fh;this.history=[{...p,timestamp:f}];const{onSessionStart:w}=o;w&&w(l,du(S,this.history)),this.removeListeners=sp(Wi(this.contextWindow,\"pointermove\",this.handlePointerMove),Wi(this.contextWindow,\"pointerup\",this.handlePointerUp),Wi(this.contextWindow,\"pointercancel\",this.handlePointerUp)),N&&this.startScrollTracking(N)}startScrollTracking(l){let o=l.parentElement;for(;o;){const u=getComputedStyle(o);(g0.has(u.overflowX)||g0.has(u.overflowY))&&this.scrollPositions.set(o,{x:o.scrollLeft,y:o.scrollTop}),o=o.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener(\"scroll\",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener(\"scroll\",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener(\"scroll\",this.onElementScroll,{capture:!0}),window.removeEventListener(\"scroll\",this.onWindowScroll)}}handleScroll(l){const o=this.scrollPositions.get(l);if(!o)return;const u=l===window,d=u?{x:window.scrollX,y:window.scrollY}:{x:l.scrollLeft,y:l.scrollTop},h={x:d.x-o.x,y:d.y-o.y};h.x===0&&h.y===0||(u?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=h.x,this.lastMoveEventInfo.point.y+=h.y):this.history.length>0&&(this.history[0].x-=h.x,this.history[0].y-=h.y),this.scrollPositions.set(l,d),Va.update(this.updatePoint,!0))}updateHandlers(l){this.handlers=l}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Jy(this.updatePoint)}}function uu(i,l){return l?{point:l(i.point)}:i}function x0(i,l){return{x:i.x-l.x,y:i.y-l.y}}function du({point:i},l){return{point:i,delta:x0(i,Sp(l)),offset:x0(i,Aw(l)),velocity:kw(l,.1)}}function Aw(i){return i[0]}function Sp(i){return i[i.length-1]}function kw(i,l){if(i.length<2)return{x:0,y:0};let o=i.length-1,u=null;const d=Sp(i);for(;o>=0&&(u=i[o],!(d.timestamp-u.timestamp>Py(l)));)o--;if(!u)return{x:0,y:0};const h=Wy(d.timestamp-u.timestamp);if(h===0)return{x:0,y:0};const g={x:(d.x-u.x)/h,y:(d.y-u.y)/h};return g.x===1/0&&(g.x=0),g.y===1/0&&(g.y=0),g}function Tw(i,{min:l,max:o},u){return l!==void 0&&i<l?i=u?Dr(l,i,u.min):Math.max(i,l):o!==void 0&&i>o&&(i=u?Dr(o,i,u.max):Math.min(i,o)),i}function b0(i,l,o){return{min:l!==void 0?i.min+l:void 0,max:o!==void 0?i.max+o-(i.max-i.min):void 0}}function Dw(i,{top:l,left:o,bottom:u,right:d}){return{x:b0(i.x,o,d),y:b0(i.y,l,u)}}function y0(i,l){let o=l.min-i.min,u=l.max-i.max;return l.max-l.min<i.max-i.min&&([o,u]=[u,o]),{min:o,max:u}}function Mw(i,l){return{x:y0(i.x,l.x),y:y0(i.y,l.y)}}function _w(i,l){let o=.5;const u=ku(i),d=ku(l);return d>u?o=Yh(l.min,l.max-u,i.min):u>d&&(o=Yh(i.min,i.max-d,l.min)),ev(0,1,o)}function Rw(i,l){const o={};return l.min!==void 0&&(o.min=l.min-i.min),l.max!==void 0&&(o.max=l.max-i.min),o}const Mu=.35;function Ow(i=Mu){return i===!1?i=0:i===!0&&(i=Mu),{x:v0(i,\"left\",\"right\"),y:v0(i,\"top\",\"bottom\")}}function v0(i,l,o){return{min:w0(i,l),max:w0(i,o)}}function w0(i,l){return typeof i==\"number\"?i:i[l]||0}const zw=new WeakMap;class Lw{constructor(l){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=tv(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=l}start(l,{snapToCursor:o=!1,distanceThreshold:u}={}){const{presenceContext:d}=this.visualElement;if(d&&d.isPresent===!1)return;const h=f=>{o?(this.stopAnimation(),this.snapToCursor(rl(f).point)):this.pauseAnimation()},g=(f,w)=>{this.stopAnimation();const{drag:A,dragPropagation:T,onDragStart:C}=this.getProps();if(A&&!T&&(this.openDragLock&&this.openDragLock(),this.openDragLock=lv(A),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=w,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ba(y=>{let L=this.getAxisMotionValue(y).get()||0;if(rv.test(L)){const{projection:z}=this.visualElement;if(z&&z.layout){const j=z.layout.layoutBox[y];j&&(L=ku(j)*(parseFloat(L)/100))}}this.originPoint[y]=L}),C&&Va.postRender(()=>C(f,w)),$h(this.visualElement,\"transform\");const{animationState:M}=this.visualElement;M&&M.setActive(\"whileDrag\",!0)},N=(f,w)=>{this.latestPointerEvent=f,this.latestPanInfo=w;const{dragPropagation:A,dragDirectionLock:T,onDirectionLock:C,onDrag:M}=this.getProps();if(!A&&!this.openDragLock)return;const{offset:y}=w;if(T&&this.currentDirection===null){this.currentDirection=Uw(y),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis(\"x\",w.point,y),this.updateAxis(\"y\",w.point,y),this.visualElement.render(),M&&M(f,w)},E=(f,w)=>{this.latestPointerEvent=f,this.latestPanInfo=w,this.stop(f,w),this.latestPointerEvent=null,this.latestPanInfo=null},S=()=>Ba(f=>this.getAnimationState(f)===\"paused\"&&this.getAxisMotionValue(f).animation?.play()),{dragSnapToOrigin:p}=this.getProps();this.panSession=new Np(l,{onSessionStart:h,onStart:g,onMove:N,onSessionEnd:E,resumeAnimation:S},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:u,contextWindow:jp(this.visualElement),element:this.visualElement.current})}stop(l,o){const u=l||this.latestPointerEvent,d=o||this.latestPanInfo,h=this.isDragging;if(this.cancel(),!h||!d||!u)return;const{velocity:g}=d;this.startAnimation(g);const{onDragEnd:N}=this.getProps();N&&Va.postRender(()=>N(u,d))}cancel(){this.isDragging=!1;const{projection:l,animationState:o}=this.visualElement;l&&(l.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:u}=this.getProps();!u&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),o&&o.setActive(\"whileDrag\",!1)}updateAxis(l,o,u){const{drag:d}=this.getProps();if(!u||!Nr(l,d,this.currentDirection))return;const h=this.getAxisMotionValue(l);let g=this.originPoint[l]+u[l];this.constraints&&this.constraints[l]&&(g=Tw(g,this.constraints[l],this.elastic[l])),h.set(g)}resolveConstraints(){const{dragConstraints:l,dragElastic:o}=this.getProps(),u=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,d=this.constraints;l&&Ji(l)?this.constraints||(this.constraints=this.resolveRefConstraints()):l&&u?this.constraints=Dw(u.layoutBox,l):this.constraints=!1,this.elastic=Ow(o),d!==this.constraints&&u&&this.constraints&&!this.hasMutatedConstraints&&Ba(h=>{this.constraints!==!1&&this.getAxisMotionValue(h)&&(this.constraints[h]=Rw(u.layoutBox[h],this.constraints[h]))})}resolveRefConstraints(){const{dragConstraints:l,onMeasureDragConstraints:o}=this.getProps();if(!l||!Ji(l))return!1;const u=l.current,{projection:d}=this.visualElement;if(!d||!d.layout)return!1;const h=av(u,d.root,this.visualElement.getTransformPagePoint());let g=Mw(d.layout.layoutBox,h);if(o){const N=o(nv(g));this.hasMutatedConstraints=!!N,N&&(g=sv(N))}return g}startAnimation(l){const{drag:o,dragMomentum:u,dragElastic:d,dragTransition:h,dragSnapToOrigin:g,onDragTransitionEnd:N}=this.getProps(),E=this.constraints||{},S=Ba(p=>{if(!Nr(p,o,this.currentDirection))return;let f=E&&E[p]||{};g&&(f={min:0,max:0});const w=d?200:1e6,A=d?40:1e7,T={type:\"inertia\",velocity:u?l[p]:0,bounceStiffness:w,bounceDamping:A,timeConstant:750,restDelta:1,restSpeed:10,...h,...f};return this.startAxisValueAnimation(p,T)});return Promise.all(S).then(N)}startAxisValueAnimation(l,o){const u=this.getAxisMotionValue(l);return $h(this.visualElement,l),u.start(iv(l,u,0,o,this.visualElement,!1))}stopAnimation(){Ba(l=>this.getAxisMotionValue(l).stop())}pauseAnimation(){Ba(l=>this.getAxisMotionValue(l).animation?.pause())}getAnimationState(l){return this.getAxisMotionValue(l).animation?.state}getAxisMotionValue(l){const o=`_drag${l.toUpperCase()}`,u=this.visualElement.getProps(),d=u[o];return d||this.visualElement.getValue(l,(u.initial?u.initial[l]:void 0)||0)}snapToCursor(l){Ba(o=>{const{drag:u}=this.getProps();if(!Nr(o,u,this.currentDirection))return;const{projection:d}=this.visualElement,h=this.getAxisMotionValue(o);if(d&&d.layout){const{min:g,max:N}=d.layout.layoutBox[o],E=h.get()||0;h.set(l[o]-Dr(g,N,.5)+E)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:l,dragConstraints:o}=this.getProps(),{projection:u}=this.visualElement;if(!Ji(o)||!u||!this.constraints)return;this.stopAnimation();const d={x:0,y:0};Ba(g=>{const N=this.getAxisMotionValue(g);if(N&&this.constraints!==!1){const E=N.get();d[g]=_w({min:E,max:E},this.constraints[g])}});const{transformTemplate:h}=this.visualElement.getProps();this.visualElement.current.style.transform=h?h({},\"\"):\"none\",u.root&&u.root.updateScroll(),u.updateLayout(),this.resolveConstraints(),Ba(g=>{if(!Nr(g,l,null))return;const N=this.getAxisMotionValue(g),{min:E,max:S}=this.constraints[g];N.set(Dr(E,S,d[g]))})}addListeners(){if(!this.visualElement.current)return;zw.set(this.visualElement,this);const l=this.visualElement.current,o=Wi(l,\"pointerdown\",E=>{const{drag:S,dragListener:p=!0}=this.getProps();S&&p&&!ov(E.target)&&this.start(E)}),u=()=>{const{dragConstraints:E}=this.getProps();Ji(E)&&E.current&&(this.constraints=this.resolveRefConstraints())},{projection:d}=this.visualElement,h=d.addEventListener(\"measure\",u);d&&!d.layout&&(d.root&&d.root.updateScroll(),d.updateLayout()),Va.read(u);const g=Tr(window,\"resize\",()=>this.scalePositionWithinConstraints()),N=d.addEventListener(\"didUpdate\",(({delta:E,hasLayoutChanged:S})=>{this.isDragging&&S&&(Ba(p=>{const f=this.getAxisMotionValue(p);f&&(this.originPoint[p]+=E[p].translate,f.set(f.get()+E[p].translate))}),this.visualElement.render())}));return()=>{g(),o(),h(),N&&N()}}getProps(){const l=this.visualElement.getProps(),{drag:o=!1,dragDirectionLock:u=!1,dragPropagation:d=!1,dragConstraints:h=!1,dragElastic:g=Mu,dragMomentum:N=!0}=l;return{...l,drag:o,dragDirectionLock:u,dragPropagation:d,dragConstraints:h,dragElastic:g,dragMomentum:N}}}function Nr(i,l,o){return(l===!0||l===i)&&(o===null||o===i)}function Uw(i,l=10){let o=null;return Math.abs(i.y)>l?o=\"y\":Math.abs(i.x)>l&&(o=\"x\"),o}class Iw extends Vn{constructor(l){super(l),this.removeGroupControls=Sr,this.removeListeners=Sr,this.controls=new Lw(l)}mount(){const{dragControls:l}=this.node.getProps();l&&(this.removeGroupControls=l.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Sr}update(){const{dragControls:l}=this.node.getProps(),{dragControls:o}=this.node.prevProps||{};l!==o&&(this.removeGroupControls(),l&&(this.removeGroupControls=l.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const j0=i=>(l,o)=>{i&&Va.postRender(()=>i(l,o))};class Bw extends Vn{constructor(){super(...arguments),this.removePointerDownListener=Sr}onPointerDown(l){this.session=new Np(l,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:jp(this.node)})}createPanHandlers(){const{onPanSessionStart:l,onPanStart:o,onPan:u,onPanEnd:d}=this.node.getProps();return{onSessionStart:j0(l),onStart:j0(o),onMove:u,onEnd:(h,g)=>{delete this.session,d&&Va.postRender(()=>d(h,g))}}}mount(){this.removePointerDownListener=Wi(this.node.current,\"pointerdown\",l=>this.onPointerDown(l))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let fu=!1;class qw extends x.Component{componentDidMount(){const{visualElement:l,layoutGroup:o,switchLayoutGroup:u,layoutId:d}=this.props,{projection:h}=l;h&&(o.group&&o.group.add(h),u&&u.register&&d&&u.register(h),fu&&h.root.didUpdate(),h.addEventListener(\"animationComplete\",()=>{this.safeToRemove()}),h.setOptions({...h.options,onExitComplete:()=>this.safeToRemove()})),cv.hasEverUpdated=!0}getSnapshotBeforeUpdate(l){const{layoutDependency:o,visualElement:u,drag:d,isPresent:h}=this.props,{projection:g}=u;return g&&(g.isPresent=h,fu=!0,d||l.layoutDependency!==o||o===void 0||l.isPresent!==h?g.willUpdate():this.safeToRemove(),l.isPresent!==h&&(h?g.promote():g.relegate()||Va.postRender(()=>{const N=g.getStack();(!N||!N.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:l}=this.props.visualElement;l&&(l.root.didUpdate(),uv.postRender(()=>{!l.currentAnimation&&l.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:l,layoutGroup:o,switchLayoutGroup:u}=this.props,{projection:d}=l;fu=!0,d&&(d.scheduleCheckAfterUnmount(),o&&o.group&&o.group.remove(d),u&&u.deregister&&u.deregister(d))}safeToRemove(){const{safeToRemove:l}=this.props;l&&l()}render(){return null}}function Cp(i){const[l,o]=mp(),u=x.useContext(Vu);return n.jsx(qw,{...i,layoutGroup:u,switchLayoutGroup:x.useContext(vp),isPresent:l,safeToRemove:o})}const Hw={pan:{Feature:Bw},drag:{Feature:Iw,ProjectionNode:ip,MeasureLayout:Cp}};function N0(i,l,o){const{props:u}=i;i.animationState&&u.whileHover&&i.animationState.setActive(\"whileHover\",o===\"Start\");const d=\"onHover\"+o,h=u[d];h&&Va.postRender(()=>h(l,rl(l)))}class Gw extends Vn{mount(){const{current:l}=this.node;l&&(this.unmount=dv(l,(o,u)=>(N0(this.node,u,\"Start\"),d=>N0(this.node,d,\"End\"))))}unmount(){}}class Vw extends Vn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let l=!1;try{l=this.node.current.matches(\":focus-visible\")}catch{l=!0}!l||!this.node.animationState||(this.node.animationState.setActive(\"whileFocus\",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive(\"whileFocus\",!1),this.isActive=!1)}mount(){this.unmount=sp(Tr(this.node.current,\"focus\",()=>this.onFocus()),Tr(this.node.current,\"blur\",()=>this.onBlur()))}unmount(){}}function S0(i,l,o){const{props:u}=i;if(i.current instanceof HTMLButtonElement&&i.current.disabled)return;i.animationState&&u.whileTap&&i.animationState.setActive(\"whileTap\",o===\"Start\");const d=\"onTap\"+(o===\"End\"?\"\":o),h=u[d];h&&Va.postRender(()=>h(l,rl(l)))}class Fw extends Vn{mount(){const{current:l}=this.node;l&&(this.unmount=fv(l,(o,u)=>(S0(this.node,u,\"Start\"),(d,{success:h})=>S0(this.node,d,h?\"End\":\"Cancel\")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const _u=new WeakMap,mu=new WeakMap,Yw=i=>{const l=_u.get(i.target);l&&l(i)},$w=i=>{i.forEach(Yw)};function Xw({root:i,...l}){const o=i||document;mu.has(o)||mu.set(o,{});const u=mu.get(o),d=JSON.stringify(l);return u[d]||(u[d]=new IntersectionObserver($w,{root:i,...l})),u[d]}function Qw(i,l,o){const u=Xw(l);return _u.set(i,o),u.observe(i),()=>{_u.delete(i),u.unobserve(i)}}const Kw={some:0,all:1};class Zw extends Vn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:l={}}=this.node.getProps(),{root:o,margin:u,amount:d=\"some\",once:h}=l,g={root:o?o.current:void 0,rootMargin:u,threshold:typeof d==\"number\"?d:Kw[d]},N=E=>{const{isIntersecting:S}=E;if(this.isInView===S||(this.isInView=S,h&&!S&&this.hasEnteredView))return;S&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive(\"whileInView\",S);const{onViewportEnter:p,onViewportLeave:f}=this.node.getProps(),w=S?p:f;w&&w(E)};return Qw(this.node.current,g,N)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>\"u\")return;const{props:l,prevProps:o}=this.node;[\"amount\",\"margin\",\"root\"].some(Jw(l,o))&&this.startObserver()}unmount(){}}function Jw({viewport:i={}},{viewport:l={}}={}){return o=>i[o]!==l[o]}const Pw={inView:{Feature:Zw},tap:{Feature:Fw},focus:{Feature:Vw},hover:{Feature:Gw}},Ww={layout:{ProjectionNode:ip,MeasureLayout:Cp}},ej={...Cw,...Pw,...Hw,...Ww},Le=vw(ej,ww),tj=he.memo(()=>n.jsx(\"div\",{className:\"absolute inset-0 opacity-[0.03] pointer-events-none overflow-hidden\",children:n.jsxs(\"svg\",{width:\"100%\",height:\"100%\",xmlns:\"http://www.w3.org/2000/svg\",children:[n.jsx(\"defs\",{children:n.jsxs(\"pattern\",{id:\"grid\",width:\"40\",height:\"40\",patternUnits:\"userSpaceOnUse\",children:[n.jsx(\"path\",{d:\"M 40 0 L 0 0 0 40\",fill:\"none\",stroke:\"white\",strokeWidth:\"1\"}),n.jsx(\"circle\",{cx:\"0\",cy:\"0\",r:\"1\",fill:\"white\"})]})}),n.jsx(\"rect\",{width:\"100%\",height:\"100%\",fill:\"url(#grid)\"})]})})),Qu=he.memo(({variant:i,className:l=\"\",animate:o=!1})=>{const u=i===\"ghost\"?\"mesh-ghost-blue\":i?`mesh-${i}`:\"\",d={animate1:{x:[0,40,-20,0],y:[0,-30,20,0],scale:[1,1.2,.8,1],transition:{duration:30,repeat:1/0,ease:\"linear\"}},animate2:{x:[0,-30,50,0],y:[0,40,-30,0],scale:[1,.8,1.2,1],transition:{duration:25,repeat:1/0,ease:\"linear\"}},animate3:{x:[0,20,-40,0],y:[0,-40,30,0],scale:[1,1.1,.9,1],transition:{duration:35,repeat:1/0,ease:\"linear\"}}};return n.jsxs(\"div\",{className:`absolute inset-0 pointer-events-none overflow-hidden ${u} ${l}`,children:[n.jsx(tj,{}),n.jsx(\"div\",{className:\"mesh-readability-lock\"}),n.jsx(\"div\",{className:\"mesh-blob mesh-blob-base\"}),n.jsx(Le.div,{variants:d,animate:o?\"animate1\":void 0,className:\"mesh-blob mesh-blob-1\"}),n.jsx(Le.div,{variants:d,animate:o?\"animate2\":void 0,className:\"mesh-blob mesh-blob-2\"}),n.jsx(Le.div,{variants:d,animate:o?\"animate3\":void 0,className:\"mesh-blob mesh-blob-3\"})]})}),aj=({recurring:i,currency:l,totalMonthlyIncome:o,onDelete:u})=>{const d=x.useMemo(()=>i.filter(C=>C.type===\"expense\").map(C=>{let M=\"Lifestyle\";const y=C.description?.toLowerCase()||\"\",L=C.category?.toLowerCase()||\"\";return C.investmentId?M=\"Asset\":(y.includes(\"insurance\")||y.includes(\"cloud\")||y.includes(\"drive\")||y.includes(\"icloud\")||y.includes(\"adobe\")||L.includes(\"insurance\")||L.includes(\"emi\"))&&(M=\"Vital\"),y.includes(\"trial\")||y.includes(\"premium\")&&C.id.length%3,{...C,strategyCategory:M}}),[i]),h=x.useMemo(()=>{const C=[\"spotify\",\"apple music\",\"youtube music\",\"amazon music\",\"tidal\"],M=[\"netflix\",\"prime video\",\"hulu\",\"disney\",\"hbo\",\"hotstar\"],y=d.filter(z=>C.some(j=>z.description?.toLowerCase().includes(j))),L=d.filter(z=>M.some(j=>z.description?.toLowerCase().includes(j)));return d.map(z=>{let j=z.strategyCategory;const G=z.description?.toLowerCase()||\"\";if(y.length>1&&y.includes(z)){const ee=y.reduce((Z,_)=>Z.amount>_.amount?Z:_);z.id!==ee.id&&(j=\"Ghost\")}return L.length>2&&L.includes(z)&&[...L].sort((Z,_)=>_.amount-Z.amount).indexOf(z)>=2&&(j=\"Ghost\"),G.includes(\"trial\")&&(j=\"Ghost\"),{...z,strategyCategory:j}})},[d]),g=h.reduce((C,M)=>{let y=M.amount;return M.frequency===\"yearly\"&&(y=M.amount/12),M.frequency===\"weekly\"&&(y=M.amount*4),M.frequency===\"custom\"&&M.customIntervalDays&&(y=M.amount*(30/M.customIntervalDays)),C+y},0),N=o>0?o/30:1,E=g/N,p=h.filter(C=>C.strategyCategory===\"Ghost\").reduce((C,M)=>{let y=M.amount;return M.frequency===\"yearly\"&&(y=M.amount/12),M.frequency===\"weekly\"&&(y=M.amount*4),C+y},0),f=.01,A=p*(Math.pow(1+f,60)-1)/f,T=(C,M)=>{let y=C;return M===\"yearly\"&&(y=C/12),M===\"weekly\"&&(y=C*4),M===\"custom\"&&(y=C*(30/28)),(y/N).toFixed(1)};return n.jsxs(\"div\",{className:\"space-y-6 animate-in slide-in-from-right duration-500\",children:[n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[n.jsxs(Ot,{className:\"p-6 bg-slate-900/60 border-white/10 relative overflow-hidden\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 p-4 opacity-10\",children:n.jsx(pb,{className:\"w-24 h-24\"})}),n.jsx(\"h3\",{className:\"text-sm font-bold uppercase tracking-widest text-slate-400 mb-4\",children:\"Total Freedom Tax\"}),n.jsxs(\"div\",{className:\"flex items-end gap-2 mb-2\",children:[n.jsx(\"span\",{className:\"text-4xl font-black text-rose-400\",children:E.toFixed(1)}),n.jsx(\"span\",{className:\"text-lg font-bold text-slate-500 mb-1\",children:\"Days/Month\"})]}),n.jsx(\"p\",{className:\"text-xs text-slate-400\",children:'The \"Freedom Tax\" you pay with your life time.'})]}),n.jsxs(Ot,{className:\"p-6 bg-indigo-900/20 border-indigo-500/20 relative overflow-hidden\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 p-4 opacity-10\",children:n.jsx(qn,{className:\"w-24 h-24 text-indigo-400\"})}),n.jsx(\"h3\",{className:\"text-sm font-bold uppercase tracking-widest text-indigo-400 mb-4\",children:\"Growth Pivot Potential\"}),n.jsxs(\"div\",{className:\"flex items-end gap-2 mb-2\",children:[n.jsx(\"span\",{className:\"text-4xl font-black text-indigo-300\",children:Ne(A,l)}),n.jsx(\"span\",{className:\"text-lg font-bold text-indigo-500/60 mb-1\",children:\"in 5 Years\"})]}),n.jsx(\"p\",{className:\"text-xs text-indigo-400/80\",children:'If you cancel \"Ghost\" items and invest the savings at 12%.'})]})]}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"h3\",{className:\"text-lg font-black text-white uppercase tracking-tight flex items-center gap-2\",children:[n.jsx(gb,{className:\"w-5 h-5 text-rose-400\"}),\"Strategist Analysis\"]}),n.jsx(\"div\",{className:\"grid gap-3\",children:h.map(C=>{const M=T(C.amount,C.frequency),y=C.strategyCategory===\"Ghost\",L=C.strategyCategory===\"Vital\",z=C.strategyCategory===\"Asset\";return n.jsxs(Ot,{className:`p-4 border flex items-center justify-between group transition-all overflow-hidden relative ${y?\"mesh-purple border-purple-500/20 hover:border-purple-500/40\":L||z?\"mesh-teal border-teal-500/20\":\"mesh-purple border-purple-500/20\"}`,children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:`w-10 h-10 rounded-xl flex items-center justify-center text-lg ${y?\"bg-rose-500/10 text-rose-400\":L?\"bg-emerald-500/10 text-emerald-400\":z?\"bg-teal-500/10 text-teal-400\":\"bg-slate-800 text-slate-400\"}`,children:y?n.jsx(el,{className:\"w-5 h-5\"}):L?n.jsx(sl,{className:\"w-5 h-5\"}):z?n.jsx(qn,{className:\"w-5 h-5\"}):n.jsx(ju,{className:\"w-5 h-5\"})}),n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"font-bold text-slate-200\",children:C.description||C.source}),n.jsxs(\"div\",{className:\"flex items-center gap-2 mt-1\",children:[n.jsx(\"span\",{className:`text-[10px] font-black uppercase px-1.5 py-0.5 rounded ${y?\"bg-rose-500 text-black\":L?\"bg-emerald-500/20 text-emerald-400\":z?\"bg-teal-500/20 text-teal-400\":\"bg-slate-700 text-slate-400\"}`,children:C.strategyCategory}),n.jsxs(\"span\",{className:\"text-[10px] text-slate-500 font-medium\",children:[\"Freedom Tax: \",M,\" days\"]})]})]})]}),n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsxs(\"div\",{className:\"text-right\",children:[n.jsx(\"p\",{className:\"font-bold text-slate-200\",children:Ne(C.amount,l)}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 uppercase\",children:C.frequency})]}),y&&n.jsx(Re,{size:\"sm\",variant:\"destructive\",className:\"opacity-0 group-hover:opacity-100 transition-opacity\",onClick:()=>u(C.id,C.description||\"Subscription\"),children:\"Kill\"})]})]},C.id)})})]})]})};function Ru({delayDuration:i=0,...l}){return n.jsx(xb,{\"data-slot\":\"tooltip-provider\",delayDuration:i,...l})}function hu({...i}){return n.jsx(Ru,{children:n.jsx(bb,{\"data-slot\":\"tooltip\",...i})})}function pu({...i}){return n.jsx(yb,{\"data-slot\":\"tooltip-trigger\",...i})}function gu({className:i,sideOffset:l=0,children:o,...u}){return n.jsx(vb,{children:n.jsxs(wb,{\"data-slot\":\"tooltip-content\",sideOffset:l,className:De(\"bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-[300] w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance\",i),...u,children:[o,n.jsx(jb,{className:\"bg-primary fill-primary z-[300] size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]\"})]})})}function C0({className:i,defaultValue:l,value:o,min:u=0,max:d=100,...h}){const g=x.useMemo(()=>Array.isArray(o)?o:Array.isArray(l)?l:[u,d],[o,l,u,d]);return n.jsxs(Nb,{\"data-slot\":\"slider\",defaultValue:l,value:o,min:u,max:d,className:De(\"relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col\",i),...h,children:[n.jsx(Sb,{\"data-slot\":\"slider-track\",className:De(\"bg-slate-700/50 relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-2 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5\"),children:n.jsx(Cb,{\"data-slot\":\"slider-range\",className:De(\"bg-blue-500 absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full\")})}),Array.from({length:g.length},(N,E)=>n.jsx(Eb,{\"data-slot\":\"slider-thumb\",className:\"border-blue-400 bg-white ring-blue-500/30 block size-7 shrink-0 rounded-full border-2 shadow-lg transition-[color,box-shadow] hover:ring-8 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50 cursor-grab active:cursor-grabbing\"},E))]})}const nj=Ou(\"inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap\",{variants:{variant:{default:\"bg-transparent\",outline:\"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\"},size:{default:\"h-9 px-2 min-w-9\",sm:\"h-8 px-1.5 min-w-8\",lg:\"h-10 px-2.5 min-w-10\"}},defaultVariants:{variant:\"default\",size:\"default\"}}),Ep=x.createContext({size:\"default\",variant:\"default\"});function sj({className:i,variant:l,size:o,children:u,...d}){return n.jsx(Ab,{\"data-slot\":\"toggle-group\",\"data-variant\":l,\"data-size\":o,className:De(\"group/toggle-group flex w-fit items-center rounded-md data-[variant=outline]:shadow-xs\",i),...d,children:n.jsx(Ep.Provider,{value:{variant:l,size:o},children:u})})}function xu({className:i,children:l,variant:o,size:u,...d}){const h=x.useContext(Ep);return n.jsx(kb,{\"data-slot\":\"toggle-group-item\",\"data-variant\":h.variant||o,\"data-size\":h.size||u,className:De(nj({variant:h.variant||o,size:h.size||u}),\"min-w-0 flex-1 shrink-0 rounded-none shadow-none first:rounded-l-md last:rounded-r-md focus:z-10 focus-visible:z-10 data-[variant=outline]:border-l-0 data-[variant=outline]:first:border-l\",i),...d,children:l})}function ij({className:i,...l}){return n.jsx(Tb,{\"data-slot\":\"tabs\",className:De(\"flex flex-col gap-2\",i),...l})}function lj({className:i,...l}){return n.jsx(Db,{\"data-slot\":\"tabs-list\",className:De(\"bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex\",i),...l})}function bu({className:i,...l}){return n.jsx(Mb,{\"data-slot\":\"tabs-trigger\",className:De(\"data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",i),...l})}function yu({className:i,...l}){return n.jsx(_b,{\"data-slot\":\"tabs-content\",className:De(\"flex-1 outline-none\",i),...l})}const rj=he.memo(({liabilities:i,debts:l,currency:o,totalMonthlyIncome:u})=>{const[d,h]=x.useState(null),[g,N]=x.useState(null),[E,S]=x.useState([]),[p,f]=x.useState(60),[w,A]=x.useState(!1);he.useEffect(()=>{if(i.length>0&&E.length===0){const F=i.filter(oe=>oe.interestRate>10||oe.tenure<120).map(oe=>oe.id);S(F.length>0?F:i.map(oe=>oe.id))}},[i,E]);const{totalOutstanding:T,totalPrincipal:C,totalEMI:M,averageInterestRate:y,payoffProgress:L,monthsToFreedom:z,totalEstimatedInterest:j,highestInterestLoan:G,strategies:ee}=x.useMemo(()=>{const F=l.filter(V=>V.type===\"borrowed\"&&V.status===\"pending\"),oe=[...i.map(V=>({...V,unifiedType:\"institutional\"})),...F.map(V=>({id:V.id,name:V.personName,outstanding:V.amount,principal:V.amount,interestRate:V.interestRate||0,emiAmount:0,tenure:0,unifiedType:\"personal\"}))],ge=oe.reduce((V,te)=>V+te.outstanding,0),O=oe.reduce((V,te)=>V+te.principal,0),k=oe.reduce((V,te)=>V+te.emiAmount,0),U=oe.reduce((V,te)=>V+te.interestRate*te.outstanding,0),Q=ge>0?U/ge:0,ae=oe.reduce((V,te)=>{if(te.unifiedType===\"personal\")return V;const me=te.outstanding,ie=te.interestRate/12/100,le=te.emiAmount;if(ie===0||le<=me*ie)return V;const je=Math.log(le/(le-me*ie))/Math.log(1+ie),Ae=le*je;return V+Math.max(0,Ae-me)},0),v=oe.reduce((V,te)=>{if(te.unifiedType===\"personal\")return V;const me=te.outstanding,ie=te.interestRate/12/100,le=te.emiAmount;if(ie===0)return Math.max(V,le>0?me/le:0);if(le<=me*ie)return 360;const je=Math.log(le/(le-me*ie))/Math.log(1+ie);return Math.max(V,je)},0),D=[...oe].sort((V,te)=>te.interestRate-V.interestRate)[0],W=[...oe].sort((V,te)=>V.outstanding-te.outstanding),q=[...oe].sort((V,te)=>te.interestRate-V.interestRate),Y=[{id:\"avalanche\",icon:Rb,title:\"Avalanche Method\",color:\"blue\",bgColor:\"bg-blue-50 dark:bg-blue-900/20\",borderColor:\"border-blue-200 dark:border-blue-800\",textColor:\"text-blue-600\",description:\"Pay off highest interest rate loans first\",savings:\"Saves the most money on interest\",order:q.slice(0,3),recommended:i.length>1&&i.some(V=>V.interestRate>12),reason:\"High interest detected (>12%)\"},{id:\"snowball\",icon:Ob,title:\"Snowball Method\",color:\"purple\",bgColor:\"bg-purple-50 dark:bg-purple-900/20\",borderColor:\"border-purple-200 dark:border-purple-800\",textColor:\"text-purple-600\",description:\"Pay off smallest balances first\",savings:\"Builds momentum with quick wins\",order:W.slice(0,3),recommended:i.filter(V=>V.outstanding<5e4).length>=3,reason:\"Significant volume of small-balance debts (>3)\"},{id:\"consolidation\",icon:Hh,title:\"Debt Consolidation\",color:\"green\",bgColor:\"bg-green-50 dark:bg-green-900/20\",borderColor:\"border-green-200 dark:border-green-800\",textColor:\"text-green-600\",description:\"Combine multiple debts into one loan\",savings:\"Simplifies payments, may lower rate\",recommended:i.length>4,reason:\"Complex debt structure detected (>4 active streams)\",consolidationRate:Math.max(6,Q-2)}];return{totalOutstanding:ge,totalPrincipal:O,totalEMI:k,averageInterestRate:Q,payoffProgress:O>0?Math.max(0,(O-ge)/O*100):0,monthsToFreedom:Math.ceil(v),totalEstimatedInterest:ae,highestInterestLoan:D,strategies:Y}},[i,l]),Z=g??y,{calculatedWhatIfEMI:_,emiDifference:B,currentSelectedEMI:J}=x.useMemo(()=>{const F=i.filter(O=>E.includes(O.id)),oe=F.reduce((O,k)=>O+k.emiAmount,0),ge=F.reduce((O,k)=>{const U=k.outstanding,Q=(g??y)/12/100,ae=p;if(U<=0||ae<=0)return O;if(Q===0)return O+U/ae;const v=U*Q*Math.pow(1+Q,ae)/(Math.pow(1+Q,ae)-1);return O+v},0);return{calculatedWhatIfEMI:ge,emiDifference:oe-ge,currentSelectedEMI:oe}},[i,E,g,y,p]),ne=x.useMemo(()=>[{icon:ju,title:\"Make Extra Payments\",description:\"Even small extra payments directly reduce principal.\",impact:\"High\",color:\"orange\",suggestion:`Pay ${Ne(Math.round(M*.1),o)} extra/mo`},{icon:ei,title:\"Refinance Loans\",description:\"Find lower rates to reduce your monthly interest.\",impact:\"Medium\",color:\"blue\",suggestion:G?`Target ${G.name} (${G.interestRate}%)`:\"Monitor efficient rates\"},{icon:qn,title:\"Automate Payments\",description:\"Never miss a due date and avoid all late fees.\",impact:\"Low\",color:\"green\",suggestion:\"Set up auto-pay for peace of mind\"}],[M,o,G]);return i.length===0?n.jsx(Ot,{className:\"p-8 text-center bg-gray-50 dark:bg-gray-900 shadow-soft border-dashed border-2 border-gray-200 dark:border-gray-800\",children:n.jsxs(\"div\",{className:\"max-w-md mx-auto\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4\",children:n.jsx(Hn,{className:\"w-8 h-8 text-green-600\"})}),n.jsx(\"h3\",{className:\"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2\",children:\"Debt-Free Zone!\"}),n.jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400 mb-6\",children:\"You don't have any liabilities recorded. This is a great place to be! Track your loans, credit cards, or other debts here once you have them.\"})]})}):n.jsx(\"div\",{className:\"space-y-4\",children:n.jsxs(\"div\",{className:\"mesh-gradient-card card-debt rounded-[32px] overflow-hidden group relative\",children:[n.jsx(Qu,{variant:\"debt\"}),n.jsxs(\"div\",{className:\"frosted-plate p-0 relative z-10\",children:[n.jsxs(\"div\",{className:\"p-5 flex items-center justify-between cursor-pointer hover:bg-white/5 transition-colors relative z-20\",onClick:()=>A(!w),children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-rose-500/10 rounded-2xl flex items-center justify-center border border-rose-500/20 shadow-[0_0_15px_rgba(244,63,94,0.1)]\",children:n.jsx(Ar,{className:\"w-6 h-6 text-rose-400\"})}),n.jsxs(\"div\",{children:[n.jsx(\"h3\",{className:\"text-white font-black text-xs uppercase tracking-[0.2em]\",children:\"Liability Node\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-400 font-bold uppercase tracking-widest mt-0.5\",children:\"Strategic Debt Stream\"})]})]}),n.jsxs(\"div\",{className:\"flex items-center gap-6\",children:[n.jsxs(\"div\",{className:\"hidden sm:block text-right\",children:[n.jsx(\"p\",{className:\"text-[9px] text-slate-500 uppercase font-black tracking-[0.2em] mb-1\",children:\"Total Obligations\"}),n.jsxs(\"div\",{className:\"relative\",children:[n.jsx(\"p\",{className:\"text-sm font-black text-rose-500 tabular-nums\",children:Ne(T,o)}),n.jsx(\"div\",{className:\"absolute inset-0 bg-rose-500/20 blur-lg -z-10 animate-pulse\"})]})]}),n.jsx(\"div\",{className:\"w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center text-slate-400 border border-white/10 hover:bg-white/10 hover:scale-105 active:scale-95 transition-all\",children:w?n.jsx(_r,{size:20}):n.jsx(nl,{size:20})})]})]}),n.jsx(Bn,{children:w&&n.jsx(Le.div,{initial:{height:0,opacity:0},animate:{height:\"auto\",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:\"easeInOut\"},className:\"overflow-hidden\",children:n.jsx(\"div\",{className:\"p-4 pt-0\",children:n.jsxs(ij,{defaultValue:\"overview\",className:\"w-full\",children:[n.jsx(\"div\",{className:\"flex items-center justify-center mb-6\",children:n.jsxs(lj,{className:\"grid w-full grid-cols-3 max-w-sm bg-slate-800/50 p-1 border border-white/5\",children:[n.jsx(bu,{value:\"overview\",className:\"text-xs data-[state=active]:bg-slate-700\",children:\"Overview\"}),n.jsx(bu,{value:\"strategies\",className:\"text-xs data-[state=active]:bg-slate-700\",children:\"Strategies\"}),n.jsx(bu,{value:\"impact\",className:\"text-xs data-[state=active]:bg-slate-700\",children:\"Impact\"})]})}),n.jsxs(yu,{value:\"overview\",className:\"space-y-4 mt-0\",children:[n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3\",children:[n.jsxs(\"div\",{className:\"bg-slate-800/40 border border-white/5 p-3 rounded-2xl\",children:[n.jsx(\"p\",{className:\"text-[10px] text-slate-500 uppercase tracking-wider\",children:\"Total Outstanding\"}),n.jsx(\"p\",{className:\"text-sm font-bold text-rose-400 mt-0.5 tabular-nums line-clamp-1\",children:u0(T,o)})]}),n.jsx(Ru,{children:n.jsxs(\"div\",{className:\"bg-slate-800/40 border border-white/5 p-3 rounded-2xl\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-1\",children:[n.jsx(\"p\",{className:\"text-[10px] text-slate-500 uppercase tracking-wider\",children:\"Monthly EMI\"}),n.jsxs(hu,{children:[n.jsx(pu,{children:n.jsx(K0,{className:\"w-3 h-3 text-slate-600\"})}),n.jsx(gu,{children:n.jsx(\"p\",{className:\"text-xs\",children:\"Equated Monthly Installment across all loans.\"})})]})]}),n.jsx(\"p\",{className:\"text-sm font-bold text-orange-400 mt-0.5 tabular-nums\",children:u0(M,o)})]})}),n.jsxs(\"div\",{className:\"bg-slate-800/40 border border-white/5 p-3 rounded-2xl\",children:[n.jsx(\"p\",{className:\"text-[10px] text-slate-500 uppercase tracking-wider\",children:\"Avg. Interest\"}),n.jsxs(\"p\",{className:\"text-sm font-bold text-amber-400 mt-0.5 tabular-nums\",children:[y.toFixed(1),\"%\"]})]}),n.jsxs(\"div\",{className:\"bg-slate-800/40 border border-white/5 p-3 rounded-2xl\",children:[n.jsx(\"p\",{className:\"text-[10px] text-slate-500 uppercase tracking-wider\",children:\"Debt Freedom\"}),n.jsx(\"p\",{className:\"text-sm font-bold text-blue-400 mt-0.5 tabular-nums\",children:V1(z)})]})]}),n.jsxs(\"div\",{className:\"bg-slate-800/30 border border-white/5 p-4 rounded-2xl\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-end mb-2\",children:[n.jsx(\"p\",{className:\"text-xs font-medium text-slate-300\",children:\"Overall Payoff Progress\"}),n.jsxs(\"span\",{className:\"text-sm font-bold text-emerald-400\",children:[L.toFixed(1),\"%\"]})]}),n.jsx(\"div\",{className:\"w-full h-1.5 bg-slate-800 rounded-full overflow-hidden\",children:n.jsx(Le.div,{initial:{width:0},animate:{width:`${Math.max(0,L)}%`},className:\"h-full bg-gradient-to-r from-emerald-500 to-teal-400\"})}),n.jsxs(\"div\",{className:\"flex justify-between mt-2\",children:[n.jsxs(\"p\",{className:\"text-[10px] text-slate-500\",children:[\"Paid: \",Ne(C-T,o)]}),n.jsxs(\"p\",{className:\"text-[10px] text-slate-500\",children:[\"Total: \",Ne(C,o)]})]})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[n.jsxs(Ot,{className:\"p-4 bg-slate-800/30 border-white/5 rounded-2xl shadow-none\",children:[n.jsxs(\"h4\",{className:\"text-xs font-bold text-slate-400 uppercase tracking-wider mb-4 flex items-center gap-2\",children:[n.jsx(zb,{size:14,className:\"text-indigo-400\"}),\"Repayment Breakdown\"]}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[10px] uppercase tracking-wider text-slate-500\",children:[n.jsx(\"span\",{children:\"Principal\"}),n.jsx(\"span\",{children:\"Interest\"})]}),n.jsx(\"div\",{className:\"w-full h-8 bg-slate-900 rounded-xl overflow-hidden flex p-1\",children:n.jsxs(Ru,{children:[n.jsxs(hu,{children:[n.jsx(pu,{asChild:!0,children:(()=>{const F={style:{\"--width\":`${T/(T+j)*100}%`}};return n.jsx(\"div\",{className:\"h-full bg-rose-500/80 rounded-l-lg w-[var(--width)]\",...F})})()}),n.jsxs(gu,{children:[\"Principal: \",Ne(T,o)]})]}),n.jsxs(hu,{children:[n.jsx(pu,{asChild:!0,children:(()=>{const F={style:{\"--width\":`${j/(T+j)*100}%`}};return n.jsx(\"div\",{className:\"h-full bg-orange-400/80 rounded-r-lg w-[var(--width)]\",...F})})()}),n.jsxs(gu,{children:[\"Interest: \",Ne(j,o)]})]})]})}),n.jsxs(\"div\",{className:\"flex justify-between text-xs text-slate-400\",children:[n.jsxs(\"span\",{className:\"flex items-center gap-1.5 font-medium\",children:[n.jsx(\"div\",{className:\"w-2 h-2 rounded-full bg-rose-500\"}),\" Principal\"]}),n.jsxs(\"span\",{className:\"flex items-center gap-1.5 font-medium\",children:[n.jsx(\"div\",{className:\"w-2 h-2 rounded-full bg-orange-400\"}),\" Interest\"]})]})]})]}),n.jsx(Ot,{className:\"p-4 bg-slate-800/30 border-white/5 rounded-2xl shadow-none\",children:n.jsxs(\"div\",{className:\"flex gap-3 h-full items-center\",children:[n.jsx(el,{className:\"w-10 h-10 text-amber-500/30 flex-shrink-0\"}),n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"text-sm font-bold text-slate-200\",children:\"Payment Strategy\"}),n.jsxs(\"p\",{className:\"text-xs text-slate-400 mt-1 leading-relaxed\",children:[\"Your \",Ne(M,o),\" monthly EMI represents \",(M/u*100).toFixed(1),\"% of your income. Aim to keep this under 40% for financial stability.\"]})]})]})})]})]}),n.jsxs(yu,{value:\"strategies\",className:\"space-y-4 mt-0\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[n.jsxs(\"h4\",{className:\"text-xs font-bold text-slate-400 uppercase tracking-wider flex items-center gap-2\",children:[n.jsx(Lb,{size:14,className:\"text-amber-400\"}),\"Compare Methods\"]}),n.jsxs(sj,{type:\"single\",value:d||\"\",onValueChange:F=>h(F||null),className:\"bg-slate-900/50 p-1 border border-white/5 rounded-lg\",children:[n.jsx(xu,{value:\"avalanche\",className:\"px-3 text-[10px] h-7 data-[state=active]:bg-slate-700\",children:\"Avalanche\"}),n.jsx(xu,{value:\"snowball\",className:\"px-3 text-[10px] h-7 data-[state=active]:bg-slate-700\",children:\"Snowball\"}),n.jsx(xu,{value:\"consolidation\",className:\"px-3 text-[10px] h-7 data-[state=active]:bg-slate-700\",children:\"Consolidation\"})]})]}),d?n.jsx(\"div\",{className:\"grid grid-cols-1 gap-4\",children:ee.filter(F=>F.id===d).map(F=>{const oe=F.icon,ge=F.id===\"avalanche\"?\"text-blue-400\":F.id===\"snowball\"?\"text-purple-400\":\"text-emerald-400\";return n.jsx(\"div\",{className:\"p-4 rounded-2xl bg-slate-800/40 border border-white/5\",children:n.jsxs(\"div\",{className:\"flex items-start gap-4\",children:[n.jsx(\"div\",{className:\"w-10 h-10 rounded-xl flex items-center justify-center bg-slate-900 border border-white/5\",children:n.jsx(oe,{className:`w-5 h-5 ${ge}`})}),n.jsxs(\"div\",{className:\"flex-1\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-2 mb-1\",children:[n.jsx(\"h5\",{className:\"font-bold text-slate-100\",children:F.title}),F.recommended&&n.jsxs(\"div\",{className:\"flex items-center gap-1.5\",children:[n.jsx(\"span\",{className:\"text-[10px] bg-emerald-500/20 text-emerald-400 px-2 py-0.5 rounded-full border border-emerald-500/20 font-bold uppercase\",children:\"Optimal\"}),n.jsxs(\"span\",{className:\"text-[9px] text-slate-500 font-medium italic\",children:[\"(\",F.reason,\")\"]})]})]}),n.jsx(\"p\",{className:\"text-xs text-slate-400 mb-4\",children:F.description}),F.order&&n.jsx(\"div\",{className:\"space-y-2\",children:F.order.map((O,k)=>n.jsxs(\"div\",{className:\"flex items-center gap-3 bg-slate-900/50 p-2.5 rounded-xl border border-white/5\",children:[n.jsx(\"div\",{className:\"w-6 h-6 rounded-full bg-slate-800 text-[10px] flex items-center justify-center font-bold text-slate-400 border border-white/5\",children:k+1}),n.jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[n.jsx(\"p\",{className:\"text-xs font-medium text-slate-200 truncate\",children:O.name}),n.jsxs(\"p\",{className:\"text-[10px] text-slate-500\",children:[O.interestRate,\"% Rate\"]})]}),n.jsx(\"p\",{className:\"text-xs font-bold text-slate-200\",children:Ne(O.outstanding,o)})]},O.id))})]})]})},F.id)})}):n.jsxs(\"div\",{className:\"py-12 text-center bg-slate-900/20 rounded-2xl border border-dashed border-white/5\",children:[n.jsx(Hh,{className:\"w-8 h-8 text-slate-700 mx-auto mb-2\"}),n.jsx(\"p\",{className:\"text-xs text-slate-500\",children:\"Pick a strategy to visualize the payoff order\"})]})]}),n.jsxs(yu,{value:\"impact\",className:\"space-y-4 mt-0\",children:[n.jsxs(\"div\",{className:\"p-4 rounded-2xl bg-slate-800/40 border border-white/5\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-2 mb-6\",children:[n.jsx(ju,{className:\"w-4 h-4 text-blue-400\"}),n.jsx(\"h4\",{className:\"text-xs font-bold text-slate-400 uppercase tracking-wider\",children:\"Refinance & Consolidation Impact\"})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(\"div\",{className:\"flex flex-col gap-1 px-1\",children:n.jsxs(\"div\",{className:\"flex justify-between items-center\",children:[n.jsx(\"span\",{className:\"text-xs text-slate-400\",children:\"Consolidation Interest Rate:\"}),n.jsxs(\"span\",{className:\"text-lg font-bold text-blue-400\",children:[Z.toFixed(1),\"%\"]})]})}),n.jsx(C0,{value:[Z],min:Math.max(0,y-5),max:Math.max(20,y+5),step:.1,onValueChange:F=>N(F[0]),className:\"py-4 cursor-pointer\"}),n.jsxs(\"div\",{className:\"flex flex-col gap-1 px-1 pt-2\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-center\",children:[n.jsx(\"span\",{className:\"text-xs text-slate-400\",children:\"New Loan Tenure:\"}),n.jsxs(\"span\",{className:\"text-lg font-bold text-blue-400\",children:[p,\" months\"]})]}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500\",children:p>=12?`${(p/12).toFixed(1)} years`:\"Short term\"})]}),n.jsx(C0,{value:[p],min:12,max:360,step:12,onValueChange:F=>f(F[0]),className:\"py-4 cursor-pointer\"})]}),n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(\"h5\",{className:\"text-[10px] font-bold text-slate-500 uppercase tracking-widest px-1\",children:\"Select Debts to Consolidate\"}),n.jsx(\"div\",{className:\"space-y-2 max-h-[180px] overflow-y-auto pr-2 custom-scrollbar\",children:i.map(F=>{const oe=E.includes(F.id),ge=F.tenure>=120;return n.jsxs(\"div\",{onClick:()=>{S(O=>O.includes(F.id)?O.filter(k=>k!==F.id):[...O,F.id])},className:`p-3 rounded-xl border transition-all cursor-pointer flex items-center gap-3 ${oe?\"bg-blue-500/10 border-blue-500/30\":\"bg-slate-900/40 border-white/5 opacity-60\"}`,children:[n.jsx(\"div\",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors ${oe?\"bg-blue-500 border-blue-400\":\"border-slate-600\"}`,children:oe&&n.jsx(\"div\",{className:\"w-2 h-2 bg-white rounded-sm\"})}),n.jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[n.jsxs(\"div\",{className:\"flex justify-between\",children:[n.jsx(\"p\",{className:\"text-xs font-bold text-slate-200 truncate\",children:F.name}),n.jsx(\"p\",{className:\"text-xs text-slate-400\",children:Ne(F.outstanding,o)})]}),n.jsxs(\"div\",{className:\"flex justify-between mt-0.5\",children:[n.jsxs(\"p\",{className:\"text-[10px] text-slate-500\",children:[F.interestRate,\"% • \",F.tenure,\" mo\"]}),ge&&n.jsx(\"span\",{className:\"text-[9px] text-orange-400/80 font-medium\",children:\"Long Term\"})]})]})]},F.id)})})]})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{className:\"bg-slate-900/50 p-4 rounded-2xl border border-white/5\",children:[n.jsx(\"p\",{className:\"text-[10px] text-slate-500 uppercase tracking-wider mb-1\",children:\"Current EMI (Selection)\"}),n.jsx(\"p\",{className:\"text-xl font-bold text-slate-300\",children:Ne(J,o)})]}),n.jsxs(\"div\",{className:\"bg-slate-900/50 p-4 rounded-2xl border border-white/5\",children:[n.jsx(\"p\",{className:\"text-[10px] text-slate-500 uppercase tracking-wider mb-1\",children:\"New Consolidated EMI\"}),n.jsx(\"p\",{className:\"text-xl font-bold text-blue-400\",children:Ne(_,o)})]})]}),n.jsxs(\"div\",{className:`p-4 rounded-2xl border flex items-center gap-4 ${B>0?\"bg-emerald-500/5 border-emerald-500/10\":\"bg-rose-500/5 border-rose-500/10\"}`,children:[n.jsx(\"div\",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${B>0?\"bg-emerald-500/20 text-emerald-400\":\"bg-rose-500/20 text-rose-400\"}`,children:B>0?n.jsx(Ar,{size:20}):n.jsx(el,{size:20})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-[10px] text-slate-500 uppercase tracking-wider mb-0.5\",children:B>0?\"Potential Monthly Savings\":\"Monthly Cost Increase\"}),n.jsxs(\"p\",{className:`text-xl font-bold ${B>=0?\"text-emerald-400\":\"text-rose-400\"}`,children:[B>=0?\"+\":\"\",Ne(B,o)]})]})]})]})]}),n.jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-3\",children:ne.map(F=>{const oe=F.icon;return n.jsxs(\"div\",{className:\"p-3 bg-slate-800/20 border border-white/5 rounded-2xl\",children:[n.jsx(\"div\",{className:\"w-8 h-8 rounded-lg bg-slate-900 border border-white/5 flex items-center justify-center mb-2\",children:n.jsx(oe,{className:\"w-4 h-4 text-slate-400\"})}),n.jsx(\"h5\",{className:\"text-[11px] font-bold text-slate-200\",children:F.title}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 mt-1 leading-tight\",children:F.suggestion})]},F.title)})})]})]})})})})]})]})})});function oj(){const{accounts:i,currency:l,recurringTransactions:o,liabilities:u,debts:d,createRecurringTransaction:h,updateRecurringTransaction:g,deleteRecurringTransaction:N,processRecurringTransactions:E,createLiability:S,updateLiability:p}=ai(),[f,w]=x.useState(\"list\"),A=o.filter(v=>v.type===\"income\").reduce((v,D)=>{let W=D.amount;return D.frequency===\"yearly\"&&(W=D.amount/12),D.frequency===\"weekly\"&&(W=D.amount*4),v+W},0),T=v=>({daily:\"Daily\",weekly:\"Weekly\",monthly:\"Monthly\",yearly:\"Yearly\"})[v]||v,C=({rec:v})=>{const D=i.find(Y=>Y.id===v.accountId),W=u.find(Y=>Y.id===v.liabilityId),q=W?Math.max(0,Math.min(100,(W.principal-W.outstanding)/W.principal*100)):0;return n.jsxs(Ot,{className:\"p-6 bg-slate-900/40 border-white/5 rounded-[28px] border hover:bg-slate-900/60 transition-all duration-300 group relative overflow-hidden\",children:[n.jsx(\"div\",{className:`absolute top-0 right-0 w-24 h-24 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20 ${v.type===\"income\"?\"bg-emerald-500\":\"bg-rose-500\"}`}),n.jsxs(\"div\",{className:\"flex items-start justify-between mb-8 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:`w-14 h-14 border border-white/5 rounded-2xl flex items-center justify-center shadow-inner group-hover:scale-105 transition-transform text-2xl ${v.type===\"income\"?\"bg-emerald-500/10 text-emerald-400\":\"bg-rose-500/10 text-rose-400\"}`,children:v.type===\"income\"?\"💰\":W?\"🏦\":\"💸\"}),n.jsxs(\"div\",{className:\"min-w-0\",children:[n.jsx(\"h3\",{className:\"text-base font-bold text-slate-100 truncate flex items-center gap-2\",children:v.description||v.source}),n.jsxs(\"p\",{className:\"text-[10px] uppercase font-black tracking-widest text-slate-600 mt-1\",children:[T(v.frequency),\" \",W&&\"• Loan\"]})]})]}),n.jsxs(\"div\",{className:\"flex bg-slate-900/80 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity\",children:[n.jsx(Re,{variant:\"ghost\",size:\"sm\",onClick:()=>ne(v),className:\"w-10 h-10 p-0 rounded-l-xl hover:bg-slate-800 text-slate-500 hover:text-indigo-400\",children:n.jsx(Ib,{className:\"w-4 h-4\"})}),n.jsx(\"div\",{className:\"w-px bg-white/10 my-2\"}),n.jsx(Re,{variant:\"ghost\",size:\"sm\",onClick:()=>ge(v),className:\"w-10 h-10 p-0 rounded-r-xl hover:bg-rose-500/10 hover:text-rose-400 text-slate-500 hover:text-rose-400\",children:n.jsx(tl,{className:\"w-4 h-4\"})})]})]}),n.jsxs(\"div\",{className:\"space-y-6 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-end\",children:[n.jsxs(\"div\",{className:\"flex flex-col\",children:[n.jsx(\"span\",{className:\"text-[10px] uppercase tracking-widest font-black text-slate-600 mb-1 font-mono\",children:W?\"Monthly EMI\":\"Commitment\"}),n.jsxs(\"span\",{className:`text-2xl font-black tabular-nums leading-none font-mono ${v.type===\"income\"?\"text-emerald-400\":\"text-slate-100\"}`,children:[v.type===\"income\"?\"+\":\"-\",Ne(v.amount,l)]})]}),n.jsxs(\"div\",{className:\"text-right flex flex-col items-end\",children:[n.jsx(\"span\",{className:\"text-[10px] uppercase tracking-widest font-black text-slate-600 mb-1\",children:\"Wallet\"}),n.jsxs(\"span\",{className:\"text-xs font-bold text-slate-300 flex items-center gap-1.5 bg-white/5 px-2 py-1 rounded-lg\",children:[D?.icon,\" \",D?.name]})]})]}),W&&n.jsxs(\"div\",{className:\"pt-4 space-y-3\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-end\",children:[n.jsx(\"p\",{className:\"text-[10px] uppercase font-black text-rose-500/60 tracking-wider\",children:\"Debt Clearance\"}),n.jsx(\"div\",{className:\"text-right\",children:n.jsxs(\"p\",{className:\"text-xs font-black text-slate-300 tabular-nums\",children:[q.toFixed(0),\"%\"]})})]}),n.jsx(\"div\",{className:\"w-full h-1.5 bg-white/5 rounded-full overflow-hidden\",children:n.jsx(\"div\",{className:\"h-full bg-gradient-to-r from-rose-500 to-orange-400 transition-all duration-1000\",style:{width:`${q}%`}})}),n.jsxs(\"div\",{className:\"flex justify-between\",children:[n.jsxs(\"div\",{className:\"flex flex-col\",children:[n.jsx(\"span\",{className:\"text-[9px] font-bold text-slate-600 uppercase\",children:\"Outstanding\"}),n.jsx(\"span\",{className:\"text-[11px] font-black text-rose-400/80\",children:Ne(W.outstanding,l)})]}),n.jsxs(\"div\",{className:\"flex flex-col text-right\",children:[n.jsx(\"span\",{className:\"text-[9px] font-bold text-slate-600 uppercase\",children:\"Remaining\"}),n.jsxs(\"span\",{className:\"text-[11px] font-black text-slate-400\",children:[W.tenure,\" Months\"]})]})]})]}),n.jsxs(\"div\",{className:\"pt-6 border-t border-white/5 flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex flex-col gap-1\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-2 text-slate-500\",children:[n.jsx(Nu,{className:\"w-3 h-3\"}),n.jsx(\"span\",{className:\"text-[9px] font-black uppercase tracking-wider\",children:\"Timeline\"})]}),n.jsxs(\"div\",{className:\"text-[10px] font-bold text-slate-300\",children:[new Date(v.startDate).toLocaleDateString(void 0,{month:\"short\",year:\"numeric\"}),v.endDate?` — ${new Date(v.endDate).toLocaleDateString(void 0,{month:\"short\",year:\"numeric\"})}`:\" — Ongoing\"]})]}),n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[v.category&&n.jsx(\"div\",{className:\"bg-slate-800/50 px-2.5 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest text-slate-500 border border-white/5\",children:v.category}),n.jsx(\"div\",{className:\"w-8 h-8 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-lg shadow-inner\",children:D?.icon||\"🏦\"})]})]})]})]})},[M,y]=x.useState(!1),[L,z]=x.useState(!1),[j,G]=x.useState(!1),[ee,Z]=x.useState(null),[_,B]=x.useState({type:\"expense\",description:\"\",source:\"\",amount:\"\",category:\"\",accountId:i.length>0?i[0].id:\"\",frequency:\"monthly\",startDate:new Date().toISOString().split(\"T\")[0],endDate:\"\",tags:[],principal:\"\",interestRate:\"\",tenure:\"\",liabilityId:\"\"});x.useEffect(()=>{const v=(_.type===\"expense\"?_.description:_.source).toLowerCase().trim();if(!v||ee)return;const D=[\"netflix\",\"spotify\",\"prime\",\"youtube\",\"apple\",\"hulu\",\"disney\",\"google\",\"icloud\",\"adobe\",\"canva\",\"figma\",\"chatgpt\",\"openai\",\"claude\",\"midjourney\",\"github\",\"cursor\"],W=[\"emi\",\"loan\",\"mortgage\",\"bajaj\",\"hdfc loan\",\"sbi loan\",\"icici loan\",\"finance\"];D.some(q=>v.includes(q))?(_.type!==\"expense\"||_.category!==\"Subscription\")&&(queueMicrotask(()=>{B(q=>({...q,type:\"expense\",category:\"Subscription\",description:q.source||q.description}))}),ce.info(\"Smart Detection: Categorized as Subscription\",{icon:\"🤖\"})):W.some(q=>v.includes(q))&&(_.type!==\"expense\"||_.category!==\"EMI\")&&(queueMicrotask(()=>{B(q=>({...q,type:\"expense\",category:\"EMI\",description:q.source||q.description}))}),ce.info(\"Smart Detection: Categorized as EMI\",{icon:\"🤖\"}))},[_.description,_.source,_.type,_.category,ee]);const J=async()=>{const v={type:_.type,amount:parseFloat(_.amount),accountId:_.accountId,frequency:_.frequency,startDate:_.startDate,endDate:_.endDate||void 0,tags:_.tags};_.type===\"expense\"?(v.description=_.description,v.category=_.category):v.source=_.source,ee?(await g(ee,v),_.liabilityId&&await p(_.liabilityId,{name:_.type===\"expense\"?_.description:_.source,principal:parseFloat(_.principal)||0,interestRate:parseFloat(_.interestRate)||0,emiAmount:parseFloat(_.amount)||0,tenure:parseInt(_.tenure)||0,accountId:_.accountId})):_.category===\"EMI\"||_.category===\"Loan\"?await S({name:_.type===\"expense\"?_.description:_.source,type:\"personal_loan\",principal:parseFloat(_.principal)||parseFloat(_.amount),outstanding:parseFloat(_.principal)||parseFloat(_.amount),interestRate:parseFloat(_.interestRate)||0,emiAmount:parseFloat(_.amount),startDate:_.startDate,tenure:parseInt(_.tenure)||12,accountId:_.accountId,createdAt:new Date().toISOString()}):await h(v),y(!1),oe()},ne=v=>{B({type:v.type,description:v.description||\"\",source:v.source||\"\",amount:v.amount.toString(),category:v.category||\"\",accountId:v.accountId,frequency:v.frequency,startDate:v.startDate.split(\"T\")[0],endDate:v.endDate?v.endDate.split(\"T\")[0]:\"\",tags:v.tags||[],principal:\"\",interestRate:\"\",tenure:\"\",liabilityId:v.liabilityId||\"\"});const D=u.find(W=>W.id===v.liabilityId);D&&B(W=>({...W,principal:D.principal.toString(),interestRate:D.interestRate.toString(),tenure:D.tenure.toString()})),Z(v.id),y(!0)},F=async()=>{z(!0),await E(),z(!1)},oe=()=>{B({type:\"expense\",description:\"\",source:\"\",amount:\"\",category:\"\",accountId:i.length>0?i[0].id:\"\",frequency:\"monthly\",startDate:new Date().toISOString().split(\"T\")[0],endDate:\"\",tags:[],principal:\"\",interestRate:\"\",tenure:\"\",liabilityId:\"\"}),Z(null)},ge=async v=>{v.liabilityId?window.confirm(`Deleting this flow will also remove the linked liability \"${v.description||\"Loan\"}\". Continue?`)&&(await deleteLiability(v.liabilityId),ce.success(\"Liability and flow removed\")):await N(v.id)},O=o.filter(v=>v.amount&&v.amount>0),U=(()=>{const v=O.filter(Y=>Y.category===\"EMI\"||(Y.description||\"\").toLowerCase().includes(\"loan\")||(Y.source||\"\").toLowerCase().includes(\"loan\")),D=O.filter(Y=>Y.category===\"Subscription\"||(Y.description||\"\").toLowerCase().includes(\"subscription\")||(Y.source||\"\").toLowerCase().includes(\"subscription\")||[\"netflix\",\"spotify\",\"prime\",\"youtube\",\"apple\",\"hulu\",\"disney\",\"google\"].some(V=>(Y.description||\"\").toLowerCase().includes(V)||(Y.source||\"\").toLowerCase().includes(V))),W=O.filter(Y=>Y.type===\"income\"),q=O.filter(Y=>!v.some(V=>V.id===Y.id)&&!D.some(V=>V.id===Y.id)&&!W.some(V=>V.id===Y.id));return{loans:v,subscriptions:D,incomes:W,others:q}})(),ae=(()=>{const v=ie=>{const le=ie.amount||0;return ie.frequency===\"monthly\"?le:ie.frequency===\"yearly\"?le/12:ie.frequency===\"weekly\"?le*4:le*30},D=U.loans.reduce((ie,le)=>ie+v(le),0),W=U.subscriptions.reduce((ie,le)=>ie+v(le),0),q=U.incomes.reduce((ie,le)=>ie+v(le),0),Y=U.others.reduce((ie,le)=>ie+v(le),0),V=D+W+Y,te=q-V,me=q>0?Math.max(0,Math.min(100,te/q*100)):0;return{loanTotal:D,subTotal:W,incomeTotal:q,otherTotal:Y,totalOutflow:V,netMonthly:te,healthScore:me,totalActive:O.length}})();return n.jsxs(\"div\",{className:\"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700\",children:[n.jsx(\"div\",{className:\"flex justify-center mb-6\",children:n.jsxs(\"div\",{className:\"bg-slate-900/60 p-1 rounded-2xl flex gap-1 border border-white/5\",children:[n.jsx(\"button\",{onClick:()=>w(\"list\"),className:`px-6 py-2 rounded-xl text-sm font-bold transition-all ${f===\"list\"?\"bg-indigo-600 text-white shadow-lg\":\"text-slate-500 hover:text-slate-300\"}`,children:\"Flow List\"}),n.jsxs(\"button\",{onClick:()=>w(\"strategist\"),className:`px-4 py-2 rounded-xl text-xs font-bold transition-all flex items-center gap-2 ${f===\"strategist\"?\"bg-indigo-600 text-white shadow-lg\":\"text-slate-500 hover:text-slate-300\"}`,children:[n.jsx(Hn,{className:\"w-3.5 h-3.5\"}),\"Strategist\"]}),n.jsxs(\"button\",{onClick:()=>w(\"debt\"),className:`px-4 py-2 rounded-xl text-xs font-bold transition-all flex items-center gap-2 ${f===\"debt\"?\"bg-indigo-600 text-white shadow-lg\":\"text-slate-500 hover:text-slate-300\"}`,children:[n.jsx(Ar,{className:\"w-3.5 h-3.5\"}),\"Debt Node\"]})]})}),f===\"debt\"?n.jsx(rj,{liabilities:u,debts:d,currency:l,totalMonthlyIncome:A||1}):f===\"strategist\"?n.jsx(aj,{recurring:o,currency:l,totalMonthlyIncome:A,onDelete:v=>{N(v)}}):n.jsxs(n.Fragment,{children:[n.jsxs(\"div\",{className:\"frosted-plate rounded-[32px] border border-white/5 relative overflow-hidden p-8 shadow-2xl\",children:[n.jsx(Qu,{variant:\"spending\"}),n.jsxs(\"div\",{className:\"relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between mb-8\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-10 h-10 bg-cyan-500/10 rounded-xl flex items-center justify-center border border-cyan-500/20\",children:n.jsx(ei,{className:\"w-5 h-5 text-cyan-400\"})}),n.jsxs(\"div\",{children:[n.jsx(\"h3\",{className:\"text-slate-100 font-bold text-xs uppercase tracking-widest font-mono\",children:\"Flow Analysis\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 uppercase tracking-tighter\",children:\"Monthly Leftover Cash\"})]})]}),n.jsxs(\"div\",{className:\"text-right\",children:[n.jsx(\"p\",{className:\"text-[10px] text-slate-500 uppercase tracking-wider font-extrabold font-mono\",children:\"Total Commitments\"}),n.jsxs(\"p\",{className:\"text-sm font-black text-white tabular-nums font-mono\",children:[ae.totalActive,\" Active\"]})]})]}),n.jsxs(\"div\",{className:\"flex flex-col md:flex-row items-center justify-between gap-12\",children:[n.jsxs(\"div\",{className:\"space-y-2 text-center md:text-left\",children:[n.jsx(\"p\",{className:\"text-slate-400 text-xs font-black uppercase tracking-widest font-mono\",children:\"Projected Monthly Surplus\"}),n.jsxs(\"h1\",{className:\"text-5xl md:text-6xl font-black tracking-tighter tabular-nums text-white font-mono\",children:[ae.netMonthly>=0?\"+\":\"\",Ne(ae.netMonthly,l)]})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-3 gap-4 w-full md:w-auto\",children:[n.jsxs(\"div\",{className:\"bg-slate-800/40 backdrop-blur-md px-6 py-4 rounded-3xl border border-white/5 text-center flex flex-col items-center justify-center min-w-[140px]\",children:[n.jsx(\"p\",{className:\"text-[10px] uppercase font-black text-slate-500 mb-1 font-mono tracking-widest\",children:\"Loan EMIs\"}),n.jsxs(\"div\",{className:\"flex flex-col items-center\",children:[n.jsx(\"span\",{className:\"text-2xl font-black leading-none text-rose-400/80 font-mono mb-1\",children:\"-\"}),n.jsx(\"span\",{className:\"font-black text-lg text-rose-400 font-mono tabular-nums\",children:Ne(Math.abs(ae.loanTotal),l)})]})]}),n.jsxs(\"div\",{className:\"bg-slate-800/40 backdrop-blur-md px-6 py-4 rounded-3xl border border-white/5 text-center flex flex-col items-center justify-center min-w-[140px]\",children:[n.jsx(\"p\",{className:\"text-[10px] uppercase font-black text-slate-500 mb-1 font-mono tracking-widest\",children:\"Subscriptions\"}),n.jsxs(\"div\",{className:\"flex flex-col items-center\",children:[n.jsx(\"span\",{className:\"text-2xl font-black leading-none text-indigo-400/80 font-mono mb-1\",children:\"-\"}),n.jsx(\"span\",{className:\"font-black text-lg text-indigo-400 font-mono tabular-nums\",children:Ne(Math.abs(ae.subTotal),l)})]})]}),n.jsxs(\"div\",{className:\"bg-slate-800/40 backdrop-blur-md px-6 py-4 rounded-3xl border border-white/5 text-center flex flex-col items-center justify-center min-w-[140px]\",children:[n.jsx(\"p\",{className:\"text-[10px] uppercase font-black text-slate-500 mb-1 font-mono tracking-widest\",children:\"Recur. Income\"}),n.jsxs(\"div\",{className:\"flex flex-col items-center\",children:[n.jsx(\"span\",{className:\"text-2xl font-black leading-none text-emerald-400/80 font-mono mb-1\",children:\"+\"}),n.jsx(\"span\",{className:\"font-black text-lg text-emerald-400 font-mono tabular-nums\",children:Ne(Math.abs(ae.incomeTotal),l)})]})]})]})]})]})]}),n.jsxs(\"div\",{className:\"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 sticky top-0 z-30 py-2 bg-slate-950/80 backdrop-blur-md rounded-2xl border border-white/5\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-1.5 h-6 bg-indigo-500 rounded-full shadow-[0_0_15px_rgba(99,102,241,0.5)]\"}),n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-500\",children:\"Commitment Stream\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-2 w-full sm:w-auto\",children:[n.jsxs(Re,{variant:\"ghost\",size:\"sm\",onClick:F,disabled:L||o.length===0,className:\"flex-1 sm:flex-initial rounded-xl border border-white/5 hover:bg-slate-900/40 font-bold text-slate-400 hover:text-slate-100 px-4 h-10 text-xs\",children:[n.jsx(ei,{className:`w-3.5 h-3.5 mr-2 ${L?\"animate-spin\":\"\"}`}),\"Sync\"]}),n.jsxs(Re,{onClick:()=>y(!0),size:\"sm\",className:\"flex-1 sm:flex-initial bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl px-6 h-10 font-bold shadow-lg shadow-indigo-600/20 transition-all active:scale-95 text-xs\",children:[n.jsx(kr,{className:\"w-3.5 h-3.5 mr-2\"}),\"Add New\"]})]})]}),o.length>0&&n.jsxs(\"div\",{className:\"px-4\",children:[n.jsxs(\"div\",{className:\"bg-slate-900/40 border border-white/5 rounded-2xl p-4 flex flex-col sm:flex-row sm:items-center justify-between gap-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-10 h-10 bg-indigo-500/10 rounded-xl flex items-center justify-center\",children:n.jsx(Ga,{className:\"w-5 h-5 text-indigo-400\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-xs font-black uppercase tracking-widest text-slate-500 mb-0.5 font-mono\",children:\"Net Monthly Flow\"}),n.jsxs(\"h4\",{className:`text-lg font-black tabular-nums leading-none font-mono ${ae.netMonthly>=0?\"text-emerald-400\":\"text-rose-400\"}`,children:[ae.netMonthly>=0?\"+\":\"\",Ne(ae.netMonthly,l)]})]})]}),n.jsxs(\"div\",{className:\"flex items-center gap-4 border-t sm:border-t-0 sm:border-l border-white/5 pt-4 sm:pt-0 sm:pl-6\",children:[n.jsxs(\"div\",{className:\"space-y-0.5\",children:[n.jsx(\"p\",{className:\"text-[10px] uppercase font-black text-slate-600\",children:\"Shadow Health\"}),n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsxs(\"span\",{className:`font-black text-lg tabular-nums ${ae.healthScore>60?\"text-emerald-400\":ae.healthScore>30?\"text-indigo-400\":\"text-rose-400\"}`,children:[Math.round(ae.healthScore),\"%\"]}),n.jsx(\"div\",{className:\"px-2 py-0.5 rounded bg-white/5 border border-white/5\",children:n.jsx(\"span\",{className:\"text-[9px] font-black uppercase tracking-tight text-slate-400\",children:ae.healthScore>=80?\"Elite\":ae.healthScore>=60?\"Strong\":ae.healthScore>=40?\"Stable\":ae.healthScore>=20?\"Warning\":\"Critical\"})}),n.jsx(\"div\",{className:\"flex gap-0.5 ml-1\",children:[1,2,3,4,5].map(v=>n.jsx(\"div\",{className:`w-1.5 h-3 rounded-full transition-colors duration-500 ${ae.healthScore/20>=v?ae.healthScore>60?\"bg-emerald-500\":ae.healthScore>30?\"bg-indigo-500\":\"bg-rose-500\":\"bg-slate-800\"}`},v))})]})]}),n.jsx(Re,{variant:\"ghost\",size:\"sm\",onClick:()=>G(!j),className:\"text-indigo-400 hover:text-indigo-300 hover:bg-indigo-500/10 rounded-xl font-bold\",children:j?\"Hide Analysis\":\"Show Analysis\"})]})]}),j&&n.jsxs(\"div\",{className:\"mt-4 animate-in zoom-in-95 duration-300 grid grid-cols-1 md:grid-cols-2 gap-4\",children:[n.jsxs(Ot,{className:\"bg-slate-900/40 border-white/5 p-4 rounded-2xl\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 mb-2 opacity-50\",children:[n.jsx(zu,{className:\"w-4 h-4\"}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-[0.2em]\",children:\"Total Outflow\"})]}),n.jsx(\"p\",{className:\"text-xl font-black text-rose-400\",children:Ne(ae.totalOutflow,l)})]}),n.jsxs(Ot,{className:\"bg-slate-900/40 border-white/5 p-4 rounded-2xl\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 mb-2 opacity-50\",children:[n.jsx(Ub,{className:\"w-4 h-4\"}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-[0.2em]\",children:\"Total Inflow\"})]}),n.jsx(\"p\",{className:\"text-xl font-black text-emerald-400\",children:Ne(ae.incomeTotal,l)})]})]})]}),n.jsx(\"div\",{className:\"px-4 pb-20 space-y-12\",children:O.length===0?n.jsxs(Ot,{className:\"py-24 text-center bg-slate-800/20 rounded-[40px] border border-dashed border-white/10\",children:[n.jsx(Nu,{className:\"w-20 h-20 mx-auto text-slate-700 mb-6\"}),n.jsx(\"h3\",{className:\"text-2xl font-black text-slate-200 mb-3\",children:\"No Active Commitments\"}),n.jsx(\"p\",{className:\"text-sm text-slate-500 font-bold mb-10 max-w-[320px] mx-auto leading-relaxed\",children:\"Set up your subscriptions, EMIs, and monthly income to unlock deep financial insights.\"}),n.jsxs(Re,{onClick:()=>y(!0),className:\"bg-indigo-600/10 hover:bg-indigo-600/20 text-indigo-400 border border-indigo-600/20 rounded-2xl px-10 h-14 font-black\",children:[n.jsx(kr,{className:\"w-5 h-5 mr-3\"}),\"Add First Commitment\"]})]}):n.jsxs(n.Fragment,{children:[U.incomes.length>0&&n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 border-l-4 border-emerald-500 pl-4 py-1\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100 uppercase tracking-tight font-mono\",children:\"Recurring Income\"}),n.jsxs(\"span\",{className:\"bg-emerald-500/10 text-emerald-400 px-2 py-0.5 rounded text-[10px] font-black font-mono\",children:[U.incomes.length,\" SOURCE(S)\"]})]}),n.jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:U.incomes.map((v,D)=>n.jsx(C,{rec:v},`${v.id}-${D}`))})]}),U.loans.length>0&&n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 border-l-4 border-rose-500 pl-4 py-1\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100 uppercase tracking-tight font-mono\",children:\"Loan EMIs\"}),n.jsxs(\"span\",{className:\"bg-rose-500/10 text-rose-400 px-2 py-0.5 rounded text-[10px] font-black font-mono\",children:[U.loans.length,\" COMMITMENT(S)\"]})]}),n.jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:U.loans.map((v,D)=>n.jsx(C,{rec:v},`${v.id}-${D}`))})]}),U.subscriptions.length>0&&n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 border-l-4 border-indigo-500 pl-4 py-1\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100 uppercase tracking-tight font-mono\",children:\"Active Subscriptions\"}),n.jsxs(\"span\",{className:\"bg-indigo-500/10 text-indigo-400 px-2 py-0.5 rounded text-[10px] font-black font-mono\",children:[U.subscriptions.length,\" SERVICE(S)\"]})]}),n.jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:U.subscriptions.map((v,D)=>n.jsx(C,{rec:v},`${v.id}-${D}`))})]}),U.others.length>0&&n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 border-l-4 border-slate-500 pl-4 py-1\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100 uppercase tracking-tight\",children:\"Other Commitments\"}),n.jsxs(\"span\",{className:\"bg-slate-500/10 text-slate-400 px-2 py-0.5 rounded text-[10px] font-black\",children:[U.others.length,\" ITEM(S)\"]})]}),n.jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:U.others.map((v,D)=>n.jsx(C,{rec:v},`${v.id}-${D}`))})]})]})}),n.jsx(us,{open:M,onOpenChange:y,children:n.jsxs(ds,{className:\"max-w-md bg-slate-950 border-white/10 text-white rounded-[32px]\",children:[n.jsxs(fs,{children:[n.jsx(ms,{className:\"text-2xl font-black tracking-tight text-white\",children:ee?\"Edit Commitment\":\"Create New Commitment\"}),n.jsx(hs,{className:\"text-slate-400 font-bold\",children:ee?\"Modify existing flow parameters.\":\"Automate your financial shadow-wallets.\"})]}),n.jsxs(\"div\",{className:\"space-y-6 mt-4\",children:[n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{className:`p-4 rounded-2xl border-2 cursor-pointer transition-all ${_.type===\"income\"?\"border-emerald-500 bg-emerald-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>B({..._,type:\"income\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 rounded-xl bg-emerald-500/20 flex items-center justify-center text-xl mb-2\",children:\"💰\"}),n.jsx(\"p\",{className:\"text-xs font-black uppercase text-white\",children:\"Money In\"}),n.jsx(\"p\",{className:\"text-[10px] text-emerald-400 font-bold\",children:\"Salary / Gift\"})]}),n.jsxs(\"div\",{className:`p-4 rounded-2xl border-2 cursor-pointer transition-all ${_.type===\"expense\"?\"border-indigo-500 bg-indigo-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>B({..._,type:\"expense\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 rounded-xl bg-indigo-500/20 flex items-center justify-center text-xl mb-2\",children:\"💸\"}),n.jsx(\"p\",{className:\"text-xs font-black uppercase text-white\",children:\"Money Out\"}),n.jsx(\"p\",{className:\"text-[10px] text-indigo-400 font-bold\",children:\"Rent / Sub\"})]})]}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"div\",{className:\"group\",children:[n.jsx(ye,{htmlFor:\"recurring-name\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block\",children:\"Commitment Name\"}),n.jsx(wt,{id:\"recurring-name\",name:\"description\",value:_.type===\"expense\"?_.description:_.source,onChange:v=>B({..._,[_.type===\"expense\"?\"description\":\"source\"]:v.target.value}),placeholder:_.type===\"expense\"?\"e.g. Netflix, Rent\":\"e.g. Salary\",className:\"bg-white/5 border-white/5 rounded-xl h-12 focus:ring-indigo-500/50\",autoComplete:\"off\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"recurring-amount\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block\",children:\"Amount\"}),n.jsx(wt,{id:\"recurring-amount\",name:\"amount\",type:\"number\",value:_.amount,onChange:v=>B({..._,amount:v.target.value}),placeholder:\"0.00\",className:\"bg-white/5 border-white/5 rounded-xl h-12\",autoComplete:\"off\"})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"recurring-frequency\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block\",children:\"Frequency\"}),n.jsxs(Ut,{value:_.frequency,onValueChange:v=>B({..._,frequency:v}),children:[n.jsx(Bt,{id:\"recurring-frequency\",name:\"frequency\",className:\"bg-white/5 border-white/5 rounded-xl h-12\",children:n.jsx(It,{})}),n.jsxs(qt,{className:\"bg-slate-900 border-white/10 text-white\",children:[n.jsx(qe,{value:\"monthly\",children:\"Monthly\"}),n.jsx(qe,{value:\"weekly\",children:\"Weekly\"}),n.jsx(qe,{value:\"daily\",children:\"Daily\"}),n.jsx(qe,{value:\"yearly\",children:\"Yearly\"})]})]})]})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"recurring-account\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block\",children:\"Funding Wallet\"}),n.jsxs(Ut,{value:_.accountId,onValueChange:v=>B({..._,accountId:v}),children:[n.jsx(Bt,{id:\"recurring-account\",name:\"accountId\",className:\"bg-white/5 border-white/5 rounded-xl h-12\",children:n.jsx(It,{placeholder:\"Target Account\"})}),n.jsx(qt,{className:\"bg-slate-900 border-white/10 text-white\",children:i.map(v=>n.jsxs(qe,{value:v.id,children:[v.icon,\" \",v.name]},v.id))})]})]}),_.type===\"expense\"&&n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"recurring-category\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block\",children:\"Category\"}),n.jsxs(Ut,{value:_.category,onValueChange:v=>B({..._,category:v}),children:[n.jsx(Bt,{id:\"recurring-category\",name:\"category\",className:\"bg-white/5 border-white/5 rounded-xl h-12\",children:n.jsx(It,{placeholder:\"Purpose\"})}),n.jsx(qt,{className:\"bg-slate-900 border-white/10 text-white max-h-[200px]\",children:rp.map(v=>n.jsxs(qe,{value:v.value,children:[v.emoji,\" \",v.value]},v.value))})]})]}),(_.category===\"EMI\"||_.category===\"Loan\"||_.liabilityId)&&n.jsxs(\"div\",{className:\"p-4 rounded-2xl bg-rose-500/5 border border-rose-500/10 space-y-4\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-widest text-rose-500/60 pl-1\",children:\"Liability Details\"}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"liability-principal\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block\",children:\"Principal\"}),n.jsx(wt,{id:\"liability-principal\",type:\"number\",value:_.principal,onChange:v=>B({..._,principal:v.target.value}),placeholder:\"Total Loan\",className:\"bg-white/5 border-white/5 rounded-xl h-11 text-xs\"})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"liability-tenure\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block\",children:\"Tenure (Mo)\"}),n.jsx(wt,{id:\"liability-tenure\",type:\"number\",value:_.tenure,onChange:v=>B({..._,tenure:v.target.value}),placeholder:\"Months\",className:\"bg-white/5 border-white/5 rounded-xl h-11 text-xs\"})]})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"liability-rate\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block\",children:\"Interest Rate (%)\"}),n.jsx(wt,{id:\"liability-rate\",type:\"number\",value:_.interestRate,onChange:v=>B({..._,interestRate:v.target.value}),placeholder:\"Annual %\",className:\"bg-white/5 border-white/5 rounded-xl h-11 text-xs\"})]})]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"recurring-start-date\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block\",children:\"Start Date\"}),n.jsx(wt,{id:\"recurring-start-date\",name:\"startDate\",type:\"date\",value:_.startDate,onChange:v=>B({..._,startDate:v.target.value}),className:\"bg-white/5 border-white/5 rounded-xl h-12 text-xs\",autoComplete:\"off\"})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"recurring-end-date\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block\",children:\"End Date (Optional)\"}),n.jsx(wt,{id:\"recurring-end-date\",name:\"endDate\",type:\"date\",value:_.endDate,onChange:v=>B({..._,endDate:v.target.value}),className:\"bg-white/5 border-white/5 rounded-xl h-12\",autoComplete:\"off\"})]})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4 relative z-10\",children:[n.jsx(Re,{variant:\"ghost\",onClick:()=>y(!1),className:\"flex-1 rounded-2xl h-14 font-black text-slate-500 hover:bg-white/5\",children:\"Discard\"}),n.jsx(Re,{onClick:J,className:\"flex-1 bg-indigo-600 hover:bg-indigo-500 text-white rounded-2xl h-14 font-black shadow-lg shadow-indigo-600/20\",disabled:!_.amount||!_.description&&!_.source||!_.accountId||_.type===\"expense\"&&!_.category,children:ee?\"Update Flow\":\"Activate Flow\"})]})]})]})})]})]})}const cj=({isVisible:i,onNotificationClick:l,onSettingsClick:o,notificationCount:u=0})=>n.jsxs(\"header\",{className:`nav-bar safe-header fixed top-0 w-full flex items-center justify-between px-6 border-b border-white/5 transition-transform duration-300 ease-in-out z-[100] ${i?\"translate-y-0\":\"-translate-y-full\"}`,children:[n.jsx(\"button\",{onClick:o,\"aria-label\":\"User Settings\",className:\"w-10 h-10 sq-md bg-black border border-white/5 flex items-center justify-center hover:bg-white/5 transition-colors\",children:n.jsx(Su,{className:\"w-5 h-5 text-slate-400\"})}),n.jsxs(\"div\",{className:\"flex flex-col items-center\",children:[n.jsx(\"img\",{src:\"/images/logo-dark.png\",alt:\"FinHub\",className:\"h-8 w-auto hidden dark:block\"}),n.jsx(\"img\",{src:\"/images/logo-light.png\",alt:\"FinHub\",className:\"h-8 w-auto block dark:hidden\"})]}),n.jsx(\"button\",{onClick:l,\"aria-label\":\"Notifications\",className:\"w-10 h-10 flex items-center justify-center text-slate-400 hover:text-white transition-colors relative\",children:n.jsxs(\"div\",{className:\"relative\",children:[n.jsx(Lu,{className:\"w-5 h-5\"}),u>0&&n.jsx(\"span\",{className:\"absolute top-0 right-0 w-2 h-2 bg-[#FF453A] sq-full ring-2 ring-black\"})]})})]}),uj=({isVisible:i,activeTab:l,onTabChange:o})=>n.jsxs(\"nav\",{className:`nav-bar safe-footer fixed bottom-0 w-full flex items-center justify-around px-4 border-t border-white/5 transition-transform duration-300 ease-in-out z-[100] ${i?\"translate-y-0\":\"translate-y-full\"}`,children:[n.jsxs(\"button\",{\"aria-label\":\"Home Dashboard\",className:`flex flex-col items-center relative py-4 cursor-pointer transition-colors ${l===\"dashboard\"?\"text-[#0A84FF]\":\"text-[#8E8E93] hover:text-white\"}`,onClick:()=>o(\"dashboard\"),children:[l===\"dashboard\"&&n.jsx(\"div\",{className:\"absolute top-0 w-8 h-0.5 bg-[#0A84FF] shadow-[0_0_15px_#0A84FF] rounded-full\"}),n.jsx(Bb,{className:\"w-6 h-6\"}),n.jsx(\"span\",{className:\"text-[9px] font-black uppercase mt-2 tracking-[0.3em]\",children:\"Home\"})]}),n.jsxs(\"button\",{\"aria-label\":\"Transaction History\",className:`flex flex-col items-center transition-all cursor-pointer ${l===\"transactions\"?\"text-[#0A84FF]\":\"text-[#8E8E93] hover:text-white\"}`,onClick:()=>o(\"transactions\"),children:[n.jsx(qb,{className:\"w-6 h-6\"}),n.jsx(\"span\",{className:\"text-[9px] font-black uppercase mt-2 tracking-[0.3em]\",children:\"History\"})]}),n.jsxs(\"button\",{\"aria-label\":\"Recurring Flows\",className:`flex flex-col items-center transition-all cursor-pointer ${l===\"recurring\"?\"text-[#0A84FF]\":\"text-[#8E8E93] hover:text-white\"}`,onClick:()=>o(\"recurring\"),children:[n.jsx(ei,{className:\"w-6 h-6\"}),n.jsx(\"span\",{className:\"text-[9px] font-black uppercase mt-2 tracking-[0.3em]\",children:\"Flows\"})]}),n.jsxs(\"button\",{\"aria-label\":\"Investment Growth\",className:`flex flex-col items-center transition-all cursor-pointer ${l===\"investments\"?\"text-[#0A84FF]\":\"text-[#8E8E93] hover:text-white\"}`,onClick:()=>o(\"investments\"),children:[n.jsx(Hb,{className:\"w-6 h-6\"}),n.jsx(\"span\",{className:\"text-[9px] font-black uppercase mt-2 tracking-[0.3em]\",children:\"Growth\"})]}),n.jsxs(\"button\",{\"aria-label\":\"Financial Goals\",className:`flex flex-col items-center transition-all cursor-pointer ${l===\"goals\"?\"text-[#0A84FF]\":\"text-[#8E8E93] hover:text-white\"}`,onClick:()=>o(\"goals\"),children:[n.jsx(Hn,{className:\"w-6 h-6\"}),n.jsx(\"span\",{className:\"text-[9px] font-black uppercase mt-2 tracking-[0.3em]\",children:\"Goals\"})]}),n.jsxs(\"button\",{\"aria-label\":\"More Options\",className:`flex flex-col items-center transition-all cursor-pointer ${l===\"more\"?\"text-[#0A84FF]\":\"text-[#8E8E93] hover:text-white\"}`,onClick:()=>o(\"more\"),children:[n.jsx(Gb,{className:\"w-6 h-6\"}),n.jsx(\"span\",{className:\"text-[9px] font-black uppercase mt-2 tracking-[0.3em]\",children:\"More\"})]})]}),dj=({children:i,activeTab:l,onTabChange:o,notificationCount:u,onNotificationClick:d,onSettingsClick:h,renderFab:g,forceHide:N=!1})=>{const[E,S]=x.useState(!0),p=x.useRef(0),f=20,w=E&&!N;return x.useEffect(()=>{const A=()=>{if(N)return;const T=window.scrollY;if(T<10){S(!0),p.current=T;return}const C=T-p.current;Math.abs(C)>f&&(C>0?S(!1):S(!0),p.current=T)};return window.addEventListener(\"scroll\",A,{passive:!0}),()=>window.removeEventListener(\"scroll\",A)},[N]),n.jsxs(\"div\",{className:\"min-h-screen bg-bg-primary text-text-primary\",children:[n.jsx(cj,{isVisible:w,notificationCount:u,onNotificationClick:d,onSettingsClick:h}),n.jsx(\"main\",{className:\"safe-layout-main px-4 w-full md:max-w-3xl lg:max-w-5xl mx-auto min-h-screen\",children:i}),n.jsx(uj,{isVisible:w,activeTab:l,onTabChange:o}),g&&g(w)]})},Ha=x.forwardRef(({value:i,onChange:l,allowDecimals:o=!0,maxDecimals:u=2,className:d,...h},g)=>{const[N,E]=x.useState(\"\");x.useEffect(()=>{if(i===\"\"||i===void 0||i===null)E(\"\");else{const f=i.toString();E(ou(f))}},[i]);const S=f=>{const w=f.target.value,A=c0(w);if(G1(A)&&!(!o&&A.includes(\".\"))){if(o&&A.includes(\".\")){const T=A.split(\".\");if(T[1]&&T[1].length>u)return}E(ou(A)),l(A)}},p=f=>{const w=c0(N);w&&E(ou(w)),h.onBlur&&h.onBlur(f)};return n.jsx(wt,{...h,ref:g,type:\"text\",inputMode:\"decimal\",value:N,onChange:S,onBlur:p,className:d})});Ha.displayName=\"NumberInput\";const fj=Ou(\"inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden\",{variants:{variant:{default:\"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90\",secondary:\"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90\",destructive:\"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",outline:\"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground\"}},defaultVariants:{variant:\"default\"}});function E0({className:i,variant:l,asChild:o=!1,...u}){const d=o?q0:\"span\";return n.jsx(d,{\"data-slot\":\"badge\",className:De(fj({variant:l}),i),...u})}const mj=i=>{if(i.category?.toLowerCase().includes(\"transfer\"))return!0;const l=(i.description||i.source||\"\").toLowerCase();return!!(l.includes(\"transfer\")||l.includes(\"payment\")||l.includes(\"cc bill\")||l.includes(\"credit card bill\")||l.includes(\"migration\")||i.tags&&Array.isArray(i.tags)&&i.tags.some(o=>o.toLowerCase()===\"transfer\"||o.toLowerCase()===\"internal\"))};function vu({className:i,...l}){return n.jsx(Vb,{\"data-slot\":\"checkbox\",className:De(\"peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50\",i),...l,children:n.jsx(Fb,{\"data-slot\":\"checkbox-indicator\",className:\"flex items-center justify-center text-current transition-none\",children:n.jsx(H0,{className:\"size-3.5\"})})})}const hj=(i,l,o,u)=>{if(i<=0||o<=0)return{emi:0,totalInterest:0,totalPayment:0,outstanding:0};const d=l/12/100;let h=0;d===0?h=i/o:h=i*d*Math.pow(1+d,o)/(Math.pow(1+d,o)-1);const g=h*o,N=g-i;let E=i;return{emi:Number(h.toFixed(2)),totalInterest:Number(N.toFixed(2)),totalPayment:Number(g.toFixed(2)),outstanding:Number(Math.max(0,E).toFixed(2))}},pj=(i,l,o)=>{if(i<=0||o<=0)return{monthlyYield:0,totalReturns:0,maturityValue:0};const u=i*(l/100)/12,d=u*o,h=i+d;return{monthlyYield:Number(u.toFixed(2)),totalReturns:Number(d.toFixed(2)),maturityValue:Number(h.toFixed(2))}};var A0;(function(i){i.Home=\"home\",i.Work=\"work\",i.Other=\"other\",i.Custom=\"custom\",i.Mobile=\"mobile\",i.FaxWork=\"fax_work\",i.FaxHome=\"fax_home\",i.Pager=\"pager\",i.Callback=\"callback\",i.Car=\"car\",i.CompanyMain=\"company_main\",i.Isdn=\"isdn\",i.Main=\"main\",i.OtherFax=\"other_fax\",i.Radio=\"radio\",i.Telex=\"telex\",i.TtyTdd=\"tty_tdd\",i.WorkMobile=\"work_mobile\",i.WorkPager=\"work_pager\",i.Assistant=\"assistant\",i.Mms=\"mms\"})(A0||(A0={}));var k0;(function(i){i.Home=\"home\",i.Work=\"work\",i.Other=\"other\",i.Custom=\"custom\",i.Mobile=\"mobile\"})(k0||(k0={}));var T0;(function(i){i.Home=\"home\",i.Work=\"work\",i.Other=\"other\",i.Custom=\"custom\"})(T0||(T0={}));const D0=cs(\"Contacts\",{web:()=>Fa(()=>import(\"./web-Cu-7YtD8.js\"),__vite__mapDeps([6,1,2,3,4])).then(i=>new i.ContactsWeb)}),at={common:{date:\"Date\",tags:\"Tags\",amount:\"Amount\",actions:{add:\"Add\",update:\"Update\",abort:\"Cancel\",record:\"Record\"},status:{error:\"Error\"}},transactions:{expenseLabel:\"Expense\",incomeLabel:\"Income\",debtLabel:\"Debt\",account:\"Account\",category:\"Category\",recurringDescription:\"Recurring transaction\",justificationRequired:\"Justification Required\",principalCapital:\"Principal Amount\",loanInvestmentDetails:\"Loan/Investment Details\",lentMoney:\"I Lent Money\",borrowedMoney:\"I Borrowed Money\",noAccounts:\"No accounts found\"},dashboard:{planTitle:\"Your Finance Plan\",income:\"Income\",expenses:\"Expenses\",protocolInterpretation:\"Analysis\",safeZoneHealth:\"Safe Zone Health\",actionFlow:\"Action Flow\",actionFlowEfficiency:\"Action Flow Efficiency\",burnTrend:\"Burn Trend\",highPowerNode:\"High Power Node identified\"},settings:{factoryReset:\"Reset Data\",wipeData:\"Clear All Data\",wipeDescription:\"Clear all transactions and recurring entries (keeps account)\",achievementLevel:\"Achievement Level\",achievementSelect:\"Select an achievement to view details\",achievementLocked:\"Complete financial actions to unlock achievements\",about:\"About\",subscriptionScanner:\"Subscription Scanner\",cleanupDuplicates:\"Clean Up Duplicates\"}},gj=({isOpen:i,onClose:l,type:o,onSubmit:u,initialData:d,accounts:h,liabilities:g,currency:N,roundUpEnabled:E=!0,defaultAccountId:S})=>{const[p,f]=x.useState({description:\"\",amount:\"\",category:\"\",source:\"\",personName:\"\",debtType:\"borrowed\",accountId:\"\",date:new Date().toISOString().split(\"T\")[0],tags:[],isRecurring:!1,frequency:\"monthly\",endDate:\"\",isIncomeGenerating:!1,justification:\"\",debtDueDate:\"\",principal:\"\",interestRate:\"\",tenure:\"\",tenureUnit:\"months\",liabilityId:\"\",investmentId:\"\",registerAsLiability:!1,liabilityType:\"personal_loan\"}),[w,A]=x.useState(\"\"),[T,C]=x.useState(null),[M,y]=x.useState([]),[L,z]=x.useState(void 0),[j,G]=x.useState(void 0);x.useEffect(()=>{i&&(d?queueMicrotask(()=>{f({description:d.description||\"\",amount:d.amount?.toString()||\"\",category:d.category||\"\",source:d.source||\"\",personName:d.personName||\"\",debtType:d.type||\"borrowed\",accountId:d.accountId||\"\",date:d.date||new Date().toISOString().split(\"T\")[0],tags:d.tags||[],isRecurring:d.isRecurring||!1,frequency:d.frequency||\"monthly\",endDate:d.endDate||\"\",isIncomeGenerating:d.isIncomeGenerating||!1,justification:d.justification||\"\",debtDueDate:d.dueDate||\"\",principal:d.principal?.toString()||\"\",interestRate:d.interestRate?.toString()||\"\",tenure:d.tenure?.toString()||\"\",tenureUnit:d.tenureUnit||\"months\",liabilityId:d.liabilityId||\"\",investmentId:d.investmentId||\"\",registerAsLiability:d.registerAsLiability||!1,liabilityType:d.type||\"personal_loan\"})}):h.length>0&&!p.accountId&&queueMicrotask(()=>{const O=o===\"expense\"&&S?S:h[0].id;f(k=>({...k,accountId:O}))}))},[i,d,h,p.accountId,S,o]),x.useEffect(()=>{const O=o===\"expense\"||o===\"income\"?p.description:p.personName,k=O.length>2&&!d?qu(O):null;if(O.length>2&&!d){const U=g.find(Q=>Q.name.toLowerCase()===O.toLowerCase()||O.toLowerCase()===`emi: ${Q.name.toLowerCase()}`||O.toLowerCase().includes(Q.name.toLowerCase()));if(U){queueMicrotask(()=>{C(\"EMI\"),y([\"emi\",\"liability\",U.name.toLowerCase()]),z(U.emiAmount),G(`EMI: ${U.name}`)});const Q=new Date(U.startDate),ae=new Date;ae.setDate(Q.getDate());const v=ae.toISOString().split(\"T\")[0];queueMicrotask(()=>{f(D=>({...D,suggestedDate:v,liabilityId:U.id}))})}}k?queueMicrotask(()=>{C(k.category),y(k.tags),z(k.suggestedAmount),G(k.suggestedDescription)}):(!O.length||d)&&queueMicrotask(()=>{C(null),y([]),z(void 0),G(void 0)})},[p.description,p.personName,o,d,g]);const ee=O=>{if(O.preventDefault(),!p.accountId&&h.length>0){alert(\"Please select an account\");return}let k={amount:parseFloat(p.amount),date:p.date,tags:p.tags,accountId:p.accountId||(h.length>0?h[0].id:\"\"),isRecurring:p.isRecurring,frequency:p.frequency,customIntervalDays:p.customIntervalDays,startDate:p.date,endDate:p.endDate||void 0,isIncomeGenerating:p.isIncomeGenerating,justification:p.justification,liabilityId:p.liabilityId===\"new\"?void 0:p.liabilityId||void 0,investmentId:p.investmentId,registerAsLiability:p.registerAsLiability,principal:p.principal?parseFloat(p.principal):void 0,interestRate:p.interestRate?parseFloat(p.interestRate):void 0,tenure:p.tenure?parseInt(p.tenure):void 0,tenureUnit:p.tenureUnit,liabilityType:p.liabilityType};o===\"expense\"?k={...k,description:p.description,category:p.category,roundUpAmount:p.roundUpAmount}:o===\"income\"?k={...k,source:p.description}:o===\"debt\"&&(k={...k,personName:p.personName,type:p.debtType,dueDate:p.debtDueDate||void 0});const U=h.find(Q=>Q.id===p.accountId);o===\"expense\"&&U?.type===\"credit_card\"&&mj({description:p.description,category:p.category})&&(k.category=\"Transfer\"),u(k),Z()},Z=()=>{f({description:\"\",amount:\"\",category:\"\",source:\"\",personName:\"\",debtType:\"borrowed\",accountId:h.length>0?h[0].id:\"\",date:new Date().toISOString().split(\"T\")[0],tags:[],isRecurring:!1,frequency:\"monthly\",endDate:\"\",isIncomeGenerating:!1,justification:\"\",debtDueDate:\"\",principal:\"\",interestRate:\"\",tenure:\"\",tenureUnit:\"months\",liabilityId:\"\",investmentId:\"\",registerAsLiability:!1,liabilityType:\"personal_loan\"}),A(\"\"),C(null),y([]),z(void 0),G(void 0),l()},_=()=>{w.trim()&&!p.tags.includes(w.trim())&&(f({...p,tags:[...p.tags,w.trim()]}),A(\"\"))},B=O=>{if(O.includes(\",\")){const k=O.split(\",\").map(U=>U.trim()).filter(U=>U&&!p.tags.includes(U));k.length>0&&(f({...p,tags:[...p.tags,...k]}),A(\"\"))}else A(O)},J=O=>{f({...p,tags:p.tags.filter(k=>k!==O)})},ne=()=>{T&&(f(O=>({...O,category:T,tags:[...new Set([...O.tags,...M])],amount:L&&!O.amount?L.toString():O.amount,description:j||O.description,isRecurring:T===\"Subscription\"?!0:O.isRecurring,frequency:T===\"Subscription\"?\"monthly\":O.frequency})),C(null),y([]),z(void 0),G(void 0))},F=async()=>{if(Gn.isNativePlatform())try{if((await D0.requestPermissions()).contacts!==\"granted\"){alert(\"Contacts permission is required to select a contact.\");return}const k=await D0.pickContact({projection:{name:!0,phones:!0}});if(k&&k.contact){const U=k.contact,Q=U.name?.display||(U.name?.given?`${U.name.given} ${U.name.family||\"\"}`:\"\")||U.phones?.[0]?.number||\"Unknown Contact\";f(ae=>({...ae,personName:Q.trim()})),window.navigator.vibrate&&window.navigator.vibrate(20)}}catch(O){console.error(\"Capacitor contact picker error:\",O),alert(\"Failed to pick contact. Please try again or type manually.\")}else if(\"contacts\"in navigator&&\"ContactsManager\"in window)try{const O=[\"name\"],k={multiple:!1},U=await navigator.contacts.select(O,k);if(U.length>0&&U[0].name?.length>0){const Q=U[0].name[0];f(ae=>({...ae,personName:Q})),window.navigator.vibrate&&window.navigator.vibrate(20)}}catch(O){console.error(\"Web contact picker error:\",O)}else alert(\"Contact Selection is only available on supported mobile browsers or the native app.\")},oe=[100,500,1e3,5e3],ge=O=>{const U=(p.amount||\"0\")+\"0\".repeat(O);f({...p,amount:U})};return n.jsx(us,{open:i,onOpenChange:Z,children:n.jsxs(ds,{className:\"max-w-md max-h-[90vh] overflow-y-auto bg-black border-white/5 p-0 shadow-2xl custom-scrollbar sq-2xl\",children:[n.jsxs(\"div\",{className:`px-8 pt-10 pb-8 border-b border-white/5 relative overflow-hidden ${o===\"expense\"?\"bg-rose-500/5\":o===\"income\"?\"bg-emerald-500/5\":\"bg-yellow-500/5\"}`,children:[n.jsx(\"div\",{className:`absolute top-0 right-0 w-32 h-32 blur-[60px] opacity-20 -mr-16 -mt-16 ${o===\"expense\"?\"bg-rose-500\":o===\"income\"?\"bg-emerald-500\":\"bg-yellow-500\"}`}),n.jsxs(fs,{className:\"relative z-10\",children:[n.jsxs(ms,{className:\"text-2xl font-black tracking-tighter text-slate-100\",children:[d?at.common.actions.update:at.common.actions.add,\" \",o===\"expense\"?at.transactions.expenseLabel:o===\"income\"?at.transactions.incomeLabel:at.transactions.debtLabel]}),n.jsx(hs,{className:\"text-slate-500 font-bold text-[10px] uppercase tracking-[0.2em] mt-1\",children:o===\"debt\"?\"Manage personal debts and loans\":`Recording ${o===\"expense\"?\"an expense\":\"an income\"}`})]})]}),n.jsx(\"div\",{className:\"p-8\",children:n.jsxs(\"form\",{onSubmit:ee,className:\"space-y-6\",children:[h.length>0?n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(ye,{htmlFor:\"transaction-account\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:at.transactions.account}),n.jsxs(Ut,{value:p.accountId,onValueChange:O=>f({...p,accountId:O}),children:[n.jsx(Bt,{id:\"transaction-account\",name:\"accountId\",className:\"h-12 bg-black border-white/5 sq-md focus:ring-1 focus:ring-white/10 text-slate-200 font-bold\",children:n.jsx(It,{placeholder:\"Select account\"})}),n.jsx(qt,{className:\"bg-black border-white/5\",children:h.map(O=>n.jsx(qe,{value:O.id,className:\"focus:bg-white/5 focus:text-white\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between w-full\",children:[n.jsx(\"span\",{className:\"font-bold\",children:O.name}),n.jsx(\"span\",{className:\"text-[10px] text-slate-500 ml-4 font-mono\",children:Ne(O.balance,N)})]})},O.id))})]})]}):n.jsxs(\"div\",{className:\"p-4 bg-amber-500/10 border border-amber-500/20 sq-md text-[10px] font-black uppercase tracking-widest text-amber-400\",children:[\"⚠️ \",at.transactions.noAccounts]}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(ye,{htmlFor:\"transaction-description\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:o===\"expense\"?\"Description\":o===\"income\"?\"Source\":\"Person Name\"}),n.jsxs(\"div\",{className:\"flex gap-2\",children:[n.jsx(wt,{id:\"transaction-description\",name:\"description\",value:o===\"debt\"?p.personName:p.description,onChange:O=>f({...p,[o===\"debt\"?\"personName\":\"description\"]:O.target.value}),placeholder:o===\"expense\"?\"Starbucks Coffee, Netflix...\":o===\"income\"?\"Salary, Freelance...\":\"John Doe\",required:!0,className:\"h-12 bg-black border-white/5 sq-md focus:border-white/10 text-slate-200 font-bold placeholder:text-slate-600 flex-1\",autoComplete:\"off\"}),o===\"debt\"&&n.jsx(Re,{type:\"button\",variant:\"ghost\",onClick:F,className:\"h-12 w-12 bg-white/5 border border-white/5 sq-md flex items-center justify-center p-0 text-slate-400 hover:text-white\",title:\"Select from Contacts\",children:n.jsx(Z0,{className:\"w-5 h-5\"})})]}),T&&n.jsxs(\"div\",{className:\"mt-3 p-4 bg-indigo-500/5 border border-indigo-500/10 sq-md flex items-start gap-3 animate-in fade-in zoom-in-95 duration-300\",children:[n.jsx(Ga,{className:\"w-4 h-4 text-indigo-400 mt-0.5 flex-shrink-0\"}),n.jsxs(\"div\",{className:\"flex-1\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-widest text-indigo-300 leading-tight\",children:\"Intelligence Suggested\"}),n.jsxs(\"div\",{className:\"text-xs text-slate-400 mt-1 font-bold\",children:[o===\"expense\"&&n.jsxs(\"div\",{className:\"flex flex-col gap-1\",children:[n.jsxs(\"div\",{children:[\"Category: \",n.jsx(\"span\",{className:\"text-slate-100 uppercase\",children:T})]}),L&&n.jsxs(\"div\",{children:[\"Detected Amount: \",n.jsx(\"span\",{className:\"text-emerald-400\",children:Ne(L,N)})]})]}),M.length>0&&n.jsxs(\"div\",{className:\"mt-1\",children:[\"Tags: \",n.jsx(\"span\",{className:\"text-slate-100\",children:M.join(\", \")})]})]}),n.jsx(Re,{type:\"button\",size:\"sm\",variant:\"ghost\",onClick:ne,className:\"mt-3 h-8 bg-indigo-500/10 text-indigo-300 hover:bg-indigo-500/20 sq-sm text-[10px] font-black uppercase tracking-widest w-full\",children:\"Auto-Configure Form\"})]})]})]}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(ye,{htmlFor:\"transaction-amount\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:at.common.amount}),n.jsxs(\"div\",{className:\"flex gap-2\",children:[n.jsx(Ha,{id:\"transaction-amount\",name:\"amount\",value:p.amount,onChange:O=>f({...p,amount:O}),placeholder:\"0.00\",step:\"any\",min:\"0\",required:!0,className:\"flex-1 h-14 bg-black border-white/5 sq-md focus:border-white/10 text-xl font-black text-slate-100 placeholder:text-slate-800\",autoComplete:\"off\"}),n.jsxs(\"div\",{className:\"flex flex-col gap-1\",children:[n.jsx(Re,{type:\"button\",variant:\"ghost\",size:\"sm\",onClick:()=>ge(2),className:\"px-3 h-[25px] bg-white/5 text-[10px] font-black text-slate-400 hover:text-white sq-sm border border-white/5\",title:\"Add 00\",children:\"+00\"}),n.jsx(Re,{type:\"button\",variant:\"ghost\",size:\"sm\",onClick:()=>ge(3),className:\"px-3 h-[25px] bg-white/5 text-[10px] font-black text-slate-400 hover:text-white sq-sm border border-white/5\",title:\"Add 000\",children:\"+000\"})]})]}),n.jsx(\"div\",{className:\"flex gap-2 mt-3\",children:oe.map(O=>n.jsx(\"button\",{type:\"button\",onClick:()=>f({...p,amount:O.toString()}),className:\"flex-1 py-2 text-[10px] font-black bg-black border border-white/5 text-slate-500 sq-md hover:bg-white/5 hover:text-slate-200 transition-all uppercase tracking-widest\",children:O},O))}),E&&o===\"expense\"&&p.amount&&parseFloat(p.amount)>0&&(()=>{const O=parseFloat(p.amount),k=O<100?Math.ceil(O/10)*10:Math.ceil(O/100)*100,U=k-O;return U>0&&U>=1?n.jsxs(\"div\",{className:\"flex items-center space-x-3 mt-4 p-4 bg-indigo-500/5 border border-indigo-500/10 sq-md animate-in fade-in duration-500\",children:[n.jsx(vu,{id:\"roundUp\",name:\"roundUp\",className:\"border-white/20 data-[state=checked]:bg-indigo-500 data-[state=checked]:border-indigo-500\",onCheckedChange:Q=>{f(ae=>({...ae,roundUpAmount:Q?U:void 0}))}}),n.jsxs(\"div\",{className:\"grid gap-1.5 leading-none\",children:[n.jsxs(ye,{htmlFor:\"roundUp\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-100 flex items-center gap-2 cursor-pointer\",children:[n.jsx(qn,{className:\"w-3 h-3 text-indigo-400\"}),\"Reserve \",Ne(U,N),\" to Goals\"]}),n.jsxs(\"p\",{className:\"text-[9px] font-bold text-slate-500 uppercase tracking-tighter\",children:[\"Round up capital to nearest 100 (\",Ne(k,N),\")\"]})]})]}):null})()]}),o===\"expense\"&&n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(ye,{htmlFor:\"transaction-category\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:at.transactions.category}),n.jsxs(Ut,{value:p.category,onValueChange:O=>{f(k=>({...k,category:O,isRecurring:O===\"Subscription\"?!0:k.isRecurring,frequency:O===\"Subscription\"?\"monthly\":k.frequency}))},children:[n.jsx(Bt,{id:\"transaction-category\",name:\"category\",className:\"h-12 bg-black border-white/5 sq-md focus:ring-1 focus:ring-white/10 text-slate-200 font-bold\",children:n.jsx(It,{placeholder:\"Select domain\"})}),n.jsx(qt,{className:\"bg-black border-white/5 max-h-[300px]\",children:Tu.map(O=>n.jsxs(qe,{value:O.value,className:\"focus:bg-white/5 focus:text-white\",children:[n.jsx(\"span\",{className:\"mr-2\",children:O.emoji}),n.jsx(\"span\",{className:\"font-bold\",children:O.value})]},O.value))})]})]}),o===\"expense\"&&p.category===\"EMI\"&&n.jsxs(\"div\",{className:\"space-y-4 p-4 bg-rose-500/5 border border-rose-500/10 sq-md animate-in slide-in-from-top-2 duration-300\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsx(ye,{className:\"text-[10px] font-black uppercase tracking-widest text-rose-400\",children:\"Liability Link\"}),n.jsx(J0,{className:\"w-4 h-4 text-rose-400\"})]}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(ye,{htmlFor:\"transaction-liability\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Target Liability\"}),n.jsxs(Ut,{value:p.liabilityId,onValueChange:O=>f(k=>({...k,liabilityId:O,registerAsLiability:O===\"new\"})),children:[n.jsx(Bt,{id:\"transaction-liability\",name:\"liabilityId\",className:\"h-10 bg-black border-white/5 sq-md text-slate-200 font-bold text-xs\",children:n.jsx(It,{placeholder:\"Select or Create Liability\"})}),n.jsxs(qt,{className:\"bg-black border-white/5\",children:[n.jsx(qe,{value:\"none\",className:\"font-bold\",children:\"No formal link\"}),n.jsx(qe,{value:\"new\",className:\"text-emerald-400 font-black italic\",children:\"+ Register as New Loan\"}),g.map(O=>n.jsxs(qe,{value:O.id,className:\"font-bold\",children:[O.name,\" (₹\",O.outstanding.toLocaleString(),\")\"]},O.id))]})]})]}),p.liabilityId===\"new\"&&n.jsxs(\"div\",{className:\"space-y-4 animate-in zoom-in-95 duration-300\",children:[n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(ye,{htmlFor:\"transaction-liability-type\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Loan Category\"}),n.jsxs(Ut,{value:p.liabilityType,onValueChange:O=>f(k=>({...k,liabilityType:O})),children:[n.jsx(Bt,{id:\"transaction-liability-type\",className:\"h-10 bg-black border-white/5 sq-md text-slate-200 font-bold text-xs\",children:n.jsx(It,{})}),n.jsxs(qt,{className:\"bg-black border-white/5\",children:[n.jsx(qe,{value:\"home_loan\",children:\"🏠 Home Loan\"}),n.jsx(qe,{value:\"car_loan\",children:\"🚗 Car Loan\"}),n.jsx(qe,{value:\"personal_loan\",children:\"💳 Personal Loan\"}),n.jsx(qe,{value:\"education_loan\",children:\"🎓 Education Loan\"}),n.jsx(qe,{value:\"other\",children:\"📋 Other\"})]})]})]}),n.jsxs(\"div\",{className:\"p-3 bg-emerald-500/5 border border-emerald-500/10 rounded-xl space-y-2\",children:[n.jsx(\"p\",{className:\"text-[9px] font-black text-emerald-400 uppercase leading-relaxed\",children:'This will create a new formal liability in your \"Bills\" tab.'}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase leading-relaxed\",children:\"Ensure principal and interest are set in the Matrix below.\"})]})]})]}),(()=>{const O=h.find(W=>W.id===p.accountId);if(O?.type!==\"credit_card\"||o!==\"expense\")return null;const k=O.creditLimit||0,U=k*(O.safeLimitPercentage||30)/100,Q=Math.abs(O.balance),ae=parseFloat(p.amount||\"0\"),D=Q+ae>U&&k>0;return n.jsxs(\"div\",{className:\"space-y-4 p-4 bg-black border border-white/5 sq-md animate-in slide-in-from-top-2 duration-300\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsx(ye,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500\",children:\"Credit Card\"}),D&&n.jsx(E0,{variant:\"destructive\",className:\"bg-rose-500/10 text-rose-400 border-rose-500/20 text-[8px] font-black uppercase\",children:\"Limit Breach Risk\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(vu,{id:\"incomeGenerating\",name:\"isIncomeGenerating\",checked:p.isIncomeGenerating,onCheckedChange:W=>f(q=>({...q,isIncomeGenerating:!!W}))}),n.jsx(ye,{htmlFor:\"incomeGenerating\",className:\"text-xs font-bold text-slate-300 cursor-pointer\",children:\"This expense generates additional income\"})]}),D&&!p.isIncomeGenerating&&n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(ye,{htmlFor:\"justification\",className:\"text-[9px] font-black uppercase tracking-widest text-rose-400\",children:at.transactions.justificationRequired}),n.jsx(wt,{id:\"justification\",name:\"justification\",placeholder:\"Why is this credit use essential?\",value:p.justification,onChange:W=>f(q=>({...q,justification:W.target.value})),className:\"bg-white/5 border-rose-500/20 focus:border-rose-500/50 sq-md h-12 text-sm\",required:D,autoComplete:\"off\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase leading-relaxed\",children:\"Strategic credit use is prohibited beyond the safe threshold unless it manifests capital growth.\"})]})]})})(),o===\"debt\"&&n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(ye,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Transaction Type\"}),n.jsxs(\"div\",{className:\"flex gap-2 p-1.5 bg-black border border-white/5 sq-md\",children:[n.jsx(\"button\",{type:\"button\",onClick:()=>f({...p,debtType:\"lent\"}),className:`flex-1 py-3 px-4 sq-md text-[10px] font-black uppercase tracking-widest transition-all ${p.debtType===\"lent\"?\"bg-emerald-600 text-white shadow-lg\":\"text-slate-500 hover:text-slate-200 hover:bg-white/5\"} `,children:at.transactions.lentMoney}),n.jsx(\"button\",{type:\"button\",onClick:()=>f({...p,debtType:\"borrowed\"}),className:`flex-1 py-3 px-4 sq-md text-[10px] font-black uppercase tracking-widest transition-all ${p.debtType===\"borrowed\"?\"bg-rose-600 text-white shadow-lg\":\"text-slate-500 hover:text-slate-200 hover:bg-white/5\"} `,children:at.transactions.borrowedMoney})]})]}),o===\"debt\"&&n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(ye,{htmlFor:\"debt-due-date\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Repayment Date (Optional)\"}),n.jsx(wt,{id:\"debt-due-date\",name:\"debtDueDate\",type:\"date\",value:p.debtDueDate,onChange:O=>f({...p,debtDueDate:O.target.value}),className:\"h-12 bg-black border-white/5 sq-md focus:border-white/10 text-slate-200 font-bold\"})]}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(ye,{htmlFor:\"transaction-date\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:at.common.date}),n.jsx(wt,{id:\"transaction-date\",name:\"date\",type:\"date\",value:p.date,onChange:O=>f({...p,date:O.target.value}),required:!0,className:\"h-12 bg-black border-white/5 sq-md focus:border-white/10 text-slate-200 font-bold\"})]}),n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(ye,{htmlFor:\"transaction-tags\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:at.common.tags}),n.jsxs(\"div\",{className:\"flex gap-2\",children:[n.jsx(wt,{id:\"transaction-tags\",name:\"tags\",value:w,onChange:O=>B(O.target.value),onKeyPress:O=>O.key===\"Enter\"&&(O.preventDefault(),_()),placeholder:\"urgent, recurring, etc...\",autoComplete:\"off\",className:\"h-12 bg-black border-white/5 sq-md focus:border-white/10 text-slate-200 font-bold placeholder:text-slate-800\"}),n.jsx(Re,{type:\"button\",onClick:_,variant:\"ghost\",size:\"sm\",className:\"h-12 px-6 bg-white/5 text-[10px] font-black uppercase tracking-widest text-slate-400 hover:text-white sq-md border border-white/5\",children:\"Index\"})]}),p.tags.length>0&&n.jsx(\"div\",{className:\"flex flex-wrap gap-2 mt-2\",children:p.tags.map(O=>n.jsxs(E0,{variant:\"secondary\",className:\"gap-2 bg-black border border-white/5 text-slate-300 font-bold px-3 py-1 sq-sm\",children:[\"#\",O,n.jsx(\"button\",{type:\"button\",onClick:()=>J(O),\"aria-label\":`Remove tag ${O}`,className:\"hover:text-rose-400 transition-colors\",children:n.jsx(il,{className:\"w-3 h-3\"})})]},O))})]}),n.jsxs(\"div\",{className:\"flex items-center gap-3 p-4 bg-black border border-white/5 sq-md group\",children:[n.jsx(vu,{id:\"recurring\",name:\"isRecurring\",checked:p.isRecurring,onCheckedChange:O=>f({...p,isRecurring:!!O}),className:\"border-white/20 data-[state=checked]:bg-indigo-500 data-[state=checked]:border-indigo-500\"}),n.jsx(ye,{htmlFor:\"recurring\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-100 cursor-pointer\",children:at.transactions.recurringDescription})]}),p.isRecurring&&n.jsxs(\"div\",{className:\"space-y-6 mt-4 p-4 bg-slate-900/40 border border-white/5 sq-md animate-in fade-in zoom-in-95 duration-500\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsx(ye,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500\",children:at.transactions.loanInvestmentDetails}),n.jsx(Ga,{className:\"w-3 h-3 text-indigo-400\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(ye,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-600 ml-1\",children:at.transactions.principalCapital}),n.jsx(Ha,{value:p.principal,onChange:O=>f({...p,principal:O}),placeholder:\"e.g. 100000\",className:\"bg-black border-white/5 h-11 sq-md text-slate-300 font-bold text-xs\"})]}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(ye,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-600 ml-1\",children:\"Rate (% p.a)\"}),n.jsx(Ha,{value:p.interestRate,onChange:O=>f({...p,interestRate:O}),placeholder:\"e.g. 12\",className:\"bg-black border-white/5 h-11 sq-md text-slate-300 font-bold text-xs\"})]}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(ye,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-600 ml-1\",children:\"Tenure\"}),n.jsx(Ha,{value:p.tenure,onChange:O=>f({...p,tenure:O}),placeholder:\"e.g. 12\",className:\"bg-black border-white/5 h-11 sq-md text-slate-300 font-bold text-xs\"})]}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(ye,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-600 ml-1\",children:\"Unit\"}),n.jsxs(Ut,{value:p.tenureUnit,onValueChange:O=>f({...p,tenureUnit:O}),children:[n.jsx(Bt,{className:\"bg-black border-white/5 h-11 sq-md text-slate-300 font-bold text-xs\",children:n.jsx(It,{})}),n.jsxs(qt,{className:\"bg-black border-white/5\",children:[n.jsx(qe,{value:\"months\",children:\"Months\"}),n.jsx(qe,{value:\"years\",children:\"Years\"})]})]})]})]}),(()=>{const O=parseFloat(p.principal),k=parseFloat(p.interestRate);let U=parseInt(p.tenure);if(isNaN(O)||isNaN(k)||isNaN(U)||O<=0)return null;if(p.tenureUnit===\"years\"&&(U*=12),o===\"expense\"){const Q=hj(O,k,U);return n.jsxs(\"div\",{className:\"space-y-3 pt-2 border-t border-white/5\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-center\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500\",children:\"Calculated EMI\"}),n.jsx(\"span\",{className:\"text-sm font-black text-rose-400\",children:Ne(Q.emi,N)})]}),n.jsxs(\"div\",{className:\"flex justify-between items-center\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500\",children:\"Extra Interest\"}),n.jsx(\"span\",{className:\"text-xs font-bold text-slate-400\",children:Ne(Q.totalInterest,N)})]}),n.jsx(Re,{type:\"button\",variant:\"ghost\",onClick:()=>{const ae=new Date(p.date),v=U;ae.setMonth(ae.getMonth()+v);const D=ae.toISOString().split(\"T\")[0];f({...p,amount:Q.emi.toString(),endDate:D})},className:\"w-full h-9 bg-rose-500/10 text-rose-300 hover:bg-rose-500/20 text-[10px] font-black uppercase tracking-widest sq-md\",children:\"Sync EMI to Transaction\"})]})}else if(o===\"income\"){const Q=pj(O,k,U);return n.jsxs(\"div\",{className:\"space-y-3 pt-2 border-t border-white/5\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-center\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500\",children:\"Monthly Yield\"}),n.jsx(\"span\",{className:\"text-sm font-black text-emerald-400\",children:Ne(Q.monthlyYield,N)})]}),n.jsxs(\"div\",{className:\"flex justify-between items-center\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500\",children:\"Total Capital Gains\"}),n.jsx(\"span\",{className:\"text-xs font-bold text-slate-400\",children:Ne(Q.totalReturns,N)})]}),n.jsx(Re,{type:\"button\",variant:\"ghost\",onClick:()=>{const ae=new Date(p.date),v=U;ae.setMonth(ae.getMonth()+v);const D=ae.toISOString().split(\"T\")[0];f({...p,amount:Q.monthlyYield.toString(),endDate:D})},className:\"w-full h-9 bg-emerald-500/10 text-emerald-300 hover:bg-emerald-500/20 text-[10px] font-black uppercase tracking-widest sq-md\",children:\"Sync Yield to Transaction\"})]})}return null})(),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t border-white/5\",children:[n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(ye,{htmlFor:\"transaction-frequency\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Period\"}),n.jsxs(Ut,{value:p.frequency,onValueChange:O=>f({...p,frequency:O}),children:[n.jsx(Bt,{id:\"transaction-frequency\",name:\"frequency\",className:\"bg-black border-white/5 h-12 sq-md text-slate-200 font-bold\",children:n.jsx(It,{})}),n.jsxs(qt,{className:\"bg-black border-white/5\",children:[n.jsx(qe,{value:\"daily\",children:\"Daily\"}),n.jsx(qe,{value:\"weekly\",children:\"Weekly\"}),n.jsx(qe,{value:\"monthly\",children:\"Monthly\"}),n.jsx(qe,{value:\"yearly\",children:\"Yearly\"}),n.jsx(qe,{value:\"custom\",children:\"Custom\"})]})]})]}),p.frequency===\"custom\"?n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(ye,{htmlFor:\"transaction-interval\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Days Interval\"}),n.jsx(Ha,{id:\"transaction-interval\",name:\"customIntervalDays\",value:p.customIntervalDays||\"\",onChange:O=>f({...p,customIntervalDays:parseInt(O)}),placeholder:\"e.g. 45\",min:\"1\",className:\"bg-black border-white/5 h-12 sq-md text-slate-200 font-bold\"})]}):n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(ye,{htmlFor:\"transaction-end-date\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Termination\"}),n.jsx(wt,{id:\"transaction-end-date\",name:\"endDate\",type:\"date\",value:p.endDate,onChange:O=>f({...p,endDate:O.target.value}),className:\"bg-black border-white/5 h-12 sq-md text-slate-200 font-bold\"})]})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-6\",children:[n.jsx(Re,{type:\"button\",variant:\"ghost\",onClick:Z,className:\"flex-1 h-14 sq-md text-[10px] font-black uppercase tracking-widest text-slate-500 hover:text-slate-100 hover:bg-white/5 border border-white/5\",children:at.common.actions.abort}),n.jsx(Re,{type:\"submit\",className:`flex-1 h-14 sq-md text-[10px] font-black uppercase tracking-widest shadow-xl active:scale-[0.98] transition-all ${o===\"expense\"?\"bg-rose-600 hover:bg-rose-500 shadow-rose-900/20\":o===\"income\"?\"bg-emerald-600 hover:bg-emerald-500 shadow-emerald-900/20\":\"bg-yellow-600 hover:bg-yellow-500 shadow-yellow-900/20\"}`,disabled:h.length===0,children:d?at.common.actions.update:at.common.actions.record})]})]})})]})})},xj=({isOpen:i,onClose:l,onConfirm:o,expenseAmount:u,roundedAmount:d,currency:h,goals:g,onMute:N})=>{const[E,S]=x.useState(\"emergency\"),[p,f]=x.useState(\"\"),w=d-u,A=()=>{if(E===\"goal\"&&g.length>0&&!p){ce.error(\"Please select a goal to save into.\");return}o(E===\"goal\"?p:\"emergency\",E)};return n.jsx(us,{open:i,onOpenChange:l,children:n.jsxs(ds,{className:\"sm:max-w-md max-h-[90vh] overflow-y-auto bg-slate-950 border-white/5 p-0 shadow-2xl custom-scrollbar\",children:[n.jsxs(\"div\",{className:\"px-8 pt-10 pb-8 border-b border-white/5 relative overflow-hidden bg-emerald-500/5\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 bg-emerald-500 blur-[80px] opacity-20 -mr-16 -mt-16\"}),n.jsxs(fs,{className:\"relative z-10\",children:[n.jsxs(ms,{className:\"flex items-center gap-3 text-2xl font-black tracking-tighter text-slate-100\",children:[n.jsx(Yb,{className:\"w-7 h-7 text-emerald-500\"}),\"Wealth Multiplier\"]}),n.jsx(hs,{className:\"text-slate-500 font-bold text-[10px] uppercase tracking-[0.2em] mt-1\",children:\"System detected idle capital in transaction\"})]})]}),n.jsxs(\"div\",{className:\"p-8 space-y-8\",children:[n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"p\",{className:\"text-sm font-bold text-slate-300 leading-relaxed text-center px-4\",children:[\"Transaction of \",n.jsx(\"span\",{className:\"text-slate-100\",children:Ne(u,h)}),\" processed. Initialize round-up to \",n.jsx(\"span\",{className:\"text-emerald-400\",children:Ne(d,h)}),\"?\"]}),n.jsxs(\"div\",{className:\"flex flex-col items-center justify-center py-8 bg-slate-900 border border-white/5 rounded-[32px] relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute inset-0 bg-emerald-500/5 opacity-0 group-hover:opacity-100 transition-opacity\"}),n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-emerald-500 mb-1\",children:\"Leftover Cash\"}),n.jsx(\"p\",{className:\"text-5xl font-black text-white tracking-tighter\",children:Ne(w,h)})]})]}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(ye,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Asset Allocation Target\"}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"button\",{type:\"button\",onClick:()=>S(\"emergency\"),className:`p-5 rounded-3xl border transition-all duration-300 flex flex-col items-center gap-3 ${E===\"emergency\"?\"bg-emerald-600 border-emerald-500 text-white shadow-lg shadow-emerald-900/40\":\"bg-slate-900 border-white/5 text-slate-500 hover:text-slate-300 hover:bg-white/5\"}`,children:[n.jsx($b,{className:`w-6 h-6 ${E===\"emergency\"?\"text-white\":\"text-slate-500\"}`}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest\",children:\"Stability\"})]}),n.jsxs(\"button\",{type:\"button\",onClick:()=>{S(\"goal\"),g.length>0&&!p&&f(g[0].id)},className:`p-5 rounded-3xl border transition-all duration-300 flex flex-col items-center gap-3 ${E===\"goal\"?\"bg-indigo-600 border-indigo-500 text-white shadow-lg shadow-indigo-900/40\":\"bg-slate-900 border-white/5 text-slate-500 hover:text-slate-300 hover:bg-white/5\"}`,children:[n.jsx(Xb,{className:`w-6 h-6 ${E===\"goal\"?\"text-white\":\"text-slate-500\"}`}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest\",children:\"Growth\"})]})]}),E===\"goal\"&&g.length>0&&n.jsx(\"div\",{className:\"mt-4 animate-in slide-in-from-top-2 duration-300\",children:n.jsxs(Ut,{value:p,onValueChange:f,children:[n.jsx(Bt,{id:\"round-up-goal-select\",name:\"goalId\",className:\"h-12 bg-slate-900 border-white/5 rounded-2xl text-slate-200 font-bold focus:ring-1 focus:ring-white/10\",children:n.jsx(It,{placeholder:\"Select Growth Target\"})}),n.jsx(qt,{className:\"bg-slate-900 border-white/5\",children:g.map(T=>n.jsxs(qe,{value:T.id,className:\"focus:bg-white/5 focus:text-white font-bold\",children:[T.emoji,\" \",T.name]},T.id))})]})}),E===\"goal\"&&g.length===0&&n.jsx(\"div\",{className:\"p-4 bg-amber-500/10 border border-amber-500/20 rounded-2xl text-[10px] font-black uppercase tracking-widest text-amber-400 text-center\",children:\"No active targets. Defaulting to General Reservoirs.\"})]}),n.jsxs(\"div\",{className:\"pt-2 space-y-4\",children:[n.jsx(Re,{onClick:A,className:\"w-full text-[10px] font-black uppercase tracking-widest h-14 bg-emerald-600 hover:bg-emerald-500 text-white rounded-2xl shadow-xl shadow-emerald-900/20 active:scale-[0.98] transition-all\",children:\"Initialize Savings Event\"}),n.jsxs(\"div\",{className:\"flex items-center justify-between gap-4\",children:[n.jsx(Re,{variant:\"ghost\",size:\"sm\",onClick:l,className:\"h-10 px-6 rounded-xl text-[10px] font-black uppercase tracking-widest text-slate-500 hover:text-slate-300 hover:bg-white/5 border border-white/5\",children:\"Abort\"}),n.jsx(\"div\",{className:\"flex-1\",children:n.jsxs(Ut,{onValueChange:T=>N(T),children:[n.jsx(Bt,{id:\"mute-duration\",name:\"muteDuration\",className:\"h-10 bg-transparent border border-white/5 hover:bg-white/5 rounded-xl text-[9px] font-black uppercase tracking-widest text-slate-500 justify-center gap-2 px-4 focus:ring-0\",children:n.jsx(It,{placeholder:\"Disabled\"})}),n.jsxs(qt,{align:\"end\",className:\"bg-slate-900 border-white/5\",children:[n.jsx(qe,{value:\"today\",className:\"text-[10px] font-bold py-2\",children:\"Mute 24h\"}),n.jsx(qe,{value:\"week\",className:\"text-[10px] font-bold py-2\",children:\"Mute 7d\"}),n.jsx(qe,{value:\"month\",className:\"text-[10px] font-bold py-2\",children:\"Mute 30d\"})]})]})})]})]})]})]})})};var bj=(i,l,o,u,d,h,g,N)=>{let E=document.documentElement,S=[\"light\",\"dark\"];function p(A){(Array.isArray(i)?i:[i]).forEach(T=>{let C=T===\"class\",M=C&&h?d.map(y=>h[y]||y):d;C?(E.classList.remove(...M),E.classList.add(h&&h[A]?h[A]:A)):E.setAttribute(T,A)}),f(A)}function f(A){N&&S.includes(A)&&(E.style.colorScheme=A)}function w(){return window.matchMedia(\"(prefers-color-scheme: dark)\").matches?\"dark\":\"light\"}if(u)p(u);else try{let A=localStorage.getItem(l)||o,T=g&&A===\"system\"?w():A;p(T)}catch{}},M0=[\"light\",\"dark\"],Ap=\"(prefers-color-scheme: dark)\",yj=typeof window>\"u\",Ku=x.createContext(void 0),vj={setTheme:i=>{},themes:[]},wj=()=>{var i;return(i=x.useContext(Ku))!=null?i:vj},jj=i=>x.useContext(Ku)?x.createElement(x.Fragment,null,i.children):x.createElement(Sj,{...i}),Nj=[\"light\",\"dark\"],Sj=({forcedTheme:i,disableTransitionOnChange:l=!1,enableSystem:o=!0,enableColorScheme:u=!0,storageKey:d=\"theme\",themes:h=Nj,defaultTheme:g=o?\"system\":\"light\",attribute:N=\"data-theme\",value:E,children:S,nonce:p,scriptProps:f})=>{let[w,A]=x.useState(()=>Ej(d,g)),[T,C]=x.useState(()=>w===\"system\"?wu():w),M=E?Object.values(E):h,y=x.useCallback(G=>{let ee=G;if(!ee)return;G===\"system\"&&o&&(ee=wu());let Z=E?E[ee]:ee,_=l?Aj(p):null,B=document.documentElement,J=ne=>{ne===\"class\"?(B.classList.remove(...M),Z&&B.classList.add(Z)):ne.startsWith(\"data-\")&&(Z?B.setAttribute(ne,Z):B.removeAttribute(ne))};if(Array.isArray(N)?N.forEach(J):J(N),u){let ne=M0.includes(g)?g:null,F=M0.includes(ee)?ee:ne;B.style.colorScheme=F}_?.()},[p]),L=x.useCallback(G=>{let ee=typeof G==\"function\"?G(w):G;A(ee);try{localStorage.setItem(d,ee)}catch{}},[w]),z=x.useCallback(G=>{let ee=wu(G);C(ee),w===\"system\"&&o&&!i&&y(\"system\")},[w,i]);x.useEffect(()=>{let G=window.matchMedia(Ap);return G.addListener(z),z(G),()=>G.removeListener(z)},[z]),x.useEffect(()=>{let G=ee=>{ee.key===d&&(ee.newValue?A(ee.newValue):L(g))};return window.addEventListener(\"storage\",G),()=>window.removeEventListener(\"storage\",G)},[L]),x.useEffect(()=>{y(i??w)},[i,w]);let j=x.useMemo(()=>({theme:w,setTheme:L,forcedTheme:i,resolvedTheme:w===\"system\"?T:w,themes:o?[...h,\"system\"]:h,systemTheme:o?T:void 0}),[w,L,i,T,o,h]);return x.createElement(Ku.Provider,{value:j},x.createElement(Cj,{forcedTheme:i,storageKey:d,attribute:N,enableSystem:o,enableColorScheme:u,defaultTheme:g,value:E,themes:h,nonce:p,scriptProps:f}),S)},Cj=x.memo(({forcedTheme:i,storageKey:l,attribute:o,enableSystem:u,enableColorScheme:d,defaultTheme:h,value:g,themes:N,nonce:E,scriptProps:S})=>{let p=JSON.stringify([o,l,h,i,N,g,u,d]).slice(1,-1);return x.createElement(\"script\",{...S,suppressHydrationWarning:!0,nonce:typeof window>\"u\"?E:\"\",dangerouslySetInnerHTML:{__html:`(${bj.toString()})(${p})`}})}),Ej=(i,l)=>{if(yj)return;let o;try{o=localStorage.getItem(i)||void 0}catch{}return o||l},Aj=i=>{let l=document.createElement(\"style\");return i&&l.setAttribute(\"nonce\",i),l.appendChild(document.createTextNode(\"*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}\")),document.head.appendChild(l),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(l)},1)}},wu=i=>(i||(i=window.matchMedia(Ap)),i.matches?\"dark\":\"light\");function kp({...i}){return n.jsx(V0,{\"data-slot\":\"sheet\",...i})}function kj({...i}){return n.jsx(Q0,{\"data-slot\":\"sheet-portal\",...i})}const Tp=x.forwardRef(({className:i,...l},o)=>n.jsx(G0,{ref:o,\"data-slot\":\"sheet-overlay\",className:De(\"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-[200] bg-black/50\",i),...l}));Tp.displayName=\"SheetOverlay\";function Dp({className:i,children:l,side:o=\"right\",...u}){return n.jsxs(kj,{children:[n.jsx(F0,{asChild:!0,children:n.jsx(Tp,{})}),n.jsx(Y0,{\"data-slot\":\"sheet-content\",className:De(\"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-[200] flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-200 data-[state=open]:duration-300\",o===\"right\"&&\"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm\",o===\"left\"&&\"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm\",o===\"top\"&&\"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b\",o===\"bottom\"&&\"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t\",i),...u,children:l})]})}function Mp({className:i,...l}){return n.jsx($0,{\"data-slot\":\"sheet-title\",className:De(\"text-foreground font-semibold\",i),...l})}function _p({className:i,...l}){return n.jsx(X0,{\"data-slot\":\"sheet-description\",className:De(\"text-muted-foreground text-sm\",i),...l})}function Tj({...i}){return n.jsx(Qb,{\"data-slot\":\"collapsible\",...i})}function Dj({...i}){return n.jsx(Kb,{\"data-slot\":\"collapsible-trigger\",...i})}function Mj({...i}){return n.jsx(Zb,{\"data-slot\":\"collapsible-content\",...i})}function _j({className:i,orientation:l=\"horizontal\",decorative:o=!0,...u}){return n.jsx(Jb,{\"data-slot\":\"separator-root\",decorative:o,orientation:l,className:De(\"bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px\",i),...u})}function Rp({...i}){return n.jsx(Pb,{\"data-slot\":\"alert-dialog\",...i})}function Rj({...i}){return n.jsx(sy,{\"data-slot\":\"alert-dialog-trigger\",...i})}function Oj({...i}){return n.jsx(iy,{\"data-slot\":\"alert-dialog-portal\",...i})}function zj({className:i,...l}){return n.jsx(ly,{\"data-slot\":\"alert-dialog-overlay\",className:De(\"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\",i),...l})}function Op({className:i,...l}){return n.jsxs(Oj,{children:[n.jsx(zj,{}),n.jsx(Wb,{\"data-slot\":\"alert-dialog-content\",className:De(\"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg\",i),...l})]})}function zp({className:i,...l}){return n.jsx(\"div\",{\"data-slot\":\"alert-dialog-header\",className:De(\"flex flex-col gap-2 text-center sm:text-left\",i),...l})}function Lp({className:i,...l}){return n.jsx(\"div\",{\"data-slot\":\"alert-dialog-footer\",className:De(\"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\",i),...l})}function Up({className:i,...l}){return n.jsx(ey,{\"data-slot\":\"alert-dialog-title\",className:De(\"text-lg font-semibold\",i),...l})}function Ip({className:i,...l}){return n.jsx(ty,{\"data-slot\":\"alert-dialog-description\",className:De(\"text-muted-foreground text-sm\",i),...l})}function Bp({className:i,...l}){return n.jsx(ny,{className:De(Iu(),i),...l})}function qp({className:i,...l}){return n.jsx(ay,{className:De(Iu({variant:\"outline\"}),i),...l})}const Lj=i=>{const l=new Map;return i.forEach(o=>{const u=l.get(o.category)||0;l.set(o.category,u+o.amount)}),Array.from(l.entries()).map(([o,u])=>({category:o,amount:u})).sort((o,u)=>u.amount-o.amount).slice(0,5)},Uj=i=>{const l=i.expenses,o=i.incomes,u=i.totalIncome,d=o.some(y=>y.isRecurring)?\"salary\":\"fluctuating\",h=[\"Bills & Utilities\",\"EMI\",\"Rent\",\"Education\",\"Insurance\"],g=l.filter(y=>h.includes(y.category)||y.isRecurring).reduce((y,L)=>y+L.amount,0),N=i.totalExpenses-g,E=u>0?((u-i.totalExpenses)/u*100).toFixed(0)+\"%\":\"0%\",S=l.filter(y=>y.category===\"EMI\"||y.category===\"Debt\").reduce((y,L)=>y+L.amount,0),p=u>0?(S/u*100).toFixed(1)+\"%\":\"0%\",f=(i.healthScore/10).toFixed(1),w=Lj(l).slice(0,3),A=l.filter(y=>y.category===\"Subscription\").reduce((y,L)=>y+L.amount,0),T=new Map;[...l,...o].forEach(y=>{y.tags?.forEach(L=>{const z=T.get(L)||0;T.set(L,z+1)})});const C=Array.from(T.entries()).sort((y,L)=>L[1]-y[1]).slice(0,5).map(([y])=>y),M={user_profile:{monthly_income:u,income_type:d,emergency_fund_months:f},current_month_stats:{total_expenses:i.totalExpenses,fixed_expenses:g,variable_expenses:N,top_category:w[0]?.category||\"None\",savings_rate:E},liabilities:{total_debt:i.activeDebts>0?\"Present\":\"None\",monthly_debt_payment:S,debt_ratio:p},behavioral:{top_3_categories:w.map(y=>y.category),subscription_burden:A,frequent_tags:C},portfolio_analysis:{aggregation_rule:\"Source Independence (Calculated on 'investment' accounts only)\",growth_formula:\"((Sum Current Values / Sum Principals) - 1) * 100\",total_investments:i.investments.length,linked_nodes:i.investments.filter(y=>y.accountId).length,rule_based_metrics:{total_principal:i.investments.filter(y=>i.accounts.find(z=>z.id===y.accountId)?.type===\"investment\").reduce((y,L)=>y+L.buyPrice*L.quantity,0),current_market_value:i.investments.filter(y=>i.accounts.find(z=>z.id===y.accountId)?.type===\"investment\").reduce((y,L)=>y+(L.currentPrice||0)*L.quantity,0)}}};return JSON.stringify(M,null,2)},Ij=(i,l,o)=>{const d=`Context: \"The user is looking at the ${o===\"dashboard\"?\"Balance Board\":o===\"investments\"?\"Investment\":o===\"liability\"?\"Liability\":o===\"goals\"?\"Goal\":\"Financial\"} Stack.\"`,h=i.accounts.reduce((w,A)=>w+(A.balance||0),0),g=i.investments.reduce((w,A)=>w+(A.currentPrice||A.buyPrice)*A.quantity,0),N=h+g,E=w=>new Intl.NumberFormat(l===\"INR\"?\"en-IN\":\"en-US\",{style:\"currency\",currency:l,maximumFractionDigits:0}).format(w),S=i.healthScore>70?\"5%\":i.healthScore>50?\"2%\":\"stable\",p=`Insight: \"Net worth is ${E(N)}, showing a ${S} growth trend.\"`;let f=\"\";return i.investments.length>0&&o!==\"investments\"?f=`Action: \"Suggest a 2x2 Grid update for the 'Investment' category.\"`:i.activeDebts>0?f='Action: \"Propose a tactical recovery plan for pending liabilities.\"':i.savingsRate<.2?f='Action: \"Suggest optimizing the spending body to increase savings velocity.\"':f='Action: \"Maintain current protocol and monitor the Wealth Builder Stack.\"',`${d}"
      },
      {
        "file": "android\\app\\src\\main\\assets\\public\\assets\\index-i0Euu4OB.js",
        "line": 19,
        "snippet": "`),()=>{y.contains(M)&&y.removeChild(M)}},[l]),n.jsx($1,{isPresent:l,childRef:h,sizeRef:g,children:x.cloneElement(i,{ref:S})})}const Q1=({children:i,initial:l,isPresent:o,onExitComplete:u,custom:d,presenceAffectsLayout:h,mode:g,anchorX:N,root:E})=>{const S=Fu(K1),p=x.useId();let f=!0,w=x.useMemo(()=>(f=!1,{id:p,initial:l,isPresent:o,custom:d,onExitComplete:A=>{S.set(A,!0);for(const T of S.values())if(!T)return;u&&u()},register:A=>(S.set(A,!1),()=>S.delete(A))}),[o,S,u]);return h&&f&&(w={...w}),x.useMemo(()=>{S.forEach((A,T)=>S.set(T,!1))},[o]),x.useEffect(()=>{!o&&!S.size&&u&&u()},[o]),g===\"popLayout\"&&(i=n.jsx(X1,{isPresent:o,anchorX:N,root:E,children:i})),n.jsx(zr.Provider,{value:w,children:i})};function K1(){return new Map}function mp(i=!0){const l=x.useContext(zr);if(l===null)return[!0,null];const{isPresent:o,onExitComplete:u,register:d}=l,h=x.useId();x.useEffect(()=>{if(i)return d(h)},[i]);const g=x.useCallback(()=>i&&u&&u(h),[h,u,i]);return!o&&u?[!1,g]:[!0]}const jr=i=>i.key||\"\";function f0(i){const l=[];return x.Children.forEach(i,o=>{x.isValidElement(o)&&l.push(o)}),l}const Bn=({children:i,custom:l,initial:o=!0,onExitComplete:u,presenceAffectsLayout:d=!0,mode:h=\"sync\",propagate:g=!1,anchorX:N=\"left\",root:E})=>{const[S,p]=mp(g),f=x.useMemo(()=>f0(i),[i]),w=g&&!S?[]:f.map(jr),A=x.useRef(!0),T=x.useRef(f),C=Fu(()=>new Map),M=x.useRef(new Set),[y,L]=x.useState(f),[z,j]=x.useState(f);fp(()=>{A.current=!1,T.current=f;for(let Z=0;Z<z.length;Z++){const _=jr(z[Z]);w.includes(_)?(C.delete(_),M.current.delete(_)):C.get(_)!==!0&&C.set(_,!1)}},[z,w.length,w.join(\"-\")]);const G=[];if(f!==y){let Z=[...f];for(let _=0;_<z.length;_++){const B=z[_],J=jr(B);w.includes(J)||(Z.splice(_,0,B),G.push(B))}return h===\"wait\"&&G.length&&(Z=G),j(f0(Z)),L(f),null}const{forceRender:ee}=x.useContext(Vu);return n.jsx(n.Fragment,{children:z.map(Z=>{const _=jr(Z),B=g&&!S?!1:f===z||w.includes(_),J=()=>{if(M.current.has(_))return;if(M.current.add(_),C.has(_))C.set(_,!0);else return;let ne=!0;C.forEach(F=>{F||(ne=!1)}),ne&&(ee?.(),j(T.current),g&&p?.(),u&&u())};return n.jsx(Q1,{isPresent:B,initial:!A.current||o?void 0:!1,custom:l,presenceAffectsLayout:d,mode:h,root:E,onExitComplete:B?void 0:J,anchorX:N,children:Z},_)})})},hp=x.createContext({strict:!1}),m0={animation:[\"animate\",\"variants\",\"whileHover\",\"whileTap\",\"exit\",\"whileInView\",\"whileFocus\",\"whileDrag\"],exit:[\"exit\"],drag:[\"drag\",\"dragControls\"],focus:[\"whileFocus\"],hover:[\"whileHover\",\"onHoverStart\",\"onHoverEnd\"],tap:[\"whileTap\",\"onTap\",\"onTapStart\",\"onTapCancel\"],pan:[\"onPan\",\"onPanStart\",\"onPanSessionStart\",\"onPanEnd\"],inView:[\"whileInView\",\"onViewportEnter\",\"onViewportLeave\"],layout:[\"layout\",\"layoutId\"]};let h0=!1;function Z1(){if(h0)return;const i={};for(const l in m0)i[l]={isEnabled:o=>m0[l].some(u=>!!o[u])};W0(i),h0=!0}function pp(){return Z1(),Ly()}function J1(i){const l=pp();for(const o in i)l[o]={...l[o],...i[o]};W0(l)}const P1=new Set([\"animate\",\"exit\",\"variants\",\"initial\",\"style\",\"values\",\"variants\",\"transition\",\"transformTemplate\",\"custom\",\"inherit\",\"onBeforeLayoutMeasure\",\"onAnimationStart\",\"onAnimationComplete\",\"onUpdate\",\"onDragStart\",\"onDrag\",\"onDragEnd\",\"onMeasureDragConstraints\",\"onDirectionLock\",\"onDragTransitionEnd\",\"_dragX\",\"_dragY\",\"onHoverStart\",\"onHoverEnd\",\"onViewportEnter\",\"onViewportLeave\",\"globalTapTarget\",\"ignoreStrict\",\"viewport\"]);function Mr(i){return i.startsWith(\"while\")||i.startsWith(\"drag\")&&i!==\"draggable\"||i.startsWith(\"layout\")||i.startsWith(\"onTap\")||i.startsWith(\"onPan\")||i.startsWith(\"onLayout\")||P1.has(i)}let gp=i=>!Mr(i);function W1(i){typeof i==\"function\"&&(gp=l=>l.startsWith(\"on\")?!Mr(l):i(l))}try{W1(require(\"@emotion/is-prop-valid\").default)}catch{}function ew(i,l,o){const u={};for(const d in i)d===\"values\"&&typeof i.values==\"object\"||(gp(d)||o===!0&&Mr(d)||!l&&!Mr(d)||i.draggable&&d.startsWith(\"onDrag\"))&&(u[d]=i[d]);return u}const Lr=x.createContext({});function tw(i,l){if(ep(i)){const{initial:o,animate:u}=i;return{initial:o===!1||Vh(o)?o:void 0,animate:Vh(u)?u:void 0}}return i.inherit!==!1?l:{}}function aw(i){const{initial:l,animate:o}=tw(i,x.useContext(Lr));return x.useMemo(()=>({initial:l,animate:o}),[p0(l),p0(o)])}function p0(i){return Array.isArray(i)?i.join(\" \"):i}const $u=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function xp(i,l,o){for(const u in l)!tp(l[u])&&!Uy(u,o)&&(i[u]=l[u])}function nw({transformTemplate:i},l){return x.useMemo(()=>{const o=$u();return Iy(o,l,i),Object.assign({},o.vars,o.style)},[l])}function sw(i,l){const o=i.style||{},u={};return xp(u,o,i),Object.assign(u,nw(i,l)),u}function iw(i,l){const o={},u=sw(i,l);return i.drag&&i.dragListener!==!1&&(o.draggable=!1,u.userSelect=u.WebkitUserSelect=u.WebkitTouchCallout=\"none\",u.touchAction=i.drag===!0?\"none\":`pan-${i.drag===\"x\"?\"y\":\"x\"}`),i.tabIndex===void 0&&(i.onTap||i.onTapStart||i.whileTap)&&(o.tabIndex=0),o.style=u,o}const bp=()=>({...$u(),attrs:{}});function lw(i,l,o,u){const d=x.useMemo(()=>{const h=bp();return By(h,l,qy(u),i.transformTemplate,i.style),{...h.attrs,style:{...h.style}}},[l]);if(i.style){const h={};xp(h,i.style,i),d.style={...h,...d.style}}return d}const rw=[\"animate\",\"circle\",\"defs\",\"desc\",\"ellipse\",\"g\",\"image\",\"line\",\"filter\",\"marker\",\"mask\",\"metadata\",\"path\",\"pattern\",\"polygon\",\"polyline\",\"rect\",\"stop\",\"switch\",\"symbol\",\"svg\",\"text\",\"tspan\",\"use\",\"view\"];function Xu(i){return typeof i!=\"string\"||i.includes(\"-\")?!1:!!(rw.indexOf(i)>-1||/[A-Z]/u.test(i))}function ow(i,l,o,{latestValues:u},d,h=!1,g){const E=(g??Xu(i)?lw:iw)(l,u,d,i),S=ew(l,typeof i==\"string\",h),p=i!==x.Fragment?{...S,...E,ref:o}:{},{children:f}=l,w=x.useMemo(()=>tp(f)?f.get():f,[f]);return x.createElement(i,{...p,children:w})}function cw({scrapeMotionValuesFromProps:i,createRenderState:l},o,u,d){return{latestValues:uw(o,u,d,i),renderState:l()}}function uw(i,l,o,u){const d={},h=u(i,{});for(const w in h)d[w]=Hy(h[w]);let{initial:g,animate:N}=i;const E=ep(i),S=Gy(i);l&&S&&!E&&i.inherit!==!1&&(g===void 0&&(g=l.initial),N===void 0&&(N=l.animate));let p=o?o.initial===!1:!1;p=p||g===!1;const f=p?N:g;if(f&&typeof f!=\"boolean\"&&!ap(f)){const w=Array.isArray(f)?f:[f];for(let A=0;A<w.length;A++){const T=Vy(i,w[A]);if(T){const{transitionEnd:C,transition:M,...y}=T;for(const L in y){let z=y[L];if(Array.isArray(z)){const j=p?z.length-1:0;z=z[j]}z!==null&&(d[L]=z)}for(const L in C)d[L]=C[L]}}}return d}const yp=i=>(l,o)=>{const u=x.useContext(Lr),d=x.useContext(zr),h=()=>cw(i,l,u,d);return o?h():Fu(h)},dw=yp({scrapeMotionValuesFromProps:Fy,createRenderState:$u}),fw=yp({scrapeMotionValuesFromProps:Yy,createRenderState:bp}),mw=Symbol.for(\"motionComponentSymbol\");function hw(i,l,o){const u=x.useRef(o);x.useInsertionEffect(()=>{u.current=o});const d=x.useRef(null);return x.useCallback(h=>{h&&i.onMount?.(h),l&&(h?l.mount(h):l.unmount());const g=u.current;if(typeof g==\"function\")if(h){const N=g(h);typeof N==\"function\"&&(d.current=N)}else d.current?(d.current(),d.current=null):g(h);else g&&(g.current=h)},[l])}const vp=x.createContext({});function Ji(i){return i&&typeof i==\"object\"&&Object.prototype.hasOwnProperty.call(i,\"current\")}function pw(i,l,o,u,d,h){const{visualElement:g}=x.useContext(Lr),N=x.useContext(hp),E=x.useContext(zr),S=x.useContext(Yu).reducedMotion,p=x.useRef(null);u=u||N.renderer,!p.current&&u&&(p.current=u(i,{visualState:l,parent:g,props:o,presenceContext:E,blockInitialAnimation:E?E.initial===!1:!1,reducedMotionConfig:S,isSVG:h}));const f=p.current,w=x.useContext(vp);f&&!f.projection&&d&&(f.type===\"html\"||f.type===\"svg\")&&gw(p.current,o,d,w);const A=x.useRef(!1);x.useInsertionEffect(()=>{f&&A.current&&f.update(o,E)});const T=o[$y],C=x.useRef(!!T&&!window.MotionHandoffIsComplete?.(T)&&window.MotionHasOptimisedAnimation?.(T));return fp(()=>{f&&(A.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),C.current&&f.animationState&&f.animationState.animateChanges())}),x.useEffect(()=>{f&&(!C.current&&f.animationState&&f.animationState.animateChanges(),C.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(T)}),C.current=!1),f.enteringChildren=void 0)}),f}function gw(i,l,o,u){const{layoutId:d,layout:h,drag:g,dragConstraints:N,layoutScroll:E,layoutRoot:S,layoutCrossfade:p}=l;i.projection=new o(i.latestValues,l[\"data-framer-portal-id\"]?void 0:wp(i.parent)),i.projection.setOptions({layoutId:d,layout:h,alwaysMeasureLayout:!!g||N&&Ji(N),visualElement:i,animationType:typeof h==\"string\"?h:\"both\",initialPromotionConfig:u,crossfade:p,layoutScroll:E,layoutRoot:S})}function wp(i){if(i)return i.options.allowProjection!==!1?i.projection:wp(i.parent)}function cu(i,{forwardMotionProps:l=!1,type:o}={},u,d){u&&J1(u);const h=o?o===\"svg\":Xu(i),g=h?fw:dw;function N(S,p){let f;const w={...x.useContext(Yu),...S,layoutId:xw(S)},{isStatic:A}=w,T=aw(S),C=g(S,A);if(!A&&dp){bw();const M=yw(w);f=M.MeasureLayout,T.visualElement=pw(i,C,w,d,M.ProjectionNode,h)}return n.jsxs(Lr.Provider,{value:T,children:[f&&T.visualElement?n.jsx(f,{visualElement:T.visualElement,...w}):null,ow(i,S,hw(C,T.visualElement,p),C,A,l,h)]})}N.displayName=`motion.${typeof i==\"string\"?i:`create(${i.displayName??i.name??\"\"})`}`;const E=x.forwardRef(N);return E[mw]=i,E}function xw({layoutId:i}){const l=x.useContext(Vu).id;return l&&i!==void 0?l+\"-\"+i:i}function bw(i,l){x.useContext(hp).strict}function yw(i){const l=pp(),{drag:o,layout:u}=l;if(!o&&!u)return{};const d={...o,...u};return{MeasureLayout:o?.isEnabled(i)||u?.isEnabled(i)?d.MeasureLayout:void 0,ProjectionNode:d.ProjectionNode}}function vw(i,l){if(typeof Proxy>\"u\")return cu;const o=new Map,u=(h,g)=>cu(h,g,i,l),d=(h,g)=>u(h,g);return new Proxy(d,{get:(h,g)=>g===\"create\"?u:(o.has(g)||o.set(g,cu(g,void 0,i,l)),o.get(g))})}const ww=(i,l)=>l.isSVG??Xu(i)?new Xy(l):new Qy(l,{allowProjection:i!==x.Fragment});class jw extends Vn{constructor(l){super(l),l.animationState||(l.animationState=Ky(l))}updateAnimationControlsSubscription(){const{animate:l}=this.node.getProps();ap(l)&&(this.unmountControls=l.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:l}=this.node.getProps(),{animate:o}=this.node.prevProps||{};l!==o&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Nw=0;class Sw extends Vn{constructor(){super(...arguments),this.id=Nw++}update(){if(!this.node.presenceContext)return;const{isPresent:l,onExitComplete:o}=this.node.presenceContext,{isPresent:u}=this.node.prevPresenceContext||{};if(!this.node.animationState||l===u)return;const d=this.node.animationState.setActive(\"exit\",!l);o&&!l&&d.then(()=>{o(this.id)})}mount(){const{register:l,onExitComplete:o}=this.node.presenceContext||{};o&&o(this.id),l&&(this.unmount=l(this.id))}unmount(){}}const Cw={animation:{Feature:jw},exit:{Feature:Sw}};function rl(i){return{point:{x:i.pageX,y:i.pageY}}}const Ew=i=>l=>np(l)&&i(l,rl(l));function Wi(i,l,o,u){return Tr(i,l,Ew(o),u)}const jp=({current:i})=>i?i.ownerDocument.defaultView:null,g0=new Set([\"auto\",\"scroll\"]);class Np{constructor(l,o,{transformPagePoint:u,contextWindow:d=window,dragSnapToOrigin:h=!1,distanceThreshold:g=3,element:N}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=A=>{this.handleScroll(A.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=du(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,C=Zy(A.offset,{x:0,y:0})>=this.distanceThreshold;if(!T&&!C)return;const{point:M}=A,{timestamp:y}=Fh;this.history.push({...M,timestamp:y});const{onStart:L,onMove:z}=this.handlers;T||(L&&L(this.lastMoveEvent,A),this.startEvent=this.lastMoveEvent),z&&z(this.lastMoveEvent,A)},this.handlePointerMove=(A,T)=>{this.lastMoveEvent=A,this.lastMoveEventInfo=uu(T,this.transformPagePoint),Va.update(this.updatePoint,!0)},this.handlePointerUp=(A,T)=>{this.end();const{onEnd:C,onSessionEnd:M,resumeAnimation:y}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const L=du(A.type===\"pointercancel\"?this.lastMoveEventInfo:uu(T,this.transformPagePoint),this.history);this.startEvent&&C&&C(A,L),M&&M(A,L)},!np(l))return;this.dragSnapToOrigin=h,this.handlers=o,this.transformPagePoint=u,this.distanceThreshold=g,this.contextWindow=d||window;const E=rl(l),S=uu(E,this.transformPagePoint),{point:p}=S,{timestamp:f}=Fh;this.history=[{...p,timestamp:f}];const{onSessionStart:w}=o;w&&w(l,du(S,this.history)),this.removeListeners=sp(Wi(this.contextWindow,\"pointermove\",this.handlePointerMove),Wi(this.contextWindow,\"pointerup\",this.handlePointerUp),Wi(this.contextWindow,\"pointercancel\",this.handlePointerUp)),N&&this.startScrollTracking(N)}startScrollTracking(l){let o=l.parentElement;for(;o;){const u=getComputedStyle(o);(g0.has(u.overflowX)||g0.has(u.overflowY))&&this.scrollPositions.set(o,{x:o.scrollLeft,y:o.scrollTop}),o=o.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener(\"scroll\",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener(\"scroll\",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener(\"scroll\",this.onElementScroll,{capture:!0}),window.removeEventListener(\"scroll\",this.onWindowScroll)}}handleScroll(l){const o=this.scrollPositions.get(l);if(!o)return;const u=l===window,d=u?{x:window.scrollX,y:window.scrollY}:{x:l.scrollLeft,y:l.scrollTop},h={x:d.x-o.x,y:d.y-o.y};h.x===0&&h.y===0||(u?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=h.x,this.lastMoveEventInfo.point.y+=h.y):this.history.length>0&&(this.history[0].x-=h.x,this.history[0].y-=h.y),this.scrollPositions.set(l,d),Va.update(this.updatePoint,!0))}updateHandlers(l){this.handlers=l}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Jy(this.updatePoint)}}function uu(i,l){return l?{point:l(i.point)}:i}function x0(i,l){return{x:i.x-l.x,y:i.y-l.y}}function du({point:i},l){return{point:i,delta:x0(i,Sp(l)),offset:x0(i,Aw(l)),velocity:kw(l,.1)}}function Aw(i){return i[0]}function Sp(i){return i[i.length-1]}function kw(i,l){if(i.length<2)return{x:0,y:0};let o=i.length-1,u=null;const d=Sp(i);for(;o>=0&&(u=i[o],!(d.timestamp-u.timestamp>Py(l)));)o--;if(!u)return{x:0,y:0};const h=Wy(d.timestamp-u.timestamp);if(h===0)return{x:0,y:0};const g={x:(d.x-u.x)/h,y:(d.y-u.y)/h};return g.x===1/0&&(g.x=0),g.y===1/0&&(g.y=0),g}function Tw(i,{min:l,max:o},u){return l!==void 0&&i<l?i=u?Dr(l,i,u.min):Math.max(i,l):o!==void 0&&i>o&&(i=u?Dr(o,i,u.max):Math.min(i,o)),i}function b0(i,l,o){return{min:l!==void 0?i.min+l:void 0,max:o!==void 0?i.max+o-(i.max-i.min):void 0}}function Dw(i,{top:l,left:o,bottom:u,right:d}){return{x:b0(i.x,o,d),y:b0(i.y,l,u)}}function y0(i,l){let o=l.min-i.min,u=l.max-i.max;return l.max-l.min<i.max-i.min&&([o,u]=[u,o]),{min:o,max:u}}function Mw(i,l){return{x:y0(i.x,l.x),y:y0(i.y,l.y)}}function _w(i,l){let o=.5;const u=ku(i),d=ku(l);return d>u?o=Yh(l.min,l.max-u,i.min):u>d&&(o=Yh(i.min,i.max-d,l.min)),ev(0,1,o)}function Rw(i,l){const o={};return l.min!==void 0&&(o.min=l.min-i.min),l.max!==void 0&&(o.max=l.max-i.min),o}const Mu=.35;function Ow(i=Mu){return i===!1?i=0:i===!0&&(i=Mu),{x:v0(i,\"left\",\"right\"),y:v0(i,\"top\",\"bottom\")}}function v0(i,l,o){return{min:w0(i,l),max:w0(i,o)}}function w0(i,l){return typeof i==\"number\"?i:i[l]||0}const zw=new WeakMap;class Lw{constructor(l){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=tv(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=l}start(l,{snapToCursor:o=!1,distanceThreshold:u}={}){const{presenceContext:d}=this.visualElement;if(d&&d.isPresent===!1)return;const h=f=>{o?(this.stopAnimation(),this.snapToCursor(rl(f).point)):this.pauseAnimation()},g=(f,w)=>{this.stopAnimation();const{drag:A,dragPropagation:T,onDragStart:C}=this.getProps();if(A&&!T&&(this.openDragLock&&this.openDragLock(),this.openDragLock=lv(A),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=w,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ba(y=>{let L=this.getAxisMotionValue(y).get()||0;if(rv.test(L)){const{projection:z}=this.visualElement;if(z&&z.layout){const j=z.layout.layoutBox[y];j&&(L=ku(j)*(parseFloat(L)/100))}}this.originPoint[y]=L}),C&&Va.postRender(()=>C(f,w)),$h(this.visualElement,\"transform\");const{animationState:M}=this.visualElement;M&&M.setActive(\"whileDrag\",!0)},N=(f,w)=>{this.latestPointerEvent=f,this.latestPanInfo=w;const{dragPropagation:A,dragDirectionLock:T,onDirectionLock:C,onDrag:M}=this.getProps();if(!A&&!this.openDragLock)return;const{offset:y}=w;if(T&&this.currentDirection===null){this.currentDirection=Uw(y),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis(\"x\",w.point,y),this.updateAxis(\"y\",w.point,y),this.visualElement.render(),M&&M(f,w)},E=(f,w)=>{this.latestPointerEvent=f,this.latestPanInfo=w,this.stop(f,w),this.latestPointerEvent=null,this.latestPanInfo=null},S=()=>Ba(f=>this.getAnimationState(f)===\"paused\"&&this.getAxisMotionValue(f).animation?.play()),{dragSnapToOrigin:p}=this.getProps();this.panSession=new Np(l,{onSessionStart:h,onStart:g,onMove:N,onSessionEnd:E,resumeAnimation:S},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:u,contextWindow:jp(this.visualElement),element:this.visualElement.current})}stop(l,o){const u=l||this.latestPointerEvent,d=o||this.latestPanInfo,h=this.isDragging;if(this.cancel(),!h||!d||!u)return;const{velocity:g}=d;this.startAnimation(g);const{onDragEnd:N}=this.getProps();N&&Va.postRender(()=>N(u,d))}cancel(){this.isDragging=!1;const{projection:l,animationState:o}=this.visualElement;l&&(l.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:u}=this.getProps();!u&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),o&&o.setActive(\"whileDrag\",!1)}updateAxis(l,o,u){const{drag:d}=this.getProps();if(!u||!Nr(l,d,this.currentDirection))return;const h=this.getAxisMotionValue(l);let g=this.originPoint[l]+u[l];this.constraints&&this.constraints[l]&&(g=Tw(g,this.constraints[l],this.elastic[l])),h.set(g)}resolveConstraints(){const{dragConstraints:l,dragElastic:o}=this.getProps(),u=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,d=this.constraints;l&&Ji(l)?this.constraints||(this.constraints=this.resolveRefConstraints()):l&&u?this.constraints=Dw(u.layoutBox,l):this.constraints=!1,this.elastic=Ow(o),d!==this.constraints&&u&&this.constraints&&!this.hasMutatedConstraints&&Ba(h=>{this.constraints!==!1&&this.getAxisMotionValue(h)&&(this.constraints[h]=Rw(u.layoutBox[h],this.constraints[h]))})}resolveRefConstraints(){const{dragConstraints:l,onMeasureDragConstraints:o}=this.getProps();if(!l||!Ji(l))return!1;const u=l.current,{projection:d}=this.visualElement;if(!d||!d.layout)return!1;const h=av(u,d.root,this.visualElement.getTransformPagePoint());let g=Mw(d.layout.layoutBox,h);if(o){const N=o(nv(g));this.hasMutatedConstraints=!!N,N&&(g=sv(N))}return g}startAnimation(l){const{drag:o,dragMomentum:u,dragElastic:d,dragTransition:h,dragSnapToOrigin:g,onDragTransitionEnd:N}=this.getProps(),E=this.constraints||{},S=Ba(p=>{if(!Nr(p,o,this.currentDirection))return;let f=E&&E[p]||{};g&&(f={min:0,max:0});const w=d?200:1e6,A=d?40:1e7,T={type:\"inertia\",velocity:u?l[p]:0,bounceStiffness:w,bounceDamping:A,timeConstant:750,restDelta:1,restSpeed:10,...h,...f};return this.startAxisValueAnimation(p,T)});return Promise.all(S).then(N)}startAxisValueAnimation(l,o){const u=this.getAxisMotionValue(l);return $h(this.visualElement,l),u.start(iv(l,u,0,o,this.visualElement,!1))}stopAnimation(){Ba(l=>this.getAxisMotionValue(l).stop())}pauseAnimation(){Ba(l=>this.getAxisMotionValue(l).animation?.pause())}getAnimationState(l){return this.getAxisMotionValue(l).animation?.state}getAxisMotionValue(l){const o=`_drag${l.toUpperCase()}`,u=this.visualElement.getProps(),d=u[o];return d||this.visualElement.getValue(l,(u.initial?u.initial[l]:void 0)||0)}snapToCursor(l){Ba(o=>{const{drag:u}=this.getProps();if(!Nr(o,u,this.currentDirection))return;const{projection:d}=this.visualElement,h=this.getAxisMotionValue(o);if(d&&d.layout){const{min:g,max:N}=d.layout.layoutBox[o],E=h.get()||0;h.set(l[o]-Dr(g,N,.5)+E)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:l,dragConstraints:o}=this.getProps(),{projection:u}=this.visualElement;if(!Ji(o)||!u||!this.constraints)return;this.stopAnimation();const d={x:0,y:0};Ba(g=>{const N=this.getAxisMotionValue(g);if(N&&this.constraints!==!1){const E=N.get();d[g]=_w({min:E,max:E},this.constraints[g])}});const{transformTemplate:h}=this.visualElement.getProps();this.visualElement.current.style.transform=h?h({},\"\"):\"none\",u.root&&u.root.updateScroll(),u.updateLayout(),this.resolveConstraints(),Ba(g=>{if(!Nr(g,l,null))return;const N=this.getAxisMotionValue(g),{min:E,max:S}=this.constraints[g];N.set(Dr(E,S,d[g]))})}addListeners(){if(!this.visualElement.current)return;zw.set(this.visualElement,this);const l=this.visualElement.current,o=Wi(l,\"pointerdown\",E=>{const{drag:S,dragListener:p=!0}=this.getProps();S&&p&&!ov(E.target)&&this.start(E)}),u=()=>{const{dragConstraints:E}=this.getProps();Ji(E)&&E.current&&(this.constraints=this.resolveRefConstraints())},{projection:d}=this.visualElement,h=d.addEventListener(\"measure\",u);d&&!d.layout&&(d.root&&d.root.updateScroll(),d.updateLayout()),Va.read(u);const g=Tr(window,\"resize\",()=>this.scalePositionWithinConstraints()),N=d.addEventListener(\"didUpdate\",(({delta:E,hasLayoutChanged:S})=>{this.isDragging&&S&&(Ba(p=>{const f=this.getAxisMotionValue(p);f&&(this.originPoint[p]+=E[p].translate,f.set(f.get()+E[p].translate))}),this.visualElement.render())}));return()=>{g(),o(),h(),N&&N()}}getProps(){const l=this.visualElement.getProps(),{drag:o=!1,dragDirectionLock:u=!1,dragPropagation:d=!1,dragConstraints:h=!1,dragElastic:g=Mu,dragMomentum:N=!0}=l;return{...l,drag:o,dragDirectionLock:u,dragPropagation:d,dragConstraints:h,dragElastic:g,dragMomentum:N}}}function Nr(i,l,o){return(l===!0||l===i)&&(o===null||o===i)}function Uw(i,l=10){let o=null;return Math.abs(i.y)>l?o=\"y\":Math.abs(i.x)>l&&(o=\"x\"),o}class Iw extends Vn{constructor(l){super(l),this.removeGroupControls=Sr,this.removeListeners=Sr,this.controls=new Lw(l)}mount(){const{dragControls:l}=this.node.getProps();l&&(this.removeGroupControls=l.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Sr}update(){const{dragControls:l}=this.node.getProps(),{dragControls:o}=this.node.prevProps||{};l!==o&&(this.removeGroupControls(),l&&(this.removeGroupControls=l.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const j0=i=>(l,o)=>{i&&Va.postRender(()=>i(l,o))};class Bw extends Vn{constructor(){super(...arguments),this.removePointerDownListener=Sr}onPointerDown(l){this.session=new Np(l,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:jp(this.node)})}createPanHandlers(){const{onPanSessionStart:l,onPanStart:o,onPan:u,onPanEnd:d}=this.node.getProps();return{onSessionStart:j0(l),onStart:j0(o),onMove:u,onEnd:(h,g)=>{delete this.session,d&&Va.postRender(()=>d(h,g))}}}mount(){this.removePointerDownListener=Wi(this.node.current,\"pointerdown\",l=>this.onPointerDown(l))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let fu=!1;class qw extends x.Component{componentDidMount(){const{visualElement:l,layoutGroup:o,switchLayoutGroup:u,layoutId:d}=this.props,{projection:h}=l;h&&(o.group&&o.group.add(h),u&&u.register&&d&&u.register(h),fu&&h.root.didUpdate(),h.addEventListener(\"animationComplete\",()=>{this.safeToRemove()}),h.setOptions({...h.options,onExitComplete:()=>this.safeToRemove()})),cv.hasEverUpdated=!0}getSnapshotBeforeUpdate(l){const{layoutDependency:o,visualElement:u,drag:d,isPresent:h}=this.props,{projection:g}=u;return g&&(g.isPresent=h,fu=!0,d||l.layoutDependency!==o||o===void 0||l.isPresent!==h?g.willUpdate():this.safeToRemove(),l.isPresent!==h&&(h?g.promote():g.relegate()||Va.postRender(()=>{const N=g.getStack();(!N||!N.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:l}=this.props.visualElement;l&&(l.root.didUpdate(),uv.postRender(()=>{!l.currentAnimation&&l.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:l,layoutGroup:o,switchLayoutGroup:u}=this.props,{projection:d}=l;fu=!0,d&&(d.scheduleCheckAfterUnmount(),o&&o.group&&o.group.remove(d),u&&u.deregister&&u.deregister(d))}safeToRemove(){const{safeToRemove:l}=this.props;l&&l()}render(){return null}}function Cp(i){const[l,o]=mp(),u=x.useContext(Vu);return n.jsx(qw,{...i,layoutGroup:u,switchLayoutGroup:x.useContext(vp),isPresent:l,safeToRemove:o})}const Hw={pan:{Feature:Bw},drag:{Feature:Iw,ProjectionNode:ip,MeasureLayout:Cp}};function N0(i,l,o){const{props:u}=i;i.animationState&&u.whileHover&&i.animationState.setActive(\"whileHover\",o===\"Start\");const d=\"onHover\"+o,h=u[d];h&&Va.postRender(()=>h(l,rl(l)))}class Gw extends Vn{mount(){const{current:l}=this.node;l&&(this.unmount=dv(l,(o,u)=>(N0(this.node,u,\"Start\"),d=>N0(this.node,d,\"End\"))))}unmount(){}}class Vw extends Vn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let l=!1;try{l=this.node.current.matches(\":focus-visible\")}catch{l=!0}!l||!this.node.animationState||(this.node.animationState.setActive(\"whileFocus\",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive(\"whileFocus\",!1),this.isActive=!1)}mount(){this.unmount=sp(Tr(this.node.current,\"focus\",()=>this.onFocus()),Tr(this.node.current,\"blur\",()=>this.onBlur()))}unmount(){}}function S0(i,l,o){const{props:u}=i;if(i.current instanceof HTMLButtonElement&&i.current.disabled)return;i.animationState&&u.whileTap&&i.animationState.setActive(\"whileTap\",o===\"Start\");const d=\"onTap\"+(o===\"End\"?\"\":o),h=u[d];h&&Va.postRender(()=>h(l,rl(l)))}class Fw extends Vn{mount(){const{current:l}=this.node;l&&(this.unmount=fv(l,(o,u)=>(S0(this.node,u,\"Start\"),(d,{success:h})=>S0(this.node,d,h?\"End\":\"Cancel\")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const _u=new WeakMap,mu=new WeakMap,Yw=i=>{const l=_u.get(i.target);l&&l(i)},$w=i=>{i.forEach(Yw)};function Xw({root:i,...l}){const o=i||document;mu.has(o)||mu.set(o,{});const u=mu.get(o),d=JSON.stringify(l);return u[d]||(u[d]=new IntersectionObserver($w,{root:i,...l})),u[d]}function Qw(i,l,o){const u=Xw(l);return _u.set(i,o),u.observe(i),()=>{_u.delete(i),u.unobserve(i)}}const Kw={some:0,all:1};class Zw extends Vn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:l={}}=this.node.getProps(),{root:o,margin:u,amount:d=\"some\",once:h}=l,g={root:o?o.current:void 0,rootMargin:u,threshold:typeof d==\"number\"?d:Kw[d]},N=E=>{const{isIntersecting:S}=E;if(this.isInView===S||(this.isInView=S,h&&!S&&this.hasEnteredView))return;S&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive(\"whileInView\",S);const{onViewportEnter:p,onViewportLeave:f}=this.node.getProps(),w=S?p:f;w&&w(E)};return Qw(this.node.current,g,N)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>\"u\")return;const{props:l,prevProps:o}=this.node;[\"amount\",\"margin\",\"root\"].some(Jw(l,o))&&this.startObserver()}unmount(){}}function Jw({viewport:i={}},{viewport:l={}}={}){return o=>i[o]!==l[o]}const Pw={inView:{Feature:Zw},tap:{Feature:Fw},focus:{Feature:Vw},hover:{Feature:Gw}},Ww={layout:{ProjectionNode:ip,MeasureLayout:Cp}},ej={...Cw,...Pw,...Hw,...Ww},Le=vw(ej,ww),tj=he.memo(()=>n.jsx(\"div\",{className:\"absolute inset-0 opacity-[0.03] pointer-events-none overflow-hidden\",children:n.jsxs(\"svg\",{width:\"100%\",height:\"100%\",xmlns:\"http://www.w3.org/2000/svg\",children:[n.jsx(\"defs\",{children:n.jsxs(\"pattern\",{id:\"grid\",width:\"40\",height:\"40\",patternUnits:\"userSpaceOnUse\",children:[n.jsx(\"path\",{d:\"M 40 0 L 0 0 0 40\",fill:\"none\",stroke:\"white\",strokeWidth:\"1\"}),n.jsx(\"circle\",{cx:\"0\",cy:\"0\",r:\"1\",fill:\"white\"})]})}),n.jsx(\"rect\",{width:\"100%\",height:\"100%\",fill:\"url(#grid)\"})]})})),Qu=he.memo(({variant:i,className:l=\"\",animate:o=!1})=>{const u=i===\"ghost\"?\"mesh-ghost-blue\":i?`mesh-${i}`:\"\",d={animate1:{x:[0,40,-20,0],y:[0,-30,20,0],scale:[1,1.2,.8,1],transition:{duration:30,repeat:1/0,ease:\"linear\"}},animate2:{x:[0,-30,50,0],y:[0,40,-30,0],scale:[1,.8,1.2,1],transition:{duration:25,repeat:1/0,ease:\"linear\"}},animate3:{x:[0,20,-40,0],y:[0,-40,30,0],scale:[1,1.1,.9,1],transition:{duration:35,repeat:1/0,ease:\"linear\"}}};return n.jsxs(\"div\",{className:`absolute inset-0 pointer-events-none overflow-hidden ${u} ${l}`,children:[n.jsx(tj,{}),n.jsx(\"div\",{className:\"mesh-readability-lock\"}),n.jsx(\"div\",{className:\"mesh-blob mesh-blob-base\"}),n.jsx(Le.div,{variants:d,animate:o?\"animate1\":void 0,className:\"mesh-blob mesh-blob-1\"}),n.jsx(Le.div,{variants:d,animate:o?\"animate2\":void 0,className:\"mesh-blob mesh-blob-2\"}),n.jsx(Le.div,{variants:d,animate:o?\"animate3\":void 0,className:\"mesh-blob mesh-blob-3\"})]})}),aj=({recurring:i,currency:l,totalMonthlyIncome:o,onDelete:u})=>{const d=x.useMemo(()=>i.filter(C=>C.type===\"expense\").map(C=>{let M=\"Lifestyle\";const y=C.description?.toLowerCase()||\"\",L=C.category?.toLowerCase()||\"\";return C.investmentId?M=\"Asset\":(y.includes(\"insurance\")||y.includes(\"cloud\")||y.includes(\"drive\")||y.includes(\"icloud\")||y.includes(\"adobe\")||L.includes(\"insurance\")||L.includes(\"emi\"))&&(M=\"Vital\"),y.includes(\"trial\")||y.includes(\"premium\")&&C.id.length%3,{...C,strategyCategory:M}}),[i]),h=x.useMemo(()=>{const C=[\"spotify\",\"apple music\",\"youtube music\",\"amazon music\",\"tidal\"],M=[\"netflix\",\"prime video\",\"hulu\",\"disney\",\"hbo\",\"hotstar\"],y=d.filter(z=>C.some(j=>z.description?.toLowerCase().includes(j))),L=d.filter(z=>M.some(j=>z.description?.toLowerCase().includes(j)));return d.map(z=>{let j=z.strategyCategory;const G=z.description?.toLowerCase()||\"\";if(y.length>1&&y.includes(z)){const ee=y.reduce((Z,_)=>Z.amount>_.amount?Z:_);z.id!==ee.id&&(j=\"Ghost\")}return L.length>2&&L.includes(z)&&[...L].sort((Z,_)=>_.amount-Z.amount).indexOf(z)>=2&&(j=\"Ghost\"),G.includes(\"trial\")&&(j=\"Ghost\"),{...z,strategyCategory:j}})},[d]),g=h.reduce((C,M)=>{let y=M.amount;return M.frequency===\"yearly\"&&(y=M.amount/12),M.frequency===\"weekly\"&&(y=M.amount*4),M.frequency===\"custom\"&&M.customIntervalDays&&(y=M.amount*(30/M.customIntervalDays)),C+y},0),N=o>0?o/30:1,E=g/N,p=h.filter(C=>C.strategyCategory===\"Ghost\").reduce((C,M)=>{let y=M.amount;return M.frequency===\"yearly\"&&(y=M.amount/12),M.frequency===\"weekly\"&&(y=M.amount*4),C+y},0),f=.01,A=p*(Math.pow(1+f,60)-1)/f,T=(C,M)=>{let y=C;return M===\"yearly\"&&(y=C/12),M===\"weekly\"&&(y=C*4),M===\"custom\"&&(y=C*(30/28)),(y/N).toFixed(1)};return n.jsxs(\"div\",{className:\"space-y-6 animate-in slide-in-from-right duration-500\",children:[n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[n.jsxs(Ot,{className:\"p-6 bg-slate-900/60 border-white/10 relative overflow-hidden\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 p-4 opacity-10\",children:n.jsx(pb,{className:\"w-24 h-24\"})}),n.jsx(\"h3\",{className:\"text-sm font-bold uppercase tracking-widest text-slate-400 mb-4\",children:\"Total Freedom Tax\"}),n.jsxs(\"div\",{className:\"flex items-end gap-2 mb-2\",children:[n.jsx(\"span\",{className:\"text-4xl font-black text-rose-400\",children:E.toFixed(1)}),n.jsx(\"span\",{className:\"text-lg font-bold text-slate-500 mb-1\",children:\"Days/Month\"})]}),n.jsx(\"p\",{className:\"text-xs text-slate-400\",children:'The \"Freedom Tax\" you pay with your life time.'})]}),n.jsxs(Ot,{className:\"p-6 bg-indigo-900/20 border-indigo-500/20 relative overflow-hidden\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 p-4 opacity-10\",children:n.jsx(qn,{className:\"w-24 h-24 text-indigo-400\"})}),n.jsx(\"h3\",{className:\"text-sm font-bold uppercase tracking-widest text-indigo-400 mb-4\",children:\"Growth Pivot Potential\"}),n.jsxs(\"div\",{className:\"flex items-end gap-2 mb-2\",children:[n.jsx(\"span\",{className:\"text-4xl font-black text-indigo-300\",children:Ne(A,l)}),n.jsx(\"span\",{className:\"text-lg font-bold text-indigo-500/60 mb-1\",children:\"in 5 Years\"})]}),n.jsx(\"p\",{className:\"text-xs text-indigo-400/80\",children:'If you cancel \"Ghost\" items and invest the savings at 12%.'})]})]}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"h3\",{className:\"text-lg font-black text-white uppercase tracking-tight flex items-center gap-2\",children:[n.jsx(gb,{className:\"w-5 h-5 text-rose-400\"}),\"Strategist Analysis\"]}),n.jsx(\"div\",{className:\"grid gap-3\",children:h.map(C=>{const M=T(C.amount,C.frequency),y=C.strategyCategory===\"Ghost\",L=C.strategyCategory===\"Vital\",z=C.strategyCategory===\"Asset\";return n.jsxs(Ot,{className:`p-4 border flex items-center justify-between group transition-all overflow-hidden relative ${y?\"mesh-purple border-purple-500/20 hover:border-purple-500/40\":L||z?\"mesh-teal border-teal-500/20\":\"mesh-purple border-purple-500/20\"}`,children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:`w-10 h-10 rounded-xl flex items-center justify-center text-lg ${y?\"bg-rose-500/10 text-rose-400\":L?\"bg-emerald-500/10 text-emerald-400\":z?\"bg-teal-500/10 text-teal-400\":\"bg-slate-800 text-slate-400\"}`,children:y?n.jsx(el,{className:\"w-5 h-5\"}):L?n.jsx(sl,{className:\"w-5 h-5\"}):z?n.jsx(qn,{className:\"w-5 h-5\"}):n.jsx(ju,{className:\"w-5 h-5\"})}),n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"font-bold text-slate-200\",children:C.description||C.source}),n.jsxs(\"div\",{className:\"flex items-center gap-2 mt-1\",children:[n.jsx(\"span\",{className:`text-[10px] font-black uppercase px-1.5 py-0.5 rounded ${y?\"bg-rose-500 text-black\":L?\"bg-emerald-500/20 text-emerald-400\":z?\"bg-teal-500/20 text-teal-400\":\"bg-slate-700 text-slate-400\"}`,children:C.strategyCategory}),n.jsxs(\"span\",{className:\"text-[10px] text-slate-500 font-medium\",children:[\"Freedom Tax: \",M,\" days\"]})]})]})]}),n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsxs(\"div\",{className:\"text-right\",children:[n.jsx(\"p\",{className:\"font-bold text-slate-200\",children:Ne(C.amount,l)}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 uppercase\",children:C.frequency})]}),y&&n.jsx(Re,{size:\"sm\",variant:\"destructive\",className:\"opacity-0 group-hover:opacity-100 transition-opacity\",onClick:()=>u(C.id,C.description||\"Subscription\"),children:\"Kill\"})]})]},C.id)})})]})]})};function Ru({delayDuration:i=0,...l}){return n.jsx(xb,{\"data-slot\":\"tooltip-provider\",delayDuration:i,...l})}function hu({...i}){return n.jsx(Ru,{children:n.jsx(bb,{\"data-slot\":\"tooltip\",...i})})}function pu({...i}){return n.jsx(yb,{\"data-slot\":\"tooltip-trigger\",...i})}function gu({className:i,sideOffset:l=0,children:o,...u}){return n.jsx(vb,{children:n.jsxs(wb,{\"data-slot\":\"tooltip-content\",sideOffset:l,className:De(\"bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-[300] w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance\",i),...u,children:[o,n.jsx(jb,{className:\"bg-primary fill-primary z-[300] size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]\"})]})})}function C0({className:i,defaultValue:l,value:o,min:u=0,max:d=100,...h}){const g=x.useMemo(()=>Array.isArray(o)?o:Array.isArray(l)?l:[u,d],[o,l,u,d]);return n.jsxs(Nb,{\"data-slot\":\"slider\",defaultValue:l,value:o,min:u,max:d,className:De(\"relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col\",i),...h,children:[n.jsx(Sb,{\"data-slot\":\"slider-track\",className:De(\"bg-slate-700/50 relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-2 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5\"),children:n.jsx(Cb,{\"data-slot\":\"slider-range\",className:De(\"bg-blue-500 absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full\")})}),Array.from({length:g.length},(N,E)=>n.jsx(Eb,{\"data-slot\":\"slider-thumb\",className:\"border-blue-400 bg-white ring-blue-500/30 block size-7 shrink-0 rounded-full border-2 shadow-lg transition-[color,box-shadow] hover:ring-8 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50 cursor-grab active:cursor-grabbing\"},E))]})}const nj=Ou(\"inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap\",{variants:{variant:{default:\"bg-transparent\",outline:\"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\"},size:{default:\"h-9 px-2 min-w-9\",sm:\"h-8 px-1.5 min-w-8\",lg:\"h-10 px-2.5 min-w-10\"}},defaultVariants:{variant:\"default\",size:\"default\"}}),Ep=x.createContext({size:\"default\",variant:\"default\"});function sj({className:i,variant:l,size:o,children:u,...d}){return n.jsx(Ab,{\"data-slot\":\"toggle-group\",\"data-variant\":l,\"data-size\":o,className:De(\"group/toggle-group flex w-fit items-center rounded-md data-[variant=outline]:shadow-xs\",i),...d,children:n.jsx(Ep.Provider,{value:{variant:l,size:o},children:u})})}function xu({className:i,children:l,variant:o,size:u,...d}){const h=x.useContext(Ep);return n.jsx(kb,{\"data-slot\":\"toggle-group-item\",\"data-variant\":h.variant||o,\"data-size\":h.size||u,className:De(nj({variant:h.variant||o,size:h.size||u}),\"min-w-0 flex-1 shrink-0 rounded-none shadow-none first:rounded-l-md last:rounded-r-md focus:z-10 focus-visible:z-10 data-[variant=outline]:border-l-0 data-[variant=outline]:first:border-l\",i),...d,children:l})}function ij({className:i,...l}){return n.jsx(Tb,{\"data-slot\":\"tabs\",className:De(\"flex flex-col gap-2\",i),...l})}function lj({className:i,...l}){return n.jsx(Db,{\"data-slot\":\"tabs-list\",className:De(\"bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex\",i),...l})}function bu({className:i,...l}){return n.jsx(Mb,{\"data-slot\":\"tabs-trigger\",className:De(\"data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",i),...l})}function yu({className:i,...l}){return n.jsx(_b,{\"data-slot\":\"tabs-content\",className:De(\"flex-1 outline-none\",i),...l})}const rj=he.memo(({liabilities:i,debts:l,currency:o,totalMonthlyIncome:u})=>{const[d,h]=x.useState(null),[g,N]=x.useState(null),[E,S]=x.useState([]),[p,f]=x.useState(60),[w,A]=x.useState(!1);he.useEffect(()=>{if(i.length>0&&E.length===0){const F=i.filter(oe=>oe.interestRate>10||oe.tenure<120).map(oe=>oe.id);S(F.length>0?F:i.map(oe=>oe.id))}},[i,E]);const{totalOutstanding:T,totalPrincipal:C,totalEMI:M,averageInterestRate:y,payoffProgress:L,monthsToFreedom:z,totalEstimatedInterest:j,highestInterestLoan:G,strategies:ee}=x.useMemo(()=>{const F=l.filter(V=>V.type===\"borrowed\"&&V.status===\"pending\"),oe=[...i.map(V=>({...V,unifiedType:\"institutional\"})),...F.map(V=>({id:V.id,name:V.personName,outstanding:V.amount,principal:V.amount,interestRate:V.interestRate||0,emiAmount:0,tenure:0,unifiedType:\"personal\"}))],ge=oe.reduce((V,te)=>V+te.outstanding,0),O=oe.reduce((V,te)=>V+te.principal,0),k=oe.reduce((V,te)=>V+te.emiAmount,0),U=oe.reduce((V,te)=>V+te.interestRate*te.outstanding,0),Q=ge>0?U/ge:0,ae=oe.reduce((V,te)=>{if(te.unifiedType===\"personal\")return V;const me=te.outstanding,ie=te.interestRate/12/100,le=te.emiAmount;if(ie===0||le<=me*ie)return V;const je=Math.log(le/(le-me*ie))/Math.log(1+ie),Ae=le*je;return V+Math.max(0,Ae-me)},0),v=oe.reduce((V,te)=>{if(te.unifiedType===\"personal\")return V;const me=te.outstanding,ie=te.interestRate/12/100,le=te.emiAmount;if(ie===0)return Math.max(V,le>0?me/le:0);if(le<=me*ie)return 360;const je=Math.log(le/(le-me*ie))/Math.log(1+ie);return Math.max(V,je)},0),D=[...oe].sort((V,te)=>te.interestRate-V.interestRate)[0],W=[...oe].sort((V,te)=>V.outstanding-te.outstanding),q=[...oe].sort((V,te)=>te.interestRate-V.interestRate),Y=[{id:\"avalanche\",icon:Rb,title:\"Avalanche Method\",color:\"blue\",bgColor:\"bg-blue-50 dark:bg-blue-900/20\",borderColor:\"border-blue-200 dark:border-blue-800\",textColor:\"text-blue-600\",description:\"Pay off highest interest rate loans first\",savings:\"Saves the most money on interest\",order:q.slice(0,3),recommended:i.length>1&&i.some(V=>V.interestRate>12),reason:\"High interest detected (>12%)\"},{id:\"snowball\",icon:Ob,title:\"Snowball Method\",color:\"purple\",bgColor:\"bg-purple-50 dark:bg-purple-900/20\",borderColor:\"border-purple-200 dark:border-purple-800\",textColor:\"text-purple-600\",description:\"Pay off smallest balances first\",savings:\"Builds momentum with quick wins\",order:W.slice(0,3),recommended:i.filter(V=>V.outstanding<5e4).length>=3,reason:\"Significant volume of small-balance debts (>3)\"},{id:\"consolidation\",icon:Hh,title:\"Debt Consolidation\",color:\"green\",bgColor:\"bg-green-50 dark:bg-green-900/20\",borderColor:\"border-green-200 dark:border-green-800\",textColor:\"text-green-600\",description:\"Combine multiple debts into one loan\",savings:\"Simplifies payments, may lower rate\",recommended:i.length>4,reason:\"Complex debt structure detected (>4 active streams)\",consolidationRate:Math.max(6,Q-2)}];return{totalOutstanding:ge,totalPrincipal:O,totalEMI:k,averageInterestRate:Q,payoffProgress:O>0?Math.max(0,(O-ge)/O*100):0,monthsToFreedom:Math.ceil(v),totalEstimatedInterest:ae,highestInterestLoan:D,strategies:Y}},[i,l]),Z=g??y,{calculatedWhatIfEMI:_,emiDifference:B,currentSelectedEMI:J}=x.useMemo(()=>{const F=i.filter(O=>E.includes(O.id)),oe=F.reduce((O,k)=>O+k.emiAmount,0),ge=F.reduce((O,k)=>{const U=k.outstanding,Q=(g??y)/12/100,ae=p;if(U<=0||ae<=0)return O;if(Q===0)return O+U/ae;const v=U*Q*Math.pow(1+Q,ae)/(Math.pow(1+Q,ae)-1);return O+v},0);return{calculatedWhatIfEMI:ge,emiDifference:oe-ge,currentSelectedEMI:oe}},[i,E,g,y,p]),ne=x.useMemo(()=>[{icon:ju,title:\"Make Extra Payments\",description:\"Even small extra payments directly reduce principal.\",impact:\"High\",color:\"orange\",suggestion:`Pay ${Ne(Math.round(M*.1),o)} extra/mo`},{icon:ei,title:\"Refinance Loans\",description:\"Find lower rates to reduce your monthly interest.\",impact:\"Medium\",color:\"blue\",suggestion:G?`Target ${G.name} (${G.interestRate}%)`:\"Monitor efficient rates\"},{icon:qn,title:\"Automate Payments\",description:\"Never miss a due date and avoid all late fees.\",impact:\"Low\",color:\"green\",suggestion:\"Set up auto-pay for peace of mind\"}],[M,o,G]);return i.length===0?n.jsx(Ot,{className:\"p-8 text-center bg-gray-50 dark:bg-gray-900 shadow-soft border-dashed border-2 border-gray-200 dark:border-gray-800\",children:n.jsxs(\"div\",{className:\"max-w-md mx-auto\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4\",children:n.jsx(Hn,{className:\"w-8 h-8 text-green-600\"})}),n.jsx(\"h3\",{className:\"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2\",children:\"Debt-Free Zone!\"}),n.jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400 mb-6\",children:\"You don't have any liabilities recorded. This is a great place to be! Track your loans, credit cards, or other debts here once you have them.\"})]})}):n.jsx(\"div\",{className:\"space-y-4\",children:n.jsxs(\"div\",{className:\"mesh-gradient-card card-debt rounded-[32px] overflow-hidden group relative\",children:[n.jsx(Qu,{variant:\"debt\"}),n.jsxs(\"div\",{className:\"frosted-plate p-0 relative z-10\",children:[n.jsxs(\"div\",{className:\"p-5 flex items-center justify-between cursor-pointer hover:bg-white/5 transition-colors relative z-20\",onClick:()=>A(!w),children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-rose-500/10 rounded-2xl flex items-center justify-center border border-rose-500/20 shadow-[0_0_15px_rgba(244,63,94,0.1)]\",children:n.jsx(Ar,{className:\"w-6 h-6 text-rose-400\"})}),n.jsxs(\"div\",{children:[n.jsx(\"h3\",{className:\"text-white font-black text-xs uppercase tracking-[0.2em]\",children:\"Liability Node\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-400 font-bold uppercase tracking-widest mt-0.5\",children:\"Strategic Debt Stream\"})]})]}),n.jsxs(\"div\",{className:\"flex items-center gap-6\",children:[n.jsxs(\"div\",{className:\"hidden sm:block text-right\",children:[n.jsx(\"p\",{className:\"text-[9px] text-slate-500 uppercase font-black tracking-[0.2em] mb-1\",children:\"Total Obligations\"}),n.jsxs(\"div\",{className:\"relative\",children:[n.jsx(\"p\",{className:\"text-sm font-black text-rose-500 tabular-nums\",children:Ne(T,o)}),n.jsx(\"div\",{className:\"absolute inset-0 bg-rose-500/20 blur-lg -z-10 animate-pulse\"})]})]}),n.jsx(\"div\",{className:\"w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center text-slate-400 border border-white/10 hover:bg-white/10 hover:scale-105 active:scale-95 transition-all\",children:w?n.jsx(_r,{size:20}):n.jsx(nl,{size:20})})]})]}),n.jsx(Bn,{children:w&&n.jsx(Le.div,{initial:{height:0,opacity:0},animate:{height:\"auto\",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:\"easeInOut\"},className:\"overflow-hidden\",children:n.jsx(\"div\",{className:\"p-4 pt-0\",children:n.jsxs(ij,{defaultValue:\"overview\",className:\"w-full\",children:[n.jsx(\"div\",{className:\"flex items-center justify-center mb-6\",children:n.jsxs(lj,{className:\"grid w-full grid-cols-3 max-w-sm bg-slate-800/50 p-1 border border-white/5\",children:[n.jsx(bu,{value:\"overview\",className:\"text-xs data-[state=active]:bg-slate-700\",children:\"Overview\"}),n.jsx(bu,{value:\"strategies\",className:\"text-xs data-[state=active]:bg-slate-700\",children:\"Strategies\"}),n.jsx(bu,{value:\"impact\",className:\"text-xs data-[state=active]:bg-slate-700\",children:\"Impact\"})]})}),n.jsxs(yu,{value:\"overview\",className:\"space-y-4 mt-0\",children:[n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3\",children:[n.jsxs(\"div\",{className:\"bg-slate-800/40 border border-white/5 p-3 rounded-2xl\",children:[n.jsx(\"p\",{className:\"text-[10px] text-slate-500 uppercase tracking-wider\",children:\"Total Outstanding\"}),n.jsx(\"p\",{className:\"text-sm font-bold text-rose-400 mt-0.5 tabular-nums line-clamp-1\",children:u0(T,o)})]}),n.jsx(Ru,{children:n.jsxs(\"div\",{className:\"bg-slate-800/40 border border-white/5 p-3 rounded-2xl\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-1\",children:[n.jsx(\"p\",{className:\"text-[10px] text-slate-500 uppercase tracking-wider\",children:\"Monthly EMI\"}),n.jsxs(hu,{children:[n.jsx(pu,{children:n.jsx(K0,{className:\"w-3 h-3 text-slate-600\"})}),n.jsx(gu,{children:n.jsx(\"p\",{className:\"text-xs\",children:\"Equated Monthly Installment across all loans.\"})})]})]}),n.jsx(\"p\",{className:\"text-sm font-bold text-orange-400 mt-0.5 tabular-nums\",children:u0(M,o)})]})}),n.jsxs(\"div\",{className:\"bg-slate-800/40 border border-white/5 p-3 rounded-2xl\",children:[n.jsx(\"p\",{className:\"text-[10px] text-slate-500 uppercase tracking-wider\",children:\"Avg. Interest\"}),n.jsxs(\"p\",{className:\"text-sm font-bold text-amber-400 mt-0.5 tabular-nums\",children:[y.toFixed(1),\"%\"]})]}),n.jsxs(\"div\",{className:\"bg-slate-800/40 border border-white/5 p-3 rounded-2xl\",children:[n.jsx(\"p\",{className:\"text-[10px] text-slate-500 uppercase tracking-wider\",children:\"Debt Freedom\"}),n.jsx(\"p\",{className:\"text-sm font-bold text-blue-400 mt-0.5 tabular-nums\",children:V1(z)})]})]}),n.jsxs(\"div\",{className:\"bg-slate-800/30 border border-white/5 p-4 rounded-2xl\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-end mb-2\",children:[n.jsx(\"p\",{className:\"text-xs font-medium text-slate-300\",children:\"Overall Payoff Progress\"}),n.jsxs(\"span\",{className:\"text-sm font-bold text-emerald-400\",children:[L.toFixed(1),\"%\"]})]}),n.jsx(\"div\",{className:\"w-full h-1.5 bg-slate-800 rounded-full overflow-hidden\",children:n.jsx(Le.div,{initial:{width:0},animate:{width:`${Math.max(0,L)}%`},className:\"h-full bg-gradient-to-r from-emerald-500 to-teal-400\"})}),n.jsxs(\"div\",{className:\"flex justify-between mt-2\",children:[n.jsxs(\"p\",{className:\"text-[10px] text-slate-500\",children:[\"Paid: \",Ne(C-T,o)]}),n.jsxs(\"p\",{className:\"text-[10px] text-slate-500\",children:[\"Total: \",Ne(C,o)]})]})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[n.jsxs(Ot,{className:\"p-4 bg-slate-800/30 border-white/5 rounded-2xl shadow-none\",children:[n.jsxs(\"h4\",{className:\"text-xs font-bold text-slate-400 uppercase tracking-wider mb-4 flex items-center gap-2\",children:[n.jsx(zb,{size:14,className:\"text-indigo-400\"}),\"Repayment Breakdown\"]}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[10px] uppercase tracking-wider text-slate-500\",children:[n.jsx(\"span\",{children:\"Principal\"}),n.jsx(\"span\",{children:\"Interest\"})]}),n.jsx(\"div\",{className:\"w-full h-8 bg-slate-900 rounded-xl overflow-hidden flex p-1\",children:n.jsxs(Ru,{children:[n.jsxs(hu,{children:[n.jsx(pu,{asChild:!0,children:(()=>{const F={style:{\"--width\":`${T/(T+j)*100}%`}};return n.jsx(\"div\",{className:\"h-full bg-rose-500/80 rounded-l-lg w-[var(--width)]\",...F})})()}),n.jsxs(gu,{children:[\"Principal: \",Ne(T,o)]})]}),n.jsxs(hu,{children:[n.jsx(pu,{asChild:!0,children:(()=>{const F={style:{\"--width\":`${j/(T+j)*100}%`}};return n.jsx(\"div\",{className:\"h-full bg-orange-400/80 rounded-r-lg w-[var(--width)]\",...F})})()}),n.jsxs(gu,{children:[\"Interest: \",Ne(j,o)]})]})]})}),n.jsxs(\"div\",{className:\"flex justify-between text-xs text-slate-400\",children:[n.jsxs(\"span\",{className:\"flex items-center gap-1.5 font-medium\",children:[n.jsx(\"div\",{className:\"w-2 h-2 rounded-full bg-rose-500\"}),\" Principal\"]}),n.jsxs(\"span\",{className:\"flex items-center gap-1.5 font-medium\",children:[n.jsx(\"div\",{className:\"w-2 h-2 rounded-full bg-orange-400\"}),\" Interest\"]})]})]})]}),n.jsx(Ot,{className:\"p-4 bg-slate-800/30 border-white/5 rounded-2xl shadow-none\",children:n.jsxs(\"div\",{className:\"flex gap-3 h-full items-center\",children:[n.jsx(el,{className:\"w-10 h-10 text-amber-500/30 flex-shrink-0\"}),n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"text-sm font-bold text-slate-200\",children:\"Payment Strategy\"}),n.jsxs(\"p\",{className:\"text-xs text-slate-400 mt-1 leading-relaxed\",children:[\"Your \",Ne(M,o),\" monthly EMI represents \",(M/u*100).toFixed(1),\"% of your income. Aim to keep this under 40% for financial stability.\"]})]})]})})]})]}),n.jsxs(yu,{value:\"strategies\",className:\"space-y-4 mt-0\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[n.jsxs(\"h4\",{className:\"text-xs font-bold text-slate-400 uppercase tracking-wider flex items-center gap-2\",children:[n.jsx(Lb,{size:14,className:\"text-amber-400\"}),\"Compare Methods\"]}),n.jsxs(sj,{type:\"single\",value:d||\"\",onValueChange:F=>h(F||null),className:\"bg-slate-900/50 p-1 border border-white/5 rounded-lg\",children:[n.jsx(xu,{value:\"avalanche\",className:\"px-3 text-[10px] h-7 data-[state=active]:bg-slate-700\",children:\"Avalanche\"}),n.jsx(xu,{value:\"snowball\",className:\"px-3 text-[10px] h-7 data-[state=active]:bg-slate-700\",children:\"Snowball\"}),n.jsx(xu,{value:\"consolidation\",className:\"px-3 text-[10px] h-7 data-[state=active]:bg-slate-700\",children:\"Consolidation\"})]})]}),d?n.jsx(\"div\",{className:\"grid grid-cols-1 gap-4\",children:ee.filter(F=>F.id===d).map(F=>{const oe=F.icon,ge=F.id===\"avalanche\"?\"text-blue-400\":F.id===\"snowball\"?\"text-purple-400\":\"text-emerald-400\";return n.jsx(\"div\",{className:\"p-4 rounded-2xl bg-slate-800/40 border border-white/5\",children:n.jsxs(\"div\",{className:\"flex items-start gap-4\",children:[n.jsx(\"div\",{className:\"w-10 h-10 rounded-xl flex items-center justify-center bg-slate-900 border border-white/5\",children:n.jsx(oe,{className:`w-5 h-5 ${ge}`})}),n.jsxs(\"div\",{className:\"flex-1\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-2 mb-1\",children:[n.jsx(\"h5\",{className:\"font-bold text-slate-100\",children:F.title}),F.recommended&&n.jsxs(\"div\",{className:\"flex items-center gap-1.5\",children:[n.jsx(\"span\",{className:\"text-[10px] bg-emerald-500/20 text-emerald-400 px-2 py-0.5 rounded-full border border-emerald-500/20 font-bold uppercase\",children:\"Optimal\"}),n.jsxs(\"span\",{className:\"text-[9px] text-slate-500 font-medium italic\",children:[\"(\",F.reason,\")\"]})]})]}),n.jsx(\"p\",{className:\"text-xs text-slate-400 mb-4\",children:F.description}),F.order&&n.jsx(\"div\",{className:\"space-y-2\",children:F.order.map((O,k)=>n.jsxs(\"div\",{className:\"flex items-center gap-3 bg-slate-900/50 p-2.5 rounded-xl border border-white/5\",children:[n.jsx(\"div\",{className:\"w-6 h-6 rounded-full bg-slate-800 text-[10px] flex items-center justify-center font-bold text-slate-400 border border-white/5\",children:k+1}),n.jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[n.jsx(\"p\",{className:\"text-xs font-medium text-slate-200 truncate\",children:O.name}),n.jsxs(\"p\",{className:\"text-[10px] text-slate-500\",children:[O.interestRate,\"% Rate\"]})]}),n.jsx(\"p\",{className:\"text-xs font-bold text-slate-200\",children:Ne(O.outstanding,o)})]},O.id))})]})]})},F.id)})}):n.jsxs(\"div\",{className:\"py-12 text-center bg-slate-900/20 rounded-2xl border border-dashed border-white/5\",children:[n.jsx(Hh,{className:\"w-8 h-8 text-slate-700 mx-auto mb-2\"}),n.jsx(\"p\",{className:\"text-xs text-slate-500\",children:\"Pick a strategy to visualize the payoff order\"})]})]}),n.jsxs(yu,{value:\"impact\",className:\"space-y-4 mt-0\",children:[n.jsxs(\"div\",{className:\"p-4 rounded-2xl bg-slate-800/40 border border-white/5\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-2 mb-6\",children:[n.jsx(ju,{className:\"w-4 h-4 text-blue-400\"}),n.jsx(\"h4\",{className:\"text-xs font-bold text-slate-400 uppercase tracking-wider\",children:\"Refinance & Consolidation Impact\"})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(\"div\",{className:\"flex flex-col gap-1 px-1\",children:n.jsxs(\"div\",{className:\"flex justify-between items-center\",children:[n.jsx(\"span\",{className:\"text-xs text-slate-400\",children:\"Consolidation Interest Rate:\"}),n.jsxs(\"span\",{className:\"text-lg font-bold text-blue-400\",children:[Z.toFixed(1),\"%\"]})]})}),n.jsx(C0,{value:[Z],min:Math.max(0,y-5),max:Math.max(20,y+5),step:.1,onValueChange:F=>N(F[0]),className:\"py-4 cursor-pointer\"}),n.jsxs(\"div\",{className:\"flex flex-col gap-1 px-1 pt-2\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-center\",children:[n.jsx(\"span\",{className:\"text-xs text-slate-400\",children:\"New Loan Tenure:\"}),n.jsxs(\"span\",{className:\"text-lg font-bold text-blue-400\",children:[p,\" months\"]})]}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500\",children:p>=12?`${(p/12).toFixed(1)} years`:\"Short term\"})]}),n.jsx(C0,{value:[p],min:12,max:360,step:12,onValueChange:F=>f(F[0]),className:\"py-4 cursor-pointer\"})]}),n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(\"h5\",{className:\"text-[10px] font-bold text-slate-500 uppercase tracking-widest px-1\",children:\"Select Debts to Consolidate\"}),n.jsx(\"div\",{className:\"space-y-2 max-h-[180px] overflow-y-auto pr-2 custom-scrollbar\",children:i.map(F=>{const oe=E.includes(F.id),ge=F.tenure>=120;return n.jsxs(\"div\",{onClick:()=>{S(O=>O.includes(F.id)?O.filter(k=>k!==F.id):[...O,F.id])},className:`p-3 rounded-xl border transition-all cursor-pointer flex items-center gap-3 ${oe?\"bg-blue-500/10 border-blue-500/30\":\"bg-slate-900/40 border-white/5 opacity-60\"}`,children:[n.jsx(\"div\",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors ${oe?\"bg-blue-500 border-blue-400\":\"border-slate-600\"}`,children:oe&&n.jsx(\"div\",{className:\"w-2 h-2 bg-white rounded-sm\"})}),n.jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[n.jsxs(\"div\",{className:\"flex justify-between\",children:[n.jsx(\"p\",{className:\"text-xs font-bold text-slate-200 truncate\",children:F.name}),n.jsx(\"p\",{className:\"text-xs text-slate-400\",children:Ne(F.outstanding,o)})]}),n.jsxs(\"div\",{className:\"flex justify-between mt-0.5\",children:[n.jsxs(\"p\",{className:\"text-[10px] text-slate-500\",children:[F.interestRate,\"% • \",F.tenure,\" mo\"]}),ge&&n.jsx(\"span\",{className:\"text-[9px] text-orange-400/80 font-medium\",children:\"Long Term\"})]})]})]},F.id)})})]})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{className:\"bg-slate-900/50 p-4 rounded-2xl border border-white/5\",children:[n.jsx(\"p\",{className:\"text-[10px] text-slate-500 uppercase tracking-wider mb-1\",children:\"Current EMI (Selection)\"}),n.jsx(\"p\",{className:\"text-xl font-bold text-slate-300\",children:Ne(J,o)})]}),n.jsxs(\"div\",{className:\"bg-slate-900/50 p-4 rounded-2xl border border-white/5\",children:[n.jsx(\"p\",{className:\"text-[10px] text-slate-500 uppercase tracking-wider mb-1\",children:\"New Consolidated EMI\"}),n.jsx(\"p\",{className:\"text-xl font-bold text-blue-400\",children:Ne(_,o)})]})]}),n.jsxs(\"div\",{className:`p-4 rounded-2xl border flex items-center gap-4 ${B>0?\"bg-emerald-500/5 border-emerald-500/10\":\"bg-rose-500/5 border-rose-500/10\"}`,children:[n.jsx(\"div\",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${B>0?\"bg-emerald-500/20 text-emerald-400\":\"bg-rose-500/20 text-rose-400\"}`,children:B>0?n.jsx(Ar,{size:20}):n.jsx(el,{size:20})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-[10px] text-slate-500 uppercase tracking-wider mb-0.5\",children:B>0?\"Potential Monthly Savings\":\"Monthly Cost Increase\"}),n.jsxs(\"p\",{className:`text-xl font-bold ${B>=0?\"text-emerald-400\":\"text-rose-400\"}`,children:[B>=0?\"+\":\"\",Ne(B,o)]})]})]})]})]}),n.jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-3\",children:ne.map(F=>{const oe=F.icon;return n.jsxs(\"div\",{className:\"p-3 bg-slate-800/20 border border-white/5 rounded-2xl\",children:[n.jsx(\"div\",{className:\"w-8 h-8 rounded-lg bg-slate-900 border border-white/5 flex items-center justify-center mb-2\",children:n.jsx(oe,{className:\"w-4 h-4 text-slate-400\"})}),n.jsx(\"h5\",{className:\"text-[11px] font-bold text-slate-200\",children:F.title}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 mt-1 leading-tight\",children:F.suggestion})]},F.title)})})]})]})})})})]})]})})});function oj(){const{accounts:i,currency:l,recurringTransactions:o,liabilities:u,debts:d,createRecurringTransaction:h,updateRecurringTransaction:g,deleteRecurringTransaction:N,processRecurringTransactions:E,createLiability:S,updateLiability:p}=ai(),[f,w]=x.useState(\"list\"),A=o.filter(v=>v.type===\"income\").reduce((v,D)=>{let W=D.amount;return D.frequency===\"yearly\"&&(W=D.amount/12),D.frequency===\"weekly\"&&(W=D.amount*4),v+W},0),T=v=>({daily:\"Daily\",weekly:\"Weekly\",monthly:\"Monthly\",yearly:\"Yearly\"})[v]||v,C=({rec:v})=>{const D=i.find(Y=>Y.id===v.accountId),W=u.find(Y=>Y.id===v.liabilityId),q=W?Math.max(0,Math.min(100,(W.principal-W.outstanding)/W.principal*100)):0;return n.jsxs(Ot,{className:\"p-6 bg-slate-900/40 border-white/5 rounded-[28px] border hover:bg-slate-900/60 transition-all duration-300 group relative overflow-hidden\",children:[n.jsx(\"div\",{className:`absolute top-0 right-0 w-24 h-24 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20 ${v.type===\"income\"?\"bg-emerald-500\":\"bg-rose-500\"}`}),n.jsxs(\"div\",{className:\"flex items-start justify-between mb-8 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:`w-14 h-14 border border-white/5 rounded-2xl flex items-center justify-center shadow-inner group-hover:scale-105 transition-transform text-2xl ${v.type===\"income\"?\"bg-emerald-500/10 text-emerald-400\":\"bg-rose-500/10 text-rose-400\"}`,children:v.type===\"income\"?\"💰\":W?\"🏦\":\"💸\"}),n.jsxs(\"div\",{className:\"min-w-0\",children:[n.jsx(\"h3\",{className:\"text-base font-bold text-slate-100 truncate flex items-center gap-2\",children:v.description||v.source}),n.jsxs(\"p\",{className:\"text-[10px] uppercase font-black tracking-widest text-slate-600 mt-1\",children:[T(v.frequency),\" \",W&&\"• Loan\"]})]})]}),n.jsxs(\"div\",{className:\"flex bg-slate-900/80 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity\",children:[n.jsx(Re,{variant:\"ghost\",size:\"sm\",onClick:()=>ne(v),className:\"w-10 h-10 p-0 rounded-l-xl hover:bg-slate-800 text-slate-500 hover:text-indigo-400\",children:n.jsx(Ib,{className:\"w-4 h-4\"})}),n.jsx(\"div\",{className:\"w-px bg-white/10 my-2\"}),n.jsx(Re,{variant:\"ghost\",size:\"sm\",onClick:()=>ge(v),className:\"w-10 h-10 p-0 rounded-r-xl hover:bg-rose-500/10 hover:text-rose-400 text-slate-500 hover:text-rose-400\",children:n.jsx(tl,{className:\"w-4 h-4\"})})]})]}),n.jsxs(\"div\",{className:\"space-y-6 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-end\",children:[n.jsxs(\"div\",{className:\"flex flex-col\",children:[n.jsx(\"span\",{className:\"text-[10px] uppercase tracking-widest font-black text-slate-600 mb-1 font-mono\",children:W?\"Monthly EMI\":\"Commitment\"}),n.jsxs(\"span\",{className:`text-2xl font-black tabular-nums leading-none font-mono ${v.type===\"income\"?\"text-emerald-400\":\"text-slate-100\"}`,children:[v.type===\"income\"?\"+\":\"-\",Ne(v.amount,l)]})]}),n.jsxs(\"div\",{className:\"text-right flex flex-col items-end\",children:[n.jsx(\"span\",{className:\"text-[10px] uppercase tracking-widest font-black text-slate-600 mb-1\",children:\"Wallet\"}),n.jsxs(\"span\",{className:\"text-xs font-bold text-slate-300 flex items-center gap-1.5 bg-white/5 px-2 py-1 rounded-lg\",children:[D?.icon,\" \",D?.name]})]})]}),W&&n.jsxs(\"div\",{className:\"pt-4 space-y-3\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-end\",children:[n.jsx(\"p\",{className:\"text-[10px] uppercase font-black text-rose-500/60 tracking-wider\",children:\"Debt Clearance\"}),n.jsx(\"div\",{className:\"text-right\",children:n.jsxs(\"p\",{className:\"text-xs font-black text-slate-300 tabular-nums\",children:[q.toFixed(0),\"%\"]})})]}),n.jsx(\"div\",{className:\"w-full h-1.5 bg-white/5 rounded-full overflow-hidden\",children:n.jsx(\"div\",{className:\"h-full bg-gradient-to-r from-rose-500 to-orange-400 transition-all duration-1000\",style:{width:`${q}%`}})}),n.jsxs(\"div\",{className:\"flex justify-between\",children:[n.jsxs(\"div\",{className:\"flex flex-col\",children:[n.jsx(\"span\",{className:\"text-[9px] font-bold text-slate-600 uppercase\",children:\"Outstanding\"}),n.jsx(\"span\",{className:\"text-[11px] font-black text-rose-400/80\",children:Ne(W.outstanding,l)})]}),n.jsxs(\"div\",{className:\"flex flex-col text-right\",children:[n.jsx(\"span\",{className:\"text-[9px] font-bold text-slate-600 uppercase\",children:\"Remaining\"}),n.jsxs(\"span\",{className:\"text-[11px] font-black text-slate-400\",children:[W.tenure,\" Months\"]})]})]})]}),n.jsxs(\"div\",{className:\"pt-6 border-t border-white/5 flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex flex-col gap-1\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-2 text-slate-500\",children:[n.jsx(Nu,{className:\"w-3 h-3\"}),n.jsx(\"span\",{className:\"text-[9px] font-black uppercase tracking-wider\",children:\"Timeline\"})]}),n.jsxs(\"div\",{className:\"text-[10px] font-bold text-slate-300\",children:[new Date(v.startDate).toLocaleDateString(void 0,{month:\"short\",year:\"numeric\"}),v.endDate?` — ${new Date(v.endDate).toLocaleDateString(void 0,{month:\"short\",year:\"numeric\"})}`:\" — Ongoing\"]})]}),n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[v.category&&n.jsx(\"div\",{className:\"bg-slate-800/50 px-2.5 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest text-slate-500 border border-white/5\",children:v.category}),n.jsx(\"div\",{className:\"w-8 h-8 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-lg shadow-inner\",children:D?.icon||\"🏦\"})]})]})]})]})},[M,y]=x.useState(!1),[L,z]=x.useState(!1),[j,G]=x.useState(!1),[ee,Z]=x.useState(null),[_,B]=x.useState({type:\"expense\",description:\"\",source:\"\",amount:\"\",category:\"\",accountId:i.length>0?i[0].id:\"\",frequency:\"monthly\",startDate:new Date().toISOString().split(\"T\")[0],endDate:\"\",tags:[],principal:\"\",interestRate:\"\",tenure:\"\",liabilityId:\"\"});x.useEffect(()=>{const v=(_.type===\"expense\"?_.description:_.source).toLowerCase().trim();if(!v||ee)return;const D=[\"netflix\",\"spotify\",\"prime\",\"youtube\",\"apple\",\"hulu\",\"disney\",\"google\",\"icloud\",\"adobe\",\"canva\",\"figma\",\"chatgpt\",\"openai\",\"claude\",\"midjourney\",\"github\",\"cursor\"],W=[\"emi\",\"loan\",\"mortgage\",\"bajaj\",\"hdfc loan\",\"sbi loan\",\"icici loan\",\"finance\"];D.some(q=>v.includes(q))?(_.type!==\"expense\"||_.category!==\"Subscription\")&&(queueMicrotask(()=>{B(q=>({...q,type:\"expense\",category:\"Subscription\",description:q.source||q.description}))}),ce.info(\"Smart Detection: Categorized as Subscription\",{icon:\"🤖\"})):W.some(q=>v.includes(q))&&(_.type!==\"expense\"||_.category!==\"EMI\")&&(queueMicrotask(()=>{B(q=>({...q,type:\"expense\",category:\"EMI\",description:q.source||q.description}))}),ce.info(\"Smart Detection: Categorized as EMI\",{icon:\"🤖\"}))},[_.description,_.source,_.type,_.category,ee]);const J=async()=>{const v={type:_.type,amount:parseFloat(_.amount),accountId:_.accountId,frequency:_.frequency,startDate:_.startDate,endDate:_.endDate||void 0,tags:_.tags};_.type===\"expense\"?(v.description=_.description,v.category=_.category):v.source=_.source,ee?(await g(ee,v),_.liabilityId&&await p(_.liabilityId,{name:_.type===\"expense\"?_.description:_.source,principal:parseFloat(_.principal)||0,interestRate:parseFloat(_.interestRate)||0,emiAmount:parseFloat(_.amount)||0,tenure:parseInt(_.tenure)||0,accountId:_.accountId})):_.category===\"EMI\"||_.category===\"Loan\"?await S({name:_.type===\"expense\"?_.description:_.source,type:\"personal_loan\",principal:parseFloat(_.principal)||parseFloat(_.amount),outstanding:parseFloat(_.principal)||parseFloat(_.amount),interestRate:parseFloat(_.interestRate)||0,emiAmount:parseFloat(_.amount),startDate:_.startDate,tenure:parseInt(_.tenure)||12,accountId:_.accountId,createdAt:new Date().toISOString()}):await h(v),y(!1),oe()},ne=v=>{B({type:v.type,description:v.description||\"\",source:v.source||\"\",amount:v.amount.toString(),category:v.category||\"\",accountId:v.accountId,frequency:v.frequency,startDate:v.startDate.split(\"T\")[0],endDate:v.endDate?v.endDate.split(\"T\")[0]:\"\",tags:v.tags||[],principal:\"\",interestRate:\"\",tenure:\"\",liabilityId:v.liabilityId||\"\"});const D=u.find(W=>W.id===v.liabilityId);D&&B(W=>({...W,principal:D.principal.toString(),interestRate:D.interestRate.toString(),tenure:D.tenure.toString()})),Z(v.id),y(!0)},F=async()=>{z(!0),await E(),z(!1)},oe=()=>{B({type:\"expense\",description:\"\",source:\"\",amount:\"\",category:\"\",accountId:i.length>0?i[0].id:\"\",frequency:\"monthly\",startDate:new Date().toISOString().split(\"T\")[0],endDate:\"\",tags:[],principal:\"\",interestRate:\"\",tenure:\"\",liabilityId:\"\"}),Z(null)},ge=async v=>{v.liabilityId?window.confirm(`Deleting this flow will also remove the linked liability \"${v.description||\"Loan\"}\". Continue?`)&&(await deleteLiability(v.liabilityId),ce.success(\"Liability and flow removed\")):await N(v.id)},O=o.filter(v=>v.amount&&v.amount>0),U=(()=>{const v=O.filter(Y=>Y.category===\"EMI\"||(Y.description||\"\").toLowerCase().includes(\"loan\")||(Y.source||\"\").toLowerCase().includes(\"loan\")),D=O.filter(Y=>Y.category===\"Subscription\"||(Y.description||\"\").toLowerCase().includes(\"subscription\")||(Y.source||\"\").toLowerCase().includes(\"subscription\")||[\"netflix\",\"spotify\",\"prime\",\"youtube\",\"apple\",\"hulu\",\"disney\",\"google\"].some(V=>(Y.description||\"\").toLowerCase().includes(V)||(Y.source||\"\").toLowerCase().includes(V))),W=O.filter(Y=>Y.type===\"income\"),q=O.filter(Y=>!v.some(V=>V.id===Y.id)&&!D.some(V=>V.id===Y.id)&&!W.some(V=>V.id===Y.id));return{loans:v,subscriptions:D,incomes:W,others:q}})(),ae=(()=>{const v=ie=>{const le=ie.amount||0;return ie.frequency===\"monthly\"?le:ie.frequency===\"yearly\"?le/12:ie.frequency===\"weekly\"?le*4:le*30},D=U.loans.reduce((ie,le)=>ie+v(le),0),W=U.subscriptions.reduce((ie,le)=>ie+v(le),0),q=U.incomes.reduce((ie,le)=>ie+v(le),0),Y=U.others.reduce((ie,le)=>ie+v(le),0),V=D+W+Y,te=q-V,me=q>0?Math.max(0,Math.min(100,te/q*100)):0;return{loanTotal:D,subTotal:W,incomeTotal:q,otherTotal:Y,totalOutflow:V,netMonthly:te,healthScore:me,totalActive:O.length}})();return n.jsxs(\"div\",{className:\"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700\",children:[n.jsx(\"div\",{className:\"flex justify-center mb-6\",children:n.jsxs(\"div\",{className:\"bg-slate-900/60 p-1 rounded-2xl flex gap-1 border border-white/5\",children:[n.jsx(\"button\",{onClick:()=>w(\"list\"),className:`px-6 py-2 rounded-xl text-sm font-bold transition-all ${f===\"list\"?\"bg-indigo-600 text-white shadow-lg\":\"text-slate-500 hover:text-slate-300\"}`,children:\"Flow List\"}),n.jsxs(\"button\",{onClick:()=>w(\"strategist\"),className:`px-4 py-2 rounded-xl text-xs font-bold transition-all flex items-center gap-2 ${f===\"strategist\"?\"bg-indigo-600 text-white shadow-lg\":\"text-slate-500 hover:text-slate-300\"}`,children:[n.jsx(Hn,{className:\"w-3.5 h-3.5\"}),\"Strategist\"]}),n.jsxs(\"button\",{onClick:()=>w(\"debt\"),className:`px-4 py-2 rounded-xl text-xs font-bold transition-all flex items-center gap-2 ${f===\"debt\"?\"bg-indigo-600 text-white shadow-lg\":\"text-slate-500 hover:text-slate-300\"}`,children:[n.jsx(Ar,{className:\"w-3.5 h-3.5\"}),\"Debt Node\"]})]})}),f===\"debt\"?n.jsx(rj,{liabilities:u,debts:d,currency:l,totalMonthlyIncome:A||1}):f===\"strategist\"?n.jsx(aj,{recurring:o,currency:l,totalMonthlyIncome:A,onDelete:v=>{N(v)}}):n.jsxs(n.Fragment,{children:[n.jsxs(\"div\",{className:\"frosted-plate rounded-[32px] border border-white/5 relative overflow-hidden p-8 shadow-2xl\",children:[n.jsx(Qu,{variant:\"spending\"}),n.jsxs(\"div\",{className:\"relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between mb-8\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-10 h-10 bg-cyan-500/10 rounded-xl flex items-center justify-center border border-cyan-500/20\",children:n.jsx(ei,{className:\"w-5 h-5 text-cyan-400\"})}),n.jsxs(\"div\",{children:[n.jsx(\"h3\",{className:\"text-slate-100 font-bold text-xs uppercase tracking-widest font-mono\",children:\"Flow Analysis\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 uppercase tracking-tighter\",children:\"Monthly Leftover Cash\"})]})]}),n.jsxs(\"div\",{className:\"text-right\",children:[n.jsx(\"p\",{className:\"text-[10px] text-slate-500 uppercase tracking-wider font-extrabold font-mono\",children:\"Total Commitments\"}),n.jsxs(\"p\",{className:\"text-sm font-black text-white tabular-nums font-mono\",children:[ae.totalActive,\" Active\"]})]})]}),n.jsxs(\"div\",{className:\"flex flex-col md:flex-row items-center justify-between gap-12\",children:[n.jsxs(\"div\",{className:\"space-y-2 text-center md:text-left\",children:[n.jsx(\"p\",{className:\"text-slate-400 text-xs font-black uppercase tracking-widest font-mono\",children:\"Projected Monthly Surplus\"}),n.jsxs(\"h1\",{className:\"text-5xl md:text-6xl font-black tracking-tighter tabular-nums text-white font-mono\",children:[ae.netMonthly>=0?\"+\":\"\",Ne(ae.netMonthly,l)]})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-3 gap-4 w-full md:w-auto\",children:[n.jsxs(\"div\",{className:\"bg-slate-800/40 backdrop-blur-md px-6 py-4 rounded-3xl border border-white/5 text-center flex flex-col items-center justify-center min-w-[140px]\",children:[n.jsx(\"p\",{className:\"text-[10px] uppercase font-black text-slate-500 mb-1 font-mono tracking-widest\",children:\"Loan EMIs\"}),n.jsxs(\"div\",{className:\"flex flex-col items-center\",children:[n.jsx(\"span\",{className:\"text-2xl font-black leading-none text-rose-400/80 font-mono mb-1\",children:\"-\"}),n.jsx(\"span\",{className:\"font-black text-lg text-rose-400 font-mono tabular-nums\",children:Ne(Math.abs(ae.loanTotal),l)})]})]}),n.jsxs(\"div\",{className:\"bg-slate-800/40 backdrop-blur-md px-6 py-4 rounded-3xl border border-white/5 text-center flex flex-col items-center justify-center min-w-[140px]\",children:[n.jsx(\"p\",{className:\"text-[10px] uppercase font-black text-slate-500 mb-1 font-mono tracking-widest\",children:\"Subscriptions\"}),n.jsxs(\"div\",{className:\"flex flex-col items-center\",children:[n.jsx(\"span\",{className:\"text-2xl font-black leading-none text-indigo-400/80 font-mono mb-1\",children:\"-\"}),n.jsx(\"span\",{className:\"font-black text-lg text-indigo-400 font-mono tabular-nums\",children:Ne(Math.abs(ae.subTotal),l)})]})]}),n.jsxs(\"div\",{className:\"bg-slate-800/40 backdrop-blur-md px-6 py-4 rounded-3xl border border-white/5 text-center flex flex-col items-center justify-center min-w-[140px]\",children:[n.jsx(\"p\",{className:\"text-[10px] uppercase font-black text-slate-500 mb-1 font-mono tracking-widest\",children:\"Recur. Income\"}),n.jsxs(\"div\",{className:\"flex flex-col items-center\",children:[n.jsx(\"span\",{className:\"text-2xl font-black leading-none text-emerald-400/80 font-mono mb-1\",children:\"+\"}),n.jsx(\"span\",{className:\"font-black text-lg text-emerald-400 font-mono tabular-nums\",children:Ne(Math.abs(ae.incomeTotal),l)})]})]})]})]})]})]}),n.jsxs(\"div\",{className:\"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 sticky top-0 z-30 py-2 bg-slate-950/80 backdrop-blur-md rounded-2xl border border-white/5\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-1.5 h-6 bg-indigo-500 rounded-full shadow-[0_0_15px_rgba(99,102,241,0.5)]\"}),n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-500\",children:\"Commitment Stream\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-2 w-full sm:w-auto\",children:[n.jsxs(Re,{variant:\"ghost\",size:\"sm\",onClick:F,disabled:L||o.length===0,className:\"flex-1 sm:flex-initial rounded-xl border border-white/5 hover:bg-slate-900/40 font-bold text-slate-400 hover:text-slate-100 px-4 h-10 text-xs\",children:[n.jsx(ei,{className:`w-3.5 h-3.5 mr-2 ${L?\"animate-spin\":\"\"}`}),\"Sync\"]}),n.jsxs(Re,{onClick:()=>y(!0),size:\"sm\",className:\"flex-1 sm:flex-initial bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl px-6 h-10 font-bold shadow-lg shadow-indigo-600/20 transition-all active:scale-95 text-xs\",children:[n.jsx(kr,{className:\"w-3.5 h-3.5 mr-2\"}),\"Add New\"]})]})]}),o.length>0&&n.jsxs(\"div\",{className:\"px-4\",children:[n.jsxs(\"div\",{className:\"bg-slate-900/40 border border-white/5 rounded-2xl p-4 flex flex-col sm:flex-row sm:items-center justify-between gap-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-10 h-10 bg-indigo-500/10 rounded-xl flex items-center justify-center\",children:n.jsx(Ga,{className:\"w-5 h-5 text-indigo-400\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-xs font-black uppercase tracking-widest text-slate-500 mb-0.5 font-mono\",children:\"Net Monthly Flow\"}),n.jsxs(\"h4\",{className:`text-lg font-black tabular-nums leading-none font-mono ${ae.netMonthly>=0?\"text-emerald-400\":\"text-rose-400\"}`,children:[ae.netMonthly>=0?\"+\":\"\",Ne(ae.netMonthly,l)]})]})]}),n.jsxs(\"div\",{className:\"flex items-center gap-4 border-t sm:border-t-0 sm:border-l border-white/5 pt-4 sm:pt-0 sm:pl-6\",children:[n.jsxs(\"div\",{className:\"space-y-0.5\",children:[n.jsx(\"p\",{className:\"text-[10px] uppercase font-black text-slate-600\",children:\"Shadow Health\"}),n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsxs(\"span\",{className:`font-black text-lg tabular-nums ${ae.healthScore>60?\"text-emerald-400\":ae.healthScore>30?\"text-indigo-400\":\"text-rose-400\"}`,children:[Math.round(ae.healthScore),\"%\"]}),n.jsx(\"div\",{className:\"px-2 py-0.5 rounded bg-white/5 border border-white/5\",children:n.jsx(\"span\",{className:\"text-[9px] font-black uppercase tracking-tight text-slate-400\",children:ae.healthScore>=80?\"Elite\":ae.healthScore>=60?\"Strong\":ae.healthScore>=40?\"Stable\":ae.healthScore>=20?\"Warning\":\"Critical\"})}),n.jsx(\"div\",{className:\"flex gap-0.5 ml-1\",children:[1,2,3,4,5].map(v=>n.jsx(\"div\",{className:`w-1.5 h-3 rounded-full transition-colors duration-500 ${ae.healthScore/20>=v?ae.healthScore>60?\"bg-emerald-500\":ae.healthScore>30?\"bg-indigo-500\":\"bg-rose-500\":\"bg-slate-800\"}`},v))})]})]}),n.jsx(Re,{variant:\"ghost\",size:\"sm\",onClick:()=>G(!j),className:\"text-indigo-400 hover:text-indigo-300 hover:bg-indigo-500/10 rounded-xl font-bold\",children:j?\"Hide Analysis\":\"Show Analysis\"})]})]}),j&&n.jsxs(\"div\",{className:\"mt-4 animate-in zoom-in-95 duration-300 grid grid-cols-1 md:grid-cols-2 gap-4\",children:[n.jsxs(Ot,{className:\"bg-slate-900/40 border-white/5 p-4 rounded-2xl\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 mb-2 opacity-50\",children:[n.jsx(zu,{className:\"w-4 h-4\"}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-[0.2em]\",children:\"Total Outflow\"})]}),n.jsx(\"p\",{className:\"text-xl font-black text-rose-400\",children:Ne(ae.totalOutflow,l)})]}),n.jsxs(Ot,{className:\"bg-slate-900/40 border-white/5 p-4 rounded-2xl\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 mb-2 opacity-50\",children:[n.jsx(Ub,{className:\"w-4 h-4\"}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-[0.2em]\",children:\"Total Inflow\"})]}),n.jsx(\"p\",{className:\"text-xl font-black text-emerald-400\",children:Ne(ae.incomeTotal,l)})]})]})]}),n.jsx(\"div\",{className:\"px-4 pb-20 space-y-12\",children:O.length===0?n.jsxs(Ot,{className:\"py-24 text-center bg-slate-800/20 rounded-[40px] border border-dashed border-white/10\",children:[n.jsx(Nu,{className:\"w-20 h-20 mx-auto text-slate-700 mb-6\"}),n.jsx(\"h3\",{className:\"text-2xl font-black text-slate-200 mb-3\",children:\"No Active Commitments\"}),n.jsx(\"p\",{className:\"text-sm text-slate-500 font-bold mb-10 max-w-[320px] mx-auto leading-relaxed\",children:\"Set up your subscriptions, EMIs, and monthly income to unlock deep financial insights.\"}),n.jsxs(Re,{onClick:()=>y(!0),className:\"bg-indigo-600/10 hover:bg-indigo-600/20 text-indigo-400 border border-indigo-600/20 rounded-2xl px-10 h-14 font-black\",children:[n.jsx(kr,{className:\"w-5 h-5 mr-3\"}),\"Add First Commitment\"]})]}):n.jsxs(n.Fragment,{children:[U.incomes.length>0&&n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 border-l-4 border-emerald-500 pl-4 py-1\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100 uppercase tracking-tight font-mono\",children:\"Recurring Income\"}),n.jsxs(\"span\",{className:\"bg-emerald-500/10 text-emerald-400 px-2 py-0.5 rounded text-[10px] font-black font-mono\",children:[U.incomes.length,\" SOURCE(S)\"]})]}),n.jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:U.incomes.map((v,D)=>n.jsx(C,{rec:v},`${v.id}-${D}`))})]}),U.loans.length>0&&n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 border-l-4 border-rose-500 pl-4 py-1\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100 uppercase tracking-tight font-mono\",children:\"Loan EMIs\"}),n.jsxs(\"span\",{className:\"bg-rose-500/10 text-rose-400 px-2 py-0.5 rounded text-[10px] font-black font-mono\",children:[U.loans.length,\" COMMITMENT(S)\"]})]}),n.jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:U.loans.map((v,D)=>n.jsx(C,{rec:v},`${v.id}-${D}`))})]}),U.subscriptions.length>0&&n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 border-l-4 border-indigo-500 pl-4 py-1\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100 uppercase tracking-tight font-mono\",children:\"Active Subscriptions\"}),n.jsxs(\"span\",{className:\"bg-indigo-500/10 text-indigo-400 px-2 py-0.5 rounded text-[10px] font-black font-mono\",children:[U.subscriptions.length,\" SERVICE(S)\"]})]}),n.jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:U.subscriptions.map((v,D)=>n.jsx(C,{rec:v},`${v.id}-${D}`))})]}),U.others.length>0&&n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 border-l-4 border-slate-500 pl-4 py-1\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100 uppercase tracking-tight\",children:\"Other Commitments\"}),n.jsxs(\"span\",{className:\"bg-slate-500/10 text-slate-400 px-2 py-0.5 rounded text-[10px] font-black\",children:[U.others.length,\" ITEM(S)\"]})]}),n.jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:U.others.map((v,D)=>n.jsx(C,{rec:v},`${v.id}-${D}`))})]})]})}),n.jsx(us,{open:M,onOpenChange:y,children:n.jsxs(ds,{className:\"max-w-md bg-slate-950 border-white/10 text-white rounded-[32px]\",children:[n.jsxs(fs,{children:[n.jsx(ms,{className:\"text-2xl font-black tracking-tight text-white\",children:ee?\"Edit Commitment\":\"Create New Commitment\"}),n.jsx(hs,{className:\"text-slate-400 font-bold\",children:ee?\"Modify existing flow parameters.\":\"Automate your financial shadow-wallets.\"})]}),n.jsxs(\"div\",{className:\"space-y-6 mt-4\",children:[n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{className:`p-4 rounded-2xl border-2 cursor-pointer transition-all ${_.type===\"income\"?\"border-emerald-500 bg-emerald-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>B({..._,type:\"income\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 rounded-xl bg-emerald-500/20 flex items-center justify-center text-xl mb-2\",children:\"💰\"}),n.jsx(\"p\",{className:\"text-xs font-black uppercase text-white\",children:\"Money In\"}),n.jsx(\"p\",{className:\"text-[10px] text-emerald-400 font-bold\",children:\"Salary / Gift\"})]}),n.jsxs(\"div\",{className:`p-4 rounded-2xl border-2 cursor-pointer transition-all ${_.type===\"expense\"?\"border-indigo-500 bg-indigo-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>B({..._,type:\"expense\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 rounded-xl bg-indigo-500/20 flex items-center justify-center text-xl mb-2\",children:\"💸\"}),n.jsx(\"p\",{className:\"text-xs font-black uppercase text-white\",children:\"Money Out\"}),n.jsx(\"p\",{className:\"text-[10px] text-indigo-400 font-bold\",children:\"Rent / Sub\"})]})]}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"div\",{className:\"group\",children:[n.jsx(ye,{htmlFor:\"recurring-name\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block\",children:\"Commitment Name\"}),n.jsx(wt,{id:\"recurring-name\",name:\"description\",value:_.type===\"expense\"?_.description:_.source,onChange:v=>B({..._,[_.type===\"expense\"?\"description\":\"source\"]:v.target.value}),placeholder:_.type===\"expense\"?\"e.g. Netflix, Rent\":\"e.g. Salary\",className:\"bg-white/5 border-white/5 rounded-xl h-12 focus:ring-indigo-500/50\",autoComplete:\"off\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"recurring-amount\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block\",children:\"Amount\"}),n.jsx(wt,{id:\"recurring-amount\",name:\"amount\",type:\"number\",value:_.amount,onChange:v=>B({..._,amount:v.target.value}),placeholder:\"0.00\",className:\"bg-white/5 border-white/5 rounded-xl h-12\",autoComplete:\"off\"})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"recurring-frequency\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block\",children:\"Frequency\"}),n.jsxs(Ut,{value:_.frequency,onValueChange:v=>B({..._,frequency:v}),children:[n.jsx(Bt,{id:\"recurring-frequency\",name:\"frequency\",className:\"bg-white/5 border-white/5 rounded-xl h-12\",children:n.jsx(It,{})}),n.jsxs(qt,{className:\"bg-slate-900 border-white/10 text-white\",children:[n.jsx(qe,{value:\"monthly\",children:\"Monthly\"}),n.jsx(qe,{value:\"weekly\",children:\"Weekly\"}),n.jsx(qe,{value:\"daily\",children:\"Daily\"}),n.jsx(qe,{value:\"yearly\",children:\"Yearly\"})]})]})]})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"recurring-account\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block\",children:\"Funding Wallet\"}),n.jsxs(Ut,{value:_.accountId,onValueChange:v=>B({..._,accountId:v}),children:[n.jsx(Bt,{id:\"recurring-account\",name:\"accountId\",className:\"bg-white/5 border-white/5 rounded-xl h-12\",children:n.jsx(It,{placeholder:\"Target Account\"})}),n.jsx(qt,{className:\"bg-slate-900 border-white/10 text-white\",children:i.map(v=>n.jsxs(qe,{value:v.id,children:[v.icon,\" \",v.name]},v.id))})]})]}),_.type===\"expense\"&&n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"recurring-category\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block\",children:\"Category\"}),n.jsxs(Ut,{value:_.category,onValueChange:v=>B({..._,category:v}),children:[n.jsx(Bt,{id:\"recurring-category\",name:\"category\",className:\"bg-white/5 border-white/5 rounded-xl h-12\",children:n.jsx(It,{placeholder:\"Purpose\"})}),n.jsx(qt,{className:\"bg-slate-900 border-white/10 text-white max-h-[200px]\",children:rp.map(v=>n.jsxs(qe,{value:v.value,children:[v.emoji,\" \",v.value]},v.value))})]})]}),(_.category===\"EMI\"||_.category===\"Loan\"||_.liabilityId)&&n.jsxs(\"div\",{className:\"p-4 rounded-2xl bg-rose-500/5 border border-rose-500/10 space-y-4\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-widest text-rose-500/60 pl-1\",children:\"Liability Details\"}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"liability-principal\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block\",children:\"Principal\"}),n.jsx(wt,{id:\"liability-principal\",type:\"number\",value:_.principal,onChange:v=>B({..._,principal:v.target.value}),placeholder:\"Total Loan\",className:\"bg-white/5 border-white/5 rounded-xl h-11 text-xs\"})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"liability-tenure\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block\",children:\"Tenure (Mo)\"}),n.jsx(wt,{id:\"liability-tenure\",type:\"number\",value:_.tenure,onChange:v=>B({..._,tenure:v.target.value}),placeholder:\"Months\",className:\"bg-white/5 border-white/5 rounded-xl h-11 text-xs\"})]})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"liability-rate\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block\",children:\"Interest Rate (%)\"}),n.jsx(wt,{id:\"liability-rate\",type:\"number\",value:_.interestRate,onChange:v=>B({..._,interestRate:v.target.value}),placeholder:\"Annual %\",className:\"bg-white/5 border-white/5 rounded-xl h-11 text-xs\"})]})]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"recurring-start-date\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block\",children:\"Start Date\"}),n.jsx(wt,{id:\"recurring-start-date\",name:\"startDate\",type:\"date\",value:_.startDate,onChange:v=>B({..._,startDate:v.target.value}),className:\"bg-white/5 border-white/5 rounded-xl h-12 text-xs\",autoComplete:\"off\"})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"recurring-end-date\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block\",children:\"End Date (Optional)\"}),n.jsx(wt,{id:\"recurring-end-date\",name:\"endDate\",type:\"date\",value:_.endDate,onChange:v=>B({..._,endDate:v.target.value}),className:\"bg-white/5 border-white/5 rounded-xl h-12\",autoComplete:\"off\"})]})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4 relative z-10\",children:[n.jsx(Re,{variant:\"ghost\",onClick:()=>y(!1),className:\"flex-1 rounded-2xl h-14 font-black text-slate-500 hover:bg-white/5\",children:\"Discard\"}),n.jsx(Re,{onClick:J,className:\"flex-1 bg-indigo-600 hover:bg-indigo-500 text-white rounded-2xl h-14 font-black shadow-lg shadow-indigo-600/20\",disabled:!_.amount||!_.description&&!_.source||!_.accountId||_.type===\"expense\"&&!_.category,children:ee?\"Update Flow\":\"Activate Flow\"})]})]})]})})]})]})}const cj=({isVisible:i,onNotificationClick:l,onSettingsClick:o,notificationCount:u=0})=>n.jsxs(\"header\",{className:`nav-bar safe-header fixed top-0 w-full flex items-center justify-between px-6 border-b border-white/5 transition-transform duration-300 ease-in-out z-[100] ${i?\"translate-y-0\":\"-translate-y-full\"}`,children:[n.jsx(\"button\",{onClick:o,\"aria-label\":\"User Settings\",className:\"w-10 h-10 sq-md bg-black border border-white/5 flex items-center justify-center hover:bg-white/5 transition-colors\",children:n.jsx(Su,{className:\"w-5 h-5 text-slate-400\"})}),n.jsxs(\"div\",{className:\"flex flex-col items-center\",children:[n.jsx(\"img\",{src:\"/images/logo-dark.png\",alt:\"FinHub\",className:\"h-8 w-auto hidden dark:block\"}),n.jsx(\"img\",{src:\"/images/logo-light.png\",alt:\"FinHub\",className:\"h-8 w-auto block dark:hidden\"})]}),n.jsx(\"button\",{onClick:l,\"aria-label\":\"Notifications\",className:\"w-10 h-10 flex items-center justify-center text-slate-400 hover:text-white transition-colors relative\",children:n.jsxs(\"div\",{className:\"relative\",children:[n.jsx(Lu,{className:\"w-5 h-5\"}),u>0&&n.jsx(\"span\",{className:\"absolute top-0 right-0 w-2 h-2 bg-[#FF453A] sq-full ring-2 ring-black\"})]})})]}),uj=({isVisible:i,activeTab:l,onTabChange:o})=>n.jsxs(\"nav\",{className:`nav-bar safe-footer fixed bottom-0 w-full flex items-center justify-around px-4 border-t border-white/5 transition-transform duration-300 ease-in-out z-[100] ${i?\"translate-y-0\":\"translate-y-full\"}`,children:[n.jsxs(\"button\",{\"aria-label\":\"Home Dashboard\",className:`flex flex-col items-center relative py-4 cursor-pointer transition-colors ${l===\"dashboard\"?\"text-[#0A84FF]\":\"text-[#8E8E93] hover:text-white\"}`,onClick:()=>o(\"dashboard\"),children:[l===\"dashboard\"&&n.jsx(\"div\",{className:\"absolute top-0 w-8 h-0.5 bg-[#0A84FF] shadow-[0_0_15px_#0A84FF] rounded-full\"}),n.jsx(Bb,{className:\"w-6 h-6\"}),n.jsx(\"span\",{className:\"text-[9px] font-black uppercase mt-2 tracking-[0.3em]\",children:\"Home\"})]}),n.jsxs(\"button\",{\"aria-label\":\"Transaction History\",className:`flex flex-col items-center transition-all cursor-pointer ${l===\"transactions\"?\"text-[#0A84FF]\":\"text-[#8E8E93] hover:text-white\"}`,onClick:()=>o(\"transactions\"),children:[n.jsx(qb,{className:\"w-6 h-6\"}),n.jsx(\"span\",{className:\"text-[9px] font-black uppercase mt-2 tracking-[0.3em]\",children:\"History\"})]}),n.jsxs(\"button\",{\"aria-label\":\"Recurring Flows\",className:`flex flex-col items-center transition-all cursor-pointer ${l===\"recurring\"?\"text-[#0A84FF]\":\"text-[#8E8E93] hover:text-white\"}`,onClick:()=>o(\"recurring\"),children:[n.jsx(ei,{className:\"w-6 h-6\"}),n.jsx(\"span\",{className:\"text-[9px] font-black uppercase mt-2 tracking-[0.3em]\",children:\"Flows\"})]}),n.jsxs(\"button\",{\"aria-label\":\"Investment Growth\",className:`flex flex-col items-center transition-all cursor-pointer ${l===\"investments\"?\"text-[#0A84FF]\":\"text-[#8E8E93] hover:text-white\"}`,onClick:()=>o(\"investments\"),children:[n.jsx(Hb,{className:\"w-6 h-6\"}),n.jsx(\"span\",{className:\"text-[9px] font-black uppercase mt-2 tracking-[0.3em]\",children:\"Growth\"})]}),n.jsxs(\"button\",{\"aria-label\":\"Financial Goals\",className:`flex flex-col items-center transition-all cursor-pointer ${l===\"goals\"?\"text-[#0A84FF]\":\"text-[#8E8E93] hover:text-white\"}`,onClick:()=>o(\"goals\"),children:[n.jsx(Hn,{className:\"w-6 h-6\"}),n.jsx(\"span\",{className:\"text-[9px] font-black uppercase mt-2 tracking-[0.3em]\",children:\"Goals\"})]}),n.jsxs(\"button\",{\"aria-label\":\"More Options\",className:`flex flex-col items-center transition-all cursor-pointer ${l===\"more\"?\"text-[#0A84FF]\":\"text-[#8E8E93] hover:text-white\"}`,onClick:()=>o(\"more\"),children:[n.jsx(Gb,{className:\"w-6 h-6\"}),n.jsx(\"span\",{className:\"text-[9px] font-black uppercase mt-2 tracking-[0.3em]\",children:\"More\"})]})]}),dj=({children:i,activeTab:l,onTabChange:o,notificationCount:u,onNotificationClick:d,onSettingsClick:h,renderFab:g,forceHide:N=!1})=>{const[E,S]=x.useState(!0),p=x.useRef(0),f=20,w=E&&!N;return x.useEffect(()=>{const A=()=>{if(N)return;const T=window.scrollY;if(T<10){S(!0),p.current=T;return}const C=T-p.current;Math.abs(C)>f&&(C>0?S(!1):S(!0),p.current=T)};return window.addEventListener(\"scroll\",A,{passive:!0}),()=>window.removeEventListener(\"scroll\",A)},[N]),n.jsxs(\"div\",{className:\"min-h-screen bg-bg-primary text-text-primary\",children:[n.jsx(cj,{isVisible:w,notificationCount:u,onNotificationClick:d,onSettingsClick:h}),n.jsx(\"main\",{className:\"safe-layout-main px-4 w-full md:max-w-3xl lg:max-w-5xl mx-auto min-h-screen\",children:i}),n.jsx(uj,{isVisible:w,activeTab:l,onTabChange:o}),g&&g(w)]})},Ha=x.forwardRef(({value:i,onChange:l,allowDecimals:o=!0,maxDecimals:u=2,className:d,...h},g)=>{const[N,E]=x.useState(\"\");x.useEffect(()=>{if(i===\"\"||i===void 0||i===null)E(\"\");else{const f=i.toString();E(ou(f))}},[i]);const S=f=>{const w=f.target.value,A=c0(w);if(G1(A)&&!(!o&&A.includes(\".\"))){if(o&&A.includes(\".\")){const T=A.split(\".\");if(T[1]&&T[1].length>u)return}E(ou(A)),l(A)}},p=f=>{const w=c0(N);w&&E(ou(w)),h.onBlur&&h.onBlur(f)};return n.jsx(wt,{...h,ref:g,type:\"text\",inputMode:\"decimal\",value:N,onChange:S,onBlur:p,className:d})});Ha.displayName=\"NumberInput\";const fj=Ou(\"inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden\",{variants:{variant:{default:\"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90\",secondary:\"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90\",destructive:\"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",outline:\"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground\"}},defaultVariants:{variant:\"default\"}});function E0({className:i,variant:l,asChild:o=!1,...u}){const d=o?q0:\"span\";return n.jsx(d,{\"data-slot\":\"badge\",className:De(fj({variant:l}),i),...u})}const mj=i=>{if(i.category?.toLowerCase().includes(\"transfer\"))return!0;const l=(i.description||i.source||\"\").toLowerCase();return!!(l.includes(\"transfer\")||l.includes(\"payment\")||l.includes(\"cc bill\")||l.includes(\"credit card bill\")||l.includes(\"migration\")||i.tags&&Array.isArray(i.tags)&&i.tags.some(o=>o.toLowerCase()===\"transfer\"||o.toLowerCase()===\"internal\"))};function vu({className:i,...l}){return n.jsx(Vb,{\"data-slot\":\"checkbox\",className:De(\"peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50\",i),...l,children:n.jsx(Fb,{\"data-slot\":\"checkbox-indicator\",className:\"flex items-center justify-center text-current transition-none\",children:n.jsx(H0,{className:\"size-3.5\"})})})}const hj=(i,l,o,u)=>{if(i<=0||o<=0)return{emi:0,totalInterest:0,totalPayment:0,outstanding:0};const d=l/12/100;let h=0;d===0?h=i/o:h=i*d*Math.pow(1+d,o)/(Math.pow(1+d,o)-1);const g=h*o,N=g-i;let E=i;return{emi:Number(h.toFixed(2)),totalInterest:Number(N.toFixed(2)),totalPayment:Number(g.toFixed(2)),outstanding:Number(Math.max(0,E).toFixed(2))}},pj=(i,l,o)=>{if(i<=0||o<=0)return{monthlyYield:0,totalReturns:0,maturityValue:0};const u=i*(l/100)/12,d=u*o,h=i+d;return{monthlyYield:Number(u.toFixed(2)),totalReturns:Number(d.toFixed(2)),maturityValue:Number(h.toFixed(2))}};var A0;(function(i){i.Home=\"home\",i.Work=\"work\",i.Other=\"other\",i.Custom=\"custom\",i.Mobile=\"mobile\",i.FaxWork=\"fax_work\",i.FaxHome=\"fax_home\",i.Pager=\"pager\",i.Callback=\"callback\",i.Car=\"car\",i.CompanyMain=\"company_main\",i.Isdn=\"isdn\",i.Main=\"main\",i.OtherFax=\"other_fax\",i.Radio=\"radio\",i.Telex=\"telex\",i.TtyTdd=\"tty_tdd\",i.WorkMobile=\"work_mobile\",i.WorkPager=\"work_pager\",i.Assistant=\"assistant\",i.Mms=\"mms\"})(A0||(A0={}));var k0;(function(i){i.Home=\"home\",i.Work=\"work\",i.Other=\"other\",i.Custom=\"custom\",i.Mobile=\"mobile\"})(k0||(k0={}));var T0;(function(i){i.Home=\"home\",i.Work=\"work\",i.Other=\"other\",i.Custom=\"custom\"})(T0||(T0={}));const D0=cs(\"Contacts\",{web:()=>Fa(()=>import(\"./web-Cu-7YtD8.js\"),__vite__mapDeps([6,1,2,3,4])).then(i=>new i.ContactsWeb)}),at={common:{date:\"Date\",tags:\"Tags\",amount:\"Amount\",actions:{add:\"Add\",update:\"Update\",abort:\"Cancel\",record:\"Record\"},status:{error:\"Error\"}},transactions:{expenseLabel:\"Expense\",incomeLabel:\"Income\",debtLabel:\"Debt\",account:\"Account\",category:\"Category\",recurringDescription:\"Recurring transaction\",justificationRequired:\"Justification Required\",principalCapital:\"Principal Amount\",loanInvestmentDetails:\"Loan/Investment Details\",lentMoney:\"I Lent Money\",borrowedMoney:\"I Borrowed Money\",noAccounts:\"No accounts found\"},dashboard:{planTitle:\"Your Finance Plan\",income:\"Income\",expenses:\"Expenses\",protocolInterpretation:\"Analysis\",safeZoneHealth:\"Safe Zone Health\",actionFlow:\"Action Flow\",actionFlowEfficiency:\"Action Flow Efficiency\",burnTrend:\"Burn Trend\",highPowerNode:\"High Power Node identified\"},settings:{factoryReset:\"Reset Data\",wipeData:\"Clear All Data\",wipeDescription:\"Clear all transactions and recurring entries (keeps account)\",achievementLevel:\"Achievement Level\",achievementSelect:\"Select an achievement to view details\",achievementLocked:\"Complete financial actions to unlock achievements\",about:\"About\",subscriptionScanner:\"Subscription Scanner\",cleanupDuplicates:\"Clean Up Duplicates\"}},gj=({isOpen:i,onClose:l,type:o,onSubmit:u,initialData:d,accounts:h,liabilities:g,currency:N,roundUpEnabled:E=!0,defaultAccountId:S})=>{const[p,f]=x.useState({description:\"\",amount:\"\",category:\"\",source:\"\",personName:\"\",debtType:\"borrowed\",accountId:\"\",date:new Date().toISOString().split(\"T\")[0],tags:[],isRecurring:!1,frequency:\"monthly\",endDate:\"\",isIncomeGenerating:!1,justification:\"\",debtDueDate:\"\",principal:\"\",interestRate:\"\",tenure:\"\",tenureUnit:\"months\",liabilityId:\"\",investmentId:\"\",registerAsLiability:!1,liabilityType:\"personal_loan\"}),[w,A]=x.useState(\"\"),[T,C]=x.useState(null),[M,y]=x.useState([]),[L,z]=x.useState(void 0),[j,G]=x.useState(void 0);x.useEffect(()=>{i&&(d?queueMicrotask(()=>{f({description:d.description||\"\",amount:d.amount?.toString()||\"\",category:d.category||\"\",source:d.source||\"\",personName:d.personName||\"\",debtType:d.type||\"borrowed\",accountId:d.accountId||\"\",date:d.date||new Date().toISOString().split(\"T\")[0],tags:d.tags||[],isRecurring:d.isRecurring||!1,frequency:d.frequency||\"monthly\",endDate:d.endDate||\"\",isIncomeGenerating:d.isIncomeGenerating||!1,justification:d.justification||\"\",debtDueDate:d.dueDate||\"\",principal:d.principal?.toString()||\"\",interestRate:d.interestRate?.toString()||\"\",tenure:d.tenure?.toString()||\"\",tenureUnit:d.tenureUnit||\"months\",liabilityId:d.liabilityId||\"\",investmentId:d.investmentId||\"\",registerAsLiability:d.registerAsLiability||!1,liabilityType:d.type||\"personal_loan\"})}):h.length>0&&!p.accountId&&queueMicrotask(()=>{const O=o===\"expense\"&&S?S:h[0].id;f(k=>({...k,accountId:O}))}))},[i,d,h,p.accountId,S,o]),x.useEffect(()=>{const O=o===\"expense\"||o===\"income\"?p.description:p.personName,k=O.length>2&&!d?qu(O):null;if(O.length>2&&!d){const U=g.find(Q=>Q.name.toLowerCase()===O.toLowerCase()||O.toLowerCase()===`emi: ${Q.name.toLowerCase()}`||O.toLowerCase().includes(Q.name.toLowerCase()));if(U){queueMicrotask(()=>{C(\"EMI\"),y([\"emi\",\"liability\",U.name.toLowerCase()]),z(U.emiAmount),G(`EMI: ${U.name}`)});const Q=new Date(U.startDate),ae=new Date;ae.setDate(Q.getDate());const v=ae.toISOString().split(\"T\")[0];queueMicrotask(()=>{f(D=>({...D,suggestedDate:v,liabilityId:U.id}))})}}k?queueMicrotask(()=>{C(k.category),y(k.tags),z(k.suggestedAmount),G(k.suggestedDescription)}):(!O.length||d)&&queueMicrotask(()=>{C(null),y([]),z(void 0),G(void 0)})},[p.description,p.personName,o,d,g]);const ee=O=>{if(O.preventDefault(),!p.accountId&&h.length>0){alert(\"Please select an account\");return}let k={amount:parseFloat(p.amount),date:p.date,tags:p.tags,accountId:p.accountId||(h.length>0?h[0].id:\"\"),isRecurring:p.isRecurring,frequency:p.frequency,customIntervalDays:p.customIntervalDays,startDate:p.date,endDate:p.endDate||void 0,isIncomeGenerating:p.isIncomeGenerating,justification:p.justification,liabilityId:p.liabilityId===\"new\"?void 0:p.liabilityId||void 0,investmentId:p.investmentId,registerAsLiability:p.registerAsLiability,principal:p.principal?parseFloat(p.principal):void 0,interestRate:p.interestRate?parseFloat(p.interestRate):void 0,tenure:p.tenure?parseInt(p.tenure):void 0,tenureUnit:p.tenureUnit,liabilityType:p.liabilityType};o===\"expense\"?k={...k,description:p.description,category:p.category,roundUpAmount:p.roundUpAmount}:o===\"income\"?k={...k,source:p.description}:o===\"debt\"&&(k={...k,personName:p.personName,type:p.debtType,dueDate:p.debtDueDate||void 0});const U=h.find(Q=>Q.id===p.accountId);o===\"expense\"&&U?.type===\"credit_card\"&&mj({description:p.description,category:p.category})&&(k.category=\"Transfer\"),u(k),Z()},Z=()=>{f({description:\"\",amount:\"\",category:\"\",source:\"\",personName:\"\",debtType:\"borrowed\",accountId:h.length>0?h[0].id:\"\",date:new Date().toISOString().split(\"T\")[0],tags:[],isRecurring:!1,frequency:\"monthly\",endDate:\"\",isIncomeGenerating:!1,justification:\"\",debtDueDate:\"\",principal:\"\",interestRate:\"\",tenure:\"\",tenureUnit:\"months\",liabilityId:\"\",investmentId:\"\",registerAsLiability:!1,liabilityType:\"personal_loan\"}),A(\"\"),C(null),y([]),z(void 0),G(void 0),l()},_=()=>{w.trim()&&!p.tags.includes(w.trim())&&(f({...p,tags:[...p.tags,w.trim()]}),A(\"\"))},B=O=>{if(O.includes(\",\")){const k=O.split(\",\").map(U=>U.trim()).filter(U=>U&&!p.tags.includes(U));k.length>0&&(f({...p,tags:[...p.tags,...k]}),A(\"\"))}else A(O)},J=O=>{f({...p,tags:p.tags.filter(k=>k!==O)})},ne=()=>{T&&(f(O=>({...O,category:T,tags:[...new Set([...O.tags,...M])],amount:L&&!O.amount?L.toString():O.amount,description:j||O.description,isRecurring:T===\"Subscription\"?!0:O.isRecurring,frequency:T===\"Subscription\"?\"monthly\":O.frequency})),C(null),y([]),z(void 0),G(void 0))},F=async()=>{if(Gn.isNativePlatform())try{if((await D0.requestPermissions()).contacts!==\"granted\"){alert(\"Contacts permission is required to select a contact.\");return}const k=await D0.pickContact({projection:{name:!0,phones:!0}});if(k&&k.contact){const U=k.contact,Q=U.name?.display||(U.name?.given?`${U.name.given} ${U.name.family||\"\"}`:\"\")||U.phones?.[0]?.number||\"Unknown Contact\";f(ae=>({...ae,personName:Q.trim()})),window.navigator.vibrate&&window.navigator.vibrate(20)}}catch(O){console.error(\"Capacitor contact picker error:\",O),alert(\"Failed to pick contact. Please try again or type manually.\")}else if(\"contacts\"in navigator&&\"ContactsManager\"in window)try{const O=[\"name\"],k={multiple:!1},U=await navigator.contacts.select(O,k);if(U.length>0&&U[0].name?.length>0){const Q=U[0].name[0];f(ae=>({...ae,personName:Q})),window.navigator.vibrate&&window.navigator.vibrate(20)}}catch(O){console.error(\"Web contact picker error:\",O)}else alert(\"Contact Selection is only available on supported mobile browsers or the native app.\")},oe=[100,500,1e3,5e3],ge=O=>{const U=(p.amount||\"0\")+\"0\".repeat(O);f({...p,amount:U})};return n.jsx(us,{open:i,onOpenChange:Z,children:n.jsxs(ds,{className:\"max-w-md max-h-[90vh] overflow-y-auto bg-black border-white/5 p-0 shadow-2xl custom-scrollbar sq-2xl\",children:[n.jsxs(\"div\",{className:`px-8 pt-10 pb-8 border-b border-white/5 relative overflow-hidden ${o===\"expense\"?\"bg-rose-500/5\":o===\"income\"?\"bg-emerald-500/5\":\"bg-yellow-500/5\"}`,children:[n.jsx(\"div\",{className:`absolute top-0 right-0 w-32 h-32 blur-[60px] opacity-20 -mr-16 -mt-16 ${o===\"expense\"?\"bg-rose-500\":o===\"income\"?\"bg-emerald-500\":\"bg-yellow-500\"}`}),n.jsxs(fs,{className:\"relative z-10\",children:[n.jsxs(ms,{className:\"text-2xl font-black tracking-tighter text-slate-100\",children:[d?at.common.actions.update:at.common.actions.add,\" \",o===\"expense\"?at.transactions.expenseLabel:o===\"income\"?at.transactions.incomeLabel:at.transactions.debtLabel]}),n.jsx(hs,{className:\"text-slate-500 font-bold text-[10px] uppercase tracking-[0.2em] mt-1\",children:o===\"debt\"?\"Manage personal debts and loans\":`Recording ${o===\"expense\"?\"an expense\":\"an income\"}`})]})]}),n.jsx(\"div\",{className:\"p-8\",children:n.jsxs(\"form\",{onSubmit:ee,className:\"space-y-6\",children:[h.length>0?n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(ye,{htmlFor:\"transaction-account\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:at.transactions.account}),n.jsxs(Ut,{value:p.accountId,onValueChange:O=>f({...p,accountId:O}),children:[n.jsx(Bt,{id:\"transaction-account\",name:\"accountId\",className:\"h-12 bg-black border-white/5 sq-md focus:ring-1 focus:ring-white/10 text-slate-200 font-bold\",children:n.jsx(It,{placeholder:\"Select account\"})}),n.jsx(qt,{className:\"bg-black border-white/5\",children:h.map(O=>n.jsx(qe,{value:O.id,className:\"focus:bg-white/5 focus:text-white\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between w-full\",children:[n.jsx(\"span\",{className:\"font-bold\",children:O.name}),n.jsx(\"span\",{className:\"text-[10px] text-slate-500 ml-4 font-mono\",children:Ne(O.balance,N)})]})},O.id))})]})]}):n.jsxs(\"div\",{className:\"p-4 bg-amber-500/10 border border-amber-500/20 sq-md text-[10px] font-black uppercase tracking-widest text-amber-400\",children:[\"⚠️ \",at.transactions.noAccounts]}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(ye,{htmlFor:\"transaction-description\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:o===\"expense\"?\"Description\":o===\"income\"?\"Source\":\"Person Name\"}),n.jsxs(\"div\",{className:\"flex gap-2\",children:[n.jsx(wt,{id:\"transaction-description\",name:\"description\",value:o===\"debt\"?p.personName:p.description,onChange:O=>f({...p,[o===\"debt\"?\"personName\":\"description\"]:O.target.value}),placeholder:o===\"expense\"?\"Starbucks Coffee, Netflix...\":o===\"income\"?\"Salary, Freelance...\":\"John Doe\",required:!0,className:\"h-12 bg-black border-white/5 sq-md focus:border-white/10 text-slate-200 font-bold placeholder:text-slate-600 flex-1\",autoComplete:\"off\"}),o===\"debt\"&&n.jsx(Re,{type:\"button\",variant:\"ghost\",onClick:F,className:\"h-12 w-12 bg-white/5 border border-white/5 sq-md flex items-center justify-center p-0 text-slate-400 hover:text-white\",title:\"Select from Contacts\",children:n.jsx(Z0,{className:\"w-5 h-5\"})})]}),T&&n.jsxs(\"div\",{className:\"mt-3 p-4 bg-indigo-500/5 border border-indigo-500/10 sq-md flex items-start gap-3 animate-in fade-in zoom-in-95 duration-300\",children:[n.jsx(Ga,{className:\"w-4 h-4 text-indigo-400 mt-0.5 flex-shrink-0\"}),n.jsxs(\"div\",{className:\"flex-1\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-widest text-indigo-300 leading-tight\",children:\"Intelligence Suggested\"}),n.jsxs(\"div\",{className:\"text-xs text-slate-400 mt-1 font-bold\",children:[o===\"expense\"&&n.jsxs(\"div\",{className:\"flex flex-col gap-1\",children:[n.jsxs(\"div\",{children:[\"Category: \",n.jsx(\"span\",{className:\"text-slate-100 uppercase\",children:T})]}),L&&n.jsxs(\"div\",{children:[\"Detected Amount: \",n.jsx(\"span\",{className:\"text-emerald-400\",children:Ne(L,N)})]})]}),M.length>0&&n.jsxs(\"div\",{className:\"mt-1\",children:[\"Tags: \",n.jsx(\"span\",{className:\"text-slate-100\",children:M.join(\", \")})]})]}),n.jsx(Re,{type:\"button\",size:\"sm\",variant:\"ghost\",onClick:ne,className:\"mt-3 h-8 bg-indigo-500/10 text-indigo-300 hover:bg-indigo-500/20 sq-sm text-[10px] font-black uppercase tracking-widest w-full\",children:\"Auto-Configure Form\"})]})]})]}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(ye,{htmlFor:\"transaction-amount\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:at.common.amount}),n.jsxs(\"div\",{className:\"flex gap-2\",children:[n.jsx(Ha,{id:\"transaction-amount\",name:\"amount\",value:p.amount,onChange:O=>f({...p,amount:O}),placeholder:\"0.00\",step:\"any\",min:\"0\",required:!0,className:\"flex-1 h-14 bg-black border-white/5 sq-md focus:border-white/10 text-xl font-black text-slate-100 placeholder:text-slate-800\",autoComplete:\"off\"}),n.jsxs(\"div\",{className:\"flex flex-col gap-1\",children:[n.jsx(Re,{type:\"button\",variant:\"ghost\",size:\"sm\",onClick:()=>ge(2),className:\"px-3 h-[25px] bg-white/5 text-[10px] font-black text-slate-400 hover:text-white sq-sm border border-white/5\",title:\"Add 00\",children:\"+00\"}),n.jsx(Re,{type:\"button\",variant:\"ghost\",size:\"sm\",onClick:()=>ge(3),className:\"px-3 h-[25px] bg-white/5 text-[10px] font-black text-slate-400 hover:text-white sq-sm border border-white/5\",title:\"Add 000\",children:\"+000\"})]})]}),n.jsx(\"div\",{className:\"flex gap-2 mt-3\",children:oe.map(O=>n.jsx(\"button\",{type:\"button\",onClick:()=>f({...p,amount:O.toString()}),className:\"flex-1 py-2 text-[10px] font-black bg-black border border-white/5 text-slate-500 sq-md hover:bg-white/5 hover:text-slate-200 transition-all uppercase tracking-widest\",children:O},O))}),E&&o===\"expense\"&&p.amount&&parseFloat(p.amount)>0&&(()=>{const O=parseFloat(p.amount),k=O<100?Math.ceil(O/10)*10:Math.ceil(O/100)*100,U=k-O;return U>0&&U>=1?n.jsxs(\"div\",{className:\"flex items-center space-x-3 mt-4 p-4 bg-indigo-500/5 border border-indigo-500/10 sq-md animate-in fade-in duration-500\",children:[n.jsx(vu,{id:\"roundUp\",name:\"roundUp\",className:\"border-white/20 data-[state=checked]:bg-indigo-500 data-[state=checked]:border-indigo-500\",onCheckedChange:Q=>{f(ae=>({...ae,roundUpAmount:Q?U:void 0}))}}),n.jsxs(\"div\",{className:\"grid gap-1.5 leading-none\",children:[n.jsxs(ye,{htmlFor:\"roundUp\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-100 flex items-center gap-2 cursor-pointer\",children:[n.jsx(qn,{className:\"w-3 h-3 text-indigo-400\"}),\"Reserve \",Ne(U,N),\" to Goals\"]}),n.jsxs(\"p\",{className:\"text-[9px] font-bold text-slate-500 uppercase tracking-tighter\",children:[\"Round up capital to nearest 100 (\",Ne(k,N),\")\"]})]})]}):null})()]}),o===\"expense\"&&n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(ye,{htmlFor:\"transaction-category\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:at.transactions.category}),n.jsxs(Ut,{value:p.category,onValueChange:O=>{f(k=>({...k,category:O,isRecurring:O===\"Subscription\"?!0:k.isRecurring,frequency:O===\"Subscription\"?\"monthly\":k.frequency}))},children:[n.jsx(Bt,{id:\"transaction-category\",name:\"category\",className:\"h-12 bg-black border-white/5 sq-md focus:ring-1 focus:ring-white/10 text-slate-200 font-bold\",children:n.jsx(It,{placeholder:\"Select domain\"})}),n.jsx(qt,{className:\"bg-black border-white/5 max-h-[300px]\",children:Tu.map(O=>n.jsxs(qe,{value:O.value,className:\"focus:bg-white/5 focus:text-white\",children:[n.jsx(\"span\",{className:\"mr-2\",children:O.emoji}),n.jsx(\"span\",{className:\"font-bold\",children:O.value})]},O.value))})]})]}),o===\"expense\"&&p.category===\"EMI\"&&n.jsxs(\"div\",{className:\"space-y-4 p-4 bg-rose-500/5 border border-rose-500/10 sq-md animate-in slide-in-from-top-2 duration-300\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsx(ye,{className:\"text-[10px] font-black uppercase tracking-widest text-rose-400\",children:\"Liability Link\"}),n.jsx(J0,{className:\"w-4 h-4 text-rose-400\"})]}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(ye,{htmlFor:\"transaction-liability\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Target Liability\"}),n.jsxs(Ut,{value:p.liabilityId,onValueChange:O=>f(k=>({...k,liabilityId:O,registerAsLiability:O===\"new\"})),children:[n.jsx(Bt,{id:\"transaction-liability\",name:\"liabilityId\",className:\"h-10 bg-black border-white/5 sq-md text-slate-200 font-bold text-xs\",children:n.jsx(It,{placeholder:\"Select or Create Liability\"})}),n.jsxs(qt,{className:\"bg-black border-white/5\",children:[n.jsx(qe,{value:\"none\",className:\"font-bold\",children:\"No formal link\"}),n.jsx(qe,{value:\"new\",className:\"text-emerald-400 font-black italic\",children:\"+ Register as New Loan\"}),g.map(O=>n.jsxs(qe,{value:O.id,className:\"font-bold\",children:[O.name,\" (₹\",O.outstanding.toLocaleString(),\")\"]},O.id))]})]})]}),p.liabilityId===\"new\"&&n.jsxs(\"div\",{className:\"space-y-4 animate-in zoom-in-95 duration-300\",children:[n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(ye,{htmlFor:\"transaction-liability-type\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Loan Category\"}),n.jsxs(Ut,{value:p.liabilityType,onValueChange:O=>f(k=>({...k,liabilityType:O})),children:[n.jsx(Bt,{id:\"transaction-liability-type\",className:\"h-10 bg-black border-white/5 sq-md text-slate-200 font-bold text-xs\",children:n.jsx(It,{})}),n.jsxs(qt,{className:\"bg-black border-white/5\",children:[n.jsx(qe,{value:\"home_loan\",children:\"🏠 Home Loan\"}),n.jsx(qe,{value:\"car_loan\",children:\"🚗 Car Loan\"}),n.jsx(qe,{value:\"personal_loan\",children:\"💳 Personal Loan\"}),n.jsx(qe,{value:\"education_loan\",children:\"🎓 Education Loan\"}),n.jsx(qe,{value:\"other\",children:\"📋 Other\"})]})]})]}),n.jsxs(\"div\",{className:\"p-3 bg-emerald-500/5 border border-emerald-500/10 rounded-xl space-y-2\",children:[n.jsx(\"p\",{className:\"text-[9px] font-black text-emerald-400 uppercase leading-relaxed\",children:'This will create a new formal liability in your \"Bills\" tab.'}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase leading-relaxed\",children:\"Ensure principal and interest are set in the Matrix below.\"})]})]})]}),(()=>{const O=h.find(W=>W.id===p.accountId);if(O?.type!==\"credit_card\"||o!==\"expense\")return null;const k=O.creditLimit||0,U=k*(O.safeLimitPercentage||30)/100,Q=Math.abs(O.balance),ae=parseFloat(p.amount||\"0\"),D=Q+ae>U&&k>0;return n.jsxs(\"div\",{className:\"space-y-4 p-4 bg-black border border-white/5 sq-md animate-in slide-in-from-top-2 duration-300\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsx(ye,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500\",children:\"Credit Card\"}),D&&n.jsx(E0,{variant:\"destructive\",className:\"bg-rose-500/10 text-rose-400 border-rose-500/20 text-[8px] font-black uppercase\",children:\"Limit Breach Risk\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(vu,{id:\"incomeGenerating\",name:\"isIncomeGenerating\",checked:p.isIncomeGenerating,onCheckedChange:W=>f(q=>({...q,isIncomeGenerating:!!W}))}),n.jsx(ye,{htmlFor:\"incomeGenerating\",className:\"text-xs font-bold text-slate-300 cursor-pointer\",children:\"This expense generates additional income\"})]}),D&&!p.isIncomeGenerating&&n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(ye,{htmlFor:\"justification\",className:\"text-[9px] font-black uppercase tracking-widest text-rose-400\",children:at.transactions.justificationRequired}),n.jsx(wt,{id:\"justification\",name:\"justification\",placeholder:\"Why is this credit use essential?\",value:p.justification,onChange:W=>f(q=>({...q,justification:W.target.value})),className:\"bg-white/5 border-rose-500/20 focus:border-rose-500/50 sq-md h-12 text-sm\",required:D,autoComplete:\"off\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase leading-relaxed\",children:\"Strategic credit use is prohibited beyond the safe threshold unless it manifests capital growth.\"})]})]})})(),o===\"debt\"&&n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(ye,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Transaction Type\"}),n.jsxs(\"div\",{className:\"flex gap-2 p-1.5 bg-black border border-white/5 sq-md\",children:[n.jsx(\"button\",{type:\"button\",onClick:()=>f({...p,debtType:\"lent\"}),className:`flex-1 py-3 px-4 sq-md text-[10px] font-black uppercase tracking-widest transition-all ${p.debtType===\"lent\"?\"bg-emerald-600 text-white shadow-lg\":\"text-slate-500 hover:text-slate-200 hover:bg-white/5\"} `,children:at.transactions.lentMoney}),n.jsx(\"button\",{type:\"button\",onClick:()=>f({...p,debtType:\"borrowed\"}),className:`flex-1 py-3 px-4 sq-md text-[10px] font-black uppercase tracking-widest transition-all ${p.debtType===\"borrowed\"?\"bg-rose-600 text-white shadow-lg\":\"text-slate-500 hover:text-slate-200 hover:bg-white/5\"} `,children:at.transactions.borrowedMoney})]})]}),o===\"debt\"&&n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(ye,{htmlFor:\"debt-due-date\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Repayment Date (Optional)\"}),n.jsx(wt,{id:\"debt-due-date\",name:\"debtDueDate\",type:\"date\",value:p.debtDueDate,onChange:O=>f({...p,debtDueDate:O.target.value}),className:\"h-12 bg-black border-white/5 sq-md focus:border-white/10 text-slate-200 font-bold\"})]}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(ye,{htmlFor:\"transaction-date\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:at.common.date}),n.jsx(wt,{id:\"transaction-date\",name:\"date\",type:\"date\",value:p.date,onChange:O=>f({...p,date:O.target.value}),required:!0,className:\"h-12 bg-black border-white/5 sq-md focus:border-white/10 text-slate-200 font-bold\"})]}),n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(ye,{htmlFor:\"transaction-tags\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:at.common.tags}),n.jsxs(\"div\",{className:\"flex gap-2\",children:[n.jsx(wt,{id:\"transaction-tags\",name:\"tags\",value:w,onChange:O=>B(O.target.value),onKeyPress:O=>O.key===\"Enter\"&&(O.preventDefault(),_()),placeholder:\"urgent, recurring, etc...\",autoComplete:\"off\",className:\"h-12 bg-black border-white/5 sq-md focus:border-white/10 text-slate-200 font-bold placeholder:text-slate-800\"}),n.jsx(Re,{type:\"button\",onClick:_,variant:\"ghost\",size:\"sm\",className:\"h-12 px-6 bg-white/5 text-[10px] font-black uppercase tracking-widest text-slate-400 hover:text-white sq-md border border-white/5\",children:\"Index\"})]}),p.tags.length>0&&n.jsx(\"div\",{className:\"flex flex-wrap gap-2 mt-2\",children:p.tags.map(O=>n.jsxs(E0,{variant:\"secondary\",className:\"gap-2 bg-black border border-white/5 text-slate-300 font-bold px-3 py-1 sq-sm\",children:[\"#\",O,n.jsx(\"button\",{type:\"button\",onClick:()=>J(O),\"aria-label\":`Remove tag ${O}`,className:\"hover:text-rose-400 transition-colors\",children:n.jsx(il,{className:\"w-3 h-3\"})})]},O))})]}),n.jsxs(\"div\",{className:\"flex items-center gap-3 p-4 bg-black border border-white/5 sq-md group\",children:[n.jsx(vu,{id:\"recurring\",name:\"isRecurring\",checked:p.isRecurring,onCheckedChange:O=>f({...p,isRecurring:!!O}),className:\"border-white/20 data-[state=checked]:bg-indigo-500 data-[state=checked]:border-indigo-500\"}),n.jsx(ye,{htmlFor:\"recurring\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-100 cursor-pointer\",children:at.transactions.recurringDescription})]}),p.isRecurring&&n.jsxs(\"div\",{className:\"space-y-6 mt-4 p-4 bg-slate-900/40 border border-white/5 sq-md animate-in fade-in zoom-in-95 duration-500\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsx(ye,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500\",children:at.transactions.loanInvestmentDetails}),n.jsx(Ga,{className:\"w-3 h-3 text-indigo-400\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(ye,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-600 ml-1\",children:at.transactions.principalCapital}),n.jsx(Ha,{value:p.principal,onChange:O=>f({...p,principal:O}),placeholder:\"e.g. 100000\",className:\"bg-black border-white/5 h-11 sq-md text-slate-300 font-bold text-xs\"})]}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(ye,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-600 ml-1\",children:\"Rate (% p.a)\"}),n.jsx(Ha,{value:p.interestRate,onChange:O=>f({...p,interestRate:O}),placeholder:\"e.g. 12\",className:\"bg-black border-white/5 h-11 sq-md text-slate-300 font-bold text-xs\"})]}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(ye,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-600 ml-1\",children:\"Tenure\"}),n.jsx(Ha,{value:p.tenure,onChange:O=>f({...p,tenure:O}),placeholder:\"e.g. 12\",className:\"bg-black border-white/5 h-11 sq-md text-slate-300 font-bold text-xs\"})]}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(ye,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-600 ml-1\",children:\"Unit\"}),n.jsxs(Ut,{value:p.tenureUnit,onValueChange:O=>f({...p,tenureUnit:O}),children:[n.jsx(Bt,{className:\"bg-black border-white/5 h-11 sq-md text-slate-300 font-bold text-xs\",children:n.jsx(It,{})}),n.jsxs(qt,{className:\"bg-black border-white/5\",children:[n.jsx(qe,{value:\"months\",children:\"Months\"}),n.jsx(qe,{value:\"years\",children:\"Years\"})]})]})]})]}),(()=>{const O=parseFloat(p.principal),k=parseFloat(p.interestRate);let U=parseInt(p.tenure);if(isNaN(O)||isNaN(k)||isNaN(U)||O<=0)return null;if(p.tenureUnit===\"years\"&&(U*=12),o===\"expense\"){const Q=hj(O,k,U);return n.jsxs(\"div\",{className:\"space-y-3 pt-2 border-t border-white/5\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-center\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500\",children:\"Calculated EMI\"}),n.jsx(\"span\",{className:\"text-sm font-black text-rose-400\",children:Ne(Q.emi,N)})]}),n.jsxs(\"div\",{className:\"flex justify-between items-center\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500\",children:\"Extra Interest\"}),n.jsx(\"span\",{className:\"text-xs font-bold text-slate-400\",children:Ne(Q.totalInterest,N)})]}),n.jsx(Re,{type:\"button\",variant:\"ghost\",onClick:()=>{const ae=new Date(p.date),v=U;ae.setMonth(ae.getMonth()+v);const D=ae.toISOString().split(\"T\")[0];f({...p,amount:Q.emi.toString(),endDate:D})},className:\"w-full h-9 bg-rose-500/10 text-rose-300 hover:bg-rose-500/20 text-[10px] font-black uppercase tracking-widest sq-md\",children:\"Sync EMI to Transaction\"})]})}else if(o===\"income\"){const Q=pj(O,k,U);return n.jsxs(\"div\",{className:\"space-y-3 pt-2 border-t border-white/5\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-center\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500\",children:\"Monthly Yield\"}),n.jsx(\"span\",{className:\"text-sm font-black text-emerald-400\",children:Ne(Q.monthlyYield,N)})]}),n.jsxs(\"div\",{className:\"flex justify-between items-center\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500\",children:\"Total Capital Gains\"}),n.jsx(\"span\",{className:\"text-xs font-bold text-slate-400\",children:Ne(Q.totalReturns,N)})]}),n.jsx(Re,{type:\"button\",variant:\"ghost\",onClick:()=>{const ae=new Date(p.date),v=U;ae.setMonth(ae.getMonth()+v);const D=ae.toISOString().split(\"T\")[0];f({...p,amount:Q.monthlyYield.toString(),endDate:D})},className:\"w-full h-9 bg-emerald-500/10 text-emerald-300 hover:bg-emerald-500/20 text-[10px] font-black uppercase tracking-widest sq-md\",children:\"Sync Yield to Transaction\"})]})}return null})(),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t border-white/5\",children:[n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(ye,{htmlFor:\"transaction-frequency\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Period\"}),n.jsxs(Ut,{value:p.frequency,onValueChange:O=>f({...p,frequency:O}),children:[n.jsx(Bt,{id:\"transaction-frequency\",name:\"frequency\",className:\"bg-black border-white/5 h-12 sq-md text-slate-200 font-bold\",children:n.jsx(It,{})}),n.jsxs(qt,{className:\"bg-black border-white/5\",children:[n.jsx(qe,{value:\"daily\",children:\"Daily\"}),n.jsx(qe,{value:\"weekly\",children:\"Weekly\"}),n.jsx(qe,{value:\"monthly\",children:\"Monthly\"}),n.jsx(qe,{value:\"yearly\",children:\"Yearly\"}),n.jsx(qe,{value:\"custom\",children:\"Custom\"})]})]})]}),p.frequency===\"custom\"?n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(ye,{htmlFor:\"transaction-interval\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Days Interval\"}),n.jsx(Ha,{id:\"transaction-interval\",name:\"customIntervalDays\",value:p.customIntervalDays||\"\",onChange:O=>f({...p,customIntervalDays:parseInt(O)}),placeholder:\"e.g. 45\",min:\"1\",className:\"bg-black border-white/5 h-12 sq-md text-slate-200 font-bold\"})]}):n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(ye,{htmlFor:\"transaction-end-date\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Termination\"}),n.jsx(wt,{id:\"transaction-end-date\",name:\"endDate\",type:\"date\",value:p.endDate,onChange:O=>f({...p,endDate:O.target.value}),className:\"bg-black border-white/5 h-12 sq-md text-slate-200 font-bold\"})]})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-6\",children:[n.jsx(Re,{type:\"button\",variant:\"ghost\",onClick:Z,className:\"flex-1 h-14 sq-md text-[10px] font-black uppercase tracking-widest text-slate-500 hover:text-slate-100 hover:bg-white/5 border border-white/5\",children:at.common.actions.abort}),n.jsx(Re,{type:\"submit\",className:`flex-1 h-14 sq-md text-[10px] font-black uppercase tracking-widest shadow-xl active:scale-[0.98] transition-all ${o===\"expense\"?\"bg-rose-600 hover:bg-rose-500 shadow-rose-900/20\":o===\"income\"?\"bg-emerald-600 hover:bg-emerald-500 shadow-emerald-900/20\":\"bg-yellow-600 hover:bg-yellow-500 shadow-yellow-900/20\"}`,disabled:h.length===0,children:d?at.common.actions.update:at.common.actions.record})]})]})})]})})},xj=({isOpen:i,onClose:l,onConfirm:o,expenseAmount:u,roundedAmount:d,currency:h,goals:g,onMute:N})=>{const[E,S]=x.useState(\"emergency\"),[p,f]=x.useState(\"\"),w=d-u,A=()=>{if(E===\"goal\"&&g.length>0&&!p){ce.error(\"Please select a goal to save into.\");return}o(E===\"goal\"?p:\"emergency\",E)};return n.jsx(us,{open:i,onOpenChange:l,children:n.jsxs(ds,{className:\"sm:max-w-md max-h-[90vh] overflow-y-auto bg-slate-950 border-white/5 p-0 shadow-2xl custom-scrollbar\",children:[n.jsxs(\"div\",{className:\"px-8 pt-10 pb-8 border-b border-white/5 relative overflow-hidden bg-emerald-500/5\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 bg-emerald-500 blur-[80px] opacity-20 -mr-16 -mt-16\"}),n.jsxs(fs,{className:\"relative z-10\",children:[n.jsxs(ms,{className:\"flex items-center gap-3 text-2xl font-black tracking-tighter text-slate-100\",children:[n.jsx(Yb,{className:\"w-7 h-7 text-emerald-500\"}),\"Wealth Multiplier\"]}),n.jsx(hs,{className:\"text-slate-500 font-bold text-[10px] uppercase tracking-[0.2em] mt-1\",children:\"System detected idle capital in transaction\"})]})]}),n.jsxs(\"div\",{className:\"p-8 space-y-8\",children:[n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"p\",{className:\"text-sm font-bold text-slate-300 leading-relaxed text-center px-4\",children:[\"Transaction of \",n.jsx(\"span\",{className:\"text-slate-100\",children:Ne(u,h)}),\" processed. Initialize round-up to \",n.jsx(\"span\",{className:\"text-emerald-400\",children:Ne(d,h)}),\"?\"]}),n.jsxs(\"div\",{className:\"flex flex-col items-center justify-center py-8 bg-slate-900 border border-white/5 rounded-[32px] relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute inset-0 bg-emerald-500/5 opacity-0 group-hover:opacity-100 transition-opacity\"}),n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-emerald-500 mb-1\",children:\"Leftover Cash\"}),n.jsx(\"p\",{className:\"text-5xl font-black text-white tracking-tighter\",children:Ne(w,h)})]})]}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(ye,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Asset Allocation Target\"}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"button\",{type:\"button\",onClick:()=>S(\"emergency\"),className:`p-5 rounded-3xl border transition-all duration-300 flex flex-col items-center gap-3 ${E===\"emergency\"?\"bg-emerald-600 border-emerald-500 text-white shadow-lg shadow-emerald-900/40\":\"bg-slate-900 border-white/5 text-slate-500 hover:text-slate-300 hover:bg-white/5\"}`,children:[n.jsx($b,{className:`w-6 h-6 ${E===\"emergency\"?\"text-white\":\"text-slate-500\"}`}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest\",children:\"Stability\"})]}),n.jsxs(\"button\",{type:\"button\",onClick:()=>{S(\"goal\"),g.length>0&&!p&&f(g[0].id)},className:`p-5 rounded-3xl border transition-all duration-300 flex flex-col items-center gap-3 ${E===\"goal\"?\"bg-indigo-600 border-indigo-500 text-white shadow-lg shadow-indigo-900/40\":\"bg-slate-900 border-white/5 text-slate-500 hover:text-slate-300 hover:bg-white/5\"}`,children:[n.jsx(Xb,{className:`w-6 h-6 ${E===\"goal\"?\"text-white\":\"text-slate-500\"}`}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest\",children:\"Growth\"})]})]}),E===\"goal\"&&g.length>0&&n.jsx(\"div\",{className:\"mt-4 animate-in slide-in-from-top-2 duration-300\",children:n.jsxs(Ut,{value:p,onValueChange:f,children:[n.jsx(Bt,{id:\"round-up-goal-select\",name:\"goalId\",className:\"h-12 bg-slate-900 border-white/5 rounded-2xl text-slate-200 font-bold focus:ring-1 focus:ring-white/10\",children:n.jsx(It,{placeholder:\"Select Growth Target\"})}),n.jsx(qt,{className:\"bg-slate-900 border-white/5\",children:g.map(T=>n.jsxs(qe,{value:T.id,className:\"focus:bg-white/5 focus:text-white font-bold\",children:[T.emoji,\" \",T.name]},T.id))})]})}),E===\"goal\"&&g.length===0&&n.jsx(\"div\",{className:\"p-4 bg-amber-500/10 border border-amber-500/20 rounded-2xl text-[10px] font-black uppercase tracking-widest text-amber-400 text-center\",children:\"No active targets. Defaulting to General Reservoirs.\"})]}),n.jsxs(\"div\",{className:\"pt-2 space-y-4\",children:[n.jsx(Re,{onClick:A,className:\"w-full text-[10px] font-black uppercase tracking-widest h-14 bg-emerald-600 hover:bg-emerald-500 text-white rounded-2xl shadow-xl shadow-emerald-900/20 active:scale-[0.98] transition-all\",children:\"Initialize Savings Event\"}),n.jsxs(\"div\",{className:\"flex items-center justify-between gap-4\",children:[n.jsx(Re,{variant:\"ghost\",size:\"sm\",onClick:l,className:\"h-10 px-6 rounded-xl text-[10px] font-black uppercase tracking-widest text-slate-500 hover:text-slate-300 hover:bg-white/5 border border-white/5\",children:\"Abort\"}),n.jsx(\"div\",{className:\"flex-1\",children:n.jsxs(Ut,{onValueChange:T=>N(T),children:[n.jsx(Bt,{id:\"mute-duration\",name:\"muteDuration\",className:\"h-10 bg-transparent border border-white/5 hover:bg-white/5 rounded-xl text-[9px] font-black uppercase tracking-widest text-slate-500 justify-center gap-2 px-4 focus:ring-0\",children:n.jsx(It,{placeholder:\"Disabled\"})}),n.jsxs(qt,{align:\"end\",className:\"bg-slate-900 border-white/5\",children:[n.jsx(qe,{value:\"today\",className:\"text-[10px] font-bold py-2\",children:\"Mute 24h\"}),n.jsx(qe,{value:\"week\",className:\"text-[10px] font-bold py-2\",children:\"Mute 7d\"}),n.jsx(qe,{value:\"month\",className:\"text-[10px] font-bold py-2\",children:\"Mute 30d\"})]})]})})]})]})]})]})})};var bj=(i,l,o,u,d,h,g,N)=>{let E=document.documentElement,S=[\"light\",\"dark\"];function p(A){(Array.isArray(i)?i:[i]).forEach(T=>{let C=T===\"class\",M=C&&h?d.map(y=>h[y]||y):d;C?(E.classList.remove(...M),E.classList.add(h&&h[A]?h[A]:A)):E.setAttribute(T,A)}),f(A)}function f(A){N&&S.includes(A)&&(E.style.colorScheme=A)}function w(){return window.matchMedia(\"(prefers-color-scheme: dark)\").matches?\"dark\":\"light\"}if(u)p(u);else try{let A=localStorage.getItem(l)||o,T=g&&A===\"system\"?w():A;p(T)}catch{}},M0=[\"light\",\"dark\"],Ap=\"(prefers-color-scheme: dark)\",yj=typeof window>\"u\",Ku=x.createContext(void 0),vj={setTheme:i=>{},themes:[]},wj=()=>{var i;return(i=x.useContext(Ku))!=null?i:vj},jj=i=>x.useContext(Ku)?x.createElement(x.Fragment,null,i.children):x.createElement(Sj,{...i}),Nj=[\"light\",\"dark\"],Sj=({forcedTheme:i,disableTransitionOnChange:l=!1,enableSystem:o=!0,enableColorScheme:u=!0,storageKey:d=\"theme\",themes:h=Nj,defaultTheme:g=o?\"system\":\"light\",attribute:N=\"data-theme\",value:E,children:S,nonce:p,scriptProps:f})=>{let[w,A]=x.useState(()=>Ej(d,g)),[T,C]=x.useState(()=>w===\"system\"?wu():w),M=E?Object.values(E):h,y=x.useCallback(G=>{let ee=G;if(!ee)return;G===\"system\"&&o&&(ee=wu());let Z=E?E[ee]:ee,_=l?Aj(p):null,B=document.documentElement,J=ne=>{ne===\"class\"?(B.classList.remove(...M),Z&&B.classList.add(Z)):ne.startsWith(\"data-\")&&(Z?B.setAttribute(ne,Z):B.removeAttribute(ne))};if(Array.isArray(N)?N.forEach(J):J(N),u){let ne=M0.includes(g)?g:null,F=M0.includes(ee)?ee:ne;B.style.colorScheme=F}_?.()},[p]),L=x.useCallback(G=>{let ee=typeof G==\"function\"?G(w):G;A(ee);try{localStorage.setItem(d,ee)}catch{}},[w]),z=x.useCallback(G=>{let ee=wu(G);C(ee),w===\"system\"&&o&&!i&&y(\"system\")},[w,i]);x.useEffect(()=>{let G=window.matchMedia(Ap);return G.addListener(z),z(G),()=>G.removeListener(z)},[z]),x.useEffect(()=>{let G=ee=>{ee.key===d&&(ee.newValue?A(ee.newValue):L(g))};return window.addEventListener(\"storage\",G),()=>window.removeEventListener(\"storage\",G)},[L]),x.useEffect(()=>{y(i??w)},[i,w]);let j=x.useMemo(()=>({theme:w,setTheme:L,forcedTheme:i,resolvedTheme:w===\"system\"?T:w,themes:o?[...h,\"system\"]:h,systemTheme:o?T:void 0}),[w,L,i,T,o,h]);return x.createElement(Ku.Provider,{value:j},x.createElement(Cj,{forcedTheme:i,storageKey:d,attribute:N,enableSystem:o,enableColorScheme:u,defaultTheme:g,value:E,themes:h,nonce:p,scriptProps:f}),S)},Cj=x.memo(({forcedTheme:i,storageKey:l,attribute:o,enableSystem:u,enableColorScheme:d,defaultTheme:h,value:g,themes:N,nonce:E,scriptProps:S})=>{let p=JSON.stringify([o,l,h,i,N,g,u,d]).slice(1,-1);return x.createElement(\"script\",{...S,suppressHydrationWarning:!0,nonce:typeof window>\"u\"?E:\"\",dangerouslySetInnerHTML:{__html:`(${bj.toString()})(${p})`}})}),Ej=(i,l)=>{if(yj)return;let o;try{o=localStorage.getItem(i)||void 0}catch{}return o||l},Aj=i=>{let l=document.createElement(\"style\");return i&&l.setAttribute(\"nonce\",i),l.appendChild(document.createTextNode(\"*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}\")),document.head.appendChild(l),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(l)},1)}},wu=i=>(i||(i=window.matchMedia(Ap)),i.matches?\"dark\":\"light\");function kp({...i}){return n.jsx(V0,{\"data-slot\":\"sheet\",...i})}function kj({...i}){return n.jsx(Q0,{\"data-slot\":\"sheet-portal\",...i})}const Tp=x.forwardRef(({className:i,...l},o)=>n.jsx(G0,{ref:o,\"data-slot\":\"sheet-overlay\",className:De(\"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-[200] bg-black/50\",i),...l}));Tp.displayName=\"SheetOverlay\";function Dp({className:i,children:l,side:o=\"right\",...u}){return n.jsxs(kj,{children:[n.jsx(F0,{asChild:!0,children:n.jsx(Tp,{})}),n.jsx(Y0,{\"data-slot\":\"sheet-content\",className:De(\"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-[200] flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-200 data-[state=open]:duration-300\",o===\"right\"&&\"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm\",o===\"left\"&&\"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm\",o===\"top\"&&\"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b\",o===\"bottom\"&&\"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t\",i),...u,children:l})]})}function Mp({className:i,...l}){return n.jsx($0,{\"data-slot\":\"sheet-title\",className:De(\"text-foreground font-semibold\",i),...l})}function _p({className:i,...l}){return n.jsx(X0,{\"data-slot\":\"sheet-description\",className:De(\"text-muted-foreground text-sm\",i),...l})}function Tj({...i}){return n.jsx(Qb,{\"data-slot\":\"collapsible\",...i})}function Dj({...i}){return n.jsx(Kb,{\"data-slot\":\"collapsible-trigger\",...i})}function Mj({...i}){return n.jsx(Zb,{\"data-slot\":\"collapsible-content\",...i})}function _j({className:i,orientation:l=\"horizontal\",decorative:o=!0,...u}){return n.jsx(Jb,{\"data-slot\":\"separator-root\",decorative:o,orientation:l,className:De(\"bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px\",i),...u})}function Rp({...i}){return n.jsx(Pb,{\"data-slot\":\"alert-dialog\",...i})}function Rj({...i}){return n.jsx(sy,{\"data-slot\":\"alert-dialog-trigger\",...i})}function Oj({...i}){return n.jsx(iy,{\"data-slot\":\"alert-dialog-portal\",...i})}function zj({className:i,...l}){return n.jsx(ly,{\"data-slot\":\"alert-dialog-overlay\",className:De(\"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\",i),...l})}function Op({className:i,...l}){return n.jsxs(Oj,{children:[n.jsx(zj,{}),n.jsx(Wb,{\"data-slot\":\"alert-dialog-content\",className:De(\"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg\",i),...l})]})}function zp({className:i,...l}){return n.jsx(\"div\",{\"data-slot\":\"alert-dialog-header\",className:De(\"flex flex-col gap-2 text-center sm:text-left\",i),...l})}function Lp({className:i,...l}){return n.jsx(\"div\",{\"data-slot\":\"alert-dialog-footer\",className:De(\"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\",i),...l})}function Up({className:i,...l}){return n.jsx(ey,{\"data-slot\":\"alert-dialog-title\",className:De(\"text-lg font-semibold\",i),...l})}function Ip({className:i,...l}){return n.jsx(ty,{\"data-slot\":\"alert-dialog-description\",className:De(\"text-muted-foreground text-sm\",i),...l})}function Bp({className:i,...l}){return n.jsx(ny,{className:De(Iu(),i),...l})}function qp({className:i,...l}){return n.jsx(ay,{className:De(Iu({variant:\"outline\"}),i),...l})}const Lj=i=>{const l=new Map;return i.forEach(o=>{const u=l.get(o.category)||0;l.set(o.category,u+o.amount)}),Array.from(l.entries()).map(([o,u])=>({category:o,amount:u})).sort((o,u)=>u.amount-o.amount).slice(0,5)},Uj=i=>{const l=i.expenses,o=i.incomes,u=i.totalIncome,d=o.some(y=>y.isRecurring)?\"salary\":\"fluctuating\",h=[\"Bills & Utilities\",\"EMI\",\"Rent\",\"Education\",\"Insurance\"],g=l.filter(y=>h.includes(y.category)||y.isRecurring).reduce((y,L)=>y+L.amount,0),N=i.totalExpenses-g,E=u>0?((u-i.totalExpenses)/u*100).toFixed(0)+\"%\":\"0%\",S=l.filter(y=>y.category===\"EMI\"||y.category===\"Debt\").reduce((y,L)=>y+L.amount,0),p=u>0?(S/u*100).toFixed(1)+\"%\":\"0%\",f=(i.healthScore/10).toFixed(1),w=Lj(l).slice(0,3),A=l.filter(y=>y.category===\"Subscription\").reduce((y,L)=>y+L.amount,0),T=new Map;[...l,...o].forEach(y=>{y.tags?.forEach(L=>{const z=T.get(L)||0;T.set(L,z+1)})});const C=Array.from(T.entries()).sort((y,L)=>L[1]-y[1]).slice(0,5).map(([y])=>y),M={user_profile:{monthly_income:u,income_type:d,emergency_fund_months:f},current_month_stats:{total_expenses:i.totalExpenses,fixed_expenses:g,variable_expenses:N,top_category:w[0]?.category||\"None\",savings_rate:E},liabilities:{total_debt:i.activeDebts>0?\"Present\":\"None\",monthly_debt_payment:S,debt_ratio:p},behavioral:{top_3_categories:w.map(y=>y.category),subscription_burden:A,frequent_tags:C},portfolio_analysis:{aggregation_rule:\"Source Independence (Calculated on 'investment' accounts only)\",growth_formula:\"((Sum Current Values / Sum Principals) - 1) * 100\",total_investments:i.investments.length,linked_nodes:i.investments.filter(y=>y.accountId).length,rule_based_metrics:{total_principal:i.investments.filter(y=>i.accounts.find(z=>z.id===y.accountId)?.type===\"investment\").reduce((y,L)=>y+L.buyPrice*L.quantity,0),current_market_value:i.investments.filter(y=>i.accounts.find(z=>z.id===y.accountId)?.type===\"investment\").reduce((y,L)=>y+(L.currentPrice||0)*L.quantity,0)}}};return JSON.stringify(M,null,2)},Ij=(i,l,o)=>{const d=`Context: \"The user is looking at the ${o===\"dashboard\"?\"Balance Board\":o===\"investments\"?\"Investment\":o===\"liability\"?\"Liability\":o===\"goals\"?\"Goal\":\"Financial\"} Stack.\"`,h=i.accounts.reduce((w,A)=>w+(A.balance||0),0),g=i.investments.reduce((w,A)=>w+(A.currentPrice||A.buyPrice)*A.quantity,0),N=h+g,E=w=>new Intl.NumberFormat(l===\"INR\"?\"en-IN\":\"en-US\",{style:\"currency\",currency:l,maximumFractionDigits:0}).format(w),S=i.healthScore>70?\"5%\":i.healthScore>50?\"2%\":\"stable\",p=`Insight: \"Net worth is ${E(N)}, showing a ${S} growth trend.\"`;let f=\"\";return i.investments.length>0&&o!==\"investments\"?f=`Action: \"Suggest a 2x2 Grid update for the 'Investment' category.\"`:i.activeDebts>0?f='Action: \"Propose a tactical recovery plan for pending liabilities.\"':i.savingsRate<.2?f='Action: \"Suggest optimizing the spending body to increase savings velocity.\"':f='Action: \"Maintain current protocol and monitor the Wealth Builder Stack.\"',`${d}"
      },
      {
        "file": "android\\app\\src\\main\\assets\\public\\assets\\index-i0Euu4OB.js",
        "line": 59,
        "snippet": "`.trim();return await Hp(h,g,S,u)},eN=async(i,l)=>await Hp(i,l,\"Respond with only the word 'OK' to verify connectivity.\",\"ASSISTANT\"),tN=i=>{if(i.aiProvider&&al(i.aiProvider,i))return i.aiProvider;const l=[\"openai\",\"anthropic\",\"gemini\",\"deepseek\",\"perplexity\"];for(const o of l)if(al(o,i))return o;return null},_0={BASE_URL:\"/\",DEV:!1,MODE:\"production\",PROD:!0,SSR:!1},aN=({isOpen:i,onClose:l,settings:o,onUpdateSettings:u,onAchievementClick:d,onOpenAbout:h})=>{const[g,N]=x.useState(o.name||\"\"),[E,S]=x.useState(o.photoURL||\"\"),[p,f]=x.useState(!1),[w,A]=x.useState(null),[T,C]=x.useState({}),[M,y]=x.useState(!1),{logout:L,scheduleAccountDeletion:z,migrateSubscriptions:j,cleanupDuplicates:G,clearAllData:ee}=ai(),[Z,_]=x.useState(!1),B=async()=>{y(!0);try{await j()}catch(fe){console.error(\"Migration failed:\",fe),ce.error(\"Migration failed\")}finally{y(!1)}},[J,ne]=x.useState(\"USD\"),[F,oe]=x.useState(\"100\"),[ge,O]=x.useState(\"100000\"),[k,U]=x.useState(\"10\"),[Q,ae]=x.useState(\"6\"),[v,D]=x.useState(!1),W=async()=>{const Se={USD:\"US\",INR:\"IN\",GBP:\"GB\",EUR:\"EMU\",AED:\"AE\",SAR:\"SA\"}[o.currency]||\"US\";D(!0);try{const lt=await(await fetch(`https://api.worldbank.org/v2/country/${Se}/indicator/FP.CPI.TOTL.ZG?format=json&per_page=1`)).json();if(lt&&lt[1]&&lt[1][0]&&lt[1][0].value){const mt=lt[1][0].value;ae(mt.toFixed(2)),ce.success(`Inflation rate synced for ${o.currency}`)}}catch(ze){console.error(\"Inflation sync failed:\",ze),ce.error(\"Failed to sync inflation rate.\")}finally{D(!1)}},q=Array.from({length:(parseInt(k)||0)+1},(fe,Se)=>{const ze=parseFloat(ge)||0,lt=parseFloat(Q)||0,mt=ze*Math.pow(1+lt/100,Se),_a=ze/Math.pow(1+lt/100,Se);return{year:Se,futureCost:Math.round(mt),purchasingPower:Math.round(_a)}}),Y=[\"INR\",\"USD\",\"EUR\",\"GBP\",\"AED\",\"SAR\"],V=o.currency;x.useEffect(()=>{N(o.name||\"\"),S(o.photoURL||\"\")},[o]),x.useEffect(()=>{i&&te()},[i,J]);const te=async()=>{try{const Se=await(await fetch(`https://api.exchangerate-api.com/v4/latest/${J}`)).json();C(Se.rates||{}),F&&me(F,Se.rates)}catch(fe){console.error(\"Error loading exchange rates:\",fe)}},me=(fe,Se)=>{const ze=parseFloat(fe);if(!isNaN(ze)&&ze>0){const mt=(Se||T)[V]||1;A(ze*mt)}else A(null)},ie=fe=>{oe(fe),me(fe)},{setTheme:le}=wj();x.useEffect(()=>{o.theme!==\"dark\"&&(le(\"dark\"),u({theme:\"dark\"}))},[]);const je=()=>{u({name:g,photoURL:E}),f(!1)},Ae=fe=>{const Se=fe.target.files?.[0];if(Se){const ze=new FileReader;ze.onloadend=()=>{S(ze.result)},ze.readAsDataURL(Se)}},pe=U1(),ve=new Set(o.unlockedAchievements),xe=o.aiProvider||\"openai\",Ke=[{id:\"openai\",label:\"OpenAI\",placeholder:\"sk-...\"},{id:\"anthropic\",label:\"Anthropic\",placeholder:\"sk-ant-...\"},{id:\"gemini\",label:\"Gemini\",placeholder:\"AIza...\"},{id:\"deepseek\",label:\"Deepseek\",placeholder:\"sk-...\"},{id:\"perplexity\",label:\"Perplexity\",placeholder:\"pplx-...\"}],[We,Ue]=x.useState(!1),[it,Ve]=x.useState(null),ke=x.useCallback((fe,Se)=>{u({[fe]:Se})},[u]),Ft=async()=>{const fe=al(xe,o);if(!fe){ce.error(\"No API key found in Settings or System Environment\");return}Ue(!0),Ve(null);try{const Se=await eN(xe,fe);Se.error?(Ve({success:!1,message:Se.error}),ce.error(`Connection failed: ${Se.error}`)):(Ve({success:!0,message:\"Neural link established.\"}),ce.success(\"Connection successful!\"))}catch(Se){const ze=Se.message||\"Unknown error\";console.error(\"Settings save error:\",Se),ce.error(`${at.common.status.error}: ${ze}`)}finally{Ue(!1)}};return n.jsx(kp,{open:i,onOpenChange:l,children:n.jsxs(Dp,{side:\"left\",className:\"w-full sm:max-w-lg overflow-y-auto px-0 bg-slate-950 border-white/5 text-slate-100 h-dvh\",children:[n.jsx(Mp,{className:\"sr-only\",children:\"Settings\"}),n.jsx(_p,{className:\"sr-only\",children:\"Customize your FinHub core experience.\"}),n.jsxs(\"div\",{className:\"space-y-12 animate-in fade-in slide-in-from-left-4 duration-500 px-8 pt-12 pb-10 text-white relative\",children:[n.jsx(\"div\",{className:\"absolute top-4 right-4 z-20\",children:n.jsx(Re,{variant:\"ghost\",size:\"icon\",onClick:l,className:\"w-10 h-10 rounded-full bg-white/5 text-slate-400 hover:text-white hover:bg-white/10\",children:n.jsx(il,{className:\"w-5 h-5\"})})}),n.jsxs(\"div\",{className:\"flex flex-col gap-2\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-1.5 h-8 bg-indigo-500 rounded-full shadow-[0_0_15px_rgba(99,102,241,0.5)]\"}),n.jsx(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tight leading-none text-white\",children:\"System Config\"})]}),n.jsx(\"p\",{className:\"text-slate-500 font-bold ml-4 text-sm\",children:\"Customize your FinHub core experience.\"})]}),n.jsxs(\"div\",{className:\"space-y-10\",children:[n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"h3\",{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Su,{className:\"w-3.5 h-3.5\"}),\"User Identity\"]}),n.jsx(Re,{variant:\"ghost\",size:\"sm\",onClick:()=>f(!p),className:\"text-[10px] font-black uppercase tracking-widest text-indigo-400 hover:text-indigo-300 hover:bg-white/5\",children:p?\"Abort\":\"Refine\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-8 bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-indigo-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsxs(\"div\",{className:\"relative\",children:[E?n.jsx(\"img\",{src:E,alt:\"Profile\",className:\"w-24 h-24 rounded-full object-cover border-4 border-slate-800 shadow-2xl\"}):n.jsx(\"div\",{className:\"w-24 h-24 bg-gradient-to-br from-indigo-600 to-purple-700 rounded-full flex items-center justify-center shadow-2xl\",children:n.jsx(Su,{className:\"w-12 h-12 text-white/90\"})}),p&&n.jsxs(\"label\",{className:\"absolute bottom-0 right-0 w-9 h-9 bg-indigo-600 rounded-full flex items-center justify-center cursor-pointer hover:bg-indigo-500 shadow-lg border-4 border-slate-900 transition-transform active:scale-90\",children:[n.jsx(ry,{className:\"w-4 h-4 text-white\"}),n.jsx(\"input\",{type:\"file\",accept:\"image/*\",className:\"hidden\",onChange:Ae,\"aria-label\":\"Upload profile picture\"})]})]}),n.jsx(\"div\",{className:\"flex-1 min-w-0\",children:p?n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(ye,{htmlFor:\"settings-profile-name\",className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Alias\"}),n.jsx(wt,{id:\"settings-profile-name\",name:\"name\",placeholder:\"e.g. Maverick\",value:g,onChange:fe=>N(fe.target.value),className:\"bg-white/5 border-white/5 rounded-xl h-12 text-white placeholder:text-slate-700 font-bold\",autoComplete:\"name\"})]}),n.jsx(Re,{size:\"sm\",onClick:je,className:\"w-full h-12 bg-indigo-600 hover:bg-indigo-500 text-white font-black rounded-xl\",children:\"Commit Identity\"})]}):n.jsxs(n.Fragment,{children:[n.jsx(\"h4\",{className:\"text-2xl font-black text-slate-100 tracking-tight\",children:g||\"Guest User\"}),n.jsx(\"p\",{className:\"text-xs text-slate-500 font-bold uppercase tracking-widest mt-1\",children:\"FinHub Node // 0x50.3\"})]})})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsx(\"div\",{className:\"space-y-4\",children:n.jsxs(\"button\",{onClick:()=>u({roundUpEnabled:!o.roundUpEnabled}),className:`w-full flex items-center justify-between p-6 rounded-[32px] border transition-all relative overflow-hidden group ${o.roundUpEnabled?\"bg-emerald-500/10 border-emerald-500/50 shadow-[0_0_20px_rgba(16,185,129,0.1)]\":\"bg-slate-900/40 border-white/5 grayscale opacity-60 hover:opacity-100 hover:grayscale-0\"}`,children:[n.jsx(\"div\",{className:`absolute top-0 right-0 w-24 h-24 blur-3xl opacity-10 -mr-12 -mt-12 transition-colors ${o.roundUpEnabled?\"bg-emerald-500\":\"bg-slate-500\"}`}),n.jsxs(\"div\",{className:\"space-y-1 relative z-10 flex-1 pr-4 text-left\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-2 text-sm font-black text-slate-100 uppercase tracking-tight\",children:[n.jsx(qn,{className:`w-4 h-4 ${o.roundUpEnabled?\"text-emerald-500\":\"text-slate-500\"}`}),\"Virtual Round-Ups\"]}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 font-bold leading-relaxed uppercase tracking-widest\",children:\"Build your fortress automatically via expense spillover.\"})]}),n.jsx(\"div\",{className:`relative z-10 px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${o.roundUpEnabled?\"bg-emerald-500 text-white shadow-lg shadow-emerald-500/20\":\"bg-slate-800 text-slate-500\"}`,children:o.roundUpEnabled?\"Active\":\"Offline\"})]})}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(ye,{htmlFor:\"settings-currency\",className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Gh,{className:\"w-3.5 h-3.5\"}),\"Standard Denomination\"]}),n.jsxs(\"div\",{className:\"bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-indigo-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsx(\"div\",{className:\"space-y-2 relative z-10\",children:n.jsxs(Ut,{value:o.currency,onValueChange:fe=>u({currency:fe}),children:[n.jsx(Bt,{id:\"settings-currency\",name:\"currency\",className:\"bg-white/5 border-white/5 rounded-2xl h-14 font-black\",children:n.jsx(It,{})}),n.jsxs(qt,{className:\"bg-slate-900 border-white/10 text-white\",children:[n.jsx(qe,{value:\"USD\",children:\"USD ($) - US Dollar\"}),n.jsx(qe,{value:\"EUR\",children:\"EUR (€) - Euro\"}),n.jsx(qe,{value:\"GBP\",children:\"GBP (£) - British Pound\"}),n.jsx(qe,{value:\"INR\",children:\"INR (₹) - Indian Rupee\"}),n.jsx(qe,{value:\"AED\",children:\"AED (د.إ) - UAE Dirham\"}),n.jsx(qe,{value:\"SAR\",children:\"SAR (﷼) - Saudi Riyal\"})]})]})})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(ye,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Gh,{className:\"w-3.5 h-3.5\"}),\"Foreign Exchange Probe\"]}),n.jsxs(\"div\",{className:\"space-y-6 p-6 bg-slate-900/40 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-blue-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4 relative z-10\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(ye,{htmlFor:\"converter-from-currency\",className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Source\"}),n.jsxs(Ut,{value:J,onValueChange:fe=>{ne(fe)},children:[n.jsx(Bt,{id:\"converter-from-currency\",name:\"fromCurrency\",className:\"bg-white/5 border-white/5 rounded-2xl h-12\",children:n.jsx(It,{})}),n.jsx(qt,{className:\"bg-slate-900 border-white/10 text-white\",children:Y.map(fe=>n.jsxs(qe,{value:fe,children:[dn[fe],\" \",fe]},fe))})]})]}),n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(ye,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Target\"}),n.jsxs(\"div\",{className:\"h-12 flex items-center justify-center bg-indigo-500/10 rounded-2xl border border-indigo-500/20 text-xs font-black text-indigo-400\",children:[dn[V],\" \",V]})]})]}),n.jsxs(\"div\",{className:\"space-y-1.5 relative z-10\",children:[n.jsx(ye,{htmlFor:\"converter-amount\",className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Capital Amount\"}),n.jsx(wt,{id:\"converter-amount\",name:\"amount\",type:\"number\",placeholder:\"Enter amount\",value:F,onChange:fe=>{const Se=fe.target.value;parseFloat(Se)<0||ie(Se)},min:\"0\",className:\"bg-white/5 border-white/5 rounded-2xl h-14 font-black text-lg\",autoComplete:\"off\"})]}),w!==null&&n.jsxs(\"div\",{className:\"p-6 bg-white/5 rounded-2xl border border-white/5 animate-in fade-in slide-in-from-top-2 relative z-10\",children:[n.jsx(\"p\",{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 mb-2\",children:\"Calculated Projection\"}),n.jsxs(\"div\",{className:\"flex items-baseline gap-2\",children:[n.jsxs(\"p\",{className:\"text-2xl font-black text-emerald-400 tabular-nums\",children:[dn[V],w.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold uppercase tracking-widest\",children:\"ESTIMATED VALUATION\"})]}),T[V]&&n.jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-white/5 flex items-center justify-between\",children:[n.jsx(\"span\",{className:\"text-[8px] font-black uppercase tracking-[0.2em] text-slate-700\",children:\"Interest Rate\"}),n.jsxs(\"span\",{className:\"text-[10px] font-black text-slate-500 tabular-nums\",children:[\"1 \",J,\" = \",T[V].toFixed(4),\" \",V]})]})]})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(ye,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(qn,{className:\"w-3.5 h-3.5 text-rose-500\"}),\"Inflation Projection Node\"]}),n.jsxs(\"div\",{className:\"space-y-6 p-6 bg-slate-900/40 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-rose-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsxs(\"div\",{className:\"space-y-4 relative z-10\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(ye,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Current Capital\"}),n.jsx(wt,{type:\"number\",value:ge,onChange:fe=>O(fe.target.value),className:\"bg-white/5 border-white/5 rounded-2xl h-12 font-black\",placeholder:\"e.g. 1000000\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(ye,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Horizon (Years)\"}),n.jsx(wt,{type:\"number\",value:k,onChange:fe=>U(fe.target.value),className:\"bg-white/5 border-white/5 rounded-2xl h-12 font-black\"})]}),n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between ml-1\",children:[n.jsx(ye,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500\",children:\"Rate (%)\"}),n.jsxs(\"button\",{onClick:W,disabled:v,className:\"text-[8px] font-black uppercase text-indigo-400 hover:text-indigo-300 disabled:opacity-50 flex items-center gap-1\",children:[v?n.jsx(Xc,{className:\"w-2 h-2 animate-spin\"}):n.jsx(oy,{className:\"w-2 h-2\"}),\"Sync\"]})]}),n.jsx(wt,{type:\"number\",value:Q,onChange:fe=>ae(fe.target.value),className:\"bg-white/5 border-white/5 rounded-2xl h-12 font-black\"})]})]}),ge&&n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(\"div\",{className:\"h-32 w-full bg-black/20 rounded-2xl p-2 border border-white/5 overflow-hidden\",children:n.jsx(mv,{width:\"100%\",height:\"100%\",minHeight:128,minWidth:100,children:n.jsxs(hv,{data:q,children:[n.jsxs(\"defs\",{children:[n.jsxs(\"linearGradient\",{id:\"colorCost\",x1:\"0\",y1:\"0\",x2:\"0\",y2:\"1\",children:[n.jsx(\"stop\",{offset:\"5%\",stopColor:\"#FB7185\",stopOpacity:.3}),n.jsx(\"stop\",{offset:\"95%\",stopColor:\"#FB7185\",stopOpacity:0})]}),n.jsxs(\"linearGradient\",{id:\"colorPower\",x1:\"0\",y1:\"0\",x2:\"0\",y2:\"1\",children:[n.jsx(\"stop\",{offset:\"5%\",stopColor:\"#34D399\",stopOpacity:.3}),n.jsx(\"stop\",{offset:\"95%\",stopColor:\"#34D399\",stopOpacity:0})]})]}),n.jsx(pv,{strokeDasharray:\"3 3\",vertical:!1,stroke:\"rgba(255,255,255,0.05)\"}),n.jsx(gv,{contentStyle:{backgroundColor:\"#0f172a\",border:\"1px solid rgba(255,255,255,0.1)\",borderRadius:\"8px\",fontSize:\"10px\"},itemStyle:{color:\"#fff\",padding:\"2px 0\"}}),n.jsx(Xh,{type:\"monotone\",dataKey:\"futureCost\",stroke:\"#FB7185\",fillOpacity:1,fill:\"url(#colorCost)\"}),n.jsx(Xh,{type:\"monotone\",dataKey:\"purchasingPower\",stroke:\"#34D399\",fillOpacity:1,fill:\"url(#colorPower)\"})]})})}),n.jsxs(\"div\",{className:\"p-6 bg-white/5 rounded-2xl border border-white/5 space-y-4\",children:[n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 mb-2\",children:\"Future Cost\"}),n.jsxs(\"p\",{className:\"text-xl font-black text-rose-400 tabular-nums\",children:[dn[o.currency],Math.round(parseFloat(ge)*Math.pow(1+parseFloat(Q)/100,parseFloat(k))).toLocaleString()]})]}),n.jsxs(\"div\",{className:\"pt-4 border-t border-white/5\",children:[n.jsx(\"p\",{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 mb-2\",children:\"Real Purchasing Power\"}),n.jsxs(\"p\",{className:\"text-xl font-black text-emerald-400 tabular-nums\",children:[dn[o.currency],Math.round(parseFloat(ge)/Math.pow(1+parseFloat(Q)/100,parseFloat(k))).toLocaleString()]}),n.jsx(\"p\",{className:\"text-[8px] text-slate-600 font-bold uppercase tracking-widest mt-1\",children:\"VALUATION IN TODAY'S MONEY\"})]})]})]})]})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(ye,{className:\"text-[10px] font-bold uppercase tracking-[0.2em] text-slate-500 flex items-center gap-2\",children:[n.jsx(cy,{className:\"w-3.5 h-3.5 text-indigo-400\"}),\"AI Assistant Config\"]}),n.jsxs(\"div\",{className:\"space-y-6 bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsxs(\"div\",{className:\"space-y-1.5 relative z-10\",children:[n.jsx(ye,{htmlFor:\"ai-provider-select\",className:\"text-[9px] font-bold uppercase tracking-widest text-slate-500 ml-1\",children:\"Preferred Provider\"}),n.jsxs(Ut,{value:xe,onValueChange:fe=>u({aiProvider:fe}),children:[n.jsx(Bt,{id:\"ai-provider-select\",name:\"aiProvider\",className:\"bg-slate-900 border-white/5 rounded-xl h-11 text-[10px] font-bold uppercase tracking-widest\",children:n.jsx(It,{})}),n.jsx(qt,{className:\"bg-slate-900 border-white/10 text-white\",children:Ke.map(fe=>n.jsx(qe,{value:fe.id,className:\"text-[10px] font-bold uppercase tracking-widest\",children:fe.label},fe.id))})]})]}),n.jsxs(\"div\",{className:\"space-y-4 pt-2 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between px-1\",children:[n.jsx(ye,{className:\"text-[9px] font-bold uppercase tracking-widest text-slate-500\",children:\"Active Credential\"}),n.jsx(\"div\",{className:\"flex items-center gap-1.5\",children:n.jsx(\"span\",{className:\"text-[8px] font-bold text-indigo-400/70 uppercase tracking-tighter\",children:Ke.find(fe=>fe.id===xe)?.label})})]}),Ke.filter(fe=>fe.id===xe).map(fe=>{const Se=o.apiKeys?.[fe.id],ze=`VITE_${fe.id.toUpperCase()}_API_KEY`,lt=!!_0[ze];return n.jsxs(\"div\",{className:\"flex items-center gap-3 bg-indigo-500/5 p-4 rounded-2xl border border-indigo-500/20 group/active transition-all\",children:[n.jsx(\"div\",{className:\"flex-1 min-w-0\",children:n.jsxs(\"div\",{className:\"relative group/input\",children:[n.jsx(wt,{type:\"password\",value:Se||\"\",onChange:mt=>ke(\"apiKeys\",{...o.apiKeys,[fe.id]:mt.target.value}),placeholder:lt?\"Using System Environment Key\":`Enter ${fe.label} Key`,className:`bg-transparent border-none p-0 h-auto text-sm font-bold text-white placeholder:text-slate-700 focus-visible:ring-0 shadow-none ${lt&&!Se?\"opacity-40 italic font-medium\":\"\"}`,disabled:lt&&!Se}),lt&&!Se&&n.jsx(\"div\",{className:\"flex items-center gap-1 mt-1\",children:n.jsx(\"span\",{className:\"text-[7px] font-black text-emerald-500 uppercase tracking-widest bg-emerald-500/10 px-1 py-0.5 rounded\",children:\"System Linked\"})})]})}),Se&&n.jsx(\"button\",{onClick:()=>ke(\"apiKeys\",{...o.apiKeys,[fe.id]:\"\"}),className:\"text-slate-600 hover:text-rose-500 transition-colors p-1\",title:\"Clear saved key\",\"aria-label\":`Clear saved key for ${fe.label}`,children:n.jsx(tl,{className:\"w-3.5 h-3.5\"})})]},fe.id)}),n.jsx(Re,{onClick:Ft,disabled:We||!al(xe,o),className:`w-full h-11 transition-all font-bold uppercase tracking-[0.2em] text-[10px] rounded-xl ${it?.success?\"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20\":it?.success===!1?\"bg-rose-500/10 text-rose-400 border border-rose-500/20\":\"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20\"}`,children:We?n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(Xc,{className:\"w-3.5 h-3.5 animate-spin\"}),\"Verifying...\"]}):it?.success?n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(Cu,{className:\"w-3.5 h-3.5\"}),\"Link Stable\"]}):\"Validate Connection\"})]}),n.jsxs(Tj,{className:\"relative z-10\",children:[n.jsx(Dj,{asChild:!0,children:n.jsxs(Re,{variant:\"ghost\",className:\"w-full h-8 hover:bg-white/5 text-slate-500 hover:text-slate-300 text-[8px] font-bold uppercase tracking-widest group/trigger flex items-center justify-between px-2 rounded-lg\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(uy,{className:\"w-3 h-3 text-slate-600 group-hover/trigger:text-slate-400\"}),\"Alternative Nodes\"]}),n.jsx(nl,{className:\"w-3 h-3 transition-transform duration-300 group-data-[state=open]/trigger:rotate-180\"})]})}),n.jsx(Mj,{className:\"pt-4 space-y-3 animate-in fade-in slide-in-from-top-2 duration-300\",children:n.jsx(\"div\",{className:\"grid gap-2\",children:Ke.filter(fe=>fe.id!==xe).map(fe=>{const Se=o.apiKeys?.[fe.id],ze=`VITE_${fe.id.toUpperCase()}_API_KEY`,lt=!!_0[ze];return n.jsxs(\"div\",{className:\"flex items-center gap-3 bg-slate-950/40 p-3 rounded-xl border border-white/5 hover:border-white/10 transition-colors\",children:[n.jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between mb-1\",children:[n.jsx(\"span\",{className:\"text-[8px] font-bold uppercase tracking-wider text-slate-500\",children:fe.label}),lt&&!Se&&n.jsx(\"span\",{className:\"text-[7px] font-bold text-emerald-500/50 uppercase tracking-tighter\",children:\"System\"})]}),n.jsx(wt,{type:\"password\",value:Se||\"\",onChange:mt=>ke(\"apiKeys\",{...o.apiKeys,[fe.id]:mt.target.value}),placeholder:lt?\"Using System Default\":\"Key not found\",className:\"bg-transparent border-none p-0 h-auto text-[10px] text-slate-400 placeholder:text-slate-800 focus-visible:ring-0 shadow-none italic font-medium cursor-not-allowed\",disabled:lt&&!Se})]}),Se&&n.jsx(\"button\",{onClick:()=>ke(\"apiKeys\",{...o.apiKeys,[fe.id]:\"\"}),className:\"text-slate-800 hover:text-rose-500 transition-colors p-1\",title:\"Clear saved key\",\"aria-label\":`Clear saved key for ${fe.label}`,children:n.jsx(tl,{className:\"w-3 h-3\"})})]},fe.id)})})})]})]})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(ye,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Qc,{className:\"w-3.5 h-3.5 text-indigo-400\"}),\"Data Optimization Node\"]}),n.jsxs(\"div\",{className:\"p-6 bg-slate-900/40 rounded-[32px] border border-white/5 relative overflow-hidden\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-300\",children:at.settings.subscriptionScanner}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-wide mt-1\",children:\"DETECT & MIGRATE RECURRING SIGNALS\"})]}),n.jsx(Re,{onClick:B,disabled:M,className:\"bg-indigo-600 hover:bg-indigo-500 text-white font-black uppercase tracking-widest text-[9px] h-9 px-4 rounded-xl shadow-lg shadow-indigo-500/20\",children:M?n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(Xc,{className:\"w-3 h-3 animate-spin\"}),\"Scanning...\"]}):\"Execute Scan\"})]}),n.jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-white/5 flex items-center justify-between\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-300\",children:\"Redundancy Purge\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-wide mt-1\",children:\"REMOVE BLANK & DUPLICATE ENTRIES\"})]}),n.jsx(Re,{onClick:async()=>{const fe=ce.loading(\"Purging duplicates...\");try{const Se=await G();ce.dismiss(fe)}catch{ce.dismiss(fe),ce.error(\"Purge failed\")}},className:\"bg-rose-500/10 hover:bg-rose-500/20 text-rose-400 border border-rose-500/20 font-black uppercase tracking-widest text-[9px] h-9 px-4 rounded-xl\",children:at.settings.cleanupDuplicates})]})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(ye,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(dy,{className:\"w-3.5 h-3.5 text-amber-500\"}),at.settings.achievementLevel,\" (\",o.unlockedAchievements.length,\"/\",pe.length,\")\"]}),n.jsx(\"div\",{className:\"grid grid-cols-4 sm:grid-cols-6 gap-3\",children:pe.map(fe=>{const Se=ve.has(fe.id);return n.jsx(\"button\",{onClick:()=>{Se&&d&&d(fe.id)},disabled:!Se,className:`w-12 h-12 rounded-xl border flex items-center justify-center text-xl transition-all ${Se?\"border-amber-500/50 bg-amber-500/10 grayscale-0 hover:scale-110 hover:shadow-lg hover:shadow-amber-500/20 active:scale-95\":\"border-white/5 bg-white/5 grayscale opacity-20 cursor-not-allowed\"}`,children:fe.icon},fe.id)})}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 font-bold text-center leading-relaxed\",children:o.unlockedAchievements.length>0?at.settings.achievementSelect:at.settings.achievementLocked})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsx(\"div\",{className:\"space-y-4\",children:n.jsxs(\"div\",{className:\"p-4 bg-rose-500/5 border border-rose-500/10 rounded-2xl flex items-center justify-between\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"text-[10px] font-black uppercase tracking-widest text-rose-400\",children:at.settings.factoryReset}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-wide mt-1\",children:at.settings.wipeDescription})]}),n.jsx(Re,{onClick:async()=>{confirm(\"Are you sure? This deletes ALL transaction data.\")&&await ee()},className:\"bg-slate-950 hover:bg-rose-500 text-rose-500 hover:text-white border border-rose-500/20 font-black uppercase tracking-widest text-[9px] h-9 px-4 rounded-xl transition-colors\",children:at.settings.wipeData})]})}),n.jsx(_j,{className:\"bg-white/5\"}),n.jsxs(\"div\",{className:\"text-center pt-8 space-y-2 opacity-40 hover:opacity-100 transition-opacity duration-700 pb-10\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-[0.5em] text-slate-100\",children:\"Obsidian System Node\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-widest\",children:\"Architect: Sijo Joseph // BUILD 50.3.0 // QUANTUM CORE\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-700 uppercase tracking-widest mt-4\",children:\"© 2025 NEURAL FINHUB FABRIC\"}),n.jsxs(\"button\",{onClick:h,className:\"mt-4 text-[8px] font-black text-indigo-400/60 hover:text-indigo-400 uppercase tracking-[0.2em] transition-colors\",children:[\"[ \",at.settings.about,\" ]\"]})]}),n.jsxs(\"div\",{className:\"px-2 pb-10\",children:[n.jsxs(Re,{variant:\"outline\",onClick:()=>{L(),l()},className:\"w-full h-14 bg-white/5 hover:bg-white/10 border-white/10 hover:border-white/20 text-white/60 hover:text-white font-black uppercase tracking-widest gap-3 rounded-[24px] transition-all group mb-4\",children:[n.jsx(fy,{className:\"w-5 h-5 group-hover:-translate-x-1 transition-transform\"}),\"Terminate Session\"]}),n.jsxs(Rp,{open:Z,onOpenChange:_,children:[n.jsx(Rj,{asChild:!0,children:n.jsxs(Re,{variant:\"outline\",className:\"w-full h-14 bg-rose-500/5 hover:bg-rose-500/10 border-rose-500/20 hover:border-rose-500/40 text-rose-500 font-black uppercase tracking-widest gap-3 rounded-[24px] transition-all group\",children:[n.jsx(Qc,{className:\"w-5 h-5 group-hover:scale-110 transition-transform\"}),\"Delete Account & Data\"]})}),n.jsxs(Op,{className:\"bg-slate-950 border-white/10 text-white rounded-[32px] p-8\",children:[n.jsxs(zp,{children:[n.jsxs(Up,{className:\"text-2xl font-black tracking-tight flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"p-2 rounded-full bg-rose-500/20 text-rose-500\",children:n.jsx(Qc,{className:\"w-6 h-6\"})}),\"Irreversible Action?\"]}),n.jsxs(Ip,{className:\"text-slate-400 font-medium leading-relaxed mt-4\",children:[\"Your account will be \",n.jsx(\"span\",{className:\"text-white font-bold italic\",children:\"deactivated immediately\"}),\" and scheduled for permanent deletion in \",n.jsx(\"span\",{className:\"text-white font-bold\",children:\"30 days\"}),\".\",n.jsx(\"br\",{}),n.jsx(\"br\",{}),\"Log in anytime before then to cancel this request and restore your data node.\"]})]}),n.jsxs(Lp,{className:\"mt-8 gap-3\",children:[n.jsx(qp,{className:\"h-14 flex-1 rounded-2xl bg-white/5 border-white/10 text-slate-400 hover:bg-white/10 hover:text-white font-black uppercase tracking-widest transition-all\",children:\"Abort\"}),n.jsx(Bp,{onClick:async()=>{await z(),l()},className:\"h-14 flex-1 rounded-2xl bg-rose-600 hover:bg-rose-500 text-white font-black uppercase tracking-widest shadow-lg shadow-rose-500/20 transition-all active:scale-95\",children:\"Confirm Purge\"})]})]})]})]})]})]})})};function nN({onNavigate:i,onOpenSettings:l,onOpenNotifications:o,emergencyFundAmount:u,bankAccountsCount:d,cardsCount:h,currency:g,onOpenAbout:N}){return n.jsxs(\"div\",{className:\"space-y-12 animate-in fade-in slide-in-from-bottom-4 duration-700 px-4 pb-20\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tight leading-none mb-3\",children:\"Settings & Assets\"}),n.jsx(\"p\",{className:\"text-slate-500 font-bold max-w-md\",children:\"Configure your financial universe and manage core system components.\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[n.jsxs(Ot,{className:\"p-8 cursor-pointer bg-black border-white/5 sq-2xl border hover:bg-white/5 transition-all duration-300 group relative overflow-hidden\",onClick:()=>i(\"emergency\"),children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-blue-500 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20\"}),n.jsxs(\"div\",{className:\"relative z-10\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-blue-500/10 border border-blue-500/20 sq-md flex items-center justify-center text-blue-400 mb-8 group-hover:scale-110 transition-transform duration-500\",children:n.jsx(sl,{className:\"w-8 h-8\"})}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100\",children:\"Emergency Fund\"}),n.jsx(\"p\",{className:\"text-2xl font-black tabular-nums text-blue-400\",children:Ne(u,g)})]}),n.jsxs(\"div\",{className:\"mt-8 flex items-center justify-between text-slate-500\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest\",children:\"Financial Safety Net\"}),n.jsx(Ps,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]})]})]}),n.jsxs(Ot,{className:\"p-8 cursor-pointer bg-black border-white/5 sq-2xl border hover:bg-white/5 transition-all duration-300 group relative overflow-hidden\",onClick:()=>i(\"accounts\"),children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-emerald-500 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20\"}),n.jsxs(\"div\",{className:\"relative z-10\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-emerald-500/10 border border-emerald-500/20 sq-md flex items-center justify-center text-emerald-400 mb-8 group-hover:scale-110 transition-transform duration-500\",children:n.jsx(J0,{className:\"w-8 h-8\"})}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100\",children:\"Accounts & Cards\"}),n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsxs(\"div\",{className:\"space-y-0.5\",children:[n.jsx(\"p\",{className:\"text-2xl font-black tabular-nums text-emerald-400\",children:d}),n.jsx(\"p\",{className:\"text-[10px] font-bold text-slate-600 uppercase tracking-wider\",children:\"Banks\"})]}),n.jsx(\"div\",{className:\"w-px h-8 bg-white/5 self-center mt-2\"}),n.jsxs(\"div\",{className:\"space-y-0.5\",children:[n.jsx(\"p\",{className:\"text-2xl font-black tabular-nums text-emerald-400\",children:h}),n.jsx(\"p\",{className:\"text-[10px] font-bold text-slate-600 uppercase tracking-wider\",children:\"Cards\"})]})]})]}),n.jsxs(\"div\",{className:\"mt-8 flex items-center justify-between text-slate-500\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest\",children:\"Manage Liquidity\"}),n.jsx(Ps,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]})]})]})]}),n.jsxs(\"div\",{className:\"pt-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 mb-8\",children:[n.jsx(\"div\",{className:\"w-1.5 h-6 bg-slate-700 rounded-full\"}),n.jsx(\"h3\",{className:\"text-xs font-black uppercase tracking-[0.3em] text-slate-600\",children:\"System Configuration\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 gap-4\",children:[n.jsx(Ot,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group\",onClick:l,children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400 group-hover:text-white transition-colors\",children:n.jsx(my,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"App Settings\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"Preferences & Display\"})]})]}),n.jsx(Ps,{className:\"w-5 h-5 text-slate-700 group-hover:text-slate-400 transition-colors\"})]})}),n.jsx(Ot,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group\",onClick:o,children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400 group-hover:text-white transition-colors\",children:n.jsx(Lu,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"Alert Center\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"System Notifications\"})]})]}),n.jsx(Ps,{className:\"w-5 h-5 text-slate-700 group-hover:text-slate-400 transition-colors\"})]})}),n.jsx(Ot,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group opacity-60 hover:opacity-100\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400\",children:n.jsx(hy,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"Support\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"Documentation & Help\"})]})]}),n.jsx(Ps,{className:\"w-5 h-5 text-slate-700 transition-colors\"})]})}),n.jsx(Ot,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group opacity-60 hover:opacity-100\",onClick:N,children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400\",children:n.jsx(py,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"About\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"Version 5.0 Stable Release\"})]})]}),n.jsx(Ps,{className:\"w-5 h-5 text-slate-700 transition-colors\"})]})})]})]}),n.jsxs(\"div\",{className:\"text-center pt-8 border-t border-white/5\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-[0.5em] text-slate-700 mb-1\",children:\"FinHub Obsidian System\"}),n.jsx(\"p\",{className:\"text-[9px] font-bold text-slate-800\",children:\"BUILD 50.3.0 // QUANTUM CORE\"})]})]})}function sN({className:i,children:l,...o}){return n.jsxs(gy,{\"data-slot\":\"scroll-area\",className:De(\"relative\",i),...o,children:[n.jsx(xy,{\"data-slot\":\"scroll-area-viewport\",className:\"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1\",children:l}),n.jsx(iN,{}),n.jsx(by,{})]})}function iN({className:i,orientation:l=\"vertical\",...o}){return n.jsx(yy,{\"data-slot\":\"scroll-area-scrollbar\",orientation:l,className:De(\"flex touch-none p-px transition-colors select-none\",l===\"vertical\"&&\"h-full w-2.5 border-l border-l-transparent\",l===\"horizontal\"&&\"h-2.5 flex-col border-t border-t-transparent\",i),...o,children:n.jsx(vy,{\"data-slot\":\"scroll-area-thumb\",className:\"bg-border relative flex-1 rounded-full\"})})}function lN({isOpen:i,onClose:l,notifications:o,onNotificationClick:u,onMarkAsRead:d,onClearRead:h}){const g=o.filter(C=>!C.read).length,N=o.filter(C=>C.read).length,E=C=>{switch(C){case\"achievement\":return n.jsx(jy,{className:\"w-5 h-5 text-yellow-500\"});case\"goal\":return n.jsx(Hn,{className:\"w-5 h-5 text-green-500\"});case\"insight\":return n.jsx(qn,{className:\"w-5 h-5 text-blue-500\"});case\"alert\":return n.jsx(el,{className:\"w-5 h-5 text-red-500\"});case\"reminder\":return n.jsx(Nu,{className:\"w-5 h-5 text-indigo-500\"})}},S=C=>{const M=new Date(C),L=new Date().getTime()-M.getTime(),z=Math.floor(L/6e4),j=Math.floor(L/36e5),G=Math.floor(L/864e5);return z<60?`${z}m ago`:j<24?`${j}h ago`:`${G}d ago`},[p,f]=x.useState({reminders:!0,transactions:!0,achievements:!1,insights:!1}),w=C=>{f(M=>({...M,[C]:!M[C]}))},A=[\"reminders\",\"transactions\",\"insights\",\"achievements\"],T=o.reduce((C,M)=>{const y=M.category||\"insights\";return C[y]||(C[y]=[]),C[y].push(M),C},{});return Object.keys(T).forEach(C=>{T[C].sort((M,y)=>M.read!==y.read?M.read?1:-1:new Date(y.timestamp).getTime()-new Date(M.timestamp).getTime())}),n.jsx(kp,{open:i,onOpenChange:l,children:n.jsxs(Dp,{side:\"right\",className:\"w-full sm:max-w-lg p-0 flex flex-col h-dvh max-h-dvh bg-black border-white/5 text-slate-100 overflow-hidden z-[99999]\",children:[n.jsx(Mp,{className:\"sr-only\",children:\"Notifications\"}),n.jsx(_p,{className:\"sr-only\",children:\"Notifications\"}),n.jsxs(\"div\",{className:\"px-8 pt-28 pb-10 border-b border-white/5 bg-black relative overflow-hidden animate-in fade-in slide-in-from-right-4 duration-500\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-48 h-48 bg-indigo-500 blur-[120px] opacity-10 -mr-24 -mt-24\"}),n.jsx(\"div\",{className:\"absolute bottom-0 left-0 w-24 h-24 bg-blue-500 blur-[80px] opacity-5 -ml-12 -mb-12\"}),n.jsx(\"div\",{className:\"absolute top-8 right-8 z-30\",children:n.jsx(Re,{variant:\"ghost\",size:\"icon\",onClick:l,className:\"w-10 h-10 sq-full bg-white/5 text-slate-400 hover:text-white hover:bg-white/10\",children:n.jsx(il,{className:\"w-5 h-5\"})})}),n.jsxs(\"div\",{className:\"flex items-center justify-between relative z-10\",children:[n.jsxs(\"div\",{className:\"flex flex-col gap-2\",children:[n.jsx(\"div\",{className:\"flex items-center gap-4\",children:n.jsxs(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tighter leading-none flex items-center gap-4\",children:[\"Pulse\",g>0&&n.jsx(\"span\",{className:\"flex items-center justify-center min-w-[24px] h-6 px-2 text-[10px] font-black bg-indigo-600 text-white sq-full shadow-[0_0_15px_rgba(79,70,229,0.4)]\",children:g})]})}),n.jsx(\"p\",{className:\"text-slate-500 font-black text-[10px] uppercase tracking-[0.3em] leading-none ml-0.5\",children:\"System Intelligence Stack\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[g>0&&n.jsx(Re,{variant:\"ghost\",size:\"icon\",title:\"Mark all as read\",onClick:()=>{o.forEach(C=>{C.read||d?.(C.id)})},className:\"w-11 h-11 sq-md bg-white/5 text-slate-400 hover:text-indigo-400 hover:bg-white/10 transition-all duration-300 border border-white/5 active:scale-90\",children:n.jsx(wy,{className:\"w-5 h-5\"})}),N>0&&n.jsx(Re,{variant:\"ghost\",size:\"icon\",title:\"Clear history\",onClick:()=>{confirm(`Clear ${N} notifications?`)&&h?.()},className:\"w-11 h-11 sq-md bg-white/5 text-slate-400 hover:text-rose-400 hover:bg-rose-500/10 transition-all duration-300 border border-white/5 active:scale-90\",children:n.jsx(tl,{className:\"w-5 h-5\"})})]})]})]}),n.jsx(sN,{className:\"flex-1 w-full bg-black overflow-hidden custom-scrollbar\",children:n.jsx(\"div\",{className:\"px-6 space-y-12 py-8 pb-32\",children:o.length===0?n.jsxs(\"div\",{className:\"text-center py-32 flex flex-col items-center animate-in fade-in zoom-in duration-700\",children:[n.jsxs(\"div\",{className:\"w-24 h-24 bg-white/5 border border-white/5 sq-2xl flex items-center justify-center text-slate-800 mb-8 shadow-inner relative group\",children:[n.jsx(\"div\",{className:\"absolute inset-0 bg-indigo-500/5 blur-2xl sq-full group-hover:bg-indigo-500/10 transition-colors\"}),n.jsx(Lu,{className:\"w-10 h-10 relative z-10\"})]}),n.jsx(\"h4\",{className:\"text-2xl font-black text-slate-100 mb-3 tracking-tight\",children:\"Signal Silence\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-black uppercase tracking-[0.3em] max-w-[260px] leading-relaxed\",children:\"No new notifications. We will alert you when there are updates.\"})]}):A.map(C=>{const M=T[C]||[];if(M.length===0)return null;const y=p[C],L=y?M.length:1,z=M.filter(j=>!j.read).length;return n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"button\",{onClick:()=>w(C),...y?{\"aria-expanded\":\"true\"}:{\"aria-expanded\":\"false\"},className:\"w-full flex items-center justify-between px-2 group\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-[0.4em] text-slate-500 group-hover:text-slate-300 transition-colors\",children:C}),z>0&&n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 sq-full animate-pulse shadow-[0_0_10px_rgba(99,102,241,0.6)]\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black text-slate-700\",children:M.length}),y?n.jsx(_r,{className:\"w-3 h-3 text-slate-700\"}):n.jsx(nl,{className:\"w-3 h-3 text-slate-700\"})]})]}),n.jsxs(\"div\",{className:\"space-y-3 relative\",children:[!y&&M.length>1&&n.jsxs(n.Fragment,{children:[n.jsx(\"div\",{className:\"absolute top-2 left-2 right-2 h-full bg-black/40 sq-xl -z-10 border border-white/5 translate-y-2 scale-[0.98]\"}),n.jsx(\"div\",{className:\"absolute top-4 left-4 right-4 h-full bg-black/20 sq-xl -z-20 border border-white/5 translate-y-4 scale-[0.96]\"})]}),M.slice(0,L).map((j,G)=>{const ee={style:{\"--anim-delay\":`${G*50}ms`,\"--z-index\":100-G}};return n.jsxs(\"div\",{...ee,className:`p-6 sq-xl border transition-all duration-500 group relative overflow-hidden cursor-pointer active:scale-[0.98] animate-in fade-in slide-in-from-right-4 fill-mode-both [animation-delay:var(--anim-delay)] z-[var(--z-index)] ${j.read?\"bg-black border-white/5\":\"bg-black border-indigo-500/30 shadow-lg shadow-indigo-500/5 hover:border-indigo-500/50\"}`,onClick:Z=>{Z.stopPropagation(),u?.(j),j.read||d?.(j.id)},children:[j.priority===\"high\"&&!j.read&&n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 bg-red-500 blur-[80px] opacity-10 -mr-16 -mt-16\"}),!j.read&&j.priority!==\"high\"&&n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 bg-indigo-500 blur-[80px] opacity-10 -mr-16 -mt-16 group-hover:opacity-20 transition-opacity\"}),n.jsxs(\"div\",{className:\"flex gap-4 relative z-10\",children:[n.jsx(\"div\",{className:`w-12 h-12 sq-md flex items-center justify-center shrink-0 border border-white/5 transition-all duration-500 ${j.read?\"bg-white/5 text-slate-600\":j.priority===\"high\"?\"bg-red-500/10 text-red-400\":\"bg-indigo-500/10 text-indigo-400 shadow-inner\"}`,children:E(j.type)}),n.jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[n.jsxs(\"div\",{className:\"flex items-start justify-between gap-4\",children:[n.jsx(\"h4\",{className:`text-sm font-black tracking-tight leading-tight ${j.read?\"text-slate-500\":\"text-slate-100\"}`,children:j.title}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-700 whitespace-nowrap pt-1\",children:S(j.timestamp)})]}),n.jsx(\"p\",{className:`text-xs mt-2 leading-relaxed font-bold tracking-tight ${j.read?\"text-slate-700\":\"text-slate-400\"}`,children:j.message}),j.priority===\"high\"&&!j.read&&n.jsxs(\"div\",{className:\"mt-4 flex items-center gap-2\",children:[n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-red-400 sq-full animate-ping\"}),n.jsx(\"span\",{className:\"text-[10px] font-black text-red-400 uppercase tracking-[0.2em]\",children:\"Critical Stability Alert\"})]}),j.action&&j.action.status===\"pending\"&&n.jsxs(\"div\",{className:\"mt-4 flex gap-3 animate-in fade-in slide-in-from-top-1\",children:[n.jsx(Re,{size:\"sm\",className:\"h-8 text-[10px] font-black uppercase tracking-widest bg-emerald-600 hover:bg-emerald-500 text-white border-0\",onClick:Z=>{Z.stopPropagation(),j.action.status=\"completed\",u?.(j)},children:\"Yes, Automate\"}),n.jsx(Re,{size:\"sm\",variant:\"ghost\",className:\"h-8 text-[10px] font-black uppercase tracking-widest text-slate-500 hover:text-slate-300 hover:bg-white/5\",onClick:Z=>{Z.stopPropagation(),j.action.status=\"dismissed\",j.read||d?.(j.id)},children:\"No, One-time\"})]})]})]})]},j.id)})]})]},C)})})})]})})}const R0=[{text:\"An investment in knowledge pays the best interest.\",author:\"Benjamin Franklin\",category:\"financial-literacy\"},{text:\"It's not how much money you make, but how much money you keep, how hard it works for you, and how many generations you keep it for.\",author:\"Robert Kiyosaki\",category:\"financial-literacy\"},{text:\"Financial peace isn't the acquisition of stuff. It's learning to live on less than you make, so you can give money back and have money to invest.\",author:\"Dave Ramsey\",category:\"financial-literacy\"},{text:\"Do not save what is left after spending; instead spend what is left after saving.\",author:\"Warren Buffett\",category:\"financial-literacy\"},{text:\"The stock market is a device for transferring money from the impatient to the patient.\",author:\"Warren Buffett\",category:\"financial-literacy\"},{text:\"Know what you own, and know why you own it.\",author:\"Peter Lynch\",category:\"financial-literacy\"},{text:\"The individual investor should act consistently as an investor and not as a speculator.\",author:\"Ben Graham\",category:\"financial-literacy\"},{text:\"Price is what you pay. Value is what you get.\",author:\"Warren Buffett\",category:\"financial-literacy\"},{text:\"The goal isn't more money. The goal is living life on your terms.\",author:\"Chris Brogan\",category:\"financial-freedom\"},{text:\"Financial freedom is available to those who learn about it and work for it.\",author:\"Robert Kiyosaki\",category:\"financial-freedom\"},{text:\"The rich invest in time, the poor invest in money.\",author:\"Warren Buffett\",category:\"financial-freedom\"},{text:\"Wealth is the ability to fully experience life.\",author:\"Henry David Thoreau\",category:\"financial-freedom\"},{text:\"It's not about having lots of money. It's about knowing how to manage the money you do have.\",author:\"Dave Ramsey\",category:\"financial-freedom\"},{text:\"Money is a terrible master but an excellent servant.\",author:\"P.T. Barnum\",category:\"financial-freedom\"},{text:\"The quickest way to double your money is to fold it in half and put it in your back pocket.\",author:\"Will Rogers\",category:\"financial-freedom\"},{text:\"The best time to plant a tree was 20 years ago. The second best time is now.\",author:\"Chinese Proverb\",category:\"motivation\"},{text:\"A journey of a thousand miles begins with a single step.\",author:\"Lao Tzu\",category:\"motivation\"},{text:\"Success is not final, failure is not fatal: it is the courage to continue that counts.\",author:\"Winston Churchill\",category:\"motivation\"},{text:\"The only way to do great work is to love what you do.\",author:\"Steve Jobs\",category:\"motivation\"},{text:\"Don't watch the clock; do what it does. Keep going.\",author:\"Sam Levenson\",category:\"motivation\"},{text:\"Wealth is not about having a lot of money; it's about having a lot of options.\",author:\"Chris Rock\",category:\"motivation\"},{text:\"Every time you borrow money, you're robbing your future self.\",author:\"Nathan W. Morris\",category:\"motivation\"},{text:\"The habit of saving is itself an education; it fosters every virtue, teaches self-denial, cultivates the sense of order, trains to forethought, and so broadens the mind.\",author:\"T.T. Munger\",category:\"motivation\"},{text:\"Too many people spend money they haven't earned, to buy things they don't want, to impress people they don't like.\",author:\"Will Rogers\",category:\"motivation\"},{text:\"A budget is telling your money where to go instead of wondering where it went.\",author:\"Dave Ramsey\",category:\"motivation\"},{text:\"Beware of little expenses. A small leak will sink a great ship.\",author:\"Benjamin Franklin\",category:\"motivation\"},{text:\"Never spend your money before you have earned it.\",author:\"Thomas Jefferson\",category:\"motivation\"}];function O0(){return R0[Math.floor(Math.random()*R0.length)]}function rN({isOpen:i,onClose:l,achievementId:o}){const[u,d]=x.useState(O0());if(x.useEffect(()=>{i&&o&&(queueMicrotask(()=>{d(O0())}),Or({particleCount:150,spread:100,origin:{y:.6},colors:[\"#FFD700\",\"#FFA500\",\"#FF6347\",\"#9370DB\",\"#3CB371\"]}))},[i,o]),!o)return null;const h=cp(o);return h?n.jsx(us,{open:i,onOpenChange:l,children:n.jsxs(ds,{className:\"w-[270px] sm:w-full sm:max-w-md bg-slate-950 border-[#38383A] p-0 overflow-hidden rounded-[32px] shadow-2xl transition-all duration-500\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 sm:w-64 sm:h-64 bg-yellow-500 blur-[60px] sm:blur-[120px] opacity-10 -mr-16 -mt-16 sm:-mr-32 sm:-mt-32\"}),n.jsx(\"div\",{className:\"absolute bottom-0 left-0 w-24 h-24 sm:w-48 sm:h-48 bg-indigo-500 blur-[50px] sm:blur-[100px] opacity-5 -ml-12 -mb-12 sm:-ml-24 sm:-mb-24\"}),n.jsxs(fs,{className:\"px-6 sm:px-10 pt-8 sm:pt-12 pb-0 relative z-10\",children:[n.jsx(ms,{className:\"text-center text-xl sm:text-3xl font-black text-white tracking-tight transition-all\",children:\"Achievement Unlocked\"}),n.jsx(hs,{className:\"text-center text-[8px] sm:text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] sm:tracking-[0.3em] mt-1 sm:mt-2 transition-all\",children:\"Achievement Unlocked\"})]}),n.jsxs(\"div\",{className:\"space-y-6 sm:space-y-10 py-8 sm:py-12 px-6 sm:px-10 relative z-10\",children:[n.jsxs(\"div\",{className:\"relative flex justify-center\",children:[n.jsx(Le.div,{className:\"relative z-10\",initial:{scale:0,rotateY:0},animate:{scale:1,rotateY:[0,1080],transition:{scale:{duration:.8,ease:\"backOut\"},rotateY:{duration:4,ease:\"easeInOut\"}}},children:n.jsxs(\"div\",{className:\"relative\",children:[n.jsx(Le.div,{className:\"absolute inset-0 bg-yellow-400 blur-3xl opacity-20 rounded-full\",animate:{scale:[1,1.3,1],opacity:[.2,.4,.2]},transition:{duration:3,repeat:1/0,ease:\"easeInOut\"}}),n.jsxs(\"div\",{className:\"relative w-32 h-32 sm:w-44 sm:h-44 bg-gradient-to-br from-yellow-400 via-orange-500 to-yellow-600 rounded-[32px] sm:rounded-[48px] flex items-center justify-center shadow-[0_15px_40px_rgba(234,179,8,0.25)] border-4 border-white/20 transition-all\",children:[n.jsx(\"span\",{className:\"text-5xl sm:text-7xl drop-shadow-2xl transition-all\",children:h.icon}),n.jsx(\"div\",{className:\"absolute inset-0 bg-gradient-to-tr from-white/10 to-transparent pointer-events-none rounded-[28px] sm:rounded-[44px]\"})]})]})}),n.jsxs(\"div\",{className:\"absolute inset-0 z-20 flex justify-center items-center pointer-events-none\",children:[n.jsx(Le.div,{className:\"absolute w-32 h-32 sm:w-48 sm:h-48 bg-yellow-500/40 blur-[40px] sm:blur-[60px] rounded-full\",initial:{scale:0,opacity:0},animate:{scale:1.4,opacity:1},transition:{delay:.3,duration:1.2,ease:\"easeOut\"}}),n.jsx(Le.div,{className:\"absolute w-24 h-24 sm:w-36 sm:h-36 bg-indigo-500/30 blur-[30px] sm:blur-[45px] rounded-full -ml-8 -mt-6 sm:-ml-12 sm:-mt-10\",initial:{scale:0,opacity:0},animate:{scale:1.8,opacity:.8},transition:{delay:.4,duration:1.2,ease:\"easeOut\"}}),n.jsx(Le.div,{className:\"absolute w-20 h-20 sm:w-32 sm:h-32 bg-rose-500/30 blur-[25px] sm:blur-[40px] rounded-full ml-10 mt-8 sm:ml-16 sm:mt-12\",initial:{scale:0,opacity:0},animate:{scale:1.6,opacity:.8},transition:{delay:.5,duration:1.2,ease:\"easeOut\"}})]})]}),n.jsxs(Le.div,{className:\"text-center space-y-2 sm:space-y-4\",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:.6},children:[n.jsx(\"h3\",{className:\"text-lg sm:text-3xl font-black bg-gradient-to-r from-yellow-200 via-yellow-500 to-yellow-200 bg-clip-text text-transparent tracking-tight transition-all\",children:h.name}),n.jsx(\"p\",{className:\"text-slate-400 font-bold text-[11px] sm:text-sm leading-relaxed max-w-[200px] sm:max-w-[280px] mx-auto transition-all\",children:h.description})]}),n.jsx(Le.div,{className:\"flex justify-center\",initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},children:n.jsxs(\"div\",{className:\"flex items-center gap-3 sm:gap-4\",children:[n.jsx(\"div\",{className:\"h-px w-12 sm:w-20 bg-gradient-to-r from-transparent via-white/10 to-transparent\"}),n.jsx(\"div\",{className:\"w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full bg-yellow-500/50 blur-[1px] animate-pulse\"}),n.jsx(\"div\",{className:\"h-px w-12 sm:w-20 bg-gradient-to-r from-transparent via-white/10 to-transparent\"})]})}),n.jsxs(Le.div,{className:\"p-4 sm:p-8 bg-white/5 rounded-2xl sm:rounded-[32px] border border-white/5 relative overflow-hidden transition-all\",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:1},children:[n.jsx(\"div\",{className:\"absolute top-0 left-0 w-12 h-12 bg-indigo-500 blur-2xl opacity-5\"}),n.jsxs(\"div\",{className:\"flex items-start gap-3 sm:gap-6 relative z-10 text-left\",children:[n.jsx(\"span\",{className:\"text-xl sm:text-3xl pt-0 opacity-40\",children:'\"'}),n.jsxs(\"div\",{className:\"flex-1\",children:[n.jsx(\"p\",{className:\"text-[10px] sm:text-sm font-bold italic text-slate-300 leading-snug sm:leading-relaxed tracking-tight transition-all\",children:u.text}),n.jsxs(\"div\",{className:\"flex items-center gap-2 sm:gap-4 mt-3 sm:mt-6 transition-all\",children:[n.jsx(\"div\",{className:\"h-px flex-1 bg-white/5\"}),n.jsxs(\"p\",{className:\"text-[8px] sm:text-[10px] font-black text-slate-500 uppercase tracking-widest shrink-0\",children:[\"— \",u.author]})]})]})]})]})]})]})}):null}const Gp=({accounts:i,goals:l,liabilities:o,expenses:u,emergencyFundAmount:d=0})=>{const h=x.useMemo(()=>i.filter(f=>f.type===\"bank\"||f.type===\"cash\").reduce((f,w)=>f+w.balance,0),[i]),g=x.useMemo(()=>i.filter(f=>f.type===\"credit_card\").reduce((f,w)=>f+Math.abs(w.balance),0),[i]),N=x.useMemo(()=>{const f=o.reduce((A,T)=>A+(T.emiAmount||0),0),w=u.filter(A=>A.isRecurring).reduce((A,T)=>A+T.amount,0);return f+w},[o,u]),E=x.useMemo(()=>l.reduce((w,A)=>w+A.currentAmount,0)+(d||0),[l,d]),S=x.useMemo(()=>E+N,[E,N]),p=x.useMemo(()=>{const f=h-S;return Math.max(0,f)},[h,S]);return{totalBankBalance:h,totalCreditUsage:g,totalCommitments:N,shadowWalletTotal:E,totalReserved:S,availableToSpend:p}},Ki=({children:i,icon:l,variant:o=\"blue\",className:u,...d})=>{const h={blue:\"border-blue-500/50 text-blue-400 hover:border-blue-500 hover:shadow-[0_0_20px_rgba(59,130,246,0.4)] shadow-[0_0_10px_rgba(59,130,246,0.2)]\",green:\"border-emerald-500/50 text-emerald-400 hover:border-emerald-500 hover:shadow-[0_0_20px_rgba(16,185,129,0.4)] shadow-[0_0_10px_rgba(16,185,129,0.2)]\",purple:\"border-purple-500/50 text-purple-400 hover:border-purple-500 hover:shadow-[0_0_20px_rgba(168,85,247,0.4)] shadow-[0_0_10px_rgba(168,85,247,0.2)]\",rose:\"border-rose-500/50 text-rose-400 hover:border-rose-500 hover:shadow-[0_0_20px_rgba(244,63,94,0.4)] shadow-[0_0_10px_rgba(244,63,94,0.2)]\"};return n.jsxs(\"button\",{className:De(\"relative group flex items-center justify-center gap-2 px-6 h-11\",\"bg-[#0A141E]/80 backdrop-blur-md border-2 rounded-2xl transition-all duration-300\",\"font-mono font-bold uppercase tracking-widest text-[10px]\",\"hover:scale-[1.02] active:scale-[0.98]\",h[o],u),...d,children:[l&&n.jsx(l,{className:\"w-4 h-4 transition-all duration-700 ease-quantum group-hover:rotate-[720deg] active:-rotate-12\"}),n.jsx(\"span\",{children:i})]})};function oN({isOpen:i,onClose:l,accounts:o,goals:u,currency:d,destinationType:h,emergencyFund:g,onAllocate:N,liabilities:E=[],expenses:S=[]}){const[p,f]=x.useState(\"\"),[w,A]=x.useState(\"\"),[T,C]=x.useState(\"\"),[M,y]=x.useState(!1),[L,z]=x.useState(!1),{availableToSpend:j,totalBankBalance:G,shadowWalletTotal:ee,totalCommitments:Z}=Gp({accounts:o,goals:u,liabilities:E,expenses:S,emergencyFundAmount:g?.currentAmount||0});x.useEffect(()=>{if(i&&!p&&o.length>0){const k=o.filter(U=>U.type===\"bank\"||U.type===\"cash\");if(k.length>0){const U=k.find(Q=>Q.balance>=j)||[...k].sort((Q,ae)=>ae.balance-Q.balance)[0];U&&queueMicrotask(()=>{f(U.id)})}}},[i,j,o,p]);const _=o.find(k=>k.id===p),B=u.find(k=>k.id===w),J=parseFloat(T)||0,ne=()=>{if(j>0){if(C(j.toString()),h===\"goal\"&&!w&&u.length>0){const k=[...u].sort((U,Q)=>{const ae=new Date(U.targetDate).getTime(),v=new Date(Q.targetDate).getTime();if(ae!==v)return ae-v;const D=U.currentAmount/U.targetAmount,W=Q.currentAmount/Q.targetAmount;return D-W});A(k[0].id),ce.info(`Suggested: ${k[0].name} based on timeline & progress`,{icon:n.jsx(Ga,{className:\"w-4 h-4 text-blue-400\"})})}}else ce.error(\"No surplus liquidity available for auto-fill\")},F=()=>{if(!p){ce.error(\"Please select an account\");return}if(h===\"goal\"&&!w){ce.error(\"Please select a goal\");return}if(!T||J<=0){ce.error(\"Please enter a valid amount\");return}if(_&&J>_.balance){ce.error(\"Insufficient balance in selected account\");return}y(!0)},oe=()=>{N({accountId:p,destinationId:h===\"goal\"?w:\"emergency-fund\",amount:J,destinationType:h}),f(\"\"),A(\"\"),C(\"\"),y(!1),l()},ge=()=>{y(!1)},O=()=>{f(\"\"),A(\"\"),C(\"\"),y(!1),z(!1),l()};return n.jsx(us,{open:i,onOpenChange:O,children:n.jsx(ds,{className:\"max-w-md bg-black border-white/5 text-white p-0 custom-scrollbar sq-2xl overflow-hidden\",children:n.jsxs(\"div\",{className:\"max-h-[85vh] overflow-y-auto p-8 custom-scrollbar\",children:[n.jsxs(fs,{className:\"mb-6\",children:[n.jsx(ms,{className:\"text-xl font-black tracking-tight text-white mb-1\",children:h===\"goal\"?\"🎯 ALLOCATE TO GOAL\":\"🛡️ ALLOCATE TO RESERVE\"}),n.jsxs(hs,{className:\"text-slate-500 text-[10px] uppercase font-black tracking-widest\",children:[\"Move funds from account to \",h===\"goal\"?\"savings milestone\":\"emergency reserve\"]})]}),M?n.jsxs(\"div\",{className:\"space-y-6 py-4\",children:[n.jsx(\"div\",{className:\"text-center pt-2\",children:n.jsx(\"p\",{className:\"text-[10px] text-emerald-500 uppercase font-black tracking-[0.2em] animate-pulse\",children:\"Ready to Allocate Funds\"})}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"div\",{className:\"p-5 bg-white/5 sq-md border border-white/10 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 p-2 opacity-5\",children:n.jsx(zu,{className:\"w-8 h-8\"})}),n.jsx(\"p\",{className:\"text-[8px] text-slate-500 uppercase font-black tracking-widest mb-3 opacity-60\",children:\"Debit Source\"}),n.jsx(\"p\",{className:\"font-black text-sm text-white tracking-tight\",children:_?.name}),n.jsxs(\"div\",{className:\"mt-4 space-y-2.5\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-medium\",children:[n.jsx(\"span\",{className:\"text-slate-400 uppercase tracking-tighter\",children:\"Current Liquidity\"}),n.jsx(\"span\",{className:\"font-mono text-white\",children:Ne(_?.balance||0,d)})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-bold text-rose-500\",children:[n.jsx(\"span\",{className:\"uppercase tracking-tighter\",children:\"Debit Volume\"}),n.jsxs(\"span\",{className:\"font-mono\",children:[\"-\",Ne(J,d)]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"flex justify-between text-xs font-black\",children:[n.jsx(\"span\",{className:\"text-slate-500 uppercase tracking-widest\",children:\"Post-Debit Projection\"}),n.jsx(\"span\",{className:\"text-blue-400 font-mono\",children:Ne((_?.balance||0)-J,d)})]})]})]}),n.jsx(\"div\",{className:\"flex justify-center -my-2 relative z-10\",children:n.jsx(\"div\",{className:\"w-10 h-10 bg-blue-600 sq-md flex items-center justify-center shadow-[0_0_20px_rgba(37,99,235,0.3)] border border-blue-400/20\",children:n.jsx(P0,{className:\"w-5 h-5 text-white\"})})}),n.jsxs(\"div\",{className:`p-5 sq-md border relative overflow-hidden ${h===\"goal\"?\"bg-emerald-500/5 border-emerald-500/20\":\"bg-blue-500/5 border-blue-500/20\"}`,children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 p-2 opacity-10\",children:h===\"goal\"?n.jsx(Ga,{className:\"w-8 h-8 text-emerald-500\"}):n.jsx(Hn,{className:\"w-8 h-8 text-blue-500\"})}),n.jsx(\"p\",{className:\"text-[8px] text-slate-500 uppercase font-black tracking-widest mb-3 opacity-60\",children:\"Credit Destination\"}),n.jsxs(\"div\",{className:\"flex items-center gap-2 mb-4\",children:[n.jsx(\"span\",{className:\"text-xl\",children:h===\"goal\"?B?.emoji:\"🛡️\"}),n.jsx(\"p\",{className:\"font-black text-sm text-white tracking-tight\",children:h===\"goal\"?B?.name:\"Emergency Reserve\"})]}),n.jsxs(\"div\",{className:\"space-y-2.5\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-medium\",children:[n.jsx(\"span\",{className:\"text-slate-400 uppercase tracking-tighter\",children:\"Current Level\"}),n.jsx(\"span\",{className:\"font-mono text-white\",children:Ne((h===\"goal\"?B?.currentAmount:g?.currentAmount)||0,d)})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-bold text-emerald-400\",children:[n.jsx(\"span\",{className:\"uppercase tracking-tighter\",children:\"Credit Volume\"}),n.jsxs(\"span\",{className:\"font-mono\",children:[\"+\",Ne(J,d)]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"flex justify-between text-xs font-black\",children:[n.jsx(\"span\",{className:\"text-slate-500 uppercase tracking-widest\",children:\"Post-Credit Value\"}),n.jsx(\"span\",{className:\"text-emerald-400 font-mono\",children:Ne(((h===\"goal\"?B?.currentAmount:g?.currentAmount)||0)+J,d)})]})]})]})]}),n.jsx(\"div\",{className:\"p-4 bg-amber-500/5 border border-amber-500/20 sq-md\",children:n.jsxs(\"div\",{className:\"flex gap-3\",children:[n.jsx(Eu,{className:\"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5\"}),n.jsxs(\"div\",{className:\"text-[10px]\",children:[n.jsx(\"p\",{className:\"font-black text-amber-400 uppercase tracking-widest mb-1\",children:\"Node Equilibrium Warning\"}),n.jsxs(\"p\",{className:\"text-amber-500/70 font-bold leading-relaxed\",children:[\"Net Liquidity and \",_?.name,\" reserves will be reduced by \",Ne(J,d),\" immediately. This action is final.\"]})]})]})}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Ki,{onClick:ge,className:\"flex-1 h-12 text-slate-500 hover:text-white border-white/5 font-black tracking-[0.2em]\",children:\"Re-Configure\"}),n.jsx(Ki,{onClick:oe,className:\"flex-1 h-12 bg-emerald-600/20 text-emerald-400 border-emerald-500/30 font-black tracking-[0.2em] shadow-lg shadow-emerald-500/10\",children:\"Execute Move\"})]})]}):n.jsxs(\"div\",{className:\"space-y-6\",children:[j>0&&n.jsxs(\"div\",{className:\"relative group overflow-hidden sq-xl border border-emerald-500/20 bg-emerald-500/5 p-5 transition-all hover:bg-emerald-500/10 mb-2\",children:[n.jsx(Qu,{variant:\"savings\"}),n.jsxs(\"div\",{className:\"relative z-10 flex flex-col gap-4\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-10 h-10 bg-emerald-500/20 sq-md flex items-center justify-center border border-emerald-500/30\",children:n.jsx(Ga,{className:\"w-5 h-5 text-emerald-400\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-[9px] text-emerald-500/70 font-black uppercase tracking-widest\",children:\"Surplus Detected\"}),n.jsx(\"h4\",{className:\"text-xl font-black text-white tabular-nums\",children:Ne(j,d)})]})]}),n.jsx(\"button\",{onClick:()=>z(!L),className:\"p-2 hover:bg-white/5 rounded-full transition-colors text-slate-500 hover:text-white\",title:\"Show Calculation\",children:L?n.jsx(_r,{className:\"w-4 h-4\"}):n.jsx(K0,{className:\"w-4 h-4\"})})]}),L&&n.jsxs(\"div\",{className:\"py-3 border-t border-emerald-500/10 space-y-2 animate-in fade-in slide-in-from-top-2 duration-300\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-emerald-500/60 font-medium\",children:[n.jsx(\"span\",{children:\"Total Liquidity\"}),n.jsx(\"span\",{children:Ne(G,d)})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-rose-500/60 font-medium\",children:[n.jsx(\"span\",{children:\"Shadow Wallet (Goals + EF)\"}),n.jsxs(\"span\",{children:[\"-\",Ne(ee,d)]})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-rose-500/60 font-medium pb-2 border-b border-emerald-500/10\",children:[n.jsx(\"span\",{children:\"Total Commitments (Bills)\"}),n.jsxs(\"span\",{children:[\"-\",Ne(Z,d)]})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-emerald-400 font-bold uppercase pt-1\",children:[n.jsx(\"span\",{children:\"Available Safety Margin\"}),n.jsx(\"span\",{children:Ne(j,d)})]})]}),n.jsx(Ki,{onClick:()=>{ne(),_&&j>_.balance&&ce.warning(\"Surplus exceeds selected account balance. Source adjusted.\")},className:\"w-full h-11 bg-emerald-500/20 text-emerald-400 border-emerald-500/30 font-black tracking-widest\",children:\"Allocate All Surplus\"})]})]}),n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(ye,{htmlFor:\"allocate-from-account\",className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 mb-2 block\",children:\"Source Node\"}),n.jsxs(Ut,{value:p,onValueChange:f,children:[n.jsx(Bt,{id:\"allocate-from-account\",name:\"fromAccountId\",className:\"bg-black border-white/5 sq-md h-14 text-white focus:ring-1 focus:ring-blue-500/50\",children:n.jsx(It,{placeholder:\"Select Capital Source\"})}),n.jsx(qt,{className:\"bg-black border-white/10 text-white sq-xl\",children:o.map(k=>n.jsx(qe,{value:k.id,className:\"hover:bg-white/5\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between w-full\",children:[n.jsxs(\"span\",{children:[k.icon,\" \",k.name]}),n.jsx(\"span\",{className:\"text-[10px] text-slate-500 ml-4 font-mono\",children:Ne(k.balance,d)})]})},k.id))})]}),_&&n.jsxs(\"p\",{className:\"text-[10px] text-slate-500 mt-2 italic px-1\",children:[\"Available Liquidity: \",Ne(_.balance,d)]})]}),h===\"goal\"?n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(ye,{htmlFor:\"allocate-to-goal\",className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 mb-2 block\",children:\"Target Milestone\"}),n.jsxs(Ut,{value:w,onValueChange:A,children:[n.jsx(Bt,{id:\"allocate-to-goal\",name:\"toGoalId\",className:\"bg-black border-white/5 sq-md h-14 text-white focus:ring-1 focus:ring-emerald-500/50\",children:n.jsx(It,{placeholder:\"Choose Destination Goal\"})}),n.jsx(qt,{className:\"bg-black border-white/10 text-white sq-xl\",children:u.map(k=>{const U=k.currentAmount/k.targetAmount*100;return n.jsx(qe,{value:k.id,className:\"hover:bg-white/5\",children:n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(\"span\",{className:\"text-lg\",children:k.emoji}),n.jsxs(\"div\",{className:\"min-w-0\",children:[n.jsx(\"div\",{className:\"font-bold text-xs uppercase tracking-tight\",children:k.name}),n.jsxs(\"div\",{className:\"text-[9px] text-slate-500 font-mono\",children:[Math.round(U),\"% SYNCHRONIZED • \",Ne(k.currentAmount,d)]})]})]})},k.id)})})]})]}):n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(ye,{className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 mb-2 block\",children:\"Stability Reserve\"}),n.jsx(\"div\",{className:\"p-4 bg-white/5 border border-white/10 sq-md\",children:n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-10 h-10 bg-blue-500/10 sq-md flex items-center justify-center border border-blue-500/20\",children:\"🛡️\"}),n.jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[n.jsx(\"p\",{className:\"font-black text-xs uppercase tracking-widest text-white\",children:\"Emergency Fund\"}),g&&n.jsxs(\"p\",{className:\"text-[9px] text-slate-500 font-mono mt-1\",children:[Ne(g.currentAmount,d),\" / \",Ne(g.targetAmount,d)]})]})]})})]}),n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(\"div\",{className:\"flex justify-between items-center mb-1\",children:n.jsx(ye,{htmlFor:\"allocate-amount\",className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 block\",children:\"Contribution Volume\"})}),n.jsxs(\"div\",{className:\"relative\",children:[n.jsx(\"span\",{className:\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500\",children:d===\"INR\"?\"₹\":\"$\"}),n.jsx(wt,{id:\"allocate-amount\",name:\"amount\",type:\"number\",placeholder:\"0\",value:T,onChange:k=>C(k.target.value),className:\"pl-8 bg-black border-white/5 h-12\",min:\"0\",step:\"0.01\"})]}),_&&J>_.balance&&n.jsxs(\"div\",{className:\"flex items-center gap-2 text-sm text-red-600\",children:[n.jsx(Eu,{className:\"w-4 h-4\"}),n.jsx(\"span\",{children:\"Amount exceeds available balance\"})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Ki,{onClick:O,className:\"flex-1 h-12 text-slate-500 hover:text-white border-white/5 font-black tracking-[0.2em]\",children:\"Abort\"}),n.jsx(Ki,{onClick:F,className:\"flex-1 h-12 bg-blue-600/20 text-blue-400 border-blue-500/30 font-black tracking-[0.2em] shadow-lg shadow-blue-500/10\",children:\"Preview Mode\"})]})]})]})})})}const cN=[{name:\"HDFC Bank\",icon:\"🏦\",color:\"#1d4ed8\",type:\"bank\"},{name:\"ICICI Bank\",icon:\"🏦\",color:\"#ea580c\",type:\"bank\"},{name:\"State Bank of India\",icon:\"🏦\",color:\"#2563eb\",type:\"bank\"},{name:\"Axis Bank\",icon:\"🏦\",color:\"#9d174d\",type:\"bank\"},{name:\"Kotak Mahindra Bank\",icon:\"🏦\",color:\"#dc2626\",type:\"bank\"},{name:\"Bank of America\",icon:\"🏦\",color:\"#0033aa\",type:\"bank\"},{name:\"Chase Bank\",icon:\"🏦\",color:\"#117aca\",type:\"bank\"},{name:\"Wells Fargo\",icon:\"🏦\",color:\"#d71e28\",type:\"bank\"},{name:\"HSBC\",icon:\"🏦\",color:\"#db0011\",type:\"bank\"},{name:\"Barclays\",icon:\"🏦\",color:\"#00aeef\",type:\"bank\"},{name:\"Standard Chartered\",icon:\"🏦\",color:\"#00945e\",type:\"bank\"},{name:\"Citibank\",icon:\"🏦\",color:\"#003b70\",type:\"bank\"},{name:\"DBS Bank\",icon:\"🏦\",color:\"#ff0000\",type:\"bank\"},{name:\"Federal Bank\",icon:\"🏦\",color:\"#0b5a91\",type:\"bank\"},{name:\"American Express\",icon:\"💳\",color:\"#006fcf\",type:\"credit_card\"},{name:\"Discover\",icon:\"💳\",color:\"#ff6600\",type:\"credit_card\"},{name:\"Capital One\",icon:\"💳\",color:\"#d22e2e\",type:\"credit_card\"},{name:\"Goldman Sachs\",icon:\"🏦\",color:\"#725a34\",type:\"bank\"},{name:\"Morgan Stanley\",icon:\"🏦\",color:\"#000033\",type:\"bank\"},{name:\"Apple Card\",icon:\"💳\",color:\"#000000\",type:\"credit_card\"},{name:\"PayPal\",icon:\"💳\",color:\"#003087\",type:\"credit_card\"},{name:\"Revolut\",icon:\"💳\",color:\"#000000\",type:\"credit_card\"},{name:\"Monzo\",icon:\"💳\",color:\"#ff4d4f\",type:\"credit_card\"}];function uN({accounts:i,currency:l,onCreateAccount:o,onUpdateAccount:u,onDeleteAccount:d}){const[h,g]=x.useState(!1),[N,E]=x.useState(null),[S,p]=x.useState({name:\"\",type:\"bank\",balance:0,color:Wc[0],icon:eu[0].value,creditLimit:0,safeLimitPercentage:30,serviceChargePercentage:0,statementDate:1}),[f,w]=x.useState([]),A=j=>{j?(E(j),p({name:j.name,type:j.type,balance:j.balance,color:j.color,icon:j.icon,creditLimit:j.creditLimit||0,safeLimitPercentage:j.safeLimitPercentage||30,serviceChargePercentage:j.serviceChargePercentage||0,statementDate:j.statementDate||1})):(E(null),p({name:\"\",type:\"bank\",balance:0,color:Wc[0],icon:eu[0].value,creditLimit:0,safeLimitPercentage:30,serviceChargePercentage:0,statementDate:1})),w([]),g(!0)},T=j=>{if(p({...S,name:j}),j.length>1){const G=cN.filter(ee=>ee.name.toLowerCase().includes(j.toLowerCase())).slice(0,4);w(G)}else w([])},C=j=>{p({...S,name:j.name,type:j.type,icon:j.icon,color:j.color}),w([])},M=async j=>{if(j.preventDefault(),!S.name.trim()){ce.error(\"Please enter an account name\");return}try{N?await u(N.id,S):await o(S),g(!1)}catch(G){console.error(\"Error saving account:\",G)}},y=async j=>{if(confirm(\"Are you sure you want to delete this account? This action cannot be undone.\"))try{await d(j)}catch(G){console.error(\"Error deleting account:\",G)}};return n.jsxs(\"div\",{className:\"space-y-12 animate-in fade-in slide-in-from-bottom-4 duration-700 px-4 pb-24\",children:[n.jsxs(\"div\",{className:\"flex items-end justify-between gap-6\",children:[n.jsxs(\"div\",{className:\"min-w-0\",children:[n.jsx(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tight leading-none mb-3 truncate\",children:\"Accounts & Cards\"}),n.jsxs(\"div\",{className:\"flex flex-wrap gap-2 mb-3\",children:[n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-emerald-500 bg-emerald-500/10 px-2 py-0.5 rounded-lg border border-emerald-500/20 whitespace-nowrap\",children:[i.filter(j=>j.type===\"bank\").length,\" Banks\"]}),n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-rose-500 bg-rose-500/10 px-2 py-0.5 rounded-lg border border-rose-500/20 whitespace-nowrap\",children:[i.filter(j=>j.type===\"credit_card\").length,\" Credit\"]}),n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-amber-500 bg-amber-500/10 px-2 py-0.5 rounded-lg border border-amber-500/20 whitespace-nowrap\",children:[i.filter(j=>j.type===\"cash\").length,\" Cash\"]}),n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-blue-500 bg-blue-500/10 px-2 py-0.5 rounded-lg border border-blue-500/20 whitespace-nowrap\",children:[i.filter(j=>j.type===\"investment\").length,\" Holding\"]})]}),n.jsx(\"p\",{className:\"text-slate-500 font-bold max-w-md text-[10px] truncate\",children:\"Monitor liquidity across core reservoirs and credit pools.\"})]}),n.jsxs(Re,{onClick:()=>A(),className:\"bg-emerald-600 hover:bg-emerald-500 text-white rounded-xl px-6 h-12 font-bold shadow-lg shadow-emerald-600/20 transition-all active:scale-95 shrink-0\",children:[n.jsx(kr,{className:\"w-4 h-4 sm:mr-2\"}),n.jsx(\"span\",{className:\"hidden sm:inline\",children:\"Add Account\"}),n.jsx(\"span\",{className:\"sm:hidden\",children:\"Add\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(Ny,{className:\"w-3.5 h-3.5\"}),\"Bank Accounts\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(j=>j.type===\"bank\").map(j=>n.jsx(L,{account:j},j.id)),i.filter(j=>j.type===\"bank\").length===0&&n.jsx(z,{message:\"No bank accounts detected.\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(Sy,{className:\"w-3.5 h-3.5\"}),\"Credit Pools (Cards)\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(j=>j.type===\"credit_card\").map(j=>n.jsx(L,{account:j},j.id)),i.filter(j=>j.type===\"credit_card\").length===0&&n.jsx(z,{message:\"No credit pools detected.\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(zu,{className:\"w-3.5 h-3.5\"}),\"Cash in Hand\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(j=>j.type===\"cash\").map(j=>n.jsx(L,{account:j},j.id)),i.filter(j=>j.type===\"cash\").length===0&&n.jsx(z,{message:\"No physical liquid reservoirs detected.\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(qn,{className:\"w-3.5 h-3.5\"}),\"Investment Holding Nodes\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(j=>j.type===\"investment\").map(j=>n.jsx(L,{account:j},j.id)),i.filter(j=>j.type===\"investment\").length===0&&n.jsx(\"div\",{className:\"md:col-span-2 lg:col-span-3 p-8 border border-dashed border-white/5 squircle-22 flex items-center justify-center text-slate-600 font-bold text-xs\",children:\"No investment nodes detected. Link them to track growth separately.\"})]})]}),n.jsx(us,{open:h,onOpenChange:g,children:n.jsxs(ds,{className:\"max-w-md max-h-[90vh] overflow-y-auto bg-slate-950 border-white/10 text-white squircle-22 p-8 custom-scrollbar\",children:[n.jsxs(fs,{children:[n.jsx(ms,{className:\"text-3xl font-black tracking-tight text-white mb-2\",children:N?\"Refine Account\":\"New Liquidity Reservoir\"}),n.jsx(hs,{className:\"text-slate-500 font-bold mb-6\",children:\"Establish a new liquidity pool in the Obsidian system.\"})]}),n.jsxs(\"form\",{onSubmit:M,className:\"space-y-8\",children:[n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"name\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Account Identity\"}),n.jsx(wt,{id:\"name\",name:\"name\",value:S.name,onChange:j=>T(j.target.value),placeholder:\"e.g. Mercury Checking\",required:!0,className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white focus:ring-emerald-500/50\",autoComplete:\"off\"}),f.length>0&&n.jsxs(\"div\",{className:\"mt-3 p-4 bg-indigo-500/5 border border-indigo-500/10 squircle-12 flex items-start gap-4 animate-in fade-in zoom-in-95 duration-300\",children:[n.jsx(Ga,{className:\"w-4 h-4 text-indigo-400 mt-1 flex-shrink-0\"}),n.jsxs(\"div\",{className:\"flex-1\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-widest text-indigo-300 mb-3 opacity-60\",children:\"Intelligence Suggested\"}),n.jsx(\"div\",{className:\"grid grid-cols-1 gap-2\",children:f.map(j=>n.jsxs(\"button\",{type:\"button\",onClick:()=>C(j),className:\"flex items-center gap-3 p-2.5 squircle-12 bg-white/5 hover:bg-white/10 transition-all group border border-white/5\",children:[n.jsx(\"span\",{className:\"text-lg group-hover:scale-110 transition-transform\",children:j.icon}),n.jsx(\"span\",{className:\"text-xs font-bold text-slate-300 group-hover:text-white transition-colors\",children:j.name})]},j.name))})]})]})]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 md:grid-cols-3 gap-4\",children:[n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${S.type===\"bank\"?\"border-emerald-500 bg-emerald-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>p({...S,type:\"bank\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-emerald-500/20 flex items-center justify-center text-xl mb-2\",children:\"🏦\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Bank Reservoir\"})]}),n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${S.type===\"credit_card\"?\"border-rose-500 bg-rose-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>p({...S,type:\"credit_card\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-rose-500/20 flex items-center justify-center text-xl mb-2\",children:\"💳\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Credit Pool\"})]}),n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${S.type===\"cash\"?\"border-amber-500 bg-amber-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>p({...S,type:\"cash\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-amber-500/20 flex items-center justify-center text-xl mb-2\",children:\"💵\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Cash in Hand\"})]}),n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${S.type===\"investment\"?\"border-blue-500 bg-blue-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>p({...S,type:\"investment\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-blue-500/20 flex items-center justify-center text-xl mb-2\",children:\"📈\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Growth Node\"})]})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"balance\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:S.type===\"bank\"||S.type===\"cash\"||S.type===\"investment\"?\"Initial Liquidity\":\"Current Spent Balance\"}),n.jsx(Ha,{id:\"balance\",name:\"balance\",value:S.balance,onChange:j=>p({...S,balance:parseFloat(j)||0}),placeholder:\"0.00\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]}),S.type===\"credit_card\"&&n.jsxs(\"div\",{className:\"space-y-6 animate-in slide-in-from-top-4 duration-500\",children:[n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"creditLimit\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Total Credit Limit\"}),n.jsx(Ha,{id:\"creditLimit\",name:\"creditLimit\",value:S.creditLimit,onChange:j=>p({...S,creditLimit:parseFloat(j)||0}),placeholder:\"e.g. 100000\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"safeLimit\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Safe Use Threshold (%)\"}),n.jsx(Ha,{id:\"safeLimit\",name:\"safeLimitPercentage\",value:S.safeLimitPercentage,onChange:j=>p({...S,safeLimitPercentage:parseFloat(j)||30}),placeholder:\"30\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"serviceCharge\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Svc Charge (%)\"}),n.jsx(Ha,{id:\"serviceCharge\",name:\"serviceChargePercentage\",value:S.serviceChargePercentage,onChange:j=>p({...S,serviceChargePercentage:parseFloat(j)||0}),placeholder:\"0.0\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"statementDate\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Statement Date\"}),n.jsxs(Ut,{value:S.statementDate.toString(),onValueChange:j=>p({...S,statementDate:parseInt(j)}),children:[n.jsx(Bt,{id:\"statementDate\",name:\"statementDate\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",children:n.jsx(It,{})}),n.jsx(qt,{className:\"bg-slate-900 border-white/10 text-white\",children:[...Array(31)].map((j,G)=>n.jsx(qe,{value:(G+1).toString(),children:G+1},G+1))})]})]})]})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"System Icon\"}),n.jsx(\"div\",{className:\"grid grid-cols-6 sm:grid-cols-9 gap-2\",children:eu.map(j=>n.jsx(\"button\",{type:\"button\",onClick:()=>p({...S,icon:j.value}),className:`w-10 h-10 squircle-12 flex items-center justify-center text-lg border-2 transition-all ${S.icon===j.value?\"border-emerald-500 bg-emerald-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,children:j.value},j.value))})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Brand Color\"}),n.jsx(\"div\",{className:\"flex flex-wrap gap-3\",children:Wc.map(j=>{const G={style:{\"--btn-color\":j}};return n.jsx(\"button\",{type:\"button\",onClick:()=>p({...S,color:j}),\"aria-label\":`Select color ${j}`,className:`w-8 h-8 rounded-full border-4 transition-all bg-[length:100%_100%] bg-[var(--btn-color)] ${S.color===j?\"border-white scale-110 shadow-lg shadow-white/20\":\"border-transparent hover:scale-105\"}`,...G},j)})})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Re,{type:\"button\",variant:\"ghost\",onClick:()=>g(!1),className:\"flex-1 h-14 squircle-12 font-bold text-slate-500 hover:text-white\",children:\"Abort\"}),n.jsx(Re,{type:\"submit\",className:\"flex-1 h-14 squircle-12 bg-emerald-600 hover:bg-emerald-500 text-white font-black shadow-lg shadow-emerald-600/20\",children:N?\"Update Account\":\"Ignite Account\"})]})]})]})})]});function L({account:j}){const G=j.type===\"credit_card\",ee=G?(j.creditLimit||0)*(j.safeLimitPercentage||30)/100:0,Z=G&&j.creditLimit?Math.abs(j.balance)/j.creditLimit*100:0,_=G&&Z<=(j.safeLimitPercentage||30);return n.jsxs(Ot,{className:\"p-6 bg-slate-900/40 border-white/5 squircle-22 border hover:bg-slate-900/60 transition-all duration-300 group relative overflow-hidden\",children:[(()=>{const B={style:{\"--card-glow\":j.color}};return n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20 bg-[var(--card-glow)]\",...B})})(),n.jsxs(\"div\",{className:\"flex items-start justify-between mb-8 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[(()=>{const B={style:{\"--icon-bg\":j.color+\"15\"}};return n.jsx(\"div\",{className:\"w-16 h-16 squircle-12 flex items-center justify-center text-3xl shadow-inner border border-white/5 group-hover:scale-105 transition-transform bg-[var(--icon-bg)]\",...B,children:j.icon})})(),n.jsxs(\"div\",{className:\"min-w-0\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100 truncate\",children:j.name}),n.jsxs(\"div\",{className:\"flex items-center gap-1.5 mt-1\",children:[n.jsx(\"div\",{className:`w-1.5 h-1.5 rounded-full ${G?_?\"bg-indigo-500\":\"bg-rose-500\":\"bg-emerald-500\"}`}),n.jsx(\"span\",{className:\"text-[10px] uppercase font-black tracking-widest text-slate-500\",children:G?\"Credit Pool\":\"Bank Account\"})]})]})]}),n.jsxs(\"div\",{className:\"flex gap-2\",children:[n.jsx(Re,{variant:\"ghost\",title:\"Edit Account\",size:\"sm\",onClick:()=>A(j),className:\"w-8 h-8 p-0 squircle-12 hover:bg-white/5 text-slate-600 hover:text-white transition-all\",children:n.jsx(Cy,{className:\"w-3.5 h-3.5\"})}),n.jsx(Re,{variant:\"ghost\",title:\"Delete Account\",size:\"sm\",onClick:()=>y(j.id),className:\"w-8 h-8 p-0 squircle-12 hover:bg-rose-500/10 text-slate-600 hover:text-rose-400 transition-all\",children:n.jsx(tl,{className:\"w-3.5 h-3.5\"})})]})]}),n.jsxs(\"div\",{className:\"pt-6 border-t border-white/5 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-end\",children:[n.jsxs(\"div\",{className:\"space-y-1\",children:[n.jsx(\"p\",{className:\"text-[10px] uppercase font-black tracking-widest text-slate-600\",children:G?\"Current Obligation\":\"Available Liquidity\"}),(()=>{const B={style:{\"--balance-color\":j.color}};return n.jsx(\"h4\",{className:\"text-2xl font-black tabular-nums tracking-tight text-[var(--balance-color)]\",...B,children:Ne(j.balance,l)})})()]}),G&&j.creditLimit?n.jsxs(\"div\",{className:\"text-right\",children:[n.jsx(\"p\",{className:\"text-[9px] font-black text-slate-600 uppercase mb-1\",children:\"Limit Use\"}),n.jsxs(\"p\",{className:`text-xs font-black tabular-nums ${_?\"text-indigo-400\":\"text-rose-400\"}`,children:[Z.toFixed(1),\"%\"]})]}):n.jsx(\"div\",{className:\"bg-white/5 px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest text-slate-500 border border-white/5\",children:\"Synced\"})]}),G&&j.creditLimit&&n.jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-white/5 flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"space-y-1\",children:[n.jsx(\"p\",{className:\"text-[8px] font-black text-slate-700 uppercase\",children:\"Safe Threshold\"}),n.jsx(\"p\",{className:\"text-[10px] font-black text-slate-500\",children:Ne(ee,l)})]}),j.serviceChargePercentage?n.jsxs(\"div\",{className:\"text-right space-y-1\",children:[n.jsx(\"p\",{className:\"text-[8px] font-black text-slate-700 uppercase\",children:\"Svc Charge\"}),n.jsxs(\"p\",{className:\"text-[10px] font-black text-slate-500\",children:[j.serviceChargePercentage,\"%\"]})]}):null,G&&j.statementDate&&n.jsxs(\"div\",{className:\"text-right space-y-1 ml-auto\",children:[n.jsx(\"p\",{className:\"text-[8px] font-black text-slate-700 uppercase\",children:\"Statement\"}),n.jsxs(\"p\",{className:\"text-[10px] font-black text-slate-500\",children:[\"Day \",j.statementDate]})]})]})]})]})}function z({message:j}){return n.jsx(\"div\",{className:\"py-12 text-center bg-slate-800/20 squircle-22 border border-dashed border-white/10 col-span-full\",children:n.jsx(\"p\",{className:\"text-sm text-slate-500 font-bold\",children:j})})}}function dN({isOpen:i,onClose:l,accounts:o,currency:u,onTransfer:d}){const[h,g]=x.useState(\"\"),[N,E]=x.useState(\"\"),[S,p]=x.useState(\"\"),[f,w]=x.useState(!1),A=o.find(z=>z.id===h),T=o.find(z=>z.id===N),C=parseFloat(S)||0,M=()=>{if(!h){ce.error(\"Please select source reservoir\");return}if(!N){ce.error(\"Please select destination reservoir\");return}if(h===N){ce.error(\"Source and destination must be different\");return}if(!S||C<=0){ce.error(\"Please enter a valid amount\");return}if(A&&C>A.balance){ce.error(\"Insufficient funds in source reservoir\");return}w(!0)},y=()=>{d(h,N,C),L()},L=()=>{g(\"\"),E(\"\"),p(\"\"),w(!1),l()};return n.jsx(us,{open:i,onOpenChange:L,children:n.jsxs(ds,{className:\"max-w-md max-h-[90vh] overflow-y-auto bg-[#020408] border-white/5 p-0 shadow-2xl custom-scrollbar text-white\",children:[n.jsxs(\"div\",{className:\"px-8 pt-10 pb-8 border-b border-white/5 relative overflow-hidden bg-indigo-500/5\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 blur-[60px] opacity-20 -mr-16 -mt-16 bg-indigo-500\"}),n.jsxs(fs,{className:\"relative z-10\",children:[n.jsxs(ms,{className:\"text-2xl font-black tracking-tighter text-slate-100 flex items-center gap-3\",children:[n.jsx(Au,{className:\"w-6 h-6 text-indigo-400\"}),\"Capital Migration\"]}),n.jsx(hs,{className:\"text-slate-500 font-bold text-[10px] uppercase tracking-[0.2em] mt-1\",children:\"Transfer between core liquidity reservoirs\"})]})]}),n.jsx(\"div\",{className:\"p-8\",children:f?n.jsxs(\"div\",{className:\"space-y-6 animate-in fade-in zoom-in-95 duration-300\",children:[n.jsxs(\"div\",{className:\"p-6 bg-slate-900/50 border border-white/5 rounded-3xl space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between gap-4\",children:[n.jsxs(\"div\",{className:\"flex-1 text-center space-y-2\",children:[n.jsx(\"div\",{className:\"w-12 h-12 rounded-2xl bg-slate-800 border border-white/10 flex items-center justify-center text-2xl mx-auto\",children:A?.icon}),n.jsx(\"p\",{className:\"text-[10px] font-black uppercase text-slate-500 truncate\",children:A?.name})]}),n.jsxs(\"div\",{className:\"flex flex-col items-center gap-1\",children:[n.jsx(Au,{className:\"w-6 h-6 text-indigo-400 animate-pulse\"}),n.jsx(\"p\",{className:\"text-[10px] font-black text-indigo-400\",children:Ne(C,u)})]}),n.jsxs(\"div\",{className:\"flex-1 text-center space-y-2\",children:[n.jsx(\"div\",{className:\"w-12 h-12 rounded-2xl bg-slate-800 border border-white/10 flex items-center justify-center text-2xl mx-auto\",children:T?.icon}),n.jsx(\"p\",{className:\"text-[10px] font-black uppercase text-slate-500 truncate\",children:T?.name})]})]}),n.jsxs(\"div\",{className:\"space-y-4 pt-4 border-t border-white/5\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-center text-xs\",children:[n.jsx(\"span\",{className:\"text-slate-500 font-bold\",children:\"Source New Balance\"}),n.jsx(\"span\",{className:\"text-rose-400 font-black\",children:Ne((A?.balance||0)-C,u)})]}),n.jsxs(\"div\",{className:\"flex justify-between items-center text-xs\",children:[n.jsx(\"span\",{className:\"text-slate-500 font-bold\",children:\"Dest. New Balance\"}),n.jsx(\"span\",{className:\"text-emerald-400 font-black\",children:Ne((T?.balance||0)+C,u)})]})]})]}),n.jsxs(\"div\",{className:\"p-4 bg-amber-500/5 border border-amber-500/10 rounded-2xl flex gap-3\",children:[n.jsx(Ar,{className:\"w-5 h-5 text-amber-500 flex-shrink-0\"}),n.jsx(\"p\",{className:\"text-[10px] text-amber-200/60 font-medium leading-relaxed\",children:\"Notice: This transfer will instantly adjust the balance of both accounts. This action is recorded in your transaction history.\"})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Re,{variant:\"ghost\",onClick:()=>w(!1),className:\"flex-1 h-12 rounded-2xl text-slate-500 font-bold hover:bg-white/5\",children:\"Back\"}),n.jsx(Re,{onClick:y,className:\"flex-1 h-12 rounded-2xl bg-indigo-600 hover:bg-indigo-500 text-white font-black shadow-lg shadow-indigo-600/20 transition-all active:scale-95\",children:\"Confirm Migration\"})]})]}):n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(ye,{htmlFor:\"source-reservoir\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Source Reservoir\"}),n.jsxs(Ut,{value:h,onValueChange:g,children:[n.jsx(Bt,{id:\"source-reservoir\",className:\"h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-200 font-bold\",children:n.jsx(It,{placeholder:\"Select source\"})}),n.jsx(qt,{className:\"bg-slate-900 border-white/5 max-h-[40vh]\",children:o.map(z=>n.jsx(qe,{value:z.id,className:\"focus:bg-white/5 focus:text-white\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between w-full pr-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-xl\",children:z.icon}),n.jsx(\"span\",{children:z.name})]}),n.jsx(\"span\",{className:\"text-xs font-black text-slate-500\",children:Ne(z.balance,u)})]})},z.id))})]})]}),n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(ye,{htmlFor:\"dest-reservoir\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Destination Reservoir\"}),n.jsxs(Ut,{value:N,onValueChange:E,children:[n.jsx(Bt,{id:\"dest-reservoir\",className:\"h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-200 font-bold\",children:n.jsx(It,{placeholder:\"Select destination\"})}),n.jsx(qt,{className:\"bg-slate-900 border-white/5 max-h-[40vh]\",children:o.map(z=>n.jsx(qe,{value:z.id,className:\"focus:bg-white/5 focus:text-white\",disabled:z.id===h,children:n.jsxs(\"div\",{className:\"flex items-center justify-between w-full pr-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-xl\",children:z.icon}),n.jsx(\"span\",{children:z.name})]}),n.jsx(\"span\",{className:\"text-xs font-black text-slate-500\",children:Ne(z.balance,u)})]})},z.id))})]})]}),n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(ye,{htmlFor:\"migration-amount\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Capital Amount\"}),n.jsxs(\"div\",{className:\"relative group\",children:[n.jsx(\"div\",{className:\"absolute left-5 top-1/2 -translate-y-1/2 text-slate-500 font-bold group-focus-within:text-indigo-400 transition-colors\",children:u===\"INR\"?\"₹\":\"$\"}),n.jsx(wt,{id:\"migration-amount\",name:\"amount\",type:\"number\",placeholder:\"0.00\",value:S,onChange:z=>p(z.target.value),className:\"pl-12 h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-100 font-black text-xl\"})]}),A&&C>A.balance&&n.jsxs(\"div\",{className:\"flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-rose-400 ml-1 animate-in slide-in-from-top-1\",children:[n.jsx(Eu,{className:\"w-3 h-3\"}),n.jsx(\"span\",{children:\"Insufficient stability in source reservoir\"})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Re,{variant:\"ghost\",onClick:L,className:\"flex-1 h-12 rounded-2xl text-slate-500 font-bold hover:bg-white/5\",children:\"Cancel\"}),n.jsx(Re,{onClick:M,className:\"flex-1 h-12 rounded-2xl bg-indigo-600 hover:bg-indigo-500 text-white font-black shadow-lg shadow-indigo-600/20 transition-all active:scale-95\",children:\"Verify Migration\"})]})]})})]})})}function fN({onRefresh:i,children:l}){const o=x.useRef(0),[u,d]=x.useState(0),[h,g]=x.useState(!1),N=x.useRef(null),E=80,S=f=>{window.scrollY===0&&(o.current=f.touches[0].clientY)};x.useEffect(()=>{const f=A=>{if(o.current===0)return;const C=A.touches[0].clientY-o.current;if(C>0&&window.scrollY===0){A.cancelable&&A.preventDefault();const M=Math.min(C,E*1.5);d(M)}},w=N.current;return w&&w.addEventListener(\"touchmove\",f,{passive:!1}),()=>{w&&w.removeEventListener(\"touchmove\",f)}},[]),x.useEffect(()=>{u>=E&&!h&&window.navigator.vibrate&&window.navigator.vibrate(10)},[u,h]);const p=async()=>{u>=E&&!h&&(g(!0),await i(),g(!1)),d(0),o.current=0};return n.jsxs(\"div\",{ref:N,className:\"relative\",onTouchStart:S,onTouchEnd:p,children:[n.jsx(Le.div,{className:\"absolute top-0 left-0 right-0 flex justify-center items-center\",style:{height:u,opacity:u/E},animate:{y:h?0:-E},children:n.jsxs(\"div\",{className:\"flex flex-col items-center gap-2 py-4\",children:[n.jsx(Le.div,{animate:{rotate:h?360:u/E*180},transition:{rotate:{duration:h?1:0,repeat:h?1/0:0,ease:\"linear\"}},children:n.jsx(ei,{className:\"w-6 h-6 text-[#0A84FF]\"})}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-[0.2em] text-[#8E8E93]\",children:h?\"Synchronizing...\":u>=E?\"Relinquish to Sync\":\"Pull to Synchronize\"})]})}),n.jsx(Le.div,{animate:{y:h?60:0},transition:{duration:.2},children:l})]})}function os({className:i,...l}){return n.jsx(\"div\",{\"data-slot\":\"skeleton\",className:De(\"bg-accent animate-pulse rounded-md\",i),...l})}function mN(){return n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(Ot,{className:\"p-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 mb-4\",children:[n.jsx(os,{className:\"w-12 h-12 rounded-lg\"}),n.jsxs(\"div\",{className:\"space-y-2 flex-1\",children:[n.jsx(os,{className:\"h-5 w-32\"}),n.jsx(os,{className:\"h-4 w-48\"})]})]}),n.jsx(\"div\",{className:\"grid grid-cols-3 gap-3\",children:[1,2,3].map(i=>n.jsx(\"div\",{className:\"space-y-2\",children:n.jsx(os,{className:\"h-20 w-full rounded-lg\"})},i))})]}),[1,2,3].map(i=>n.jsx(Ot,{className:\"p-6\",children:n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(os,{className:\"h-6 w-48\"}),n.jsx(os,{className:\"h-4 w-full\"}),n.jsx(os,{className:\"h-4 w-3/4\"})]})},i))]})}function hN(i,l,o=30){x.useEffect(()=>{let u=0;const d=g=>{u=g.touches[0].clientX},h=g=>{const E=g.touches[0].clientX-u;u<o&&E>30&&(g.cancelable&&g.preventDefault(),window.navigator.vibrate&&window.navigator.vibrate(20),i(),u=window.innerWidth),u>window.innerWidth-o&&E<-30&&(g.cancelable&&g.preventDefault(),window.navigator.vibrate&&window.navigator.vibrate(20),l(),u=0)};return document.addEventListener(\"touchstart\",d,{passive:!0}),document.addEventListener(\"touchmove\",h,{passive:!1}),()=>{document.removeEventListener(\"touchstart\",d),document.removeEventListener(\"touchmove\",h)}},[i,l,o])}const pN=({onOpenAI:i,onAddTransaction:l,onMigrate:o,isVisible:u})=>n.jsxs(\"div\",{id:\"fab-dock\",className:`fixed right-5 bottom-[110px] flex flex-col gap-3.5 z-[110] transition-all duration-500 ease-quantum ${u?\"translate-x-0 opacity-100\":\"translate-x-[100px] opacity-0\"}`,children:[n.jsx(\"div\",{onClick:i,title:\"AI Assistant\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-[#a855f74d] shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-[#A855F7] hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(Ga,{className:\"w-5 h-5 group-hover:rotate-12 transition-transform\"})}),n.jsx(\"div\",{onClick:o,title:\"Migrate Capital\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-indigo-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-indigo-400 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(Au,{className:\"w-5 h-5 group-hover:scale-110 transition-transform\"})}),n.jsx(\"div\",{onClick:()=>l(\"debt\"),title:\"Added Personal IOU\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-yellow-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-yellow-500 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(Z0,{className:\"w-5 h-5 group-hover:-translate-y-0.5 transition-transform\"})}),n.jsx(\"div\",{onClick:()=>l(\"income\"),title:\"Add Money In\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-emerald-500/40 shadow-[0_0_20px_rgba(16,185,129,0.1)] cursor-pointer text-emerald-500 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(kr,{className:\"w-5 h-5 group-hover:rotate-90 transition-transform\"})}),n.jsx(\"div\",{onClick:()=>l(\"expense\"),title:\"Add Money Out\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-rose-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-rose-500 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(Ey,{className:\"w-5 h-5 group-hover:scale-110 transition-transform\"})})]}),gN=he.memo(({isOpen:i,onClose:l,context:o,settings:u,isOffline:d=!1})=>{const[h,g]=x.useState(\"\"),[N,E]=x.useState([{text:\"Hello! I've analyzed your cash flow. How can I assist with your goals?\",type:\"ai\"}]),[S,p]=x.useState(!1),f=x.useRef(null);x.useEffect(()=>{f.current&&f.current.scrollIntoView({behavior:\"smooth\"})},[N]);const w=async()=>{if(!h.trim()||S)return;const A=h.trim();g(\"\"),E(T=>[...T,{text:A,type:\"user\"}]),p(!0);try{if(d){setTimeout(()=>{E(C=>[...C,{text:\"FinHub is currently in 'Cached View' (Offline). I've analyzed your local financial fabric: your liquidity nodes are stable, but synchronizing with global AI intelligence requires a stable link. How can I help you optimize your local state?\",type:\"ai\"}]),p(!1)},1e3);return}const T=await Wj({userPrompt:A,context:o,settings:u,persona:\"ANALYST\"});T.error?E(C=>[...C,{text:T.error,type:\"ai\"}]):E(C=>[...C,{text:T.text||\"Analyzing financial pattern...\",type:\"ai\"}])}catch{E(T=>[...T,{text:\"Connection error. FinHub has transitioned to local 'Cached View'.\",type:\"ai\"}])}finally{d||p(!1)}};return i?n.jsxs(\"div\",{id:\"ai-chat-overlay\",className:\"fixed inset-0 bg-[#020408] z-[200] flex flex-col p-6 animate-in fade-in zoom-in-95 duration-300\",children:[n.jsx(\"div\",{className:\"absolute inset-0 bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-indigo-500/10 via-transparent to-transparent opacity-50\"}),n.jsxs(\"div\",{className:\"flex justify-between items-center mb-10 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-indigo-500/10 rounded-2xl flex items-center justify-center border border-indigo-500/20\",children:n.jsx(Ga,{className:\"text-indigo-400 w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"h2\",{className:\"font-black text-2xl text-white tracking-tight leading-none\",children:\"AI Analyst\"}),n.jsxs(\"div\",{className:\"flex items-center gap-2 mt-1\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500\",children:\"Neural Core Context\"}),d&&n.jsx(\"span\",{className:\"text-[8px] bg-amber-500/10 text-amber-500 px-1.5 py-0.5 rounded border border-amber-500/20 font-black tracking-tighter uppercase\",children:\"Cached View\"})]})]})]}),n.jsx(\"button\",{onClick:l,\"aria-label\":\"Close Chat\",className:\"bg-white/5 w-12 h-12 rounded-full flex items-center justify-center hover:bg-white/10 hover:text-white text-slate-400 transition-all active:scale-95\",children:n.jsx(il,{className:\"w-6 h-6\"})})]}),n.jsxs(\"div\",{id:\"chat-messages\",className:\"flex-1 overflow-y-auto space-y-4 pr-2 custom-scrollbar\",children:[N.map((A,T)=>n.jsxs(\"div\",{className:De(\"p-4 rounded-[24px] text-sm leading-relaxed\",A.type===\"ai\"?\"bg-slate-900 border border-white/5 text-slate-200 self-start max-w-[85%]\":\"bg-indigo-600 text-white font-medium shadow-lg shadow-indigo-600/20 self-end max-w-[85%]\"),children:[A.type===\"ai\"&&n.jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[n.jsx(Ga,{className:\"w-3 h-3 text-indigo-400 font-black\"}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500\",children:\"Guru Analysis\"})]}),A.text]},T)),S&&n.jsx(\"div\",{className:\"p-4 bg-slate-900 border border-white/5 rounded-[24px] self-start animate-pulse\",children:n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:0ms]\"}),n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:150ms]\"}),n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:300ms]\"})]})}),n.jsx(\"div\",{ref:f})]}),n.jsxs(\"div\",{className:\"mt-8 flex gap-3 p-2 bg-slate-900/40 rounded-[28px] border border-white/5 relative z-10\",children:[n.jsx(\"input\",{type:\"text\",value:h,onChange:A=>g(A.target.value),onKeyDown:A=>A.key===\"Enter\"&&w(),placeholder:\"Ask the analyst...\",className:\"flex-1 bg-transparent border-none px-6 py-4 text-white focus:outline-none placeholder:text-slate-600 font-bold\"}),n.jsx(\"button\",{onClick:w,disabled:S||!h.trim(),\"aria-label\":\"Send Message\",className:\"w-14 h-14 bg-indigo-600 rounded-[22px] flex items-center justify-center shadow-lg shadow-indigo-900/30 hover:bg-indigo-500 transition-all active:scale-90 disabled:opacity-50 disabled:cursor-not-allowed group\",children:n.jsx(Ay,{className:\"w-6 h-6 text-white group-hover:-translate-y-1 transition-transform\"})})]}),n.jsx(\"p\",{className:\"text-[9px] font-bold text-slate-600 text-center uppercase tracking-widest mt-4\",children:\"Encryption Verified // Neural Fabric Link Stable\"})]}):null});class xN extends x.Component{state={hasError:!1};static getDerivedStateFromError(l){return{hasError:!0,error:l}}componentDidCatch(l,o){console.error(\"Uncaught error:\",l,o)}render(){return this.state.hasError?n.jsx(\"div\",{className:\"min-h-[400px] flex items-center justify-center p-6\",children:n.jsxs(Ot,{className:\"max-w-md w-full p-8 bg-slate-900 border-white/10 text-center space-y-6 rounded-[32px]\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-rose-500/10 rounded-full flex items-center justify-center mx-auto\",children:n.jsx(el,{className:\"w-8 h-8 text-rose-500\"})}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(\"h2\",{className:\"text-xl font-black text-white uppercase tracking-tight\",children:\"System Glitch Detected\"}),n.jsx(\"p\",{className:\"text-sm text-slate-400 font-medium\",children:\"The neural link to this component was interrupted. This usually happens during background updates.\"})]}),this.state.error&&n.jsx(\"pre\",{className:\"text-[10px] bg-black/40 p-3 rounded-xl text-rose-400/80 overflow-x-auto text-left font-mono\",children:this.state.error.message}),n.jsxs(Re,{onClick:()=>window.location.reload(),className:\"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-black py-6 rounded-2xl gap-2 h-auto\",children:[n.jsx(ei,{className:\"w-4 h-4\"}),\"Re-establish Connection\"]})]})}):this.props.children}}var z0;(function(i){i[i.NONE=0]=\"NONE\",i[i.TOUCH_ID=1]=\"TOUCH_ID\",i[i.FACE_ID=2]=\"FACE_ID\",i[i.FINGERPRINT=3]=\"FINGERPRINT\",i[i.FACE_AUTHENTICATION=4]=\"FACE_AUTHENTICATION\",i[i.IRIS_AUTHENTICATION=5]=\"IRIS_AUTHENTICATION\",i[i.MULTIPLE=6]=\"MULTIPLE\"})(z0||(z0={}));var L0;(function(i){i[i.NONE=0]=\"NONE\",i[i.STRONG=1]=\"STRONG\",i[i.WEAK=2]=\"WEAK\"})(L0||(L0={}));var U0;(function(i){i[i.UNKNOWN_ERROR=0]=\"UNKNOWN_ERROR\",i[i.BIOMETRICS_UNAVAILABLE=1]=\"BIOMETRICS_UNAVAILABLE\",i[i.USER_LOCKOUT=2]=\"USER_LOCKOUT\",i[i.BIOMETRICS_NOT_ENROLLED=3]=\"BIOMETRICS_NOT_ENROLLED\",i[i.USER_TEMPORARY_LOCKOUT=4]=\"USER_TEMPORARY_LOCKOUT\",i[i.AUTHENTICATION_FAILED=10]=\"AUTHENTICATION_FAILED\",i[i.APP_CANCEL=11]=\"APP_CANCEL\",i[i.INVALID_CONTEXT=12]=\"INVALID_CONTEXT\",i[i.NOT_INTERACTIVE=13]=\"NOT_INTERACTIVE\",i[i.PASSCODE_NOT_SET=14]=\"PASSCODE_NOT_SET\",i[i.SYSTEM_CANCEL=15]=\"SYSTEM_CANCEL\",i[i.USER_CANCEL=16]=\"USER_CANCEL\",i[i.USER_FALLBACK=17]=\"USER_FALLBACK\"})(U0||(U0={}));const I0=cs(\"NativeBiometric\",{web:()=>Fa(()=>import(\"./web-CyZe6ZkC.js\"),__vite__mapDeps([7,1,2,3,4])).then(i=>new i.NativeBiometricWeb)}),bN=()=>{const{checkIdentity:i,login:l,signup:o,sendOtp:u,verifyOtp:d,resetPin:h,isRememberedUser:g,rememberedMobile:N,pendingMobile:E,clearPendingSession:S}=ai(),[p,f]=x.useState(\"identity\"),[w,A]=x.useState(\"\"),[T,C]=x.useState(\"\"),[M,y]=x.useState(\"\"),[L,z]=x.useState(\"\"),[j,G]=x.useState(\"\"),[ee,Z]=x.useState(\"\"),[_,B]=x.useState(!1),[J,ne]=x.useState(!1),[F,oe]=x.useState(!1),[ge,O]=x.useState(!1),k=x.useRef(null),U=he.useCallback(async()=>{if(Gn.isNativePlatform())try{if(!(await I0.isAvailable()).isAvailable)return;O(!0),await I0.verifyIdentity({reason:\"Authenticate to access your private node\",title:\"Login to FinHub\",subtitle:\"Use biometrics to login\",description:\"Touch the sensor to verify identity\",negativeButtonText:\"Cancel\"}),await l(\"2255\",!0)||O(!1)}catch(le){console.error(\"Biometric error:\",le),O(!1),navigator.vibrate&&navigator.vibrate([50,50])}},[l]);x.useEffect(()=>{g&&N?(A(N),f(\"verify\"),U()):E&&(A(E),f(\"verify\"))},[g,N,E,U]);const Q=he.useCallback(async()=>{if(w.length!==10)return;const le=await i(w);f(le?\"verify\":\"create_name\"),C(\"\")},[w,i]);x.useEffect(()=>{p===\"identity\"&&w.length===10&&Q()},[w,p,Q]);const ae=he.useCallback(async()=>{p===\"verify\"?await l(T,J)?(navigator.vibrate&&navigator.vibrate([10]),!J&&!g&&oe(!0)):q():p===\"create_pin\"?T.length===4&&(await o(w,T,M,J)||q()):p===\"reset_pin\"&&(j===ee&&j.length===4&&await h(w,j)?(f(\"verify\"),C(\"\"),G(\"\"),Z(\"\")):q())},[p,l,T,J,o,w,M,h,j,ee,g]);x.useEffect(()=>{p===\"verify\"&&T.length===4&&ae()},[T,p,ae]),x.useEffect(()=>{k.current&&(k.current.focus(),k.current.type!==\"hidden\"&&k.current.select())},[p]);const v=async()=>{await u(w)&&f(\"otp_reset\")},D=async()=>{if(M.trim().length<2)return;await u(w)&&f(\"otp_verify\")},W=async()=>{await d(w,L)?f(p===\"otp_verify\"?\"create_pin\":\"reset_pin\"):q()},q=()=>{B(!0),navigator.vibrate&&navigator.vibrate([50,30,50]),setTimeout(()=>B(!1),500),z(\"\"),C(\"\"),Z(\"\")},Y=()=>p===\"identity\"?w.length!==10:p===\"verify\"?T.length!==4:p===\"otp_verify\"||p===\"otp_reset\"?L.length!==4:p===\"create_name\"?M.trim().length<2:p===\"create_pin\"?T.length!==4:p===\"reset_pin\"?j.length!==4||ee.length!==4:!1,V=()=>{S(),f(\"identity\"),A(\"\"),C(\"\")},te=le=>{le.key===\"Enter\"&&!Y()&&me()()},me=()=>{switch(p){case\"identity\":return Q;case\"otp_verify\":case\"otp_reset\":return W;case\"create_name\":return D;case\"verify\":case\"create_pin\":case\"reset_pin\":return ae;default:return()=>{}}},ie=()=>{switch(p){case\"identity\":return\"Continue\";case\"otp_verify\":case\"otp_reset\":return\"Verify OTP\";case\"create_name\":return\"Next\";case\"verify\":return\"Login\";case\"create_pin\":return\"Create Account\";case\"reset_pin\":return\"Reset PIN\";default:return\"Continue\"}};return n.jsxs(\"div\",{className:\"fixed inset-0 flex flex-col items-center justify-center overflow-hidden font-sans auth-mesh-gradient z-[9999999]\",children:[n.jsx(\"div\",{className:\"absolute inset-0 z-0 bg-[url('/mesh-grid.svg')] opacity-20\"}),n.jsxs(Le.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},className:\"absolute top-12 z-10 flex flex-col items-center gap-2\",children:[n.jsx(\"img\",{src:\"/images/logo-dark.png\",alt:\"FinHub\",className:\"h-12 w-auto\"}),n.jsx(\"span\",{className:\"text-xs font-medium text-white/40 tracking-widest uppercase\",children:\"v0.1 Beta\"})]}),n.jsxs(\"div\",{className:\"z-10 w-full max-w-sm px-8\",children:[n.jsxs(Bn,{mode:\"wait\",children:[p===\"identity\"&&n.jsxs(Le.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},exit:{x:-20,opacity:0},className:\"flex flex-col gap-6\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Welcome\"}),n.jsx(\"p\",{className:\"text-white/50 text-sm mt-2\",children:\"Enter your mobile number to continue\"})]}),n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-sky-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"Mobile Number\"}),n.jsx(\"input\",{ref:k,type:\"text\",inputMode:\"numeric\",maxLength:10,value:w,onChange:le=>A(le.target.value.replace(/\\D/g,\"\")),onKeyDown:te,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"999 999 9999\"})]}),n.jsxs(\"div\",{onClick:()=>{ne(!J),navigator.vibrate&&navigator.vibrate(5)},className:\"flex items-center gap-3 cursor-pointer self-center\",children:[n.jsx(\"div\",{className:`h-5 w-5 rounded-md border transition-all flex items-center justify-center ${J?\"bg-sky-500 border-sky-500\":\"border-white/20 bg-white/5\"}`,children:J&&n.jsx(Cu,{className:\"h-3.5 w-3.5 text-white\"})}),n.jsx(\"span\",{className:\"text-sm text-white/60 font-medium\",children:\"Remember me for 30 days\"})]})]},\"identity\"),p===\"create_name\"&&n.jsxs(Le.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},exit:{x:-20,opacity:0},className:\"flex flex-col gap-6\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Who are you?\"}),n.jsx(\"p\",{className:\"text-white/50 text-sm mt-2\",children:\"Personalize your node experience\"})]}),n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-sky-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"Full Name\"}),n.jsx(\"input\",{ref:k,type:\"text\",value:M,onChange:le=>y(le.target.value),onKeyDown:te,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"Joe Doe\"})]})]},\"create_name\"),(p===\"otp_verify\"||p===\"otp_reset\")&&n.jsxs(Le.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,x:_?[0,-10,10,-10,10,0]:0},exit:{scale:1.1,opacity:0},className:\"relative flex flex-col gap-8 items-center\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"div\",{className:\"mb-4 flex justify-center\",children:n.jsx(\"div\",{className:\"p-4 rounded-full bg-white/5 ring-1 ring-white/10\",children:n.jsx(ky,{className:\"h-8 w-8 text-sky-400\"})})}),n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Verify Node\"}),n.jsxs(\"p\",{className:\"text-white/40 text-sm mt-2\",children:[\"Enter the 4-digit code sent to\",n.jsx(\"br\",{}),n.jsx(\"span\",{className:\"text-white/70\",children:w})]})]}),n.jsxs(\"div\",{className:\"group relative flex flex-col items-center justify-center rounded-[32px] bg-white/5 p-10 ring-1 ring-white/10 backdrop-blur-md\",children:[n.jsx(\"div\",{className:\"flex gap-5\",children:[0,1,2,3].map(le=>n.jsx(Le.div,{animate:{scale:le<L.length?1.2:1,backgroundColor:le<L.length?\"#fff\":\"rgba(255,255,255,0.1)\"},transition:{duration:.1},className:\"h-3.5 w-3.5 rounded-full\"},le))}),n.jsx(\"input\",{ref:k,type:\"password\",inputMode:\"numeric\",maxLength:4,value:L,onChange:le=>z(le.target.value.replace(/\\D/g,\"\")),onKeyDown:te,className:\"absolute inset-0 opacity-0 cursor-default\",\"aria-label\":\"One-time Password\",placeholder:\"OTP\"})]})]},\"otp\"),p===\"reset_pin\"&&n.jsxs(Le.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,x:_?[0,-10,10,-10,10,0]:0},exit:{scale:1.1,opacity:0},className:\"relative flex flex-col gap-8 items-center\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"div\",{className:\"mb-4 flex justify-center\",children:n.jsx(\"div\",{className:\"p-4 rounded-full bg-white/5 ring-1 ring-white/10\",children:n.jsx(Ty,{className:\"h-8 w-8 text-amber-400\"})})}),n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Reset PIN\"}),n.jsx(\"p\",{className:\"text-white/40 text-sm mt-2\",children:\"Choose a new secure 4-digit access code\"})]}),n.jsxs(\"div\",{className:\"space-y-4 w-full\",children:[n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-amber-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"New PIN\"}),n.jsx(\"input\",{type:\"password\",inputMode:\"numeric\",maxLength:4,value:j,onChange:le=>G(le.target.value.replace(/\\D/g,\"\")),onKeyDown:te,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"****\"})]}),n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-amber-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"Confirm PIN\"}),n.jsx(\"input\",{type:\"password\",inputMode:\"numeric\",maxLength:4,value:ee,onChange:le=>Z(le.target.value.replace(/\\D/g,\"\")),onKeyDown:te,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"****\"})]})]})]},\"reset_pin\"),(p===\"verify\"||p===\"create_pin\")&&n.jsxs(Le.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,x:_?[0,-10,10,-10,10,0]:0},exit:{scale:1.1,opacity:0},className:\"relative flex flex-col gap-8 items-center\",children:[n.jsx(Le.div,{initial:{opacity:0},animate:{opacity:1},className:\"fixed inset-0 z-[-1] bg-black/80 backdrop-blur-xl\"}),n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(Le.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:\"mb-4 flex justify-center\",children:n.jsx(\"div\",{className:\"p-4 rounded-full bg-white/5 ring-1 ring-white/10\",children:n.jsx(sl,{className:\"h-8 w-8 text-sky-400\"})})}),n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:p===\"verify\"?\"Private Access\":\"Secure Setup\"}),n.jsx(\"p\",{className:\"text-white/40 text-sm mt-2\",children:p===\"verify\"?\"Encrypted PIN required\":\"Create your master PIN\"})]}),n.jsxs(\"div\",{className:\"group relative flex flex-col items-center justify-center rounded-[32px] bg-white/5 p-10 ring-1 ring-white/10 backdrop-blur-md\",children:[n.jsx(\"div\",{className:\"flex gap-5\",children:[0,1,2,3].map(le=>n.jsx(Le.div,{animate:{scale:le<T.length?1.2:1,backgroundColor:le<T.length?\"#fff\":\"rgba(255,255,255,0.1)\"},transition:{duration:.1},className:\"h-3.5 w-3.5 rounded-full\"},le))}),n.jsx(\"input\",{ref:k,type:\"password\",inputMode:\"numeric\",maxLength:4,value:T,onChange:le=>C(le.target.value.replace(/\\D/g,\"\")),onKeyDown:te,className:\"absolute inset-0 opacity-0 cursor-default\",\"aria-label\":\"Access PIN\",placeholder:\"PIN\"})]}),p===\"verify\"&&n.jsxs(\"div\",{className:\"flex flex-col items-center gap-4\",children:[n.jsxs(\"button\",{onClick:U,className:\"flex items-center gap-2 text-sky-400 text-sm font-medium\",children:[n.jsx(Hn,{className:\"h-5 w-5\"}),\" Use Biometrics\"]}),n.jsx(\"button\",{onClick:v,className:\"text-white/30 text-xs hover:text-white/50 transition-colors\",children:\"Forgot PIN? Reset via SMS\"}),n.jsx(\"button\",{onClick:V,className:\"text-sky-500/50 text-[10px] font-bold uppercase tracking-widest hover:text-sky-400/80 transition-colors mt-2\",children:\"Login with another account\"})]})]},\"pin\")]}),n.jsxs(Le.button,{onClick:me(),disabled:Y(),className:`mt-8 flex w-full items-center justify-center gap-2 rounded-[22px] py-4 text-base font-semibold text-white shadow-lg transition-all ${Y()?\"cursor-not-allowed bg-[#3A3A3C] opacity-50\":\"bg-gradient-to-r from-[#0A84FF] to-[#0047AB] shadow-sky-500/20 active:scale-95\"}`,whileTap:{scale:.98},children:[ie(),!Y()&&n.jsx(P0,{className:\"h-4 w-4\"})]})]}),n.jsx(Bn,{children:F&&n.jsx(Le.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"fixed inset-0 z-[60] flex items-end justify-center bg-black/60 p-6 backdrop-blur-sm\",children:n.jsxs(Le.div,{initial:{y:100},animate:{y:0},exit:{y:100},className:\"w-full max-w-sm rounded-[32px] bg-[#1C1C1E] p-8 text-center ring-1 ring-white/10 shadow-2xl\",children:[n.jsx(\"div\",{className:\"mx-auto mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-sky-500/20 text-sky-400\",children:n.jsx(Cu,{className:\"h-8 w-8\"})}),n.jsx(\"h3\",{className:\"text-xl font-bold text-white\",children:\"Speed up your next login?\"}),n.jsx(\"p\",{className:\"mt-2 text-sm text-white/50\",children:\"We can securely remember your ID so you can skip the mobile entry next time.\"}),n.jsxs(\"div\",{className:\"mt-8 flex flex-col gap-3\",children:[n.jsx(\"button\",{onClick:()=>{localStorage.setItem(\"finhub_remembered_mobile\",w),oe(!1)},className:\"w-full rounded-2xl bg-sky-500 py-4 font-semibold text-white active:scale-95 transition-all\",children:\"Enable Smart Login\"}),n.jsx(\"button\",{onClick:()=>oe(!1),className:\"w-full py-2 text-sm font-medium text-white/30 active:text-white/50\",children:\"Maybe later\"})]})]})})}),n.jsx(Bn,{children:ge&&n.jsx(Le.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"fixed inset-0 z-[70] flex flex-col items-center justify-center bg-black/40 backdrop-blur-md\",children:n.jsxs(Le.div,{initial:{scale:.8},animate:{scale:1},className:\"flex flex-col items-center\",children:[n.jsxs(\"div\",{className:\"relative mb-6\",children:[n.jsx(Le.div,{animate:{scale:[1,1.2,1],opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0},className:\"absolute inset-0 rounded-full bg-sky-500/30 blur-2xl\"}),n.jsx(\"div\",{className:\"relative flex h-24 w-24 items-center justify-center rounded-full bg-white/5 ring-1 ring-white/20\",children:n.jsx(Hn,{className:\"h-12 w-12 text-sky-400\"})})]}),n.jsx(\"h3\",{className:\"text-lg font-medium text-white\",children:\"Scanning Biometrics\"}),n.jsx(\"p\",{className:\"mt-2 text-sm text-white/40 italic\",children:\"Verifying your node identity...\"}),n.jsx(\"button\",{onClick:()=>O(!1),className:\"mt-12 text-xs font-medium uppercase tracking-widest text-white/20 hover:text-white/40\",children:\"Cancel & use PIN\"})]})})}),n.jsx(\"div\",{className:\"absolute bottom-8 text-center text-[10px] text-white/20\",children:n.jsx(\"p\",{children:\"Protected by FinHub Security. Data is localized and encrypted.\"})})]})},B0=({message:i=\"Secure Node Handshake\",subMessage:l=\"Re-encrypting local session...\"})=>n.jsxs(\"div\",{className:\"fixed inset-0 z-[100] flex flex-col items-center justify-center bg-[#000000] overflow-hidden\",children:[n.jsx(Le.div,{animate:{opacity:[.1,.2,.1],scale:[1,1.1,1]},transition:{duration:4,repeat:1/0,ease:\"easeInOut\"},className:\"absolute h-[500px] w-[500px] rounded-full bg-sky-500/10 blur-[120px]\"}),n.jsxs(\"div\",{className:\"relative flex flex-col items-center justify-center gap-12\",children:[n.jsxs(\"div\",{className:\"relative flex items-center justify-center\",children:[[0,1,2].map(o=>n.jsx(Le.div,{className:\"absolute rounded-full border border-sky-400/20\",initial:{width:80,height:80,opacity:0},animate:{width:[80,250],height:[80,250],opacity:[.4,0]},transition:{duration:3,repeat:1/0,delay:o*1,ease:\"easeOut\"}},o)),n.jsx(Le.div,{animate:{y:[0,-10,0]},transition:{duration:4,repeat:1/0,ease:\"easeInOut\"},className:\"relative z-10\",children:n.jsx(Le.div,{animate:{scale:[1,1.1,1],filter:[\"drop-shadow(0 0 15px rgba(56,189,248,0.3))\",\"drop-shadow(0 0 30px rgba(56,189,248,0.6))\",\"drop-shadow(0 0 15px rgba(56,189,248,0.3))\"]},transition:{duration:3,repeat:1/0,ease:\"easeInOut\"},className:\"relative flex h-32 w-32 items-center justify-center rounded-[32px] bg-gradient-to-br from-[#1C1C1E] to-[#000000] ring-1 ring-white/10 shadow-2xl backdrop-blur-xl\",children:n.jsx(\"img\",{src:\"/images/logo-icon.png\",alt:\"FinHub\",className:\"h-20 w-20 object-contain drop-shadow-lg\"})})})]}),n.jsx(Le.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:\"flex flex-col items-center gap-2\",children:n.jsxs(\"div\",{className:\"flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/5 ring-1 ring-white/5 backdrop-blur-md\",children:[n.jsx(sl,{className:\"h-3 w-3 text-sky-400\"}),n.jsx(\"span\",{className:\"text-[10px] font-bold tracking-[0.2em] uppercase text-white/40\",children:i})]})})]}),n.jsxs(\"div\",{className:\"absolute bottom-16 w-full max-w-[200px] px-6\",children:[n.jsx(\"div\",{className:\"h-[2px] w-full overflow-hidden rounded-full bg-white/10\",children:n.jsx(Le.div,{initial:{x:\"-100%\"},animate:{x:\"100%\"},transition:{duration:1.5,repeat:1/0,ease:\"easeInOut\"},className:\"h-full w-1/3 bg-gradient-to-r from-transparent via-sky-400 to-transparent\"})}),n.jsx(\"div\",{className:\"mt-3 text-center\",children:n.jsx(\"span\",{className:\"text-[10px] font-medium text-white/20 italic tracking-wider\",children:l})})]})]}),yN=({isOpen:i,onClose:l})=>n.jsx(Bn,{children:i&&n.jsxs(n.Fragment,{children:[n.jsx(Le.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:l,className:\"fixed inset-0 z-[200] bg-black/60 backdrop-blur-sm\"}),n.jsx(\"div\",{className:\"fixed inset-0 z-[201] flex items-center justify-center p-4 pointer-events-none\",children:n.jsxs(Le.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:\"spring\",damping:25,stiffness:300},className:\"w-full max-w-md bg-slate-900 border border-white/5 rounded-[32px] shadow-2xl overflow-hidden pointer-events-auto relative\",children:[n.jsx(\"div\",{className:\"absolute top-0 inset-x-0 h-32 bg-gradient-to-b from-indigo-500/10 to-transparent pointer-events-none\"}),n.jsx(\"button\",{onClick:l,className:\"absolute top-6 right-6 p-2 rounded-full bg-white/5 text-slate-400 hover:text-white hover:bg-white/10 transition-colors z-10\",\"aria-label\":\"Close about us popup\",children:n.jsx(il,{className:\"w-5 h-5\"})}),n.jsxs(\"div\",{className:\"p-8 pt-12 space-y-8 relative\",children:[n.jsxs(\"div\",{className:\"flex flex-col items-center text-center gap-3\",children:[n.jsx(\"div\",{className:\"w-16 h-16 rounded-[22px] bg-indigo-600 flex items-center justify-center shadow-lg shadow-indigo-500/20\",children:n.jsx(Dy,{className:\"w-8 h-8 text-white\"})}),n.jsxs(\"div\",{children:[n.jsx(\"h2\",{className:\"text-2xl font-black text-white tracking-tight uppercase\",children:\"FinHub Core\"}),n.jsx(\"p\",{className:\"text-[10px] font-bold text-indigo-400 uppercase tracking-[0.3em]\",children:\"Quantum Fabric v50.3\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"section\",{className:\"space-y-2\",children:[n.jsxs(\"h3\",{className:\"text-[10px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2\",children:[n.jsx(Hn,{className:\"w-3.5 h-3.5\"}),\"Our Vision\"]}),n.jsx(\"p\",{className:\"text-sm text-slate-300 leading-relaxed font-medium\",children:\"FinHub is designed to be the central nervous system of your personal economy. We merge neural-inspired data models with high-precision tracking to navigate complex wealth landscapes.\"})]}),n.jsxs(\"section\",{className:\"space-y-2\",children:[n.jsxs(\"h3\",{className:\"text-[10px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2\",children:[n.jsx(sl,{className:\"w-3.5 h-3.5\"}),\"Core Features\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[n.jsxs(\"div\",{className:\"bg-white/5 p-3 rounded-2xl border border-white/5\",children:[n.jsx(\"span\",{className:\"block text-[8px] font-black text-indigo-400 uppercase mb-1\",children:\"Localization\"}),n.jsx(\"span\",{className:\"text-[10px] text-slate-400 leading-tight\",children:\"Sovereign identity via node storage.\"})]}),n.jsxs(\"div\",{className:\"bg-white/5 p-3 rounded-2xl border border-white/5\",children:[n.jsx(\"span\",{className:\"block text-[8px] font-black text-indigo-400 uppercase mb-1\",children:\"Clamping Logic\"}),n.jsx(\"span\",{className:\"text-[10px] text-slate-400 leading-tight\",children:\"Mathematical stability in all simulations.\"})]})]})]}),n.jsxs(\"div\",{className:\"pt-6 border-t border-white/5 flex flex-col items-center gap-2\",children:[n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-600 uppercase tracking-widest\",children:\"Architect: Sijo Joseph\"}),n.jsx(\"p\",{className:\"text-[10px] font-black text-slate-800 uppercase tracking-[0.2em]\",children:\"© 2025 Neural FinHub Fabric\"})]})]})]})]})})]})}),vN=i=>{const{accounts:l,recurringTransactions:o,goals:u}=i,d=new Date,h=new Date;h.setDate(d.getDate()+7);const g=l.filter(B=>B.type!==\"credit_card\"),N=g.reduce((B,J)=>B+(J.balance||0),0),E=o.filter(B=>{const J=new Date(B.startDate);return B.type===\"expense\"&&J<=h&&J>=d}).reduce((B,J)=>B+J.amount,0),S=u.reduce((B,J)=>B+(J.currentAmount||0),0),p=N-E-S,f=l.filter(B=>B.type===\"credit_card\"),w=f.reduce((B,J)=>{const ne=J.creditLimit||0,F=J.balance||0,oe=Math.max(0,ne-F),ge=J.safeLimitPercentage||30,O=ne*ge/100;return B+Math.min(oe,O)},0),A=p+w;let T=-1/0,C=null,M=null;g.forEach(B=>{const J=o.filter(oe=>oe.accountId===B.id&&oe.type===\"expense\").reduce((oe,ge)=>{const O=new Date(ge.startDate);return O<=h&&O>=d?oe+ge.amount:oe},0),ne=B.min_buffer||0,F=B.balance-J-ne;F>T&&(T=F,C=B.id,M=B.name)});let y=\"SAFE\";const L=g.some(B=>{const J=o.filter(ne=>ne.accountId===B.id&&ne.type===\"expense\").reduce((ne,F)=>{const oe=new Date(F.startDate);return oe<=h&&oe>=d?ne+F.amount:ne},0);return B.balance<J});p<0||L?y=\"CRITICAL\":(p<N*.1||p<2e3)&&(y=\"TIGHT\");let z=null;const j=f.find(B=>B.balance/(B.creditLimit||1)>.7),G=g.find(B=>{const J=o.filter(ne=>ne.accountId===B.id&&ne.type===\"expense\").reduce((ne,F)=>{const oe=new Date(F.startDate);return oe<=h&&oe>=d?ne+F.amount:ne},0);return B.balance<J});G?z=`Payment risk: ${G.name} insufficient for upcoming dues.`:y===\"TIGHT\"?z=\"Low Safe-to-Spend: Consider postponing large purchases.\":j&&(z=`High credit utilization on ${j.name} (>70%).`);const ee=o.filter(B=>B.type===\"expense\").map(B=>{const J=new Date(B.startDate),ne=Math.ceil((J.getTime()-d.getTime())/(1e3*60*60*24));return{...B,daysRemaining:ne}}).filter(B=>B.daysRemaining>=0).sort((B,J)=>B.daysRemaining-J.daysRemaining),Z=ee.length>0?{title:ee[0].description||\"Upcoming Payment\",amount:ee[0].amount,daysRemaining:ee[0].daysRemaining}:null;let _=null;if(y===\"CRITICAL\"&&G&&C&&C!==G.id){const B=o.filter(J=>J.accountId===G.id&&J.type===\"expense\").reduce((J,ne)=>{const F=new Date(ne.startDate);return F<=h&&F>=d?J+ne.amount:J},0);_={fromAccountId:C,toAccountId:G.id,amount:B-G.balance}}return{liquidBalance:N,upcomingDues:E,reservedAmount:S,liquidSafeSpend:p,creditSafeSpend:w,safeToSpendGlobal:A,suggestedSpendAccountId:C,suggestedSpendAccountName:M,suggestedReason:\"Highest free buffer after upcoming payments\",status:y,topAlert:z,quickFix:_,nextDue:Z}},wN=i=>({accounts:i.accounts||[],recurringTransactions:i.recurringTransactions||[],goals:i.goals||[],liabilities:i.liabilities||[],settings:i.settings||{}}),Zi={calculateStressFactor(i,l){if(l===0)return .6;const o=i/l;return o<=.3?1:o<=.5?.9:o<=.7?.75:.6},calculateHabitShare(i,l){if(l===0)return .02;const o=i/l;return Math.min(Math.max(o,.02),.4)},calculateSSR(i,l,o,u){const d=l-o-u,h=new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate(),g=h-new Date().getDate()+1,N=d*(g/h);return N<=0?.6:Math.min(Math.max(i/N,.6),1)},calculateBaseLimit(i,l,o){return i*l*o},calculateProjection(i,l,o){return l===0?i:i/l*o},isDiscretionary(i){const l=[\"entertainment\",\"dining\",\"out\",\"shopping\",\"leisure\",\"hobby\",\"gift\",\"travel\",\"dress\",\"luxury\",\"movie\"],o=i.toLowerCase();return l.some(u=>o.includes(u))},calculateGap(i,l){return i-l}};function jN({className:i,value:l,indicatorClassName:o,...u}){return n.jsx(My,{\"data-slot\":\"progress\",className:De(\"bg-primary/20 relative h-2 w-full overflow-hidden rounded-full\",i),...u,children:n.jsx(_y,{\"data-slot\":\"progress-indicator\",className:De(\"bg-primary h-full w-full flex-1 transition-all\",o),style:{transform:`translateX(-${100-(l||0)}%)`}})})}const NN=()=>{const{expenses:i,incomes:l,liabilities:o,goals:u,accounts:d,emergencyFundAmount:h,currency:g}=ai(),{availableToSpend:N}=Gp({accounts:d,goals:u,liabilities:o,expenses:i,emergencyFundAmount:h}),E=x.useMemo(()=>{const f=new Date,w=f.getMonth(),A=f.getFullYear(),C=(ne=>new Date(A,w-ne,1))(2),y=l.filter(ne=>new Date(ne.date)>=C).reduce((ne,F)=>ne+F.amount,0)/3,L=o.reduce((ne,F)=>ne+(F.emiAmount||0),0),z=u.filter(ne=>ne.type===\"stability\"||ne.type===\"protection\"||ne.name.toLowerCase().includes(\"emergency\")).reduce((ne,F)=>ne+(F.monthly_contribution||0),0),j=z>0?z:.1*y,G=y-L-j,ee=Zi.calculateStressFactor(L,y),Z=Zi.calculateSSR(N,y,L,j),_=i.filter(ne=>new Date(ne.date)>=C),B=_.reduce((ne,F)=>ne+F.amount,0)/3,J={};return Tu.forEach(ne=>{const oe=_.filter(U=>U.category===ne.value).reduce((U,Q)=>U+Q.amount,0)/3,ge=Zi.calculateHabitShare(oe,B),O=Zi.calculateBaseLimit(G,ge,ee),k=Zi.isDiscretionary(ne.value);J[ne.value]=k?O*Math.min(Math.max(Z,.6),1):O}),{limits:J}},[i,l,o,u,N]),{limits:S}=E,p=f=>new Intl.NumberFormat(\"en-IN\",{style:\"currency\",currency:g||\"INR\",maximumFractionDigits:0}).format(f);return n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"header\",{className:\"px-1\",children:[n.jsx(\"h2\",{className:\"text-2xl font-black text-white tracking-tight\",children:\"Financial Guardrails\"}),n.jsx(\"p\",{className:\"text-slate-500 text-[10px] font-bold uppercase tracking-[0.2em] mt-1\",children:\"Hybrid Budget Engine v1.1\"})]}),n.jsx(\"div\",{className:\"grid gap-4\",children:Tu.map(f=>{const w=S[f.value]||0,A=i.filter(C=>{const M=new Date(C.date);return C.category===f.value&&M.getMonth()===new Date().getMonth()&&M.getFullYear()===new Date().getFullYear()}).reduce((C,M)=>C+M.amount,0),T=w>0?A/w*100:0;return n.jsxs(\"div\",{className:\"rounded-3xl border border-white/5 bg-white/5 p-5 transition-all hover:bg-white/10\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-start mb-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-xl\",role:\"img\",\"aria-label\":f.value,children:f.emoji}),n.jsxs(\"div\",{children:[n.jsx(\"h3\",{className:\"text-sm font-bold text-white\",children:f.value}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 uppercase tracking-widest mt-0.5\",children:\"Category Limit\"})]})]}),n.jsxs(\"div\",{className:\"text-right\",children:[n.jsx(\"p\",{className:\"text-sm font-black text-white\",children:p(w)}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 uppercase tracking-widest mt-0.5\",children:\"Monthly\"})]})]}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[10px] font-bold uppercase tracking-tighter\",children:[n.jsxs(\"span\",{className:\"text-slate-400\",children:[\"Spent: \",p(A)]}),n.jsxs(\"span\",{className:De(T>90?\"text-red-400\":\"text-emerald-400\"),children:[Math.round(T),\"%\"]})]}),n.jsx(jN,{value:T,className:\"h-1.5\",indicatorClassName:De(T>100?\"bg-red-500 shadow-[0_0_8px_rgba(239,68,68,0.5)]\":T>80?\"bg-orange-500 shadow-[0_0_8px_rgba(249,115,22,0.5)]\":\"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]\")})]})]},f.value)})})]})},SN=x.lazy(()=>Fa(()=>import(\"./Dashboard-IVoRIJ8c.js\"),__vite__mapDeps([8,1,2,9,10,4,3])).then(i=>({default:i.Dashboard}))),CN=x.lazy(()=>Fa(()=>import(\"./TransactionList-rKWzJlT2.js\"),__vite__mapDeps([11,1,2,10,3,4])).then(i=>({default:i.TransactionList}))),EN=x.lazy(()=>Fa(()=>import(\"./GoalsTracker-D6OcmKwC.js\"),__vite__mapDeps([12,1,2,3,4])).then(i=>({default:i.GoalsTracker}))),AN=x.lazy(()=>Fa(()=>import(\"./EmergencyFundsTab-gXH3z62T.js\"),__vite__mapDeps([13,1,2,3,4])).then(i=>({default:i.EmergencyFundsTab}))),kN=x.lazy(()=>Fa(()=>import(\"./InvestmentsTab-B4180PLB.js\"),__vite__mapDeps([14,1,2,9,10,4,3])).then(i=>({default:i.InvestmentsTab})));function TN(){const{settings:i,expenses:l,incomes:o,debts:u,goals:d,accounts:h,liabilities:g,notifications:N,emergencyFundAmount:E,investments:S,isLoading:p,refreshData:f,updateSettings:w,userId:A,createExpense:T,updateExpense:C,deleteExpense:M,createIncome:y,updateIncome:L,deleteIncome:z,createDebt:j,updateDebt:G,deleteDebt:ee,settleDebt:Z,createGoal:_,updateGoal:B,deleteGoal:J,createAccount:ne,updateAccount:F,deleteAccount:oe,setEmergencyFundAmount:ge,setNotifications:O,isFundAllocationOpen:k,fundAllocationType:U,closeFundAllocation:Q,performFundAllocation:ae,transferFunds:v,authStatus:D,isOffline:W,authMessage:q,backfillRequest:Y,setBackfillRequest:V,executeBackfill:te,createRecurring:me,recurringTransactions:ie}=ai(),[le,je]=x.useState(\"dashboard\"),[Ae,pe]=x.useState(!1),[ve,xe]=x.useState(\"expense\"),[Ke,We]=x.useState(null),[Ue,it]=x.useState(!1),[Ve,ke]=x.useState(!1),[Ft,fe]=x.useState(!1),[Se,ze]=x.useState(null),[lt,mt]=x.useState(!1),[_a,ga]=x.useState(!1),[Ra,Kt]=x.useState(!1),[Oa,ea]=x.useState(!1),[zt]=x.useState(null);hN(()=>ke(!0),()=>fe(!0)),x.useEffect(()=>{if(Gn.isNativePlatform()){(async()=>{try{(await Cr.checkPermissions()).display!==\"granted\"&&await Cr.requestPermissions()}catch(Ee){console.error(\"Error checking notification permissions:\",Ee)}})();const Fe=Cr.addListener(\"localNotificationActionPerformed\",Ee=>{const{notification:rt}=Ee,Ct=rt.extra;console.log(\"Native notification clicked:\",rt),Ct&&(Ct.achievementId?(ze(Ct.achievementId),mt(!0)):Ct.view&&je(Ct.view))});return()=>{Fe.then(Ee=>Ee.remove())}}},[]),x.useEffect(()=>{i.theme===\"dark\"?document.documentElement.classList.add(\"dark\"):document.documentElement.classList.remove(\"dark\")},[i.theme]);const{openFundAllocation:Ht}=ai();x.useEffect(()=>{window.showFundAllocation=Ht},[Ht]);const{currentMonthExpenses:ta}=x.useMemo(()=>{const de=new Date,Fe=de.getMonth(),Ee=de.getFullYear();return{currentMonthExpenses:l.filter(et=>!et.isInternalTransfer).filter(et=>{const bt=new Date(et.date);return bt.getMonth()===Fe&&bt.getFullYear()===Ee})}},[l]),xt=x.useMemo(()=>{const de=o.reduce((Zt,ht)=>Zt+ht.amount,0),Fe=l.reduce((Zt,ht)=>Zt+ht.amount,0),Ee=u.reduce((Zt,ht)=>Zt+ht.amount,0);if(de===0&&Ee===0)return{score:50,savingsRate:0,debtRatio:0,spendingRatio:0};const rt=[...o,...l,...u];let Ct=1;if(rt.length>0){const Zt=rt.map(Ur=>new Date(Ur.date).getTime()),ht=new Date(Math.min(...Zt)),pn=Math.abs(new Date().getTime()-ht.getTime()),si=Math.ceil(pn/(1e3*60*60*24*30));Ct=Math.max(1,si)}const bt=de/Ct*12,Tt=de>0?(de-Fe)/de:0,yt=de>0?Fe/de:0,Jt=bt>0?Ee/bt:Ee>0?1/0:0;let jt=50;return Tt>=.4?jt+=30:Tt>=.2?jt+=20:Tt>=.1?jt+=10:Tt>0?jt+=5:jt-=20,Jt===0?jt+=20:Jt<=.3?jt+=10:Jt<=.6?jt-=10:Jt<=1?jt-=30:jt-=50,yt<=.5?jt+=20:yt<=.7?jt+=10:yt<=.9?jt+=0:jt-=10,{score:Math.max(0,Math.min(100,Math.round(jt))),savingsRate:Tt,debtRatio:Jt,spendingRatio:yt}},[o,l,u]),ni=x.useMemo(()=>({totalIncome:o.reduce((de,Fe)=>de+Fe.amount,0),totalExpenses:l.reduce((de,Fe)=>de+Fe.amount,0),activeDebts:u.filter(de=>de.status===\"pending\").length,goalsCount:d.length,recentTransactions:[...l.slice(0,5).map(de=>({type:\"expense\",...de})),...o.slice(0,5).map(de=>({type:\"income\",...de}))],expenses:l,incomes:o,accounts:h,investments:S,liabilities:g,goals:d,debts:u,currentMonthExpenses:ta,savingsRate:xt.savingsRate,healthScore:xt.score,brainSummary:Ij({investments:S,accounts:h,healthScore:xt.score,savingsRate:xt.savingsRate,totalIncome:o.reduce((de,Fe)=>de+Fe.amount,0),totalExpenses:l.reduce((de,Fe)=>de+Fe.amount,0),activeDebts:u.filter(de=>de.status===\"pending\").length,goalsCount:d.length},i.currency,le)}),[o,l,u,d,xt.savingsRate,xt.score,h,S,g,ta,i.currency,le]),Fn=x.useMemo(()=>{const de=wN({accounts:h,recurringTransactions:ie,goals:d,liabilities:g,settings:i});return vN(de)},[h,ie,d,g,i]);if(p)return n.jsx(B0,{});Gn.isNativePlatform()&&Ov.hide().catch(de=>console.error(\"Splash hide error:\",de));const xa=async()=>{await f()},mn=de=>{xe(de),We(null),pe(!0)},hn=de=>{xe(\"expense\"),We(de),pe(!0)},Ya=de=>{xe(\"income\"),We(de),pe(!0)},ba=de=>{xe(\"debt\"),We(de),pe(!0)},Me=de=>{Ke?ve===\"expense\"?C(Ke.id,de):ve===\"income\"?L(Ke.id,de):ve===\"debt\"&&G(Ke.id,de):ve===\"expense\"?(T(de),de.roundUpAmount&&dt(d.length>0?d[0].id:\"general\",\"goal\",void 0,de.roundUpAmount,de.accountId)):ve===\"income\"?y(de):ve===\"debt\"&&j(de)},dt=async(de,Fe,Ee,rt,Ct)=>{if(!rt&&!zt)return;const et=rt||(zt?zt.roundedAmount-zt.expenseAmount:0),bt=Ct||(zt?zt.accountId:\"\"),Tt=h.find(yt=>yt.id===bt);if(Tt&&await F(Tt.id,{balance:Tt.balance-et}),Fe===\"goal\"){const yt=d.find(Jt=>Jt.id===de);if(yt)await B(de,{currentAmount:yt.currentAmount+et}),ce.success(`Saved ${dn[i.currency]}${et} to ${yt.name}!`);else{const Jt=d.find(jt=>jt.name===\"General Savings\");if(Jt)await B(Jt.id,{currentAmount:Jt.currentAmount+et}),ce.success(`Saved ${dn[i.currency]}${et} to General Savings!`);else{const jt={name:\"General Savings\",targetAmount:1e4,currentAmount:et,targetDate:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString(),emoji:\"🐷\"};_(jt),ce.success(`Created \"General Savings\" and saved ${dn[i.currency]}${et}!`)}}}else ge(yt=>yt+et),ce.success(`Saved ${dn[i.currency]}${et} to Emergency Fund!`);ea(!1),Or({particleCount:50,spread:60,origin:{y:.7}})},kt=de=>{const Fe={today:1,week:7,month:30},Ee=new Date;Ee.setDate(Ee.getDate()+Fe[de]),localStorage.setItem(\"roundUpMutedUntil\",Ee.toISOString()),ea(!1),ce.info(`Round ups muted for ${de===\"today\"?\"today\":de===\"week\"?\"a week\":\"a month\"}`)};return n.jsxs(n.Fragment,{children:[n.jsx(Bn,{mode:\"wait\",children:(D===\"guest\"||D===\"authenticating\")&&n.jsx(Le.div,{className:\"fixed inset-0 z-0\",exit:{opacity:0,scale:.95,filter:\"blur(20px)\"},transition:{duration:.8},children:n.jsx(bN,{})},\"login-container\")}),n.jsx(Bn,{children:D===\"authenticating\"&&n.jsx(Le.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4},className:\"fixed inset-0 z-50\",children:n.jsx(B0,{message:q?.message,subMessage:q?.subMessage})},\"loading-sprite\")}),n.jsx(Bn,{mode:\"wait\",children:D===\"authenticated\"&&n.jsx(Le.div,{className:\"relative z-10\",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.8,ease:[.16,1,.3,1]},children:n.jsxs(\"div\",{className:\"min-h-screen bg-transparent text-foreground transition-colors font-sans\",children:[n.jsx(dj,{activeTab:le,onTabChange:de=>je(de),notificationCount:N.filter(de=>!de.read).length,onNotificationClick:()=>fe(!Ft),onSettingsClick:()=>ke(!Ve),forceHide:lt,renderFab:de=>n.jsx(pN,{isVisible:de&&!Ve&&!Ft&&!lt,onOpenAI:()=>it(!0),onAddTransaction:mn,onMigrate:()=>ga(!0)}),children:n.jsx(fN,{onRefresh:xa,children:n.jsx(xN,{children:n.jsxs(x.Suspense,{fallback:n.jsxs(\"div\",{className:\"space-y-6 pt-12\",children:[n.jsx(mN,{}),n.jsx(\"p\",{className:\"text-center text-slate-500 text-sm\",children:\"Loading Component...\"})]}),children:[le===\"dashboard\"&&n.jsx(\"div\",{className:\"space-y-6\",children:n.jsx(SN,{expenses:l,incomes:o,currency:i.currency,goals:d,liabilities:g,debts:u,investments:S,accounts:h,emergencyFundAmount:E,healthScore:xt.score,userName:i.name,isOffline:W,isSampleMode:i.isSampleMode,onNavigate:de=>je(de),onAddTransaction:de=>{xe(de),pe(!0)}})}),le===\"budgets\"&&n.jsx(\"div\",{className:\"px-4 py-6\",children:n.jsx(NN,{})}),le===\"transactions\"&&n.jsx(CN,{expenses:l,incomes:o,debts:u,accounts:h,currency:i.currency,onEditExpense:hn,onDeleteExpense:M,onEditIncome:Ya,onDeleteIncome:z,onEditDebt:ba,onDeleteDebt:ee,onSettleDebt:Z}),le===\"goals\"&&n.jsx(EN,{goals:d,currency:i.currency,accounts:h,expenses:l,incomes:o,onCreateGoal:_,onUpdateGoal:B,onDeleteGoal:J,onDeductFromAccount:async(de,Fe)=>{const Ee=h.find(rt=>rt.id===de);Ee&&await F(de,{balance:Ee.balance-Fe})}}),le===\"accounts\"&&n.jsx(uN,{accounts:h,currency:i.currency,onCreateAccount:ne,onUpdateAccount:F,onDeleteAccount:oe}),le===\"investments\"&&n.jsx(kN,{}),le===\"emergency\"&&n.jsx(AN,{currency:i.currency,userId:A,expenses:l,incomes:o,accounts:h,onEmergencyFundUpdate:de=>ge(de)}),le===\"recurring\"&&n.jsx(oj,{}),le===\"more\"&&n.jsx(nN,{onNavigate:de=>je(de),onOpenSettings:()=>ke(!0),onOpenNotifications:()=>fe(!0),emergencyFundAmount:E,bankAccountsCount:h.filter(de=>de.type===\"bank\").length,cardsCount:h.filter(de=>de.type===\"credit_card\").length,currency:i.currency,onOpenAbout:()=>Kt(!0)})]})})})}),Ae&&n.jsx(gj,{isOpen:Ae,onClose:()=>{pe(!1),We(null)},type:ve,onSubmit:Me,initialData:Ke,accounts:h,liabilities:g,currency:i.currency,roundUpEnabled:i.roundUpEnabled,defaultAccountId:Fn.suggestedSpendAccountId||void 0}),zt&&n.jsx(xj,{isOpen:Oa,onClose:()=>ea(!1),onConfirm:dt,expenseAmount:zt.expenseAmount,roundedAmount:zt.roundedAmount,currency:i.currency,goals:d,onMute:kt}),n.jsx(gN,{isOpen:Ue,onClose:()=>it(!1),context:ni,settings:i,isOffline:W}),n.jsx(aN,{isOpen:Ve,onClose:()=>ke(!1),settings:i,onUpdateSettings:w,onAchievementClick:de=>{ze(de),mt(!0),ke(!1)},onOpenAbout:()=>Kt(!0)}),n.jsx(lN,{isOpen:Ft,onClose:()=>fe(!1),notifications:N,onNotificationClick:async de=>{if(de.achievementId&&(ze(de.achievementId),mt(!0)),de.action&&de.action.type===\"verify_subscription\"&&de.action.status===\"completed\"){const{description:Fe,amount:Ee,category:rt,accountId:Ct,date:et}=de.action.payload;try{await me({type:\"expense\",description:Fe,amount:Ee,category:rt,accountId:Ct,frequency:\"monthly\",startDate:et||new Date().toISOString().split(\"T\")[0],tags:[\"auto-verified\",\"subscription\"]}),ce.success(`Verified: ${Fe} is now a recurring subscription.`),O(bt=>bt.map(Tt=>Tt.id===de.id?{...Tt,read:!0}:Tt))}catch{ce.error(\"Failed to automate subscription.\")}}else de.action&&de.action.status===\"dismissed\"&&(ce.info(\"Marked as one-time purchase.\"),O(Fe=>Fe.map(Ee=>Ee.id===de.id?{...Ee,read:!0}:Ee)));de.action||(de.category===\"reminders\"?je(\"recurring\"):de.category===\"transactions\"&&je(\"transactions\"),fe(!1))},onMarkAsRead:de=>{O(Fe=>Fe.map(Ee=>Ee.id===de?{...Ee,read:!0}:Ee))},onClearRead:()=>{O(de=>de.filter(Fe=>!Fe.read)),ce.success(\"Read notifications cleared\")}}),n.jsx(rN,{isOpen:lt,onClose:()=>{mt(!1),ze(null)},achievementId:Se}),n.jsx(oN,{isOpen:k,onClose:Q,accounts:h,goals:d,currency:i.currency,destinationType:U,emergencyFund:{currentAmount:E,targetAmount:1e5},onAllocate:ae,liabilities:g,expenses:l}),n.jsx(dN,{isOpen:_a,onClose:()=>ga(!1),accounts:h,currency:i.currency,onTransfer:v}),n.jsx(yN,{isOpen:Ra,onClose:()=>Kt(!1)})]})},\"main-app\")}),Y&&n.jsx(Rp,{open:!0,onOpenChange:()=>V(null),children:n.jsxs(Op,{className:\"bg-slate-900/95 border-white/10 text-slate-100 z-[99999999] backdrop-blur-xl\",children:[n.jsxs(zp,{children:[n.jsx(Up,{className:\"text-white text-xl font-bold font-sans\",children:\"Backfill Configuration Required\"}),n.jsxs(Ip,{className:\"text-slate-400 text-base\",children:[\"System detected \",n.jsxs(\"span\",{className:\"text-emerald-400 font-bold\",children:[Y.count,\" missing entries\"]}),\" in the transaction history\",Y.dates?.length>0&&n.jsxs(n.Fragment,{children:[\" \",\"from \",n.jsx(\"span\",{className:\"text-white font-medium\",children:Y.dates[0]?.toLocaleDateString(\"en-IN\",{day:\"numeric\",month:\"short\",year:\"numeric\"})}),\" \",\"to \",n.jsx(\"span\",{className:\"text-white font-medium\",children:Y.dates[Y.dates.length-1]?.toLocaleDateString(\"en-IN\",{day:\"numeric\",month:\"short\",year:\"numeric\"})})]}),\".\",n.jsx(\"br\",{}),n.jsx(\"br\",{}),\"Would you like to auto-populate the ledger for this period?\"]})]}),n.jsxs(Lp,{className:\"mt-4\",children:[n.jsx(qp,{onClick:()=>V(null),className:\"bg-white/5 border-white/5 text-slate-400 hover:text-white hover:bg-white/10 rounded-xl h-12 uppercase tracking-wider text-xs font-bold\",children:\"Cancel\"}),n.jsx(Bp,{onClick:()=>{te(),V(null)},className:\"bg-indigo-600 hover:bg-indigo-500 text-white border-0 font-bold rounded-xl h-12 px-8 shadow-lg shadow-indigo-600/20\",children:\"Generate Ledger\"})]})]})}),n.jsx(d1,{position:\"bottom-center\",richColors:!0,theme:\"dark\",toastOptions:{style:{background:\"#1C1C1E\",border:\"1px solid rgba(255, 255, 255, 0.1)\",color:\"#FFFFFF\",borderRadius:\"20px\",backdropFilter:\"none\",zIndex:9999999}},className:\"!z-[9999999]\"})]})}function DN({children:i,...l}){return n.jsx(jj,{...l,children:i})}function MN(i={}){const{immediate:l=!1,onNeedRefresh:o,onOfflineReady:u,onRegistered:d,onRegisteredSW:h,onRegisterError:g}=i;let N,E;const S=async(f=!0)=>{await E};async function p(){if(\"serviceWorker\"in navigator){if(N=await Fa(async()=>{const{Workbox:f}=await import(\"./workbox-window.prod.es5-BIl4cyR9.js\");return{Workbox:f}},[]).then(({Workbox:f})=>new f(\"/sw.js\",{scope:\"/\",type:\"classic\"})).catch(f=>{g?.(f)}),!N)return;N.addEventListener(\"activated\",f=>{(f.isUpdate||f.isExternal)&&window.location.reload()}),N.addEventListener(\"installed\",f=>{f.isUpdate||u?.()}),N.register({immediate:l}).then(f=>{h?h(\"/sw.js\",f):d?.(f)}).catch(f=>{g?.(f)})}}return E=p(),S}MN({immediate:!0});wv.createRoot(document.getElementById(\"root\")).render(n.jsx(H1,{children:n.jsx(DN,{attribute:\"class\",defaultTheme:\"dark\",forcedTheme:\"dark\",children:n.jsx(TN,{})})}));export{Bn as A,Re as B,Ki as C,us as D,Tu as E,C0 as F,LN as G,z0 as H,wt as I,L0 as J,ye as L,Qu as M,Ha as N,Ut as S,Ru as T,Uu as W,at as a,u0 as b,Zi as c,hu as d,pu as e,Ne as f,gu as g,Fu as h,mj as i,fp as j,Ot as k,De as l,Le as m,Iu as n,ds as o,fs as p,ms as q,hs as r,Bt as s,ce as t,Gp as u,It as v,qt as w,qe as x,vu as y,ai as z};"
      },
      {
        "file": "android\\app\\src\\main\\assets\\public\\assets\\index-i0Euu4OB.js",
        "line": 59,
        "snippet": "`.trim();return await Hp(h,g,S,u)},eN=async(i,l)=>await Hp(i,l,\"Respond with only the word 'OK' to verify connectivity.\",\"ASSISTANT\"),tN=i=>{if(i.aiProvider&&al(i.aiProvider,i))return i.aiProvider;const l=[\"openai\",\"anthropic\",\"gemini\",\"deepseek\",\"perplexity\"];for(const o of l)if(al(o,i))return o;return null},_0={BASE_URL:\"/\",DEV:!1,MODE:\"production\",PROD:!0,SSR:!1},aN=({isOpen:i,onClose:l,settings:o,onUpdateSettings:u,onAchievementClick:d,onOpenAbout:h})=>{const[g,N]=x.useState(o.name||\"\"),[E,S]=x.useState(o.photoURL||\"\"),[p,f]=x.useState(!1),[w,A]=x.useState(null),[T,C]=x.useState({}),[M,y]=x.useState(!1),{logout:L,scheduleAccountDeletion:z,migrateSubscriptions:j,cleanupDuplicates:G,clearAllData:ee}=ai(),[Z,_]=x.useState(!1),B=async()=>{y(!0);try{await j()}catch(fe){console.error(\"Migration failed:\",fe),ce.error(\"Migration failed\")}finally{y(!1)}},[J,ne]=x.useState(\"USD\"),[F,oe]=x.useState(\"100\"),[ge,O]=x.useState(\"100000\"),[k,U]=x.useState(\"10\"),[Q,ae]=x.useState(\"6\"),[v,D]=x.useState(!1),W=async()=>{const Se={USD:\"US\",INR:\"IN\",GBP:\"GB\",EUR:\"EMU\",AED:\"AE\",SAR:\"SA\"}[o.currency]||\"US\";D(!0);try{const lt=await(await fetch(`https://api.worldbank.org/v2/country/${Se}/indicator/FP.CPI.TOTL.ZG?format=json&per_page=1`)).json();if(lt&&lt[1]&&lt[1][0]&&lt[1][0].value){const mt=lt[1][0].value;ae(mt.toFixed(2)),ce.success(`Inflation rate synced for ${o.currency}`)}}catch(ze){console.error(\"Inflation sync failed:\",ze),ce.error(\"Failed to sync inflation rate.\")}finally{D(!1)}},q=Array.from({length:(parseInt(k)||0)+1},(fe,Se)=>{const ze=parseFloat(ge)||0,lt=parseFloat(Q)||0,mt=ze*Math.pow(1+lt/100,Se),_a=ze/Math.pow(1+lt/100,Se);return{year:Se,futureCost:Math.round(mt),purchasingPower:Math.round(_a)}}),Y=[\"INR\",\"USD\",\"EUR\",\"GBP\",\"AED\",\"SAR\"],V=o.currency;x.useEffect(()=>{N(o.name||\"\"),S(o.photoURL||\"\")},[o]),x.useEffect(()=>{i&&te()},[i,J]);const te=async()=>{try{const Se=await(await fetch(`https://api.exchangerate-api.com/v4/latest/${J}`)).json();C(Se.rates||{}),F&&me(F,Se.rates)}catch(fe){console.error(\"Error loading exchange rates:\",fe)}},me=(fe,Se)=>{const ze=parseFloat(fe);if(!isNaN(ze)&&ze>0){const mt=(Se||T)[V]||1;A(ze*mt)}else A(null)},ie=fe=>{oe(fe),me(fe)},{setTheme:le}=wj();x.useEffect(()=>{o.theme!==\"dark\"&&(le(\"dark\"),u({theme:\"dark\"}))},[]);const je=()=>{u({name:g,photoURL:E}),f(!1)},Ae=fe=>{const Se=fe.target.files?.[0];if(Se){const ze=new FileReader;ze.onloadend=()=>{S(ze.result)},ze.readAsDataURL(Se)}},pe=U1(),ve=new Set(o.unlockedAchievements),xe=o.aiProvider||\"openai\",Ke=[{id:\"openai\",label:\"OpenAI\",placeholder:\"sk-...\"},{id:\"anthropic\",label:\"Anthropic\",placeholder:\"sk-ant-...\"},{id:\"gemini\",label:\"Gemini\",placeholder:\"AIza...\"},{id:\"deepseek\",label:\"Deepseek\",placeholder:\"sk-...\"},{id:\"perplexity\",label:\"Perplexity\",placeholder:\"pplx-...\"}],[We,Ue]=x.useState(!1),[it,Ve]=x.useState(null),ke=x.useCallback((fe,Se)=>{u({[fe]:Se})},[u]),Ft=async()=>{const fe=al(xe,o);if(!fe){ce.error(\"No API key found in Settings or System Environment\");return}Ue(!0),Ve(null);try{const Se=await eN(xe,fe);Se.error?(Ve({success:!1,message:Se.error}),ce.error(`Connection failed: ${Se.error}`)):(Ve({success:!0,message:\"Neural link established.\"}),ce.success(\"Connection successful!\"))}catch(Se){const ze=Se.message||\"Unknown error\";console.error(\"Settings save error:\",Se),ce.error(`${at.common.status.error}: ${ze}`)}finally{Ue(!1)}};return n.jsx(kp,{open:i,onOpenChange:l,children:n.jsxs(Dp,{side:\"left\",className:\"w-full sm:max-w-lg overflow-y-auto px-0 bg-slate-950 border-white/5 text-slate-100 h-dvh\",children:[n.jsx(Mp,{className:\"sr-only\",children:\"Settings\"}),n.jsx(_p,{className:\"sr-only\",children:\"Customize your FinHub core experience.\"}),n.jsxs(\"div\",{className:\"space-y-12 animate-in fade-in slide-in-from-left-4 duration-500 px-8 pt-12 pb-10 text-white relative\",children:[n.jsx(\"div\",{className:\"absolute top-4 right-4 z-20\",children:n.jsx(Re,{variant:\"ghost\",size:\"icon\",onClick:l,className:\"w-10 h-10 rounded-full bg-white/5 text-slate-400 hover:text-white hover:bg-white/10\",children:n.jsx(il,{className:\"w-5 h-5\"})})}),n.jsxs(\"div\",{className:\"flex flex-col gap-2\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-1.5 h-8 bg-indigo-500 rounded-full shadow-[0_0_15px_rgba(99,102,241,0.5)]\"}),n.jsx(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tight leading-none text-white\",children:\"System Config\"})]}),n.jsx(\"p\",{className:\"text-slate-500 font-bold ml-4 text-sm\",children:\"Customize your FinHub core experience.\"})]}),n.jsxs(\"div\",{className:\"space-y-10\",children:[n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"h3\",{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Su,{className:\"w-3.5 h-3.5\"}),\"User Identity\"]}),n.jsx(Re,{variant:\"ghost\",size:\"sm\",onClick:()=>f(!p),className:\"text-[10px] font-black uppercase tracking-widest text-indigo-400 hover:text-indigo-300 hover:bg-white/5\",children:p?\"Abort\":\"Refine\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-8 bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-indigo-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsxs(\"div\",{className:\"relative\",children:[E?n.jsx(\"img\",{src:E,alt:\"Profile\",className:\"w-24 h-24 rounded-full object-cover border-4 border-slate-800 shadow-2xl\"}):n.jsx(\"div\",{className:\"w-24 h-24 bg-gradient-to-br from-indigo-600 to-purple-700 rounded-full flex items-center justify-center shadow-2xl\",children:n.jsx(Su,{className:\"w-12 h-12 text-white/90\"})}),p&&n.jsxs(\"label\",{className:\"absolute bottom-0 right-0 w-9 h-9 bg-indigo-600 rounded-full flex items-center justify-center cursor-pointer hover:bg-indigo-500 shadow-lg border-4 border-slate-900 transition-transform active:scale-90\",children:[n.jsx(ry,{className:\"w-4 h-4 text-white\"}),n.jsx(\"input\",{type:\"file\",accept:\"image/*\",className:\"hidden\",onChange:Ae,\"aria-label\":\"Upload profile picture\"})]})]}),n.jsx(\"div\",{className:\"flex-1 min-w-0\",children:p?n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(ye,{htmlFor:\"settings-profile-name\",className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Alias\"}),n.jsx(wt,{id:\"settings-profile-name\",name:\"name\",placeholder:\"e.g. Maverick\",value:g,onChange:fe=>N(fe.target.value),className:\"bg-white/5 border-white/5 rounded-xl h-12 text-white placeholder:text-slate-700 font-bold\",autoComplete:\"name\"})]}),n.jsx(Re,{size:\"sm\",onClick:je,className:\"w-full h-12 bg-indigo-600 hover:bg-indigo-500 text-white font-black rounded-xl\",children:\"Commit Identity\"})]}):n.jsxs(n.Fragment,{children:[n.jsx(\"h4\",{className:\"text-2xl font-black text-slate-100 tracking-tight\",children:g||\"Guest User\"}),n.jsx(\"p\",{className:\"text-xs text-slate-500 font-bold uppercase tracking-widest mt-1\",children:\"FinHub Node // 0x50.3\"})]})})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsx(\"div\",{className:\"space-y-4\",children:n.jsxs(\"button\",{onClick:()=>u({roundUpEnabled:!o.roundUpEnabled}),className:`w-full flex items-center justify-between p-6 rounded-[32px] border transition-all relative overflow-hidden group ${o.roundUpEnabled?\"bg-emerald-500/10 border-emerald-500/50 shadow-[0_0_20px_rgba(16,185,129,0.1)]\":\"bg-slate-900/40 border-white/5 grayscale opacity-60 hover:opacity-100 hover:grayscale-0\"}`,children:[n.jsx(\"div\",{className:`absolute top-0 right-0 w-24 h-24 blur-3xl opacity-10 -mr-12 -mt-12 transition-colors ${o.roundUpEnabled?\"bg-emerald-500\":\"bg-slate-500\"}`}),n.jsxs(\"div\",{className:\"space-y-1 relative z-10 flex-1 pr-4 text-left\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-2 text-sm font-black text-slate-100 uppercase tracking-tight\",children:[n.jsx(qn,{className:`w-4 h-4 ${o.roundUpEnabled?\"text-emerald-500\":\"text-slate-500\"}`}),\"Virtual Round-Ups\"]}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 font-bold leading-relaxed uppercase tracking-widest\",children:\"Build your fortress automatically via expense spillover.\"})]}),n.jsx(\"div\",{className:`relative z-10 px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${o.roundUpEnabled?\"bg-emerald-500 text-white shadow-lg shadow-emerald-500/20\":\"bg-slate-800 text-slate-500\"}`,children:o.roundUpEnabled?\"Active\":\"Offline\"})]})}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(ye,{htmlFor:\"settings-currency\",className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Gh,{className:\"w-3.5 h-3.5\"}),\"Standard Denomination\"]}),n.jsxs(\"div\",{className:\"bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-indigo-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsx(\"div\",{className:\"space-y-2 relative z-10\",children:n.jsxs(Ut,{value:o.currency,onValueChange:fe=>u({currency:fe}),children:[n.jsx(Bt,{id:\"settings-currency\",name:\"currency\",className:\"bg-white/5 border-white/5 rounded-2xl h-14 font-black\",children:n.jsx(It,{})}),n.jsxs(qt,{className:\"bg-slate-900 border-white/10 text-white\",children:[n.jsx(qe,{value:\"USD\",children:\"USD ($) - US Dollar\"}),n.jsx(qe,{value:\"EUR\",children:\"EUR (€) - Euro\"}),n.jsx(qe,{value:\"GBP\",children:\"GBP (£) - British Pound\"}),n.jsx(qe,{value:\"INR\",children:\"INR (₹) - Indian Rupee\"}),n.jsx(qe,{value:\"AED\",children:\"AED (د.إ) - UAE Dirham\"}),n.jsx(qe,{value:\"SAR\",children:\"SAR (﷼) - Saudi Riyal\"})]})]})})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(ye,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Gh,{className:\"w-3.5 h-3.5\"}),\"Foreign Exchange Probe\"]}),n.jsxs(\"div\",{className:\"space-y-6 p-6 bg-slate-900/40 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-blue-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4 relative z-10\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(ye,{htmlFor:\"converter-from-currency\",className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Source\"}),n.jsxs(Ut,{value:J,onValueChange:fe=>{ne(fe)},children:[n.jsx(Bt,{id:\"converter-from-currency\",name:\"fromCurrency\",className:\"bg-white/5 border-white/5 rounded-2xl h-12\",children:n.jsx(It,{})}),n.jsx(qt,{className:\"bg-slate-900 border-white/10 text-white\",children:Y.map(fe=>n.jsxs(qe,{value:fe,children:[dn[fe],\" \",fe]},fe))})]})]}),n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(ye,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Target\"}),n.jsxs(\"div\",{className:\"h-12 flex items-center justify-center bg-indigo-500/10 rounded-2xl border border-indigo-500/20 text-xs font-black text-indigo-400\",children:[dn[V],\" \",V]})]})]}),n.jsxs(\"div\",{className:\"space-y-1.5 relative z-10\",children:[n.jsx(ye,{htmlFor:\"converter-amount\",className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Capital Amount\"}),n.jsx(wt,{id:\"converter-amount\",name:\"amount\",type:\"number\",placeholder:\"Enter amount\",value:F,onChange:fe=>{const Se=fe.target.value;parseFloat(Se)<0||ie(Se)},min:\"0\",className:\"bg-white/5 border-white/5 rounded-2xl h-14 font-black text-lg\",autoComplete:\"off\"})]}),w!==null&&n.jsxs(\"div\",{className:\"p-6 bg-white/5 rounded-2xl border border-white/5 animate-in fade-in slide-in-from-top-2 relative z-10\",children:[n.jsx(\"p\",{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 mb-2\",children:\"Calculated Projection\"}),n.jsxs(\"div\",{className:\"flex items-baseline gap-2\",children:[n.jsxs(\"p\",{className:\"text-2xl font-black text-emerald-400 tabular-nums\",children:[dn[V],w.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold uppercase tracking-widest\",children:\"ESTIMATED VALUATION\"})]}),T[V]&&n.jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-white/5 flex items-center justify-between\",children:[n.jsx(\"span\",{className:\"text-[8px] font-black uppercase tracking-[0.2em] text-slate-700\",children:\"Interest Rate\"}),n.jsxs(\"span\",{className:\"text-[10px] font-black text-slate-500 tabular-nums\",children:[\"1 \",J,\" = \",T[V].toFixed(4),\" \",V]})]})]})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(ye,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(qn,{className:\"w-3.5 h-3.5 text-rose-500\"}),\"Inflation Projection Node\"]}),n.jsxs(\"div\",{className:\"space-y-6 p-6 bg-slate-900/40 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-rose-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsxs(\"div\",{className:\"space-y-4 relative z-10\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(ye,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Current Capital\"}),n.jsx(wt,{type:\"number\",value:ge,onChange:fe=>O(fe.target.value),className:\"bg-white/5 border-white/5 rounded-2xl h-12 font-black\",placeholder:\"e.g. 1000000\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(ye,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Horizon (Years)\"}),n.jsx(wt,{type:\"number\",value:k,onChange:fe=>U(fe.target.value),className:\"bg-white/5 border-white/5 rounded-2xl h-12 font-black\"})]}),n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between ml-1\",children:[n.jsx(ye,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500\",children:\"Rate (%)\"}),n.jsxs(\"button\",{onClick:W,disabled:v,className:\"text-[8px] font-black uppercase text-indigo-400 hover:text-indigo-300 disabled:opacity-50 flex items-center gap-1\",children:[v?n.jsx(Xc,{className:\"w-2 h-2 animate-spin\"}):n.jsx(oy,{className:\"w-2 h-2\"}),\"Sync\"]})]}),n.jsx(wt,{type:\"number\",value:Q,onChange:fe=>ae(fe.target.value),className:\"bg-white/5 border-white/5 rounded-2xl h-12 font-black\"})]})]}),ge&&n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(\"div\",{className:\"h-32 w-full bg-black/20 rounded-2xl p-2 border border-white/5 overflow-hidden\",children:n.jsx(mv,{width:\"100%\",height:\"100%\",minHeight:128,minWidth:100,children:n.jsxs(hv,{data:q,children:[n.jsxs(\"defs\",{children:[n.jsxs(\"linearGradient\",{id:\"colorCost\",x1:\"0\",y1:\"0\",x2:\"0\",y2:\"1\",children:[n.jsx(\"stop\",{offset:\"5%\",stopColor:\"#FB7185\",stopOpacity:.3}),n.jsx(\"stop\",{offset:\"95%\",stopColor:\"#FB7185\",stopOpacity:0})]}),n.jsxs(\"linearGradient\",{id:\"colorPower\",x1:\"0\",y1:\"0\",x2:\"0\",y2:\"1\",children:[n.jsx(\"stop\",{offset:\"5%\",stopColor:\"#34D399\",stopOpacity:.3}),n.jsx(\"stop\",{offset:\"95%\",stopColor:\"#34D399\",stopOpacity:0})]})]}),n.jsx(pv,{strokeDasharray:\"3 3\",vertical:!1,stroke:\"rgba(255,255,255,0.05)\"}),n.jsx(gv,{contentStyle:{backgroundColor:\"#0f172a\",border:\"1px solid rgba(255,255,255,0.1)\",borderRadius:\"8px\",fontSize:\"10px\"},itemStyle:{color:\"#fff\",padding:\"2px 0\"}}),n.jsx(Xh,{type:\"monotone\",dataKey:\"futureCost\",stroke:\"#FB7185\",fillOpacity:1,fill:\"url(#colorCost)\"}),n.jsx(Xh,{type:\"monotone\",dataKey:\"purchasingPower\",stroke:\"#34D399\",fillOpacity:1,fill:\"url(#colorPower)\"})]})})}),n.jsxs(\"div\",{className:\"p-6 bg-white/5 rounded-2xl border border-white/5 space-y-4\",children:[n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 mb-2\",children:\"Future Cost\"}),n.jsxs(\"p\",{className:\"text-xl font-black text-rose-400 tabular-nums\",children:[dn[o.currency],Math.round(parseFloat(ge)*Math.pow(1+parseFloat(Q)/100,parseFloat(k))).toLocaleString()]})]}),n.jsxs(\"div\",{className:\"pt-4 border-t border-white/5\",children:[n.jsx(\"p\",{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 mb-2\",children:\"Real Purchasing Power\"}),n.jsxs(\"p\",{className:\"text-xl font-black text-emerald-400 tabular-nums\",children:[dn[o.currency],Math.round(parseFloat(ge)/Math.pow(1+parseFloat(Q)/100,parseFloat(k))).toLocaleString()]}),n.jsx(\"p\",{className:\"text-[8px] text-slate-600 font-bold uppercase tracking-widest mt-1\",children:\"VALUATION IN TODAY'S MONEY\"})]})]})]})]})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(ye,{className:\"text-[10px] font-bold uppercase tracking-[0.2em] text-slate-500 flex items-center gap-2\",children:[n.jsx(cy,{className:\"w-3.5 h-3.5 text-indigo-400\"}),\"AI Assistant Config\"]}),n.jsxs(\"div\",{className:\"space-y-6 bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsxs(\"div\",{className:\"space-y-1.5 relative z-10\",children:[n.jsx(ye,{htmlFor:\"ai-provider-select\",className:\"text-[9px] font-bold uppercase tracking-widest text-slate-500 ml-1\",children:\"Preferred Provider\"}),n.jsxs(Ut,{value:xe,onValueChange:fe=>u({aiProvider:fe}),children:[n.jsx(Bt,{id:\"ai-provider-select\",name:\"aiProvider\",className:\"bg-slate-900 border-white/5 rounded-xl h-11 text-[10px] font-bold uppercase tracking-widest\",children:n.jsx(It,{})}),n.jsx(qt,{className:\"bg-slate-900 border-white/10 text-white\",children:Ke.map(fe=>n.jsx(qe,{value:fe.id,className:\"text-[10px] font-bold uppercase tracking-widest\",children:fe.label},fe.id))})]})]}),n.jsxs(\"div\",{className:\"space-y-4 pt-2 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between px-1\",children:[n.jsx(ye,{className:\"text-[9px] font-bold uppercase tracking-widest text-slate-500\",children:\"Active Credential\"}),n.jsx(\"div\",{className:\"flex items-center gap-1.5\",children:n.jsx(\"span\",{className:\"text-[8px] font-bold text-indigo-400/70 uppercase tracking-tighter\",children:Ke.find(fe=>fe.id===xe)?.label})})]}),Ke.filter(fe=>fe.id===xe).map(fe=>{const Se=o.apiKeys?.[fe.id],ze=`VITE_${fe.id.toUpperCase()}_API_KEY`,lt=!!_0[ze];return n.jsxs(\"div\",{className:\"flex items-center gap-3 bg-indigo-500/5 p-4 rounded-2xl border border-indigo-500/20 group/active transition-all\",children:[n.jsx(\"div\",{className:\"flex-1 min-w-0\",children:n.jsxs(\"div\",{className:\"relative group/input\",children:[n.jsx(wt,{type:\"password\",value:Se||\"\",onChange:mt=>ke(\"apiKeys\",{...o.apiKeys,[fe.id]:mt.target.value}),placeholder:lt?\"Using System Environment Key\":`Enter ${fe.label} Key`,className:`bg-transparent border-none p-0 h-auto text-sm font-bold text-white placeholder:text-slate-700 focus-visible:ring-0 shadow-none ${lt&&!Se?\"opacity-40 italic font-medium\":\"\"}`,disabled:lt&&!Se}),lt&&!Se&&n.jsx(\"div\",{className:\"flex items-center gap-1 mt-1\",children:n.jsx(\"span\",{className:\"text-[7px] font-black text-emerald-500 uppercase tracking-widest bg-emerald-500/10 px-1 py-0.5 rounded\",children:\"System Linked\"})})]})}),Se&&n.jsx(\"button\",{onClick:()=>ke(\"apiKeys\",{...o.apiKeys,[fe.id]:\"\"}),className:\"text-slate-600 hover:text-rose-500 transition-colors p-1\",title:\"Clear saved key\",\"aria-label\":`Clear saved key for ${fe.label}`,children:n.jsx(tl,{className:\"w-3.5 h-3.5\"})})]},fe.id)}),n.jsx(Re,{onClick:Ft,disabled:We||!al(xe,o),className:`w-full h-11 transition-all font-bold uppercase tracking-[0.2em] text-[10px] rounded-xl ${it?.success?\"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20\":it?.success===!1?\"bg-rose-500/10 text-rose-400 border border-rose-500/20\":\"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20\"}`,children:We?n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(Xc,{className:\"w-3.5 h-3.5 animate-spin\"}),\"Verifying...\"]}):it?.success?n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(Cu,{className:\"w-3.5 h-3.5\"}),\"Link Stable\"]}):\"Validate Connection\"})]}),n.jsxs(Tj,{className:\"relative z-10\",children:[n.jsx(Dj,{asChild:!0,children:n.jsxs(Re,{variant:\"ghost\",className:\"w-full h-8 hover:bg-white/5 text-slate-500 hover:text-slate-300 text-[8px] font-bold uppercase tracking-widest group/trigger flex items-center justify-between px-2 rounded-lg\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(uy,{className:\"w-3 h-3 text-slate-600 group-hover/trigger:text-slate-400\"}),\"Alternative Nodes\"]}),n.jsx(nl,{className:\"w-3 h-3 transition-transform duration-300 group-data-[state=open]/trigger:rotate-180\"})]})}),n.jsx(Mj,{className:\"pt-4 space-y-3 animate-in fade-in slide-in-from-top-2 duration-300\",children:n.jsx(\"div\",{className:\"grid gap-2\",children:Ke.filter(fe=>fe.id!==xe).map(fe=>{const Se=o.apiKeys?.[fe.id],ze=`VITE_${fe.id.toUpperCase()}_API_KEY`,lt=!!_0[ze];return n.jsxs(\"div\",{className:\"flex items-center gap-3 bg-slate-950/40 p-3 rounded-xl border border-white/5 hover:border-white/10 transition-colors\",children:[n.jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between mb-1\",children:[n.jsx(\"span\",{className:\"text-[8px] font-bold uppercase tracking-wider text-slate-500\",children:fe.label}),lt&&!Se&&n.jsx(\"span\",{className:\"text-[7px] font-bold text-emerald-500/50 uppercase tracking-tighter\",children:\"System\"})]}),n.jsx(wt,{type:\"password\",value:Se||\"\",onChange:mt=>ke(\"apiKeys\",{...o.apiKeys,[fe.id]:mt.target.value}),placeholder:lt?\"Using System Default\":\"Key not found\",className:\"bg-transparent border-none p-0 h-auto text-[10px] text-slate-400 placeholder:text-slate-800 focus-visible:ring-0 shadow-none italic font-medium cursor-not-allowed\",disabled:lt&&!Se})]}),Se&&n.jsx(\"button\",{onClick:()=>ke(\"apiKeys\",{...o.apiKeys,[fe.id]:\"\"}),className:\"text-slate-800 hover:text-rose-500 transition-colors p-1\",title:\"Clear saved key\",\"aria-label\":`Clear saved key for ${fe.label}`,children:n.jsx(tl,{className:\"w-3 h-3\"})})]},fe.id)})})})]})]})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(ye,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Qc,{className:\"w-3.5 h-3.5 text-indigo-400\"}),\"Data Optimization Node\"]}),n.jsxs(\"div\",{className:\"p-6 bg-slate-900/40 rounded-[32px] border border-white/5 relative overflow-hidden\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-300\",children:at.settings.subscriptionScanner}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-wide mt-1\",children:\"DETECT & MIGRATE RECURRING SIGNALS\"})]}),n.jsx(Re,{onClick:B,disabled:M,className:\"bg-indigo-600 hover:bg-indigo-500 text-white font-black uppercase tracking-widest text-[9px] h-9 px-4 rounded-xl shadow-lg shadow-indigo-500/20\",children:M?n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(Xc,{className:\"w-3 h-3 animate-spin\"}),\"Scanning...\"]}):\"Execute Scan\"})]}),n.jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-white/5 flex items-center justify-between\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-300\",children:\"Redundancy Purge\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-wide mt-1\",children:\"REMOVE BLANK & DUPLICATE ENTRIES\"})]}),n.jsx(Re,{onClick:async()=>{const fe=ce.loading(\"Purging duplicates...\");try{const Se=await G();ce.dismiss(fe)}catch{ce.dismiss(fe),ce.error(\"Purge failed\")}},className:\"bg-rose-500/10 hover:bg-rose-500/20 text-rose-400 border border-rose-500/20 font-black uppercase tracking-widest text-[9px] h-9 px-4 rounded-xl\",children:at.settings.cleanupDuplicates})]})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(ye,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(dy,{className:\"w-3.5 h-3.5 text-amber-500\"}),at.settings.achievementLevel,\" (\",o.unlockedAchievements.length,\"/\",pe.length,\")\"]}),n.jsx(\"div\",{className:\"grid grid-cols-4 sm:grid-cols-6 gap-3\",children:pe.map(fe=>{const Se=ve.has(fe.id);return n.jsx(\"button\",{onClick:()=>{Se&&d&&d(fe.id)},disabled:!Se,className:`w-12 h-12 rounded-xl border flex items-center justify-center text-xl transition-all ${Se?\"border-amber-500/50 bg-amber-500/10 grayscale-0 hover:scale-110 hover:shadow-lg hover:shadow-amber-500/20 active:scale-95\":\"border-white/5 bg-white/5 grayscale opacity-20 cursor-not-allowed\"}`,children:fe.icon},fe.id)})}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 font-bold text-center leading-relaxed\",children:o.unlockedAchievements.length>0?at.settings.achievementSelect:at.settings.achievementLocked})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsx(\"div\",{className:\"space-y-4\",children:n.jsxs(\"div\",{className:\"p-4 bg-rose-500/5 border border-rose-500/10 rounded-2xl flex items-center justify-between\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"text-[10px] font-black uppercase tracking-widest text-rose-400\",children:at.settings.factoryReset}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-wide mt-1\",children:at.settings.wipeDescription})]}),n.jsx(Re,{onClick:async()=>{confirm(\"Are you sure? This deletes ALL transaction data.\")&&await ee()},className:\"bg-slate-950 hover:bg-rose-500 text-rose-500 hover:text-white border border-rose-500/20 font-black uppercase tracking-widest text-[9px] h-9 px-4 rounded-xl transition-colors\",children:at.settings.wipeData})]})}),n.jsx(_j,{className:\"bg-white/5\"}),n.jsxs(\"div\",{className:\"text-center pt-8 space-y-2 opacity-40 hover:opacity-100 transition-opacity duration-700 pb-10\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-[0.5em] text-slate-100\",children:\"Obsidian System Node\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-widest\",children:\"Architect: Sijo Joseph // BUILD 50.3.0 // QUANTUM CORE\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-700 uppercase tracking-widest mt-4\",children:\"© 2025 NEURAL FINHUB FABRIC\"}),n.jsxs(\"button\",{onClick:h,className:\"mt-4 text-[8px] font-black text-indigo-400/60 hover:text-indigo-400 uppercase tracking-[0.2em] transition-colors\",children:[\"[ \",at.settings.about,\" ]\"]})]}),n.jsxs(\"div\",{className:\"px-2 pb-10\",children:[n.jsxs(Re,{variant:\"outline\",onClick:()=>{L(),l()},className:\"w-full h-14 bg-white/5 hover:bg-white/10 border-white/10 hover:border-white/20 text-white/60 hover:text-white font-black uppercase tracking-widest gap-3 rounded-[24px] transition-all group mb-4\",children:[n.jsx(fy,{className:\"w-5 h-5 group-hover:-translate-x-1 transition-transform\"}),\"Terminate Session\"]}),n.jsxs(Rp,{open:Z,onOpenChange:_,children:[n.jsx(Rj,{asChild:!0,children:n.jsxs(Re,{variant:\"outline\",className:\"w-full h-14 bg-rose-500/5 hover:bg-rose-500/10 border-rose-500/20 hover:border-rose-500/40 text-rose-500 font-black uppercase tracking-widest gap-3 rounded-[24px] transition-all group\",children:[n.jsx(Qc,{className:\"w-5 h-5 group-hover:scale-110 transition-transform\"}),\"Delete Account & Data\"]})}),n.jsxs(Op,{className:\"bg-slate-950 border-white/10 text-white rounded-[32px] p-8\",children:[n.jsxs(zp,{children:[n.jsxs(Up,{className:\"text-2xl font-black tracking-tight flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"p-2 rounded-full bg-rose-500/20 text-rose-500\",children:n.jsx(Qc,{className:\"w-6 h-6\"})}),\"Irreversible Action?\"]}),n.jsxs(Ip,{className:\"text-slate-400 font-medium leading-relaxed mt-4\",children:[\"Your account will be \",n.jsx(\"span\",{className:\"text-white font-bold italic\",children:\"deactivated immediately\"}),\" and scheduled for permanent deletion in \",n.jsx(\"span\",{className:\"text-white font-bold\",children:\"30 days\"}),\".\",n.jsx(\"br\",{}),n.jsx(\"br\",{}),\"Log in anytime before then to cancel this request and restore your data node.\"]})]}),n.jsxs(Lp,{className:\"mt-8 gap-3\",children:[n.jsx(qp,{className:\"h-14 flex-1 rounded-2xl bg-white/5 border-white/10 text-slate-400 hover:bg-white/10 hover:text-white font-black uppercase tracking-widest transition-all\",children:\"Abort\"}),n.jsx(Bp,{onClick:async()=>{await z(),l()},className:\"h-14 flex-1 rounded-2xl bg-rose-600 hover:bg-rose-500 text-white font-black uppercase tracking-widest shadow-lg shadow-rose-500/20 transition-all active:scale-95\",children:\"Confirm Purge\"})]})]})]})]})]})]})})};function nN({onNavigate:i,onOpenSettings:l,onOpenNotifications:o,emergencyFundAmount:u,bankAccountsCount:d,cardsCount:h,currency:g,onOpenAbout:N}){return n.jsxs(\"div\",{className:\"space-y-12 animate-in fade-in slide-in-from-bottom-4 duration-700 px-4 pb-20\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tight leading-none mb-3\",children:\"Settings & Assets\"}),n.jsx(\"p\",{className:\"text-slate-500 font-bold max-w-md\",children:\"Configure your financial universe and manage core system components.\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[n.jsxs(Ot,{className:\"p-8 cursor-pointer bg-black border-white/5 sq-2xl border hover:bg-white/5 transition-all duration-300 group relative overflow-hidden\",onClick:()=>i(\"emergency\"),children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-blue-500 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20\"}),n.jsxs(\"div\",{className:\"relative z-10\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-blue-500/10 border border-blue-500/20 sq-md flex items-center justify-center text-blue-400 mb-8 group-hover:scale-110 transition-transform duration-500\",children:n.jsx(sl,{className:\"w-8 h-8\"})}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100\",children:\"Emergency Fund\"}),n.jsx(\"p\",{className:\"text-2xl font-black tabular-nums text-blue-400\",children:Ne(u,g)})]}),n.jsxs(\"div\",{className:\"mt-8 flex items-center justify-between text-slate-500\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest\",children:\"Financial Safety Net\"}),n.jsx(Ps,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]})]})]}),n.jsxs(Ot,{className:\"p-8 cursor-pointer bg-black border-white/5 sq-2xl border hover:bg-white/5 transition-all duration-300 group relative overflow-hidden\",onClick:()=>i(\"accounts\"),children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-emerald-500 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20\"}),n.jsxs(\"div\",{className:\"relative z-10\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-emerald-500/10 border border-emerald-500/20 sq-md flex items-center justify-center text-emerald-400 mb-8 group-hover:scale-110 transition-transform duration-500\",children:n.jsx(J0,{className:\"w-8 h-8\"})}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100\",children:\"Accounts & Cards\"}),n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsxs(\"div\",{className:\"space-y-0.5\",children:[n.jsx(\"p\",{className:\"text-2xl font-black tabular-nums text-emerald-400\",children:d}),n.jsx(\"p\",{className:\"text-[10px] font-bold text-slate-600 uppercase tracking-wider\",children:\"Banks\"})]}),n.jsx(\"div\",{className:\"w-px h-8 bg-white/5 self-center mt-2\"}),n.jsxs(\"div\",{className:\"space-y-0.5\",children:[n.jsx(\"p\",{className:\"text-2xl font-black tabular-nums text-emerald-400\",children:h}),n.jsx(\"p\",{className:\"text-[10px] font-bold text-slate-600 uppercase tracking-wider\",children:\"Cards\"})]})]})]}),n.jsxs(\"div\",{className:\"mt-8 flex items-center justify-between text-slate-500\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest\",children:\"Manage Liquidity\"}),n.jsx(Ps,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]})]})]})]}),n.jsxs(\"div\",{className:\"pt-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 mb-8\",children:[n.jsx(\"div\",{className:\"w-1.5 h-6 bg-slate-700 rounded-full\"}),n.jsx(\"h3\",{className:\"text-xs font-black uppercase tracking-[0.3em] text-slate-600\",children:\"System Configuration\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 gap-4\",children:[n.jsx(Ot,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group\",onClick:l,children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400 group-hover:text-white transition-colors\",children:n.jsx(my,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"App Settings\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"Preferences & Display\"})]})]}),n.jsx(Ps,{className:\"w-5 h-5 text-slate-700 group-hover:text-slate-400 transition-colors\"})]})}),n.jsx(Ot,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group\",onClick:o,children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400 group-hover:text-white transition-colors\",children:n.jsx(Lu,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"Alert Center\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"System Notifications\"})]})]}),n.jsx(Ps,{className:\"w-5 h-5 text-slate-700 group-hover:text-slate-400 transition-colors\"})]})}),n.jsx(Ot,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group opacity-60 hover:opacity-100\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400\",children:n.jsx(hy,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"Support\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"Documentation & Help\"})]})]}),n.jsx(Ps,{className:\"w-5 h-5 text-slate-700 transition-colors\"})]})}),n.jsx(Ot,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group opacity-60 hover:opacity-100\",onClick:N,children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400\",children:n.jsx(py,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"About\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"Version 5.0 Stable Release\"})]})]}),n.jsx(Ps,{className:\"w-5 h-5 text-slate-700 transition-colors\"})]})})]})]}),n.jsxs(\"div\",{className:\"text-center pt-8 border-t border-white/5\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-[0.5em] text-slate-700 mb-1\",children:\"FinHub Obsidian System\"}),n.jsx(\"p\",{className:\"text-[9px] font-bold text-slate-800\",children:\"BUILD 50.3.0 // QUANTUM CORE\"})]})]})}function sN({className:i,children:l,...o}){return n.jsxs(gy,{\"data-slot\":\"scroll-area\",className:De(\"relative\",i),...o,children:[n.jsx(xy,{\"data-slot\":\"scroll-area-viewport\",className:\"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1\",children:l}),n.jsx(iN,{}),n.jsx(by,{})]})}function iN({className:i,orientation:l=\"vertical\",...o}){return n.jsx(yy,{\"data-slot\":\"scroll-area-scrollbar\",orientation:l,className:De(\"flex touch-none p-px transition-colors select-none\",l===\"vertical\"&&\"h-full w-2.5 border-l border-l-transparent\",l===\"horizontal\"&&\"h-2.5 flex-col border-t border-t-transparent\",i),...o,children:n.jsx(vy,{\"data-slot\":\"scroll-area-thumb\",className:\"bg-border relative flex-1 rounded-full\"})})}function lN({isOpen:i,onClose:l,notifications:o,onNotificationClick:u,onMarkAsRead:d,onClearRead:h}){const g=o.filter(C=>!C.read).length,N=o.filter(C=>C.read).length,E=C=>{switch(C){case\"achievement\":return n.jsx(jy,{className:\"w-5 h-5 text-yellow-500\"});case\"goal\":return n.jsx(Hn,{className:\"w-5 h-5 text-green-500\"});case\"insight\":return n.jsx(qn,{className:\"w-5 h-5 text-blue-500\"});case\"alert\":return n.jsx(el,{className:\"w-5 h-5 text-red-500\"});case\"reminder\":return n.jsx(Nu,{className:\"w-5 h-5 text-indigo-500\"})}},S=C=>{const M=new Date(C),L=new Date().getTime()-M.getTime(),z=Math.floor(L/6e4),j=Math.floor(L/36e5),G=Math.floor(L/864e5);return z<60?`${z}m ago`:j<24?`${j}h ago`:`${G}d ago`},[p,f]=x.useState({reminders:!0,transactions:!0,achievements:!1,insights:!1}),w=C=>{f(M=>({...M,[C]:!M[C]}))},A=[\"reminders\",\"transactions\",\"insights\",\"achievements\"],T=o.reduce((C,M)=>{const y=M.category||\"insights\";return C[y]||(C[y]=[]),C[y].push(M),C},{});return Object.keys(T).forEach(C=>{T[C].sort((M,y)=>M.read!==y.read?M.read?1:-1:new Date(y.timestamp).getTime()-new Date(M.timestamp).getTime())}),n.jsx(kp,{open:i,onOpenChange:l,children:n.jsxs(Dp,{side:\"right\",className:\"w-full sm:max-w-lg p-0 flex flex-col h-dvh max-h-dvh bg-black border-white/5 text-slate-100 overflow-hidden z-[99999]\",children:[n.jsx(Mp,{className:\"sr-only\",children:\"Notifications\"}),n.jsx(_p,{className:\"sr-only\",children:\"Notifications\"}),n.jsxs(\"div\",{className:\"px-8 pt-28 pb-10 border-b border-white/5 bg-black relative overflow-hidden animate-in fade-in slide-in-from-right-4 duration-500\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-48 h-48 bg-indigo-500 blur-[120px] opacity-10 -mr-24 -mt-24\"}),n.jsx(\"div\",{className:\"absolute bottom-0 left-0 w-24 h-24 bg-blue-500 blur-[80px] opacity-5 -ml-12 -mb-12\"}),n.jsx(\"div\",{className:\"absolute top-8 right-8 z-30\",children:n.jsx(Re,{variant:\"ghost\",size:\"icon\",onClick:l,className:\"w-10 h-10 sq-full bg-white/5 text-slate-400 hover:text-white hover:bg-white/10\",children:n.jsx(il,{className:\"w-5 h-5\"})})}),n.jsxs(\"div\",{className:\"flex items-center justify-between relative z-10\",children:[n.jsxs(\"div\",{className:\"flex flex-col gap-2\",children:[n.jsx(\"div\",{className:\"flex items-center gap-4\",children:n.jsxs(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tighter leading-none flex items-center gap-4\",children:[\"Pulse\",g>0&&n.jsx(\"span\",{className:\"flex items-center justify-center min-w-[24px] h-6 px-2 text-[10px] font-black bg-indigo-600 text-white sq-full shadow-[0_0_15px_rgba(79,70,229,0.4)]\",children:g})]})}),n.jsx(\"p\",{className:\"text-slate-500 font-black text-[10px] uppercase tracking-[0.3em] leading-none ml-0.5\",children:\"System Intelligence Stack\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[g>0&&n.jsx(Re,{variant:\"ghost\",size:\"icon\",title:\"Mark all as read\",onClick:()=>{o.forEach(C=>{C.read||d?.(C.id)})},className:\"w-11 h-11 sq-md bg-white/5 text-slate-400 hover:text-indigo-400 hover:bg-white/10 transition-all duration-300 border border-white/5 active:scale-90\",children:n.jsx(wy,{className:\"w-5 h-5\"})}),N>0&&n.jsx(Re,{variant:\"ghost\",size:\"icon\",title:\"Clear history\",onClick:()=>{confirm(`Clear ${N} notifications?`)&&h?.()},className:\"w-11 h-11 sq-md bg-white/5 text-slate-400 hover:text-rose-400 hover:bg-rose-500/10 transition-all duration-300 border border-white/5 active:scale-90\",children:n.jsx(tl,{className:\"w-5 h-5\"})})]})]})]}),n.jsx(sN,{className:\"flex-1 w-full bg-black overflow-hidden custom-scrollbar\",children:n.jsx(\"div\",{className:\"px-6 space-y-12 py-8 pb-32\",children:o.length===0?n.jsxs(\"div\",{className:\"text-center py-32 flex flex-col items-center animate-in fade-in zoom-in duration-700\",children:[n.jsxs(\"div\",{className:\"w-24 h-24 bg-white/5 border border-white/5 sq-2xl flex items-center justify-center text-slate-800 mb-8 shadow-inner relative group\",children:[n.jsx(\"div\",{className:\"absolute inset-0 bg-indigo-500/5 blur-2xl sq-full group-hover:bg-indigo-500/10 transition-colors\"}),n.jsx(Lu,{className:\"w-10 h-10 relative z-10\"})]}),n.jsx(\"h4\",{className:\"text-2xl font-black text-slate-100 mb-3 tracking-tight\",children:\"Signal Silence\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-black uppercase tracking-[0.3em] max-w-[260px] leading-relaxed\",children:\"No new notifications. We will alert you when there are updates.\"})]}):A.map(C=>{const M=T[C]||[];if(M.length===0)return null;const y=p[C],L=y?M.length:1,z=M.filter(j=>!j.read).length;return n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"button\",{onClick:()=>w(C),...y?{\"aria-expanded\":\"true\"}:{\"aria-expanded\":\"false\"},className:\"w-full flex items-center justify-between px-2 group\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-[0.4em] text-slate-500 group-hover:text-slate-300 transition-colors\",children:C}),z>0&&n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 sq-full animate-pulse shadow-[0_0_10px_rgba(99,102,241,0.6)]\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black text-slate-700\",children:M.length}),y?n.jsx(_r,{className:\"w-3 h-3 text-slate-700\"}):n.jsx(nl,{className:\"w-3 h-3 text-slate-700\"})]})]}),n.jsxs(\"div\",{className:\"space-y-3 relative\",children:[!y&&M.length>1&&n.jsxs(n.Fragment,{children:[n.jsx(\"div\",{className:\"absolute top-2 left-2 right-2 h-full bg-black/40 sq-xl -z-10 border border-white/5 translate-y-2 scale-[0.98]\"}),n.jsx(\"div\",{className:\"absolute top-4 left-4 right-4 h-full bg-black/20 sq-xl -z-20 border border-white/5 translate-y-4 scale-[0.96]\"})]}),M.slice(0,L).map((j,G)=>{const ee={style:{\"--anim-delay\":`${G*50}ms`,\"--z-index\":100-G}};return n.jsxs(\"div\",{...ee,className:`p-6 sq-xl border transition-all duration-500 group relative overflow-hidden cursor-pointer active:scale-[0.98] animate-in fade-in slide-in-from-right-4 fill-mode-both [animation-delay:var(--anim-delay)] z-[var(--z-index)] ${j.read?\"bg-black border-white/5\":\"bg-black border-indigo-500/30 shadow-lg shadow-indigo-500/5 hover:border-indigo-500/50\"}`,onClick:Z=>{Z.stopPropagation(),u?.(j),j.read||d?.(j.id)},children:[j.priority===\"high\"&&!j.read&&n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 bg-red-500 blur-[80px] opacity-10 -mr-16 -mt-16\"}),!j.read&&j.priority!==\"high\"&&n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 bg-indigo-500 blur-[80px] opacity-10 -mr-16 -mt-16 group-hover:opacity-20 transition-opacity\"}),n.jsxs(\"div\",{className:\"flex gap-4 relative z-10\",children:[n.jsx(\"div\",{className:`w-12 h-12 sq-md flex items-center justify-center shrink-0 border border-white/5 transition-all duration-500 ${j.read?\"bg-white/5 text-slate-600\":j.priority===\"high\"?\"bg-red-500/10 text-red-400\":\"bg-indigo-500/10 text-indigo-400 shadow-inner\"}`,children:E(j.type)}),n.jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[n.jsxs(\"div\",{className:\"flex items-start justify-between gap-4\",children:[n.jsx(\"h4\",{className:`text-sm font-black tracking-tight leading-tight ${j.read?\"text-slate-500\":\"text-slate-100\"}`,children:j.title}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-700 whitespace-nowrap pt-1\",children:S(j.timestamp)})]}),n.jsx(\"p\",{className:`text-xs mt-2 leading-relaxed font-bold tracking-tight ${j.read?\"text-slate-700\":\"text-slate-400\"}`,children:j.message}),j.priority===\"high\"&&!j.read&&n.jsxs(\"div\",{className:\"mt-4 flex items-center gap-2\",children:[n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-red-400 sq-full animate-ping\"}),n.jsx(\"span\",{className:\"text-[10px] font-black text-red-400 uppercase tracking-[0.2em]\",children:\"Critical Stability Alert\"})]}),j.action&&j.action.status===\"pending\"&&n.jsxs(\"div\",{className:\"mt-4 flex gap-3 animate-in fade-in slide-in-from-top-1\",children:[n.jsx(Re,{size:\"sm\",className:\"h-8 text-[10px] font-black uppercase tracking-widest bg-emerald-600 hover:bg-emerald-500 text-white border-0\",onClick:Z=>{Z.stopPropagation(),j.action.status=\"completed\",u?.(j)},children:\"Yes, Automate\"}),n.jsx(Re,{size:\"sm\",variant:\"ghost\",className:\"h-8 text-[10px] font-black uppercase tracking-widest text-slate-500 hover:text-slate-300 hover:bg-white/5\",onClick:Z=>{Z.stopPropagation(),j.action.status=\"dismissed\",j.read||d?.(j.id)},children:\"No, One-time\"})]})]})]})]},j.id)})]})]},C)})})})]})})}const R0=[{text:\"An investment in knowledge pays the best interest.\",author:\"Benjamin Franklin\",category:\"financial-literacy\"},{text:\"It's not how much money you make, but how much money you keep, how hard it works for you, and how many generations you keep it for.\",author:\"Robert Kiyosaki\",category:\"financial-literacy\"},{text:\"Financial peace isn't the acquisition of stuff. It's learning to live on less than you make, so you can give money back and have money to invest.\",author:\"Dave Ramsey\",category:\"financial-literacy\"},{text:\"Do not save what is left after spending; instead spend what is left after saving.\",author:\"Warren Buffett\",category:\"financial-literacy\"},{text:\"The stock market is a device for transferring money from the impatient to the patient.\",author:\"Warren Buffett\",category:\"financial-literacy\"},{text:\"Know what you own, and know why you own it.\",author:\"Peter Lynch\",category:\"financial-literacy\"},{text:\"The individual investor should act consistently as an investor and not as a speculator.\",author:\"Ben Graham\",category:\"financial-literacy\"},{text:\"Price is what you pay. Value is what you get.\",author:\"Warren Buffett\",category:\"financial-literacy\"},{text:\"The goal isn't more money. The goal is living life on your terms.\",author:\"Chris Brogan\",category:\"financial-freedom\"},{text:\"Financial freedom is available to those who learn about it and work for it.\",author:\"Robert Kiyosaki\",category:\"financial-freedom\"},{text:\"The rich invest in time, the poor invest in money.\",author:\"Warren Buffett\",category:\"financial-freedom\"},{text:\"Wealth is the ability to fully experience life.\",author:\"Henry David Thoreau\",category:\"financial-freedom\"},{text:\"It's not about having lots of money. It's about knowing how to manage the money you do have.\",author:\"Dave Ramsey\",category:\"financial-freedom\"},{text:\"Money is a terrible master but an excellent servant.\",author:\"P.T. Barnum\",category:\"financial-freedom\"},{text:\"The quickest way to double your money is to fold it in half and put it in your back pocket.\",author:\"Will Rogers\",category:\"financial-freedom\"},{text:\"The best time to plant a tree was 20 years ago. The second best time is now.\",author:\"Chinese Proverb\",category:\"motivation\"},{text:\"A journey of a thousand miles begins with a single step.\",author:\"Lao Tzu\",category:\"motivation\"},{text:\"Success is not final, failure is not fatal: it is the courage to continue that counts.\",author:\"Winston Churchill\",category:\"motivation\"},{text:\"The only way to do great work is to love what you do.\",author:\"Steve Jobs\",category:\"motivation\"},{text:\"Don't watch the clock; do what it does. Keep going.\",author:\"Sam Levenson\",category:\"motivation\"},{text:\"Wealth is not about having a lot of money; it's about having a lot of options.\",author:\"Chris Rock\",category:\"motivation\"},{text:\"Every time you borrow money, you're robbing your future self.\",author:\"Nathan W. Morris\",category:\"motivation\"},{text:\"The habit of saving is itself an education; it fosters every virtue, teaches self-denial, cultivates the sense of order, trains to forethought, and so broadens the mind.\",author:\"T.T. Munger\",category:\"motivation\"},{text:\"Too many people spend money they haven't earned, to buy things they don't want, to impress people they don't like.\",author:\"Will Rogers\",category:\"motivation\"},{text:\"A budget is telling your money where to go instead of wondering where it went.\",author:\"Dave Ramsey\",category:\"motivation\"},{text:\"Beware of little expenses. A small leak will sink a great ship.\",author:\"Benjamin Franklin\",category:\"motivation\"},{text:\"Never spend your money before you have earned it.\",author:\"Thomas Jefferson\",category:\"motivation\"}];function O0(){return R0[Math.floor(Math.random()*R0.length)]}function rN({isOpen:i,onClose:l,achievementId:o}){const[u,d]=x.useState(O0());if(x.useEffect(()=>{i&&o&&(queueMicrotask(()=>{d(O0())}),Or({particleCount:150,spread:100,origin:{y:.6},colors:[\"#FFD700\",\"#FFA500\",\"#FF6347\",\"#9370DB\",\"#3CB371\"]}))},[i,o]),!o)return null;const h=cp(o);return h?n.jsx(us,{open:i,onOpenChange:l,children:n.jsxs(ds,{className:\"w-[270px] sm:w-full sm:max-w-md bg-slate-950 border-[#38383A] p-0 overflow-hidden rounded-[32px] shadow-2xl transition-all duration-500\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 sm:w-64 sm:h-64 bg-yellow-500 blur-[60px] sm:blur-[120px] opacity-10 -mr-16 -mt-16 sm:-mr-32 sm:-mt-32\"}),n.jsx(\"div\",{className:\"absolute bottom-0 left-0 w-24 h-24 sm:w-48 sm:h-48 bg-indigo-500 blur-[50px] sm:blur-[100px] opacity-5 -ml-12 -mb-12 sm:-ml-24 sm:-mb-24\"}),n.jsxs(fs,{className:\"px-6 sm:px-10 pt-8 sm:pt-12 pb-0 relative z-10\",children:[n.jsx(ms,{className:\"text-center text-xl sm:text-3xl font-black text-white tracking-tight transition-all\",children:\"Achievement Unlocked\"}),n.jsx(hs,{className:\"text-center text-[8px] sm:text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] sm:tracking-[0.3em] mt-1 sm:mt-2 transition-all\",children:\"Achievement Unlocked\"})]}),n.jsxs(\"div\",{className:\"space-y-6 sm:space-y-10 py-8 sm:py-12 px-6 sm:px-10 relative z-10\",children:[n.jsxs(\"div\",{className:\"relative flex justify-center\",children:[n.jsx(Le.div,{className:\"relative z-10\",initial:{scale:0,rotateY:0},animate:{scale:1,rotateY:[0,1080],transition:{scale:{duration:.8,ease:\"backOut\"},rotateY:{duration:4,ease:\"easeInOut\"}}},children:n.jsxs(\"div\",{className:\"relative\",children:[n.jsx(Le.div,{className:\"absolute inset-0 bg-yellow-400 blur-3xl opacity-20 rounded-full\",animate:{scale:[1,1.3,1],opacity:[.2,.4,.2]},transition:{duration:3,repeat:1/0,ease:\"easeInOut\"}}),n.jsxs(\"div\",{className:\"relative w-32 h-32 sm:w-44 sm:h-44 bg-gradient-to-br from-yellow-400 via-orange-500 to-yellow-600 rounded-[32px] sm:rounded-[48px] flex items-center justify-center shadow-[0_15px_40px_rgba(234,179,8,0.25)] border-4 border-white/20 transition-all\",children:[n.jsx(\"span\",{className:\"text-5xl sm:text-7xl drop-shadow-2xl transition-all\",children:h.icon}),n.jsx(\"div\",{className:\"absolute inset-0 bg-gradient-to-tr from-white/10 to-transparent pointer-events-none rounded-[28px] sm:rounded-[44px]\"})]})]})}),n.jsxs(\"div\",{className:\"absolute inset-0 z-20 flex justify-center items-center pointer-events-none\",children:[n.jsx(Le.div,{className:\"absolute w-32 h-32 sm:w-48 sm:h-48 bg-yellow-500/40 blur-[40px] sm:blur-[60px] rounded-full\",initial:{scale:0,opacity:0},animate:{scale:1.4,opacity:1},transition:{delay:.3,duration:1.2,ease:\"easeOut\"}}),n.jsx(Le.div,{className:\"absolute w-24 h-24 sm:w-36 sm:h-36 bg-indigo-500/30 blur-[30px] sm:blur-[45px] rounded-full -ml-8 -mt-6 sm:-ml-12 sm:-mt-10\",initial:{scale:0,opacity:0},animate:{scale:1.8,opacity:.8},transition:{delay:.4,duration:1.2,ease:\"easeOut\"}}),n.jsx(Le.div,{className:\"absolute w-20 h-20 sm:w-32 sm:h-32 bg-rose-500/30 blur-[25px] sm:blur-[40px] rounded-full ml-10 mt-8 sm:ml-16 sm:mt-12\",initial:{scale:0,opacity:0},animate:{scale:1.6,opacity:.8},transition:{delay:.5,duration:1.2,ease:\"easeOut\"}})]})]}),n.jsxs(Le.div,{className:\"text-center space-y-2 sm:space-y-4\",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:.6},children:[n.jsx(\"h3\",{className:\"text-lg sm:text-3xl font-black bg-gradient-to-r from-yellow-200 via-yellow-500 to-yellow-200 bg-clip-text text-transparent tracking-tight transition-all\",children:h.name}),n.jsx(\"p\",{className:\"text-slate-400 font-bold text-[11px] sm:text-sm leading-relaxed max-w-[200px] sm:max-w-[280px] mx-auto transition-all\",children:h.description})]}),n.jsx(Le.div,{className:\"flex justify-center\",initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},children:n.jsxs(\"div\",{className:\"flex items-center gap-3 sm:gap-4\",children:[n.jsx(\"div\",{className:\"h-px w-12 sm:w-20 bg-gradient-to-r from-transparent via-white/10 to-transparent\"}),n.jsx(\"div\",{className:\"w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full bg-yellow-500/50 blur-[1px] animate-pulse\"}),n.jsx(\"div\",{className:\"h-px w-12 sm:w-20 bg-gradient-to-r from-transparent via-white/10 to-transparent\"})]})}),n.jsxs(Le.div,{className:\"p-4 sm:p-8 bg-white/5 rounded-2xl sm:rounded-[32px] border border-white/5 relative overflow-hidden transition-all\",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:1},children:[n.jsx(\"div\",{className:\"absolute top-0 left-0 w-12 h-12 bg-indigo-500 blur-2xl opacity-5\"}),n.jsxs(\"div\",{className:\"flex items-start gap-3 sm:gap-6 relative z-10 text-left\",children:[n.jsx(\"span\",{className:\"text-xl sm:text-3xl pt-0 opacity-40\",children:'\"'}),n.jsxs(\"div\",{className:\"flex-1\",children:[n.jsx(\"p\",{className:\"text-[10px] sm:text-sm font-bold italic text-slate-300 leading-snug sm:leading-relaxed tracking-tight transition-all\",children:u.text}),n.jsxs(\"div\",{className:\"flex items-center gap-2 sm:gap-4 mt-3 sm:mt-6 transition-all\",children:[n.jsx(\"div\",{className:\"h-px flex-1 bg-white/5\"}),n.jsxs(\"p\",{className:\"text-[8px] sm:text-[10px] font-black text-slate-500 uppercase tracking-widest shrink-0\",children:[\"— \",u.author]})]})]})]})]})]})]})}):null}const Gp=({accounts:i,goals:l,liabilities:o,expenses:u,emergencyFundAmount:d=0})=>{const h=x.useMemo(()=>i.filter(f=>f.type===\"bank\"||f.type===\"cash\").reduce((f,w)=>f+w.balance,0),[i]),g=x.useMemo(()=>i.filter(f=>f.type===\"credit_card\").reduce((f,w)=>f+Math.abs(w.balance),0),[i]),N=x.useMemo(()=>{const f=o.reduce((A,T)=>A+(T.emiAmount||0),0),w=u.filter(A=>A.isRecurring).reduce((A,T)=>A+T.amount,0);return f+w},[o,u]),E=x.useMemo(()=>l.reduce((w,A)=>w+A.currentAmount,0)+(d||0),[l,d]),S=x.useMemo(()=>E+N,[E,N]),p=x.useMemo(()=>{const f=h-S;return Math.max(0,f)},[h,S]);return{totalBankBalance:h,totalCreditUsage:g,totalCommitments:N,shadowWalletTotal:E,totalReserved:S,availableToSpend:p}},Ki=({children:i,icon:l,variant:o=\"blue\",className:u,...d})=>{const h={blue:\"border-blue-500/50 text-blue-400 hover:border-blue-500 hover:shadow-[0_0_20px_rgba(59,130,246,0.4)] shadow-[0_0_10px_rgba(59,130,246,0.2)]\",green:\"border-emerald-500/50 text-emerald-400 hover:border-emerald-500 hover:shadow-[0_0_20px_rgba(16,185,129,0.4)] shadow-[0_0_10px_rgba(16,185,129,0.2)]\",purple:\"border-purple-500/50 text-purple-400 hover:border-purple-500 hover:shadow-[0_0_20px_rgba(168,85,247,0.4)] shadow-[0_0_10px_rgba(168,85,247,0.2)]\",rose:\"border-rose-500/50 text-rose-400 hover:border-rose-500 hover:shadow-[0_0_20px_rgba(244,63,94,0.4)] shadow-[0_0_10px_rgba(244,63,94,0.2)]\"};return n.jsxs(\"button\",{className:De(\"relative group flex items-center justify-center gap-2 px-6 h-11\",\"bg-[#0A141E]/80 backdrop-blur-md border-2 rounded-2xl transition-all duration-300\",\"font-mono font-bold uppercase tracking-widest text-[10px]\",\"hover:scale-[1.02] active:scale-[0.98]\",h[o],u),...d,children:[l&&n.jsx(l,{className:\"w-4 h-4 transition-all duration-700 ease-quantum group-hover:rotate-[720deg] active:-rotate-12\"}),n.jsx(\"span\",{children:i})]})};function oN({isOpen:i,onClose:l,accounts:o,goals:u,currency:d,destinationType:h,emergencyFund:g,onAllocate:N,liabilities:E=[],expenses:S=[]}){const[p,f]=x.useState(\"\"),[w,A]=x.useState(\"\"),[T,C]=x.useState(\"\"),[M,y]=x.useState(!1),[L,z]=x.useState(!1),{availableToSpend:j,totalBankBalance:G,shadowWalletTotal:ee,totalCommitments:Z}=Gp({accounts:o,goals:u,liabilities:E,expenses:S,emergencyFundAmount:g?.currentAmount||0});x.useEffect(()=>{if(i&&!p&&o.length>0){const k=o.filter(U=>U.type===\"bank\"||U.type===\"cash\");if(k.length>0){const U=k.find(Q=>Q.balance>=j)||[...k].sort((Q,ae)=>ae.balance-Q.balance)[0];U&&queueMicrotask(()=>{f(U.id)})}}},[i,j,o,p]);const _=o.find(k=>k.id===p),B=u.find(k=>k.id===w),J=parseFloat(T)||0,ne=()=>{if(j>0){if(C(j.toString()),h===\"goal\"&&!w&&u.length>0){const k=[...u].sort((U,Q)=>{const ae=new Date(U.targetDate).getTime(),v=new Date(Q.targetDate).getTime();if(ae!==v)return ae-v;const D=U.currentAmount/U.targetAmount,W=Q.currentAmount/Q.targetAmount;return D-W});A(k[0].id),ce.info(`Suggested: ${k[0].name} based on timeline & progress`,{icon:n.jsx(Ga,{className:\"w-4 h-4 text-blue-400\"})})}}else ce.error(\"No surplus liquidity available for auto-fill\")},F=()=>{if(!p){ce.error(\"Please select an account\");return}if(h===\"goal\"&&!w){ce.error(\"Please select a goal\");return}if(!T||J<=0){ce.error(\"Please enter a valid amount\");return}if(_&&J>_.balance){ce.error(\"Insufficient balance in selected account\");return}y(!0)},oe=()=>{N({accountId:p,destinationId:h===\"goal\"?w:\"emergency-fund\",amount:J,destinationType:h}),f(\"\"),A(\"\"),C(\"\"),y(!1),l()},ge=()=>{y(!1)},O=()=>{f(\"\"),A(\"\"),C(\"\"),y(!1),z(!1),l()};return n.jsx(us,{open:i,onOpenChange:O,children:n.jsx(ds,{className:\"max-w-md bg-black border-white/5 text-white p-0 custom-scrollbar sq-2xl overflow-hidden\",children:n.jsxs(\"div\",{className:\"max-h-[85vh] overflow-y-auto p-8 custom-scrollbar\",children:[n.jsxs(fs,{className:\"mb-6\",children:[n.jsx(ms,{className:\"text-xl font-black tracking-tight text-white mb-1\",children:h===\"goal\"?\"🎯 ALLOCATE TO GOAL\":\"🛡️ ALLOCATE TO RESERVE\"}),n.jsxs(hs,{className:\"text-slate-500 text-[10px] uppercase font-black tracking-widest\",children:[\"Move funds from account to \",h===\"goal\"?\"savings milestone\":\"emergency reserve\"]})]}),M?n.jsxs(\"div\",{className:\"space-y-6 py-4\",children:[n.jsx(\"div\",{className:\"text-center pt-2\",children:n.jsx(\"p\",{className:\"text-[10px] text-emerald-500 uppercase font-black tracking-[0.2em] animate-pulse\",children:\"Ready to Allocate Funds\"})}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"div\",{className:\"p-5 bg-white/5 sq-md border border-white/10 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 p-2 opacity-5\",children:n.jsx(zu,{className:\"w-8 h-8\"})}),n.jsx(\"p\",{className:\"text-[8px] text-slate-500 uppercase font-black tracking-widest mb-3 opacity-60\",children:\"Debit Source\"}),n.jsx(\"p\",{className:\"font-black text-sm text-white tracking-tight\",children:_?.name}),n.jsxs(\"div\",{className:\"mt-4 space-y-2.5\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-medium\",children:[n.jsx(\"span\",{className:\"text-slate-400 uppercase tracking-tighter\",children:\"Current Liquidity\"}),n.jsx(\"span\",{className:\"font-mono text-white\",children:Ne(_?.balance||0,d)})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-bold text-rose-500\",children:[n.jsx(\"span\",{className:\"uppercase tracking-tighter\",children:\"Debit Volume\"}),n.jsxs(\"span\",{className:\"font-mono\",children:[\"-\",Ne(J,d)]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"flex justify-between text-xs font-black\",children:[n.jsx(\"span\",{className:\"text-slate-500 uppercase tracking-widest\",children:\"Post-Debit Projection\"}),n.jsx(\"span\",{className:\"text-blue-400 font-mono\",children:Ne((_?.balance||0)-J,d)})]})]})]}),n.jsx(\"div\",{className:\"flex justify-center -my-2 relative z-10\",children:n.jsx(\"div\",{className:\"w-10 h-10 bg-blue-600 sq-md flex items-center justify-center shadow-[0_0_20px_rgba(37,99,235,0.3)] border border-blue-400/20\",children:n.jsx(P0,{className:\"w-5 h-5 text-white\"})})}),n.jsxs(\"div\",{className:`p-5 sq-md border relative overflow-hidden ${h===\"goal\"?\"bg-emerald-500/5 border-emerald-500/20\":\"bg-blue-500/5 border-blue-500/20\"}`,children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 p-2 opacity-10\",children:h===\"goal\"?n.jsx(Ga,{className:\"w-8 h-8 text-emerald-500\"}):n.jsx(Hn,{className:\"w-8 h-8 text-blue-500\"})}),n.jsx(\"p\",{className:\"text-[8px] text-slate-500 uppercase font-black tracking-widest mb-3 opacity-60\",children:\"Credit Destination\"}),n.jsxs(\"div\",{className:\"flex items-center gap-2 mb-4\",children:[n.jsx(\"span\",{className:\"text-xl\",children:h===\"goal\"?B?.emoji:\"🛡️\"}),n.jsx(\"p\",{className:\"font-black text-sm text-white tracking-tight\",children:h===\"goal\"?B?.name:\"Emergency Reserve\"})]}),n.jsxs(\"div\",{className:\"space-y-2.5\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-medium\",children:[n.jsx(\"span\",{className:\"text-slate-400 uppercase tracking-tighter\",children:\"Current Level\"}),n.jsx(\"span\",{className:\"font-mono text-white\",children:Ne((h===\"goal\"?B?.currentAmount:g?.currentAmount)||0,d)})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-bold text-emerald-400\",children:[n.jsx(\"span\",{className:\"uppercase tracking-tighter\",children:\"Credit Volume\"}),n.jsxs(\"span\",{className:\"font-mono\",children:[\"+\",Ne(J,d)]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"flex justify-between text-xs font-black\",children:[n.jsx(\"span\",{className:\"text-slate-500 uppercase tracking-widest\",children:\"Post-Credit Value\"}),n.jsx(\"span\",{className:\"text-emerald-400 font-mono\",children:Ne(((h===\"goal\"?B?.currentAmount:g?.currentAmount)||0)+J,d)})]})]})]})]}),n.jsx(\"div\",{className:\"p-4 bg-amber-500/5 border border-amber-500/20 sq-md\",children:n.jsxs(\"div\",{className:\"flex gap-3\",children:[n.jsx(Eu,{className:\"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5\"}),n.jsxs(\"div\",{className:\"text-[10px]\",children:[n.jsx(\"p\",{className:\"font-black text-amber-400 uppercase tracking-widest mb-1\",children:\"Node Equilibrium Warning\"}),n.jsxs(\"p\",{className:\"text-amber-500/70 font-bold leading-relaxed\",children:[\"Net Liquidity and \",_?.name,\" reserves will be reduced by \",Ne(J,d),\" immediately. This action is final.\"]})]})]})}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Ki,{onClick:ge,className:\"flex-1 h-12 text-slate-500 hover:text-white border-white/5 font-black tracking-[0.2em]\",children:\"Re-Configure\"}),n.jsx(Ki,{onClick:oe,className:\"flex-1 h-12 bg-emerald-600/20 text-emerald-400 border-emerald-500/30 font-black tracking-[0.2em] shadow-lg shadow-emerald-500/10\",children:\"Execute Move\"})]})]}):n.jsxs(\"div\",{className:\"space-y-6\",children:[j>0&&n.jsxs(\"div\",{className:\"relative group overflow-hidden sq-xl border border-emerald-500/20 bg-emerald-500/5 p-5 transition-all hover:bg-emerald-500/10 mb-2\",children:[n.jsx(Qu,{variant:\"savings\"}),n.jsxs(\"div\",{className:\"relative z-10 flex flex-col gap-4\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-10 h-10 bg-emerald-500/20 sq-md flex items-center justify-center border border-emerald-500/30\",children:n.jsx(Ga,{className:\"w-5 h-5 text-emerald-400\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-[9px] text-emerald-500/70 font-black uppercase tracking-widest\",children:\"Surplus Detected\"}),n.jsx(\"h4\",{className:\"text-xl font-black text-white tabular-nums\",children:Ne(j,d)})]})]}),n.jsx(\"button\",{onClick:()=>z(!L),className:\"p-2 hover:bg-white/5 rounded-full transition-colors text-slate-500 hover:text-white\",title:\"Show Calculation\",children:L?n.jsx(_r,{className:\"w-4 h-4\"}):n.jsx(K0,{className:\"w-4 h-4\"})})]}),L&&n.jsxs(\"div\",{className:\"py-3 border-t border-emerald-500/10 space-y-2 animate-in fade-in slide-in-from-top-2 duration-300\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-emerald-500/60 font-medium\",children:[n.jsx(\"span\",{children:\"Total Liquidity\"}),n.jsx(\"span\",{children:Ne(G,d)})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-rose-500/60 font-medium\",children:[n.jsx(\"span\",{children:\"Shadow Wallet (Goals + EF)\"}),n.jsxs(\"span\",{children:[\"-\",Ne(ee,d)]})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-rose-500/60 font-medium pb-2 border-b border-emerald-500/10\",children:[n.jsx(\"span\",{children:\"Total Commitments (Bills)\"}),n.jsxs(\"span\",{children:[\"-\",Ne(Z,d)]})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-emerald-400 font-bold uppercase pt-1\",children:[n.jsx(\"span\",{children:\"Available Safety Margin\"}),n.jsx(\"span\",{children:Ne(j,d)})]})]}),n.jsx(Ki,{onClick:()=>{ne(),_&&j>_.balance&&ce.warning(\"Surplus exceeds selected account balance. Source adjusted.\")},className:\"w-full h-11 bg-emerald-500/20 text-emerald-400 border-emerald-500/30 font-black tracking-widest\",children:\"Allocate All Surplus\"})]})]}),n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(ye,{htmlFor:\"allocate-from-account\",className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 mb-2 block\",children:\"Source Node\"}),n.jsxs(Ut,{value:p,onValueChange:f,children:[n.jsx(Bt,{id:\"allocate-from-account\",name:\"fromAccountId\",className:\"bg-black border-white/5 sq-md h-14 text-white focus:ring-1 focus:ring-blue-500/50\",children:n.jsx(It,{placeholder:\"Select Capital Source\"})}),n.jsx(qt,{className:\"bg-black border-white/10 text-white sq-xl\",children:o.map(k=>n.jsx(qe,{value:k.id,className:\"hover:bg-white/5\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between w-full\",children:[n.jsxs(\"span\",{children:[k.icon,\" \",k.name]}),n.jsx(\"span\",{className:\"text-[10px] text-slate-500 ml-4 font-mono\",children:Ne(k.balance,d)})]})},k.id))})]}),_&&n.jsxs(\"p\",{className:\"text-[10px] text-slate-500 mt-2 italic px-1\",children:[\"Available Liquidity: \",Ne(_.balance,d)]})]}),h===\"goal\"?n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(ye,{htmlFor:\"allocate-to-goal\",className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 mb-2 block\",children:\"Target Milestone\"}),n.jsxs(Ut,{value:w,onValueChange:A,children:[n.jsx(Bt,{id:\"allocate-to-goal\",name:\"toGoalId\",className:\"bg-black border-white/5 sq-md h-14 text-white focus:ring-1 focus:ring-emerald-500/50\",children:n.jsx(It,{placeholder:\"Choose Destination Goal\"})}),n.jsx(qt,{className:\"bg-black border-white/10 text-white sq-xl\",children:u.map(k=>{const U=k.currentAmount/k.targetAmount*100;return n.jsx(qe,{value:k.id,className:\"hover:bg-white/5\",children:n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(\"span\",{className:\"text-lg\",children:k.emoji}),n.jsxs(\"div\",{className:\"min-w-0\",children:[n.jsx(\"div\",{className:\"font-bold text-xs uppercase tracking-tight\",children:k.name}),n.jsxs(\"div\",{className:\"text-[9px] text-slate-500 font-mono\",children:[Math.round(U),\"% SYNCHRONIZED • \",Ne(k.currentAmount,d)]})]})]})},k.id)})})]})]}):n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(ye,{className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 mb-2 block\",children:\"Stability Reserve\"}),n.jsx(\"div\",{className:\"p-4 bg-white/5 border border-white/10 sq-md\",children:n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-10 h-10 bg-blue-500/10 sq-md flex items-center justify-center border border-blue-500/20\",children:\"🛡️\"}),n.jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[n.jsx(\"p\",{className:\"font-black text-xs uppercase tracking-widest text-white\",children:\"Emergency Fund\"}),g&&n.jsxs(\"p\",{className:\"text-[9px] text-slate-500 font-mono mt-1\",children:[Ne(g.currentAmount,d),\" / \",Ne(g.targetAmount,d)]})]})]})})]}),n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(\"div\",{className:\"flex justify-between items-center mb-1\",children:n.jsx(ye,{htmlFor:\"allocate-amount\",className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 block\",children:\"Contribution Volume\"})}),n.jsxs(\"div\",{className:\"relative\",children:[n.jsx(\"span\",{className:\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500\",children:d===\"INR\"?\"₹\":\"$\"}),n.jsx(wt,{id:\"allocate-amount\",name:\"amount\",type:\"number\",placeholder:\"0\",value:T,onChange:k=>C(k.target.value),className:\"pl-8 bg-black border-white/5 h-12\",min:\"0\",step:\"0.01\"})]}),_&&J>_.balance&&n.jsxs(\"div\",{className:\"flex items-center gap-2 text-sm text-red-600\",children:[n.jsx(Eu,{className:\"w-4 h-4\"}),n.jsx(\"span\",{children:\"Amount exceeds available balance\"})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Ki,{onClick:O,className:\"flex-1 h-12 text-slate-500 hover:text-white border-white/5 font-black tracking-[0.2em]\",children:\"Abort\"}),n.jsx(Ki,{onClick:F,className:\"flex-1 h-12 bg-blue-600/20 text-blue-400 border-blue-500/30 font-black tracking-[0.2em] shadow-lg shadow-blue-500/10\",children:\"Preview Mode\"})]})]})]})})})}const cN=[{name:\"HDFC Bank\",icon:\"🏦\",color:\"#1d4ed8\",type:\"bank\"},{name:\"ICICI Bank\",icon:\"🏦\",color:\"#ea580c\",type:\"bank\"},{name:\"State Bank of India\",icon:\"🏦\",color:\"#2563eb\",type:\"bank\"},{name:\"Axis Bank\",icon:\"🏦\",color:\"#9d174d\",type:\"bank\"},{name:\"Kotak Mahindra Bank\",icon:\"🏦\",color:\"#dc2626\",type:\"bank\"},{name:\"Bank of America\",icon:\"🏦\",color:\"#0033aa\",type:\"bank\"},{name:\"Chase Bank\",icon:\"🏦\",color:\"#117aca\",type:\"bank\"},{name:\"Wells Fargo\",icon:\"🏦\",color:\"#d71e28\",type:\"bank\"},{name:\"HSBC\",icon:\"🏦\",color:\"#db0011\",type:\"bank\"},{name:\"Barclays\",icon:\"🏦\",color:\"#00aeef\",type:\"bank\"},{name:\"Standard Chartered\",icon:\"🏦\",color:\"#00945e\",type:\"bank\"},{name:\"Citibank\",icon:\"🏦\",color:\"#003b70\",type:\"bank\"},{name:\"DBS Bank\",icon:\"🏦\",color:\"#ff0000\",type:\"bank\"},{name:\"Federal Bank\",icon:\"🏦\",color:\"#0b5a91\",type:\"bank\"},{name:\"American Express\",icon:\"💳\",color:\"#006fcf\",type:\"credit_card\"},{name:\"Discover\",icon:\"💳\",color:\"#ff6600\",type:\"credit_card\"},{name:\"Capital One\",icon:\"💳\",color:\"#d22e2e\",type:\"credit_card\"},{name:\"Goldman Sachs\",icon:\"🏦\",color:\"#725a34\",type:\"bank\"},{name:\"Morgan Stanley\",icon:\"🏦\",color:\"#000033\",type:\"bank\"},{name:\"Apple Card\",icon:\"💳\",color:\"#000000\",type:\"credit_card\"},{name:\"PayPal\",icon:\"💳\",color:\"#003087\",type:\"credit_card\"},{name:\"Revolut\",icon:\"💳\",color:\"#000000\",type:\"credit_card\"},{name:\"Monzo\",icon:\"💳\",color:\"#ff4d4f\",type:\"credit_card\"}];function uN({accounts:i,currency:l,onCreateAccount:o,onUpdateAccount:u,onDeleteAccount:d}){const[h,g]=x.useState(!1),[N,E]=x.useState(null),[S,p]=x.useState({name:\"\",type:\"bank\",balance:0,color:Wc[0],icon:eu[0].value,creditLimit:0,safeLimitPercentage:30,serviceChargePercentage:0,statementDate:1}),[f,w]=x.useState([]),A=j=>{j?(E(j),p({name:j.name,type:j.type,balance:j.balance,color:j.color,icon:j.icon,creditLimit:j.creditLimit||0,safeLimitPercentage:j.safeLimitPercentage||30,serviceChargePercentage:j.serviceChargePercentage||0,statementDate:j.statementDate||1})):(E(null),p({name:\"\",type:\"bank\",balance:0,color:Wc[0],icon:eu[0].value,creditLimit:0,safeLimitPercentage:30,serviceChargePercentage:0,statementDate:1})),w([]),g(!0)},T=j=>{if(p({...S,name:j}),j.length>1){const G=cN.filter(ee=>ee.name.toLowerCase().includes(j.toLowerCase())).slice(0,4);w(G)}else w([])},C=j=>{p({...S,name:j.name,type:j.type,icon:j.icon,color:j.color}),w([])},M=async j=>{if(j.preventDefault(),!S.name.trim()){ce.error(\"Please enter an account name\");return}try{N?await u(N.id,S):await o(S),g(!1)}catch(G){console.error(\"Error saving account:\",G)}},y=async j=>{if(confirm(\"Are you sure you want to delete this account? This action cannot be undone.\"))try{await d(j)}catch(G){console.error(\"Error deleting account:\",G)}};return n.jsxs(\"div\",{className:\"space-y-12 animate-in fade-in slide-in-from-bottom-4 duration-700 px-4 pb-24\",children:[n.jsxs(\"div\",{className:\"flex items-end justify-between gap-6\",children:[n.jsxs(\"div\",{className:\"min-w-0\",children:[n.jsx(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tight leading-none mb-3 truncate\",children:\"Accounts & Cards\"}),n.jsxs(\"div\",{className:\"flex flex-wrap gap-2 mb-3\",children:[n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-emerald-500 bg-emerald-500/10 px-2 py-0.5 rounded-lg border border-emerald-500/20 whitespace-nowrap\",children:[i.filter(j=>j.type===\"bank\").length,\" Banks\"]}),n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-rose-500 bg-rose-500/10 px-2 py-0.5 rounded-lg border border-rose-500/20 whitespace-nowrap\",children:[i.filter(j=>j.type===\"credit_card\").length,\" Credit\"]}),n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-amber-500 bg-amber-500/10 px-2 py-0.5 rounded-lg border border-amber-500/20 whitespace-nowrap\",children:[i.filter(j=>j.type===\"cash\").length,\" Cash\"]}),n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-blue-500 bg-blue-500/10 px-2 py-0.5 rounded-lg border border-blue-500/20 whitespace-nowrap\",children:[i.filter(j=>j.type===\"investment\").length,\" Holding\"]})]}),n.jsx(\"p\",{className:\"text-slate-500 font-bold max-w-md text-[10px] truncate\",children:\"Monitor liquidity across core reservoirs and credit pools.\"})]}),n.jsxs(Re,{onClick:()=>A(),className:\"bg-emerald-600 hover:bg-emerald-500 text-white rounded-xl px-6 h-12 font-bold shadow-lg shadow-emerald-600/20 transition-all active:scale-95 shrink-0\",children:[n.jsx(kr,{className:\"w-4 h-4 sm:mr-2\"}),n.jsx(\"span\",{className:\"hidden sm:inline\",children:\"Add Account\"}),n.jsx(\"span\",{className:\"sm:hidden\",children:\"Add\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(Ny,{className:\"w-3.5 h-3.5\"}),\"Bank Accounts\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(j=>j.type===\"bank\").map(j=>n.jsx(L,{account:j},j.id)),i.filter(j=>j.type===\"bank\").length===0&&n.jsx(z,{message:\"No bank accounts detected.\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(Sy,{className:\"w-3.5 h-3.5\"}),\"Credit Pools (Cards)\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(j=>j.type===\"credit_card\").map(j=>n.jsx(L,{account:j},j.id)),i.filter(j=>j.type===\"credit_card\").length===0&&n.jsx(z,{message:\"No credit pools detected.\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(zu,{className:\"w-3.5 h-3.5\"}),\"Cash in Hand\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(j=>j.type===\"cash\").map(j=>n.jsx(L,{account:j},j.id)),i.filter(j=>j.type===\"cash\").length===0&&n.jsx(z,{message:\"No physical liquid reservoirs detected.\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(qn,{className:\"w-3.5 h-3.5\"}),\"Investment Holding Nodes\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(j=>j.type===\"investment\").map(j=>n.jsx(L,{account:j},j.id)),i.filter(j=>j.type===\"investment\").length===0&&n.jsx(\"div\",{className:\"md:col-span-2 lg:col-span-3 p-8 border border-dashed border-white/5 squircle-22 flex items-center justify-center text-slate-600 font-bold text-xs\",children:\"No investment nodes detected. Link them to track growth separately.\"})]})]}),n.jsx(us,{open:h,onOpenChange:g,children:n.jsxs(ds,{className:\"max-w-md max-h-[90vh] overflow-y-auto bg-slate-950 border-white/10 text-white squircle-22 p-8 custom-scrollbar\",children:[n.jsxs(fs,{children:[n.jsx(ms,{className:\"text-3xl font-black tracking-tight text-white mb-2\",children:N?\"Refine Account\":\"New Liquidity Reservoir\"}),n.jsx(hs,{className:\"text-slate-500 font-bold mb-6\",children:\"Establish a new liquidity pool in the Obsidian system.\"})]}),n.jsxs(\"form\",{onSubmit:M,className:\"space-y-8\",children:[n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"name\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Account Identity\"}),n.jsx(wt,{id:\"name\",name:\"name\",value:S.name,onChange:j=>T(j.target.value),placeholder:\"e.g. Mercury Checking\",required:!0,className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white focus:ring-emerald-500/50\",autoComplete:\"off\"}),f.length>0&&n.jsxs(\"div\",{className:\"mt-3 p-4 bg-indigo-500/5 border border-indigo-500/10 squircle-12 flex items-start gap-4 animate-in fade-in zoom-in-95 duration-300\",children:[n.jsx(Ga,{className:\"w-4 h-4 text-indigo-400 mt-1 flex-shrink-0\"}),n.jsxs(\"div\",{className:\"flex-1\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-widest text-indigo-300 mb-3 opacity-60\",children:\"Intelligence Suggested\"}),n.jsx(\"div\",{className:\"grid grid-cols-1 gap-2\",children:f.map(j=>n.jsxs(\"button\",{type:\"button\",onClick:()=>C(j),className:\"flex items-center gap-3 p-2.5 squircle-12 bg-white/5 hover:bg-white/10 transition-all group border border-white/5\",children:[n.jsx(\"span\",{className:\"text-lg group-hover:scale-110 transition-transform\",children:j.icon}),n.jsx(\"span\",{className:\"text-xs font-bold text-slate-300 group-hover:text-white transition-colors\",children:j.name})]},j.name))})]})]})]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 md:grid-cols-3 gap-4\",children:[n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${S.type===\"bank\"?\"border-emerald-500 bg-emerald-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>p({...S,type:\"bank\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-emerald-500/20 flex items-center justify-center text-xl mb-2\",children:\"🏦\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Bank Reservoir\"})]}),n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${S.type===\"credit_card\"?\"border-rose-500 bg-rose-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>p({...S,type:\"credit_card\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-rose-500/20 flex items-center justify-center text-xl mb-2\",children:\"💳\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Credit Pool\"})]}),n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${S.type===\"cash\"?\"border-amber-500 bg-amber-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>p({...S,type:\"cash\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-amber-500/20 flex items-center justify-center text-xl mb-2\",children:\"💵\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Cash in Hand\"})]}),n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${S.type===\"investment\"?\"border-blue-500 bg-blue-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>p({...S,type:\"investment\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-blue-500/20 flex items-center justify-center text-xl mb-2\",children:\"📈\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Growth Node\"})]})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"balance\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:S.type===\"bank\"||S.type===\"cash\"||S.type===\"investment\"?\"Initial Liquidity\":\"Current Spent Balance\"}),n.jsx(Ha,{id:\"balance\",name:\"balance\",value:S.balance,onChange:j=>p({...S,balance:parseFloat(j)||0}),placeholder:\"0.00\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]}),S.type===\"credit_card\"&&n.jsxs(\"div\",{className:\"space-y-6 animate-in slide-in-from-top-4 duration-500\",children:[n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"creditLimit\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Total Credit Limit\"}),n.jsx(Ha,{id:\"creditLimit\",name:\"creditLimit\",value:S.creditLimit,onChange:j=>p({...S,creditLimit:parseFloat(j)||0}),placeholder:\"e.g. 100000\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"safeLimit\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Safe Use Threshold (%)\"}),n.jsx(Ha,{id:\"safeLimit\",name:\"safeLimitPercentage\",value:S.safeLimitPercentage,onChange:j=>p({...S,safeLimitPercentage:parseFloat(j)||30}),placeholder:\"30\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"serviceCharge\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Svc Charge (%)\"}),n.jsx(Ha,{id:\"serviceCharge\",name:\"serviceChargePercentage\",value:S.serviceChargePercentage,onChange:j=>p({...S,serviceChargePercentage:parseFloat(j)||0}),placeholder:\"0.0\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"statementDate\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Statement Date\"}),n.jsxs(Ut,{value:S.statementDate.toString(),onValueChange:j=>p({...S,statementDate:parseInt(j)}),children:[n.jsx(Bt,{id:\"statementDate\",name:\"statementDate\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",children:n.jsx(It,{})}),n.jsx(qt,{className:\"bg-slate-900 border-white/10 text-white\",children:[...Array(31)].map((j,G)=>n.jsx(qe,{value:(G+1).toString(),children:G+1},G+1))})]})]})]})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"System Icon\"}),n.jsx(\"div\",{className:\"grid grid-cols-6 sm:grid-cols-9 gap-2\",children:eu.map(j=>n.jsx(\"button\",{type:\"button\",onClick:()=>p({...S,icon:j.value}),className:`w-10 h-10 squircle-12 flex items-center justify-center text-lg border-2 transition-all ${S.icon===j.value?\"border-emerald-500 bg-emerald-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,children:j.value},j.value))})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Brand Color\"}),n.jsx(\"div\",{className:\"flex flex-wrap gap-3\",children:Wc.map(j=>{const G={style:{\"--btn-color\":j}};return n.jsx(\"button\",{type:\"button\",onClick:()=>p({...S,color:j}),\"aria-label\":`Select color ${j}`,className:`w-8 h-8 rounded-full border-4 transition-all bg-[length:100%_100%] bg-[var(--btn-color)] ${S.color===j?\"border-white scale-110 shadow-lg shadow-white/20\":\"border-transparent hover:scale-105\"}`,...G},j)})})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Re,{type:\"button\",variant:\"ghost\",onClick:()=>g(!1),className:\"flex-1 h-14 squircle-12 font-bold text-slate-500 hover:text-white\",children:\"Abort\"}),n.jsx(Re,{type:\"submit\",className:\"flex-1 h-14 squircle-12 bg-emerald-600 hover:bg-emerald-500 text-white font-black shadow-lg shadow-emerald-600/20\",children:N?\"Update Account\":\"Ignite Account\"})]})]})]})})]});function L({account:j}){const G=j.type===\"credit_card\",ee=G?(j.creditLimit||0)*(j.safeLimitPercentage||30)/100:0,Z=G&&j.creditLimit?Math.abs(j.balance)/j.creditLimit*100:0,_=G&&Z<=(j.safeLimitPercentage||30);return n.jsxs(Ot,{className:\"p-6 bg-slate-900/40 border-white/5 squircle-22 border hover:bg-slate-900/60 transition-all duration-300 group relative overflow-hidden\",children:[(()=>{const B={style:{\"--card-glow\":j.color}};return n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20 bg-[var(--card-glow)]\",...B})})(),n.jsxs(\"div\",{className:\"flex items-start justify-between mb-8 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[(()=>{const B={style:{\"--icon-bg\":j.color+\"15\"}};return n.jsx(\"div\",{className:\"w-16 h-16 squircle-12 flex items-center justify-center text-3xl shadow-inner border border-white/5 group-hover:scale-105 transition-transform bg-[var(--icon-bg)]\",...B,children:j.icon})})(),n.jsxs(\"div\",{className:\"min-w-0\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100 truncate\",children:j.name}),n.jsxs(\"div\",{className:\"flex items-center gap-1.5 mt-1\",children:[n.jsx(\"div\",{className:`w-1.5 h-1.5 rounded-full ${G?_?\"bg-indigo-500\":\"bg-rose-500\":\"bg-emerald-500\"}`}),n.jsx(\"span\",{className:\"text-[10px] uppercase font-black tracking-widest text-slate-500\",children:G?\"Credit Pool\":\"Bank Account\"})]})]})]}),n.jsxs(\"div\",{className:\"flex gap-2\",children:[n.jsx(Re,{variant:\"ghost\",title:\"Edit Account\",size:\"sm\",onClick:()=>A(j),className:\"w-8 h-8 p-0 squircle-12 hover:bg-white/5 text-slate-600 hover:text-white transition-all\",children:n.jsx(Cy,{className:\"w-3.5 h-3.5\"})}),n.jsx(Re,{variant:\"ghost\",title:\"Delete Account\",size:\"sm\",onClick:()=>y(j.id),className:\"w-8 h-8 p-0 squircle-12 hover:bg-rose-500/10 text-slate-600 hover:text-rose-400 transition-all\",children:n.jsx(tl,{className:\"w-3.5 h-3.5\"})})]})]}),n.jsxs(\"div\",{className:\"pt-6 border-t border-white/5 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-end\",children:[n.jsxs(\"div\",{className:\"space-y-1\",children:[n.jsx(\"p\",{className:\"text-[10px] uppercase font-black tracking-widest text-slate-600\",children:G?\"Current Obligation\":\"Available Liquidity\"}),(()=>{const B={style:{\"--balance-color\":j.color}};return n.jsx(\"h4\",{className:\"text-2xl font-black tabular-nums tracking-tight text-[var(--balance-color)]\",...B,children:Ne(j.balance,l)})})()]}),G&&j.creditLimit?n.jsxs(\"div\",{className:\"text-right\",children:[n.jsx(\"p\",{className:\"text-[9px] font-black text-slate-600 uppercase mb-1\",children:\"Limit Use\"}),n.jsxs(\"p\",{className:`text-xs font-black tabular-nums ${_?\"text-indigo-400\":\"text-rose-400\"}`,children:[Z.toFixed(1),\"%\"]})]}):n.jsx(\"div\",{className:\"bg-white/5 px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest text-slate-500 border border-white/5\",children:\"Synced\"})]}),G&&j.creditLimit&&n.jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-white/5 flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"space-y-1\",children:[n.jsx(\"p\",{className:\"text-[8px] font-black text-slate-700 uppercase\",children:\"Safe Threshold\"}),n.jsx(\"p\",{className:\"text-[10px] font-black text-slate-500\",children:Ne(ee,l)})]}),j.serviceChargePercentage?n.jsxs(\"div\",{className:\"text-right space-y-1\",children:[n.jsx(\"p\",{className:\"text-[8px] font-black text-slate-700 uppercase\",children:\"Svc Charge\"}),n.jsxs(\"p\",{className:\"text-[10px] font-black text-slate-500\",children:[j.serviceChargePercentage,\"%\"]})]}):null,G&&j.statementDate&&n.jsxs(\"div\",{className:\"text-right space-y-1 ml-auto\",children:[n.jsx(\"p\",{className:\"text-[8px] font-black text-slate-700 uppercase\",children:\"Statement\"}),n.jsxs(\"p\",{className:\"text-[10px] font-black text-slate-500\",children:[\"Day \",j.statementDate]})]})]})]})]})}function z({message:j}){return n.jsx(\"div\",{className:\"py-12 text-center bg-slate-800/20 squircle-22 border border-dashed border-white/10 col-span-full\",children:n.jsx(\"p\",{className:\"text-sm text-slate-500 font-bold\",children:j})})}}function dN({isOpen:i,onClose:l,accounts:o,currency:u,onTransfer:d}){const[h,g]=x.useState(\"\"),[N,E]=x.useState(\"\"),[S,p]=x.useState(\"\"),[f,w]=x.useState(!1),A=o.find(z=>z.id===h),T=o.find(z=>z.id===N),C=parseFloat(S)||0,M=()=>{if(!h){ce.error(\"Please select source reservoir\");return}if(!N){ce.error(\"Please select destination reservoir\");return}if(h===N){ce.error(\"Source and destination must be different\");return}if(!S||C<=0){ce.error(\"Please enter a valid amount\");return}if(A&&C>A.balance){ce.error(\"Insufficient funds in source reservoir\");return}w(!0)},y=()=>{d(h,N,C),L()},L=()=>{g(\"\"),E(\"\"),p(\"\"),w(!1),l()};return n.jsx(us,{open:i,onOpenChange:L,children:n.jsxs(ds,{className:\"max-w-md max-h-[90vh] overflow-y-auto bg-[#020408] border-white/5 p-0 shadow-2xl custom-scrollbar text-white\",children:[n.jsxs(\"div\",{className:\"px-8 pt-10 pb-8 border-b border-white/5 relative overflow-hidden bg-indigo-500/5\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 blur-[60px] opacity-20 -mr-16 -mt-16 bg-indigo-500\"}),n.jsxs(fs,{className:\"relative z-10\",children:[n.jsxs(ms,{className:\"text-2xl font-black tracking-tighter text-slate-100 flex items-center gap-3\",children:[n.jsx(Au,{className:\"w-6 h-6 text-indigo-400\"}),\"Capital Migration\"]}),n.jsx(hs,{className:\"text-slate-500 font-bold text-[10px] uppercase tracking-[0.2em] mt-1\",children:\"Transfer between core liquidity reservoirs\"})]})]}),n.jsx(\"div\",{className:\"p-8\",children:f?n.jsxs(\"div\",{className:\"space-y-6 animate-in fade-in zoom-in-95 duration-300\",children:[n.jsxs(\"div\",{className:\"p-6 bg-slate-900/50 border border-white/5 rounded-3xl space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between gap-4\",children:[n.jsxs(\"div\",{className:\"flex-1 text-center space-y-2\",children:[n.jsx(\"div\",{className:\"w-12 h-12 rounded-2xl bg-slate-800 border border-white/10 flex items-center justify-center text-2xl mx-auto\",children:A?.icon}),n.jsx(\"p\",{className:\"text-[10px] font-black uppercase text-slate-500 truncate\",children:A?.name})]}),n.jsxs(\"div\",{className:\"flex flex-col items-center gap-1\",children:[n.jsx(Au,{className:\"w-6 h-6 text-indigo-400 animate-pulse\"}),n.jsx(\"p\",{className:\"text-[10px] font-black text-indigo-400\",children:Ne(C,u)})]}),n.jsxs(\"div\",{className:\"flex-1 text-center space-y-2\",children:[n.jsx(\"div\",{className:\"w-12 h-12 rounded-2xl bg-slate-800 border border-white/10 flex items-center justify-center text-2xl mx-auto\",children:T?.icon}),n.jsx(\"p\",{className:\"text-[10px] font-black uppercase text-slate-500 truncate\",children:T?.name})]})]}),n.jsxs(\"div\",{className:\"space-y-4 pt-4 border-t border-white/5\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-center text-xs\",children:[n.jsx(\"span\",{className:\"text-slate-500 font-bold\",children:\"Source New Balance\"}),n.jsx(\"span\",{className:\"text-rose-400 font-black\",children:Ne((A?.balance||0)-C,u)})]}),n.jsxs(\"div\",{className:\"flex justify-between items-center text-xs\",children:[n.jsx(\"span\",{className:\"text-slate-500 font-bold\",children:\"Dest. New Balance\"}),n.jsx(\"span\",{className:\"text-emerald-400 font-black\",children:Ne((T?.balance||0)+C,u)})]})]})]}),n.jsxs(\"div\",{className:\"p-4 bg-amber-500/5 border border-amber-500/10 rounded-2xl flex gap-3\",children:[n.jsx(Ar,{className:\"w-5 h-5 text-amber-500 flex-shrink-0\"}),n.jsx(\"p\",{className:\"text-[10px] text-amber-200/60 font-medium leading-relaxed\",children:\"Notice: This transfer will instantly adjust the balance of both accounts. This action is recorded in your transaction history.\"})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Re,{variant:\"ghost\",onClick:()=>w(!1),className:\"flex-1 h-12 rounded-2xl text-slate-500 font-bold hover:bg-white/5\",children:\"Back\"}),n.jsx(Re,{onClick:y,className:\"flex-1 h-12 rounded-2xl bg-indigo-600 hover:bg-indigo-500 text-white font-black shadow-lg shadow-indigo-600/20 transition-all active:scale-95\",children:\"Confirm Migration\"})]})]}):n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(ye,{htmlFor:\"source-reservoir\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Source Reservoir\"}),n.jsxs(Ut,{value:h,onValueChange:g,children:[n.jsx(Bt,{id:\"source-reservoir\",className:\"h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-200 font-bold\",children:n.jsx(It,{placeholder:\"Select source\"})}),n.jsx(qt,{className:\"bg-slate-900 border-white/5 max-h-[40vh]\",children:o.map(z=>n.jsx(qe,{value:z.id,className:\"focus:bg-white/5 focus:text-white\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between w-full pr-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-xl\",children:z.icon}),n.jsx(\"span\",{children:z.name})]}),n.jsx(\"span\",{className:\"text-xs font-black text-slate-500\",children:Ne(z.balance,u)})]})},z.id))})]})]}),n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(ye,{htmlFor:\"dest-reservoir\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Destination Reservoir\"}),n.jsxs(Ut,{value:N,onValueChange:E,children:[n.jsx(Bt,{id:\"dest-reservoir\",className:\"h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-200 font-bold\",children:n.jsx(It,{placeholder:\"Select destination\"})}),n.jsx(qt,{className:\"bg-slate-900 border-white/5 max-h-[40vh]\",children:o.map(z=>n.jsx(qe,{value:z.id,className:\"focus:bg-white/5 focus:text-white\",disabled:z.id===h,children:n.jsxs(\"div\",{className:\"flex items-center justify-between w-full pr-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-xl\",children:z.icon}),n.jsx(\"span\",{children:z.name})]}),n.jsx(\"span\",{className:\"text-xs font-black text-slate-500\",children:Ne(z.balance,u)})]})},z.id))})]})]}),n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(ye,{htmlFor:\"migration-amount\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Capital Amount\"}),n.jsxs(\"div\",{className:\"relative group\",children:[n.jsx(\"div\",{className:\"absolute left-5 top-1/2 -translate-y-1/2 text-slate-500 font-bold group-focus-within:text-indigo-400 transition-colors\",children:u===\"INR\"?\"₹\":\"$\"}),n.jsx(wt,{id:\"migration-amount\",name:\"amount\",type:\"number\",placeholder:\"0.00\",value:S,onChange:z=>p(z.target.value),className:\"pl-12 h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-100 font-black text-xl\"})]}),A&&C>A.balance&&n.jsxs(\"div\",{className:\"flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-rose-400 ml-1 animate-in slide-in-from-top-1\",children:[n.jsx(Eu,{className:\"w-3 h-3\"}),n.jsx(\"span\",{children:\"Insufficient stability in source reservoir\"})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Re,{variant:\"ghost\",onClick:L,className:\"flex-1 h-12 rounded-2xl text-slate-500 font-bold hover:bg-white/5\",children:\"Cancel\"}),n.jsx(Re,{onClick:M,className:\"flex-1 h-12 rounded-2xl bg-indigo-600 hover:bg-indigo-500 text-white font-black shadow-lg shadow-indigo-600/20 transition-all active:scale-95\",children:\"Verify Migration\"})]})]})})]})})}function fN({onRefresh:i,children:l}){const o=x.useRef(0),[u,d]=x.useState(0),[h,g]=x.useState(!1),N=x.useRef(null),E=80,S=f=>{window.scrollY===0&&(o.current=f.touches[0].clientY)};x.useEffect(()=>{const f=A=>{if(o.current===0)return;const C=A.touches[0].clientY-o.current;if(C>0&&window.scrollY===0){A.cancelable&&A.preventDefault();const M=Math.min(C,E*1.5);d(M)}},w=N.current;return w&&w.addEventListener(\"touchmove\",f,{passive:!1}),()=>{w&&w.removeEventListener(\"touchmove\",f)}},[]),x.useEffect(()=>{u>=E&&!h&&window.navigator.vibrate&&window.navigator.vibrate(10)},[u,h]);const p=async()=>{u>=E&&!h&&(g(!0),await i(),g(!1)),d(0),o.current=0};return n.jsxs(\"div\",{ref:N,className:\"relative\",onTouchStart:S,onTouchEnd:p,children:[n.jsx(Le.div,{className:\"absolute top-0 left-0 right-0 flex justify-center items-center\",style:{height:u,opacity:u/E},animate:{y:h?0:-E},children:n.jsxs(\"div\",{className:\"flex flex-col items-center gap-2 py-4\",children:[n.jsx(Le.div,{animate:{rotate:h?360:u/E*180},transition:{rotate:{duration:h?1:0,repeat:h?1/0:0,ease:\"linear\"}},children:n.jsx(ei,{className:\"w-6 h-6 text-[#0A84FF]\"})}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-[0.2em] text-[#8E8E93]\",children:h?\"Synchronizing...\":u>=E?\"Relinquish to Sync\":\"Pull to Synchronize\"})]})}),n.jsx(Le.div,{animate:{y:h?60:0},transition:{duration:.2},children:l})]})}function os({className:i,...l}){return n.jsx(\"div\",{\"data-slot\":\"skeleton\",className:De(\"bg-accent animate-pulse rounded-md\",i),...l})}function mN(){return n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(Ot,{className:\"p-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 mb-4\",children:[n.jsx(os,{className:\"w-12 h-12 rounded-lg\"}),n.jsxs(\"div\",{className:\"space-y-2 flex-1\",children:[n.jsx(os,{className:\"h-5 w-32\"}),n.jsx(os,{className:\"h-4 w-48\"})]})]}),n.jsx(\"div\",{className:\"grid grid-cols-3 gap-3\",children:[1,2,3].map(i=>n.jsx(\"div\",{className:\"space-y-2\",children:n.jsx(os,{className:\"h-20 w-full rounded-lg\"})},i))})]}),[1,2,3].map(i=>n.jsx(Ot,{className:\"p-6\",children:n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(os,{className:\"h-6 w-48\"}),n.jsx(os,{className:\"h-4 w-full\"}),n.jsx(os,{className:\"h-4 w-3/4\"})]})},i))]})}function hN(i,l,o=30){x.useEffect(()=>{let u=0;const d=g=>{u=g.touches[0].clientX},h=g=>{const E=g.touches[0].clientX-u;u<o&&E>30&&(g.cancelable&&g.preventDefault(),window.navigator.vibrate&&window.navigator.vibrate(20),i(),u=window.innerWidth),u>window.innerWidth-o&&E<-30&&(g.cancelable&&g.preventDefault(),window.navigator.vibrate&&window.navigator.vibrate(20),l(),u=0)};return document.addEventListener(\"touchstart\",d,{passive:!0}),document.addEventListener(\"touchmove\",h,{passive:!1}),()=>{document.removeEventListener(\"touchstart\",d),document.removeEventListener(\"touchmove\",h)}},[i,l,o])}const pN=({onOpenAI:i,onAddTransaction:l,onMigrate:o,isVisible:u})=>n.jsxs(\"div\",{id:\"fab-dock\",className:`fixed right-5 bottom-[110px] flex flex-col gap-3.5 z-[110] transition-all duration-500 ease-quantum ${u?\"translate-x-0 opacity-100\":\"translate-x-[100px] opacity-0\"}`,children:[n.jsx(\"div\",{onClick:i,title:\"AI Assistant\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-[#a855f74d] shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-[#A855F7] hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(Ga,{className:\"w-5 h-5 group-hover:rotate-12 transition-transform\"})}),n.jsx(\"div\",{onClick:o,title:\"Migrate Capital\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-indigo-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-indigo-400 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(Au,{className:\"w-5 h-5 group-hover:scale-110 transition-transform\"})}),n.jsx(\"div\",{onClick:()=>l(\"debt\"),title:\"Added Personal IOU\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-yellow-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-yellow-500 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(Z0,{className:\"w-5 h-5 group-hover:-translate-y-0.5 transition-transform\"})}),n.jsx(\"div\",{onClick:()=>l(\"income\"),title:\"Add Money In\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-emerald-500/40 shadow-[0_0_20px_rgba(16,185,129,0.1)] cursor-pointer text-emerald-500 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(kr,{className:\"w-5 h-5 group-hover:rotate-90 transition-transform\"})}),n.jsx(\"div\",{onClick:()=>l(\"expense\"),title:\"Add Money Out\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-rose-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-rose-500 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(Ey,{className:\"w-5 h-5 group-hover:scale-110 transition-transform\"})})]}),gN=he.memo(({isOpen:i,onClose:l,context:o,settings:u,isOffline:d=!1})=>{const[h,g]=x.useState(\"\"),[N,E]=x.useState([{text:\"Hello! I've analyzed your cash flow. How can I assist with your goals?\",type:\"ai\"}]),[S,p]=x.useState(!1),f=x.useRef(null);x.useEffect(()=>{f.current&&f.current.scrollIntoView({behavior:\"smooth\"})},[N]);const w=async()=>{if(!h.trim()||S)return;const A=h.trim();g(\"\"),E(T=>[...T,{text:A,type:\"user\"}]),p(!0);try{if(d){setTimeout(()=>{E(C=>[...C,{text:\"FinHub is currently in 'Cached View' (Offline). I've analyzed your local financial fabric: your liquidity nodes are stable, but synchronizing with global AI intelligence requires a stable link. How can I help you optimize your local state?\",type:\"ai\"}]),p(!1)},1e3);return}const T=await Wj({userPrompt:A,context:o,settings:u,persona:\"ANALYST\"});T.error?E(C=>[...C,{text:T.error,type:\"ai\"}]):E(C=>[...C,{text:T.text||\"Analyzing financial pattern...\",type:\"ai\"}])}catch{E(T=>[...T,{text:\"Connection error. FinHub has transitioned to local 'Cached View'.\",type:\"ai\"}])}finally{d||p(!1)}};return i?n.jsxs(\"div\",{id:\"ai-chat-overlay\",className:\"fixed inset-0 bg-[#020408] z-[200] flex flex-col p-6 animate-in fade-in zoom-in-95 duration-300\",children:[n.jsx(\"div\",{className:\"absolute inset-0 bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-indigo-500/10 via-transparent to-transparent opacity-50\"}),n.jsxs(\"div\",{className:\"flex justify-between items-center mb-10 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-indigo-500/10 rounded-2xl flex items-center justify-center border border-indigo-500/20\",children:n.jsx(Ga,{className:\"text-indigo-400 w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"h2\",{className:\"font-black text-2xl text-white tracking-tight leading-none\",children:\"AI Analyst\"}),n.jsxs(\"div\",{className:\"flex items-center gap-2 mt-1\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500\",children:\"Neural Core Context\"}),d&&n.jsx(\"span\",{className:\"text-[8px] bg-amber-500/10 text-amber-500 px-1.5 py-0.5 rounded border border-amber-500/20 font-black tracking-tighter uppercase\",children:\"Cached View\"})]})]})]}),n.jsx(\"button\",{onClick:l,\"aria-label\":\"Close Chat\",className:\"bg-white/5 w-12 h-12 rounded-full flex items-center justify-center hover:bg-white/10 hover:text-white text-slate-400 transition-all active:scale-95\",children:n.jsx(il,{className:\"w-6 h-6\"})})]}),n.jsxs(\"div\",{id:\"chat-messages\",className:\"flex-1 overflow-y-auto space-y-4 pr-2 custom-scrollbar\",children:[N.map((A,T)=>n.jsxs(\"div\",{className:De(\"p-4 rounded-[24px] text-sm leading-relaxed\",A.type===\"ai\"?\"bg-slate-900 border border-white/5 text-slate-200 self-start max-w-[85%]\":\"bg-indigo-600 text-white font-medium shadow-lg shadow-indigo-600/20 self-end max-w-[85%]\"),children:[A.type===\"ai\"&&n.jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[n.jsx(Ga,{className:\"w-3 h-3 text-indigo-400 font-black\"}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500\",children:\"Guru Analysis\"})]}),A.text]},T)),S&&n.jsx(\"div\",{className:\"p-4 bg-slate-900 border border-white/5 rounded-[24px] self-start animate-pulse\",children:n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:0ms]\"}),n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:150ms]\"}),n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:300ms]\"})]})}),n.jsx(\"div\",{ref:f})]}),n.jsxs(\"div\",{className:\"mt-8 flex gap-3 p-2 bg-slate-900/40 rounded-[28px] border border-white/5 relative z-10\",children:[n.jsx(\"input\",{type:\"text\",value:h,onChange:A=>g(A.target.value),onKeyDown:A=>A.key===\"Enter\"&&w(),placeholder:\"Ask the analyst...\",className:\"flex-1 bg-transparent border-none px-6 py-4 text-white focus:outline-none placeholder:text-slate-600 font-bold\"}),n.jsx(\"button\",{onClick:w,disabled:S||!h.trim(),\"aria-label\":\"Send Message\",className:\"w-14 h-14 bg-indigo-600 rounded-[22px] flex items-center justify-center shadow-lg shadow-indigo-900/30 hover:bg-indigo-500 transition-all active:scale-90 disabled:opacity-50 disabled:cursor-not-allowed group\",children:n.jsx(Ay,{className:\"w-6 h-6 text-white group-hover:-translate-y-1 transition-transform\"})})]}),n.jsx(\"p\",{className:\"text-[9px] font-bold text-slate-600 text-center uppercase tracking-widest mt-4\",children:\"Encryption Verified // Neural Fabric Link Stable\"})]}):null});class xN extends x.Component{state={hasError:!1};static getDerivedStateFromError(l){return{hasError:!0,error:l}}componentDidCatch(l,o){console.error(\"Uncaught error:\",l,o)}render(){return this.state.hasError?n.jsx(\"div\",{className:\"min-h-[400px] flex items-center justify-center p-6\",children:n.jsxs(Ot,{className:\"max-w-md w-full p-8 bg-slate-900 border-white/10 text-center space-y-6 rounded-[32px]\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-rose-500/10 rounded-full flex items-center justify-center mx-auto\",children:n.jsx(el,{className:\"w-8 h-8 text-rose-500\"})}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(\"h2\",{className:\"text-xl font-black text-white uppercase tracking-tight\",children:\"System Glitch Detected\"}),n.jsx(\"p\",{className:\"text-sm text-slate-400 font-medium\",children:\"The neural link to this component was interrupted. This usually happens during background updates.\"})]}),this.state.error&&n.jsx(\"pre\",{className:\"text-[10px] bg-black/40 p-3 rounded-xl text-rose-400/80 overflow-x-auto text-left font-mono\",children:this.state.error.message}),n.jsxs(Re,{onClick:()=>window.location.reload(),className:\"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-black py-6 rounded-2xl gap-2 h-auto\",children:[n.jsx(ei,{className:\"w-4 h-4\"}),\"Re-establish Connection\"]})]})}):this.props.children}}var z0;(function(i){i[i.NONE=0]=\"NONE\",i[i.TOUCH_ID=1]=\"TOUCH_ID\",i[i.FACE_ID=2]=\"FACE_ID\",i[i.FINGERPRINT=3]=\"FINGERPRINT\",i[i.FACE_AUTHENTICATION=4]=\"FACE_AUTHENTICATION\",i[i.IRIS_AUTHENTICATION=5]=\"IRIS_AUTHENTICATION\",i[i.MULTIPLE=6]=\"MULTIPLE\"})(z0||(z0={}));var L0;(function(i){i[i.NONE=0]=\"NONE\",i[i.STRONG=1]=\"STRONG\",i[i.WEAK=2]=\"WEAK\"})(L0||(L0={}));var U0;(function(i){i[i.UNKNOWN_ERROR=0]=\"UNKNOWN_ERROR\",i[i.BIOMETRICS_UNAVAILABLE=1]=\"BIOMETRICS_UNAVAILABLE\",i[i.USER_LOCKOUT=2]=\"USER_LOCKOUT\",i[i.BIOMETRICS_NOT_ENROLLED=3]=\"BIOMETRICS_NOT_ENROLLED\",i[i.USER_TEMPORARY_LOCKOUT=4]=\"USER_TEMPORARY_LOCKOUT\",i[i.AUTHENTICATION_FAILED=10]=\"AUTHENTICATION_FAILED\",i[i.APP_CANCEL=11]=\"APP_CANCEL\",i[i.INVALID_CONTEXT=12]=\"INVALID_CONTEXT\",i[i.NOT_INTERACTIVE=13]=\"NOT_INTERACTIVE\",i[i.PASSCODE_NOT_SET=14]=\"PASSCODE_NOT_SET\",i[i.SYSTEM_CANCEL=15]=\"SYSTEM_CANCEL\",i[i.USER_CANCEL=16]=\"USER_CANCEL\",i[i.USER_FALLBACK=17]=\"USER_FALLBACK\"})(U0||(U0={}));const I0=cs(\"NativeBiometric\",{web:()=>Fa(()=>import(\"./web-CyZe6ZkC.js\"),__vite__mapDeps([7,1,2,3,4])).then(i=>new i.NativeBiometricWeb)}),bN=()=>{const{checkIdentity:i,login:l,signup:o,sendOtp:u,verifyOtp:d,resetPin:h,isRememberedUser:g,rememberedMobile:N,pendingMobile:E,clearPendingSession:S}=ai(),[p,f]=x.useState(\"identity\"),[w,A]=x.useState(\"\"),[T,C]=x.useState(\"\"),[M,y]=x.useState(\"\"),[L,z]=x.useState(\"\"),[j,G]=x.useState(\"\"),[ee,Z]=x.useState(\"\"),[_,B]=x.useState(!1),[J,ne]=x.useState(!1),[F,oe]=x.useState(!1),[ge,O]=x.useState(!1),k=x.useRef(null),U=he.useCallback(async()=>{if(Gn.isNativePlatform())try{if(!(await I0.isAvailable()).isAvailable)return;O(!0),await I0.verifyIdentity({reason:\"Authenticate to access your private node\",title:\"Login to FinHub\",subtitle:\"Use biometrics to login\",description:\"Touch the sensor to verify identity\",negativeButtonText:\"Cancel\"}),await l(\"2255\",!0)||O(!1)}catch(le){console.error(\"Biometric error:\",le),O(!1),navigator.vibrate&&navigator.vibrate([50,50])}},[l]);x.useEffect(()=>{g&&N?(A(N),f(\"verify\"),U()):E&&(A(E),f(\"verify\"))},[g,N,E,U]);const Q=he.useCallback(async()=>{if(w.length!==10)return;const le=await i(w);f(le?\"verify\":\"create_name\"),C(\"\")},[w,i]);x.useEffect(()=>{p===\"identity\"&&w.length===10&&Q()},[w,p,Q]);const ae=he.useCallback(async()=>{p===\"verify\"?await l(T,J)?(navigator.vibrate&&navigator.vibrate([10]),!J&&!g&&oe(!0)):q():p===\"create_pin\"?T.length===4&&(await o(w,T,M,J)||q()):p===\"reset_pin\"&&(j===ee&&j.length===4&&await h(w,j)?(f(\"verify\"),C(\"\"),G(\"\"),Z(\"\")):q())},[p,l,T,J,o,w,M,h,j,ee,g]);x.useEffect(()=>{p===\"verify\"&&T.length===4&&ae()},[T,p,ae]),x.useEffect(()=>{k.current&&(k.current.focus(),k.current.type!==\"hidden\"&&k.current.select())},[p]);const v=async()=>{await u(w)&&f(\"otp_reset\")},D=async()=>{if(M.trim().length<2)return;await u(w)&&f(\"otp_verify\")},W=async()=>{await d(w,L)?f(p===\"otp_verify\"?\"create_pin\":\"reset_pin\"):q()},q=()=>{B(!0),navigator.vibrate&&navigator.vibrate([50,30,50]),setTimeout(()=>B(!1),500),z(\"\"),C(\"\"),Z(\"\")},Y=()=>p===\"identity\"?w.length!==10:p===\"verify\"?T.length!==4:p===\"otp_verify\"||p===\"otp_reset\"?L.length!==4:p===\"create_name\"?M.trim().length<2:p===\"create_pin\"?T.length!==4:p===\"reset_pin\"?j.length!==4||ee.length!==4:!1,V=()=>{S(),f(\"identity\"),A(\"\"),C(\"\")},te=le=>{le.key===\"Enter\"&&!Y()&&me()()},me=()=>{switch(p){case\"identity\":return Q;case\"otp_verify\":case\"otp_reset\":return W;case\"create_name\":return D;case\"verify\":case\"create_pin\":case\"reset_pin\":return ae;default:return()=>{}}},ie=()=>{switch(p){case\"identity\":return\"Continue\";case\"otp_verify\":case\"otp_reset\":return\"Verify OTP\";case\"create_name\":return\"Next\";case\"verify\":return\"Login\";case\"create_pin\":return\"Create Account\";case\"reset_pin\":return\"Reset PIN\";default:return\"Continue\"}};return n.jsxs(\"div\",{className:\"fixed inset-0 flex flex-col items-center justify-center overflow-hidden font-sans auth-mesh-gradient z-[9999999]\",children:[n.jsx(\"div\",{className:\"absolute inset-0 z-0 bg-[url('/mesh-grid.svg')] opacity-20\"}),n.jsxs(Le.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},className:\"absolute top-12 z-10 flex flex-col items-center gap-2\",children:[n.jsx(\"img\",{src:\"/images/logo-dark.png\",alt:\"FinHub\",className:\"h-12 w-auto\"}),n.jsx(\"span\",{className:\"text-xs font-medium text-white/40 tracking-widest uppercase\",children:\"v0.1 Beta\"})]}),n.jsxs(\"div\",{className:\"z-10 w-full max-w-sm px-8\",children:[n.jsxs(Bn,{mode:\"wait\",children:[p===\"identity\"&&n.jsxs(Le.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},exit:{x:-20,opacity:0},className:\"flex flex-col gap-6\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Welcome\"}),n.jsx(\"p\",{className:\"text-white/50 text-sm mt-2\",children:\"Enter your mobile number to continue\"})]}),n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-sky-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"Mobile Number\"}),n.jsx(\"input\",{ref:k,type:\"text\",inputMode:\"numeric\",maxLength:10,value:w,onChange:le=>A(le.target.value.replace(/\\D/g,\"\")),onKeyDown:te,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"999 999 9999\"})]}),n.jsxs(\"div\",{onClick:()=>{ne(!J),navigator.vibrate&&navigator.vibrate(5)},className:\"flex items-center gap-3 cursor-pointer self-center\",children:[n.jsx(\"div\",{className:`h-5 w-5 rounded-md border transition-all flex items-center justify-center ${J?\"bg-sky-500 border-sky-500\":\"border-white/20 bg-white/5\"}`,children:J&&n.jsx(Cu,{className:\"h-3.5 w-3.5 text-white\"})}),n.jsx(\"span\",{className:\"text-sm text-white/60 font-medium\",children:\"Remember me for 30 days\"})]})]},\"identity\"),p===\"create_name\"&&n.jsxs(Le.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},exit:{x:-20,opacity:0},className:\"flex flex-col gap-6\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Who are you?\"}),n.jsx(\"p\",{className:\"text-white/50 text-sm mt-2\",children:\"Personalize your node experience\"})]}),n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-sky-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"Full Name\"}),n.jsx(\"input\",{ref:k,type:\"text\",value:M,onChange:le=>y(le.target.value),onKeyDown:te,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"Joe Doe\"})]})]},\"create_name\"),(p===\"otp_verify\"||p===\"otp_reset\")&&n.jsxs(Le.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,x:_?[0,-10,10,-10,10,0]:0},exit:{scale:1.1,opacity:0},className:\"relative flex flex-col gap-8 items-center\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"div\",{className:\"mb-4 flex justify-center\",children:n.jsx(\"div\",{className:\"p-4 rounded-full bg-white/5 ring-1 ring-white/10\",children:n.jsx(ky,{className:\"h-8 w-8 text-sky-400\"})})}),n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Verify Node\"}),n.jsxs(\"p\",{className:\"text-white/40 text-sm mt-2\",children:[\"Enter the 4-digit code sent to\",n.jsx(\"br\",{}),n.jsx(\"span\",{className:\"text-white/70\",children:w})]})]}),n.jsxs(\"div\",{className:\"group relative flex flex-col items-center justify-center rounded-[32px] bg-white/5 p-10 ring-1 ring-white/10 backdrop-blur-md\",children:[n.jsx(\"div\",{className:\"flex gap-5\",children:[0,1,2,3].map(le=>n.jsx(Le.div,{animate:{scale:le<L.length?1.2:1,backgroundColor:le<L.length?\"#fff\":\"rgba(255,255,255,0.1)\"},transition:{duration:.1},className:\"h-3.5 w-3.5 rounded-full\"},le))}),n.jsx(\"input\",{ref:k,type:\"password\",inputMode:\"numeric\",maxLength:4,value:L,onChange:le=>z(le.target.value.replace(/\\D/g,\"\")),onKeyDown:te,className:\"absolute inset-0 opacity-0 cursor-default\",\"aria-label\":\"One-time Password\",placeholder:\"OTP\"})]})]},\"otp\"),p===\"reset_pin\"&&n.jsxs(Le.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,x:_?[0,-10,10,-10,10,0]:0},exit:{scale:1.1,opacity:0},className:\"relative flex flex-col gap-8 items-center\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"div\",{className:\"mb-4 flex justify-center\",children:n.jsx(\"div\",{className:\"p-4 rounded-full bg-white/5 ring-1 ring-white/10\",children:n.jsx(Ty,{className:\"h-8 w-8 text-amber-400\"})})}),n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Reset PIN\"}),n.jsx(\"p\",{className:\"text-white/40 text-sm mt-2\",children:\"Choose a new secure 4-digit access code\"})]}),n.jsxs(\"div\",{className:\"space-y-4 w-full\",children:[n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-amber-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"New PIN\"}),n.jsx(\"input\",{type:\"password\",inputMode:\"numeric\",maxLength:4,value:j,onChange:le=>G(le.target.value.replace(/\\D/g,\"\")),onKeyDown:te,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"****\"})]}),n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-amber-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"Confirm PIN\"}),n.jsx(\"input\",{type:\"password\",inputMode:\"numeric\",maxLength:4,value:ee,onChange:le=>Z(le.target.value.replace(/\\D/g,\"\")),onKeyDown:te,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"****\"})]})]})]},\"reset_pin\"),(p===\"verify\"||p===\"create_pin\")&&n.jsxs(Le.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,x:_?[0,-10,10,-10,10,0]:0},exit:{scale:1.1,opacity:0},className:\"relative flex flex-col gap-8 items-center\",children:[n.jsx(Le.div,{initial:{opacity:0},animate:{opacity:1},className:\"fixed inset-0 z-[-1] bg-black/80 backdrop-blur-xl\"}),n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(Le.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:\"mb-4 flex justify-center\",children:n.jsx(\"div\",{className:\"p-4 rounded-full bg-white/5 ring-1 ring-white/10\",children:n.jsx(sl,{className:\"h-8 w-8 text-sky-400\"})})}),n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:p===\"verify\"?\"Private Access\":\"Secure Setup\"}),n.jsx(\"p\",{className:\"text-white/40 text-sm mt-2\",children:p===\"verify\"?\"Encrypted PIN required\":\"Create your master PIN\"})]}),n.jsxs(\"div\",{className:\"group relative flex flex-col items-center justify-center rounded-[32px] bg-white/5 p-10 ring-1 ring-white/10 backdrop-blur-md\",children:[n.jsx(\"div\",{className:\"flex gap-5\",children:[0,1,2,3].map(le=>n.jsx(Le.div,{animate:{scale:le<T.length?1.2:1,backgroundColor:le<T.length?\"#fff\":\"rgba(255,255,255,0.1)\"},transition:{duration:.1},className:\"h-3.5 w-3.5 rounded-full\"},le))}),n.jsx(\"input\",{ref:k,type:\"password\",inputMode:\"numeric\",maxLength:4,value:T,onChange:le=>C(le.target.value.replace(/\\D/g,\"\")),onKeyDown:te,className:\"absolute inset-0 opacity-0 cursor-default\",\"aria-label\":\"Access PIN\",placeholder:\"PIN\"})]}),p===\"verify\"&&n.jsxs(\"div\",{className:\"flex flex-col items-center gap-4\",children:[n.jsxs(\"button\",{onClick:U,className:\"flex items-center gap-2 text-sky-400 text-sm font-medium\",children:[n.jsx(Hn,{className:\"h-5 w-5\"}),\" Use Biometrics\"]}),n.jsx(\"button\",{onClick:v,className:\"text-white/30 text-xs hover:text-white/50 transition-colors\",children:\"Forgot PIN? Reset via SMS\"}),n.jsx(\"button\",{onClick:V,className:\"text-sky-500/50 text-[10px] font-bold uppercase tracking-widest hover:text-sky-400/80 transition-colors mt-2\",children:\"Login with another account\"})]})]},\"pin\")]}),n.jsxs(Le.button,{onClick:me(),disabled:Y(),className:`mt-8 flex w-full items-center justify-center gap-2 rounded-[22px] py-4 text-base font-semibold text-white shadow-lg transition-all ${Y()?\"cursor-not-allowed bg-[#3A3A3C] opacity-50\":\"bg-gradient-to-r from-[#0A84FF] to-[#0047AB] shadow-sky-500/20 active:scale-95\"}`,whileTap:{scale:.98},children:[ie(),!Y()&&n.jsx(P0,{className:\"h-4 w-4\"})]})]}),n.jsx(Bn,{children:F&&n.jsx(Le.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"fixed inset-0 z-[60] flex items-end justify-center bg-black/60 p-6 backdrop-blur-sm\",children:n.jsxs(Le.div,{initial:{y:100},animate:{y:0},exit:{y:100},className:\"w-full max-w-sm rounded-[32px] bg-[#1C1C1E] p-8 text-center ring-1 ring-white/10 shadow-2xl\",children:[n.jsx(\"div\",{className:\"mx-auto mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-sky-500/20 text-sky-400\",children:n.jsx(Cu,{className:\"h-8 w-8\"})}),n.jsx(\"h3\",{className:\"text-xl font-bold text-white\",children:\"Speed up your next login?\"}),n.jsx(\"p\",{className:\"mt-2 text-sm text-white/50\",children:\"We can securely remember your ID so you can skip the mobile entry next time.\"}),n.jsxs(\"div\",{className:\"mt-8 flex flex-col gap-3\",children:[n.jsx(\"button\",{onClick:()=>{localStorage.setItem(\"finhub_remembered_mobile\",w),oe(!1)},className:\"w-full rounded-2xl bg-sky-500 py-4 font-semibold text-white active:scale-95 transition-all\",children:\"Enable Smart Login\"}),n.jsx(\"button\",{onClick:()=>oe(!1),className:\"w-full py-2 text-sm font-medium text-white/30 active:text-white/50\",children:\"Maybe later\"})]})]})})}),n.jsx(Bn,{children:ge&&n.jsx(Le.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"fixed inset-0 z-[70] flex flex-col items-center justify-center bg-black/40 backdrop-blur-md\",children:n.jsxs(Le.div,{initial:{scale:.8},animate:{scale:1},className:\"flex flex-col items-center\",children:[n.jsxs(\"div\",{className:\"relative mb-6\",children:[n.jsx(Le.div,{animate:{scale:[1,1.2,1],opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0},className:\"absolute inset-0 rounded-full bg-sky-500/30 blur-2xl\"}),n.jsx(\"div\",{className:\"relative flex h-24 w-24 items-center justify-center rounded-full bg-white/5 ring-1 ring-white/20\",children:n.jsx(Hn,{className:\"h-12 w-12 text-sky-400\"})})]}),n.jsx(\"h3\",{className:\"text-lg font-medium text-white\",children:\"Scanning Biometrics\"}),n.jsx(\"p\",{className:\"mt-2 text-sm text-white/40 italic\",children:\"Verifying your node identity...\"}),n.jsx(\"button\",{onClick:()=>O(!1),className:\"mt-12 text-xs font-medium uppercase tracking-widest text-white/20 hover:text-white/40\",children:\"Cancel & use PIN\"})]})})}),n.jsx(\"div\",{className:\"absolute bottom-8 text-center text-[10px] text-white/20\",children:n.jsx(\"p\",{children:\"Protected by FinHub Security. Data is localized and encrypted.\"})})]})},B0=({message:i=\"Secure Node Handshake\",subMessage:l=\"Re-encrypting local session...\"})=>n.jsxs(\"div\",{className:\"fixed inset-0 z-[100] flex flex-col items-center justify-center bg-[#000000] overflow-hidden\",children:[n.jsx(Le.div,{animate:{opacity:[.1,.2,.1],scale:[1,1.1,1]},transition:{duration:4,repeat:1/0,ease:\"easeInOut\"},className:\"absolute h-[500px] w-[500px] rounded-full bg-sky-500/10 blur-[120px]\"}),n.jsxs(\"div\",{className:\"relative flex flex-col items-center justify-center gap-12\",children:[n.jsxs(\"div\",{className:\"relative flex items-center justify-center\",children:[[0,1,2].map(o=>n.jsx(Le.div,{className:\"absolute rounded-full border border-sky-400/20\",initial:{width:80,height:80,opacity:0},animate:{width:[80,250],height:[80,250],opacity:[.4,0]},transition:{duration:3,repeat:1/0,delay:o*1,ease:\"easeOut\"}},o)),n.jsx(Le.div,{animate:{y:[0,-10,0]},transition:{duration:4,repeat:1/0,ease:\"easeInOut\"},className:\"relative z-10\",children:n.jsx(Le.div,{animate:{scale:[1,1.1,1],filter:[\"drop-shadow(0 0 15px rgba(56,189,248,0.3))\",\"drop-shadow(0 0 30px rgba(56,189,248,0.6))\",\"drop-shadow(0 0 15px rgba(56,189,248,0.3))\"]},transition:{duration:3,repeat:1/0,ease:\"easeInOut\"},className:\"relative flex h-32 w-32 items-center justify-center rounded-[32px] bg-gradient-to-br from-[#1C1C1E] to-[#000000] ring-1 ring-white/10 shadow-2xl backdrop-blur-xl\",children:n.jsx(\"img\",{src:\"/images/logo-icon.png\",alt:\"FinHub\",className:\"h-20 w-20 object-contain drop-shadow-lg\"})})})]}),n.jsx(Le.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:\"flex flex-col items-center gap-2\",children:n.jsxs(\"div\",{className:\"flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/5 ring-1 ring-white/5 backdrop-blur-md\",children:[n.jsx(sl,{className:\"h-3 w-3 text-sky-400\"}),n.jsx(\"span\",{className:\"text-[10px] font-bold tracking-[0.2em] uppercase text-white/40\",children:i})]})})]}),n.jsxs(\"div\",{className:\"absolute bottom-16 w-full max-w-[200px] px-6\",children:[n.jsx(\"div\",{className:\"h-[2px] w-full overflow-hidden rounded-full bg-white/10\",children:n.jsx(Le.div,{initial:{x:\"-100%\"},animate:{x:\"100%\"},transition:{duration:1.5,repeat:1/0,ease:\"easeInOut\"},className:\"h-full w-1/3 bg-gradient-to-r from-transparent via-sky-400 to-transparent\"})}),n.jsx(\"div\",{className:\"mt-3 text-center\",children:n.jsx(\"span\",{className:\"text-[10px] font-medium text-white/20 italic tracking-wider\",children:l})})]})]}),yN=({isOpen:i,onClose:l})=>n.jsx(Bn,{children:i&&n.jsxs(n.Fragment,{children:[n.jsx(Le.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:l,className:\"fixed inset-0 z-[200] bg-black/60 backdrop-blur-sm\"}),n.jsx(\"div\",{className:\"fixed inset-0 z-[201] flex items-center justify-center p-4 pointer-events-none\",children:n.jsxs(Le.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:\"spring\",damping:25,stiffness:300},className:\"w-full max-w-md bg-slate-900 border border-white/5 rounded-[32px] shadow-2xl overflow-hidden pointer-events-auto relative\",children:[n.jsx(\"div\",{className:\"absolute top-0 inset-x-0 h-32 bg-gradient-to-b from-indigo-500/10 to-transparent pointer-events-none\"}),n.jsx(\"button\",{onClick:l,className:\"absolute top-6 right-6 p-2 rounded-full bg-white/5 text-slate-400 hover:text-white hover:bg-white/10 transition-colors z-10\",\"aria-label\":\"Close about us popup\",children:n.jsx(il,{className:\"w-5 h-5\"})}),n.jsxs(\"div\",{className:\"p-8 pt-12 space-y-8 relative\",children:[n.jsxs(\"div\",{className:\"flex flex-col items-center text-center gap-3\",children:[n.jsx(\"div\",{className:\"w-16 h-16 rounded-[22px] bg-indigo-600 flex items-center justify-center shadow-lg shadow-indigo-500/20\",children:n.jsx(Dy,{className:\"w-8 h-8 text-white\"})}),n.jsxs(\"div\",{children:[n.jsx(\"h2\",{className:\"text-2xl font-black text-white tracking-tight uppercase\",children:\"FinHub Core\"}),n.jsx(\"p\",{className:\"text-[10px] font-bold text-indigo-400 uppercase tracking-[0.3em]\",children:\"Quantum Fabric v50.3\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"section\",{className:\"space-y-2\",children:[n.jsxs(\"h3\",{className:\"text-[10px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2\",children:[n.jsx(Hn,{className:\"w-3.5 h-3.5\"}),\"Our Vision\"]}),n.jsx(\"p\",{className:\"text-sm text-slate-300 leading-relaxed font-medium\",children:\"FinHub is designed to be the central nervous system of your personal economy. We merge neural-inspired data models with high-precision tracking to navigate complex wealth landscapes.\"})]}),n.jsxs(\"section\",{className:\"space-y-2\",children:[n.jsxs(\"h3\",{className:\"text-[10px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2\",children:[n.jsx(sl,{className:\"w-3.5 h-3.5\"}),\"Core Features\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[n.jsxs(\"div\",{className:\"bg-white/5 p-3 rounded-2xl border border-white/5\",children:[n.jsx(\"span\",{className:\"block text-[8px] font-black text-indigo-400 uppercase mb-1\",children:\"Localization\"}),n.jsx(\"span\",{className:\"text-[10px] text-slate-400 leading-tight\",children:\"Sovereign identity via node storage.\"})]}),n.jsxs(\"div\",{className:\"bg-white/5 p-3 rounded-2xl border border-white/5\",children:[n.jsx(\"span\",{className:\"block text-[8px] font-black text-indigo-400 uppercase mb-1\",children:\"Clamping Logic\"}),n.jsx(\"span\",{className:\"text-[10px] text-slate-400 leading-tight\",children:\"Mathematical stability in all simulations.\"})]})]})]}),n.jsxs(\"div\",{className:\"pt-6 border-t border-white/5 flex flex-col items-center gap-2\",children:[n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-600 uppercase tracking-widest\",children:\"Architect: Sijo Joseph\"}),n.jsx(\"p\",{className:\"text-[10px] font-black text-slate-800 uppercase tracking-[0.2em]\",children:\"© 2025 Neural FinHub Fabric\"})]})]})]})]})})]})}),vN=i=>{const{accounts:l,recurringTransactions:o,goals:u}=i,d=new Date,h=new Date;h.setDate(d.getDate()+7);const g=l.filter(B=>B.type!==\"credit_card\"),N=g.reduce((B,J)=>B+(J.balance||0),0),E=o.filter(B=>{const J=new Date(B.startDate);return B.type===\"expense\"&&J<=h&&J>=d}).reduce((B,J)=>B+J.amount,0),S=u.reduce((B,J)=>B+(J.currentAmount||0),0),p=N-E-S,f=l.filter(B=>B.type===\"credit_card\"),w=f.reduce((B,J)=>{const ne=J.creditLimit||0,F=J.balance||0,oe=Math.max(0,ne-F),ge=J.safeLimitPercentage||30,O=ne*ge/100;return B+Math.min(oe,O)},0),A=p+w;let T=-1/0,C=null,M=null;g.forEach(B=>{const J=o.filter(oe=>oe.accountId===B.id&&oe.type===\"expense\").reduce((oe,ge)=>{const O=new Date(ge.startDate);return O<=h&&O>=d?oe+ge.amount:oe},0),ne=B.min_buffer||0,F=B.balance-J-ne;F>T&&(T=F,C=B.id,M=B.name)});let y=\"SAFE\";const L=g.some(B=>{const J=o.filter(ne=>ne.accountId===B.id&&ne.type===\"expense\").reduce((ne,F)=>{const oe=new Date(F.startDate);return oe<=h&&oe>=d?ne+F.amount:ne},0);return B.balance<J});p<0||L?y=\"CRITICAL\":(p<N*.1||p<2e3)&&(y=\"TIGHT\");let z=null;const j=f.find(B=>B.balance/(B.creditLimit||1)>.7),G=g.find(B=>{const J=o.filter(ne=>ne.accountId===B.id&&ne.type===\"expense\").reduce((ne,F)=>{const oe=new Date(F.startDate);return oe<=h&&oe>=d?ne+F.amount:ne},0);return B.balance<J});G?z=`Payment risk: ${G.name} insufficient for upcoming dues.`:y===\"TIGHT\"?z=\"Low Safe-to-Spend: Consider postponing large purchases.\":j&&(z=`High credit utilization on ${j.name} (>70%).`);const ee=o.filter(B=>B.type===\"expense\").map(B=>{const J=new Date(B.startDate),ne=Math.ceil((J.getTime()-d.getTime())/(1e3*60*60*24));return{...B,daysRemaining:ne}}).filter(B=>B.daysRemaining>=0).sort((B,J)=>B.daysRemaining-J.daysRemaining),Z=ee.length>0?{title:ee[0].description||\"Upcoming Payment\",amount:ee[0].amount,daysRemaining:ee[0].daysRemaining}:null;let _=null;if(y===\"CRITICAL\"&&G&&C&&C!==G.id){const B=o.filter(J=>J.accountId===G.id&&J.type===\"expense\").reduce((J,ne)=>{const F=new Date(ne.startDate);return F<=h&&F>=d?J+ne.amount:J},0);_={fromAccountId:C,toAccountId:G.id,amount:B-G.balance}}return{liquidBalance:N,upcomingDues:E,reservedAmount:S,liquidSafeSpend:p,creditSafeSpend:w,safeToSpendGlobal:A,suggestedSpendAccountId:C,suggestedSpendAccountName:M,suggestedReason:\"Highest free buffer after upcoming payments\",status:y,topAlert:z,quickFix:_,nextDue:Z}},wN=i=>({accounts:i.accounts||[],recurringTransactions:i.recurringTransactions||[],goals:i.goals||[],liabilities:i.liabilities||[],settings:i.settings||{}}),Zi={calculateStressFactor(i,l){if(l===0)return .6;const o=i/l;return o<=.3?1:o<=.5?.9:o<=.7?.75:.6},calculateHabitShare(i,l){if(l===0)return .02;const o=i/l;return Math.min(Math.max(o,.02),.4)},calculateSSR(i,l,o,u){const d=l-o-u,h=new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate(),g=h-new Date().getDate()+1,N=d*(g/h);return N<=0?.6:Math.min(Math.max(i/N,.6),1)},calculateBaseLimit(i,l,o){return i*l*o},calculateProjection(i,l,o){return l===0?i:i/l*o},isDiscretionary(i){const l=[\"entertainment\",\"dining\",\"out\",\"shopping\",\"leisure\",\"hobby\",\"gift\",\"travel\",\"dress\",\"luxury\",\"movie\"],o=i.toLowerCase();return l.some(u=>o.includes(u))},calculateGap(i,l){return i-l}};function jN({className:i,value:l,indicatorClassName:o,...u}){return n.jsx(My,{\"data-slot\":\"progress\",className:De(\"bg-primary/20 relative h-2 w-full overflow-hidden rounded-full\",i),...u,children:n.jsx(_y,{\"data-slot\":\"progress-indicator\",className:De(\"bg-primary h-full w-full flex-1 transition-all\",o),style:{transform:`translateX(-${100-(l||0)}%)`}})})}const NN=()=>{const{expenses:i,incomes:l,liabilities:o,goals:u,accounts:d,emergencyFundAmount:h,currency:g}=ai(),{availableToSpend:N}=Gp({accounts:d,goals:u,liabilities:o,expenses:i,emergencyFundAmount:h}),E=x.useMemo(()=>{const f=new Date,w=f.getMonth(),A=f.getFullYear(),C=(ne=>new Date(A,w-ne,1))(2),y=l.filter(ne=>new Date(ne.date)>=C).reduce((ne,F)=>ne+F.amount,0)/3,L=o.reduce((ne,F)=>ne+(F.emiAmount||0),0),z=u.filter(ne=>ne.type===\"stability\"||ne.type===\"protection\"||ne.name.toLowerCase().includes(\"emergency\")).reduce((ne,F)=>ne+(F.monthly_contribution||0),0),j=z>0?z:.1*y,G=y-L-j,ee=Zi.calculateStressFactor(L,y),Z=Zi.calculateSSR(N,y,L,j),_=i.filter(ne=>new Date(ne.date)>=C),B=_.reduce((ne,F)=>ne+F.amount,0)/3,J={};return Tu.forEach(ne=>{const oe=_.filter(U=>U.category===ne.value).reduce((U,Q)=>U+Q.amount,0)/3,ge=Zi.calculateHabitShare(oe,B),O=Zi.calculateBaseLimit(G,ge,ee),k=Zi.isDiscretionary(ne.value);J[ne.value]=k?O*Math.min(Math.max(Z,.6),1):O}),{limits:J}},[i,l,o,u,N]),{limits:S}=E,p=f=>new Intl.NumberFormat(\"en-IN\",{style:\"currency\",currency:g||\"INR\",maximumFractionDigits:0}).format(f);return n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"header\",{className:\"px-1\",children:[n.jsx(\"h2\",{className:\"text-2xl font-black text-white tracking-tight\",children:\"Financial Guardrails\"}),n.jsx(\"p\",{className:\"text-slate-500 text-[10px] font-bold uppercase tracking-[0.2em] mt-1\",children:\"Hybrid Budget Engine v1.1\"})]}),n.jsx(\"div\",{className:\"grid gap-4\",children:Tu.map(f=>{const w=S[f.value]||0,A=i.filter(C=>{const M=new Date(C.date);return C.category===f.value&&M.getMonth()===new Date().getMonth()&&M.getFullYear()===new Date().getFullYear()}).reduce((C,M)=>C+M.amount,0),T=w>0?A/w*100:0;return n.jsxs(\"div\",{className:\"rounded-3xl border border-white/5 bg-white/5 p-5 transition-all hover:bg-white/10\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-start mb-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-xl\",role:\"img\",\"aria-label\":f.value,children:f.emoji}),n.jsxs(\"div\",{children:[n.jsx(\"h3\",{className:\"text-sm font-bold text-white\",children:f.value}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 uppercase tracking-widest mt-0.5\",children:\"Category Limit\"})]})]}),n.jsxs(\"div\",{className:\"text-right\",children:[n.jsx(\"p\",{className:\"text-sm font-black text-white\",children:p(w)}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 uppercase tracking-widest mt-0.5\",children:\"Monthly\"})]})]}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[10px] font-bold uppercase tracking-tighter\",children:[n.jsxs(\"span\",{className:\"text-slate-400\",children:[\"Spent: \",p(A)]}),n.jsxs(\"span\",{className:De(T>90?\"text-red-400\":\"text-emerald-400\"),children:[Math.round(T),\"%\"]})]}),n.jsx(jN,{value:T,className:\"h-1.5\",indicatorClassName:De(T>100?\"bg-red-500 shadow-[0_0_8px_rgba(239,68,68,0.5)]\":T>80?\"bg-orange-500 shadow-[0_0_8px_rgba(249,115,22,0.5)]\":\"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]\")})]})]},f.value)})})]})},SN=x.lazy(()=>Fa(()=>import(\"./Dashboard-IVoRIJ8c.js\"),__vite__mapDeps([8,1,2,9,10,4,3])).then(i=>({default:i.Dashboard}))),CN=x.lazy(()=>Fa(()=>import(\"./TransactionList-rKWzJlT2.js\"),__vite__mapDeps([11,1,2,10,3,4])).then(i=>({default:i.TransactionList}))),EN=x.lazy(()=>Fa(()=>import(\"./GoalsTracker-D6OcmKwC.js\"),__vite__mapDeps([12,1,2,3,4])).then(i=>({default:i.GoalsTracker}))),AN=x.lazy(()=>Fa(()=>import(\"./EmergencyFundsTab-gXH3z62T.js\"),__vite__mapDeps([13,1,2,3,4])).then(i=>({default:i.EmergencyFundsTab}))),kN=x.lazy(()=>Fa(()=>import(\"./InvestmentsTab-B4180PLB.js\"),__vite__mapDeps([14,1,2,9,10,4,3])).then(i=>({default:i.InvestmentsTab})));function TN(){const{settings:i,expenses:l,incomes:o,debts:u,goals:d,accounts:h,liabilities:g,notifications:N,emergencyFundAmount:E,investments:S,isLoading:p,refreshData:f,updateSettings:w,userId:A,createExpense:T,updateExpense:C,deleteExpense:M,createIncome:y,updateIncome:L,deleteIncome:z,createDebt:j,updateDebt:G,deleteDebt:ee,settleDebt:Z,createGoal:_,updateGoal:B,deleteGoal:J,createAccount:ne,updateAccount:F,deleteAccount:oe,setEmergencyFundAmount:ge,setNotifications:O,isFundAllocationOpen:k,fundAllocationType:U,closeFundAllocation:Q,performFundAllocation:ae,transferFunds:v,authStatus:D,isOffline:W,authMessage:q,backfillRequest:Y,setBackfillRequest:V,executeBackfill:te,createRecurring:me,recurringTransactions:ie}=ai(),[le,je]=x.useState(\"dashboard\"),[Ae,pe]=x.useState(!1),[ve,xe]=x.useState(\"expense\"),[Ke,We]=x.useState(null),[Ue,it]=x.useState(!1),[Ve,ke]=x.useState(!1),[Ft,fe]=x.useState(!1),[Se,ze]=x.useState(null),[lt,mt]=x.useState(!1),[_a,ga]=x.useState(!1),[Ra,Kt]=x.useState(!1),[Oa,ea]=x.useState(!1),[zt]=x.useState(null);hN(()=>ke(!0),()=>fe(!0)),x.useEffect(()=>{if(Gn.isNativePlatform()){(async()=>{try{(await Cr.checkPermissions()).display!==\"granted\"&&await Cr.requestPermissions()}catch(Ee){console.error(\"Error checking notification permissions:\",Ee)}})();const Fe=Cr.addListener(\"localNotificationActionPerformed\",Ee=>{const{notification:rt}=Ee,Ct=rt.extra;console.log(\"Native notification clicked:\",rt),Ct&&(Ct.achievementId?(ze(Ct.achievementId),mt(!0)):Ct.view&&je(Ct.view))});return()=>{Fe.then(Ee=>Ee.remove())}}},[]),x.useEffect(()=>{i.theme===\"dark\"?document.documentElement.classList.add(\"dark\"):document.documentElement.classList.remove(\"dark\")},[i.theme]);const{openFundAllocation:Ht}=ai();x.useEffect(()=>{window.showFundAllocation=Ht},[Ht]);const{currentMonthExpenses:ta}=x.useMemo(()=>{const de=new Date,Fe=de.getMonth(),Ee=de.getFullYear();return{currentMonthExpenses:l.filter(et=>!et.isInternalTransfer).filter(et=>{const bt=new Date(et.date);return bt.getMonth()===Fe&&bt.getFullYear()===Ee})}},[l]),xt=x.useMemo(()=>{const de=o.reduce((Zt,ht)=>Zt+ht.amount,0),Fe=l.reduce((Zt,ht)=>Zt+ht.amount,0),Ee=u.reduce((Zt,ht)=>Zt+ht.amount,0);if(de===0&&Ee===0)return{score:50,savingsRate:0,debtRatio:0,spendingRatio:0};const rt=[...o,...l,...u];let Ct=1;if(rt.length>0){const Zt=rt.map(Ur=>new Date(Ur.date).getTime()),ht=new Date(Math.min(...Zt)),pn=Math.abs(new Date().getTime()-ht.getTime()),si=Math.ceil(pn/(1e3*60*60*24*30));Ct=Math.max(1,si)}const bt=de/Ct*12,Tt=de>0?(de-Fe)/de:0,yt=de>0?Fe/de:0,Jt=bt>0?Ee/bt:Ee>0?1/0:0;let jt=50;return Tt>=.4?jt+=30:Tt>=.2?jt+=20:Tt>=.1?jt+=10:Tt>0?jt+=5:jt-=20,Jt===0?jt+=20:Jt<=.3?jt+=10:Jt<=.6?jt-=10:Jt<=1?jt-=30:jt-=50,yt<=.5?jt+=20:yt<=.7?jt+=10:yt<=.9?jt+=0:jt-=10,{score:Math.max(0,Math.min(100,Math.round(jt))),savingsRate:Tt,debtRatio:Jt,spendingRatio:yt}},[o,l,u]),ni=x.useMemo(()=>({totalIncome:o.reduce((de,Fe)=>de+Fe.amount,0),totalExpenses:l.reduce((de,Fe)=>de+Fe.amount,0),activeDebts:u.filter(de=>de.status===\"pending\").length,goalsCount:d.length,recentTransactions:[...l.slice(0,5).map(de=>({type:\"expense\",...de})),...o.slice(0,5).map(de=>({type:\"income\",...de}))],expenses:l,incomes:o,accounts:h,investments:S,liabilities:g,goals:d,debts:u,currentMonthExpenses:ta,savingsRate:xt.savingsRate,healthScore:xt.score,brainSummary:Ij({investments:S,accounts:h,healthScore:xt.score,savingsRate:xt.savingsRate,totalIncome:o.reduce((de,Fe)=>de+Fe.amount,0),totalExpenses:l.reduce((de,Fe)=>de+Fe.amount,0),activeDebts:u.filter(de=>de.status===\"pending\").length,goalsCount:d.length},i.currency,le)}),[o,l,u,d,xt.savingsRate,xt.score,h,S,g,ta,i.currency,le]),Fn=x.useMemo(()=>{const de=wN({accounts:h,recurringTransactions:ie,goals:d,liabilities:g,settings:i});return vN(de)},[h,ie,d,g,i]);if(p)return n.jsx(B0,{});Gn.isNativePlatform()&&Ov.hide().catch(de=>console.error(\"Splash hide error:\",de));const xa=async()=>{await f()},mn=de=>{xe(de),We(null),pe(!0)},hn=de=>{xe(\"expense\"),We(de),pe(!0)},Ya=de=>{xe(\"income\"),We(de),pe(!0)},ba=de=>{xe(\"debt\"),We(de),pe(!0)},Me=de=>{Ke?ve===\"expense\"?C(Ke.id,de):ve===\"income\"?L(Ke.id,de):ve===\"debt\"&&G(Ke.id,de):ve===\"expense\"?(T(de),de.roundUpAmount&&dt(d.length>0?d[0].id:\"general\",\"goal\",void 0,de.roundUpAmount,de.accountId)):ve===\"income\"?y(de):ve===\"debt\"&&j(de)},dt=async(de,Fe,Ee,rt,Ct)=>{if(!rt&&!zt)return;const et=rt||(zt?zt.roundedAmount-zt.expenseAmount:0),bt=Ct||(zt?zt.accountId:\"\"),Tt=h.find(yt=>yt.id===bt);if(Tt&&await F(Tt.id,{balance:Tt.balance-et}),Fe===\"goal\"){const yt=d.find(Jt=>Jt.id===de);if(yt)await B(de,{currentAmount:yt.currentAmount+et}),ce.success(`Saved ${dn[i.currency]}${et} to ${yt.name}!`);else{const Jt=d.find(jt=>jt.name===\"General Savings\");if(Jt)await B(Jt.id,{currentAmount:Jt.currentAmount+et}),ce.success(`Saved ${dn[i.currency]}${et} to General Savings!`);else{const jt={name:\"General Savings\",targetAmount:1e4,currentAmount:et,targetDate:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString(),emoji:\"🐷\"};_(jt),ce.success(`Created \"General Savings\" and saved ${dn[i.currency]}${et}!`)}}}else ge(yt=>yt+et),ce.success(`Saved ${dn[i.currency]}${et} to Emergency Fund!`);ea(!1),Or({particleCount:50,spread:60,origin:{y:.7}})},kt=de=>{const Fe={today:1,week:7,month:30},Ee=new Date;Ee.setDate(Ee.getDate()+Fe[de]),localStorage.setItem(\"roundUpMutedUntil\",Ee.toISOString()),ea(!1),ce.info(`Round ups muted for ${de===\"today\"?\"today\":de===\"week\"?\"a week\":\"a month\"}`)};return n.jsxs(n.Fragment,{children:[n.jsx(Bn,{mode:\"wait\",children:(D===\"guest\"||D===\"authenticating\")&&n.jsx(Le.div,{className:\"fixed inset-0 z-0\",exit:{opacity:0,scale:.95,filter:\"blur(20px)\"},transition:{duration:.8},children:n.jsx(bN,{})},\"login-container\")}),n.jsx(Bn,{children:D===\"authenticating\"&&n.jsx(Le.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4},className:\"fixed inset-0 z-50\",children:n.jsx(B0,{message:q?.message,subMessage:q?.subMessage})},\"loading-sprite\")}),n.jsx(Bn,{mode:\"wait\",children:D===\"authenticated\"&&n.jsx(Le.div,{className:\"relative z-10\",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.8,ease:[.16,1,.3,1]},children:n.jsxs(\"div\",{className:\"min-h-screen bg-transparent text-foreground transition-colors font-sans\",children:[n.jsx(dj,{activeTab:le,onTabChange:de=>je(de),notificationCount:N.filter(de=>!de.read).length,onNotificationClick:()=>fe(!Ft),onSettingsClick:()=>ke(!Ve),forceHide:lt,renderFab:de=>n.jsx(pN,{isVisible:de&&!Ve&&!Ft&&!lt,onOpenAI:()=>it(!0),onAddTransaction:mn,onMigrate:()=>ga(!0)}),children:n.jsx(fN,{onRefresh:xa,children:n.jsx(xN,{children:n.jsxs(x.Suspense,{fallback:n.jsxs(\"div\",{className:\"space-y-6 pt-12\",children:[n.jsx(mN,{}),n.jsx(\"p\",{className:\"text-center text-slate-500 text-sm\",children:\"Loading Component...\"})]}),children:[le===\"dashboard\"&&n.jsx(\"div\",{className:\"space-y-6\",children:n.jsx(SN,{expenses:l,incomes:o,currency:i.currency,goals:d,liabilities:g,debts:u,investments:S,accounts:h,emergencyFundAmount:E,healthScore:xt.score,userName:i.name,isOffline:W,isSampleMode:i.isSampleMode,onNavigate:de=>je(de),onAddTransaction:de=>{xe(de),pe(!0)}})}),le===\"budgets\"&&n.jsx(\"div\",{className:\"px-4 py-6\",children:n.jsx(NN,{})}),le===\"transactions\"&&n.jsx(CN,{expenses:l,incomes:o,debts:u,accounts:h,currency:i.currency,onEditExpense:hn,onDeleteExpense:M,onEditIncome:Ya,onDeleteIncome:z,onEditDebt:ba,onDeleteDebt:ee,onSettleDebt:Z}),le===\"goals\"&&n.jsx(EN,{goals:d,currency:i.currency,accounts:h,expenses:l,incomes:o,onCreateGoal:_,onUpdateGoal:B,onDeleteGoal:J,onDeductFromAccount:async(de,Fe)=>{const Ee=h.find(rt=>rt.id===de);Ee&&await F(de,{balance:Ee.balance-Fe})}}),le===\"accounts\"&&n.jsx(uN,{accounts:h,currency:i.currency,onCreateAccount:ne,onUpdateAccount:F,onDeleteAccount:oe}),le===\"investments\"&&n.jsx(kN,{}),le===\"emergency\"&&n.jsx(AN,{currency:i.currency,userId:A,expenses:l,incomes:o,accounts:h,onEmergencyFundUpdate:de=>ge(de)}),le===\"recurring\"&&n.jsx(oj,{}),le===\"more\"&&n.jsx(nN,{onNavigate:de=>je(de),onOpenSettings:()=>ke(!0),onOpenNotifications:()=>fe(!0),emergencyFundAmount:E,bankAccountsCount:h.filter(de=>de.type===\"bank\").length,cardsCount:h.filter(de=>de.type===\"credit_card\").length,currency:i.currency,onOpenAbout:()=>Kt(!0)})]})})})}),Ae&&n.jsx(gj,{isOpen:Ae,onClose:()=>{pe(!1),We(null)},type:ve,onSubmit:Me,initialData:Ke,accounts:h,liabilities:g,currency:i.currency,roundUpEnabled:i.roundUpEnabled,defaultAccountId:Fn.suggestedSpendAccountId||void 0}),zt&&n.jsx(xj,{isOpen:Oa,onClose:()=>ea(!1),onConfirm:dt,expenseAmount:zt.expenseAmount,roundedAmount:zt.roundedAmount,currency:i.currency,goals:d,onMute:kt}),n.jsx(gN,{isOpen:Ue,onClose:()=>it(!1),context:ni,settings:i,isOffline:W}),n.jsx(aN,{isOpen:Ve,onClose:()=>ke(!1),settings:i,onUpdateSettings:w,onAchievementClick:de=>{ze(de),mt(!0),ke(!1)},onOpenAbout:()=>Kt(!0)}),n.jsx(lN,{isOpen:Ft,onClose:()=>fe(!1),notifications:N,onNotificationClick:async de=>{if(de.achievementId&&(ze(de.achievementId),mt(!0)),de.action&&de.action.type===\"verify_subscription\"&&de.action.status===\"completed\"){const{description:Fe,amount:Ee,category:rt,accountId:Ct,date:et}=de.action.payload;try{await me({type:\"expense\",description:Fe,amount:Ee,category:rt,accountId:Ct,frequency:\"monthly\",startDate:et||new Date().toISOString().split(\"T\")[0],tags:[\"auto-verified\",\"subscription\"]}),ce.success(`Verified: ${Fe} is now a recurring subscription.`),O(bt=>bt.map(Tt=>Tt.id===de.id?{...Tt,read:!0}:Tt))}catch{ce.error(\"Failed to automate subscription.\")}}else de.action&&de.action.status===\"dismissed\"&&(ce.info(\"Marked as one-time purchase.\"),O(Fe=>Fe.map(Ee=>Ee.id===de.id?{...Ee,read:!0}:Ee)));de.action||(de.category===\"reminders\"?je(\"recurring\"):de.category===\"transactions\"&&je(\"transactions\"),fe(!1))},onMarkAsRead:de=>{O(Fe=>Fe.map(Ee=>Ee.id===de?{...Ee,read:!0}:Ee))},onClearRead:()=>{O(de=>de.filter(Fe=>!Fe.read)),ce.success(\"Read notifications cleared\")}}),n.jsx(rN,{isOpen:lt,onClose:()=>{mt(!1),ze(null)},achievementId:Se}),n.jsx(oN,{isOpen:k,onClose:Q,accounts:h,goals:d,currency:i.currency,destinationType:U,emergencyFund:{currentAmount:E,targetAmount:1e5},onAllocate:ae,liabilities:g,expenses:l}),n.jsx(dN,{isOpen:_a,onClose:()=>ga(!1),accounts:h,currency:i.currency,onTransfer:v}),n.jsx(yN,{isOpen:Ra,onClose:()=>Kt(!1)})]})},\"main-app\")}),Y&&n.jsx(Rp,{open:!0,onOpenChange:()=>V(null),children:n.jsxs(Op,{className:\"bg-slate-900/95 border-white/10 text-slate-100 z-[99999999] backdrop-blur-xl\",children:[n.jsxs(zp,{children:[n.jsx(Up,{className:\"text-white text-xl font-bold font-sans\",children:\"Backfill Configuration Required\"}),n.jsxs(Ip,{className:\"text-slate-400 text-base\",children:[\"System detected \",n.jsxs(\"span\",{className:\"text-emerald-400 font-bold\",children:[Y.count,\" missing entries\"]}),\" in the transaction history\",Y.dates?.length>0&&n.jsxs(n.Fragment,{children:[\" \",\"from \",n.jsx(\"span\",{className:\"text-white font-medium\",children:Y.dates[0]?.toLocaleDateString(\"en-IN\",{day:\"numeric\",month:\"short\",year:\"numeric\"})}),\" \",\"to \",n.jsx(\"span\",{className:\"text-white font-medium\",children:Y.dates[Y.dates.length-1]?.toLocaleDateString(\"en-IN\",{day:\"numeric\",month:\"short\",year:\"numeric\"})})]}),\".\",n.jsx(\"br\",{}),n.jsx(\"br\",{}),\"Would you like to auto-populate the ledger for this period?\"]})]}),n.jsxs(Lp,{className:\"mt-4\",children:[n.jsx(qp,{onClick:()=>V(null),className:\"bg-white/5 border-white/5 text-slate-400 hover:text-white hover:bg-white/10 rounded-xl h-12 uppercase tracking-wider text-xs font-bold\",children:\"Cancel\"}),n.jsx(Bp,{onClick:()=>{te(),V(null)},className:\"bg-indigo-600 hover:bg-indigo-500 text-white border-0 font-bold rounded-xl h-12 px-8 shadow-lg shadow-indigo-600/20\",children:\"Generate Ledger\"})]})]})}),n.jsx(d1,{position:\"bottom-center\",richColors:!0,theme:\"dark\",toastOptions:{style:{background:\"#1C1C1E\",border:\"1px solid rgba(255, 255, 255, 0.1)\",color:\"#FFFFFF\",borderRadius:\"20px\",backdropFilter:\"none\",zIndex:9999999}},className:\"!z-[9999999]\"})]})}function DN({children:i,...l}){return n.jsx(jj,{...l,children:i})}function MN(i={}){const{immediate:l=!1,onNeedRefresh:o,onOfflineReady:u,onRegistered:d,onRegisteredSW:h,onRegisterError:g}=i;let N,E;const S=async(f=!0)=>{await E};async function p(){if(\"serviceWorker\"in navigator){if(N=await Fa(async()=>{const{Workbox:f}=await import(\"./workbox-window.prod.es5-BIl4cyR9.js\");return{Workbox:f}},[]).then(({Workbox:f})=>new f(\"/sw.js\",{scope:\"/\",type:\"classic\"})).catch(f=>{g?.(f)}),!N)return;N.addEventListener(\"activated\",f=>{(f.isUpdate||f.isExternal)&&window.location.reload()}),N.addEventListener(\"installed\",f=>{f.isUpdate||u?.()}),N.register({immediate:l}).then(f=>{h?h(\"/sw.js\",f):d?.(f)}).catch(f=>{g?.(f)})}}return E=p(),S}MN({immediate:!0});wv.createRoot(document.getElementById(\"root\")).render(n.jsx(H1,{children:n.jsx(DN,{attribute:\"class\",defaultTheme:\"dark\",forcedTheme:\"dark\",children:n.jsx(TN,{})})}));export{Bn as A,Re as B,Ki as C,us as D,Tu as E,C0 as F,LN as G,z0 as H,wt as I,L0 as J,ye as L,Qu as M,Ha as N,Ut as S,Ru as T,Uu as W,at as a,u0 as b,Zi as c,hu as d,pu as e,Ne as f,gu as g,Fu as h,mj as i,fp as j,Ot as k,De as l,Le as m,Iu as n,ds as o,fs as p,ms as q,hs as r,Bt as s,ce as t,Gp as u,It as v,qt as w,qe as x,vu as y,ai as z};"
      },
      {
        "file": "android\\app\\src\\main\\assets\\public\\assets\\index-i0Euu4OB.js",
        "line": 59,
        "snippet": "`.trim();return await Hp(h,g,S,u)},eN=async(i,l)=>await Hp(i,l,\"Respond with only the word 'OK' to verify connectivity.\",\"ASSISTANT\"),tN=i=>{if(i.aiProvider&&al(i.aiProvider,i))return i.aiProvider;const l=[\"openai\",\"anthropic\",\"gemini\",\"deepseek\",\"perplexity\"];for(const o of l)if(al(o,i))return o;return null},_0={BASE_URL:\"/\",DEV:!1,MODE:\"production\",PROD:!0,SSR:!1},aN=({isOpen:i,onClose:l,settings:o,onUpdateSettings:u,onAchievementClick:d,onOpenAbout:h})=>{const[g,N]=x.useState(o.name||\"\"),[E,S]=x.useState(o.photoURL||\"\"),[p,f]=x.useState(!1),[w,A]=x.useState(null),[T,C]=x.useState({}),[M,y]=x.useState(!1),{logout:L,scheduleAccountDeletion:z,migrateSubscriptions:j,cleanupDuplicates:G,clearAllData:ee}=ai(),[Z,_]=x.useState(!1),B=async()=>{y(!0);try{await j()}catch(fe){console.error(\"Migration failed:\",fe),ce.error(\"Migration failed\")}finally{y(!1)}},[J,ne]=x.useState(\"USD\"),[F,oe]=x.useState(\"100\"),[ge,O]=x.useState(\"100000\"),[k,U]=x.useState(\"10\"),[Q,ae]=x.useState(\"6\"),[v,D]=x.useState(!1),W=async()=>{const Se={USD:\"US\",INR:\"IN\",GBP:\"GB\",EUR:\"EMU\",AED:\"AE\",SAR:\"SA\"}[o.currency]||\"US\";D(!0);try{const lt=await(await fetch(`https://api.worldbank.org/v2/country/${Se}/indicator/FP.CPI.TOTL.ZG?format=json&per_page=1`)).json();if(lt&&lt[1]&&lt[1][0]&&lt[1][0].value){const mt=lt[1][0].value;ae(mt.toFixed(2)),ce.success(`Inflation rate synced for ${o.currency}`)}}catch(ze){console.error(\"Inflation sync failed:\",ze),ce.error(\"Failed to sync inflation rate.\")}finally{D(!1)}},q=Array.from({length:(parseInt(k)||0)+1},(fe,Se)=>{const ze=parseFloat(ge)||0,lt=parseFloat(Q)||0,mt=ze*Math.pow(1+lt/100,Se),_a=ze/Math.pow(1+lt/100,Se);return{year:Se,futureCost:Math.round(mt),purchasingPower:Math.round(_a)}}),Y=[\"INR\",\"USD\",\"EUR\",\"GBP\",\"AED\",\"SAR\"],V=o.currency;x.useEffect(()=>{N(o.name||\"\"),S(o.photoURL||\"\")},[o]),x.useEffect(()=>{i&&te()},[i,J]);const te=async()=>{try{const Se=await(await fetch(`https://api.exchangerate-api.com/v4/latest/${J}`)).json();C(Se.rates||{}),F&&me(F,Se.rates)}catch(fe){console.error(\"Error loading exchange rates:\",fe)}},me=(fe,Se)=>{const ze=parseFloat(fe);if(!isNaN(ze)&&ze>0){const mt=(Se||T)[V]||1;A(ze*mt)}else A(null)},ie=fe=>{oe(fe),me(fe)},{setTheme:le}=wj();x.useEffect(()=>{o.theme!==\"dark\"&&(le(\"dark\"),u({theme:\"dark\"}))},[]);const je=()=>{u({name:g,photoURL:E}),f(!1)},Ae=fe=>{const Se=fe.target.files?.[0];if(Se){const ze=new FileReader;ze.onloadend=()=>{S(ze.result)},ze.readAsDataURL(Se)}},pe=U1(),ve=new Set(o.unlockedAchievements),xe=o.aiProvider||\"openai\",Ke=[{id:\"openai\",label:\"OpenAI\",placeholder:\"sk-...\"},{id:\"anthropic\",label:\"Anthropic\",placeholder:\"sk-ant-...\"},{id:\"gemini\",label:\"Gemini\",placeholder:\"AIza...\"},{id:\"deepseek\",label:\"Deepseek\",placeholder:\"sk-...\"},{id:\"perplexity\",label:\"Perplexity\",placeholder:\"pplx-...\"}],[We,Ue]=x.useState(!1),[it,Ve]=x.useState(null),ke=x.useCallback((fe,Se)=>{u({[fe]:Se})},[u]),Ft=async()=>{const fe=al(xe,o);if(!fe){ce.error(\"No API key found in Settings or System Environment\");return}Ue(!0),Ve(null);try{const Se=await eN(xe,fe);Se.error?(Ve({success:!1,message:Se.error}),ce.error(`Connection failed: ${Se.error}`)):(Ve({success:!0,message:\"Neural link established.\"}),ce.success(\"Connection successful!\"))}catch(Se){const ze=Se.message||\"Unknown error\";console.error(\"Settings save error:\",Se),ce.error(`${at.common.status.error}: ${ze}`)}finally{Ue(!1)}};return n.jsx(kp,{open:i,onOpenChange:l,children:n.jsxs(Dp,{side:\"left\",className:\"w-full sm:max-w-lg overflow-y-auto px-0 bg-slate-950 border-white/5 text-slate-100 h-dvh\",children:[n.jsx(Mp,{className:\"sr-only\",children:\"Settings\"}),n.jsx(_p,{className:\"sr-only\",children:\"Customize your FinHub core experience.\"}),n.jsxs(\"div\",{className:\"space-y-12 animate-in fade-in slide-in-from-left-4 duration-500 px-8 pt-12 pb-10 text-white relative\",children:[n.jsx(\"div\",{className:\"absolute top-4 right-4 z-20\",children:n.jsx(Re,{variant:\"ghost\",size:\"icon\",onClick:l,className:\"w-10 h-10 rounded-full bg-white/5 text-slate-400 hover:text-white hover:bg-white/10\",children:n.jsx(il,{className:\"w-5 h-5\"})})}),n.jsxs(\"div\",{className:\"flex flex-col gap-2\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-1.5 h-8 bg-indigo-500 rounded-full shadow-[0_0_15px_rgba(99,102,241,0.5)]\"}),n.jsx(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tight leading-none text-white\",children:\"System Config\"})]}),n.jsx(\"p\",{className:\"text-slate-500 font-bold ml-4 text-sm\",children:\"Customize your FinHub core experience.\"})]}),n.jsxs(\"div\",{className:\"space-y-10\",children:[n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"h3\",{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Su,{className:\"w-3.5 h-3.5\"}),\"User Identity\"]}),n.jsx(Re,{variant:\"ghost\",size:\"sm\",onClick:()=>f(!p),className:\"text-[10px] font-black uppercase tracking-widest text-indigo-400 hover:text-indigo-300 hover:bg-white/5\",children:p?\"Abort\":\"Refine\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-8 bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-indigo-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsxs(\"div\",{className:\"relative\",children:[E?n.jsx(\"img\",{src:E,alt:\"Profile\",className:\"w-24 h-24 rounded-full object-cover border-4 border-slate-800 shadow-2xl\"}):n.jsx(\"div\",{className:\"w-24 h-24 bg-gradient-to-br from-indigo-600 to-purple-700 rounded-full flex items-center justify-center shadow-2xl\",children:n.jsx(Su,{className:\"w-12 h-12 text-white/90\"})}),p&&n.jsxs(\"label\",{className:\"absolute bottom-0 right-0 w-9 h-9 bg-indigo-600 rounded-full flex items-center justify-center cursor-pointer hover:bg-indigo-500 shadow-lg border-4 border-slate-900 transition-transform active:scale-90\",children:[n.jsx(ry,{className:\"w-4 h-4 text-white\"}),n.jsx(\"input\",{type:\"file\",accept:\"image/*\",className:\"hidden\",onChange:Ae,\"aria-label\":\"Upload profile picture\"})]})]}),n.jsx(\"div\",{className:\"flex-1 min-w-0\",children:p?n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(ye,{htmlFor:\"settings-profile-name\",className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Alias\"}),n.jsx(wt,{id:\"settings-profile-name\",name:\"name\",placeholder:\"e.g. Maverick\",value:g,onChange:fe=>N(fe.target.value),className:\"bg-white/5 border-white/5 rounded-xl h-12 text-white placeholder:text-slate-700 font-bold\",autoComplete:\"name\"})]}),n.jsx(Re,{size:\"sm\",onClick:je,className:\"w-full h-12 bg-indigo-600 hover:bg-indigo-500 text-white font-black rounded-xl\",children:\"Commit Identity\"})]}):n.jsxs(n.Fragment,{children:[n.jsx(\"h4\",{className:\"text-2xl font-black text-slate-100 tracking-tight\",children:g||\"Guest User\"}),n.jsx(\"p\",{className:\"text-xs text-slate-500 font-bold uppercase tracking-widest mt-1\",children:\"FinHub Node // 0x50.3\"})]})})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsx(\"div\",{className:\"space-y-4\",children:n.jsxs(\"button\",{onClick:()=>u({roundUpEnabled:!o.roundUpEnabled}),className:`w-full flex items-center justify-between p-6 rounded-[32px] border transition-all relative overflow-hidden group ${o.roundUpEnabled?\"bg-emerald-500/10 border-emerald-500/50 shadow-[0_0_20px_rgba(16,185,129,0.1)]\":\"bg-slate-900/40 border-white/5 grayscale opacity-60 hover:opacity-100 hover:grayscale-0\"}`,children:[n.jsx(\"div\",{className:`absolute top-0 right-0 w-24 h-24 blur-3xl opacity-10 -mr-12 -mt-12 transition-colors ${o.roundUpEnabled?\"bg-emerald-500\":\"bg-slate-500\"}`}),n.jsxs(\"div\",{className:\"space-y-1 relative z-10 flex-1 pr-4 text-left\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-2 text-sm font-black text-slate-100 uppercase tracking-tight\",children:[n.jsx(qn,{className:`w-4 h-4 ${o.roundUpEnabled?\"text-emerald-500\":\"text-slate-500\"}`}),\"Virtual Round-Ups\"]}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 font-bold leading-relaxed uppercase tracking-widest\",children:\"Build your fortress automatically via expense spillover.\"})]}),n.jsx(\"div\",{className:`relative z-10 px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${o.roundUpEnabled?\"bg-emerald-500 text-white shadow-lg shadow-emerald-500/20\":\"bg-slate-800 text-slate-500\"}`,children:o.roundUpEnabled?\"Active\":\"Offline\"})]})}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(ye,{htmlFor:\"settings-currency\",className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Gh,{className:\"w-3.5 h-3.5\"}),\"Standard Denomination\"]}),n.jsxs(\"div\",{className:\"bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-indigo-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsx(\"div\",{className:\"space-y-2 relative z-10\",children:n.jsxs(Ut,{value:o.currency,onValueChange:fe=>u({currency:fe}),children:[n.jsx(Bt,{id:\"settings-currency\",name:\"currency\",className:\"bg-white/5 border-white/5 rounded-2xl h-14 font-black\",children:n.jsx(It,{})}),n.jsxs(qt,{className:\"bg-slate-900 border-white/10 text-white\",children:[n.jsx(qe,{value:\"USD\",children:\"USD ($) - US Dollar\"}),n.jsx(qe,{value:\"EUR\",children:\"EUR (€) - Euro\"}),n.jsx(qe,{value:\"GBP\",children:\"GBP (£) - British Pound\"}),n.jsx(qe,{value:\"INR\",children:\"INR (₹) - Indian Rupee\"}),n.jsx(qe,{value:\"AED\",children:\"AED (د.إ) - UAE Dirham\"}),n.jsx(qe,{value:\"SAR\",children:\"SAR (﷼) - Saudi Riyal\"})]})]})})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(ye,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Gh,{className:\"w-3.5 h-3.5\"}),\"Foreign Exchange Probe\"]}),n.jsxs(\"div\",{className:\"space-y-6 p-6 bg-slate-900/40 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-blue-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4 relative z-10\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(ye,{htmlFor:\"converter-from-currency\",className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Source\"}),n.jsxs(Ut,{value:J,onValueChange:fe=>{ne(fe)},children:[n.jsx(Bt,{id:\"converter-from-currency\",name:\"fromCurrency\",className:\"bg-white/5 border-white/5 rounded-2xl h-12\",children:n.jsx(It,{})}),n.jsx(qt,{className:\"bg-slate-900 border-white/10 text-white\",children:Y.map(fe=>n.jsxs(qe,{value:fe,children:[dn[fe],\" \",fe]},fe))})]})]}),n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(ye,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Target\"}),n.jsxs(\"div\",{className:\"h-12 flex items-center justify-center bg-indigo-500/10 rounded-2xl border border-indigo-500/20 text-xs font-black text-indigo-400\",children:[dn[V],\" \",V]})]})]}),n.jsxs(\"div\",{className:\"space-y-1.5 relative z-10\",children:[n.jsx(ye,{htmlFor:\"converter-amount\",className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Capital Amount\"}),n.jsx(wt,{id:\"converter-amount\",name:\"amount\",type:\"number\",placeholder:\"Enter amount\",value:F,onChange:fe=>{const Se=fe.target.value;parseFloat(Se)<0||ie(Se)},min:\"0\",className:\"bg-white/5 border-white/5 rounded-2xl h-14 font-black text-lg\",autoComplete:\"off\"})]}),w!==null&&n.jsxs(\"div\",{className:\"p-6 bg-white/5 rounded-2xl border border-white/5 animate-in fade-in slide-in-from-top-2 relative z-10\",children:[n.jsx(\"p\",{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 mb-2\",children:\"Calculated Projection\"}),n.jsxs(\"div\",{className:\"flex items-baseline gap-2\",children:[n.jsxs(\"p\",{className:\"text-2xl font-black text-emerald-400 tabular-nums\",children:[dn[V],w.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold uppercase tracking-widest\",children:\"ESTIMATED VALUATION\"})]}),T[V]&&n.jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-white/5 flex items-center justify-between\",children:[n.jsx(\"span\",{className:\"text-[8px] font-black uppercase tracking-[0.2em] text-slate-700\",children:\"Interest Rate\"}),n.jsxs(\"span\",{className:\"text-[10px] font-black text-slate-500 tabular-nums\",children:[\"1 \",J,\" = \",T[V].toFixed(4),\" \",V]})]})]})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(ye,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(qn,{className:\"w-3.5 h-3.5 text-rose-500\"}),\"Inflation Projection Node\"]}),n.jsxs(\"div\",{className:\"space-y-6 p-6 bg-slate-900/40 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-rose-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsxs(\"div\",{className:\"space-y-4 relative z-10\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(ye,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Current Capital\"}),n.jsx(wt,{type:\"number\",value:ge,onChange:fe=>O(fe.target.value),className:\"bg-white/5 border-white/5 rounded-2xl h-12 font-black\",placeholder:\"e.g. 1000000\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(ye,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Horizon (Years)\"}),n.jsx(wt,{type:\"number\",value:k,onChange:fe=>U(fe.target.value),className:\"bg-white/5 border-white/5 rounded-2xl h-12 font-black\"})]}),n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between ml-1\",children:[n.jsx(ye,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500\",children:\"Rate (%)\"}),n.jsxs(\"button\",{onClick:W,disabled:v,className:\"text-[8px] font-black uppercase text-indigo-400 hover:text-indigo-300 disabled:opacity-50 flex items-center gap-1\",children:[v?n.jsx(Xc,{className:\"w-2 h-2 animate-spin\"}):n.jsx(oy,{className:\"w-2 h-2\"}),\"Sync\"]})]}),n.jsx(wt,{type:\"number\",value:Q,onChange:fe=>ae(fe.target.value),className:\"bg-white/5 border-white/5 rounded-2xl h-12 font-black\"})]})]}),ge&&n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(\"div\",{className:\"h-32 w-full bg-black/20 rounded-2xl p-2 border border-white/5 overflow-hidden\",children:n.jsx(mv,{width:\"100%\",height:\"100%\",minHeight:128,minWidth:100,children:n.jsxs(hv,{data:q,children:[n.jsxs(\"defs\",{children:[n.jsxs(\"linearGradient\",{id:\"colorCost\",x1:\"0\",y1:\"0\",x2:\"0\",y2:\"1\",children:[n.jsx(\"stop\",{offset:\"5%\",stopColor:\"#FB7185\",stopOpacity:.3}),n.jsx(\"stop\",{offset:\"95%\",stopColor:\"#FB7185\",stopOpacity:0})]}),n.jsxs(\"linearGradient\",{id:\"colorPower\",x1:\"0\",y1:\"0\",x2:\"0\",y2:\"1\",children:[n.jsx(\"stop\",{offset:\"5%\",stopColor:\"#34D399\",stopOpacity:.3}),n.jsx(\"stop\",{offset:\"95%\",stopColor:\"#34D399\",stopOpacity:0})]})]}),n.jsx(pv,{strokeDasharray:\"3 3\",vertical:!1,stroke:\"rgba(255,255,255,0.05)\"}),n.jsx(gv,{contentStyle:{backgroundColor:\"#0f172a\",border:\"1px solid rgba(255,255,255,0.1)\",borderRadius:\"8px\",fontSize:\"10px\"},itemStyle:{color:\"#fff\",padding:\"2px 0\"}}),n.jsx(Xh,{type:\"monotone\",dataKey:\"futureCost\",stroke:\"#FB7185\",fillOpacity:1,fill:\"url(#colorCost)\"}),n.jsx(Xh,{type:\"monotone\",dataKey:\"purchasingPower\",stroke:\"#34D399\",fillOpacity:1,fill:\"url(#colorPower)\"})]})})}),n.jsxs(\"div\",{className:\"p-6 bg-white/5 rounded-2xl border border-white/5 space-y-4\",children:[n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 mb-2\",children:\"Future Cost\"}),n.jsxs(\"p\",{className:\"text-xl font-black text-rose-400 tabular-nums\",children:[dn[o.currency],Math.round(parseFloat(ge)*Math.pow(1+parseFloat(Q)/100,parseFloat(k))).toLocaleString()]})]}),n.jsxs(\"div\",{className:\"pt-4 border-t border-white/5\",children:[n.jsx(\"p\",{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 mb-2\",children:\"Real Purchasing Power\"}),n.jsxs(\"p\",{className:\"text-xl font-black text-emerald-400 tabular-nums\",children:[dn[o.currency],Math.round(parseFloat(ge)/Math.pow(1+parseFloat(Q)/100,parseFloat(k))).toLocaleString()]}),n.jsx(\"p\",{className:\"text-[8px] text-slate-600 font-bold uppercase tracking-widest mt-1\",children:\"VALUATION IN TODAY'S MONEY\"})]})]})]})]})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(ye,{className:\"text-[10px] font-bold uppercase tracking-[0.2em] text-slate-500 flex items-center gap-2\",children:[n.jsx(cy,{className:\"w-3.5 h-3.5 text-indigo-400\"}),\"AI Assistant Config\"]}),n.jsxs(\"div\",{className:\"space-y-6 bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsxs(\"div\",{className:\"space-y-1.5 relative z-10\",children:[n.jsx(ye,{htmlFor:\"ai-provider-select\",className:\"text-[9px] font-bold uppercase tracking-widest text-slate-500 ml-1\",children:\"Preferred Provider\"}),n.jsxs(Ut,{value:xe,onValueChange:fe=>u({aiProvider:fe}),children:[n.jsx(Bt,{id:\"ai-provider-select\",name:\"aiProvider\",className:\"bg-slate-900 border-white/5 rounded-xl h-11 text-[10px] font-bold uppercase tracking-widest\",children:n.jsx(It,{})}),n.jsx(qt,{className:\"bg-slate-900 border-white/10 text-white\",children:Ke.map(fe=>n.jsx(qe,{value:fe.id,className:\"text-[10px] font-bold uppercase tracking-widest\",children:fe.label},fe.id))})]})]}),n.jsxs(\"div\",{className:\"space-y-4 pt-2 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between px-1\",children:[n.jsx(ye,{className:\"text-[9px] font-bold uppercase tracking-widest text-slate-500\",children:\"Active Credential\"}),n.jsx(\"div\",{className:\"flex items-center gap-1.5\",children:n.jsx(\"span\",{className:\"text-[8px] font-bold text-indigo-400/70 uppercase tracking-tighter\",children:Ke.find(fe=>fe.id===xe)?.label})})]}),Ke.filter(fe=>fe.id===xe).map(fe=>{const Se=o.apiKeys?.[fe.id],ze=`VITE_${fe.id.toUpperCase()}_API_KEY`,lt=!!_0[ze];return n.jsxs(\"div\",{className:\"flex items-center gap-3 bg-indigo-500/5 p-4 rounded-2xl border border-indigo-500/20 group/active transition-all\",children:[n.jsx(\"div\",{className:\"flex-1 min-w-0\",children:n.jsxs(\"div\",{className:\"relative group/input\",children:[n.jsx(wt,{type:\"password\",value:Se||\"\",onChange:mt=>ke(\"apiKeys\",{...o.apiKeys,[fe.id]:mt.target.value}),placeholder:lt?\"Using System Environment Key\":`Enter ${fe.label} Key`,className:`bg-transparent border-none p-0 h-auto text-sm font-bold text-white placeholder:text-slate-700 focus-visible:ring-0 shadow-none ${lt&&!Se?\"opacity-40 italic font-medium\":\"\"}`,disabled:lt&&!Se}),lt&&!Se&&n.jsx(\"div\",{className:\"flex items-center gap-1 mt-1\",children:n.jsx(\"span\",{className:\"text-[7px] font-black text-emerald-500 uppercase tracking-widest bg-emerald-500/10 px-1 py-0.5 rounded\",children:\"System Linked\"})})]})}),Se&&n.jsx(\"button\",{onClick:()=>ke(\"apiKeys\",{...o.apiKeys,[fe.id]:\"\"}),className:\"text-slate-600 hover:text-rose-500 transition-colors p-1\",title:\"Clear saved key\",\"aria-label\":`Clear saved key for ${fe.label}`,children:n.jsx(tl,{className:\"w-3.5 h-3.5\"})})]},fe.id)}),n.jsx(Re,{onClick:Ft,disabled:We||!al(xe,o),className:`w-full h-11 transition-all font-bold uppercase tracking-[0.2em] text-[10px] rounded-xl ${it?.success?\"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20\":it?.success===!1?\"bg-rose-500/10 text-rose-400 border border-rose-500/20\":\"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20\"}`,children:We?n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(Xc,{className:\"w-3.5 h-3.5 animate-spin\"}),\"Verifying...\"]}):it?.success?n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(Cu,{className:\"w-3.5 h-3.5\"}),\"Link Stable\"]}):\"Validate Connection\"})]}),n.jsxs(Tj,{className:\"relative z-10\",children:[n.jsx(Dj,{asChild:!0,children:n.jsxs(Re,{variant:\"ghost\",className:\"w-full h-8 hover:bg-white/5 text-slate-500 hover:text-slate-300 text-[8px] font-bold uppercase tracking-widest group/trigger flex items-center justify-between px-2 rounded-lg\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(uy,{className:\"w-3 h-3 text-slate-600 group-hover/trigger:text-slate-400\"}),\"Alternative Nodes\"]}),n.jsx(nl,{className:\"w-3 h-3 transition-transform duration-300 group-data-[state=open]/trigger:rotate-180\"})]})}),n.jsx(Mj,{className:\"pt-4 space-y-3 animate-in fade-in slide-in-from-top-2 duration-300\",children:n.jsx(\"div\",{className:\"grid gap-2\",children:Ke.filter(fe=>fe.id!==xe).map(fe=>{const Se=o.apiKeys?.[fe.id],ze=`VITE_${fe.id.toUpperCase()}_API_KEY`,lt=!!_0[ze];return n.jsxs(\"div\",{className:\"flex items-center gap-3 bg-slate-950/40 p-3 rounded-xl border border-white/5 hover:border-white/10 transition-colors\",children:[n.jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between mb-1\",children:[n.jsx(\"span\",{className:\"text-[8px] font-bold uppercase tracking-wider text-slate-500\",children:fe.label}),lt&&!Se&&n.jsx(\"span\",{className:\"text-[7px] font-bold text-emerald-500/50 uppercase tracking-tighter\",children:\"System\"})]}),n.jsx(wt,{type:\"password\",value:Se||\"\",onChange:mt=>ke(\"apiKeys\",{...o.apiKeys,[fe.id]:mt.target.value}),placeholder:lt?\"Using System Default\":\"Key not found\",className:\"bg-transparent border-none p-0 h-auto text-[10px] text-slate-400 placeholder:text-slate-800 focus-visible:ring-0 shadow-none italic font-medium cursor-not-allowed\",disabled:lt&&!Se})]}),Se&&n.jsx(\"button\",{onClick:()=>ke(\"apiKeys\",{...o.apiKeys,[fe.id]:\"\"}),className:\"text-slate-800 hover:text-rose-500 transition-colors p-1\",title:\"Clear saved key\",\"aria-label\":`Clear saved key for ${fe.label}`,children:n.jsx(tl,{className:\"w-3 h-3\"})})]},fe.id)})})})]})]})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(ye,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Qc,{className:\"w-3.5 h-3.5 text-indigo-400\"}),\"Data Optimization Node\"]}),n.jsxs(\"div\",{className:\"p-6 bg-slate-900/40 rounded-[32px] border border-white/5 relative overflow-hidden\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-300\",children:at.settings.subscriptionScanner}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-wide mt-1\",children:\"DETECT & MIGRATE RECURRING SIGNALS\"})]}),n.jsx(Re,{onClick:B,disabled:M,className:\"bg-indigo-600 hover:bg-indigo-500 text-white font-black uppercase tracking-widest text-[9px] h-9 px-4 rounded-xl shadow-lg shadow-indigo-500/20\",children:M?n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(Xc,{className:\"w-3 h-3 animate-spin\"}),\"Scanning...\"]}):\"Execute Scan\"})]}),n.jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-white/5 flex items-center justify-between\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-300\",children:\"Redundancy Purge\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-wide mt-1\",children:\"REMOVE BLANK & DUPLICATE ENTRIES\"})]}),n.jsx(Re,{onClick:async()=>{const fe=ce.loading(\"Purging duplicates...\");try{const Se=await G();ce.dismiss(fe)}catch{ce.dismiss(fe),ce.error(\"Purge failed\")}},className:\"bg-rose-500/10 hover:bg-rose-500/20 text-rose-400 border border-rose-500/20 font-black uppercase tracking-widest text-[9px] h-9 px-4 rounded-xl\",children:at.settings.cleanupDuplicates})]})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(ye,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(dy,{className:\"w-3.5 h-3.5 text-amber-500\"}),at.settings.achievementLevel,\" (\",o.unlockedAchievements.length,\"/\",pe.length,\")\"]}),n.jsx(\"div\",{className:\"grid grid-cols-4 sm:grid-cols-6 gap-3\",children:pe.map(fe=>{const Se=ve.has(fe.id);return n.jsx(\"button\",{onClick:()=>{Se&&d&&d(fe.id)},disabled:!Se,className:`w-12 h-12 rounded-xl border flex items-center justify-center text-xl transition-all ${Se?\"border-amber-500/50 bg-amber-500/10 grayscale-0 hover:scale-110 hover:shadow-lg hover:shadow-amber-500/20 active:scale-95\":\"border-white/5 bg-white/5 grayscale opacity-20 cursor-not-allowed\"}`,children:fe.icon},fe.id)})}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 font-bold text-center leading-relaxed\",children:o.unlockedAchievements.length>0?at.settings.achievementSelect:at.settings.achievementLocked})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsx(\"div\",{className:\"space-y-4\",children:n.jsxs(\"div\",{className:\"p-4 bg-rose-500/5 border border-rose-500/10 rounded-2xl flex items-center justify-between\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"text-[10px] font-black uppercase tracking-widest text-rose-400\",children:at.settings.factoryReset}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-wide mt-1\",children:at.settings.wipeDescription})]}),n.jsx(Re,{onClick:async()=>{confirm(\"Are you sure? This deletes ALL transaction data.\")&&await ee()},className:\"bg-slate-950 hover:bg-rose-500 text-rose-500 hover:text-white border border-rose-500/20 font-black uppercase tracking-widest text-[9px] h-9 px-4 rounded-xl transition-colors\",children:at.settings.wipeData})]})}),n.jsx(_j,{className:\"bg-white/5\"}),n.jsxs(\"div\",{className:\"text-center pt-8 space-y-2 opacity-40 hover:opacity-100 transition-opacity duration-700 pb-10\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-[0.5em] text-slate-100\",children:\"Obsidian System Node\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-widest\",children:\"Architect: Sijo Joseph // BUILD 50.3.0 // QUANTUM CORE\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-700 uppercase tracking-widest mt-4\",children:\"© 2025 NEURAL FINHUB FABRIC\"}),n.jsxs(\"button\",{onClick:h,className:\"mt-4 text-[8px] font-black text-indigo-400/60 hover:text-indigo-400 uppercase tracking-[0.2em] transition-colors\",children:[\"[ \",at.settings.about,\" ]\"]})]}),n.jsxs(\"div\",{className:\"px-2 pb-10\",children:[n.jsxs(Re,{variant:\"outline\",onClick:()=>{L(),l()},className:\"w-full h-14 bg-white/5 hover:bg-white/10 border-white/10 hover:border-white/20 text-white/60 hover:text-white font-black uppercase tracking-widest gap-3 rounded-[24px] transition-all group mb-4\",children:[n.jsx(fy,{className:\"w-5 h-5 group-hover:-translate-x-1 transition-transform\"}),\"Terminate Session\"]}),n.jsxs(Rp,{open:Z,onOpenChange:_,children:[n.jsx(Rj,{asChild:!0,children:n.jsxs(Re,{variant:\"outline\",className:\"w-full h-14 bg-rose-500/5 hover:bg-rose-500/10 border-rose-500/20 hover:border-rose-500/40 text-rose-500 font-black uppercase tracking-widest gap-3 rounded-[24px] transition-all group\",children:[n.jsx(Qc,{className:\"w-5 h-5 group-hover:scale-110 transition-transform\"}),\"Delete Account & Data\"]})}),n.jsxs(Op,{className:\"bg-slate-950 border-white/10 text-white rounded-[32px] p-8\",children:[n.jsxs(zp,{children:[n.jsxs(Up,{className:\"text-2xl font-black tracking-tight flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"p-2 rounded-full bg-rose-500/20 text-rose-500\",children:n.jsx(Qc,{className:\"w-6 h-6\"})}),\"Irreversible Action?\"]}),n.jsxs(Ip,{className:\"text-slate-400 font-medium leading-relaxed mt-4\",children:[\"Your account will be \",n.jsx(\"span\",{className:\"text-white font-bold italic\",children:\"deactivated immediately\"}),\" and scheduled for permanent deletion in \",n.jsx(\"span\",{className:\"text-white font-bold\",children:\"30 days\"}),\".\",n.jsx(\"br\",{}),n.jsx(\"br\",{}),\"Log in anytime before then to cancel this request and restore your data node.\"]})]}),n.jsxs(Lp,{className:\"mt-8 gap-3\",children:[n.jsx(qp,{className:\"h-14 flex-1 rounded-2xl bg-white/5 border-white/10 text-slate-400 hover:bg-white/10 hover:text-white font-black uppercase tracking-widest transition-all\",children:\"Abort\"}),n.jsx(Bp,{onClick:async()=>{await z(),l()},className:\"h-14 flex-1 rounded-2xl bg-rose-600 hover:bg-rose-500 text-white font-black uppercase tracking-widest shadow-lg shadow-rose-500/20 transition-all active:scale-95\",children:\"Confirm Purge\"})]})]})]})]})]})]})})};function nN({onNavigate:i,onOpenSettings:l,onOpenNotifications:o,emergencyFundAmount:u,bankAccountsCount:d,cardsCount:h,currency:g,onOpenAbout:N}){return n.jsxs(\"div\",{className:\"space-y-12 animate-in fade-in slide-in-from-bottom-4 duration-700 px-4 pb-20\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tight leading-none mb-3\",children:\"Settings & Assets\"}),n.jsx(\"p\",{className:\"text-slate-500 font-bold max-w-md\",children:\"Configure your financial universe and manage core system components.\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[n.jsxs(Ot,{className:\"p-8 cursor-pointer bg-black border-white/5 sq-2xl border hover:bg-white/5 transition-all duration-300 group relative overflow-hidden\",onClick:()=>i(\"emergency\"),children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-blue-500 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20\"}),n.jsxs(\"div\",{className:\"relative z-10\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-blue-500/10 border border-blue-500/20 sq-md flex items-center justify-center text-blue-400 mb-8 group-hover:scale-110 transition-transform duration-500\",children:n.jsx(sl,{className:\"w-8 h-8\"})}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100\",children:\"Emergency Fund\"}),n.jsx(\"p\",{className:\"text-2xl font-black tabular-nums text-blue-400\",children:Ne(u,g)})]}),n.jsxs(\"div\",{className:\"mt-8 flex items-center justify-between text-slate-500\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest\",children:\"Financial Safety Net\"}),n.jsx(Ps,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]})]})]}),n.jsxs(Ot,{className:\"p-8 cursor-pointer bg-black border-white/5 sq-2xl border hover:bg-white/5 transition-all duration-300 group relative overflow-hidden\",onClick:()=>i(\"accounts\"),children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-emerald-500 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20\"}),n.jsxs(\"div\",{className:\"relative z-10\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-emerald-500/10 border border-emerald-500/20 sq-md flex items-center justify-center text-emerald-400 mb-8 group-hover:scale-110 transition-transform duration-500\",children:n.jsx(J0,{className:\"w-8 h-8\"})}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100\",children:\"Accounts & Cards\"}),n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsxs(\"div\",{className:\"space-y-0.5\",children:[n.jsx(\"p\",{className:\"text-2xl font-black tabular-nums text-emerald-400\",children:d}),n.jsx(\"p\",{className:\"text-[10px] font-bold text-slate-600 uppercase tracking-wider\",children:\"Banks\"})]}),n.jsx(\"div\",{className:\"w-px h-8 bg-white/5 self-center mt-2\"}),n.jsxs(\"div\",{className:\"space-y-0.5\",children:[n.jsx(\"p\",{className:\"text-2xl font-black tabular-nums text-emerald-400\",children:h}),n.jsx(\"p\",{className:\"text-[10px] font-bold text-slate-600 uppercase tracking-wider\",children:\"Cards\"})]})]})]}),n.jsxs(\"div\",{className:\"mt-8 flex items-center justify-between text-slate-500\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest\",children:\"Manage Liquidity\"}),n.jsx(Ps,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]})]})]})]}),n.jsxs(\"div\",{className:\"pt-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 mb-8\",children:[n.jsx(\"div\",{className:\"w-1.5 h-6 bg-slate-700 rounded-full\"}),n.jsx(\"h3\",{className:\"text-xs font-black uppercase tracking-[0.3em] text-slate-600\",children:\"System Configuration\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 gap-4\",children:[n.jsx(Ot,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group\",onClick:l,children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400 group-hover:text-white transition-colors\",children:n.jsx(my,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"App Settings\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"Preferences & Display\"})]})]}),n.jsx(Ps,{className:\"w-5 h-5 text-slate-700 group-hover:text-slate-400 transition-colors\"})]})}),n.jsx(Ot,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group\",onClick:o,children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400 group-hover:text-white transition-colors\",children:n.jsx(Lu,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"Alert Center\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"System Notifications\"})]})]}),n.jsx(Ps,{className:\"w-5 h-5 text-slate-700 group-hover:text-slate-400 transition-colors\"})]})}),n.jsx(Ot,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group opacity-60 hover:opacity-100\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400\",children:n.jsx(hy,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"Support\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"Documentation & Help\"})]})]}),n.jsx(Ps,{className:\"w-5 h-5 text-slate-700 transition-colors\"})]})}),n.jsx(Ot,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group opacity-60 hover:opacity-100\",onClick:N,children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400\",children:n.jsx(py,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"About\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"Version 5.0 Stable Release\"})]})]}),n.jsx(Ps,{className:\"w-5 h-5 text-slate-700 transition-colors\"})]})})]})]}),n.jsxs(\"div\",{className:\"text-center pt-8 border-t border-white/5\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-[0.5em] text-slate-700 mb-1\",children:\"FinHub Obsidian System\"}),n.jsx(\"p\",{className:\"text-[9px] font-bold text-slate-800\",children:\"BUILD 50.3.0 // QUANTUM CORE\"})]})]})}function sN({className:i,children:l,...o}){return n.jsxs(gy,{\"data-slot\":\"scroll-area\",className:De(\"relative\",i),...o,children:[n.jsx(xy,{\"data-slot\":\"scroll-area-viewport\",className:\"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1\",children:l}),n.jsx(iN,{}),n.jsx(by,{})]})}function iN({className:i,orientation:l=\"vertical\",...o}){return n.jsx(yy,{\"data-slot\":\"scroll-area-scrollbar\",orientation:l,className:De(\"flex touch-none p-px transition-colors select-none\",l===\"vertical\"&&\"h-full w-2.5 border-l border-l-transparent\",l===\"horizontal\"&&\"h-2.5 flex-col border-t border-t-transparent\",i),...o,children:n.jsx(vy,{\"data-slot\":\"scroll-area-thumb\",className:\"bg-border relative flex-1 rounded-full\"})})}function lN({isOpen:i,onClose:l,notifications:o,onNotificationClick:u,onMarkAsRead:d,onClearRead:h}){const g=o.filter(C=>!C.read).length,N=o.filter(C=>C.read).length,E=C=>{switch(C){case\"achievement\":return n.jsx(jy,{className:\"w-5 h-5 text-yellow-500\"});case\"goal\":return n.jsx(Hn,{className:\"w-5 h-5 text-green-500\"});case\"insight\":return n.jsx(qn,{className:\"w-5 h-5 text-blue-500\"});case\"alert\":return n.jsx(el,{className:\"w-5 h-5 text-red-500\"});case\"reminder\":return n.jsx(Nu,{className:\"w-5 h-5 text-indigo-500\"})}},S=C=>{const M=new Date(C),L=new Date().getTime()-M.getTime(),z=Math.floor(L/6e4),j=Math.floor(L/36e5),G=Math.floor(L/864e5);return z<60?`${z}m ago`:j<24?`${j}h ago`:`${G}d ago`},[p,f]=x.useState({reminders:!0,transactions:!0,achievements:!1,insights:!1}),w=C=>{f(M=>({...M,[C]:!M[C]}))},A=[\"reminders\",\"transactions\",\"insights\",\"achievements\"],T=o.reduce((C,M)=>{const y=M.category||\"insights\";return C[y]||(C[y]=[]),C[y].push(M),C},{});return Object.keys(T).forEach(C=>{T[C].sort((M,y)=>M.read!==y.read?M.read?1:-1:new Date(y.timestamp).getTime()-new Date(M.timestamp).getTime())}),n.jsx(kp,{open:i,onOpenChange:l,children:n.jsxs(Dp,{side:\"right\",className:\"w-full sm:max-w-lg p-0 flex flex-col h-dvh max-h-dvh bg-black border-white/5 text-slate-100 overflow-hidden z-[99999]\",children:[n.jsx(Mp,{className:\"sr-only\",children:\"Notifications\"}),n.jsx(_p,{className:\"sr-only\",children:\"Notifications\"}),n.jsxs(\"div\",{className:\"px-8 pt-28 pb-10 border-b border-white/5 bg-black relative overflow-hidden animate-in fade-in slide-in-from-right-4 duration-500\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-48 h-48 bg-indigo-500 blur-[120px] opacity-10 -mr-24 -mt-24\"}),n.jsx(\"div\",{className:\"absolute bottom-0 left-0 w-24 h-24 bg-blue-500 blur-[80px] opacity-5 -ml-12 -mb-12\"}),n.jsx(\"div\",{className:\"absolute top-8 right-8 z-30\",children:n.jsx(Re,{variant:\"ghost\",size:\"icon\",onClick:l,className:\"w-10 h-10 sq-full bg-white/5 text-slate-400 hover:text-white hover:bg-white/10\",children:n.jsx(il,{className:\"w-5 h-5\"})})}),n.jsxs(\"div\",{className:\"flex items-center justify-between relative z-10\",children:[n.jsxs(\"div\",{className:\"flex flex-col gap-2\",children:[n.jsx(\"div\",{className:\"flex items-center gap-4\",children:n.jsxs(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tighter leading-none flex items-center gap-4\",children:[\"Pulse\",g>0&&n.jsx(\"span\",{className:\"flex items-center justify-center min-w-[24px] h-6 px-2 text-[10px] font-black bg-indigo-600 text-white sq-full shadow-[0_0_15px_rgba(79,70,229,0.4)]\",children:g})]})}),n.jsx(\"p\",{className:\"text-slate-500 font-black text-[10px] uppercase tracking-[0.3em] leading-none ml-0.5\",children:\"System Intelligence Stack\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[g>0&&n.jsx(Re,{variant:\"ghost\",size:\"icon\",title:\"Mark all as read\",onClick:()=>{o.forEach(C=>{C.read||d?.(C.id)})},className:\"w-11 h-11 sq-md bg-white/5 text-slate-400 hover:text-indigo-400 hover:bg-white/10 transition-all duration-300 border border-white/5 active:scale-90\",children:n.jsx(wy,{className:\"w-5 h-5\"})}),N>0&&n.jsx(Re,{variant:\"ghost\",size:\"icon\",title:\"Clear history\",onClick:()=>{confirm(`Clear ${N} notifications?`)&&h?.()},className:\"w-11 h-11 sq-md bg-white/5 text-slate-400 hover:text-rose-400 hover:bg-rose-500/10 transition-all duration-300 border border-white/5 active:scale-90\",children:n.jsx(tl,{className:\"w-5 h-5\"})})]})]})]}),n.jsx(sN,{className:\"flex-1 w-full bg-black overflow-hidden custom-scrollbar\",children:n.jsx(\"div\",{className:\"px-6 space-y-12 py-8 pb-32\",children:o.length===0?n.jsxs(\"div\",{className:\"text-center py-32 flex flex-col items-center animate-in fade-in zoom-in duration-700\",children:[n.jsxs(\"div\",{className:\"w-24 h-24 bg-white/5 border border-white/5 sq-2xl flex items-center justify-center text-slate-800 mb-8 shadow-inner relative group\",children:[n.jsx(\"div\",{className:\"absolute inset-0 bg-indigo-500/5 blur-2xl sq-full group-hover:bg-indigo-500/10 transition-colors\"}),n.jsx(Lu,{className:\"w-10 h-10 relative z-10\"})]}),n.jsx(\"h4\",{className:\"text-2xl font-black text-slate-100 mb-3 tracking-tight\",children:\"Signal Silence\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-black uppercase tracking-[0.3em] max-w-[260px] leading-relaxed\",children:\"No new notifications. We will alert you when there are updates.\"})]}):A.map(C=>{const M=T[C]||[];if(M.length===0)return null;const y=p[C],L=y?M.length:1,z=M.filter(j=>!j.read).length;return n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"button\",{onClick:()=>w(C),...y?{\"aria-expanded\":\"true\"}:{\"aria-expanded\":\"false\"},className:\"w-full flex items-center justify-between px-2 group\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-[0.4em] text-slate-500 group-hover:text-slate-300 transition-colors\",children:C}),z>0&&n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 sq-full animate-pulse shadow-[0_0_10px_rgba(99,102,241,0.6)]\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black text-slate-700\",children:M.length}),y?n.jsx(_r,{className:\"w-3 h-3 text-slate-700\"}):n.jsx(nl,{className:\"w-3 h-3 text-slate-700\"})]})]}),n.jsxs(\"div\",{className:\"space-y-3 relative\",children:[!y&&M.length>1&&n.jsxs(n.Fragment,{children:[n.jsx(\"div\",{className:\"absolute top-2 left-2 right-2 h-full bg-black/40 sq-xl -z-10 border border-white/5 translate-y-2 scale-[0.98]\"}),n.jsx(\"div\",{className:\"absolute top-4 left-4 right-4 h-full bg-black/20 sq-xl -z-20 border border-white/5 translate-y-4 scale-[0.96]\"})]}),M.slice(0,L).map((j,G)=>{const ee={style:{\"--anim-delay\":`${G*50}ms`,\"--z-index\":100-G}};return n.jsxs(\"div\",{...ee,className:`p-6 sq-xl border transition-all duration-500 group relative overflow-hidden cursor-pointer active:scale-[0.98] animate-in fade-in slide-in-from-right-4 fill-mode-both [animation-delay:var(--anim-delay)] z-[var(--z-index)] ${j.read?\"bg-black border-white/5\":\"bg-black border-indigo-500/30 shadow-lg shadow-indigo-500/5 hover:border-indigo-500/50\"}`,onClick:Z=>{Z.stopPropagation(),u?.(j),j.read||d?.(j.id)},children:[j.priority===\"high\"&&!j.read&&n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 bg-red-500 blur-[80px] opacity-10 -mr-16 -mt-16\"}),!j.read&&j.priority!==\"high\"&&n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 bg-indigo-500 blur-[80px] opacity-10 -mr-16 -mt-16 group-hover:opacity-20 transition-opacity\"}),n.jsxs(\"div\",{className:\"flex gap-4 relative z-10\",children:[n.jsx(\"div\",{className:`w-12 h-12 sq-md flex items-center justify-center shrink-0 border border-white/5 transition-all duration-500 ${j.read?\"bg-white/5 text-slate-600\":j.priority===\"high\"?\"bg-red-500/10 text-red-400\":\"bg-indigo-500/10 text-indigo-400 shadow-inner\"}`,children:E(j.type)}),n.jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[n.jsxs(\"div\",{className:\"flex items-start justify-between gap-4\",children:[n.jsx(\"h4\",{className:`text-sm font-black tracking-tight leading-tight ${j.read?\"text-slate-500\":\"text-slate-100\"}`,children:j.title}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-700 whitespace-nowrap pt-1\",children:S(j.timestamp)})]}),n.jsx(\"p\",{className:`text-xs mt-2 leading-relaxed font-bold tracking-tight ${j.read?\"text-slate-700\":\"text-slate-400\"}`,children:j.message}),j.priority===\"high\"&&!j.read&&n.jsxs(\"div\",{className:\"mt-4 flex items-center gap-2\",children:[n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-red-400 sq-full animate-ping\"}),n.jsx(\"span\",{className:\"text-[10px] font-black text-red-400 uppercase tracking-[0.2em]\",children:\"Critical Stability Alert\"})]}),j.action&&j.action.status===\"pending\"&&n.jsxs(\"div\",{className:\"mt-4 flex gap-3 animate-in fade-in slide-in-from-top-1\",children:[n.jsx(Re,{size:\"sm\",className:\"h-8 text-[10px] font-black uppercase tracking-widest bg-emerald-600 hover:bg-emerald-500 text-white border-0\",onClick:Z=>{Z.stopPropagation(),j.action.status=\"completed\",u?.(j)},children:\"Yes, Automate\"}),n.jsx(Re,{size:\"sm\",variant:\"ghost\",className:\"h-8 text-[10px] font-black uppercase tracking-widest text-slate-500 hover:text-slate-300 hover:bg-white/5\",onClick:Z=>{Z.stopPropagation(),j.action.status=\"dismissed\",j.read||d?.(j.id)},children:\"No, One-time\"})]})]})]})]},j.id)})]})]},C)})})})]})})}const R0=[{text:\"An investment in knowledge pays the best interest.\",author:\"Benjamin Franklin\",category:\"financial-literacy\"},{text:\"It's not how much money you make, but how much money you keep, how hard it works for you, and how many generations you keep it for.\",author:\"Robert Kiyosaki\",category:\"financial-literacy\"},{text:\"Financial peace isn't the acquisition of stuff. It's learning to live on less than you make, so you can give money back and have money to invest.\",author:\"Dave Ramsey\",category:\"financial-literacy\"},{text:\"Do not save what is left after spending; instead spend what is left after saving.\",author:\"Warren Buffett\",category:\"financial-literacy\"},{text:\"The stock market is a device for transferring money from the impatient to the patient.\",author:\"Warren Buffett\",category:\"financial-literacy\"},{text:\"Know what you own, and know why you own it.\",author:\"Peter Lynch\",category:\"financial-literacy\"},{text:\"The individual investor should act consistently as an investor and not as a speculator.\",author:\"Ben Graham\",category:\"financial-literacy\"},{text:\"Price is what you pay. Value is what you get.\",author:\"Warren Buffett\",category:\"financial-literacy\"},{text:\"The goal isn't more money. The goal is living life on your terms.\",author:\"Chris Brogan\",category:\"financial-freedom\"},{text:\"Financial freedom is available to those who learn about it and work for it.\",author:\"Robert Kiyosaki\",category:\"financial-freedom\"},{text:\"The rich invest in time, the poor invest in money.\",author:\"Warren Buffett\",category:\"financial-freedom\"},{text:\"Wealth is the ability to fully experience life.\",author:\"Henry David Thoreau\",category:\"financial-freedom\"},{text:\"It's not about having lots of money. It's about knowing how to manage the money you do have.\",author:\"Dave Ramsey\",category:\"financial-freedom\"},{text:\"Money is a terrible master but an excellent servant.\",author:\"P.T. Barnum\",category:\"financial-freedom\"},{text:\"The quickest way to double your money is to fold it in half and put it in your back pocket.\",author:\"Will Rogers\",category:\"financial-freedom\"},{text:\"The best time to plant a tree was 20 years ago. The second best time is now.\",author:\"Chinese Proverb\",category:\"motivation\"},{text:\"A journey of a thousand miles begins with a single step.\",author:\"Lao Tzu\",category:\"motivation\"},{text:\"Success is not final, failure is not fatal: it is the courage to continue that counts.\",author:\"Winston Churchill\",category:\"motivation\"},{text:\"The only way to do great work is to love what you do.\",author:\"Steve Jobs\",category:\"motivation\"},{text:\"Don't watch the clock; do what it does. Keep going.\",author:\"Sam Levenson\",category:\"motivation\"},{text:\"Wealth is not about having a lot of money; it's about having a lot of options.\",author:\"Chris Rock\",category:\"motivation\"},{text:\"Every time you borrow money, you're robbing your future self.\",author:\"Nathan W. Morris\",category:\"motivation\"},{text:\"The habit of saving is itself an education; it fosters every virtue, teaches self-denial, cultivates the sense of order, trains to forethought, and so broadens the mind.\",author:\"T.T. Munger\",category:\"motivation\"},{text:\"Too many people spend money they haven't earned, to buy things they don't want, to impress people they don't like.\",author:\"Will Rogers\",category:\"motivation\"},{text:\"A budget is telling your money where to go instead of wondering where it went.\",author:\"Dave Ramsey\",category:\"motivation\"},{text:\"Beware of little expenses. A small leak will sink a great ship.\",author:\"Benjamin Franklin\",category:\"motivation\"},{text:\"Never spend your money before you have earned it.\",author:\"Thomas Jefferson\",category:\"motivation\"}];function O0(){return R0[Math.floor(Math.random()*R0.length)]}function rN({isOpen:i,onClose:l,achievementId:o}){const[u,d]=x.useState(O0());if(x.useEffect(()=>{i&&o&&(queueMicrotask(()=>{d(O0())}),Or({particleCount:150,spread:100,origin:{y:.6},colors:[\"#FFD700\",\"#FFA500\",\"#FF6347\",\"#9370DB\",\"#3CB371\"]}))},[i,o]),!o)return null;const h=cp(o);return h?n.jsx(us,{open:i,onOpenChange:l,children:n.jsxs(ds,{className:\"w-[270px] sm:w-full sm:max-w-md bg-slate-950 border-[#38383A] p-0 overflow-hidden rounded-[32px] shadow-2xl transition-all duration-500\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 sm:w-64 sm:h-64 bg-yellow-500 blur-[60px] sm:blur-[120px] opacity-10 -mr-16 -mt-16 sm:-mr-32 sm:-mt-32\"}),n.jsx(\"div\",{className:\"absolute bottom-0 left-0 w-24 h-24 sm:w-48 sm:h-48 bg-indigo-500 blur-[50px] sm:blur-[100px] opacity-5 -ml-12 -mb-12 sm:-ml-24 sm:-mb-24\"}),n.jsxs(fs,{className:\"px-6 sm:px-10 pt-8 sm:pt-12 pb-0 relative z-10\",children:[n.jsx(ms,{className:\"text-center text-xl sm:text-3xl font-black text-white tracking-tight transition-all\",children:\"Achievement Unlocked\"}),n.jsx(hs,{className:\"text-center text-[8px] sm:text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] sm:tracking-[0.3em] mt-1 sm:mt-2 transition-all\",children:\"Achievement Unlocked\"})]}),n.jsxs(\"div\",{className:\"space-y-6 sm:space-y-10 py-8 sm:py-12 px-6 sm:px-10 relative z-10\",children:[n.jsxs(\"div\",{className:\"relative flex justify-center\",children:[n.jsx(Le.div,{className:\"relative z-10\",initial:{scale:0,rotateY:0},animate:{scale:1,rotateY:[0,1080],transition:{scale:{duration:.8,ease:\"backOut\"},rotateY:{duration:4,ease:\"easeInOut\"}}},children:n.jsxs(\"div\",{className:\"relative\",children:[n.jsx(Le.div,{className:\"absolute inset-0 bg-yellow-400 blur-3xl opacity-20 rounded-full\",animate:{scale:[1,1.3,1],opacity:[.2,.4,.2]},transition:{duration:3,repeat:1/0,ease:\"easeInOut\"}}),n.jsxs(\"div\",{className:\"relative w-32 h-32 sm:w-44 sm:h-44 bg-gradient-to-br from-yellow-400 via-orange-500 to-yellow-600 rounded-[32px] sm:rounded-[48px] flex items-center justify-center shadow-[0_15px_40px_rgba(234,179,8,0.25)] border-4 border-white/20 transition-all\",children:[n.jsx(\"span\",{className:\"text-5xl sm:text-7xl drop-shadow-2xl transition-all\",children:h.icon}),n.jsx(\"div\",{className:\"absolute inset-0 bg-gradient-to-tr from-white/10 to-transparent pointer-events-none rounded-[28px] sm:rounded-[44px]\"})]})]})}),n.jsxs(\"div\",{className:\"absolute inset-0 z-20 flex justify-center items-center pointer-events-none\",children:[n.jsx(Le.div,{className:\"absolute w-32 h-32 sm:w-48 sm:h-48 bg-yellow-500/40 blur-[40px] sm:blur-[60px] rounded-full\",initial:{scale:0,opacity:0},animate:{scale:1.4,opacity:1},transition:{delay:.3,duration:1.2,ease:\"easeOut\"}}),n.jsx(Le.div,{className:\"absolute w-24 h-24 sm:w-36 sm:h-36 bg-indigo-500/30 blur-[30px] sm:blur-[45px] rounded-full -ml-8 -mt-6 sm:-ml-12 sm:-mt-10\",initial:{scale:0,opacity:0},animate:{scale:1.8,opacity:.8},transition:{delay:.4,duration:1.2,ease:\"easeOut\"}}),n.jsx(Le.div,{className:\"absolute w-20 h-20 sm:w-32 sm:h-32 bg-rose-500/30 blur-[25px] sm:blur-[40px] rounded-full ml-10 mt-8 sm:ml-16 sm:mt-12\",initial:{scale:0,opacity:0},animate:{scale:1.6,opacity:.8},transition:{delay:.5,duration:1.2,ease:\"easeOut\"}})]})]}),n.jsxs(Le.div,{className:\"text-center space-y-2 sm:space-y-4\",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:.6},children:[n.jsx(\"h3\",{className:\"text-lg sm:text-3xl font-black bg-gradient-to-r from-yellow-200 via-yellow-500 to-yellow-200 bg-clip-text text-transparent tracking-tight transition-all\",children:h.name}),n.jsx(\"p\",{className:\"text-slate-400 font-bold text-[11px] sm:text-sm leading-relaxed max-w-[200px] sm:max-w-[280px] mx-auto transition-all\",children:h.description})]}),n.jsx(Le.div,{className:\"flex justify-center\",initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},children:n.jsxs(\"div\",{className:\"flex items-center gap-3 sm:gap-4\",children:[n.jsx(\"div\",{className:\"h-px w-12 sm:w-20 bg-gradient-to-r from-transparent via-white/10 to-transparent\"}),n.jsx(\"div\",{className:\"w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full bg-yellow-500/50 blur-[1px] animate-pulse\"}),n.jsx(\"div\",{className:\"h-px w-12 sm:w-20 bg-gradient-to-r from-transparent via-white/10 to-transparent\"})]})}),n.jsxs(Le.div,{className:\"p-4 sm:p-8 bg-white/5 rounded-2xl sm:rounded-[32px] border border-white/5 relative overflow-hidden transition-all\",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:1},children:[n.jsx(\"div\",{className:\"absolute top-0 left-0 w-12 h-12 bg-indigo-500 blur-2xl opacity-5\"}),n.jsxs(\"div\",{className:\"flex items-start gap-3 sm:gap-6 relative z-10 text-left\",children:[n.jsx(\"span\",{className:\"text-xl sm:text-3xl pt-0 opacity-40\",children:'\"'}),n.jsxs(\"div\",{className:\"flex-1\",children:[n.jsx(\"p\",{className:\"text-[10px] sm:text-sm font-bold italic text-slate-300 leading-snug sm:leading-relaxed tracking-tight transition-all\",children:u.text}),n.jsxs(\"div\",{className:\"flex items-center gap-2 sm:gap-4 mt-3 sm:mt-6 transition-all\",children:[n.jsx(\"div\",{className:\"h-px flex-1 bg-white/5\"}),n.jsxs(\"p\",{className:\"text-[8px] sm:text-[10px] font-black text-slate-500 uppercase tracking-widest shrink-0\",children:[\"— \",u.author]})]})]})]})]})]})]})}):null}const Gp=({accounts:i,goals:l,liabilities:o,expenses:u,emergencyFundAmount:d=0})=>{const h=x.useMemo(()=>i.filter(f=>f.type===\"bank\"||f.type===\"cash\").reduce((f,w)=>f+w.balance,0),[i]),g=x.useMemo(()=>i.filter(f=>f.type===\"credit_card\").reduce((f,w)=>f+Math.abs(w.balance),0),[i]),N=x.useMemo(()=>{const f=o.reduce((A,T)=>A+(T.emiAmount||0),0),w=u.filter(A=>A.isRecurring).reduce((A,T)=>A+T.amount,0);return f+w},[o,u]),E=x.useMemo(()=>l.reduce((w,A)=>w+A.currentAmount,0)+(d||0),[l,d]),S=x.useMemo(()=>E+N,[E,N]),p=x.useMemo(()=>{const f=h-S;return Math.max(0,f)},[h,S]);return{totalBankBalance:h,totalCreditUsage:g,totalCommitments:N,shadowWalletTotal:E,totalReserved:S,availableToSpend:p}},Ki=({children:i,icon:l,variant:o=\"blue\",className:u,...d})=>{const h={blue:\"border-blue-500/50 text-blue-400 hover:border-blue-500 hover:shadow-[0_0_20px_rgba(59,130,246,0.4)] shadow-[0_0_10px_rgba(59,130,246,0.2)]\",green:\"border-emerald-500/50 text-emerald-400 hover:border-emerald-500 hover:shadow-[0_0_20px_rgba(16,185,129,0.4)] shadow-[0_0_10px_rgba(16,185,129,0.2)]\",purple:\"border-purple-500/50 text-purple-400 hover:border-purple-500 hover:shadow-[0_0_20px_rgba(168,85,247,0.4)] shadow-[0_0_10px_rgba(168,85,247,0.2)]\",rose:\"border-rose-500/50 text-rose-400 hover:border-rose-500 hover:shadow-[0_0_20px_rgba(244,63,94,0.4)] shadow-[0_0_10px_rgba(244,63,94,0.2)]\"};return n.jsxs(\"button\",{className:De(\"relative group flex items-center justify-center gap-2 px-6 h-11\",\"bg-[#0A141E]/80 backdrop-blur-md border-2 rounded-2xl transition-all duration-300\",\"font-mono font-bold uppercase tracking-widest text-[10px]\",\"hover:scale-[1.02] active:scale-[0.98]\",h[o],u),...d,children:[l&&n.jsx(l,{className:\"w-4 h-4 transition-all duration-700 ease-quantum group-hover:rotate-[720deg] active:-rotate-12\"}),n.jsx(\"span\",{children:i})]})};function oN({isOpen:i,onClose:l,accounts:o,goals:u,currency:d,destinationType:h,emergencyFund:g,onAllocate:N,liabilities:E=[],expenses:S=[]}){const[p,f]=x.useState(\"\"),[w,A]=x.useState(\"\"),[T,C]=x.useState(\"\"),[M,y]=x.useState(!1),[L,z]=x.useState(!1),{availableToSpend:j,totalBankBalance:G,shadowWalletTotal:ee,totalCommitments:Z}=Gp({accounts:o,goals:u,liabilities:E,expenses:S,emergencyFundAmount:g?.currentAmount||0});x.useEffect(()=>{if(i&&!p&&o.length>0){const k=o.filter(U=>U.type===\"bank\"||U.type===\"cash\");if(k.length>0){const U=k.find(Q=>Q.balance>=j)||[...k].sort((Q,ae)=>ae.balance-Q.balance)[0];U&&queueMicrotask(()=>{f(U.id)})}}},[i,j,o,p]);const _=o.find(k=>k.id===p),B=u.find(k=>k.id===w),J=parseFloat(T)||0,ne=()=>{if(j>0){if(C(j.toString()),h===\"goal\"&&!w&&u.length>0){const k=[...u].sort((U,Q)=>{const ae=new Date(U.targetDate).getTime(),v=new Date(Q.targetDate).getTime();if(ae!==v)return ae-v;const D=U.currentAmount/U.targetAmount,W=Q.currentAmount/Q.targetAmount;return D-W});A(k[0].id),ce.info(`Suggested: ${k[0].name} based on timeline & progress`,{icon:n.jsx(Ga,{className:\"w-4 h-4 text-blue-400\"})})}}else ce.error(\"No surplus liquidity available for auto-fill\")},F=()=>{if(!p){ce.error(\"Please select an account\");return}if(h===\"goal\"&&!w){ce.error(\"Please select a goal\");return}if(!T||J<=0){ce.error(\"Please enter a valid amount\");return}if(_&&J>_.balance){ce.error(\"Insufficient balance in selected account\");return}y(!0)},oe=()=>{N({accountId:p,destinationId:h===\"goal\"?w:\"emergency-fund\",amount:J,destinationType:h}),f(\"\"),A(\"\"),C(\"\"),y(!1),l()},ge=()=>{y(!1)},O=()=>{f(\"\"),A(\"\"),C(\"\"),y(!1),z(!1),l()};return n.jsx(us,{open:i,onOpenChange:O,children:n.jsx(ds,{className:\"max-w-md bg-black border-white/5 text-white p-0 custom-scrollbar sq-2xl overflow-hidden\",children:n.jsxs(\"div\",{className:\"max-h-[85vh] overflow-y-auto p-8 custom-scrollbar\",children:[n.jsxs(fs,{className:\"mb-6\",children:[n.jsx(ms,{className:\"text-xl font-black tracking-tight text-white mb-1\",children:h===\"goal\"?\"🎯 ALLOCATE TO GOAL\":\"🛡️ ALLOCATE TO RESERVE\"}),n.jsxs(hs,{className:\"text-slate-500 text-[10px] uppercase font-black tracking-widest\",children:[\"Move funds from account to \",h===\"goal\"?\"savings milestone\":\"emergency reserve\"]})]}),M?n.jsxs(\"div\",{className:\"space-y-6 py-4\",children:[n.jsx(\"div\",{className:\"text-center pt-2\",children:n.jsx(\"p\",{className:\"text-[10px] text-emerald-500 uppercase font-black tracking-[0.2em] animate-pulse\",children:\"Ready to Allocate Funds\"})}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"div\",{className:\"p-5 bg-white/5 sq-md border border-white/10 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 p-2 opacity-5\",children:n.jsx(zu,{className:\"w-8 h-8\"})}),n.jsx(\"p\",{className:\"text-[8px] text-slate-500 uppercase font-black tracking-widest mb-3 opacity-60\",children:\"Debit Source\"}),n.jsx(\"p\",{className:\"font-black text-sm text-white tracking-tight\",children:_?.name}),n.jsxs(\"div\",{className:\"mt-4 space-y-2.5\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-medium\",children:[n.jsx(\"span\",{className:\"text-slate-400 uppercase tracking-tighter\",children:\"Current Liquidity\"}),n.jsx(\"span\",{className:\"font-mono text-white\",children:Ne(_?.balance||0,d)})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-bold text-rose-500\",children:[n.jsx(\"span\",{className:\"uppercase tracking-tighter\",children:\"Debit Volume\"}),n.jsxs(\"span\",{className:\"font-mono\",children:[\"-\",Ne(J,d)]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"flex justify-between text-xs font-black\",children:[n.jsx(\"span\",{className:\"text-slate-500 uppercase tracking-widest\",children:\"Post-Debit Projection\"}),n.jsx(\"span\",{className:\"text-blue-400 font-mono\",children:Ne((_?.balance||0)-J,d)})]})]})]}),n.jsx(\"div\",{className:\"flex justify-center -my-2 relative z-10\",children:n.jsx(\"div\",{className:\"w-10 h-10 bg-blue-600 sq-md flex items-center justify-center shadow-[0_0_20px_rgba(37,99,235,0.3)] border border-blue-400/20\",children:n.jsx(P0,{className:\"w-5 h-5 text-white\"})})}),n.jsxs(\"div\",{className:`p-5 sq-md border relative overflow-hidden ${h===\"goal\"?\"bg-emerald-500/5 border-emerald-500/20\":\"bg-blue-500/5 border-blue-500/20\"}`,children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 p-2 opacity-10\",children:h===\"goal\"?n.jsx(Ga,{className:\"w-8 h-8 text-emerald-500\"}):n.jsx(Hn,{className:\"w-8 h-8 text-blue-500\"})}),n.jsx(\"p\",{className:\"text-[8px] text-slate-500 uppercase font-black tracking-widest mb-3 opacity-60\",children:\"Credit Destination\"}),n.jsxs(\"div\",{className:\"flex items-center gap-2 mb-4\",children:[n.jsx(\"span\",{className:\"text-xl\",children:h===\"goal\"?B?.emoji:\"🛡️\"}),n.jsx(\"p\",{className:\"font-black text-sm text-white tracking-tight\",children:h===\"goal\"?B?.name:\"Emergency Reserve\"})]}),n.jsxs(\"div\",{className:\"space-y-2.5\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-medium\",children:[n.jsx(\"span\",{className:\"text-slate-400 uppercase tracking-tighter\",children:\"Current Level\"}),n.jsx(\"span\",{className:\"font-mono text-white\",children:Ne((h===\"goal\"?B?.currentAmount:g?.currentAmount)||0,d)})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-bold text-emerald-400\",children:[n.jsx(\"span\",{className:\"uppercase tracking-tighter\",children:\"Credit Volume\"}),n.jsxs(\"span\",{className:\"font-mono\",children:[\"+\",Ne(J,d)]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"flex justify-between text-xs font-black\",children:[n.jsx(\"span\",{className:\"text-slate-500 uppercase tracking-widest\",children:\"Post-Credit Value\"}),n.jsx(\"span\",{className:\"text-emerald-400 font-mono\",children:Ne(((h===\"goal\"?B?.currentAmount:g?.currentAmount)||0)+J,d)})]})]})]})]}),n.jsx(\"div\",{className:\"p-4 bg-amber-500/5 border border-amber-500/20 sq-md\",children:n.jsxs(\"div\",{className:\"flex gap-3\",children:[n.jsx(Eu,{className:\"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5\"}),n.jsxs(\"div\",{className:\"text-[10px]\",children:[n.jsx(\"p\",{className:\"font-black text-amber-400 uppercase tracking-widest mb-1\",children:\"Node Equilibrium Warning\"}),n.jsxs(\"p\",{className:\"text-amber-500/70 font-bold leading-relaxed\",children:[\"Net Liquidity and \",_?.name,\" reserves will be reduced by \",Ne(J,d),\" immediately. This action is final.\"]})]})]})}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Ki,{onClick:ge,className:\"flex-1 h-12 text-slate-500 hover:text-white border-white/5 font-black tracking-[0.2em]\",children:\"Re-Configure\"}),n.jsx(Ki,{onClick:oe,className:\"flex-1 h-12 bg-emerald-600/20 text-emerald-400 border-emerald-500/30 font-black tracking-[0.2em] shadow-lg shadow-emerald-500/10\",children:\"Execute Move\"})]})]}):n.jsxs(\"div\",{className:\"space-y-6\",children:[j>0&&n.jsxs(\"div\",{className:\"relative group overflow-hidden sq-xl border border-emerald-500/20 bg-emerald-500/5 p-5 transition-all hover:bg-emerald-500/10 mb-2\",children:[n.jsx(Qu,{variant:\"savings\"}),n.jsxs(\"div\",{className:\"relative z-10 flex flex-col gap-4\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-10 h-10 bg-emerald-500/20 sq-md flex items-center justify-center border border-emerald-500/30\",children:n.jsx(Ga,{className:\"w-5 h-5 text-emerald-400\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-[9px] text-emerald-500/70 font-black uppercase tracking-widest\",children:\"Surplus Detected\"}),n.jsx(\"h4\",{className:\"text-xl font-black text-white tabular-nums\",children:Ne(j,d)})]})]}),n.jsx(\"button\",{onClick:()=>z(!L),className:\"p-2 hover:bg-white/5 rounded-full transition-colors text-slate-500 hover:text-white\",title:\"Show Calculation\",children:L?n.jsx(_r,{className:\"w-4 h-4\"}):n.jsx(K0,{className:\"w-4 h-4\"})})]}),L&&n.jsxs(\"div\",{className:\"py-3 border-t border-emerald-500/10 space-y-2 animate-in fade-in slide-in-from-top-2 duration-300\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-emerald-500/60 font-medium\",children:[n.jsx(\"span\",{children:\"Total Liquidity\"}),n.jsx(\"span\",{children:Ne(G,d)})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-rose-500/60 font-medium\",children:[n.jsx(\"span\",{children:\"Shadow Wallet (Goals + EF)\"}),n.jsxs(\"span\",{children:[\"-\",Ne(ee,d)]})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-rose-500/60 font-medium pb-2 border-b border-emerald-500/10\",children:[n.jsx(\"span\",{children:\"Total Commitments (Bills)\"}),n.jsxs(\"span\",{children:[\"-\",Ne(Z,d)]})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-emerald-400 font-bold uppercase pt-1\",children:[n.jsx(\"span\",{children:\"Available Safety Margin\"}),n.jsx(\"span\",{children:Ne(j,d)})]})]}),n.jsx(Ki,{onClick:()=>{ne(),_&&j>_.balance&&ce.warning(\"Surplus exceeds selected account balance. Source adjusted.\")},className:\"w-full h-11 bg-emerald-500/20 text-emerald-400 border-emerald-500/30 font-black tracking-widest\",children:\"Allocate All Surplus\"})]})]}),n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(ye,{htmlFor:\"allocate-from-account\",className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 mb-2 block\",children:\"Source Node\"}),n.jsxs(Ut,{value:p,onValueChange:f,children:[n.jsx(Bt,{id:\"allocate-from-account\",name:\"fromAccountId\",className:\"bg-black border-white/5 sq-md h-14 text-white focus:ring-1 focus:ring-blue-500/50\",children:n.jsx(It,{placeholder:\"Select Capital Source\"})}),n.jsx(qt,{className:\"bg-black border-white/10 text-white sq-xl\",children:o.map(k=>n.jsx(qe,{value:k.id,className:\"hover:bg-white/5\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between w-full\",children:[n.jsxs(\"span\",{children:[k.icon,\" \",k.name]}),n.jsx(\"span\",{className:\"text-[10px] text-slate-500 ml-4 font-mono\",children:Ne(k.balance,d)})]})},k.id))})]}),_&&n.jsxs(\"p\",{className:\"text-[10px] text-slate-500 mt-2 italic px-1\",children:[\"Available Liquidity: \",Ne(_.balance,d)]})]}),h===\"goal\"?n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(ye,{htmlFor:\"allocate-to-goal\",className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 mb-2 block\",children:\"Target Milestone\"}),n.jsxs(Ut,{value:w,onValueChange:A,children:[n.jsx(Bt,{id:\"allocate-to-goal\",name:\"toGoalId\",className:\"bg-black border-white/5 sq-md h-14 text-white focus:ring-1 focus:ring-emerald-500/50\",children:n.jsx(It,{placeholder:\"Choose Destination Goal\"})}),n.jsx(qt,{className:\"bg-black border-white/10 text-white sq-xl\",children:u.map(k=>{const U=k.currentAmount/k.targetAmount*100;return n.jsx(qe,{value:k.id,className:\"hover:bg-white/5\",children:n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(\"span\",{className:\"text-lg\",children:k.emoji}),n.jsxs(\"div\",{className:\"min-w-0\",children:[n.jsx(\"div\",{className:\"font-bold text-xs uppercase tracking-tight\",children:k.name}),n.jsxs(\"div\",{className:\"text-[9px] text-slate-500 font-mono\",children:[Math.round(U),\"% SYNCHRONIZED • \",Ne(k.currentAmount,d)]})]})]})},k.id)})})]})]}):n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(ye,{className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 mb-2 block\",children:\"Stability Reserve\"}),n.jsx(\"div\",{className:\"p-4 bg-white/5 border border-white/10 sq-md\",children:n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-10 h-10 bg-blue-500/10 sq-md flex items-center justify-center border border-blue-500/20\",children:\"🛡️\"}),n.jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[n.jsx(\"p\",{className:\"font-black text-xs uppercase tracking-widest text-white\",children:\"Emergency Fund\"}),g&&n.jsxs(\"p\",{className:\"text-[9px] text-slate-500 font-mono mt-1\",children:[Ne(g.currentAmount,d),\" / \",Ne(g.targetAmount,d)]})]})]})})]}),n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(\"div\",{className:\"flex justify-between items-center mb-1\",children:n.jsx(ye,{htmlFor:\"allocate-amount\",className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 block\",children:\"Contribution Volume\"})}),n.jsxs(\"div\",{className:\"relative\",children:[n.jsx(\"span\",{className:\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500\",children:d===\"INR\"?\"₹\":\"$\"}),n.jsx(wt,{id:\"allocate-amount\",name:\"amount\",type:\"number\",placeholder:\"0\",value:T,onChange:k=>C(k.target.value),className:\"pl-8 bg-black border-white/5 h-12\",min:\"0\",step:\"0.01\"})]}),_&&J>_.balance&&n.jsxs(\"div\",{className:\"flex items-center gap-2 text-sm text-red-600\",children:[n.jsx(Eu,{className:\"w-4 h-4\"}),n.jsx(\"span\",{children:\"Amount exceeds available balance\"})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Ki,{onClick:O,className:\"flex-1 h-12 text-slate-500 hover:text-white border-white/5 font-black tracking-[0.2em]\",children:\"Abort\"}),n.jsx(Ki,{onClick:F,className:\"flex-1 h-12 bg-blue-600/20 text-blue-400 border-blue-500/30 font-black tracking-[0.2em] shadow-lg shadow-blue-500/10\",children:\"Preview Mode\"})]})]})]})})})}const cN=[{name:\"HDFC Bank\",icon:\"🏦\",color:\"#1d4ed8\",type:\"bank\"},{name:\"ICICI Bank\",icon:\"🏦\",color:\"#ea580c\",type:\"bank\"},{name:\"State Bank of India\",icon:\"🏦\",color:\"#2563eb\",type:\"bank\"},{name:\"Axis Bank\",icon:\"🏦\",color:\"#9d174d\",type:\"bank\"},{name:\"Kotak Mahindra Bank\",icon:\"🏦\",color:\"#dc2626\",type:\"bank\"},{name:\"Bank of America\",icon:\"🏦\",color:\"#0033aa\",type:\"bank\"},{name:\"Chase Bank\",icon:\"🏦\",color:\"#117aca\",type:\"bank\"},{name:\"Wells Fargo\",icon:\"🏦\",color:\"#d71e28\",type:\"bank\"},{name:\"HSBC\",icon:\"🏦\",color:\"#db0011\",type:\"bank\"},{name:\"Barclays\",icon:\"🏦\",color:\"#00aeef\",type:\"bank\"},{name:\"Standard Chartered\",icon:\"🏦\",color:\"#00945e\",type:\"bank\"},{name:\"Citibank\",icon:\"🏦\",color:\"#003b70\",type:\"bank\"},{name:\"DBS Bank\",icon:\"🏦\",color:\"#ff0000\",type:\"bank\"},{name:\"Federal Bank\",icon:\"🏦\",color:\"#0b5a91\",type:\"bank\"},{name:\"American Express\",icon:\"💳\",color:\"#006fcf\",type:\"credit_card\"},{name:\"Discover\",icon:\"💳\",color:\"#ff6600\",type:\"credit_card\"},{name:\"Capital One\",icon:\"💳\",color:\"#d22e2e\",type:\"credit_card\"},{name:\"Goldman Sachs\",icon:\"🏦\",color:\"#725a34\",type:\"bank\"},{name:\"Morgan Stanley\",icon:\"🏦\",color:\"#000033\",type:\"bank\"},{name:\"Apple Card\",icon:\"💳\",color:\"#000000\",type:\"credit_card\"},{name:\"PayPal\",icon:\"💳\",color:\"#003087\",type:\"credit_card\"},{name:\"Revolut\",icon:\"💳\",color:\"#000000\",type:\"credit_card\"},{name:\"Monzo\",icon:\"💳\",color:\"#ff4d4f\",type:\"credit_card\"}];function uN({accounts:i,currency:l,onCreateAccount:o,onUpdateAccount:u,onDeleteAccount:d}){const[h,g]=x.useState(!1),[N,E]=x.useState(null),[S,p]=x.useState({name:\"\",type:\"bank\",balance:0,color:Wc[0],icon:eu[0].value,creditLimit:0,safeLimitPercentage:30,serviceChargePercentage:0,statementDate:1}),[f,w]=x.useState([]),A=j=>{j?(E(j),p({name:j.name,type:j.type,balance:j.balance,color:j.color,icon:j.icon,creditLimit:j.creditLimit||0,safeLimitPercentage:j.safeLimitPercentage||30,serviceChargePercentage:j.serviceChargePercentage||0,statementDate:j.statementDate||1})):(E(null),p({name:\"\",type:\"bank\",balance:0,color:Wc[0],icon:eu[0].value,creditLimit:0,safeLimitPercentage:30,serviceChargePercentage:0,statementDate:1})),w([]),g(!0)},T=j=>{if(p({...S,name:j}),j.length>1){const G=cN.filter(ee=>ee.name.toLowerCase().includes(j.toLowerCase())).slice(0,4);w(G)}else w([])},C=j=>{p({...S,name:j.name,type:j.type,icon:j.icon,color:j.color}),w([])},M=async j=>{if(j.preventDefault(),!S.name.trim()){ce.error(\"Please enter an account name\");return}try{N?await u(N.id,S):await o(S),g(!1)}catch(G){console.error(\"Error saving account:\",G)}},y=async j=>{if(confirm(\"Are you sure you want to delete this account? This action cannot be undone.\"))try{await d(j)}catch(G){console.error(\"Error deleting account:\",G)}};return n.jsxs(\"div\",{className:\"space-y-12 animate-in fade-in slide-in-from-bottom-4 duration-700 px-4 pb-24\",children:[n.jsxs(\"div\",{className:\"flex items-end justify-between gap-6\",children:[n.jsxs(\"div\",{className:\"min-w-0\",children:[n.jsx(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tight leading-none mb-3 truncate\",children:\"Accounts & Cards\"}),n.jsxs(\"div\",{className:\"flex flex-wrap gap-2 mb-3\",children:[n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-emerald-500 bg-emerald-500/10 px-2 py-0.5 rounded-lg border border-emerald-500/20 whitespace-nowrap\",children:[i.filter(j=>j.type===\"bank\").length,\" Banks\"]}),n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-rose-500 bg-rose-500/10 px-2 py-0.5 rounded-lg border border-rose-500/20 whitespace-nowrap\",children:[i.filter(j=>j.type===\"credit_card\").length,\" Credit\"]}),n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-amber-500 bg-amber-500/10 px-2 py-0.5 rounded-lg border border-amber-500/20 whitespace-nowrap\",children:[i.filter(j=>j.type===\"cash\").length,\" Cash\"]}),n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-blue-500 bg-blue-500/10 px-2 py-0.5 rounded-lg border border-blue-500/20 whitespace-nowrap\",children:[i.filter(j=>j.type===\"investment\").length,\" Holding\"]})]}),n.jsx(\"p\",{className:\"text-slate-500 font-bold max-w-md text-[10px] truncate\",children:\"Monitor liquidity across core reservoirs and credit pools.\"})]}),n.jsxs(Re,{onClick:()=>A(),className:\"bg-emerald-600 hover:bg-emerald-500 text-white rounded-xl px-6 h-12 font-bold shadow-lg shadow-emerald-600/20 transition-all active:scale-95 shrink-0\",children:[n.jsx(kr,{className:\"w-4 h-4 sm:mr-2\"}),n.jsx(\"span\",{className:\"hidden sm:inline\",children:\"Add Account\"}),n.jsx(\"span\",{className:\"sm:hidden\",children:\"Add\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(Ny,{className:\"w-3.5 h-3.5\"}),\"Bank Accounts\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(j=>j.type===\"bank\").map(j=>n.jsx(L,{account:j},j.id)),i.filter(j=>j.type===\"bank\").length===0&&n.jsx(z,{message:\"No bank accounts detected.\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(Sy,{className:\"w-3.5 h-3.5\"}),\"Credit Pools (Cards)\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(j=>j.type===\"credit_card\").map(j=>n.jsx(L,{account:j},j.id)),i.filter(j=>j.type===\"credit_card\").length===0&&n.jsx(z,{message:\"No credit pools detected.\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(zu,{className:\"w-3.5 h-3.5\"}),\"Cash in Hand\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(j=>j.type===\"cash\").map(j=>n.jsx(L,{account:j},j.id)),i.filter(j=>j.type===\"cash\").length===0&&n.jsx(z,{message:\"No physical liquid reservoirs detected.\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(qn,{className:\"w-3.5 h-3.5\"}),\"Investment Holding Nodes\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(j=>j.type===\"investment\").map(j=>n.jsx(L,{account:j},j.id)),i.filter(j=>j.type===\"investment\").length===0&&n.jsx(\"div\",{className:\"md:col-span-2 lg:col-span-3 p-8 border border-dashed border-white/5 squircle-22 flex items-center justify-center text-slate-600 font-bold text-xs\",children:\"No investment nodes detected. Link them to track growth separately.\"})]})]}),n.jsx(us,{open:h,onOpenChange:g,children:n.jsxs(ds,{className:\"max-w-md max-h-[90vh] overflow-y-auto bg-slate-950 border-white/10 text-white squircle-22 p-8 custom-scrollbar\",children:[n.jsxs(fs,{children:[n.jsx(ms,{className:\"text-3xl font-black tracking-tight text-white mb-2\",children:N?\"Refine Account\":\"New Liquidity Reservoir\"}),n.jsx(hs,{className:\"text-slate-500 font-bold mb-6\",children:\"Establish a new liquidity pool in the Obsidian system.\"})]}),n.jsxs(\"form\",{onSubmit:M,className:\"space-y-8\",children:[n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"name\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Account Identity\"}),n.jsx(wt,{id:\"name\",name:\"name\",value:S.name,onChange:j=>T(j.target.value),placeholder:\"e.g. Mercury Checking\",required:!0,className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white focus:ring-emerald-500/50\",autoComplete:\"off\"}),f.length>0&&n.jsxs(\"div\",{className:\"mt-3 p-4 bg-indigo-500/5 border border-indigo-500/10 squircle-12 flex items-start gap-4 animate-in fade-in zoom-in-95 duration-300\",children:[n.jsx(Ga,{className:\"w-4 h-4 text-indigo-400 mt-1 flex-shrink-0\"}),n.jsxs(\"div\",{className:\"flex-1\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-widest text-indigo-300 mb-3 opacity-60\",children:\"Intelligence Suggested\"}),n.jsx(\"div\",{className:\"grid grid-cols-1 gap-2\",children:f.map(j=>n.jsxs(\"button\",{type:\"button\",onClick:()=>C(j),className:\"flex items-center gap-3 p-2.5 squircle-12 bg-white/5 hover:bg-white/10 transition-all group border border-white/5\",children:[n.jsx(\"span\",{className:\"text-lg group-hover:scale-110 transition-transform\",children:j.icon}),n.jsx(\"span\",{className:\"text-xs font-bold text-slate-300 group-hover:text-white transition-colors\",children:j.name})]},j.name))})]})]})]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 md:grid-cols-3 gap-4\",children:[n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${S.type===\"bank\"?\"border-emerald-500 bg-emerald-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>p({...S,type:\"bank\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-emerald-500/20 flex items-center justify-center text-xl mb-2\",children:\"🏦\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Bank Reservoir\"})]}),n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${S.type===\"credit_card\"?\"border-rose-500 bg-rose-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>p({...S,type:\"credit_card\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-rose-500/20 flex items-center justify-center text-xl mb-2\",children:\"💳\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Credit Pool\"})]}),n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${S.type===\"cash\"?\"border-amber-500 bg-amber-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>p({...S,type:\"cash\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-amber-500/20 flex items-center justify-center text-xl mb-2\",children:\"💵\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Cash in Hand\"})]}),n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${S.type===\"investment\"?\"border-blue-500 bg-blue-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>p({...S,type:\"investment\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-blue-500/20 flex items-center justify-center text-xl mb-2\",children:\"📈\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Growth Node\"})]})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"balance\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:S.type===\"bank\"||S.type===\"cash\"||S.type===\"investment\"?\"Initial Liquidity\":\"Current Spent Balance\"}),n.jsx(Ha,{id:\"balance\",name:\"balance\",value:S.balance,onChange:j=>p({...S,balance:parseFloat(j)||0}),placeholder:\"0.00\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]}),S.type===\"credit_card\"&&n.jsxs(\"div\",{className:\"space-y-6 animate-in slide-in-from-top-4 duration-500\",children:[n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"creditLimit\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Total Credit Limit\"}),n.jsx(Ha,{id:\"creditLimit\",name:\"creditLimit\",value:S.creditLimit,onChange:j=>p({...S,creditLimit:parseFloat(j)||0}),placeholder:\"e.g. 100000\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"safeLimit\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Safe Use Threshold (%)\"}),n.jsx(Ha,{id:\"safeLimit\",name:\"safeLimitPercentage\",value:S.safeLimitPercentage,onChange:j=>p({...S,safeLimitPercentage:parseFloat(j)||30}),placeholder:\"30\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"serviceCharge\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Svc Charge (%)\"}),n.jsx(Ha,{id:\"serviceCharge\",name:\"serviceChargePercentage\",value:S.serviceChargePercentage,onChange:j=>p({...S,serviceChargePercentage:parseFloat(j)||0}),placeholder:\"0.0\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"statementDate\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Statement Date\"}),n.jsxs(Ut,{value:S.statementDate.toString(),onValueChange:j=>p({...S,statementDate:parseInt(j)}),children:[n.jsx(Bt,{id:\"statementDate\",name:\"statementDate\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",children:n.jsx(It,{})}),n.jsx(qt,{className:\"bg-slate-900 border-white/10 text-white\",children:[...Array(31)].map((j,G)=>n.jsx(qe,{value:(G+1).toString(),children:G+1},G+1))})]})]})]})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"System Icon\"}),n.jsx(\"div\",{className:\"grid grid-cols-6 sm:grid-cols-9 gap-2\",children:eu.map(j=>n.jsx(\"button\",{type:\"button\",onClick:()=>p({...S,icon:j.value}),className:`w-10 h-10 squircle-12 flex items-center justify-center text-lg border-2 transition-all ${S.icon===j.value?\"border-emerald-500 bg-emerald-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,children:j.value},j.value))})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Brand Color\"}),n.jsx(\"div\",{className:\"flex flex-wrap gap-3\",children:Wc.map(j=>{const G={style:{\"--btn-color\":j}};return n.jsx(\"button\",{type:\"button\",onClick:()=>p({...S,color:j}),\"aria-label\":`Select color ${j}`,className:`w-8 h-8 rounded-full border-4 transition-all bg-[length:100%_100%] bg-[var(--btn-color)] ${S.color===j?\"border-white scale-110 shadow-lg shadow-white/20\":\"border-transparent hover:scale-105\"}`,...G},j)})})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Re,{type:\"button\",variant:\"ghost\",onClick:()=>g(!1),className:\"flex-1 h-14 squircle-12 font-bold text-slate-500 hover:text-white\",children:\"Abort\"}),n.jsx(Re,{type:\"submit\",className:\"flex-1 h-14 squircle-12 bg-emerald-600 hover:bg-emerald-500 text-white font-black shadow-lg shadow-emerald-600/20\",children:N?\"Update Account\":\"Ignite Account\"})]})]})]})})]});function L({account:j}){const G=j.type===\"credit_card\",ee=G?(j.creditLimit||0)*(j.safeLimitPercentage||30)/100:0,Z=G&&j.creditLimit?Math.abs(j.balance)/j.creditLimit*100:0,_=G&&Z<=(j.safeLimitPercentage||30);return n.jsxs(Ot,{className:\"p-6 bg-slate-900/40 border-white/5 squircle-22 border hover:bg-slate-900/60 transition-all duration-300 group relative overflow-hidden\",children:[(()=>{const B={style:{\"--card-glow\":j.color}};return n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20 bg-[var(--card-glow)]\",...B})})(),n.jsxs(\"div\",{className:\"flex items-start justify-between mb-8 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[(()=>{const B={style:{\"--icon-bg\":j.color+\"15\"}};return n.jsx(\"div\",{className:\"w-16 h-16 squircle-12 flex items-center justify-center text-3xl shadow-inner border border-white/5 group-hover:scale-105 transition-transform bg-[var(--icon-bg)]\",...B,children:j.icon})})(),n.jsxs(\"div\",{className:\"min-w-0\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100 truncate\",children:j.name}),n.jsxs(\"div\",{className:\"flex items-center gap-1.5 mt-1\",children:[n.jsx(\"div\",{className:`w-1.5 h-1.5 rounded-full ${G?_?\"bg-indigo-500\":\"bg-rose-500\":\"bg-emerald-500\"}`}),n.jsx(\"span\",{className:\"text-[10px] uppercase font-black tracking-widest text-slate-500\",children:G?\"Credit Pool\":\"Bank Account\"})]})]})]}),n.jsxs(\"div\",{className:\"flex gap-2\",children:[n.jsx(Re,{variant:\"ghost\",title:\"Edit Account\",size:\"sm\",onClick:()=>A(j),className:\"w-8 h-8 p-0 squircle-12 hover:bg-white/5 text-slate-600 hover:text-white transition-all\",children:n.jsx(Cy,{className:\"w-3.5 h-3.5\"})}),n.jsx(Re,{variant:\"ghost\",title:\"Delete Account\",size:\"sm\",onClick:()=>y(j.id),className:\"w-8 h-8 p-0 squircle-12 hover:bg-rose-500/10 text-slate-600 hover:text-rose-400 transition-all\",children:n.jsx(tl,{className:\"w-3.5 h-3.5\"})})]})]}),n.jsxs(\"div\",{className:\"pt-6 border-t border-white/5 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-end\",children:[n.jsxs(\"div\",{className:\"space-y-1\",children:[n.jsx(\"p\",{className:\"text-[10px] uppercase font-black tracking-widest text-slate-600\",children:G?\"Current Obligation\":\"Available Liquidity\"}),(()=>{const B={style:{\"--balance-color\":j.color}};return n.jsx(\"h4\",{className:\"text-2xl font-black tabular-nums tracking-tight text-[var(--balance-color)]\",...B,children:Ne(j.balance,l)})})()]}),G&&j.creditLimit?n.jsxs(\"div\",{className:\"text-right\",children:[n.jsx(\"p\",{className:\"text-[9px] font-black text-slate-600 uppercase mb-1\",children:\"Limit Use\"}),n.jsxs(\"p\",{className:`text-xs font-black tabular-nums ${_?\"text-indigo-400\":\"text-rose-400\"}`,children:[Z.toFixed(1),\"%\"]})]}):n.jsx(\"div\",{className:\"bg-white/5 px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest text-slate-500 border border-white/5\",children:\"Synced\"})]}),G&&j.creditLimit&&n.jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-white/5 flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"space-y-1\",children:[n.jsx(\"p\",{className:\"text-[8px] font-black text-slate-700 uppercase\",children:\"Safe Threshold\"}),n.jsx(\"p\",{className:\"text-[10px] font-black text-slate-500\",children:Ne(ee,l)})]}),j.serviceChargePercentage?n.jsxs(\"div\",{className:\"text-right space-y-1\",children:[n.jsx(\"p\",{className:\"text-[8px] font-black text-slate-700 uppercase\",children:\"Svc Charge\"}),n.jsxs(\"p\",{className:\"text-[10px] font-black text-slate-500\",children:[j.serviceChargePercentage,\"%\"]})]}):null,G&&j.statementDate&&n.jsxs(\"div\",{className:\"text-right space-y-1 ml-auto\",children:[n.jsx(\"p\",{className:\"text-[8px] font-black text-slate-700 uppercase\",children:\"Statement\"}),n.jsxs(\"p\",{className:\"text-[10px] font-black text-slate-500\",children:[\"Day \",j.statementDate]})]})]})]})]})}function z({message:j}){return n.jsx(\"div\",{className:\"py-12 text-center bg-slate-800/20 squircle-22 border border-dashed border-white/10 col-span-full\",children:n.jsx(\"p\",{className:\"text-sm text-slate-500 font-bold\",children:j})})}}function dN({isOpen:i,onClose:l,accounts:o,currency:u,onTransfer:d}){const[h,g]=x.useState(\"\"),[N,E]=x.useState(\"\"),[S,p]=x.useState(\"\"),[f,w]=x.useState(!1),A=o.find(z=>z.id===h),T=o.find(z=>z.id===N),C=parseFloat(S)||0,M=()=>{if(!h){ce.error(\"Please select source reservoir\");return}if(!N){ce.error(\"Please select destination reservoir\");return}if(h===N){ce.error(\"Source and destination must be different\");return}if(!S||C<=0){ce.error(\"Please enter a valid amount\");return}if(A&&C>A.balance){ce.error(\"Insufficient funds in source reservoir\");return}w(!0)},y=()=>{d(h,N,C),L()},L=()=>{g(\"\"),E(\"\"),p(\"\"),w(!1),l()};return n.jsx(us,{open:i,onOpenChange:L,children:n.jsxs(ds,{className:\"max-w-md max-h-[90vh] overflow-y-auto bg-[#020408] border-white/5 p-0 shadow-2xl custom-scrollbar text-white\",children:[n.jsxs(\"div\",{className:\"px-8 pt-10 pb-8 border-b border-white/5 relative overflow-hidden bg-indigo-500/5\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 blur-[60px] opacity-20 -mr-16 -mt-16 bg-indigo-500\"}),n.jsxs(fs,{className:\"relative z-10\",children:[n.jsxs(ms,{className:\"text-2xl font-black tracking-tighter text-slate-100 flex items-center gap-3\",children:[n.jsx(Au,{className:\"w-6 h-6 text-indigo-400\"}),\"Capital Migration\"]}),n.jsx(hs,{className:\"text-slate-500 font-bold text-[10px] uppercase tracking-[0.2em] mt-1\",children:\"Transfer between core liquidity reservoirs\"})]})]}),n.jsx(\"div\",{className:\"p-8\",children:f?n.jsxs(\"div\",{className:\"space-y-6 animate-in fade-in zoom-in-95 duration-300\",children:[n.jsxs(\"div\",{className:\"p-6 bg-slate-900/50 border border-white/5 rounded-3xl space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between gap-4\",children:[n.jsxs(\"div\",{className:\"flex-1 text-center space-y-2\",children:[n.jsx(\"div\",{className:\"w-12 h-12 rounded-2xl bg-slate-800 border border-white/10 flex items-center justify-center text-2xl mx-auto\",children:A?.icon}),n.jsx(\"p\",{className:\"text-[10px] font-black uppercase text-slate-500 truncate\",children:A?.name})]}),n.jsxs(\"div\",{className:\"flex flex-col items-center gap-1\",children:[n.jsx(Au,{className:\"w-6 h-6 text-indigo-400 animate-pulse\"}),n.jsx(\"p\",{className:\"text-[10px] font-black text-indigo-400\",children:Ne(C,u)})]}),n.jsxs(\"div\",{className:\"flex-1 text-center space-y-2\",children:[n.jsx(\"div\",{className:\"w-12 h-12 rounded-2xl bg-slate-800 border border-white/10 flex items-center justify-center text-2xl mx-auto\",children:T?.icon}),n.jsx(\"p\",{className:\"text-[10px] font-black uppercase text-slate-500 truncate\",children:T?.name})]})]}),n.jsxs(\"div\",{className:\"space-y-4 pt-4 border-t border-white/5\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-center text-xs\",children:[n.jsx(\"span\",{className:\"text-slate-500 font-bold\",children:\"Source New Balance\"}),n.jsx(\"span\",{className:\"text-rose-400 font-black\",children:Ne((A?.balance||0)-C,u)})]}),n.jsxs(\"div\",{className:\"flex justify-between items-center text-xs\",children:[n.jsx(\"span\",{className:\"text-slate-500 font-bold\",children:\"Dest. New Balance\"}),n.jsx(\"span\",{className:\"text-emerald-400 font-black\",children:Ne((T?.balance||0)+C,u)})]})]})]}),n.jsxs(\"div\",{className:\"p-4 bg-amber-500/5 border border-amber-500/10 rounded-2xl flex gap-3\",children:[n.jsx(Ar,{className:\"w-5 h-5 text-amber-500 flex-shrink-0\"}),n.jsx(\"p\",{className:\"text-[10px] text-amber-200/60 font-medium leading-relaxed\",children:\"Notice: This transfer will instantly adjust the balance of both accounts. This action is recorded in your transaction history.\"})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Re,{variant:\"ghost\",onClick:()=>w(!1),className:\"flex-1 h-12 rounded-2xl text-slate-500 font-bold hover:bg-white/5\",children:\"Back\"}),n.jsx(Re,{onClick:y,className:\"flex-1 h-12 rounded-2xl bg-indigo-600 hover:bg-indigo-500 text-white font-black shadow-lg shadow-indigo-600/20 transition-all active:scale-95\",children:\"Confirm Migration\"})]})]}):n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(ye,{htmlFor:\"source-reservoir\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Source Reservoir\"}),n.jsxs(Ut,{value:h,onValueChange:g,children:[n.jsx(Bt,{id:\"source-reservoir\",className:\"h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-200 font-bold\",children:n.jsx(It,{placeholder:\"Select source\"})}),n.jsx(qt,{className:\"bg-slate-900 border-white/5 max-h-[40vh]\",children:o.map(z=>n.jsx(qe,{value:z.id,className:\"focus:bg-white/5 focus:text-white\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between w-full pr-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-xl\",children:z.icon}),n.jsx(\"span\",{children:z.name})]}),n.jsx(\"span\",{className:\"text-xs font-black text-slate-500\",children:Ne(z.balance,u)})]})},z.id))})]})]}),n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(ye,{htmlFor:\"dest-reservoir\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Destination Reservoir\"}),n.jsxs(Ut,{value:N,onValueChange:E,children:[n.jsx(Bt,{id:\"dest-reservoir\",className:\"h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-200 font-bold\",children:n.jsx(It,{placeholder:\"Select destination\"})}),n.jsx(qt,{className:\"bg-slate-900 border-white/5 max-h-[40vh]\",children:o.map(z=>n.jsx(qe,{value:z.id,className:\"focus:bg-white/5 focus:text-white\",disabled:z.id===h,children:n.jsxs(\"div\",{className:\"flex items-center justify-between w-full pr-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-xl\",children:z.icon}),n.jsx(\"span\",{children:z.name})]}),n.jsx(\"span\",{className:\"text-xs font-black text-slate-500\",children:Ne(z.balance,u)})]})},z.id))})]})]}),n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(ye,{htmlFor:\"migration-amount\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Capital Amount\"}),n.jsxs(\"div\",{className:\"relative group\",children:[n.jsx(\"div\",{className:\"absolute left-5 top-1/2 -translate-y-1/2 text-slate-500 font-bold group-focus-within:text-indigo-400 transition-colors\",children:u===\"INR\"?\"₹\":\"$\"}),n.jsx(wt,{id:\"migration-amount\",name:\"amount\",type:\"number\",placeholder:\"0.00\",value:S,onChange:z=>p(z.target.value),className:\"pl-12 h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-100 font-black text-xl\"})]}),A&&C>A.balance&&n.jsxs(\"div\",{className:\"flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-rose-400 ml-1 animate-in slide-in-from-top-1\",children:[n.jsx(Eu,{className:\"w-3 h-3\"}),n.jsx(\"span\",{children:\"Insufficient stability in source reservoir\"})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Re,{variant:\"ghost\",onClick:L,className:\"flex-1 h-12 rounded-2xl text-slate-500 font-bold hover:bg-white/5\",children:\"Cancel\"}),n.jsx(Re,{onClick:M,className:\"flex-1 h-12 rounded-2xl bg-indigo-600 hover:bg-indigo-500 text-white font-black shadow-lg shadow-indigo-600/20 transition-all active:scale-95\",children:\"Verify Migration\"})]})]})})]})})}function fN({onRefresh:i,children:l}){const o=x.useRef(0),[u,d]=x.useState(0),[h,g]=x.useState(!1),N=x.useRef(null),E=80,S=f=>{window.scrollY===0&&(o.current=f.touches[0].clientY)};x.useEffect(()=>{const f=A=>{if(o.current===0)return;const C=A.touches[0].clientY-o.current;if(C>0&&window.scrollY===0){A.cancelable&&A.preventDefault();const M=Math.min(C,E*1.5);d(M)}},w=N.current;return w&&w.addEventListener(\"touchmove\",f,{passive:!1}),()=>{w&&w.removeEventListener(\"touchmove\",f)}},[]),x.useEffect(()=>{u>=E&&!h&&window.navigator.vibrate&&window.navigator.vibrate(10)},[u,h]);const p=async()=>{u>=E&&!h&&(g(!0),await i(),g(!1)),d(0),o.current=0};return n.jsxs(\"div\",{ref:N,className:\"relative\",onTouchStart:S,onTouchEnd:p,children:[n.jsx(Le.div,{className:\"absolute top-0 left-0 right-0 flex justify-center items-center\",style:{height:u,opacity:u/E},animate:{y:h?0:-E},children:n.jsxs(\"div\",{className:\"flex flex-col items-center gap-2 py-4\",children:[n.jsx(Le.div,{animate:{rotate:h?360:u/E*180},transition:{rotate:{duration:h?1:0,repeat:h?1/0:0,ease:\"linear\"}},children:n.jsx(ei,{className:\"w-6 h-6 text-[#0A84FF]\"})}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-[0.2em] text-[#8E8E93]\",children:h?\"Synchronizing...\":u>=E?\"Relinquish to Sync\":\"Pull to Synchronize\"})]})}),n.jsx(Le.div,{animate:{y:h?60:0},transition:{duration:.2},children:l})]})}function os({className:i,...l}){return n.jsx(\"div\",{\"data-slot\":\"skeleton\",className:De(\"bg-accent animate-pulse rounded-md\",i),...l})}function mN(){return n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(Ot,{className:\"p-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 mb-4\",children:[n.jsx(os,{className:\"w-12 h-12 rounded-lg\"}),n.jsxs(\"div\",{className:\"space-y-2 flex-1\",children:[n.jsx(os,{className:\"h-5 w-32\"}),n.jsx(os,{className:\"h-4 w-48\"})]})]}),n.jsx(\"div\",{className:\"grid grid-cols-3 gap-3\",children:[1,2,3].map(i=>n.jsx(\"div\",{className:\"space-y-2\",children:n.jsx(os,{className:\"h-20 w-full rounded-lg\"})},i))})]}),[1,2,3].map(i=>n.jsx(Ot,{className:\"p-6\",children:n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(os,{className:\"h-6 w-48\"}),n.jsx(os,{className:\"h-4 w-full\"}),n.jsx(os,{className:\"h-4 w-3/4\"})]})},i))]})}function hN(i,l,o=30){x.useEffect(()=>{let u=0;const d=g=>{u=g.touches[0].clientX},h=g=>{const E=g.touches[0].clientX-u;u<o&&E>30&&(g.cancelable&&g.preventDefault(),window.navigator.vibrate&&window.navigator.vibrate(20),i(),u=window.innerWidth),u>window.innerWidth-o&&E<-30&&(g.cancelable&&g.preventDefault(),window.navigator.vibrate&&window.navigator.vibrate(20),l(),u=0)};return document.addEventListener(\"touchstart\",d,{passive:!0}),document.addEventListener(\"touchmove\",h,{passive:!1}),()=>{document.removeEventListener(\"touchstart\",d),document.removeEventListener(\"touchmove\",h)}},[i,l,o])}const pN=({onOpenAI:i,onAddTransaction:l,onMigrate:o,isVisible:u})=>n.jsxs(\"div\",{id:\"fab-dock\",className:`fixed right-5 bottom-[110px] flex flex-col gap-3.5 z-[110] transition-all duration-500 ease-quantum ${u?\"translate-x-0 opacity-100\":\"translate-x-[100px] opacity-0\"}`,children:[n.jsx(\"div\",{onClick:i,title:\"AI Assistant\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-[#a855f74d] shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-[#A855F7] hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(Ga,{className:\"w-5 h-5 group-hover:rotate-12 transition-transform\"})}),n.jsx(\"div\",{onClick:o,title:\"Migrate Capital\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-indigo-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-indigo-400 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(Au,{className:\"w-5 h-5 group-hover:scale-110 transition-transform\"})}),n.jsx(\"div\",{onClick:()=>l(\"debt\"),title:\"Added Personal IOU\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-yellow-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-yellow-500 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(Z0,{className:\"w-5 h-5 group-hover:-translate-y-0.5 transition-transform\"})}),n.jsx(\"div\",{onClick:()=>l(\"income\"),title:\"Add Money In\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-emerald-500/40 shadow-[0_0_20px_rgba(16,185,129,0.1)] cursor-pointer text-emerald-500 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(kr,{className:\"w-5 h-5 group-hover:rotate-90 transition-transform\"})}),n.jsx(\"div\",{onClick:()=>l(\"expense\"),title:\"Add Money Out\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-rose-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-rose-500 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(Ey,{className:\"w-5 h-5 group-hover:scale-110 transition-transform\"})})]}),gN=he.memo(({isOpen:i,onClose:l,context:o,settings:u,isOffline:d=!1})=>{const[h,g]=x.useState(\"\"),[N,E]=x.useState([{text:\"Hello! I've analyzed your cash flow. How can I assist with your goals?\",type:\"ai\"}]),[S,p]=x.useState(!1),f=x.useRef(null);x.useEffect(()=>{f.current&&f.current.scrollIntoView({behavior:\"smooth\"})},[N]);const w=async()=>{if(!h.trim()||S)return;const A=h.trim();g(\"\"),E(T=>[...T,{text:A,type:\"user\"}]),p(!0);try{if(d){setTimeout(()=>{E(C=>[...C,{text:\"FinHub is currently in 'Cached View' (Offline). I've analyzed your local financial fabric: your liquidity nodes are stable, but synchronizing with global AI intelligence requires a stable link. How can I help you optimize your local state?\",type:\"ai\"}]),p(!1)},1e3);return}const T=await Wj({userPrompt:A,context:o,settings:u,persona:\"ANALYST\"});T.error?E(C=>[...C,{text:T.error,type:\"ai\"}]):E(C=>[...C,{text:T.text||\"Analyzing financial pattern...\",type:\"ai\"}])}catch{E(T=>[...T,{text:\"Connection error. FinHub has transitioned to local 'Cached View'.\",type:\"ai\"}])}finally{d||p(!1)}};return i?n.jsxs(\"div\",{id:\"ai-chat-overlay\",className:\"fixed inset-0 bg-[#020408] z-[200] flex flex-col p-6 animate-in fade-in zoom-in-95 duration-300\",children:[n.jsx(\"div\",{className:\"absolute inset-0 bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-indigo-500/10 via-transparent to-transparent opacity-50\"}),n.jsxs(\"div\",{className:\"flex justify-between items-center mb-10 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-indigo-500/10 rounded-2xl flex items-center justify-center border border-indigo-500/20\",children:n.jsx(Ga,{className:\"text-indigo-400 w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"h2\",{className:\"font-black text-2xl text-white tracking-tight leading-none\",children:\"AI Analyst\"}),n.jsxs(\"div\",{className:\"flex items-center gap-2 mt-1\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500\",children:\"Neural Core Context\"}),d&&n.jsx(\"span\",{className:\"text-[8px] bg-amber-500/10 text-amber-500 px-1.5 py-0.5 rounded border border-amber-500/20 font-black tracking-tighter uppercase\",children:\"Cached View\"})]})]})]}),n.jsx(\"button\",{onClick:l,\"aria-label\":\"Close Chat\",className:\"bg-white/5 w-12 h-12 rounded-full flex items-center justify-center hover:bg-white/10 hover:text-white text-slate-400 transition-all active:scale-95\",children:n.jsx(il,{className:\"w-6 h-6\"})})]}),n.jsxs(\"div\",{id:\"chat-messages\",className:\"flex-1 overflow-y-auto space-y-4 pr-2 custom-scrollbar\",children:[N.map((A,T)=>n.jsxs(\"div\",{className:De(\"p-4 rounded-[24px] text-sm leading-relaxed\",A.type===\"ai\"?\"bg-slate-900 border border-white/5 text-slate-200 self-start max-w-[85%]\":\"bg-indigo-600 text-white font-medium shadow-lg shadow-indigo-600/20 self-end max-w-[85%]\"),children:[A.type===\"ai\"&&n.jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[n.jsx(Ga,{className:\"w-3 h-3 text-indigo-400 font-black\"}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500\",children:\"Guru Analysis\"})]}),A.text]},T)),S&&n.jsx(\"div\",{className:\"p-4 bg-slate-900 border border-white/5 rounded-[24px] self-start animate-pulse\",children:n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:0ms]\"}),n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:150ms]\"}),n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:300ms]\"})]})}),n.jsx(\"div\",{ref:f})]}),n.jsxs(\"div\",{className:\"mt-8 flex gap-3 p-2 bg-slate-900/40 rounded-[28px] border border-white/5 relative z-10\",children:[n.jsx(\"input\",{type:\"text\",value:h,onChange:A=>g(A.target.value),onKeyDown:A=>A.key===\"Enter\"&&w(),placeholder:\"Ask the analyst...\",className:\"flex-1 bg-transparent border-none px-6 py-4 text-white focus:outline-none placeholder:text-slate-600 font-bold\"}),n.jsx(\"button\",{onClick:w,disabled:S||!h.trim(),\"aria-label\":\"Send Message\",className:\"w-14 h-14 bg-indigo-600 rounded-[22px] flex items-center justify-center shadow-lg shadow-indigo-900/30 hover:bg-indigo-500 transition-all active:scale-90 disabled:opacity-50 disabled:cursor-not-allowed group\",children:n.jsx(Ay,{className:\"w-6 h-6 text-white group-hover:-translate-y-1 transition-transform\"})})]}),n.jsx(\"p\",{className:\"text-[9px] font-bold text-slate-600 text-center uppercase tracking-widest mt-4\",children:\"Encryption Verified // Neural Fabric Link Stable\"})]}):null});class xN extends x.Component{state={hasError:!1};static getDerivedStateFromError(l){return{hasError:!0,error:l}}componentDidCatch(l,o){console.error(\"Uncaught error:\",l,o)}render(){return this.state.hasError?n.jsx(\"div\",{className:\"min-h-[400px] flex items-center justify-center p-6\",children:n.jsxs(Ot,{className:\"max-w-md w-full p-8 bg-slate-900 border-white/10 text-center space-y-6 rounded-[32px]\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-rose-500/10 rounded-full flex items-center justify-center mx-auto\",children:n.jsx(el,{className:\"w-8 h-8 text-rose-500\"})}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(\"h2\",{className:\"text-xl font-black text-white uppercase tracking-tight\",children:\"System Glitch Detected\"}),n.jsx(\"p\",{className:\"text-sm text-slate-400 font-medium\",children:\"The neural link to this component was interrupted. This usually happens during background updates.\"})]}),this.state.error&&n.jsx(\"pre\",{className:\"text-[10px] bg-black/40 p-3 rounded-xl text-rose-400/80 overflow-x-auto text-left font-mono\",children:this.state.error.message}),n.jsxs(Re,{onClick:()=>window.location.reload(),className:\"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-black py-6 rounded-2xl gap-2 h-auto\",children:[n.jsx(ei,{className:\"w-4 h-4\"}),\"Re-establish Connection\"]})]})}):this.props.children}}var z0;(function(i){i[i.NONE=0]=\"NONE\",i[i.TOUCH_ID=1]=\"TOUCH_ID\",i[i.FACE_ID=2]=\"FACE_ID\",i[i.FINGERPRINT=3]=\"FINGERPRINT\",i[i.FACE_AUTHENTICATION=4]=\"FACE_AUTHENTICATION\",i[i.IRIS_AUTHENTICATION=5]=\"IRIS_AUTHENTICATION\",i[i.MULTIPLE=6]=\"MULTIPLE\"})(z0||(z0={}));var L0;(function(i){i[i.NONE=0]=\"NONE\",i[i.STRONG=1]=\"STRONG\",i[i.WEAK=2]=\"WEAK\"})(L0||(L0={}));var U0;(function(i){i[i.UNKNOWN_ERROR=0]=\"UNKNOWN_ERROR\",i[i.BIOMETRICS_UNAVAILABLE=1]=\"BIOMETRICS_UNAVAILABLE\",i[i.USER_LOCKOUT=2]=\"USER_LOCKOUT\",i[i.BIOMETRICS_NOT_ENROLLED=3]=\"BIOMETRICS_NOT_ENROLLED\",i[i.USER_TEMPORARY_LOCKOUT=4]=\"USER_TEMPORARY_LOCKOUT\",i[i.AUTHENTICATION_FAILED=10]=\"AUTHENTICATION_FAILED\",i[i.APP_CANCEL=11]=\"APP_CANCEL\",i[i.INVALID_CONTEXT=12]=\"INVALID_CONTEXT\",i[i.NOT_INTERACTIVE=13]=\"NOT_INTERACTIVE\",i[i.PASSCODE_NOT_SET=14]=\"PASSCODE_NOT_SET\",i[i.SYSTEM_CANCEL=15]=\"SYSTEM_CANCEL\",i[i.USER_CANCEL=16]=\"USER_CANCEL\",i[i.USER_FALLBACK=17]=\"USER_FALLBACK\"})(U0||(U0={}));const I0=cs(\"NativeBiometric\",{web:()=>Fa(()=>import(\"./web-CyZe6ZkC.js\"),__vite__mapDeps([7,1,2,3,4])).then(i=>new i.NativeBiometricWeb)}),bN=()=>{const{checkIdentity:i,login:l,signup:o,sendOtp:u,verifyOtp:d,resetPin:h,isRememberedUser:g,rememberedMobile:N,pendingMobile:E,clearPendingSession:S}=ai(),[p,f]=x.useState(\"identity\"),[w,A]=x.useState(\"\"),[T,C]=x.useState(\"\"),[M,y]=x.useState(\"\"),[L,z]=x.useState(\"\"),[j,G]=x.useState(\"\"),[ee,Z]=x.useState(\"\"),[_,B]=x.useState(!1),[J,ne]=x.useState(!1),[F,oe]=x.useState(!1),[ge,O]=x.useState(!1),k=x.useRef(null),U=he.useCallback(async()=>{if(Gn.isNativePlatform())try{if(!(await I0.isAvailable()).isAvailable)return;O(!0),await I0.verifyIdentity({reason:\"Authenticate to access your private node\",title:\"Login to FinHub\",subtitle:\"Use biometrics to login\",description:\"Touch the sensor to verify identity\",negativeButtonText:\"Cancel\"}),await l(\"2255\",!0)||O(!1)}catch(le){console.error(\"Biometric error:\",le),O(!1),navigator.vibrate&&navigator.vibrate([50,50])}},[l]);x.useEffect(()=>{g&&N?(A(N),f(\"verify\"),U()):E&&(A(E),f(\"verify\"))},[g,N,E,U]);const Q=he.useCallback(async()=>{if(w.length!==10)return;const le=await i(w);f(le?\"verify\":\"create_name\"),C(\"\")},[w,i]);x.useEffect(()=>{p===\"identity\"&&w.length===10&&Q()},[w,p,Q]);const ae=he.useCallback(async()=>{p===\"verify\"?await l(T,J)?(navigator.vibrate&&navigator.vibrate([10]),!J&&!g&&oe(!0)):q():p===\"create_pin\"?T.length===4&&(await o(w,T,M,J)||q()):p===\"reset_pin\"&&(j===ee&&j.length===4&&await h(w,j)?(f(\"verify\"),C(\"\"),G(\"\"),Z(\"\")):q())},[p,l,T,J,o,w,M,h,j,ee,g]);x.useEffect(()=>{p===\"verify\"&&T.length===4&&ae()},[T,p,ae]),x.useEffect(()=>{k.current&&(k.current.focus(),k.current.type!==\"hidden\"&&k.current.select())},[p]);const v=async()=>{await u(w)&&f(\"otp_reset\")},D=async()=>{if(M.trim().length<2)return;await u(w)&&f(\"otp_verify\")},W=async()=>{await d(w,L)?f(p===\"otp_verify\"?\"create_pin\":\"reset_pin\"):q()},q=()=>{B(!0),navigator.vibrate&&navigator.vibrate([50,30,50]),setTimeout(()=>B(!1),500),z(\"\"),C(\"\"),Z(\"\")},Y=()=>p===\"identity\"?w.length!==10:p===\"verify\"?T.length!==4:p===\"otp_verify\"||p===\"otp_reset\"?L.length!==4:p===\"create_name\"?M.trim().length<2:p===\"create_pin\"?T.length!==4:p===\"reset_pin\"?j.length!==4||ee.length!==4:!1,V=()=>{S(),f(\"identity\"),A(\"\"),C(\"\")},te=le=>{le.key===\"Enter\"&&!Y()&&me()()},me=()=>{switch(p){case\"identity\":return Q;case\"otp_verify\":case\"otp_reset\":return W;case\"create_name\":return D;case\"verify\":case\"create_pin\":case\"reset_pin\":return ae;default:return()=>{}}},ie=()=>{switch(p){case\"identity\":return\"Continue\";case\"otp_verify\":case\"otp_reset\":return\"Verify OTP\";case\"create_name\":return\"Next\";case\"verify\":return\"Login\";case\"create_pin\":return\"Create Account\";case\"reset_pin\":return\"Reset PIN\";default:return\"Continue\"}};return n.jsxs(\"div\",{className:\"fixed inset-0 flex flex-col items-center justify-center overflow-hidden font-sans auth-mesh-gradient z-[9999999]\",children:[n.jsx(\"div\",{className:\"absolute inset-0 z-0 bg-[url('/mesh-grid.svg')] opacity-20\"}),n.jsxs(Le.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},className:\"absolute top-12 z-10 flex flex-col items-center gap-2\",children:[n.jsx(\"img\",{src:\"/images/logo-dark.png\",alt:\"FinHub\",className:\"h-12 w-auto\"}),n.jsx(\"span\",{className:\"text-xs font-medium text-white/40 tracking-widest uppercase\",children:\"v0.1 Beta\"})]}),n.jsxs(\"div\",{className:\"z-10 w-full max-w-sm px-8\",children:[n.jsxs(Bn,{mode:\"wait\",children:[p===\"identity\"&&n.jsxs(Le.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},exit:{x:-20,opacity:0},className:\"flex flex-col gap-6\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Welcome\"}),n.jsx(\"p\",{className:\"text-white/50 text-sm mt-2\",children:\"Enter your mobile number to continue\"})]}),n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-sky-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"Mobile Number\"}),n.jsx(\"input\",{ref:k,type:\"text\",inputMode:\"numeric\",maxLength:10,value:w,onChange:le=>A(le.target.value.replace(/\\D/g,\"\")),onKeyDown:te,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"999 999 9999\"})]}),n.jsxs(\"div\",{onClick:()=>{ne(!J),navigator.vibrate&&navigator.vibrate(5)},className:\"flex items-center gap-3 cursor-pointer self-center\",children:[n.jsx(\"div\",{className:`h-5 w-5 rounded-md border transition-all flex items-center justify-center ${J?\"bg-sky-500 border-sky-500\":\"border-white/20 bg-white/5\"}`,children:J&&n.jsx(Cu,{className:\"h-3.5 w-3.5 text-white\"})}),n.jsx(\"span\",{className:\"text-sm text-white/60 font-medium\",children:\"Remember me for 30 days\"})]})]},\"identity\"),p===\"create_name\"&&n.jsxs(Le.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},exit:{x:-20,opacity:0},className:\"flex flex-col gap-6\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Who are you?\"}),n.jsx(\"p\",{className:\"text-white/50 text-sm mt-2\",children:\"Personalize your node experience\"})]}),n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-sky-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"Full Name\"}),n.jsx(\"input\",{ref:k,type:\"text\",value:M,onChange:le=>y(le.target.value),onKeyDown:te,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"Joe Doe\"})]})]},\"create_name\"),(p===\"otp_verify\"||p===\"otp_reset\")&&n.jsxs(Le.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,x:_?[0,-10,10,-10,10,0]:0},exit:{scale:1.1,opacity:0},className:\"relative flex flex-col gap-8 items-center\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"div\",{className:\"mb-4 flex justify-center\",children:n.jsx(\"div\",{className:\"p-4 rounded-full bg-white/5 ring-1 ring-white/10\",children:n.jsx(ky,{className:\"h-8 w-8 text-sky-400\"})})}),n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Verify Node\"}),n.jsxs(\"p\",{className:\"text-white/40 text-sm mt-2\",children:[\"Enter the 4-digit code sent to\",n.jsx(\"br\",{}),n.jsx(\"span\",{className:\"text-white/70\",children:w})]})]}),n.jsxs(\"div\",{className:\"group relative flex flex-col items-center justify-center rounded-[32px] bg-white/5 p-10 ring-1 ring-white/10 backdrop-blur-md\",children:[n.jsx(\"div\",{className:\"flex gap-5\",children:[0,1,2,3].map(le=>n.jsx(Le.div,{animate:{scale:le<L.length?1.2:1,backgroundColor:le<L.length?\"#fff\":\"rgba(255,255,255,0.1)\"},transition:{duration:.1},className:\"h-3.5 w-3.5 rounded-full\"},le))}),n.jsx(\"input\",{ref:k,type:\"password\",inputMode:\"numeric\",maxLength:4,value:L,onChange:le=>z(le.target.value.replace(/\\D/g,\"\")),onKeyDown:te,className:\"absolute inset-0 opacity-0 cursor-default\",\"aria-label\":\"One-time Password\",placeholder:\"OTP\"})]})]},\"otp\"),p===\"reset_pin\"&&n.jsxs(Le.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,x:_?[0,-10,10,-10,10,0]:0},exit:{scale:1.1,opacity:0},className:\"relative flex flex-col gap-8 items-center\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"div\",{className:\"mb-4 flex justify-center\",children:n.jsx(\"div\",{className:\"p-4 rounded-full bg-white/5 ring-1 ring-white/10\",children:n.jsx(Ty,{className:\"h-8 w-8 text-amber-400\"})})}),n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Reset PIN\"}),n.jsx(\"p\",{className:\"text-white/40 text-sm mt-2\",children:\"Choose a new secure 4-digit access code\"})]}),n.jsxs(\"div\",{className:\"space-y-4 w-full\",children:[n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-amber-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"New PIN\"}),n.jsx(\"input\",{type:\"password\",inputMode:\"numeric\",maxLength:4,value:j,onChange:le=>G(le.target.value.replace(/\\D/g,\"\")),onKeyDown:te,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"****\"})]}),n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-amber-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"Confirm PIN\"}),n.jsx(\"input\",{type:\"password\",inputMode:\"numeric\",maxLength:4,value:ee,onChange:le=>Z(le.target.value.replace(/\\D/g,\"\")),onKeyDown:te,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"****\"})]})]})]},\"reset_pin\"),(p===\"verify\"||p===\"create_pin\")&&n.jsxs(Le.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,x:_?[0,-10,10,-10,10,0]:0},exit:{scale:1.1,opacity:0},className:\"relative flex flex-col gap-8 items-center\",children:[n.jsx(Le.div,{initial:{opacity:0},animate:{opacity:1},className:\"fixed inset-0 z-[-1] bg-black/80 backdrop-blur-xl\"}),n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(Le.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:\"mb-4 flex justify-center\",children:n.jsx(\"div\",{className:\"p-4 rounded-full bg-white/5 ring-1 ring-white/10\",children:n.jsx(sl,{className:\"h-8 w-8 text-sky-400\"})})}),n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:p===\"verify\"?\"Private Access\":\"Secure Setup\"}),n.jsx(\"p\",{className:\"text-white/40 text-sm mt-2\",children:p===\"verify\"?\"Encrypted PIN required\":\"Create your master PIN\"})]}),n.jsxs(\"div\",{className:\"group relative flex flex-col items-center justify-center rounded-[32px] bg-white/5 p-10 ring-1 ring-white/10 backdrop-blur-md\",children:[n.jsx(\"div\",{className:\"flex gap-5\",children:[0,1,2,3].map(le=>n.jsx(Le.div,{animate:{scale:le<T.length?1.2:1,backgroundColor:le<T.length?\"#fff\":\"rgba(255,255,255,0.1)\"},transition:{duration:.1},className:\"h-3.5 w-3.5 rounded-full\"},le))}),n.jsx(\"input\",{ref:k,type:\"password\",inputMode:\"numeric\",maxLength:4,value:T,onChange:le=>C(le.target.value.replace(/\\D/g,\"\")),onKeyDown:te,className:\"absolute inset-0 opacity-0 cursor-default\",\"aria-label\":\"Access PIN\",placeholder:\"PIN\"})]}),p===\"verify\"&&n.jsxs(\"div\",{className:\"flex flex-col items-center gap-4\",children:[n.jsxs(\"button\",{onClick:U,className:\"flex items-center gap-2 text-sky-400 text-sm font-medium\",children:[n.jsx(Hn,{className:\"h-5 w-5\"}),\" Use Biometrics\"]}),n.jsx(\"button\",{onClick:v,className:\"text-white/30 text-xs hover:text-white/50 transition-colors\",children:\"Forgot PIN? Reset via SMS\"}),n.jsx(\"button\",{onClick:V,className:\"text-sky-500/50 text-[10px] font-bold uppercase tracking-widest hover:text-sky-400/80 transition-colors mt-2\",children:\"Login with another account\"})]})]},\"pin\")]}),n.jsxs(Le.button,{onClick:me(),disabled:Y(),className:`mt-8 flex w-full items-center justify-center gap-2 rounded-[22px] py-4 text-base font-semibold text-white shadow-lg transition-all ${Y()?\"cursor-not-allowed bg-[#3A3A3C] opacity-50\":\"bg-gradient-to-r from-[#0A84FF] to-[#0047AB] shadow-sky-500/20 active:scale-95\"}`,whileTap:{scale:.98},children:[ie(),!Y()&&n.jsx(P0,{className:\"h-4 w-4\"})]})]}),n.jsx(Bn,{children:F&&n.jsx(Le.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"fixed inset-0 z-[60] flex items-end justify-center bg-black/60 p-6 backdrop-blur-sm\",children:n.jsxs(Le.div,{initial:{y:100},animate:{y:0},exit:{y:100},className:\"w-full max-w-sm rounded-[32px] bg-[#1C1C1E] p-8 text-center ring-1 ring-white/10 shadow-2xl\",children:[n.jsx(\"div\",{className:\"mx-auto mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-sky-500/20 text-sky-400\",children:n.jsx(Cu,{className:\"h-8 w-8\"})}),n.jsx(\"h3\",{className:\"text-xl font-bold text-white\",children:\"Speed up your next login?\"}),n.jsx(\"p\",{className:\"mt-2 text-sm text-white/50\",children:\"We can securely remember your ID so you can skip the mobile entry next time.\"}),n.jsxs(\"div\",{className:\"mt-8 flex flex-col gap-3\",children:[n.jsx(\"button\",{onClick:()=>{localStorage.setItem(\"finhub_remembered_mobile\",w),oe(!1)},className:\"w-full rounded-2xl bg-sky-500 py-4 font-semibold text-white active:scale-95 transition-all\",children:\"Enable Smart Login\"}),n.jsx(\"button\",{onClick:()=>oe(!1),className:\"w-full py-2 text-sm font-medium text-white/30 active:text-white/50\",children:\"Maybe later\"})]})]})})}),n.jsx(Bn,{children:ge&&n.jsx(Le.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"fixed inset-0 z-[70] flex flex-col items-center justify-center bg-black/40 backdrop-blur-md\",children:n.jsxs(Le.div,{initial:{scale:.8},animate:{scale:1},className:\"flex flex-col items-center\",children:[n.jsxs(\"div\",{className:\"relative mb-6\",children:[n.jsx(Le.div,{animate:{scale:[1,1.2,1],opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0},className:\"absolute inset-0 rounded-full bg-sky-500/30 blur-2xl\"}),n.jsx(\"div\",{className:\"relative flex h-24 w-24 items-center justify-center rounded-full bg-white/5 ring-1 ring-white/20\",children:n.jsx(Hn,{className:\"h-12 w-12 text-sky-400\"})})]}),n.jsx(\"h3\",{className:\"text-lg font-medium text-white\",children:\"Scanning Biometrics\"}),n.jsx(\"p\",{className:\"mt-2 text-sm text-white/40 italic\",children:\"Verifying your node identity...\"}),n.jsx(\"button\",{onClick:()=>O(!1),className:\"mt-12 text-xs font-medium uppercase tracking-widest text-white/20 hover:text-white/40\",children:\"Cancel & use PIN\"})]})})}),n.jsx(\"div\",{className:\"absolute bottom-8 text-center text-[10px] text-white/20\",children:n.jsx(\"p\",{children:\"Protected by FinHub Security. Data is localized and encrypted.\"})})]})},B0=({message:i=\"Secure Node Handshake\",subMessage:l=\"Re-encrypting local session...\"})=>n.jsxs(\"div\",{className:\"fixed inset-0 z-[100] flex flex-col items-center justify-center bg-[#000000] overflow-hidden\",children:[n.jsx(Le.div,{animate:{opacity:[.1,.2,.1],scale:[1,1.1,1]},transition:{duration:4,repeat:1/0,ease:\"easeInOut\"},className:\"absolute h-[500px] w-[500px] rounded-full bg-sky-500/10 blur-[120px]\"}),n.jsxs(\"div\",{className:\"relative flex flex-col items-center justify-center gap-12\",children:[n.jsxs(\"div\",{className:\"relative flex items-center justify-center\",children:[[0,1,2].map(o=>n.jsx(Le.div,{className:\"absolute rounded-full border border-sky-400/20\",initial:{width:80,height:80,opacity:0},animate:{width:[80,250],height:[80,250],opacity:[.4,0]},transition:{duration:3,repeat:1/0,delay:o*1,ease:\"easeOut\"}},o)),n.jsx(Le.div,{animate:{y:[0,-10,0]},transition:{duration:4,repeat:1/0,ease:\"easeInOut\"},className:\"relative z-10\",children:n.jsx(Le.div,{animate:{scale:[1,1.1,1],filter:[\"drop-shadow(0 0 15px rgba(56,189,248,0.3))\",\"drop-shadow(0 0 30px rgba(56,189,248,0.6))\",\"drop-shadow(0 0 15px rgba(56,189,248,0.3))\"]},transition:{duration:3,repeat:1/0,ease:\"easeInOut\"},className:\"relative flex h-32 w-32 items-center justify-center rounded-[32px] bg-gradient-to-br from-[#1C1C1E] to-[#000000] ring-1 ring-white/10 shadow-2xl backdrop-blur-xl\",children:n.jsx(\"img\",{src:\"/images/logo-icon.png\",alt:\"FinHub\",className:\"h-20 w-20 object-contain drop-shadow-lg\"})})})]}),n.jsx(Le.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:\"flex flex-col items-center gap-2\",children:n.jsxs(\"div\",{className:\"flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/5 ring-1 ring-white/5 backdrop-blur-md\",children:[n.jsx(sl,{className:\"h-3 w-3 text-sky-400\"}),n.jsx(\"span\",{className:\"text-[10px] font-bold tracking-[0.2em] uppercase text-white/40\",children:i})]})})]}),n.jsxs(\"div\",{className:\"absolute bottom-16 w-full max-w-[200px] px-6\",children:[n.jsx(\"div\",{className:\"h-[2px] w-full overflow-hidden rounded-full bg-white/10\",children:n.jsx(Le.div,{initial:{x:\"-100%\"},animate:{x:\"100%\"},transition:{duration:1.5,repeat:1/0,ease:\"easeInOut\"},className:\"h-full w-1/3 bg-gradient-to-r from-transparent via-sky-400 to-transparent\"})}),n.jsx(\"div\",{className:\"mt-3 text-center\",children:n.jsx(\"span\",{className:\"text-[10px] font-medium text-white/20 italic tracking-wider\",children:l})})]})]}),yN=({isOpen:i,onClose:l})=>n.jsx(Bn,{children:i&&n.jsxs(n.Fragment,{children:[n.jsx(Le.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:l,className:\"fixed inset-0 z-[200] bg-black/60 backdrop-blur-sm\"}),n.jsx(\"div\",{className:\"fixed inset-0 z-[201] flex items-center justify-center p-4 pointer-events-none\",children:n.jsxs(Le.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:\"spring\",damping:25,stiffness:300},className:\"w-full max-w-md bg-slate-900 border border-white/5 rounded-[32px] shadow-2xl overflow-hidden pointer-events-auto relative\",children:[n.jsx(\"div\",{className:\"absolute top-0 inset-x-0 h-32 bg-gradient-to-b from-indigo-500/10 to-transparent pointer-events-none\"}),n.jsx(\"button\",{onClick:l,className:\"absolute top-6 right-6 p-2 rounded-full bg-white/5 text-slate-400 hover:text-white hover:bg-white/10 transition-colors z-10\",\"aria-label\":\"Close about us popup\",children:n.jsx(il,{className:\"w-5 h-5\"})}),n.jsxs(\"div\",{className:\"p-8 pt-12 space-y-8 relative\",children:[n.jsxs(\"div\",{className:\"flex flex-col items-center text-center gap-3\",children:[n.jsx(\"div\",{className:\"w-16 h-16 rounded-[22px] bg-indigo-600 flex items-center justify-center shadow-lg shadow-indigo-500/20\",children:n.jsx(Dy,{className:\"w-8 h-8 text-white\"})}),n.jsxs(\"div\",{children:[n.jsx(\"h2\",{className:\"text-2xl font-black text-white tracking-tight uppercase\",children:\"FinHub Core\"}),n.jsx(\"p\",{className:\"text-[10px] font-bold text-indigo-400 uppercase tracking-[0.3em]\",children:\"Quantum Fabric v50.3\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"section\",{className:\"space-y-2\",children:[n.jsxs(\"h3\",{className:\"text-[10px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2\",children:[n.jsx(Hn,{className:\"w-3.5 h-3.5\"}),\"Our Vision\"]}),n.jsx(\"p\",{className:\"text-sm text-slate-300 leading-relaxed font-medium\",children:\"FinHub is designed to be the central nervous system of your personal economy. We merge neural-inspired data models with high-precision tracking to navigate complex wealth landscapes.\"})]}),n.jsxs(\"section\",{className:\"space-y-2\",children:[n.jsxs(\"h3\",{className:\"text-[10px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2\",children:[n.jsx(sl,{className:\"w-3.5 h-3.5\"}),\"Core Features\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[n.jsxs(\"div\",{className:\"bg-white/5 p-3 rounded-2xl border border-white/5\",children:[n.jsx(\"span\",{className:\"block text-[8px] font-black text-indigo-400 uppercase mb-1\",children:\"Localization\"}),n.jsx(\"span\",{className:\"text-[10px] text-slate-400 leading-tight\",children:\"Sovereign identity via node storage.\"})]}),n.jsxs(\"div\",{className:\"bg-white/5 p-3 rounded-2xl border border-white/5\",children:[n.jsx(\"span\",{className:\"block text-[8px] font-black text-indigo-400 uppercase mb-1\",children:\"Clamping Logic\"}),n.jsx(\"span\",{className:\"text-[10px] text-slate-400 leading-tight\",children:\"Mathematical stability in all simulations.\"})]})]})]}),n.jsxs(\"div\",{className:\"pt-6 border-t border-white/5 flex flex-col items-center gap-2\",children:[n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-600 uppercase tracking-widest\",children:\"Architect: Sijo Joseph\"}),n.jsx(\"p\",{className:\"text-[10px] font-black text-slate-800 uppercase tracking-[0.2em]\",children:\"© 2025 Neural FinHub Fabric\"})]})]})]})]})})]})}),vN=i=>{const{accounts:l,recurringTransactions:o,goals:u}=i,d=new Date,h=new Date;h.setDate(d.getDate()+7);const g=l.filter(B=>B.type!==\"credit_card\"),N=g.reduce((B,J)=>B+(J.balance||0),0),E=o.filter(B=>{const J=new Date(B.startDate);return B.type===\"expense\"&&J<=h&&J>=d}).reduce((B,J)=>B+J.amount,0),S=u.reduce((B,J)=>B+(J.currentAmount||0),0),p=N-E-S,f=l.filter(B=>B.type===\"credit_card\"),w=f.reduce((B,J)=>{const ne=J.creditLimit||0,F=J.balance||0,oe=Math.max(0,ne-F),ge=J.safeLimitPercentage||30,O=ne*ge/100;return B+Math.min(oe,O)},0),A=p+w;let T=-1/0,C=null,M=null;g.forEach(B=>{const J=o.filter(oe=>oe.accountId===B.id&&oe.type===\"expense\").reduce((oe,ge)=>{const O=new Date(ge.startDate);return O<=h&&O>=d?oe+ge.amount:oe},0),ne=B.min_buffer||0,F=B.balance-J-ne;F>T&&(T=F,C=B.id,M=B.name)});let y=\"SAFE\";const L=g.some(B=>{const J=o.filter(ne=>ne.accountId===B.id&&ne.type===\"expense\").reduce((ne,F)=>{const oe=new Date(F.startDate);return oe<=h&&oe>=d?ne+F.amount:ne},0);return B.balance<J});p<0||L?y=\"CRITICAL\":(p<N*.1||p<2e3)&&(y=\"TIGHT\");let z=null;const j=f.find(B=>B.balance/(B.creditLimit||1)>.7),G=g.find(B=>{const J=o.filter(ne=>ne.accountId===B.id&&ne.type===\"expense\").reduce((ne,F)=>{const oe=new Date(F.startDate);return oe<=h&&oe>=d?ne+F.amount:ne},0);return B.balance<J});G?z=`Payment risk: ${G.name} insufficient for upcoming dues.`:y===\"TIGHT\"?z=\"Low Safe-to-Spend: Consider postponing large purchases.\":j&&(z=`High credit utilization on ${j.name} (>70%).`);const ee=o.filter(B=>B.type===\"expense\").map(B=>{const J=new Date(B.startDate),ne=Math.ceil((J.getTime()-d.getTime())/(1e3*60*60*24));return{...B,daysRemaining:ne}}).filter(B=>B.daysRemaining>=0).sort((B,J)=>B.daysRemaining-J.daysRemaining),Z=ee.length>0?{title:ee[0].description||\"Upcoming Payment\",amount:ee[0].amount,daysRemaining:ee[0].daysRemaining}:null;let _=null;if(y===\"CRITICAL\"&&G&&C&&C!==G.id){const B=o.filter(J=>J.accountId===G.id&&J.type===\"expense\").reduce((J,ne)=>{const F=new Date(ne.startDate);return F<=h&&F>=d?J+ne.amount:J},0);_={fromAccountId:C,toAccountId:G.id,amount:B-G.balance}}return{liquidBalance:N,upcomingDues:E,reservedAmount:S,liquidSafeSpend:p,creditSafeSpend:w,safeToSpendGlobal:A,suggestedSpendAccountId:C,suggestedSpendAccountName:M,suggestedReason:\"Highest free buffer after upcoming payments\",status:y,topAlert:z,quickFix:_,nextDue:Z}},wN=i=>({accounts:i.accounts||[],recurringTransactions:i.recurringTransactions||[],goals:i.goals||[],liabilities:i.liabilities||[],settings:i.settings||{}}),Zi={calculateStressFactor(i,l){if(l===0)return .6;const o=i/l;return o<=.3?1:o<=.5?.9:o<=.7?.75:.6},calculateHabitShare(i,l){if(l===0)return .02;const o=i/l;return Math.min(Math.max(o,.02),.4)},calculateSSR(i,l,o,u){const d=l-o-u,h=new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate(),g=h-new Date().getDate()+1,N=d*(g/h);return N<=0?.6:Math.min(Math.max(i/N,.6),1)},calculateBaseLimit(i,l,o){return i*l*o},calculateProjection(i,l,o){return l===0?i:i/l*o},isDiscretionary(i){const l=[\"entertainment\",\"dining\",\"out\",\"shopping\",\"leisure\",\"hobby\",\"gift\",\"travel\",\"dress\",\"luxury\",\"movie\"],o=i.toLowerCase();return l.some(u=>o.includes(u))},calculateGap(i,l){return i-l}};function jN({className:i,value:l,indicatorClassName:o,...u}){return n.jsx(My,{\"data-slot\":\"progress\",className:De(\"bg-primary/20 relative h-2 w-full overflow-hidden rounded-full\",i),...u,children:n.jsx(_y,{\"data-slot\":\"progress-indicator\",className:De(\"bg-primary h-full w-full flex-1 transition-all\",o),style:{transform:`translateX(-${100-(l||0)}%)`}})})}const NN=()=>{const{expenses:i,incomes:l,liabilities:o,goals:u,accounts:d,emergencyFundAmount:h,currency:g}=ai(),{availableToSpend:N}=Gp({accounts:d,goals:u,liabilities:o,expenses:i,emergencyFundAmount:h}),E=x.useMemo(()=>{const f=new Date,w=f.getMonth(),A=f.getFullYear(),C=(ne=>new Date(A,w-ne,1))(2),y=l.filter(ne=>new Date(ne.date)>=C).reduce((ne,F)=>ne+F.amount,0)/3,L=o.reduce((ne,F)=>ne+(F.emiAmount||0),0),z=u.filter(ne=>ne.type===\"stability\"||ne.type===\"protection\"||ne.name.toLowerCase().includes(\"emergency\")).reduce((ne,F)=>ne+(F.monthly_contribution||0),0),j=z>0?z:.1*y,G=y-L-j,ee=Zi.calculateStressFactor(L,y),Z=Zi.calculateSSR(N,y,L,j),_=i.filter(ne=>new Date(ne.date)>=C),B=_.reduce((ne,F)=>ne+F.amount,0)/3,J={};return Tu.forEach(ne=>{const oe=_.filter(U=>U.category===ne.value).reduce((U,Q)=>U+Q.amount,0)/3,ge=Zi.calculateHabitShare(oe,B),O=Zi.calculateBaseLimit(G,ge,ee),k=Zi.isDiscretionary(ne.value);J[ne.value]=k?O*Math.min(Math.max(Z,.6),1):O}),{limits:J}},[i,l,o,u,N]),{limits:S}=E,p=f=>new Intl.NumberFormat(\"en-IN\",{style:\"currency\",currency:g||\"INR\",maximumFractionDigits:0}).format(f);return n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"header\",{className:\"px-1\",children:[n.jsx(\"h2\",{className:\"text-2xl font-black text-white tracking-tight\",children:\"Financial Guardrails\"}),n.jsx(\"p\",{className:\"text-slate-500 text-[10px] font-bold uppercase tracking-[0.2em] mt-1\",children:\"Hybrid Budget Engine v1.1\"})]}),n.jsx(\"div\",{className:\"grid gap-4\",children:Tu.map(f=>{const w=S[f.value]||0,A=i.filter(C=>{const M=new Date(C.date);return C.category===f.value&&M.getMonth()===new Date().getMonth()&&M.getFullYear()===new Date().getFullYear()}).reduce((C,M)=>C+M.amount,0),T=w>0?A/w*100:0;return n.jsxs(\"div\",{className:\"rounded-3xl border border-white/5 bg-white/5 p-5 transition-all hover:bg-white/10\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-start mb-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-xl\",role:\"img\",\"aria-label\":f.value,children:f.emoji}),n.jsxs(\"div\",{children:[n.jsx(\"h3\",{className:\"text-sm font-bold text-white\",children:f.value}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 uppercase tracking-widest mt-0.5\",children:\"Category Limit\"})]})]}),n.jsxs(\"div\",{className:\"text-right\",children:[n.jsx(\"p\",{className:\"text-sm font-black text-white\",children:p(w)}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 uppercase tracking-widest mt-0.5\",children:\"Monthly\"})]})]}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[10px] font-bold uppercase tracking-tighter\",children:[n.jsxs(\"span\",{className:\"text-slate-400\",children:[\"Spent: \",p(A)]}),n.jsxs(\"span\",{className:De(T>90?\"text-red-400\":\"text-emerald-400\"),children:[Math.round(T),\"%\"]})]}),n.jsx(jN,{value:T,className:\"h-1.5\",indicatorClassName:De(T>100?\"bg-red-500 shadow-[0_0_8px_rgba(239,68,68,0.5)]\":T>80?\"bg-orange-500 shadow-[0_0_8px_rgba(249,115,22,0.5)]\":\"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]\")})]})]},f.value)})})]})},SN=x.lazy(()=>Fa(()=>import(\"./Dashboard-IVoRIJ8c.js\"),__vite__mapDeps([8,1,2,9,10,4,3])).then(i=>({default:i.Dashboard}))),CN=x.lazy(()=>Fa(()=>import(\"./TransactionList-rKWzJlT2.js\"),__vite__mapDeps([11,1,2,10,3,4])).then(i=>({default:i.TransactionList}))),EN=x.lazy(()=>Fa(()=>import(\"./GoalsTracker-D6OcmKwC.js\"),__vite__mapDeps([12,1,2,3,4])).then(i=>({default:i.GoalsTracker}))),AN=x.lazy(()=>Fa(()=>import(\"./EmergencyFundsTab-gXH3z62T.js\"),__vite__mapDeps([13,1,2,3,4])).then(i=>({default:i.EmergencyFundsTab}))),kN=x.lazy(()=>Fa(()=>import(\"./InvestmentsTab-B4180PLB.js\"),__vite__mapDeps([14,1,2,9,10,4,3])).then(i=>({default:i.InvestmentsTab})));function TN(){const{settings:i,expenses:l,incomes:o,debts:u,goals:d,accounts:h,liabilities:g,notifications:N,emergencyFundAmount:E,investments:S,isLoading:p,refreshData:f,updateSettings:w,userId:A,createExpense:T,updateExpense:C,deleteExpense:M,createIncome:y,updateIncome:L,deleteIncome:z,createDebt:j,updateDebt:G,deleteDebt:ee,settleDebt:Z,createGoal:_,updateGoal:B,deleteGoal:J,createAccount:ne,updateAccount:F,deleteAccount:oe,setEmergencyFundAmount:ge,setNotifications:O,isFundAllocationOpen:k,fundAllocationType:U,closeFundAllocation:Q,performFundAllocation:ae,transferFunds:v,authStatus:D,isOffline:W,authMessage:q,backfillRequest:Y,setBackfillRequest:V,executeBackfill:te,createRecurring:me,recurringTransactions:ie}=ai(),[le,je]=x.useState(\"dashboard\"),[Ae,pe]=x.useState(!1),[ve,xe]=x.useState(\"expense\"),[Ke,We]=x.useState(null),[Ue,it]=x.useState(!1),[Ve,ke]=x.useState(!1),[Ft,fe]=x.useState(!1),[Se,ze]=x.useState(null),[lt,mt]=x.useState(!1),[_a,ga]=x.useState(!1),[Ra,Kt]=x.useState(!1),[Oa,ea]=x.useState(!1),[zt]=x.useState(null);hN(()=>ke(!0),()=>fe(!0)),x.useEffect(()=>{if(Gn.isNativePlatform()){(async()=>{try{(await Cr.checkPermissions()).display!==\"granted\"&&await Cr.requestPermissions()}catch(Ee){console.error(\"Error checking notification permissions:\",Ee)}})();const Fe=Cr.addListener(\"localNotificationActionPerformed\",Ee=>{const{notification:rt}=Ee,Ct=rt.extra;console.log(\"Native notification clicked:\",rt),Ct&&(Ct.achievementId?(ze(Ct.achievementId),mt(!0)):Ct.view&&je(Ct.view))});return()=>{Fe.then(Ee=>Ee.remove())}}},[]),x.useEffect(()=>{i.theme===\"dark\"?document.documentElement.classList.add(\"dark\"):document.documentElement.classList.remove(\"dark\")},[i.theme]);const{openFundAllocation:Ht}=ai();x.useEffect(()=>{window.showFundAllocation=Ht},[Ht]);const{currentMonthExpenses:ta}=x.useMemo(()=>{const de=new Date,Fe=de.getMonth(),Ee=de.getFullYear();return{currentMonthExpenses:l.filter(et=>!et.isInternalTransfer).filter(et=>{const bt=new Date(et.date);return bt.getMonth()===Fe&&bt.getFullYear()===Ee})}},[l]),xt=x.useMemo(()=>{const de=o.reduce((Zt,ht)=>Zt+ht.amount,0),Fe=l.reduce((Zt,ht)=>Zt+ht.amount,0),Ee=u.reduce((Zt,ht)=>Zt+ht.amount,0);if(de===0&&Ee===0)return{score:50,savingsRate:0,debtRatio:0,spendingRatio:0};const rt=[...o,...l,...u];let Ct=1;if(rt.length>0){const Zt=rt.map(Ur=>new Date(Ur.date).getTime()),ht=new Date(Math.min(...Zt)),pn=Math.abs(new Date().getTime()-ht.getTime()),si=Math.ceil(pn/(1e3*60*60*24*30));Ct=Math.max(1,si)}const bt=de/Ct*12,Tt=de>0?(de-Fe)/de:0,yt=de>0?Fe/de:0,Jt=bt>0?Ee/bt:Ee>0?1/0:0;let jt=50;return Tt>=.4?jt+=30:Tt>=.2?jt+=20:Tt>=.1?jt+=10:Tt>0?jt+=5:jt-=20,Jt===0?jt+=20:Jt<=.3?jt+=10:Jt<=.6?jt-=10:Jt<=1?jt-=30:jt-=50,yt<=.5?jt+=20:yt<=.7?jt+=10:yt<=.9?jt+=0:jt-=10,{score:Math.max(0,Math.min(100,Math.round(jt))),savingsRate:Tt,debtRatio:Jt,spendingRatio:yt}},[o,l,u]),ni=x.useMemo(()=>({totalIncome:o.reduce((de,Fe)=>de+Fe.amount,0),totalExpenses:l.reduce((de,Fe)=>de+Fe.amount,0),activeDebts:u.filter(de=>de.status===\"pending\").length,goalsCount:d.length,recentTransactions:[...l.slice(0,5).map(de=>({type:\"expense\",...de})),...o.slice(0,5).map(de=>({type:\"income\",...de}))],expenses:l,incomes:o,accounts:h,investments:S,liabilities:g,goals:d,debts:u,currentMonthExpenses:ta,savingsRate:xt.savingsRate,healthScore:xt.score,brainSummary:Ij({investments:S,accounts:h,healthScore:xt.score,savingsRate:xt.savingsRate,totalIncome:o.reduce((de,Fe)=>de+Fe.amount,0),totalExpenses:l.reduce((de,Fe)=>de+Fe.amount,0),activeDebts:u.filter(de=>de.status===\"pending\").length,goalsCount:d.length},i.currency,le)}),[o,l,u,d,xt.savingsRate,xt.score,h,S,g,ta,i.currency,le]),Fn=x.useMemo(()=>{const de=wN({accounts:h,recurringTransactions:ie,goals:d,liabilities:g,settings:i});return vN(de)},[h,ie,d,g,i]);if(p)return n.jsx(B0,{});Gn.isNativePlatform()&&Ov.hide().catch(de=>console.error(\"Splash hide error:\",de));const xa=async()=>{await f()},mn=de=>{xe(de),We(null),pe(!0)},hn=de=>{xe(\"expense\"),We(de),pe(!0)},Ya=de=>{xe(\"income\"),We(de),pe(!0)},ba=de=>{xe(\"debt\"),We(de),pe(!0)},Me=de=>{Ke?ve===\"expense\"?C(Ke.id,de):ve===\"income\"?L(Ke.id,de):ve===\"debt\"&&G(Ke.id,de):ve===\"expense\"?(T(de),de.roundUpAmount&&dt(d.length>0?d[0].id:\"general\",\"goal\",void 0,de.roundUpAmount,de.accountId)):ve===\"income\"?y(de):ve===\"debt\"&&j(de)},dt=async(de,Fe,Ee,rt,Ct)=>{if(!rt&&!zt)return;const et=rt||(zt?zt.roundedAmount-zt.expenseAmount:0),bt=Ct||(zt?zt.accountId:\"\"),Tt=h.find(yt=>yt.id===bt);if(Tt&&await F(Tt.id,{balance:Tt.balance-et}),Fe===\"goal\"){const yt=d.find(Jt=>Jt.id===de);if(yt)await B(de,{currentAmount:yt.currentAmount+et}),ce.success(`Saved ${dn[i.currency]}${et} to ${yt.name}!`);else{const Jt=d.find(jt=>jt.name===\"General Savings\");if(Jt)await B(Jt.id,{currentAmount:Jt.currentAmount+et}),ce.success(`Saved ${dn[i.currency]}${et} to General Savings!`);else{const jt={name:\"General Savings\",targetAmount:1e4,currentAmount:et,targetDate:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString(),emoji:\"🐷\"};_(jt),ce.success(`Created \"General Savings\" and saved ${dn[i.currency]}${et}!`)}}}else ge(yt=>yt+et),ce.success(`Saved ${dn[i.currency]}${et} to Emergency Fund!`);ea(!1),Or({particleCount:50,spread:60,origin:{y:.7}})},kt=de=>{const Fe={today:1,week:7,month:30},Ee=new Date;Ee.setDate(Ee.getDate()+Fe[de]),localStorage.setItem(\"roundUpMutedUntil\",Ee.toISOString()),ea(!1),ce.info(`Round ups muted for ${de===\"today\"?\"today\":de===\"week\"?\"a week\":\"a month\"}`)};return n.jsxs(n.Fragment,{children:[n.jsx(Bn,{mode:\"wait\",children:(D===\"guest\"||D===\"authenticating\")&&n.jsx(Le.div,{className:\"fixed inset-0 z-0\",exit:{opacity:0,scale:.95,filter:\"blur(20px)\"},transition:{duration:.8},children:n.jsx(bN,{})},\"login-container\")}),n.jsx(Bn,{children:D===\"authenticating\"&&n.jsx(Le.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4},className:\"fixed inset-0 z-50\",children:n.jsx(B0,{message:q?.message,subMessage:q?.subMessage})},\"loading-sprite\")}),n.jsx(Bn,{mode:\"wait\",children:D===\"authenticated\"&&n.jsx(Le.div,{className:\"relative z-10\",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.8,ease:[.16,1,.3,1]},children:n.jsxs(\"div\",{className:\"min-h-screen bg-transparent text-foreground transition-colors font-sans\",children:[n.jsx(dj,{activeTab:le,onTabChange:de=>je(de),notificationCount:N.filter(de=>!de.read).length,onNotificationClick:()=>fe(!Ft),onSettingsClick:()=>ke(!Ve),forceHide:lt,renderFab:de=>n.jsx(pN,{isVisible:de&&!Ve&&!Ft&&!lt,onOpenAI:()=>it(!0),onAddTransaction:mn,onMigrate:()=>ga(!0)}),children:n.jsx(fN,{onRefresh:xa,children:n.jsx(xN,{children:n.jsxs(x.Suspense,{fallback:n.jsxs(\"div\",{className:\"space-y-6 pt-12\",children:[n.jsx(mN,{}),n.jsx(\"p\",{className:\"text-center text-slate-500 text-sm\",children:\"Loading Component...\"})]}),children:[le===\"dashboard\"&&n.jsx(\"div\",{className:\"space-y-6\",children:n.jsx(SN,{expenses:l,incomes:o,currency:i.currency,goals:d,liabilities:g,debts:u,investments:S,accounts:h,emergencyFundAmount:E,healthScore:xt.score,userName:i.name,isOffline:W,isSampleMode:i.isSampleMode,onNavigate:de=>je(de),onAddTransaction:de=>{xe(de),pe(!0)}})}),le===\"budgets\"&&n.jsx(\"div\",{className:\"px-4 py-6\",children:n.jsx(NN,{})}),le===\"transactions\"&&n.jsx(CN,{expenses:l,incomes:o,debts:u,accounts:h,currency:i.currency,onEditExpense:hn,onDeleteExpense:M,onEditIncome:Ya,onDeleteIncome:z,onEditDebt:ba,onDeleteDebt:ee,onSettleDebt:Z}),le===\"goals\"&&n.jsx(EN,{goals:d,currency:i.currency,accounts:h,expenses:l,incomes:o,onCreateGoal:_,onUpdateGoal:B,onDeleteGoal:J,onDeductFromAccount:async(de,Fe)=>{const Ee=h.find(rt=>rt.id===de);Ee&&await F(de,{balance:Ee.balance-Fe})}}),le===\"accounts\"&&n.jsx(uN,{accounts:h,currency:i.currency,onCreateAccount:ne,onUpdateAccount:F,onDeleteAccount:oe}),le===\"investments\"&&n.jsx(kN,{}),le===\"emergency\"&&n.jsx(AN,{currency:i.currency,userId:A,expenses:l,incomes:o,accounts:h,onEmergencyFundUpdate:de=>ge(de)}),le===\"recurring\"&&n.jsx(oj,{}),le===\"more\"&&n.jsx(nN,{onNavigate:de=>je(de),onOpenSettings:()=>ke(!0),onOpenNotifications:()=>fe(!0),emergencyFundAmount:E,bankAccountsCount:h.filter(de=>de.type===\"bank\").length,cardsCount:h.filter(de=>de.type===\"credit_card\").length,currency:i.currency,onOpenAbout:()=>Kt(!0)})]})})})}),Ae&&n.jsx(gj,{isOpen:Ae,onClose:()=>{pe(!1),We(null)},type:ve,onSubmit:Me,initialData:Ke,accounts:h,liabilities:g,currency:i.currency,roundUpEnabled:i.roundUpEnabled,defaultAccountId:Fn.suggestedSpendAccountId||void 0}),zt&&n.jsx(xj,{isOpen:Oa,onClose:()=>ea(!1),onConfirm:dt,expenseAmount:zt.expenseAmount,roundedAmount:zt.roundedAmount,currency:i.currency,goals:d,onMute:kt}),n.jsx(gN,{isOpen:Ue,onClose:()=>it(!1),context:ni,settings:i,isOffline:W}),n.jsx(aN,{isOpen:Ve,onClose:()=>ke(!1),settings:i,onUpdateSettings:w,onAchievementClick:de=>{ze(de),mt(!0),ke(!1)},onOpenAbout:()=>Kt(!0)}),n.jsx(lN,{isOpen:Ft,onClose:()=>fe(!1),notifications:N,onNotificationClick:async de=>{if(de.achievementId&&(ze(de.achievementId),mt(!0)),de.action&&de.action.type===\"verify_subscription\"&&de.action.status===\"completed\"){const{description:Fe,amount:Ee,category:rt,accountId:Ct,date:et}=de.action.payload;try{await me({type:\"expense\",description:Fe,amount:Ee,category:rt,accountId:Ct,frequency:\"monthly\",startDate:et||new Date().toISOString().split(\"T\")[0],tags:[\"auto-verified\",\"subscription\"]}),ce.success(`Verified: ${Fe} is now a recurring subscription.`),O(bt=>bt.map(Tt=>Tt.id===de.id?{...Tt,read:!0}:Tt))}catch{ce.error(\"Failed to automate subscription.\")}}else de.action&&de.action.status===\"dismissed\"&&(ce.info(\"Marked as one-time purchase.\"),O(Fe=>Fe.map(Ee=>Ee.id===de.id?{...Ee,read:!0}:Ee)));de.action||(de.category===\"reminders\"?je(\"recurring\"):de.category===\"transactions\"&&je(\"transactions\"),fe(!1))},onMarkAsRead:de=>{O(Fe=>Fe.map(Ee=>Ee.id===de?{...Ee,read:!0}:Ee))},onClearRead:()=>{O(de=>de.filter(Fe=>!Fe.read)),ce.success(\"Read notifications cleared\")}}),n.jsx(rN,{isOpen:lt,onClose:()=>{mt(!1),ze(null)},achievementId:Se}),n.jsx(oN,{isOpen:k,onClose:Q,accounts:h,goals:d,currency:i.currency,destinationType:U,emergencyFund:{currentAmount:E,targetAmount:1e5},onAllocate:ae,liabilities:g,expenses:l}),n.jsx(dN,{isOpen:_a,onClose:()=>ga(!1),accounts:h,currency:i.currency,onTransfer:v}),n.jsx(yN,{isOpen:Ra,onClose:()=>Kt(!1)})]})},\"main-app\")}),Y&&n.jsx(Rp,{open:!0,onOpenChange:()=>V(null),children:n.jsxs(Op,{className:\"bg-slate-900/95 border-white/10 text-slate-100 z-[99999999] backdrop-blur-xl\",children:[n.jsxs(zp,{children:[n.jsx(Up,{className:\"text-white text-xl font-bold font-sans\",children:\"Backfill Configuration Required\"}),n.jsxs(Ip,{className:\"text-slate-400 text-base\",children:[\"System detected \",n.jsxs(\"span\",{className:\"text-emerald-400 font-bold\",children:[Y.count,\" missing entries\"]}),\" in the transaction history\",Y.dates?.length>0&&n.jsxs(n.Fragment,{children:[\" \",\"from \",n.jsx(\"span\",{className:\"text-white font-medium\",children:Y.dates[0]?.toLocaleDateString(\"en-IN\",{day:\"numeric\",month:\"short\",year:\"numeric\"})}),\" \",\"to \",n.jsx(\"span\",{className:\"text-white font-medium\",children:Y.dates[Y.dates.length-1]?.toLocaleDateString(\"en-IN\",{day:\"numeric\",month:\"short\",year:\"numeric\"})})]}),\".\",n.jsx(\"br\",{}),n.jsx(\"br\",{}),\"Would you like to auto-populate the ledger for this period?\"]})]}),n.jsxs(Lp,{className:\"mt-4\",children:[n.jsx(qp,{onClick:()=>V(null),className:\"bg-white/5 border-white/5 text-slate-400 hover:text-white hover:bg-white/10 rounded-xl h-12 uppercase tracking-wider text-xs font-bold\",children:\"Cancel\"}),n.jsx(Bp,{onClick:()=>{te(),V(null)},className:\"bg-indigo-600 hover:bg-indigo-500 text-white border-0 font-bold rounded-xl h-12 px-8 shadow-lg shadow-indigo-600/20\",children:\"Generate Ledger\"})]})]})}),n.jsx(d1,{position:\"bottom-center\",richColors:!0,theme:\"dark\",toastOptions:{style:{background:\"#1C1C1E\",border:\"1px solid rgba(255, 255, 255, 0.1)\",color:\"#FFFFFF\",borderRadius:\"20px\",backdropFilter:\"none\",zIndex:9999999}},className:\"!z-[9999999]\"})]})}function DN({children:i,...l}){return n.jsx(jj,{...l,children:i})}function MN(i={}){const{immediate:l=!1,onNeedRefresh:o,onOfflineReady:u,onRegistered:d,onRegisteredSW:h,onRegisterError:g}=i;let N,E;const S=async(f=!0)=>{await E};async function p(){if(\"serviceWorker\"in navigator){if(N=await Fa(async()=>{const{Workbox:f}=await import(\"./workbox-window.prod.es5-BIl4cyR9.js\");return{Workbox:f}},[]).then(({Workbox:f})=>new f(\"/sw.js\",{scope:\"/\",type:\"classic\"})).catch(f=>{g?.(f)}),!N)return;N.addEventListener(\"activated\",f=>{(f.isUpdate||f.isExternal)&&window.location.reload()}),N.addEventListener(\"installed\",f=>{f.isUpdate||u?.()}),N.register({immediate:l}).then(f=>{h?h(\"/sw.js\",f):d?.(f)}).catch(f=>{g?.(f)})}}return E=p(),S}MN({immediate:!0});wv.createRoot(document.getElementById(\"root\")).render(n.jsx(H1,{children:n.jsx(DN,{attribute:\"class\",defaultTheme:\"dark\",forcedTheme:\"dark\",children:n.jsx(TN,{})})}));export{Bn as A,Re as B,Ki as C,us as D,Tu as E,C0 as F,LN as G,z0 as H,wt as I,L0 as J,ye as L,Qu as M,Ha as N,Ut as S,Ru as T,Uu as W,at as a,u0 as b,Zi as c,hu as d,pu as e,Ne as f,gu as g,Fu as h,mj as i,fp as j,Ot as k,De as l,Le as m,Iu as n,ds as o,fs as p,ms as q,hs as r,Bt as s,ce as t,Gp as u,It as v,qt as w,qe as x,vu as y,ai as z};"
      },
      {
        "file": "android\\app\\src\\main\\assets\\public\\assets\\index-i0Euu4OB.js",
        "line": 59,
        "snippet": "`.trim();return await Hp(h,g,S,u)},eN=async(i,l)=>await Hp(i,l,\"Respond with only the word 'OK' to verify connectivity.\",\"ASSISTANT\"),tN=i=>{if(i.aiProvider&&al(i.aiProvider,i))return i.aiProvider;const l=[\"openai\",\"anthropic\",\"gemini\",\"deepseek\",\"perplexity\"];for(const o of l)if(al(o,i))return o;return null},_0={BASE_URL:\"/\",DEV:!1,MODE:\"production\",PROD:!0,SSR:!1},aN=({isOpen:i,onClose:l,settings:o,onUpdateSettings:u,onAchievementClick:d,onOpenAbout:h})=>{const[g,N]=x.useState(o.name||\"\"),[E,S]=x.useState(o.photoURL||\"\"),[p,f]=x.useState(!1),[w,A]=x.useState(null),[T,C]=x.useState({}),[M,y]=x.useState(!1),{logout:L,scheduleAccountDeletion:z,migrateSubscriptions:j,cleanupDuplicates:G,clearAllData:ee}=ai(),[Z,_]=x.useState(!1),B=async()=>{y(!0);try{await j()}catch(fe){console.error(\"Migration failed:\",fe),ce.error(\"Migration failed\")}finally{y(!1)}},[J,ne]=x.useState(\"USD\"),[F,oe]=x.useState(\"100\"),[ge,O]=x.useState(\"100000\"),[k,U]=x.useState(\"10\"),[Q,ae]=x.useState(\"6\"),[v,D]=x.useState(!1),W=async()=>{const Se={USD:\"US\",INR:\"IN\",GBP:\"GB\",EUR:\"EMU\",AED:\"AE\",SAR:\"SA\"}[o.currency]||\"US\";D(!0);try{const lt=await(await fetch(`https://api.worldbank.org/v2/country/${Se}/indicator/FP.CPI.TOTL.ZG?format=json&per_page=1`)).json();if(lt&&lt[1]&&lt[1][0]&&lt[1][0].value){const mt=lt[1][0].value;ae(mt.toFixed(2)),ce.success(`Inflation rate synced for ${o.currency}`)}}catch(ze){console.error(\"Inflation sync failed:\",ze),ce.error(\"Failed to sync inflation rate.\")}finally{D(!1)}},q=Array.from({length:(parseInt(k)||0)+1},(fe,Se)=>{const ze=parseFloat(ge)||0,lt=parseFloat(Q)||0,mt=ze*Math.pow(1+lt/100,Se),_a=ze/Math.pow(1+lt/100,Se);return{year:Se,futureCost:Math.round(mt),purchasingPower:Math.round(_a)}}),Y=[\"INR\",\"USD\",\"EUR\",\"GBP\",\"AED\",\"SAR\"],V=o.currency;x.useEffect(()=>{N(o.name||\"\"),S(o.photoURL||\"\")},[o]),x.useEffect(()=>{i&&te()},[i,J]);const te=async()=>{try{const Se=await(await fetch(`https://api.exchangerate-api.com/v4/latest/${J}`)).json();C(Se.rates||{}),F&&me(F,Se.rates)}catch(fe){console.error(\"Error loading exchange rates:\",fe)}},me=(fe,Se)=>{const ze=parseFloat(fe);if(!isNaN(ze)&&ze>0){const mt=(Se||T)[V]||1;A(ze*mt)}else A(null)},ie=fe=>{oe(fe),me(fe)},{setTheme:le}=wj();x.useEffect(()=>{o.theme!==\"dark\"&&(le(\"dark\"),u({theme:\"dark\"}))},[]);const je=()=>{u({name:g,photoURL:E}),f(!1)},Ae=fe=>{const Se=fe.target.files?.[0];if(Se){const ze=new FileReader;ze.onloadend=()=>{S(ze.result)},ze.readAsDataURL(Se)}},pe=U1(),ve=new Set(o.unlockedAchievements),xe=o.aiProvider||\"openai\",Ke=[{id:\"openai\",label:\"OpenAI\",placeholder:\"sk-...\"},{id:\"anthropic\",label:\"Anthropic\",placeholder:\"sk-ant-...\"},{id:\"gemini\",label:\"Gemini\",placeholder:\"AIza...\"},{id:\"deepseek\",label:\"Deepseek\",placeholder:\"sk-...\"},{id:\"perplexity\",label:\"Perplexity\",placeholder:\"pplx-...\"}],[We,Ue]=x.useState(!1),[it,Ve]=x.useState(null),ke=x.useCallback((fe,Se)=>{u({[fe]:Se})},[u]),Ft=async()=>{const fe=al(xe,o);if(!fe){ce.error(\"No API key found in Settings or System Environment\");return}Ue(!0),Ve(null);try{const Se=await eN(xe,fe);Se.error?(Ve({success:!1,message:Se.error}),ce.error(`Connection failed: ${Se.error}`)):(Ve({success:!0,message:\"Neural link established.\"}),ce.success(\"Connection successful!\"))}catch(Se){const ze=Se.message||\"Unknown error\";console.error(\"Settings save error:\",Se),ce.error(`${at.common.status.error}: ${ze}`)}finally{Ue(!1)}};return n.jsx(kp,{open:i,onOpenChange:l,children:n.jsxs(Dp,{side:\"left\",className:\"w-full sm:max-w-lg overflow-y-auto px-0 bg-slate-950 border-white/5 text-slate-100 h-dvh\",children:[n.jsx(Mp,{className:\"sr-only\",children:\"Settings\"}),n.jsx(_p,{className:\"sr-only\",children:\"Customize your FinHub core experience.\"}),n.jsxs(\"div\",{className:\"space-y-12 animate-in fade-in slide-in-from-left-4 duration-500 px-8 pt-12 pb-10 text-white relative\",children:[n.jsx(\"div\",{className:\"absolute top-4 right-4 z-20\",children:n.jsx(Re,{variant:\"ghost\",size:\"icon\",onClick:l,className:\"w-10 h-10 rounded-full bg-white/5 text-slate-400 hover:text-white hover:bg-white/10\",children:n.jsx(il,{className:\"w-5 h-5\"})})}),n.jsxs(\"div\",{className:\"flex flex-col gap-2\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-1.5 h-8 bg-indigo-500 rounded-full shadow-[0_0_15px_rgba(99,102,241,0.5)]\"}),n.jsx(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tight leading-none text-white\",children:\"System Config\"})]}),n.jsx(\"p\",{className:\"text-slate-500 font-bold ml-4 text-sm\",children:\"Customize your FinHub core experience.\"})]}),n.jsxs(\"div\",{className:\"space-y-10\",children:[n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"h3\",{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Su,{className:\"w-3.5 h-3.5\"}),\"User Identity\"]}),n.jsx(Re,{variant:\"ghost\",size:\"sm\",onClick:()=>f(!p),className:\"text-[10px] font-black uppercase tracking-widest text-indigo-400 hover:text-indigo-300 hover:bg-white/5\",children:p?\"Abort\":\"Refine\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-8 bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-indigo-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsxs(\"div\",{className:\"relative\",children:[E?n.jsx(\"img\",{src:E,alt:\"Profile\",className:\"w-24 h-24 rounded-full object-cover border-4 border-slate-800 shadow-2xl\"}):n.jsx(\"div\",{className:\"w-24 h-24 bg-gradient-to-br from-indigo-600 to-purple-700 rounded-full flex items-center justify-center shadow-2xl\",children:n.jsx(Su,{className:\"w-12 h-12 text-white/90\"})}),p&&n.jsxs(\"label\",{className:\"absolute bottom-0 right-0 w-9 h-9 bg-indigo-600 rounded-full flex items-center justify-center cursor-pointer hover:bg-indigo-500 shadow-lg border-4 border-slate-900 transition-transform active:scale-90\",children:[n.jsx(ry,{className:\"w-4 h-4 text-white\"}),n.jsx(\"input\",{type:\"file\",accept:\"image/*\",className:\"hidden\",onChange:Ae,\"aria-label\":\"Upload profile picture\"})]})]}),n.jsx(\"div\",{className:\"flex-1 min-w-0\",children:p?n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(ye,{htmlFor:\"settings-profile-name\",className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Alias\"}),n.jsx(wt,{id:\"settings-profile-name\",name:\"name\",placeholder:\"e.g. Maverick\",value:g,onChange:fe=>N(fe.target.value),className:\"bg-white/5 border-white/5 rounded-xl h-12 text-white placeholder:text-slate-700 font-bold\",autoComplete:\"name\"})]}),n.jsx(Re,{size:\"sm\",onClick:je,className:\"w-full h-12 bg-indigo-600 hover:bg-indigo-500 text-white font-black rounded-xl\",children:\"Commit Identity\"})]}):n.jsxs(n.Fragment,{children:[n.jsx(\"h4\",{className:\"text-2xl font-black text-slate-100 tracking-tight\",children:g||\"Guest User\"}),n.jsx(\"p\",{className:\"text-xs text-slate-500 font-bold uppercase tracking-widest mt-1\",children:\"FinHub Node // 0x50.3\"})]})})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsx(\"div\",{className:\"space-y-4\",children:n.jsxs(\"button\",{onClick:()=>u({roundUpEnabled:!o.roundUpEnabled}),className:`w-full flex items-center justify-between p-6 rounded-[32px] border transition-all relative overflow-hidden group ${o.roundUpEnabled?\"bg-emerald-500/10 border-emerald-500/50 shadow-[0_0_20px_rgba(16,185,129,0.1)]\":\"bg-slate-900/40 border-white/5 grayscale opacity-60 hover:opacity-100 hover:grayscale-0\"}`,children:[n.jsx(\"div\",{className:`absolute top-0 right-0 w-24 h-24 blur-3xl opacity-10 -mr-12 -mt-12 transition-colors ${o.roundUpEnabled?\"bg-emerald-500\":\"bg-slate-500\"}`}),n.jsxs(\"div\",{className:\"space-y-1 relative z-10 flex-1 pr-4 text-left\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-2 text-sm font-black text-slate-100 uppercase tracking-tight\",children:[n.jsx(qn,{className:`w-4 h-4 ${o.roundUpEnabled?\"text-emerald-500\":\"text-slate-500\"}`}),\"Virtual Round-Ups\"]}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 font-bold leading-relaxed uppercase tracking-widest\",children:\"Build your fortress automatically via expense spillover.\"})]}),n.jsx(\"div\",{className:`relative z-10 px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${o.roundUpEnabled?\"bg-emerald-500 text-white shadow-lg shadow-emerald-500/20\":\"bg-slate-800 text-slate-500\"}`,children:o.roundUpEnabled?\"Active\":\"Offline\"})]})}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(ye,{htmlFor:\"settings-currency\",className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Gh,{className:\"w-3.5 h-3.5\"}),\"Standard Denomination\"]}),n.jsxs(\"div\",{className:\"bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-indigo-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsx(\"div\",{className:\"space-y-2 relative z-10\",children:n.jsxs(Ut,{value:o.currency,onValueChange:fe=>u({currency:fe}),children:[n.jsx(Bt,{id:\"settings-currency\",name:\"currency\",className:\"bg-white/5 border-white/5 rounded-2xl h-14 font-black\",children:n.jsx(It,{})}),n.jsxs(qt,{className:\"bg-slate-900 border-white/10 text-white\",children:[n.jsx(qe,{value:\"USD\",children:\"USD ($) - US Dollar\"}),n.jsx(qe,{value:\"EUR\",children:\"EUR (€) - Euro\"}),n.jsx(qe,{value:\"GBP\",children:\"GBP (£) - British Pound\"}),n.jsx(qe,{value:\"INR\",children:\"INR (₹) - Indian Rupee\"}),n.jsx(qe,{value:\"AED\",children:\"AED (د.إ) - UAE Dirham\"}),n.jsx(qe,{value:\"SAR\",children:\"SAR (﷼) - Saudi Riyal\"})]})]})})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(ye,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Gh,{className:\"w-3.5 h-3.5\"}),\"Foreign Exchange Probe\"]}),n.jsxs(\"div\",{className:\"space-y-6 p-6 bg-slate-900/40 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-blue-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4 relative z-10\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(ye,{htmlFor:\"converter-from-currency\",className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Source\"}),n.jsxs(Ut,{value:J,onValueChange:fe=>{ne(fe)},children:[n.jsx(Bt,{id:\"converter-from-currency\",name:\"fromCurrency\",className:\"bg-white/5 border-white/5 rounded-2xl h-12\",children:n.jsx(It,{})}),n.jsx(qt,{className:\"bg-slate-900 border-white/10 text-white\",children:Y.map(fe=>n.jsxs(qe,{value:fe,children:[dn[fe],\" \",fe]},fe))})]})]}),n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(ye,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Target\"}),n.jsxs(\"div\",{className:\"h-12 flex items-center justify-center bg-indigo-500/10 rounded-2xl border border-indigo-500/20 text-xs font-black text-indigo-400\",children:[dn[V],\" \",V]})]})]}),n.jsxs(\"div\",{className:\"space-y-1.5 relative z-10\",children:[n.jsx(ye,{htmlFor:\"converter-amount\",className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Capital Amount\"}),n.jsx(wt,{id:\"converter-amount\",name:\"amount\",type:\"number\",placeholder:\"Enter amount\",value:F,onChange:fe=>{const Se=fe.target.value;parseFloat(Se)<0||ie(Se)},min:\"0\",className:\"bg-white/5 border-white/5 rounded-2xl h-14 font-black text-lg\",autoComplete:\"off\"})]}),w!==null&&n.jsxs(\"div\",{className:\"p-6 bg-white/5 rounded-2xl border border-white/5 animate-in fade-in slide-in-from-top-2 relative z-10\",children:[n.jsx(\"p\",{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 mb-2\",children:\"Calculated Projection\"}),n.jsxs(\"div\",{className:\"flex items-baseline gap-2\",children:[n.jsxs(\"p\",{className:\"text-2xl font-black text-emerald-400 tabular-nums\",children:[dn[V],w.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold uppercase tracking-widest\",children:\"ESTIMATED VALUATION\"})]}),T[V]&&n.jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-white/5 flex items-center justify-between\",children:[n.jsx(\"span\",{className:\"text-[8px] font-black uppercase tracking-[0.2em] text-slate-700\",children:\"Interest Rate\"}),n.jsxs(\"span\",{className:\"text-[10px] font-black text-slate-500 tabular-nums\",children:[\"1 \",J,\" = \",T[V].toFixed(4),\" \",V]})]})]})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(ye,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(qn,{className:\"w-3.5 h-3.5 text-rose-500\"}),\"Inflation Projection Node\"]}),n.jsxs(\"div\",{className:\"space-y-6 p-6 bg-slate-900/40 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-rose-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsxs(\"div\",{className:\"space-y-4 relative z-10\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(ye,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Current Capital\"}),n.jsx(wt,{type:\"number\",value:ge,onChange:fe=>O(fe.target.value),className:\"bg-white/5 border-white/5 rounded-2xl h-12 font-black\",placeholder:\"e.g. 1000000\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(ye,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Horizon (Years)\"}),n.jsx(wt,{type:\"number\",value:k,onChange:fe=>U(fe.target.value),className:\"bg-white/5 border-white/5 rounded-2xl h-12 font-black\"})]}),n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between ml-1\",children:[n.jsx(ye,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500\",children:\"Rate (%)\"}),n.jsxs(\"button\",{onClick:W,disabled:v,className:\"text-[8px] font-black uppercase text-indigo-400 hover:text-indigo-300 disabled:opacity-50 flex items-center gap-1\",children:[v?n.jsx(Xc,{className:\"w-2 h-2 animate-spin\"}):n.jsx(oy,{className:\"w-2 h-2\"}),\"Sync\"]})]}),n.jsx(wt,{type:\"number\",value:Q,onChange:fe=>ae(fe.target.value),className:\"bg-white/5 border-white/5 rounded-2xl h-12 font-black\"})]})]}),ge&&n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(\"div\",{className:\"h-32 w-full bg-black/20 rounded-2xl p-2 border border-white/5 overflow-hidden\",children:n.jsx(mv,{width:\"100%\",height:\"100%\",minHeight:128,minWidth:100,children:n.jsxs(hv,{data:q,children:[n.jsxs(\"defs\",{children:[n.jsxs(\"linearGradient\",{id:\"colorCost\",x1:\"0\",y1:\"0\",x2:\"0\",y2:\"1\",children:[n.jsx(\"stop\",{offset:\"5%\",stopColor:\"#FB7185\",stopOpacity:.3}),n.jsx(\"stop\",{offset:\"95%\",stopColor:\"#FB7185\",stopOpacity:0})]}),n.jsxs(\"linearGradient\",{id:\"colorPower\",x1:\"0\",y1:\"0\",x2:\"0\",y2:\"1\",children:[n.jsx(\"stop\",{offset:\"5%\",stopColor:\"#34D399\",stopOpacity:.3}),n.jsx(\"stop\",{offset:\"95%\",stopColor:\"#34D399\",stopOpacity:0})]})]}),n.jsx(pv,{strokeDasharray:\"3 3\",vertical:!1,stroke:\"rgba(255,255,255,0.05)\"}),n.jsx(gv,{contentStyle:{backgroundColor:\"#0f172a\",border:\"1px solid rgba(255,255,255,0.1)\",borderRadius:\"8px\",fontSize:\"10px\"},itemStyle:{color:\"#fff\",padding:\"2px 0\"}}),n.jsx(Xh,{type:\"monotone\",dataKey:\"futureCost\",stroke:\"#FB7185\",fillOpacity:1,fill:\"url(#colorCost)\"}),n.jsx(Xh,{type:\"monotone\",dataKey:\"purchasingPower\",stroke:\"#34D399\",fillOpacity:1,fill:\"url(#colorPower)\"})]})})}),n.jsxs(\"div\",{className:\"p-6 bg-white/5 rounded-2xl border border-white/5 space-y-4\",children:[n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 mb-2\",children:\"Future Cost\"}),n.jsxs(\"p\",{className:\"text-xl font-black text-rose-400 tabular-nums\",children:[dn[o.currency],Math.round(parseFloat(ge)*Math.pow(1+parseFloat(Q)/100,parseFloat(k))).toLocaleString()]})]}),n.jsxs(\"div\",{className:\"pt-4 border-t border-white/5\",children:[n.jsx(\"p\",{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 mb-2\",children:\"Real Purchasing Power\"}),n.jsxs(\"p\",{className:\"text-xl font-black text-emerald-400 tabular-nums\",children:[dn[o.currency],Math.round(parseFloat(ge)/Math.pow(1+parseFloat(Q)/100,parseFloat(k))).toLocaleString()]}),n.jsx(\"p\",{className:\"text-[8px] text-slate-600 font-bold uppercase tracking-widest mt-1\",children:\"VALUATION IN TODAY'S MONEY\"})]})]})]})]})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(ye,{className:\"text-[10px] font-bold uppercase tracking-[0.2em] text-slate-500 flex items-center gap-2\",children:[n.jsx(cy,{className:\"w-3.5 h-3.5 text-indigo-400\"}),\"AI Assistant Config\"]}),n.jsxs(\"div\",{className:\"space-y-6 bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsxs(\"div\",{className:\"space-y-1.5 relative z-10\",children:[n.jsx(ye,{htmlFor:\"ai-provider-select\",className:\"text-[9px] font-bold uppercase tracking-widest text-slate-500 ml-1\",children:\"Preferred Provider\"}),n.jsxs(Ut,{value:xe,onValueChange:fe=>u({aiProvider:fe}),children:[n.jsx(Bt,{id:\"ai-provider-select\",name:\"aiProvider\",className:\"bg-slate-900 border-white/5 rounded-xl h-11 text-[10px] font-bold uppercase tracking-widest\",children:n.jsx(It,{})}),n.jsx(qt,{className:\"bg-slate-900 border-white/10 text-white\",children:Ke.map(fe=>n.jsx(qe,{value:fe.id,className:\"text-[10px] font-bold uppercase tracking-widest\",children:fe.label},fe.id))})]})]}),n.jsxs(\"div\",{className:\"space-y-4 pt-2 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between px-1\",children:[n.jsx(ye,{className:\"text-[9px] font-bold uppercase tracking-widest text-slate-500\",children:\"Active Credential\"}),n.jsx(\"div\",{className:\"flex items-center gap-1.5\",children:n.jsx(\"span\",{className:\"text-[8px] font-bold text-indigo-400/70 uppercase tracking-tighter\",children:Ke.find(fe=>fe.id===xe)?.label})})]}),Ke.filter(fe=>fe.id===xe).map(fe=>{const Se=o.apiKeys?.[fe.id],ze=`VITE_${fe.id.toUpperCase()}_API_KEY`,lt=!!_0[ze];return n.jsxs(\"div\",{className:\"flex items-center gap-3 bg-indigo-500/5 p-4 rounded-2xl border border-indigo-500/20 group/active transition-all\",children:[n.jsx(\"div\",{className:\"flex-1 min-w-0\",children:n.jsxs(\"div\",{className:\"relative group/input\",children:[n.jsx(wt,{type:\"password\",value:Se||\"\",onChange:mt=>ke(\"apiKeys\",{...o.apiKeys,[fe.id]:mt.target.value}),placeholder:lt?\"Using System Environment Key\":`Enter ${fe.label} Key`,className:`bg-transparent border-none p-0 h-auto text-sm font-bold text-white placeholder:text-slate-700 focus-visible:ring-0 shadow-none ${lt&&!Se?\"opacity-40 italic font-medium\":\"\"}`,disabled:lt&&!Se}),lt&&!Se&&n.jsx(\"div\",{className:\"flex items-center gap-1 mt-1\",children:n.jsx(\"span\",{className:\"text-[7px] font-black text-emerald-500 uppercase tracking-widest bg-emerald-500/10 px-1 py-0.5 rounded\",children:\"System Linked\"})})]})}),Se&&n.jsx(\"button\",{onClick:()=>ke(\"apiKeys\",{...o.apiKeys,[fe.id]:\"\"}),className:\"text-slate-600 hover:text-rose-500 transition-colors p-1\",title:\"Clear saved key\",\"aria-label\":`Clear saved key for ${fe.label}`,children:n.jsx(tl,{className:\"w-3.5 h-3.5\"})})]},fe.id)}),n.jsx(Re,{onClick:Ft,disabled:We||!al(xe,o),className:`w-full h-11 transition-all font-bold uppercase tracking-[0.2em] text-[10px] rounded-xl ${it?.success?\"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20\":it?.success===!1?\"bg-rose-500/10 text-rose-400 border border-rose-500/20\":\"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20\"}`,children:We?n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(Xc,{className:\"w-3.5 h-3.5 animate-spin\"}),\"Verifying...\"]}):it?.success?n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(Cu,{className:\"w-3.5 h-3.5\"}),\"Link Stable\"]}):\"Validate Connection\"})]}),n.jsxs(Tj,{className:\"relative z-10\",children:[n.jsx(Dj,{asChild:!0,children:n.jsxs(Re,{variant:\"ghost\",className:\"w-full h-8 hover:bg-white/5 text-slate-500 hover:text-slate-300 text-[8px] font-bold uppercase tracking-widest group/trigger flex items-center justify-between px-2 rounded-lg\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(uy,{className:\"w-3 h-3 text-slate-600 group-hover/trigger:text-slate-400\"}),\"Alternative Nodes\"]}),n.jsx(nl,{className:\"w-3 h-3 transition-transform duration-300 group-data-[state=open]/trigger:rotate-180\"})]})}),n.jsx(Mj,{className:\"pt-4 space-y-3 animate-in fade-in slide-in-from-top-2 duration-300\",children:n.jsx(\"div\",{className:\"grid gap-2\",children:Ke.filter(fe=>fe.id!==xe).map(fe=>{const Se=o.apiKeys?.[fe.id],ze=`VITE_${fe.id.toUpperCase()}_API_KEY`,lt=!!_0[ze];return n.jsxs(\"div\",{className:\"flex items-center gap-3 bg-slate-950/40 p-3 rounded-xl border border-white/5 hover:border-white/10 transition-colors\",children:[n.jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between mb-1\",children:[n.jsx(\"span\",{className:\"text-[8px] font-bold uppercase tracking-wider text-slate-500\",children:fe.label}),lt&&!Se&&n.jsx(\"span\",{className:\"text-[7px] font-bold text-emerald-500/50 uppercase tracking-tighter\",children:\"System\"})]}),n.jsx(wt,{type:\"password\",value:Se||\"\",onChange:mt=>ke(\"apiKeys\",{...o.apiKeys,[fe.id]:mt.target.value}),placeholder:lt?\"Using System Default\":\"Key not found\",className:\"bg-transparent border-none p-0 h-auto text-[10px] text-slate-400 placeholder:text-slate-800 focus-visible:ring-0 shadow-none italic font-medium cursor-not-allowed\",disabled:lt&&!Se})]}),Se&&n.jsx(\"button\",{onClick:()=>ke(\"apiKeys\",{...o.apiKeys,[fe.id]:\"\"}),className:\"text-slate-800 hover:text-rose-500 transition-colors p-1\",title:\"Clear saved key\",\"aria-label\":`Clear saved key for ${fe.label}`,children:n.jsx(tl,{className:\"w-3 h-3\"})})]},fe.id)})})})]})]})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(ye,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Qc,{className:\"w-3.5 h-3.5 text-indigo-400\"}),\"Data Optimization Node\"]}),n.jsxs(\"div\",{className:\"p-6 bg-slate-900/40 rounded-[32px] border border-white/5 relative overflow-hidden\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-300\",children:at.settings.subscriptionScanner}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-wide mt-1\",children:\"DETECT & MIGRATE RECURRING SIGNALS\"})]}),n.jsx(Re,{onClick:B,disabled:M,className:\"bg-indigo-600 hover:bg-indigo-500 text-white font-black uppercase tracking-widest text-[9px] h-9 px-4 rounded-xl shadow-lg shadow-indigo-500/20\",children:M?n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(Xc,{className:\"w-3 h-3 animate-spin\"}),\"Scanning...\"]}):\"Execute Scan\"})]}),n.jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-white/5 flex items-center justify-between\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-300\",children:\"Redundancy Purge\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-wide mt-1\",children:\"REMOVE BLANK & DUPLICATE ENTRIES\"})]}),n.jsx(Re,{onClick:async()=>{const fe=ce.loading(\"Purging duplicates...\");try{const Se=await G();ce.dismiss(fe)}catch{ce.dismiss(fe),ce.error(\"Purge failed\")}},className:\"bg-rose-500/10 hover:bg-rose-500/20 text-rose-400 border border-rose-500/20 font-black uppercase tracking-widest text-[9px] h-9 px-4 rounded-xl\",children:at.settings.cleanupDuplicates})]})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(ye,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(dy,{className:\"w-3.5 h-3.5 text-amber-500\"}),at.settings.achievementLevel,\" (\",o.unlockedAchievements.length,\"/\",pe.length,\")\"]}),n.jsx(\"div\",{className:\"grid grid-cols-4 sm:grid-cols-6 gap-3\",children:pe.map(fe=>{const Se=ve.has(fe.id);return n.jsx(\"button\",{onClick:()=>{Se&&d&&d(fe.id)},disabled:!Se,className:`w-12 h-12 rounded-xl border flex items-center justify-center text-xl transition-all ${Se?\"border-amber-500/50 bg-amber-500/10 grayscale-0 hover:scale-110 hover:shadow-lg hover:shadow-amber-500/20 active:scale-95\":\"border-white/5 bg-white/5 grayscale opacity-20 cursor-not-allowed\"}`,children:fe.icon},fe.id)})}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 font-bold text-center leading-relaxed\",children:o.unlockedAchievements.length>0?at.settings.achievementSelect:at.settings.achievementLocked})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsx(\"div\",{className:\"space-y-4\",children:n.jsxs(\"div\",{className:\"p-4 bg-rose-500/5 border border-rose-500/10 rounded-2xl flex items-center justify-between\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"text-[10px] font-black uppercase tracking-widest text-rose-400\",children:at.settings.factoryReset}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-wide mt-1\",children:at.settings.wipeDescription})]}),n.jsx(Re,{onClick:async()=>{confirm(\"Are you sure? This deletes ALL transaction data.\")&&await ee()},className:\"bg-slate-950 hover:bg-rose-500 text-rose-500 hover:text-white border border-rose-500/20 font-black uppercase tracking-widest text-[9px] h-9 px-4 rounded-xl transition-colors\",children:at.settings.wipeData})]})}),n.jsx(_j,{className:\"bg-white/5\"}),n.jsxs(\"div\",{className:\"text-center pt-8 space-y-2 opacity-40 hover:opacity-100 transition-opacity duration-700 pb-10\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-[0.5em] text-slate-100\",children:\"Obsidian System Node\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-widest\",children:\"Architect: Sijo Joseph // BUILD 50.3.0 // QUANTUM CORE\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-700 uppercase tracking-widest mt-4\",children:\"© 2025 NEURAL FINHUB FABRIC\"}),n.jsxs(\"button\",{onClick:h,className:\"mt-4 text-[8px] font-black text-indigo-400/60 hover:text-indigo-400 uppercase tracking-[0.2em] transition-colors\",children:[\"[ \",at.settings.about,\" ]\"]})]}),n.jsxs(\"div\",{className:\"px-2 pb-10\",children:[n.jsxs(Re,{variant:\"outline\",onClick:()=>{L(),l()},className:\"w-full h-14 bg-white/5 hover:bg-white/10 border-white/10 hover:border-white/20 text-white/60 hover:text-white font-black uppercase tracking-widest gap-3 rounded-[24px] transition-all group mb-4\",children:[n.jsx(fy,{className:\"w-5 h-5 group-hover:-translate-x-1 transition-transform\"}),\"Terminate Session\"]}),n.jsxs(Rp,{open:Z,onOpenChange:_,children:[n.jsx(Rj,{asChild:!0,children:n.jsxs(Re,{variant:\"outline\",className:\"w-full h-14 bg-rose-500/5 hover:bg-rose-500/10 border-rose-500/20 hover:border-rose-500/40 text-rose-500 font-black uppercase tracking-widest gap-3 rounded-[24px] transition-all group\",children:[n.jsx(Qc,{className:\"w-5 h-5 group-hover:scale-110 transition-transform\"}),\"Delete Account & Data\"]})}),n.jsxs(Op,{className:\"bg-slate-950 border-white/10 text-white rounded-[32px] p-8\",children:[n.jsxs(zp,{children:[n.jsxs(Up,{className:\"text-2xl font-black tracking-tight flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"p-2 rounded-full bg-rose-500/20 text-rose-500\",children:n.jsx(Qc,{className:\"w-6 h-6\"})}),\"Irreversible Action?\"]}),n.jsxs(Ip,{className:\"text-slate-400 font-medium leading-relaxed mt-4\",children:[\"Your account will be \",n.jsx(\"span\",{className:\"text-white font-bold italic\",children:\"deactivated immediately\"}),\" and scheduled for permanent deletion in \",n.jsx(\"span\",{className:\"text-white font-bold\",children:\"30 days\"}),\".\",n.jsx(\"br\",{}),n.jsx(\"br\",{}),\"Log in anytime before then to cancel this request and restore your data node.\"]})]}),n.jsxs(Lp,{className:\"mt-8 gap-3\",children:[n.jsx(qp,{className:\"h-14 flex-1 rounded-2xl bg-white/5 border-white/10 text-slate-400 hover:bg-white/10 hover:text-white font-black uppercase tracking-widest transition-all\",children:\"Abort\"}),n.jsx(Bp,{onClick:async()=>{await z(),l()},className:\"h-14 flex-1 rounded-2xl bg-rose-600 hover:bg-rose-500 text-white font-black uppercase tracking-widest shadow-lg shadow-rose-500/20 transition-all active:scale-95\",children:\"Confirm Purge\"})]})]})]})]})]})]})})};function nN({onNavigate:i,onOpenSettings:l,onOpenNotifications:o,emergencyFundAmount:u,bankAccountsCount:d,cardsCount:h,currency:g,onOpenAbout:N}){return n.jsxs(\"div\",{className:\"space-y-12 animate-in fade-in slide-in-from-bottom-4 duration-700 px-4 pb-20\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tight leading-none mb-3\",children:\"Settings & Assets\"}),n.jsx(\"p\",{className:\"text-slate-500 font-bold max-w-md\",children:\"Configure your financial universe and manage core system components.\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[n.jsxs(Ot,{className:\"p-8 cursor-pointer bg-black border-white/5 sq-2xl border hover:bg-white/5 transition-all duration-300 group relative overflow-hidden\",onClick:()=>i(\"emergency\"),children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-blue-500 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20\"}),n.jsxs(\"div\",{className:\"relative z-10\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-blue-500/10 border border-blue-500/20 sq-md flex items-center justify-center text-blue-400 mb-8 group-hover:scale-110 transition-transform duration-500\",children:n.jsx(sl,{className:\"w-8 h-8\"})}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100\",children:\"Emergency Fund\"}),n.jsx(\"p\",{className:\"text-2xl font-black tabular-nums text-blue-400\",children:Ne(u,g)})]}),n.jsxs(\"div\",{className:\"mt-8 flex items-center justify-between text-slate-500\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest\",children:\"Financial Safety Net\"}),n.jsx(Ps,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]})]})]}),n.jsxs(Ot,{className:\"p-8 cursor-pointer bg-black border-white/5 sq-2xl border hover:bg-white/5 transition-all duration-300 group relative overflow-hidden\",onClick:()=>i(\"accounts\"),children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-emerald-500 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20\"}),n.jsxs(\"div\",{className:\"relative z-10\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-emerald-500/10 border border-emerald-500/20 sq-md flex items-center justify-center text-emerald-400 mb-8 group-hover:scale-110 transition-transform duration-500\",children:n.jsx(J0,{className:\"w-8 h-8\"})}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100\",children:\"Accounts & Cards\"}),n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsxs(\"div\",{className:\"space-y-0.5\",children:[n.jsx(\"p\",{className:\"text-2xl font-black tabular-nums text-emerald-400\",children:d}),n.jsx(\"p\",{className:\"text-[10px] font-bold text-slate-600 uppercase tracking-wider\",children:\"Banks\"})]}),n.jsx(\"div\",{className:\"w-px h-8 bg-white/5 self-center mt-2\"}),n.jsxs(\"div\",{className:\"space-y-0.5\",children:[n.jsx(\"p\",{className:\"text-2xl font-black tabular-nums text-emerald-400\",children:h}),n.jsx(\"p\",{className:\"text-[10px] font-bold text-slate-600 uppercase tracking-wider\",children:\"Cards\"})]})]})]}),n.jsxs(\"div\",{className:\"mt-8 flex items-center justify-between text-slate-500\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest\",children:\"Manage Liquidity\"}),n.jsx(Ps,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]})]})]})]}),n.jsxs(\"div\",{className:\"pt-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 mb-8\",children:[n.jsx(\"div\",{className:\"w-1.5 h-6 bg-slate-700 rounded-full\"}),n.jsx(\"h3\",{className:\"text-xs font-black uppercase tracking-[0.3em] text-slate-600\",children:\"System Configuration\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 gap-4\",children:[n.jsx(Ot,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group\",onClick:l,children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400 group-hover:text-white transition-colors\",children:n.jsx(my,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"App Settings\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"Preferences & Display\"})]})]}),n.jsx(Ps,{className:\"w-5 h-5 text-slate-700 group-hover:text-slate-400 transition-colors\"})]})}),n.jsx(Ot,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group\",onClick:o,children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400 group-hover:text-white transition-colors\",children:n.jsx(Lu,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"Alert Center\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"System Notifications\"})]})]}),n.jsx(Ps,{className:\"w-5 h-5 text-slate-700 group-hover:text-slate-400 transition-colors\"})]})}),n.jsx(Ot,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group opacity-60 hover:opacity-100\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400\",children:n.jsx(hy,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"Support\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"Documentation & Help\"})]})]}),n.jsx(Ps,{className:\"w-5 h-5 text-slate-700 transition-colors\"})]})}),n.jsx(Ot,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group opacity-60 hover:opacity-100\",onClick:N,children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400\",children:n.jsx(py,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"About\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"Version 5.0 Stable Release\"})]})]}),n.jsx(Ps,{className:\"w-5 h-5 text-slate-700 transition-colors\"})]})})]})]}),n.jsxs(\"div\",{className:\"text-center pt-8 border-t border-white/5\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-[0.5em] text-slate-700 mb-1\",children:\"FinHub Obsidian System\"}),n.jsx(\"p\",{className:\"text-[9px] font-bold text-slate-800\",children:\"BUILD 50.3.0 // QUANTUM CORE\"})]})]})}function sN({className:i,children:l,...o}){return n.jsxs(gy,{\"data-slot\":\"scroll-area\",className:De(\"relative\",i),...o,children:[n.jsx(xy,{\"data-slot\":\"scroll-area-viewport\",className:\"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1\",children:l}),n.jsx(iN,{}),n.jsx(by,{})]})}function iN({className:i,orientation:l=\"vertical\",...o}){return n.jsx(yy,{\"data-slot\":\"scroll-area-scrollbar\",orientation:l,className:De(\"flex touch-none p-px transition-colors select-none\",l===\"vertical\"&&\"h-full w-2.5 border-l border-l-transparent\",l===\"horizontal\"&&\"h-2.5 flex-col border-t border-t-transparent\",i),...o,children:n.jsx(vy,{\"data-slot\":\"scroll-area-thumb\",className:\"bg-border relative flex-1 rounded-full\"})})}function lN({isOpen:i,onClose:l,notifications:o,onNotificationClick:u,onMarkAsRead:d,onClearRead:h}){const g=o.filter(C=>!C.read).length,N=o.filter(C=>C.read).length,E=C=>{switch(C){case\"achievement\":return n.jsx(jy,{className:\"w-5 h-5 text-yellow-500\"});case\"goal\":return n.jsx(Hn,{className:\"w-5 h-5 text-green-500\"});case\"insight\":return n.jsx(qn,{className:\"w-5 h-5 text-blue-500\"});case\"alert\":return n.jsx(el,{className:\"w-5 h-5 text-red-500\"});case\"reminder\":return n.jsx(Nu,{className:\"w-5 h-5 text-indigo-500\"})}},S=C=>{const M=new Date(C),L=new Date().getTime()-M.getTime(),z=Math.floor(L/6e4),j=Math.floor(L/36e5),G=Math.floor(L/864e5);return z<60?`${z}m ago`:j<24?`${j}h ago`:`${G}d ago`},[p,f]=x.useState({reminders:!0,transactions:!0,achievements:!1,insights:!1}),w=C=>{f(M=>({...M,[C]:!M[C]}))},A=[\"reminders\",\"transactions\",\"insights\",\"achievements\"],T=o.reduce((C,M)=>{const y=M.category||\"insights\";return C[y]||(C[y]=[]),C[y].push(M),C},{});return Object.keys(T).forEach(C=>{T[C].sort((M,y)=>M.read!==y.read?M.read?1:-1:new Date(y.timestamp).getTime()-new Date(M.timestamp).getTime())}),n.jsx(kp,{open:i,onOpenChange:l,children:n.jsxs(Dp,{side:\"right\",className:\"w-full sm:max-w-lg p-0 flex flex-col h-dvh max-h-dvh bg-black border-white/5 text-slate-100 overflow-hidden z-[99999]\",children:[n.jsx(Mp,{className:\"sr-only\",children:\"Notifications\"}),n.jsx(_p,{className:\"sr-only\",children:\"Notifications\"}),n.jsxs(\"div\",{className:\"px-8 pt-28 pb-10 border-b border-white/5 bg-black relative overflow-hidden animate-in fade-in slide-in-from-right-4 duration-500\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-48 h-48 bg-indigo-500 blur-[120px] opacity-10 -mr-24 -mt-24\"}),n.jsx(\"div\",{className:\"absolute bottom-0 left-0 w-24 h-24 bg-blue-500 blur-[80px] opacity-5 -ml-12 -mb-12\"}),n.jsx(\"div\",{className:\"absolute top-8 right-8 z-30\",children:n.jsx(Re,{variant:\"ghost\",size:\"icon\",onClick:l,className:\"w-10 h-10 sq-full bg-white/5 text-slate-400 hover:text-white hover:bg-white/10\",children:n.jsx(il,{className:\"w-5 h-5\"})})}),n.jsxs(\"div\",{className:\"flex items-center justify-between relative z-10\",children:[n.jsxs(\"div\",{className:\"flex flex-col gap-2\",children:[n.jsx(\"div\",{className:\"flex items-center gap-4\",children:n.jsxs(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tighter leading-none flex items-center gap-4\",children:[\"Pulse\",g>0&&n.jsx(\"span\",{className:\"flex items-center justify-center min-w-[24px] h-6 px-2 text-[10px] font-black bg-indigo-600 text-white sq-full shadow-[0_0_15px_rgba(79,70,229,0.4)]\",children:g})]})}),n.jsx(\"p\",{className:\"text-slate-500 font-black text-[10px] uppercase tracking-[0.3em] leading-none ml-0.5\",children:\"System Intelligence Stack\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[g>0&&n.jsx(Re,{variant:\"ghost\",size:\"icon\",title:\"Mark all as read\",onClick:()=>{o.forEach(C=>{C.read||d?.(C.id)})},className:\"w-11 h-11 sq-md bg-white/5 text-slate-400 hover:text-indigo-400 hover:bg-white/10 transition-all duration-300 border border-white/5 active:scale-90\",children:n.jsx(wy,{className:\"w-5 h-5\"})}),N>0&&n.jsx(Re,{variant:\"ghost\",size:\"icon\",title:\"Clear history\",onClick:()=>{confirm(`Clear ${N} notifications?`)&&h?.()},className:\"w-11 h-11 sq-md bg-white/5 text-slate-400 hover:text-rose-400 hover:bg-rose-500/10 transition-all duration-300 border border-white/5 active:scale-90\",children:n.jsx(tl,{className:\"w-5 h-5\"})})]})]})]}),n.jsx(sN,{className:\"flex-1 w-full bg-black overflow-hidden custom-scrollbar\",children:n.jsx(\"div\",{className:\"px-6 space-y-12 py-8 pb-32\",children:o.length===0?n.jsxs(\"div\",{className:\"text-center py-32 flex flex-col items-center animate-in fade-in zoom-in duration-700\",children:[n.jsxs(\"div\",{className:\"w-24 h-24 bg-white/5 border border-white/5 sq-2xl flex items-center justify-center text-slate-800 mb-8 shadow-inner relative group\",children:[n.jsx(\"div\",{className:\"absolute inset-0 bg-indigo-500/5 blur-2xl sq-full group-hover:bg-indigo-500/10 transition-colors\"}),n.jsx(Lu,{className:\"w-10 h-10 relative z-10\"})]}),n.jsx(\"h4\",{className:\"text-2xl font-black text-slate-100 mb-3 tracking-tight\",children:\"Signal Silence\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-black uppercase tracking-[0.3em] max-w-[260px] leading-relaxed\",children:\"No new notifications. We will alert you when there are updates.\"})]}):A.map(C=>{const M=T[C]||[];if(M.length===0)return null;const y=p[C],L=y?M.length:1,z=M.filter(j=>!j.read).length;return n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"button\",{onClick:()=>w(C),...y?{\"aria-expanded\":\"true\"}:{\"aria-expanded\":\"false\"},className:\"w-full flex items-center justify-between px-2 group\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-[0.4em] text-slate-500 group-hover:text-slate-300 transition-colors\",children:C}),z>0&&n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 sq-full animate-pulse shadow-[0_0_10px_rgba(99,102,241,0.6)]\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black text-slate-700\",children:M.length}),y?n.jsx(_r,{className:\"w-3 h-3 text-slate-700\"}):n.jsx(nl,{className:\"w-3 h-3 text-slate-700\"})]})]}),n.jsxs(\"div\",{className:\"space-y-3 relative\",children:[!y&&M.length>1&&n.jsxs(n.Fragment,{children:[n.jsx(\"div\",{className:\"absolute top-2 left-2 right-2 h-full bg-black/40 sq-xl -z-10 border border-white/5 translate-y-2 scale-[0.98]\"}),n.jsx(\"div\",{className:\"absolute top-4 left-4 right-4 h-full bg-black/20 sq-xl -z-20 border border-white/5 translate-y-4 scale-[0.96]\"})]}),M.slice(0,L).map((j,G)=>{const ee={style:{\"--anim-delay\":`${G*50}ms`,\"--z-index\":100-G}};return n.jsxs(\"div\",{...ee,className:`p-6 sq-xl border transition-all duration-500 group relative overflow-hidden cursor-pointer active:scale-[0.98] animate-in fade-in slide-in-from-right-4 fill-mode-both [animation-delay:var(--anim-delay)] z-[var(--z-index)] ${j.read?\"bg-black border-white/5\":\"bg-black border-indigo-500/30 shadow-lg shadow-indigo-500/5 hover:border-indigo-500/50\"}`,onClick:Z=>{Z.stopPropagation(),u?.(j),j.read||d?.(j.id)},children:[j.priority===\"high\"&&!j.read&&n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 bg-red-500 blur-[80px] opacity-10 -mr-16 -mt-16\"}),!j.read&&j.priority!==\"high\"&&n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 bg-indigo-500 blur-[80px] opacity-10 -mr-16 -mt-16 group-hover:opacity-20 transition-opacity\"}),n.jsxs(\"div\",{className:\"flex gap-4 relative z-10\",children:[n.jsx(\"div\",{className:`w-12 h-12 sq-md flex items-center justify-center shrink-0 border border-white/5 transition-all duration-500 ${j.read?\"bg-white/5 text-slate-600\":j.priority===\"high\"?\"bg-red-500/10 text-red-400\":\"bg-indigo-500/10 text-indigo-400 shadow-inner\"}`,children:E(j.type)}),n.jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[n.jsxs(\"div\",{className:\"flex items-start justify-between gap-4\",children:[n.jsx(\"h4\",{className:`text-sm font-black tracking-tight leading-tight ${j.read?\"text-slate-500\":\"text-slate-100\"}`,children:j.title}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-700 whitespace-nowrap pt-1\",children:S(j.timestamp)})]}),n.jsx(\"p\",{className:`text-xs mt-2 leading-relaxed font-bold tracking-tight ${j.read?\"text-slate-700\":\"text-slate-400\"}`,children:j.message}),j.priority===\"high\"&&!j.read&&n.jsxs(\"div\",{className:\"mt-4 flex items-center gap-2\",children:[n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-red-400 sq-full animate-ping\"}),n.jsx(\"span\",{className:\"text-[10px] font-black text-red-400 uppercase tracking-[0.2em]\",children:\"Critical Stability Alert\"})]}),j.action&&j.action.status===\"pending\"&&n.jsxs(\"div\",{className:\"mt-4 flex gap-3 animate-in fade-in slide-in-from-top-1\",children:[n.jsx(Re,{size:\"sm\",className:\"h-8 text-[10px] font-black uppercase tracking-widest bg-emerald-600 hover:bg-emerald-500 text-white border-0\",onClick:Z=>{Z.stopPropagation(),j.action.status=\"completed\",u?.(j)},children:\"Yes, Automate\"}),n.jsx(Re,{size:\"sm\",variant:\"ghost\",className:\"h-8 text-[10px] font-black uppercase tracking-widest text-slate-500 hover:text-slate-300 hover:bg-white/5\",onClick:Z=>{Z.stopPropagation(),j.action.status=\"dismissed\",j.read||d?.(j.id)},children:\"No, One-time\"})]})]})]})]},j.id)})]})]},C)})})})]})})}const R0=[{text:\"An investment in knowledge pays the best interest.\",author:\"Benjamin Franklin\",category:\"financial-literacy\"},{text:\"It's not how much money you make, but how much money you keep, how hard it works for you, and how many generations you keep it for.\",author:\"Robert Kiyosaki\",category:\"financial-literacy\"},{text:\"Financial peace isn't the acquisition of stuff. It's learning to live on less than you make, so you can give money back and have money to invest.\",author:\"Dave Ramsey\",category:\"financial-literacy\"},{text:\"Do not save what is left after spending; instead spend what is left after saving.\",author:\"Warren Buffett\",category:\"financial-literacy\"},{text:\"The stock market is a device for transferring money from the impatient to the patient.\",author:\"Warren Buffett\",category:\"financial-literacy\"},{text:\"Know what you own, and know why you own it.\",author:\"Peter Lynch\",category:\"financial-literacy\"},{text:\"The individual investor should act consistently as an investor and not as a speculator.\",author:\"Ben Graham\",category:\"financial-literacy\"},{text:\"Price is what you pay. Value is what you get.\",author:\"Warren Buffett\",category:\"financial-literacy\"},{text:\"The goal isn't more money. The goal is living life on your terms.\",author:\"Chris Brogan\",category:\"financial-freedom\"},{text:\"Financial freedom is available to those who learn about it and work for it.\",author:\"Robert Kiyosaki\",category:\"financial-freedom\"},{text:\"The rich invest in time, the poor invest in money.\",author:\"Warren Buffett\",category:\"financial-freedom\"},{text:\"Wealth is the ability to fully experience life.\",author:\"Henry David Thoreau\",category:\"financial-freedom\"},{text:\"It's not about having lots of money. It's about knowing how to manage the money you do have.\",author:\"Dave Ramsey\",category:\"financial-freedom\"},{text:\"Money is a terrible master but an excellent servant.\",author:\"P.T. Barnum\",category:\"financial-freedom\"},{text:\"The quickest way to double your money is to fold it in half and put it in your back pocket.\",author:\"Will Rogers\",category:\"financial-freedom\"},{text:\"The best time to plant a tree was 20 years ago. The second best time is now.\",author:\"Chinese Proverb\",category:\"motivation\"},{text:\"A journey of a thousand miles begins with a single step.\",author:\"Lao Tzu\",category:\"motivation\"},{text:\"Success is not final, failure is not fatal: it is the courage to continue that counts.\",author:\"Winston Churchill\",category:\"motivation\"},{text:\"The only way to do great work is to love what you do.\",author:\"Steve Jobs\",category:\"motivation\"},{text:\"Don't watch the clock; do what it does. Keep going.\",author:\"Sam Levenson\",category:\"motivation\"},{text:\"Wealth is not about having a lot of money; it's about having a lot of options.\",author:\"Chris Rock\",category:\"motivation\"},{text:\"Every time you borrow money, you're robbing your future self.\",author:\"Nathan W. Morris\",category:\"motivation\"},{text:\"The habit of saving is itself an education; it fosters every virtue, teaches self-denial, cultivates the sense of order, trains to forethought, and so broadens the mind.\",author:\"T.T. Munger\",category:\"motivation\"},{text:\"Too many people spend money they haven't earned, to buy things they don't want, to impress people they don't like.\",author:\"Will Rogers\",category:\"motivation\"},{text:\"A budget is telling your money where to go instead of wondering where it went.\",author:\"Dave Ramsey\",category:\"motivation\"},{text:\"Beware of little expenses. A small leak will sink a great ship.\",author:\"Benjamin Franklin\",category:\"motivation\"},{text:\"Never spend your money before you have earned it.\",author:\"Thomas Jefferson\",category:\"motivation\"}];function O0(){return R0[Math.floor(Math.random()*R0.length)]}function rN({isOpen:i,onClose:l,achievementId:o}){const[u,d]=x.useState(O0());if(x.useEffect(()=>{i&&o&&(queueMicrotask(()=>{d(O0())}),Or({particleCount:150,spread:100,origin:{y:.6},colors:[\"#FFD700\",\"#FFA500\",\"#FF6347\",\"#9370DB\",\"#3CB371\"]}))},[i,o]),!o)return null;const h=cp(o);return h?n.jsx(us,{open:i,onOpenChange:l,children:n.jsxs(ds,{className:\"w-[270px] sm:w-full sm:max-w-md bg-slate-950 border-[#38383A] p-0 overflow-hidden rounded-[32px] shadow-2xl transition-all duration-500\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 sm:w-64 sm:h-64 bg-yellow-500 blur-[60px] sm:blur-[120px] opacity-10 -mr-16 -mt-16 sm:-mr-32 sm:-mt-32\"}),n.jsx(\"div\",{className:\"absolute bottom-0 left-0 w-24 h-24 sm:w-48 sm:h-48 bg-indigo-500 blur-[50px] sm:blur-[100px] opacity-5 -ml-12 -mb-12 sm:-ml-24 sm:-mb-24\"}),n.jsxs(fs,{className:\"px-6 sm:px-10 pt-8 sm:pt-12 pb-0 relative z-10\",children:[n.jsx(ms,{className:\"text-center text-xl sm:text-3xl font-black text-white tracking-tight transition-all\",children:\"Achievement Unlocked\"}),n.jsx(hs,{className:\"text-center text-[8px] sm:text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] sm:tracking-[0.3em] mt-1 sm:mt-2 transition-all\",children:\"Achievement Unlocked\"})]}),n.jsxs(\"div\",{className:\"space-y-6 sm:space-y-10 py-8 sm:py-12 px-6 sm:px-10 relative z-10\",children:[n.jsxs(\"div\",{className:\"relative flex justify-center\",children:[n.jsx(Le.div,{className:\"relative z-10\",initial:{scale:0,rotateY:0},animate:{scale:1,rotateY:[0,1080],transition:{scale:{duration:.8,ease:\"backOut\"},rotateY:{duration:4,ease:\"easeInOut\"}}},children:n.jsxs(\"div\",{className:\"relative\",children:[n.jsx(Le.div,{className:\"absolute inset-0 bg-yellow-400 blur-3xl opacity-20 rounded-full\",animate:{scale:[1,1.3,1],opacity:[.2,.4,.2]},transition:{duration:3,repeat:1/0,ease:\"easeInOut\"}}),n.jsxs(\"div\",{className:\"relative w-32 h-32 sm:w-44 sm:h-44 bg-gradient-to-br from-yellow-400 via-orange-500 to-yellow-600 rounded-[32px] sm:rounded-[48px] flex items-center justify-center shadow-[0_15px_40px_rgba(234,179,8,0.25)] border-4 border-white/20 transition-all\",children:[n.jsx(\"span\",{className:\"text-5xl sm:text-7xl drop-shadow-2xl transition-all\",children:h.icon}),n.jsx(\"div\",{className:\"absolute inset-0 bg-gradient-to-tr from-white/10 to-transparent pointer-events-none rounded-[28px] sm:rounded-[44px]\"})]})]})}),n.jsxs(\"div\",{className:\"absolute inset-0 z-20 flex justify-center items-center pointer-events-none\",children:[n.jsx(Le.div,{className:\"absolute w-32 h-32 sm:w-48 sm:h-48 bg-yellow-500/40 blur-[40px] sm:blur-[60px] rounded-full\",initial:{scale:0,opacity:0},animate:{scale:1.4,opacity:1},transition:{delay:.3,duration:1.2,ease:\"easeOut\"}}),n.jsx(Le.div,{className:\"absolute w-24 h-24 sm:w-36 sm:h-36 bg-indigo-500/30 blur-[30px] sm:blur-[45px] rounded-full -ml-8 -mt-6 sm:-ml-12 sm:-mt-10\",initial:{scale:0,opacity:0},animate:{scale:1.8,opacity:.8},transition:{delay:.4,duration:1.2,ease:\"easeOut\"}}),n.jsx(Le.div,{className:\"absolute w-20 h-20 sm:w-32 sm:h-32 bg-rose-500/30 blur-[25px] sm:blur-[40px] rounded-full ml-10 mt-8 sm:ml-16 sm:mt-12\",initial:{scale:0,opacity:0},animate:{scale:1.6,opacity:.8},transition:{delay:.5,duration:1.2,ease:\"easeOut\"}})]})]}),n.jsxs(Le.div,{className:\"text-center space-y-2 sm:space-y-4\",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:.6},children:[n.jsx(\"h3\",{className:\"text-lg sm:text-3xl font-black bg-gradient-to-r from-yellow-200 via-yellow-500 to-yellow-200 bg-clip-text text-transparent tracking-tight transition-all\",children:h.name}),n.jsx(\"p\",{className:\"text-slate-400 font-bold text-[11px] sm:text-sm leading-relaxed max-w-[200px] sm:max-w-[280px] mx-auto transition-all\",children:h.description})]}),n.jsx(Le.div,{className:\"flex justify-center\",initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},children:n.jsxs(\"div\",{className:\"flex items-center gap-3 sm:gap-4\",children:[n.jsx(\"div\",{className:\"h-px w-12 sm:w-20 bg-gradient-to-r from-transparent via-white/10 to-transparent\"}),n.jsx(\"div\",{className:\"w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full bg-yellow-500/50 blur-[1px] animate-pulse\"}),n.jsx(\"div\",{className:\"h-px w-12 sm:w-20 bg-gradient-to-r from-transparent via-white/10 to-transparent\"})]})}),n.jsxs(Le.div,{className:\"p-4 sm:p-8 bg-white/5 rounded-2xl sm:rounded-[32px] border border-white/5 relative overflow-hidden transition-all\",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:1},children:[n.jsx(\"div\",{className:\"absolute top-0 left-0 w-12 h-12 bg-indigo-500 blur-2xl opacity-5\"}),n.jsxs(\"div\",{className:\"flex items-start gap-3 sm:gap-6 relative z-10 text-left\",children:[n.jsx(\"span\",{className:\"text-xl sm:text-3xl pt-0 opacity-40\",children:'\"'}),n.jsxs(\"div\",{className:\"flex-1\",children:[n.jsx(\"p\",{className:\"text-[10px] sm:text-sm font-bold italic text-slate-300 leading-snug sm:leading-relaxed tracking-tight transition-all\",children:u.text}),n.jsxs(\"div\",{className:\"flex items-center gap-2 sm:gap-4 mt-3 sm:mt-6 transition-all\",children:[n.jsx(\"div\",{className:\"h-px flex-1 bg-white/5\"}),n.jsxs(\"p\",{className:\"text-[8px] sm:text-[10px] font-black text-slate-500 uppercase tracking-widest shrink-0\",children:[\"— \",u.author]})]})]})]})]})]})]})}):null}const Gp=({accounts:i,goals:l,liabilities:o,expenses:u,emergencyFundAmount:d=0})=>{const h=x.useMemo(()=>i.filter(f=>f.type===\"bank\"||f.type===\"cash\").reduce((f,w)=>f+w.balance,0),[i]),g=x.useMemo(()=>i.filter(f=>f.type===\"credit_card\").reduce((f,w)=>f+Math.abs(w.balance),0),[i]),N=x.useMemo(()=>{const f=o.reduce((A,T)=>A+(T.emiAmount||0),0),w=u.filter(A=>A.isRecurring).reduce((A,T)=>A+T.amount,0);return f+w},[o,u]),E=x.useMemo(()=>l.reduce((w,A)=>w+A.currentAmount,0)+(d||0),[l,d]),S=x.useMemo(()=>E+N,[E,N]),p=x.useMemo(()=>{const f=h-S;return Math.max(0,f)},[h,S]);return{totalBankBalance:h,totalCreditUsage:g,totalCommitments:N,shadowWalletTotal:E,totalReserved:S,availableToSpend:p}},Ki=({children:i,icon:l,variant:o=\"blue\",className:u,...d})=>{const h={blue:\"border-blue-500/50 text-blue-400 hover:border-blue-500 hover:shadow-[0_0_20px_rgba(59,130,246,0.4)] shadow-[0_0_10px_rgba(59,130,246,0.2)]\",green:\"border-emerald-500/50 text-emerald-400 hover:border-emerald-500 hover:shadow-[0_0_20px_rgba(16,185,129,0.4)] shadow-[0_0_10px_rgba(16,185,129,0.2)]\",purple:\"border-purple-500/50 text-purple-400 hover:border-purple-500 hover:shadow-[0_0_20px_rgba(168,85,247,0.4)] shadow-[0_0_10px_rgba(168,85,247,0.2)]\",rose:\"border-rose-500/50 text-rose-400 hover:border-rose-500 hover:shadow-[0_0_20px_rgba(244,63,94,0.4)] shadow-[0_0_10px_rgba(244,63,94,0.2)]\"};return n.jsxs(\"button\",{className:De(\"relative group flex items-center justify-center gap-2 px-6 h-11\",\"bg-[#0A141E]/80 backdrop-blur-md border-2 rounded-2xl transition-all duration-300\",\"font-mono font-bold uppercase tracking-widest text-[10px]\",\"hover:scale-[1.02] active:scale-[0.98]\",h[o],u),...d,children:[l&&n.jsx(l,{className:\"w-4 h-4 transition-all duration-700 ease-quantum group-hover:rotate-[720deg] active:-rotate-12\"}),n.jsx(\"span\",{children:i})]})};function oN({isOpen:i,onClose:l,accounts:o,goals:u,currency:d,destinationType:h,emergencyFund:g,onAllocate:N,liabilities:E=[],expenses:S=[]}){const[p,f]=x.useState(\"\"),[w,A]=x.useState(\"\"),[T,C]=x.useState(\"\"),[M,y]=x.useState(!1),[L,z]=x.useState(!1),{availableToSpend:j,totalBankBalance:G,shadowWalletTotal:ee,totalCommitments:Z}=Gp({accounts:o,goals:u,liabilities:E,expenses:S,emergencyFundAmount:g?.currentAmount||0});x.useEffect(()=>{if(i&&!p&&o.length>0){const k=o.filter(U=>U.type===\"bank\"||U.type===\"cash\");if(k.length>0){const U=k.find(Q=>Q.balance>=j)||[...k].sort((Q,ae)=>ae.balance-Q.balance)[0];U&&queueMicrotask(()=>{f(U.id)})}}},[i,j,o,p]);const _=o.find(k=>k.id===p),B=u.find(k=>k.id===w),J=parseFloat(T)||0,ne=()=>{if(j>0){if(C(j.toString()),h===\"goal\"&&!w&&u.length>0){const k=[...u].sort((U,Q)=>{const ae=new Date(U.targetDate).getTime(),v=new Date(Q.targetDate).getTime();if(ae!==v)return ae-v;const D=U.currentAmount/U.targetAmount,W=Q.currentAmount/Q.targetAmount;return D-W});A(k[0].id),ce.info(`Suggested: ${k[0].name} based on timeline & progress`,{icon:n.jsx(Ga,{className:\"w-4 h-4 text-blue-400\"})})}}else ce.error(\"No surplus liquidity available for auto-fill\")},F=()=>{if(!p){ce.error(\"Please select an account\");return}if(h===\"goal\"&&!w){ce.error(\"Please select a goal\");return}if(!T||J<=0){ce.error(\"Please enter a valid amount\");return}if(_&&J>_.balance){ce.error(\"Insufficient balance in selected account\");return}y(!0)},oe=()=>{N({accountId:p,destinationId:h===\"goal\"?w:\"emergency-fund\",amount:J,destinationType:h}),f(\"\"),A(\"\"),C(\"\"),y(!1),l()},ge=()=>{y(!1)},O=()=>{f(\"\"),A(\"\"),C(\"\"),y(!1),z(!1),l()};return n.jsx(us,{open:i,onOpenChange:O,children:n.jsx(ds,{className:\"max-w-md bg-black border-white/5 text-white p-0 custom-scrollbar sq-2xl overflow-hidden\",children:n.jsxs(\"div\",{className:\"max-h-[85vh] overflow-y-auto p-8 custom-scrollbar\",children:[n.jsxs(fs,{className:\"mb-6\",children:[n.jsx(ms,{className:\"text-xl font-black tracking-tight text-white mb-1\",children:h===\"goal\"?\"🎯 ALLOCATE TO GOAL\":\"🛡️ ALLOCATE TO RESERVE\"}),n.jsxs(hs,{className:\"text-slate-500 text-[10px] uppercase font-black tracking-widest\",children:[\"Move funds from account to \",h===\"goal\"?\"savings milestone\":\"emergency reserve\"]})]}),M?n.jsxs(\"div\",{className:\"space-y-6 py-4\",children:[n.jsx(\"div\",{className:\"text-center pt-2\",children:n.jsx(\"p\",{className:\"text-[10px] text-emerald-500 uppercase font-black tracking-[0.2em] animate-pulse\",children:\"Ready to Allocate Funds\"})}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"div\",{className:\"p-5 bg-white/5 sq-md border border-white/10 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 p-2 opacity-5\",children:n.jsx(zu,{className:\"w-8 h-8\"})}),n.jsx(\"p\",{className:\"text-[8px] text-slate-500 uppercase font-black tracking-widest mb-3 opacity-60\",children:\"Debit Source\"}),n.jsx(\"p\",{className:\"font-black text-sm text-white tracking-tight\",children:_?.name}),n.jsxs(\"div\",{className:\"mt-4 space-y-2.5\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-medium\",children:[n.jsx(\"span\",{className:\"text-slate-400 uppercase tracking-tighter\",children:\"Current Liquidity\"}),n.jsx(\"span\",{className:\"font-mono text-white\",children:Ne(_?.balance||0,d)})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-bold text-rose-500\",children:[n.jsx(\"span\",{className:\"uppercase tracking-tighter\",children:\"Debit Volume\"}),n.jsxs(\"span\",{className:\"font-mono\",children:[\"-\",Ne(J,d)]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"flex justify-between text-xs font-black\",children:[n.jsx(\"span\",{className:\"text-slate-500 uppercase tracking-widest\",children:\"Post-Debit Projection\"}),n.jsx(\"span\",{className:\"text-blue-400 font-mono\",children:Ne((_?.balance||0)-J,d)})]})]})]}),n.jsx(\"div\",{className:\"flex justify-center -my-2 relative z-10\",children:n.jsx(\"div\",{className:\"w-10 h-10 bg-blue-600 sq-md flex items-center justify-center shadow-[0_0_20px_rgba(37,99,235,0.3)] border border-blue-400/20\",children:n.jsx(P0,{className:\"w-5 h-5 text-white\"})})}),n.jsxs(\"div\",{className:`p-5 sq-md border relative overflow-hidden ${h===\"goal\"?\"bg-emerald-500/5 border-emerald-500/20\":\"bg-blue-500/5 border-blue-500/20\"}`,children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 p-2 opacity-10\",children:h===\"goal\"?n.jsx(Ga,{className:\"w-8 h-8 text-emerald-500\"}):n.jsx(Hn,{className:\"w-8 h-8 text-blue-500\"})}),n.jsx(\"p\",{className:\"text-[8px] text-slate-500 uppercase font-black tracking-widest mb-3 opacity-60\",children:\"Credit Destination\"}),n.jsxs(\"div\",{className:\"flex items-center gap-2 mb-4\",children:[n.jsx(\"span\",{className:\"text-xl\",children:h===\"goal\"?B?.emoji:\"🛡️\"}),n.jsx(\"p\",{className:\"font-black text-sm text-white tracking-tight\",children:h===\"goal\"?B?.name:\"Emergency Reserve\"})]}),n.jsxs(\"div\",{className:\"space-y-2.5\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-medium\",children:[n.jsx(\"span\",{className:\"text-slate-400 uppercase tracking-tighter\",children:\"Current Level\"}),n.jsx(\"span\",{className:\"font-mono text-white\",children:Ne((h===\"goal\"?B?.currentAmount:g?.currentAmount)||0,d)})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-bold text-emerald-400\",children:[n.jsx(\"span\",{className:\"uppercase tracking-tighter\",children:\"Credit Volume\"}),n.jsxs(\"span\",{className:\"font-mono\",children:[\"+\",Ne(J,d)]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"flex justify-between text-xs font-black\",children:[n.jsx(\"span\",{className:\"text-slate-500 uppercase tracking-widest\",children:\"Post-Credit Value\"}),n.jsx(\"span\",{className:\"text-emerald-400 font-mono\",children:Ne(((h===\"goal\"?B?.currentAmount:g?.currentAmount)||0)+J,d)})]})]})]})]}),n.jsx(\"div\",{className:\"p-4 bg-amber-500/5 border border-amber-500/20 sq-md\",children:n.jsxs(\"div\",{className:\"flex gap-3\",children:[n.jsx(Eu,{className:\"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5\"}),n.jsxs(\"div\",{className:\"text-[10px]\",children:[n.jsx(\"p\",{className:\"font-black text-amber-400 uppercase tracking-widest mb-1\",children:\"Node Equilibrium Warning\"}),n.jsxs(\"p\",{className:\"text-amber-500/70 font-bold leading-relaxed\",children:[\"Net Liquidity and \",_?.name,\" reserves will be reduced by \",Ne(J,d),\" immediately. This action is final.\"]})]})]})}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Ki,{onClick:ge,className:\"flex-1 h-12 text-slate-500 hover:text-white border-white/5 font-black tracking-[0.2em]\",children:\"Re-Configure\"}),n.jsx(Ki,{onClick:oe,className:\"flex-1 h-12 bg-emerald-600/20 text-emerald-400 border-emerald-500/30 font-black tracking-[0.2em] shadow-lg shadow-emerald-500/10\",children:\"Execute Move\"})]})]}):n.jsxs(\"div\",{className:\"space-y-6\",children:[j>0&&n.jsxs(\"div\",{className:\"relative group overflow-hidden sq-xl border border-emerald-500/20 bg-emerald-500/5 p-5 transition-all hover:bg-emerald-500/10 mb-2\",children:[n.jsx(Qu,{variant:\"savings\"}),n.jsxs(\"div\",{className:\"relative z-10 flex flex-col gap-4\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-10 h-10 bg-emerald-500/20 sq-md flex items-center justify-center border border-emerald-500/30\",children:n.jsx(Ga,{className:\"w-5 h-5 text-emerald-400\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-[9px] text-emerald-500/70 font-black uppercase tracking-widest\",children:\"Surplus Detected\"}),n.jsx(\"h4\",{className:\"text-xl font-black text-white tabular-nums\",children:Ne(j,d)})]})]}),n.jsx(\"button\",{onClick:()=>z(!L),className:\"p-2 hover:bg-white/5 rounded-full transition-colors text-slate-500 hover:text-white\",title:\"Show Calculation\",children:L?n.jsx(_r,{className:\"w-4 h-4\"}):n.jsx(K0,{className:\"w-4 h-4\"})})]}),L&&n.jsxs(\"div\",{className:\"py-3 border-t border-emerald-500/10 space-y-2 animate-in fade-in slide-in-from-top-2 duration-300\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-emerald-500/60 font-medium\",children:[n.jsx(\"span\",{children:\"Total Liquidity\"}),n.jsx(\"span\",{children:Ne(G,d)})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-rose-500/60 font-medium\",children:[n.jsx(\"span\",{children:\"Shadow Wallet (Goals + EF)\"}),n.jsxs(\"span\",{children:[\"-\",Ne(ee,d)]})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-rose-500/60 font-medium pb-2 border-b border-emerald-500/10\",children:[n.jsx(\"span\",{children:\"Total Commitments (Bills)\"}),n.jsxs(\"span\",{children:[\"-\",Ne(Z,d)]})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-emerald-400 font-bold uppercase pt-1\",children:[n.jsx(\"span\",{children:\"Available Safety Margin\"}),n.jsx(\"span\",{children:Ne(j,d)})]})]}),n.jsx(Ki,{onClick:()=>{ne(),_&&j>_.balance&&ce.warning(\"Surplus exceeds selected account balance. Source adjusted.\")},className:\"w-full h-11 bg-emerald-500/20 text-emerald-400 border-emerald-500/30 font-black tracking-widest\",children:\"Allocate All Surplus\"})]})]}),n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(ye,{htmlFor:\"allocate-from-account\",className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 mb-2 block\",children:\"Source Node\"}),n.jsxs(Ut,{value:p,onValueChange:f,children:[n.jsx(Bt,{id:\"allocate-from-account\",name:\"fromAccountId\",className:\"bg-black border-white/5 sq-md h-14 text-white focus:ring-1 focus:ring-blue-500/50\",children:n.jsx(It,{placeholder:\"Select Capital Source\"})}),n.jsx(qt,{className:\"bg-black border-white/10 text-white sq-xl\",children:o.map(k=>n.jsx(qe,{value:k.id,className:\"hover:bg-white/5\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between w-full\",children:[n.jsxs(\"span\",{children:[k.icon,\" \",k.name]}),n.jsx(\"span\",{className:\"text-[10px] text-slate-500 ml-4 font-mono\",children:Ne(k.balance,d)})]})},k.id))})]}),_&&n.jsxs(\"p\",{className:\"text-[10px] text-slate-500 mt-2 italic px-1\",children:[\"Available Liquidity: \",Ne(_.balance,d)]})]}),h===\"goal\"?n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(ye,{htmlFor:\"allocate-to-goal\",className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 mb-2 block\",children:\"Target Milestone\"}),n.jsxs(Ut,{value:w,onValueChange:A,children:[n.jsx(Bt,{id:\"allocate-to-goal\",name:\"toGoalId\",className:\"bg-black border-white/5 sq-md h-14 text-white focus:ring-1 focus:ring-emerald-500/50\",children:n.jsx(It,{placeholder:\"Choose Destination Goal\"})}),n.jsx(qt,{className:\"bg-black border-white/10 text-white sq-xl\",children:u.map(k=>{const U=k.currentAmount/k.targetAmount*100;return n.jsx(qe,{value:k.id,className:\"hover:bg-white/5\",children:n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(\"span\",{className:\"text-lg\",children:k.emoji}),n.jsxs(\"div\",{className:\"min-w-0\",children:[n.jsx(\"div\",{className:\"font-bold text-xs uppercase tracking-tight\",children:k.name}),n.jsxs(\"div\",{className:\"text-[9px] text-slate-500 font-mono\",children:[Math.round(U),\"% SYNCHRONIZED • \",Ne(k.currentAmount,d)]})]})]})},k.id)})})]})]}):n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(ye,{className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 mb-2 block\",children:\"Stability Reserve\"}),n.jsx(\"div\",{className:\"p-4 bg-white/5 border border-white/10 sq-md\",children:n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-10 h-10 bg-blue-500/10 sq-md flex items-center justify-center border border-blue-500/20\",children:\"🛡️\"}),n.jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[n.jsx(\"p\",{className:\"font-black text-xs uppercase tracking-widest text-white\",children:\"Emergency Fund\"}),g&&n.jsxs(\"p\",{className:\"text-[9px] text-slate-500 font-mono mt-1\",children:[Ne(g.currentAmount,d),\" / \",Ne(g.targetAmount,d)]})]})]})})]}),n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(\"div\",{className:\"flex justify-between items-center mb-1\",children:n.jsx(ye,{htmlFor:\"allocate-amount\",className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 block\",children:\"Contribution Volume\"})}),n.jsxs(\"div\",{className:\"relative\",children:[n.jsx(\"span\",{className:\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500\",children:d===\"INR\"?\"₹\":\"$\"}),n.jsx(wt,{id:\"allocate-amount\",name:\"amount\",type:\"number\",placeholder:\"0\",value:T,onChange:k=>C(k.target.value),className:\"pl-8 bg-black border-white/5 h-12\",min:\"0\",step:\"0.01\"})]}),_&&J>_.balance&&n.jsxs(\"div\",{className:\"flex items-center gap-2 text-sm text-red-600\",children:[n.jsx(Eu,{className:\"w-4 h-4\"}),n.jsx(\"span\",{children:\"Amount exceeds available balance\"})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Ki,{onClick:O,className:\"flex-1 h-12 text-slate-500 hover:text-white border-white/5 font-black tracking-[0.2em]\",children:\"Abort\"}),n.jsx(Ki,{onClick:F,className:\"flex-1 h-12 bg-blue-600/20 text-blue-400 border-blue-500/30 font-black tracking-[0.2em] shadow-lg shadow-blue-500/10\",children:\"Preview Mode\"})]})]})]})})})}const cN=[{name:\"HDFC Bank\",icon:\"🏦\",color:\"#1d4ed8\",type:\"bank\"},{name:\"ICICI Bank\",icon:\"🏦\",color:\"#ea580c\",type:\"bank\"},{name:\"State Bank of India\",icon:\"🏦\",color:\"#2563eb\",type:\"bank\"},{name:\"Axis Bank\",icon:\"🏦\",color:\"#9d174d\",type:\"bank\"},{name:\"Kotak Mahindra Bank\",icon:\"🏦\",color:\"#dc2626\",type:\"bank\"},{name:\"Bank of America\",icon:\"🏦\",color:\"#0033aa\",type:\"bank\"},{name:\"Chase Bank\",icon:\"🏦\",color:\"#117aca\",type:\"bank\"},{name:\"Wells Fargo\",icon:\"🏦\",color:\"#d71e28\",type:\"bank\"},{name:\"HSBC\",icon:\"🏦\",color:\"#db0011\",type:\"bank\"},{name:\"Barclays\",icon:\"🏦\",color:\"#00aeef\",type:\"bank\"},{name:\"Standard Chartered\",icon:\"🏦\",color:\"#00945e\",type:\"bank\"},{name:\"Citibank\",icon:\"🏦\",color:\"#003b70\",type:\"bank\"},{name:\"DBS Bank\",icon:\"🏦\",color:\"#ff0000\",type:\"bank\"},{name:\"Federal Bank\",icon:\"🏦\",color:\"#0b5a91\",type:\"bank\"},{name:\"American Express\",icon:\"💳\",color:\"#006fcf\",type:\"credit_card\"},{name:\"Discover\",icon:\"💳\",color:\"#ff6600\",type:\"credit_card\"},{name:\"Capital One\",icon:\"💳\",color:\"#d22e2e\",type:\"credit_card\"},{name:\"Goldman Sachs\",icon:\"🏦\",color:\"#725a34\",type:\"bank\"},{name:\"Morgan Stanley\",icon:\"🏦\",color:\"#000033\",type:\"bank\"},{name:\"Apple Card\",icon:\"💳\",color:\"#000000\",type:\"credit_card\"},{name:\"PayPal\",icon:\"💳\",color:\"#003087\",type:\"credit_card\"},{name:\"Revolut\",icon:\"💳\",color:\"#000000\",type:\"credit_card\"},{name:\"Monzo\",icon:\"💳\",color:\"#ff4d4f\",type:\"credit_card\"}];function uN({accounts:i,currency:l,onCreateAccount:o,onUpdateAccount:u,onDeleteAccount:d}){const[h,g]=x.useState(!1),[N,E]=x.useState(null),[S,p]=x.useState({name:\"\",type:\"bank\",balance:0,color:Wc[0],icon:eu[0].value,creditLimit:0,safeLimitPercentage:30,serviceChargePercentage:0,statementDate:1}),[f,w]=x.useState([]),A=j=>{j?(E(j),p({name:j.name,type:j.type,balance:j.balance,color:j.color,icon:j.icon,creditLimit:j.creditLimit||0,safeLimitPercentage:j.safeLimitPercentage||30,serviceChargePercentage:j.serviceChargePercentage||0,statementDate:j.statementDate||1})):(E(null),p({name:\"\",type:\"bank\",balance:0,color:Wc[0],icon:eu[0].value,creditLimit:0,safeLimitPercentage:30,serviceChargePercentage:0,statementDate:1})),w([]),g(!0)},T=j=>{if(p({...S,name:j}),j.length>1){const G=cN.filter(ee=>ee.name.toLowerCase().includes(j.toLowerCase())).slice(0,4);w(G)}else w([])},C=j=>{p({...S,name:j.name,type:j.type,icon:j.icon,color:j.color}),w([])},M=async j=>{if(j.preventDefault(),!S.name.trim()){ce.error(\"Please enter an account name\");return}try{N?await u(N.id,S):await o(S),g(!1)}catch(G){console.error(\"Error saving account:\",G)}},y=async j=>{if(confirm(\"Are you sure you want to delete this account? This action cannot be undone.\"))try{await d(j)}catch(G){console.error(\"Error deleting account:\",G)}};return n.jsxs(\"div\",{className:\"space-y-12 animate-in fade-in slide-in-from-bottom-4 duration-700 px-4 pb-24\",children:[n.jsxs(\"div\",{className:\"flex items-end justify-between gap-6\",children:[n.jsxs(\"div\",{className:\"min-w-0\",children:[n.jsx(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tight leading-none mb-3 truncate\",children:\"Accounts & Cards\"}),n.jsxs(\"div\",{className:\"flex flex-wrap gap-2 mb-3\",children:[n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-emerald-500 bg-emerald-500/10 px-2 py-0.5 rounded-lg border border-emerald-500/20 whitespace-nowrap\",children:[i.filter(j=>j.type===\"bank\").length,\" Banks\"]}),n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-rose-500 bg-rose-500/10 px-2 py-0.5 rounded-lg border border-rose-500/20 whitespace-nowrap\",children:[i.filter(j=>j.type===\"credit_card\").length,\" Credit\"]}),n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-amber-500 bg-amber-500/10 px-2 py-0.5 rounded-lg border border-amber-500/20 whitespace-nowrap\",children:[i.filter(j=>j.type===\"cash\").length,\" Cash\"]}),n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-blue-500 bg-blue-500/10 px-2 py-0.5 rounded-lg border border-blue-500/20 whitespace-nowrap\",children:[i.filter(j=>j.type===\"investment\").length,\" Holding\"]})]}),n.jsx(\"p\",{className:\"text-slate-500 font-bold max-w-md text-[10px] truncate\",children:\"Monitor liquidity across core reservoirs and credit pools.\"})]}),n.jsxs(Re,{onClick:()=>A(),className:\"bg-emerald-600 hover:bg-emerald-500 text-white rounded-xl px-6 h-12 font-bold shadow-lg shadow-emerald-600/20 transition-all active:scale-95 shrink-0\",children:[n.jsx(kr,{className:\"w-4 h-4 sm:mr-2\"}),n.jsx(\"span\",{className:\"hidden sm:inline\",children:\"Add Account\"}),n.jsx(\"span\",{className:\"sm:hidden\",children:\"Add\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(Ny,{className:\"w-3.5 h-3.5\"}),\"Bank Accounts\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(j=>j.type===\"bank\").map(j=>n.jsx(L,{account:j},j.id)),i.filter(j=>j.type===\"bank\").length===0&&n.jsx(z,{message:\"No bank accounts detected.\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(Sy,{className:\"w-3.5 h-3.5\"}),\"Credit Pools (Cards)\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(j=>j.type===\"credit_card\").map(j=>n.jsx(L,{account:j},j.id)),i.filter(j=>j.type===\"credit_card\").length===0&&n.jsx(z,{message:\"No credit pools detected.\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(zu,{className:\"w-3.5 h-3.5\"}),\"Cash in Hand\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(j=>j.type===\"cash\").map(j=>n.jsx(L,{account:j},j.id)),i.filter(j=>j.type===\"cash\").length===0&&n.jsx(z,{message:\"No physical liquid reservoirs detected.\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(qn,{className:\"w-3.5 h-3.5\"}),\"Investment Holding Nodes\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(j=>j.type===\"investment\").map(j=>n.jsx(L,{account:j},j.id)),i.filter(j=>j.type===\"investment\").length===0&&n.jsx(\"div\",{className:\"md:col-span-2 lg:col-span-3 p-8 border border-dashed border-white/5 squircle-22 flex items-center justify-center text-slate-600 font-bold text-xs\",children:\"No investment nodes detected. Link them to track growth separately.\"})]})]}),n.jsx(us,{open:h,onOpenChange:g,children:n.jsxs(ds,{className:\"max-w-md max-h-[90vh] overflow-y-auto bg-slate-950 border-white/10 text-white squircle-22 p-8 custom-scrollbar\",children:[n.jsxs(fs,{children:[n.jsx(ms,{className:\"text-3xl font-black tracking-tight text-white mb-2\",children:N?\"Refine Account\":\"New Liquidity Reservoir\"}),n.jsx(hs,{className:\"text-slate-500 font-bold mb-6\",children:\"Establish a new liquidity pool in the Obsidian system.\"})]}),n.jsxs(\"form\",{onSubmit:M,className:\"space-y-8\",children:[n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"name\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Account Identity\"}),n.jsx(wt,{id:\"name\",name:\"name\",value:S.name,onChange:j=>T(j.target.value),placeholder:\"e.g. Mercury Checking\",required:!0,className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white focus:ring-emerald-500/50\",autoComplete:\"off\"}),f.length>0&&n.jsxs(\"div\",{className:\"mt-3 p-4 bg-indigo-500/5 border border-indigo-500/10 squircle-12 flex items-start gap-4 animate-in fade-in zoom-in-95 duration-300\",children:[n.jsx(Ga,{className:\"w-4 h-4 text-indigo-400 mt-1 flex-shrink-0\"}),n.jsxs(\"div\",{className:\"flex-1\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-widest text-indigo-300 mb-3 opacity-60\",children:\"Intelligence Suggested\"}),n.jsx(\"div\",{className:\"grid grid-cols-1 gap-2\",children:f.map(j=>n.jsxs(\"button\",{type:\"button\",onClick:()=>C(j),className:\"flex items-center gap-3 p-2.5 squircle-12 bg-white/5 hover:bg-white/10 transition-all group border border-white/5\",children:[n.jsx(\"span\",{className:\"text-lg group-hover:scale-110 transition-transform\",children:j.icon}),n.jsx(\"span\",{className:\"text-xs font-bold text-slate-300 group-hover:text-white transition-colors\",children:j.name})]},j.name))})]})]})]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 md:grid-cols-3 gap-4\",children:[n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${S.type===\"bank\"?\"border-emerald-500 bg-emerald-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>p({...S,type:\"bank\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-emerald-500/20 flex items-center justify-center text-xl mb-2\",children:\"🏦\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Bank Reservoir\"})]}),n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${S.type===\"credit_card\"?\"border-rose-500 bg-rose-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>p({...S,type:\"credit_card\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-rose-500/20 flex items-center justify-center text-xl mb-2\",children:\"💳\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Credit Pool\"})]}),n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${S.type===\"cash\"?\"border-amber-500 bg-amber-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>p({...S,type:\"cash\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-amber-500/20 flex items-center justify-center text-xl mb-2\",children:\"💵\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Cash in Hand\"})]}),n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${S.type===\"investment\"?\"border-blue-500 bg-blue-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>p({...S,type:\"investment\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-blue-500/20 flex items-center justify-center text-xl mb-2\",children:\"📈\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Growth Node\"})]})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"balance\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:S.type===\"bank\"||S.type===\"cash\"||S.type===\"investment\"?\"Initial Liquidity\":\"Current Spent Balance\"}),n.jsx(Ha,{id:\"balance\",name:\"balance\",value:S.balance,onChange:j=>p({...S,balance:parseFloat(j)||0}),placeholder:\"0.00\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]}),S.type===\"credit_card\"&&n.jsxs(\"div\",{className:\"space-y-6 animate-in slide-in-from-top-4 duration-500\",children:[n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"creditLimit\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Total Credit Limit\"}),n.jsx(Ha,{id:\"creditLimit\",name:\"creditLimit\",value:S.creditLimit,onChange:j=>p({...S,creditLimit:parseFloat(j)||0}),placeholder:\"e.g. 100000\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"safeLimit\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Safe Use Threshold (%)\"}),n.jsx(Ha,{id:\"safeLimit\",name:\"safeLimitPercentage\",value:S.safeLimitPercentage,onChange:j=>p({...S,safeLimitPercentage:parseFloat(j)||30}),placeholder:\"30\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"serviceCharge\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Svc Charge (%)\"}),n.jsx(Ha,{id:\"serviceCharge\",name:\"serviceChargePercentage\",value:S.serviceChargePercentage,onChange:j=>p({...S,serviceChargePercentage:parseFloat(j)||0}),placeholder:\"0.0\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{htmlFor:\"statementDate\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Statement Date\"}),n.jsxs(Ut,{value:S.statementDate.toString(),onValueChange:j=>p({...S,statementDate:parseInt(j)}),children:[n.jsx(Bt,{id:\"statementDate\",name:\"statementDate\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",children:n.jsx(It,{})}),n.jsx(qt,{className:\"bg-slate-900 border-white/10 text-white\",children:[...Array(31)].map((j,G)=>n.jsx(qe,{value:(G+1).toString(),children:G+1},G+1))})]})]})]})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"System Icon\"}),n.jsx(\"div\",{className:\"grid grid-cols-6 sm:grid-cols-9 gap-2\",children:eu.map(j=>n.jsx(\"button\",{type:\"button\",onClick:()=>p({...S,icon:j.value}),className:`w-10 h-10 squircle-12 flex items-center justify-center text-lg border-2 transition-all ${S.icon===j.value?\"border-emerald-500 bg-emerald-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,children:j.value},j.value))})]}),n.jsxs(\"div\",{children:[n.jsx(ye,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Brand Color\"}),n.jsx(\"div\",{className:\"flex flex-wrap gap-3\",children:Wc.map(j=>{const G={style:{\"--btn-color\":j}};return n.jsx(\"button\",{type:\"button\",onClick:()=>p({...S,color:j}),\"aria-label\":`Select color ${j}`,className:`w-8 h-8 rounded-full border-4 transition-all bg-[length:100%_100%] bg-[var(--btn-color)] ${S.color===j?\"border-white scale-110 shadow-lg shadow-white/20\":\"border-transparent hover:scale-105\"}`,...G},j)})})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Re,{type:\"button\",variant:\"ghost\",onClick:()=>g(!1),className:\"flex-1 h-14 squircle-12 font-bold text-slate-500 hover:text-white\",children:\"Abort\"}),n.jsx(Re,{type:\"submit\",className:\"flex-1 h-14 squircle-12 bg-emerald-600 hover:bg-emerald-500 text-white font-black shadow-lg shadow-emerald-600/20\",children:N?\"Update Account\":\"Ignite Account\"})]})]})]})})]});function L({account:j}){const G=j.type===\"credit_card\",ee=G?(j.creditLimit||0)*(j.safeLimitPercentage||30)/100:0,Z=G&&j.creditLimit?Math.abs(j.balance)/j.creditLimit*100:0,_=G&&Z<=(j.safeLimitPercentage||30);return n.jsxs(Ot,{className:\"p-6 bg-slate-900/40 border-white/5 squircle-22 border hover:bg-slate-900/60 transition-all duration-300 group relative overflow-hidden\",children:[(()=>{const B={style:{\"--card-glow\":j.color}};return n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20 bg-[var(--card-glow)]\",...B})})(),n.jsxs(\"div\",{className:\"flex items-start justify-between mb-8 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[(()=>{const B={style:{\"--icon-bg\":j.color+\"15\"}};return n.jsx(\"div\",{className:\"w-16 h-16 squircle-12 flex items-center justify-center text-3xl shadow-inner border border-white/5 group-hover:scale-105 transition-transform bg-[var(--icon-bg)]\",...B,children:j.icon})})(),n.jsxs(\"div\",{className:\"min-w-0\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100 truncate\",children:j.name}),n.jsxs(\"div\",{className:\"flex items-center gap-1.5 mt-1\",children:[n.jsx(\"div\",{className:`w-1.5 h-1.5 rounded-full ${G?_?\"bg-indigo-500\":\"bg-rose-500\":\"bg-emerald-500\"}`}),n.jsx(\"span\",{className:\"text-[10px] uppercase font-black tracking-widest text-slate-500\",children:G?\"Credit Pool\":\"Bank Account\"})]})]})]}),n.jsxs(\"div\",{className:\"flex gap-2\",children:[n.jsx(Re,{variant:\"ghost\",title:\"Edit Account\",size:\"sm\",onClick:()=>A(j),className:\"w-8 h-8 p-0 squircle-12 hover:bg-white/5 text-slate-600 hover:text-white transition-all\",children:n.jsx(Cy,{className:\"w-3.5 h-3.5\"})}),n.jsx(Re,{variant:\"ghost\",title:\"Delete Account\",size:\"sm\",onClick:()=>y(j.id),className:\"w-8 h-8 p-0 squircle-12 hover:bg-rose-500/10 text-slate-600 hover:text-rose-400 transition-all\",children:n.jsx(tl,{className:\"w-3.5 h-3.5\"})})]})]}),n.jsxs(\"div\",{className:\"pt-6 border-t border-white/5 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-end\",children:[n.jsxs(\"div\",{className:\"space-y-1\",children:[n.jsx(\"p\",{className:\"text-[10px] uppercase font-black tracking-widest text-slate-600\",children:G?\"Current Obligation\":\"Available Liquidity\"}),(()=>{const B={style:{\"--balance-color\":j.color}};return n.jsx(\"h4\",{className:\"text-2xl font-black tabular-nums tracking-tight text-[var(--balance-color)]\",...B,children:Ne(j.balance,l)})})()]}),G&&j.creditLimit?n.jsxs(\"div\",{className:\"text-right\",children:[n.jsx(\"p\",{className:\"text-[9px] font-black text-slate-600 uppercase mb-1\",children:\"Limit Use\"}),n.jsxs(\"p\",{className:`text-xs font-black tabular-nums ${_?\"text-indigo-400\":\"text-rose-400\"}`,children:[Z.toFixed(1),\"%\"]})]}):n.jsx(\"div\",{className:\"bg-white/5 px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest text-slate-500 border border-white/5\",children:\"Synced\"})]}),G&&j.creditLimit&&n.jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-white/5 flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"space-y-1\",children:[n.jsx(\"p\",{className:\"text-[8px] font-black text-slate-700 uppercase\",children:\"Safe Threshold\"}),n.jsx(\"p\",{className:\"text-[10px] font-black text-slate-500\",children:Ne(ee,l)})]}),j.serviceChargePercentage?n.jsxs(\"div\",{className:\"text-right space-y-1\",children:[n.jsx(\"p\",{className:\"text-[8px] font-black text-slate-700 uppercase\",children:\"Svc Charge\"}),n.jsxs(\"p\",{className:\"text-[10px] font-black text-slate-500\",children:[j.serviceChargePercentage,\"%\"]})]}):null,G&&j.statementDate&&n.jsxs(\"div\",{className:\"text-right space-y-1 ml-auto\",children:[n.jsx(\"p\",{className:\"text-[8px] font-black text-slate-700 uppercase\",children:\"Statement\"}),n.jsxs(\"p\",{className:\"text-[10px] font-black text-slate-500\",children:[\"Day \",j.statementDate]})]})]})]})]})}function z({message:j}){return n.jsx(\"div\",{className:\"py-12 text-center bg-slate-800/20 squircle-22 border border-dashed border-white/10 col-span-full\",children:n.jsx(\"p\",{className:\"text-sm text-slate-500 font-bold\",children:j})})}}function dN({isOpen:i,onClose:l,accounts:o,currency:u,onTransfer:d}){const[h,g]=x.useState(\"\"),[N,E]=x.useState(\"\"),[S,p]=x.useState(\"\"),[f,w]=x.useState(!1),A=o.find(z=>z.id===h),T=o.find(z=>z.id===N),C=parseFloat(S)||0,M=()=>{if(!h){ce.error(\"Please select source reservoir\");return}if(!N){ce.error(\"Please select destination reservoir\");return}if(h===N){ce.error(\"Source and destination must be different\");return}if(!S||C<=0){ce.error(\"Please enter a valid amount\");return}if(A&&C>A.balance){ce.error(\"Insufficient funds in source reservoir\");return}w(!0)},y=()=>{d(h,N,C),L()},L=()=>{g(\"\"),E(\"\"),p(\"\"),w(!1),l()};return n.jsx(us,{open:i,onOpenChange:L,children:n.jsxs(ds,{className:\"max-w-md max-h-[90vh] overflow-y-auto bg-[#020408] border-white/5 p-0 shadow-2xl custom-scrollbar text-white\",children:[n.jsxs(\"div\",{className:\"px-8 pt-10 pb-8 border-b border-white/5 relative overflow-hidden bg-indigo-500/5\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 blur-[60px] opacity-20 -mr-16 -mt-16 bg-indigo-500\"}),n.jsxs(fs,{className:\"relative z-10\",children:[n.jsxs(ms,{className:\"text-2xl font-black tracking-tighter text-slate-100 flex items-center gap-3\",children:[n.jsx(Au,{className:\"w-6 h-6 text-indigo-400\"}),\"Capital Migration\"]}),n.jsx(hs,{className:\"text-slate-500 font-bold text-[10px] uppercase tracking-[0.2em] mt-1\",children:\"Transfer between core liquidity reservoirs\"})]})]}),n.jsx(\"div\",{className:\"p-8\",children:f?n.jsxs(\"div\",{className:\"space-y-6 animate-in fade-in zoom-in-95 duration-300\",children:[n.jsxs(\"div\",{className:\"p-6 bg-slate-900/50 border border-white/5 rounded-3xl space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between gap-4\",children:[n.jsxs(\"div\",{className:\"flex-1 text-center space-y-2\",children:[n.jsx(\"div\",{className:\"w-12 h-12 rounded-2xl bg-slate-800 border border-white/10 flex items-center justify-center text-2xl mx-auto\",children:A?.icon}),n.jsx(\"p\",{className:\"text-[10px] font-black uppercase text-slate-500 truncate\",children:A?.name})]}),n.jsxs(\"div\",{className:\"flex flex-col items-center gap-1\",children:[n.jsx(Au,{className:\"w-6 h-6 text-indigo-400 animate-pulse\"}),n.jsx(\"p\",{className:\"text-[10px] font-black text-indigo-400\",children:Ne(C,u)})]}),n.jsxs(\"div\",{className:\"flex-1 text-center space-y-2\",children:[n.jsx(\"div\",{className:\"w-12 h-12 rounded-2xl bg-slate-800 border border-white/10 flex items-center justify-center text-2xl mx-auto\",children:T?.icon}),n.jsx(\"p\",{className:\"text-[10px] font-black uppercase text-slate-500 truncate\",children:T?.name})]})]}),n.jsxs(\"div\",{className:\"space-y-4 pt-4 border-t border-white/5\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-center text-xs\",children:[n.jsx(\"span\",{className:\"text-slate-500 font-bold\",children:\"Source New Balance\"}),n.jsx(\"span\",{className:\"text-rose-400 font-black\",children:Ne((A?.balance||0)-C,u)})]}),n.jsxs(\"div\",{className:\"flex justify-between items-center text-xs\",children:[n.jsx(\"span\",{className:\"text-slate-500 font-bold\",children:\"Dest. New Balance\"}),n.jsx(\"span\",{className:\"text-emerald-400 font-black\",children:Ne((T?.balance||0)+C,u)})]})]})]}),n.jsxs(\"div\",{className:\"p-4 bg-amber-500/5 border border-amber-500/10 rounded-2xl flex gap-3\",children:[n.jsx(Ar,{className:\"w-5 h-5 text-amber-500 flex-shrink-0\"}),n.jsx(\"p\",{className:\"text-[10px] text-amber-200/60 font-medium leading-relaxed\",children:\"Notice: This transfer will instantly adjust the balance of both accounts. This action is recorded in your transaction history.\"})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Re,{variant:\"ghost\",onClick:()=>w(!1),className:\"flex-1 h-12 rounded-2xl text-slate-500 font-bold hover:bg-white/5\",children:\"Back\"}),n.jsx(Re,{onClick:y,className:\"flex-1 h-12 rounded-2xl bg-indigo-600 hover:bg-indigo-500 text-white font-black shadow-lg shadow-indigo-600/20 transition-all active:scale-95\",children:\"Confirm Migration\"})]})]}):n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(ye,{htmlFor:\"source-reservoir\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Source Reservoir\"}),n.jsxs(Ut,{value:h,onValueChange:g,children:[n.jsx(Bt,{id:\"source-reservoir\",className:\"h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-200 font-bold\",children:n.jsx(It,{placeholder:\"Select source\"})}),n.jsx(qt,{className:\"bg-slate-900 border-white/5 max-h-[40vh]\",children:o.map(z=>n.jsx(qe,{value:z.id,className:\"focus:bg-white/5 focus:text-white\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between w-full pr-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-xl\",children:z.icon}),n.jsx(\"span\",{children:z.name})]}),n.jsx(\"span\",{className:\"text-xs font-black text-slate-500\",children:Ne(z.balance,u)})]})},z.id))})]})]}),n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(ye,{htmlFor:\"dest-reservoir\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Destination Reservoir\"}),n.jsxs(Ut,{value:N,onValueChange:E,children:[n.jsx(Bt,{id:\"dest-reservoir\",className:\"h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-200 font-bold\",children:n.jsx(It,{placeholder:\"Select destination\"})}),n.jsx(qt,{className:\"bg-slate-900 border-white/5 max-h-[40vh]\",children:o.map(z=>n.jsx(qe,{value:z.id,className:\"focus:bg-white/5 focus:text-white\",disabled:z.id===h,children:n.jsxs(\"div\",{className:\"flex items-center justify-between w-full pr-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-xl\",children:z.icon}),n.jsx(\"span\",{children:z.name})]}),n.jsx(\"span\",{className:\"text-xs font-black text-slate-500\",children:Ne(z.balance,u)})]})},z.id))})]})]}),n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(ye,{htmlFor:\"migration-amount\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Capital Amount\"}),n.jsxs(\"div\",{className:\"relative group\",children:[n.jsx(\"div\",{className:\"absolute left-5 top-1/2 -translate-y-1/2 text-slate-500 font-bold group-focus-within:text-indigo-400 transition-colors\",children:u===\"INR\"?\"₹\":\"$\"}),n.jsx(wt,{id:\"migration-amount\",name:\"amount\",type:\"number\",placeholder:\"0.00\",value:S,onChange:z=>p(z.target.value),className:\"pl-12 h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-100 font-black text-xl\"})]}),A&&C>A.balance&&n.jsxs(\"div\",{className:\"flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-rose-400 ml-1 animate-in slide-in-from-top-1\",children:[n.jsx(Eu,{className:\"w-3 h-3\"}),n.jsx(\"span\",{children:\"Insufficient stability in source reservoir\"})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Re,{variant:\"ghost\",onClick:L,className:\"flex-1 h-12 rounded-2xl text-slate-500 font-bold hover:bg-white/5\",children:\"Cancel\"}),n.jsx(Re,{onClick:M,className:\"flex-1 h-12 rounded-2xl bg-indigo-600 hover:bg-indigo-500 text-white font-black shadow-lg shadow-indigo-600/20 transition-all active:scale-95\",children:\"Verify Migration\"})]})]})})]})})}function fN({onRefresh:i,children:l}){const o=x.useRef(0),[u,d]=x.useState(0),[h,g]=x.useState(!1),N=x.useRef(null),E=80,S=f=>{window.scrollY===0&&(o.current=f.touches[0].clientY)};x.useEffect(()=>{const f=A=>{if(o.current===0)return;const C=A.touches[0].clientY-o.current;if(C>0&&window.scrollY===0){A.cancelable&&A.preventDefault();const M=Math.min(C,E*1.5);d(M)}},w=N.current;return w&&w.addEventListener(\"touchmove\",f,{passive:!1}),()=>{w&&w.removeEventListener(\"touchmove\",f)}},[]),x.useEffect(()=>{u>=E&&!h&&window.navigator.vibrate&&window.navigator.vibrate(10)},[u,h]);const p=async()=>{u>=E&&!h&&(g(!0),await i(),g(!1)),d(0),o.current=0};return n.jsxs(\"div\",{ref:N,className:\"relative\",onTouchStart:S,onTouchEnd:p,children:[n.jsx(Le.div,{className:\"absolute top-0 left-0 right-0 flex justify-center items-center\",style:{height:u,opacity:u/E},animate:{y:h?0:-E},children:n.jsxs(\"div\",{className:\"flex flex-col items-center gap-2 py-4\",children:[n.jsx(Le.div,{animate:{rotate:h?360:u/E*180},transition:{rotate:{duration:h?1:0,repeat:h?1/0:0,ease:\"linear\"}},children:n.jsx(ei,{className:\"w-6 h-6 text-[#0A84FF]\"})}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-[0.2em] text-[#8E8E93]\",children:h?\"Synchronizing...\":u>=E?\"Relinquish to Sync\":\"Pull to Synchronize\"})]})}),n.jsx(Le.div,{animate:{y:h?60:0},transition:{duration:.2},children:l})]})}function os({className:i,...l}){return n.jsx(\"div\",{\"data-slot\":\"skeleton\",className:De(\"bg-accent animate-pulse rounded-md\",i),...l})}function mN(){return n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(Ot,{className:\"p-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 mb-4\",children:[n.jsx(os,{className:\"w-12 h-12 rounded-lg\"}),n.jsxs(\"div\",{className:\"space-y-2 flex-1\",children:[n.jsx(os,{className:\"h-5 w-32\"}),n.jsx(os,{className:\"h-4 w-48\"})]})]}),n.jsx(\"div\",{className:\"grid grid-cols-3 gap-3\",children:[1,2,3].map(i=>n.jsx(\"div\",{className:\"space-y-2\",children:n.jsx(os,{className:\"h-20 w-full rounded-lg\"})},i))})]}),[1,2,3].map(i=>n.jsx(Ot,{className:\"p-6\",children:n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(os,{className:\"h-6 w-48\"}),n.jsx(os,{className:\"h-4 w-full\"}),n.jsx(os,{className:\"h-4 w-3/4\"})]})},i))]})}function hN(i,l,o=30){x.useEffect(()=>{let u=0;const d=g=>{u=g.touches[0].clientX},h=g=>{const E=g.touches[0].clientX-u;u<o&&E>30&&(g.cancelable&&g.preventDefault(),window.navigator.vibrate&&window.navigator.vibrate(20),i(),u=window.innerWidth),u>window.innerWidth-o&&E<-30&&(g.cancelable&&g.preventDefault(),window.navigator.vibrate&&window.navigator.vibrate(20),l(),u=0)};return document.addEventListener(\"touchstart\",d,{passive:!0}),document.addEventListener(\"touchmove\",h,{passive:!1}),()=>{document.removeEventListener(\"touchstart\",d),document.removeEventListener(\"touchmove\",h)}},[i,l,o])}const pN=({onOpenAI:i,onAddTransaction:l,onMigrate:o,isVisible:u})=>n.jsxs(\"div\",{id:\"fab-dock\",className:`fixed right-5 bottom-[110px] flex flex-col gap-3.5 z-[110] transition-all duration-500 ease-quantum ${u?\"translate-x-0 opacity-100\":\"translate-x-[100px] opacity-0\"}`,children:[n.jsx(\"div\",{onClick:i,title:\"AI Assistant\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-[#a855f74d] shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-[#A855F7] hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(Ga,{className:\"w-5 h-5 group-hover:rotate-12 transition-transform\"})}),n.jsx(\"div\",{onClick:o,title:\"Migrate Capital\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-indigo-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-indigo-400 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(Au,{className:\"w-5 h-5 group-hover:scale-110 transition-transform\"})}),n.jsx(\"div\",{onClick:()=>l(\"debt\"),title:\"Added Personal IOU\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-yellow-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-yellow-500 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(Z0,{className:\"w-5 h-5 group-hover:-translate-y-0.5 transition-transform\"})}),n.jsx(\"div\",{onClick:()=>l(\"income\"),title:\"Add Money In\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-emerald-500/40 shadow-[0_0_20px_rgba(16,185,129,0.1)] cursor-pointer text-emerald-500 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(kr,{className:\"w-5 h-5 group-hover:rotate-90 transition-transform\"})}),n.jsx(\"div\",{onClick:()=>l(\"expense\"),title:\"Add Money Out\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-rose-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-rose-500 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(Ey,{className:\"w-5 h-5 group-hover:scale-110 transition-transform\"})})]}),gN=he.memo(({isOpen:i,onClose:l,context:o,settings:u,isOffline:d=!1})=>{const[h,g]=x.useState(\"\"),[N,E]=x.useState([{text:\"Hello! I've analyzed your cash flow. How can I assist with your goals?\",type:\"ai\"}]),[S,p]=x.useState(!1),f=x.useRef(null);x.useEffect(()=>{f.current&&f.current.scrollIntoView({behavior:\"smooth\"})},[N]);const w=async()=>{if(!h.trim()||S)return;const A=h.trim();g(\"\"),E(T=>[...T,{text:A,type:\"user\"}]),p(!0);try{if(d){setTimeout(()=>{E(C=>[...C,{text:\"FinHub is currently in 'Cached View' (Offline). I've analyzed your local financial fabric: your liquidity nodes are stable, but synchronizing with global AI intelligence requires a stable link. How can I help you optimize your local state?\",type:\"ai\"}]),p(!1)},1e3);return}const T=await Wj({userPrompt:A,context:o,settings:u,persona:\"ANALYST\"});T.error?E(C=>[...C,{text:T.error,type:\"ai\"}]):E(C=>[...C,{text:T.text||\"Analyzing financial pattern...\",type:\"ai\"}])}catch{E(T=>[...T,{text:\"Connection error. FinHub has transitioned to local 'Cached View'.\",type:\"ai\"}])}finally{d||p(!1)}};return i?n.jsxs(\"div\",{id:\"ai-chat-overlay\",className:\"fixed inset-0 bg-[#020408] z-[200] flex flex-col p-6 animate-in fade-in zoom-in-95 duration-300\",children:[n.jsx(\"div\",{className:\"absolute inset-0 bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-indigo-500/10 via-transparent to-transparent opacity-50\"}),n.jsxs(\"div\",{className:\"flex justify-between items-center mb-10 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-indigo-500/10 rounded-2xl flex items-center justify-center border border-indigo-500/20\",children:n.jsx(Ga,{className:\"text-indigo-400 w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"h2\",{className:\"font-black text-2xl text-white tracking-tight leading-none\",children:\"AI Analyst\"}),n.jsxs(\"div\",{className:\"flex items-center gap-2 mt-1\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500\",children:\"Neural Core Context\"}),d&&n.jsx(\"span\",{className:\"text-[8px] bg-amber-500/10 text-amber-500 px-1.5 py-0.5 rounded border border-amber-500/20 font-black tracking-tighter uppercase\",children:\"Cached View\"})]})]})]}),n.jsx(\"button\",{onClick:l,\"aria-label\":\"Close Chat\",className:\"bg-white/5 w-12 h-12 rounded-full flex items-center justify-center hover:bg-white/10 hover:text-white text-slate-400 transition-all active:scale-95\",children:n.jsx(il,{className:\"w-6 h-6\"})})]}),n.jsxs(\"div\",{id:\"chat-messages\",className:\"flex-1 overflow-y-auto space-y-4 pr-2 custom-scrollbar\",children:[N.map((A,T)=>n.jsxs(\"div\",{className:De(\"p-4 rounded-[24px] text-sm leading-relaxed\",A.type===\"ai\"?\"bg-slate-900 border border-white/5 text-slate-200 self-start max-w-[85%]\":\"bg-indigo-600 text-white font-medium shadow-lg shadow-indigo-600/20 self-end max-w-[85%]\"),children:[A.type===\"ai\"&&n.jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[n.jsx(Ga,{className:\"w-3 h-3 text-indigo-400 font-black\"}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500\",children:\"Guru Analysis\"})]}),A.text]},T)),S&&n.jsx(\"div\",{className:\"p-4 bg-slate-900 border border-white/5 rounded-[24px] self-start animate-pulse\",children:n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:0ms]\"}),n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:150ms]\"}),n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:300ms]\"})]})}),n.jsx(\"div\",{ref:f})]}),n.jsxs(\"div\",{className:\"mt-8 flex gap-3 p-2 bg-slate-900/40 rounded-[28px] border border-white/5 relative z-10\",children:[n.jsx(\"input\",{type:\"text\",value:h,onChange:A=>g(A.target.value),onKeyDown:A=>A.key===\"Enter\"&&w(),placeholder:\"Ask the analyst...\",className:\"flex-1 bg-transparent border-none px-6 py-4 text-white focus:outline-none placeholder:text-slate-600 font-bold\"}),n.jsx(\"button\",{onClick:w,disabled:S||!h.trim(),\"aria-label\":\"Send Message\",className:\"w-14 h-14 bg-indigo-600 rounded-[22px] flex items-center justify-center shadow-lg shadow-indigo-900/30 hover:bg-indigo-500 transition-all active:scale-90 disabled:opacity-50 disabled:cursor-not-allowed group\",children:n.jsx(Ay,{className:\"w-6 h-6 text-white group-hover:-translate-y-1 transition-transform\"})})]}),n.jsx(\"p\",{className:\"text-[9px] font-bold text-slate-600 text-center uppercase tracking-widest mt-4\",children:\"Encryption Verified // Neural Fabric Link Stable\"})]}):null});class xN extends x.Component{state={hasError:!1};static getDerivedStateFromError(l){return{hasError:!0,error:l}}componentDidCatch(l,o){console.error(\"Uncaught error:\",l,o)}render(){return this.state.hasError?n.jsx(\"div\",{className:\"min-h-[400px] flex items-center justify-center p-6\",children:n.jsxs(Ot,{className:\"max-w-md w-full p-8 bg-slate-900 border-white/10 text-center space-y-6 rounded-[32px]\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-rose-500/10 rounded-full flex items-center justify-center mx-auto\",children:n.jsx(el,{className:\"w-8 h-8 text-rose-500\"})}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(\"h2\",{className:\"text-xl font-black text-white uppercase tracking-tight\",children:\"System Glitch Detected\"}),n.jsx(\"p\",{className:\"text-sm text-slate-400 font-medium\",children:\"The neural link to this component was interrupted. This usually happens during background updates.\"})]}),this.state.error&&n.jsx(\"pre\",{className:\"text-[10px] bg-black/40 p-3 rounded-xl text-rose-400/80 overflow-x-auto text-left font-mono\",children:this.state.error.message}),n.jsxs(Re,{onClick:()=>window.location.reload(),className:\"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-black py-6 rounded-2xl gap-2 h-auto\",children:[n.jsx(ei,{className:\"w-4 h-4\"}),\"Re-establish Connection\"]})]})}):this.props.children}}var z0;(function(i){i[i.NONE=0]=\"NONE\",i[i.TOUCH_ID=1]=\"TOUCH_ID\",i[i.FACE_ID=2]=\"FACE_ID\",i[i.FINGERPRINT=3]=\"FINGERPRINT\",i[i.FACE_AUTHENTICATION=4]=\"FACE_AUTHENTICATION\",i[i.IRIS_AUTHENTICATION=5]=\"IRIS_AUTHENTICATION\",i[i.MULTIPLE=6]=\"MULTIPLE\"})(z0||(z0={}));var L0;(function(i){i[i.NONE=0]=\"NONE\",i[i.STRONG=1]=\"STRONG\",i[i.WEAK=2]=\"WEAK\"})(L0||(L0={}));var U0;(function(i){i[i.UNKNOWN_ERROR=0]=\"UNKNOWN_ERROR\",i[i.BIOMETRICS_UNAVAILABLE=1]=\"BIOMETRICS_UNAVAILABLE\",i[i.USER_LOCKOUT=2]=\"USER_LOCKOUT\",i[i.BIOMETRICS_NOT_ENROLLED=3]=\"BIOMETRICS_NOT_ENROLLED\",i[i.USER_TEMPORARY_LOCKOUT=4]=\"USER_TEMPORARY_LOCKOUT\",i[i.AUTHENTICATION_FAILED=10]=\"AUTHENTICATION_FAILED\",i[i.APP_CANCEL=11]=\"APP_CANCEL\",i[i.INVALID_CONTEXT=12]=\"INVALID_CONTEXT\",i[i.NOT_INTERACTIVE=13]=\"NOT_INTERACTIVE\",i[i.PASSCODE_NOT_SET=14]=\"PASSCODE_NOT_SET\",i[i.SYSTEM_CANCEL=15]=\"SYSTEM_CANCEL\",i[i.USER_CANCEL=16]=\"USER_CANCEL\",i[i.USER_FALLBACK=17]=\"USER_FALLBACK\"})(U0||(U0={}));const I0=cs(\"NativeBiometric\",{web:()=>Fa(()=>import(\"./web-CyZe6ZkC.js\"),__vite__mapDeps([7,1,2,3,4])).then(i=>new i.NativeBiometricWeb)}),bN=()=>{const{checkIdentity:i,login:l,signup:o,sendOtp:u,verifyOtp:d,resetPin:h,isRememberedUser:g,rememberedMobile:N,pendingMobile:E,clearPendingSession:S}=ai(),[p,f]=x.useState(\"identity\"),[w,A]=x.useState(\"\"),[T,C]=x.useState(\"\"),[M,y]=x.useState(\"\"),[L,z]=x.useState(\"\"),[j,G]=x.useState(\"\"),[ee,Z]=x.useState(\"\"),[_,B]=x.useState(!1),[J,ne]=x.useState(!1),[F,oe]=x.useState(!1),[ge,O]=x.useState(!1),k=x.useRef(null),U=he.useCallback(async()=>{if(Gn.isNativePlatform())try{if(!(await I0.isAvailable()).isAvailable)return;O(!0),await I0.verifyIdentity({reason:\"Authenticate to access your private node\",title:\"Login to FinHub\",subtitle:\"Use biometrics to login\",description:\"Touch the sensor to verify identity\",negativeButtonText:\"Cancel\"}),await l(\"2255\",!0)||O(!1)}catch(le){console.error(\"Biometric error:\",le),O(!1),navigator.vibrate&&navigator.vibrate([50,50])}},[l]);x.useEffect(()=>{g&&N?(A(N),f(\"verify\"),U()):E&&(A(E),f(\"verify\"))},[g,N,E,U]);const Q=he.useCallback(async()=>{if(w.length!==10)return;const le=await i(w);f(le?\"verify\":\"create_name\"),C(\"\")},[w,i]);x.useEffect(()=>{p===\"identity\"&&w.length===10&&Q()},[w,p,Q]);const ae=he.useCallback(async()=>{p===\"verify\"?await l(T,J)?(navigator.vibrate&&navigator.vibrate([10]),!J&&!g&&oe(!0)):q():p===\"create_pin\"?T.length===4&&(await o(w,T,M,J)||q()):p===\"reset_pin\"&&(j===ee&&j.length===4&&await h(w,j)?(f(\"verify\"),C(\"\"),G(\"\"),Z(\"\")):q())},[p,l,T,J,o,w,M,h,j,ee,g]);x.useEffect(()=>{p===\"verify\"&&T.length===4&&ae()},[T,p,ae]),x.useEffect(()=>{k.current&&(k.current.focus(),k.current.type!==\"hidden\"&&k.current.select())},[p]);const v=async()=>{await u(w)&&f(\"otp_reset\")},D=async()=>{if(M.trim().length<2)return;await u(w)&&f(\"otp_verify\")},W=async()=>{await d(w,L)?f(p===\"otp_verify\"?\"create_pin\":\"reset_pin\"):q()},q=()=>{B(!0),navigator.vibrate&&navigator.vibrate([50,30,50]),setTimeout(()=>B(!1),500),z(\"\"),C(\"\"),Z(\"\")},Y=()=>p===\"identity\"?w.length!==10:p===\"verify\"?T.length!==4:p===\"otp_verify\"||p===\"otp_reset\"?L.length!==4:p===\"create_name\"?M.trim().length<2:p===\"create_pin\"?T.length!==4:p===\"reset_pin\"?j.length!==4||ee.length!==4:!1,V=()=>{S(),f(\"identity\"),A(\"\"),C(\"\")},te=le=>{le.key===\"Enter\"&&!Y()&&me()()},me=()=>{switch(p){case\"identity\":return Q;case\"otp_verify\":case\"otp_reset\":return W;case\"create_name\":return D;case\"verify\":case\"create_pin\":case\"reset_pin\":return ae;default:return()=>{}}},ie=()=>{switch(p){case\"identity\":return\"Continue\";case\"otp_verify\":case\"otp_reset\":return\"Verify OTP\";case\"create_name\":return\"Next\";case\"verify\":return\"Login\";case\"create_pin\":return\"Create Account\";case\"reset_pin\":return\"Reset PIN\";default:return\"Continue\"}};return n.jsxs(\"div\",{className:\"fixed inset-0 flex flex-col items-center justify-center overflow-hidden font-sans auth-mesh-gradient z-[9999999]\",children:[n.jsx(\"div\",{className:\"absolute inset-0 z-0 bg-[url('/mesh-grid.svg')] opacity-20\"}),n.jsxs(Le.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},className:\"absolute top-12 z-10 flex flex-col items-center gap-2\",children:[n.jsx(\"img\",{src:\"/images/logo-dark.png\",alt:\"FinHub\",className:\"h-12 w-auto\"}),n.jsx(\"span\",{className:\"text-xs font-medium text-white/40 tracking-widest uppercase\",children:\"v0.1 Beta\"})]}),n.jsxs(\"div\",{className:\"z-10 w-full max-w-sm px-8\",children:[n.jsxs(Bn,{mode:\"wait\",children:[p===\"identity\"&&n.jsxs(Le.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},exit:{x:-20,opacity:0},className:\"flex flex-col gap-6\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Welcome\"}),n.jsx(\"p\",{className:\"text-white/50 text-sm mt-2\",children:\"Enter your mobile number to continue\"})]}),n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-sky-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"Mobile Number\"}),n.jsx(\"input\",{ref:k,type:\"text\",inputMode:\"numeric\",maxLength:10,value:w,onChange:le=>A(le.target.value.replace(/\\D/g,\"\")),onKeyDown:te,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"999 999 9999\"})]}),n.jsxs(\"div\",{onClick:()=>{ne(!J),navigator.vibrate&&navigator.vibrate(5)},className:\"flex items-center gap-3 cursor-pointer self-center\",children:[n.jsx(\"div\",{className:`h-5 w-5 rounded-md border transition-all flex items-center justify-center ${J?\"bg-sky-500 border-sky-500\":\"border-white/20 bg-white/5\"}`,children:J&&n.jsx(Cu,{className:\"h-3.5 w-3.5 text-white\"})}),n.jsx(\"span\",{className:\"text-sm text-white/60 font-medium\",children:\"Remember me for 30 days\"})]})]},\"identity\"),p===\"create_name\"&&n.jsxs(Le.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},exit:{x:-20,opacity:0},className:\"flex flex-col gap-6\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Who are you?\"}),n.jsx(\"p\",{className:\"text-white/50 text-sm mt-2\",children:\"Personalize your node experience\"})]}),n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-sky-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"Full Name\"}),n.jsx(\"input\",{ref:k,type:\"text\",value:M,onChange:le=>y(le.target.value),onKeyDown:te,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"Joe Doe\"})]})]},\"create_name\"),(p===\"otp_verify\"||p===\"otp_reset\")&&n.jsxs(Le.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,x:_?[0,-10,10,-10,10,0]:0},exit:{scale:1.1,opacity:0},className:\"relative flex flex-col gap-8 items-center\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"div\",{className:\"mb-4 flex justify-center\",children:n.jsx(\"div\",{className:\"p-4 rounded-full bg-white/5 ring-1 ring-white/10\",children:n.jsx(ky,{className:\"h-8 w-8 text-sky-400\"})})}),n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Verify Node\"}),n.jsxs(\"p\",{className:\"text-white/40 text-sm mt-2\",children:[\"Enter the 4-digit code sent to\",n.jsx(\"br\",{}),n.jsx(\"span\",{className:\"text-white/70\",children:w})]})]}),n.jsxs(\"div\",{className:\"group relative flex flex-col items-center justify-center rounded-[32px] bg-white/5 p-10 ring-1 ring-white/10 backdrop-blur-md\",children:[n.jsx(\"div\",{className:\"flex gap-5\",children:[0,1,2,3].map(le=>n.jsx(Le.div,{animate:{scale:le<L.length?1.2:1,backgroundColor:le<L.length?\"#fff\":\"rgba(255,255,255,0.1)\"},transition:{duration:.1},className:\"h-3.5 w-3.5 rounded-full\"},le))}),n.jsx(\"input\",{ref:k,type:\"password\",inputMode:\"numeric\",maxLength:4,value:L,onChange:le=>z(le.target.value.replace(/\\D/g,\"\")),onKeyDown:te,className:\"absolute inset-0 opacity-0 cursor-default\",\"aria-label\":\"One-time Password\",placeholder:\"OTP\"})]})]},\"otp\"),p===\"reset_pin\"&&n.jsxs(Le.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,x:_?[0,-10,10,-10,10,0]:0},exit:{scale:1.1,opacity:0},className:\"relative flex flex-col gap-8 items-center\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"div\",{className:\"mb-4 flex justify-center\",children:n.jsx(\"div\",{className:\"p-4 rounded-full bg-white/5 ring-1 ring-white/10\",children:n.jsx(Ty,{className:\"h-8 w-8 text-amber-400\"})})}),n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Reset PIN\"}),n.jsx(\"p\",{className:\"text-white/40 text-sm mt-2\",children:\"Choose a new secure 4-digit access code\"})]}),n.jsxs(\"div\",{className:\"space-y-4 w-full\",children:[n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-amber-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"New PIN\"}),n.jsx(\"input\",{type:\"password\",inputMode:\"numeric\",maxLength:4,value:j,onChange:le=>G(le.target.value.replace(/\\D/g,\"\")),onKeyDown:te,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"****\"})]}),n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-amber-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"Confirm PIN\"}),n.jsx(\"input\",{type:\"password\",inputMode:\"numeric\",maxLength:4,value:ee,onChange:le=>Z(le.target.value.replace(/\\D/g,\"\")),onKeyDown:te,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"****\"})]})]})]},\"reset_pin\"),(p===\"verify\"||p===\"create_pin\")&&n.jsxs(Le.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,x:_?[0,-10,10,-10,10,0]:0},exit:{scale:1.1,opacity:0},className:\"relative flex flex-col gap-8 items-center\",children:[n.jsx(Le.div,{initial:{opacity:0},animate:{opacity:1},className:\"fixed inset-0 z-[-1] bg-black/80 backdrop-blur-xl\"}),n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(Le.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:\"mb-4 flex justify-center\",children:n.jsx(\"div\",{className:\"p-4 rounded-full bg-white/5 ring-1 ring-white/10\",children:n.jsx(sl,{className:\"h-8 w-8 text-sky-400\"})})}),n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:p===\"verify\"?\"Private Access\":\"Secure Setup\"}),n.jsx(\"p\",{className:\"text-white/40 text-sm mt-2\",children:p===\"verify\"?\"Encrypted PIN required\":\"Create your master PIN\"})]}),n.jsxs(\"div\",{className:\"group relative flex flex-col items-center justify-center rounded-[32px] bg-white/5 p-10 ring-1 ring-white/10 backdrop-blur-md\",children:[n.jsx(\"div\",{className:\"flex gap-5\",children:[0,1,2,3].map(le=>n.jsx(Le.div,{animate:{scale:le<T.length?1.2:1,backgroundColor:le<T.length?\"#fff\":\"rgba(255,255,255,0.1)\"},transition:{duration:.1},className:\"h-3.5 w-3.5 rounded-full\"},le))}),n.jsx(\"input\",{ref:k,type:\"password\",inputMode:\"numeric\",maxLength:4,value:T,onChange:le=>C(le.target.value.replace(/\\D/g,\"\")),onKeyDown:te,className:\"absolute inset-0 opacity-0 cursor-default\",\"aria-label\":\"Access PIN\",placeholder:\"PIN\"})]}),p===\"verify\"&&n.jsxs(\"div\",{className:\"flex flex-col items-center gap-4\",children:[n.jsxs(\"button\",{onClick:U,className:\"flex items-center gap-2 text-sky-400 text-sm font-medium\",children:[n.jsx(Hn,{className:\"h-5 w-5\"}),\" Use Biometrics\"]}),n.jsx(\"button\",{onClick:v,className:\"text-white/30 text-xs hover:text-white/50 transition-colors\",children:\"Forgot PIN? Reset via SMS\"}),n.jsx(\"button\",{onClick:V,className:\"text-sky-500/50 text-[10px] font-bold uppercase tracking-widest hover:text-sky-400/80 transition-colors mt-2\",children:\"Login with another account\"})]})]},\"pin\")]}),n.jsxs(Le.button,{onClick:me(),disabled:Y(),className:`mt-8 flex w-full items-center justify-center gap-2 rounded-[22px] py-4 text-base font-semibold text-white shadow-lg transition-all ${Y()?\"cursor-not-allowed bg-[#3A3A3C] opacity-50\":\"bg-gradient-to-r from-[#0A84FF] to-[#0047AB] shadow-sky-500/20 active:scale-95\"}`,whileTap:{scale:.98},children:[ie(),!Y()&&n.jsx(P0,{className:\"h-4 w-4\"})]})]}),n.jsx(Bn,{children:F&&n.jsx(Le.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"fixed inset-0 z-[60] flex items-end justify-center bg-black/60 p-6 backdrop-blur-sm\",children:n.jsxs(Le.div,{initial:{y:100},animate:{y:0},exit:{y:100},className:\"w-full max-w-sm rounded-[32px] bg-[#1C1C1E] p-8 text-center ring-1 ring-white/10 shadow-2xl\",children:[n.jsx(\"div\",{className:\"mx-auto mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-sky-500/20 text-sky-400\",children:n.jsx(Cu,{className:\"h-8 w-8\"})}),n.jsx(\"h3\",{className:\"text-xl font-bold text-white\",children:\"Speed up your next login?\"}),n.jsx(\"p\",{className:\"mt-2 text-sm text-white/50\",children:\"We can securely remember your ID so you can skip the mobile entry next time.\"}),n.jsxs(\"div\",{className:\"mt-8 flex flex-col gap-3\",children:[n.jsx(\"button\",{onClick:()=>{localStorage.setItem(\"finhub_remembered_mobile\",w),oe(!1)},className:\"w-full rounded-2xl bg-sky-500 py-4 font-semibold text-white active:scale-95 transition-all\",children:\"Enable Smart Login\"}),n.jsx(\"button\",{onClick:()=>oe(!1),className:\"w-full py-2 text-sm font-medium text-white/30 active:text-white/50\",children:\"Maybe later\"})]})]})})}),n.jsx(Bn,{children:ge&&n.jsx(Le.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"fixed inset-0 z-[70] flex flex-col items-center justify-center bg-black/40 backdrop-blur-md\",children:n.jsxs(Le.div,{initial:{scale:.8},animate:{scale:1},className:\"flex flex-col items-center\",children:[n.jsxs(\"div\",{className:\"relative mb-6\",children:[n.jsx(Le.div,{animate:{scale:[1,1.2,1],opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0},className:\"absolute inset-0 rounded-full bg-sky-500/30 blur-2xl\"}),n.jsx(\"div\",{className:\"relative flex h-24 w-24 items-center justify-center rounded-full bg-white/5 ring-1 ring-white/20\",children:n.jsx(Hn,{className:\"h-12 w-12 text-sky-400\"})})]}),n.jsx(\"h3\",{className:\"text-lg font-medium text-white\",children:\"Scanning Biometrics\"}),n.jsx(\"p\",{className:\"mt-2 text-sm text-white/40 italic\",children:\"Verifying your node identity...\"}),n.jsx(\"button\",{onClick:()=>O(!1),className:\"mt-12 text-xs font-medium uppercase tracking-widest text-white/20 hover:text-white/40\",children:\"Cancel & use PIN\"})]})})}),n.jsx(\"div\",{className:\"absolute bottom-8 text-center text-[10px] text-white/20\",children:n.jsx(\"p\",{children:\"Protected by FinHub Security. Data is localized and encrypted.\"})})]})},B0=({message:i=\"Secure Node Handshake\",subMessage:l=\"Re-encrypting local session...\"})=>n.jsxs(\"div\",{className:\"fixed inset-0 z-[100] flex flex-col items-center justify-center bg-[#000000] overflow-hidden\",children:[n.jsx(Le.div,{animate:{opacity:[.1,.2,.1],scale:[1,1.1,1]},transition:{duration:4,repeat:1/0,ease:\"easeInOut\"},className:\"absolute h-[500px] w-[500px] rounded-full bg-sky-500/10 blur-[120px]\"}),n.jsxs(\"div\",{className:\"relative flex flex-col items-center justify-center gap-12\",children:[n.jsxs(\"div\",{className:\"relative flex items-center justify-center\",children:[[0,1,2].map(o=>n.jsx(Le.div,{className:\"absolute rounded-full border border-sky-400/20\",initial:{width:80,height:80,opacity:0},animate:{width:[80,250],height:[80,250],opacity:[.4,0]},transition:{duration:3,repeat:1/0,delay:o*1,ease:\"easeOut\"}},o)),n.jsx(Le.div,{animate:{y:[0,-10,0]},transition:{duration:4,repeat:1/0,ease:\"easeInOut\"},className:\"relative z-10\",children:n.jsx(Le.div,{animate:{scale:[1,1.1,1],filter:[\"drop-shadow(0 0 15px rgba(56,189,248,0.3))\",\"drop-shadow(0 0 30px rgba(56,189,248,0.6))\",\"drop-shadow(0 0 15px rgba(56,189,248,0.3))\"]},transition:{duration:3,repeat:1/0,ease:\"easeInOut\"},className:\"relative flex h-32 w-32 items-center justify-center rounded-[32px] bg-gradient-to-br from-[#1C1C1E] to-[#000000] ring-1 ring-white/10 shadow-2xl backdrop-blur-xl\",children:n.jsx(\"img\",{src:\"/images/logo-icon.png\",alt:\"FinHub\",className:\"h-20 w-20 object-contain drop-shadow-lg\"})})})]}),n.jsx(Le.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:\"flex flex-col items-center gap-2\",children:n.jsxs(\"div\",{className:\"flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/5 ring-1 ring-white/5 backdrop-blur-md\",children:[n.jsx(sl,{className:\"h-3 w-3 text-sky-400\"}),n.jsx(\"span\",{className:\"text-[10px] font-bold tracking-[0.2em] uppercase text-white/40\",children:i})]})})]}),n.jsxs(\"div\",{className:\"absolute bottom-16 w-full max-w-[200px] px-6\",children:[n.jsx(\"div\",{className:\"h-[2px] w-full overflow-hidden rounded-full bg-white/10\",children:n.jsx(Le.div,{initial:{x:\"-100%\"},animate:{x:\"100%\"},transition:{duration:1.5,repeat:1/0,ease:\"easeInOut\"},className:\"h-full w-1/3 bg-gradient-to-r from-transparent via-sky-400 to-transparent\"})}),n.jsx(\"div\",{className:\"mt-3 text-center\",children:n.jsx(\"span\",{className:\"text-[10px] font-medium text-white/20 italic tracking-wider\",children:l})})]})]}),yN=({isOpen:i,onClose:l})=>n.jsx(Bn,{children:i&&n.jsxs(n.Fragment,{children:[n.jsx(Le.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:l,className:\"fixed inset-0 z-[200] bg-black/60 backdrop-blur-sm\"}),n.jsx(\"div\",{className:\"fixed inset-0 z-[201] flex items-center justify-center p-4 pointer-events-none\",children:n.jsxs(Le.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:\"spring\",damping:25,stiffness:300},className:\"w-full max-w-md bg-slate-900 border border-white/5 rounded-[32px] shadow-2xl overflow-hidden pointer-events-auto relative\",children:[n.jsx(\"div\",{className:\"absolute top-0 inset-x-0 h-32 bg-gradient-to-b from-indigo-500/10 to-transparent pointer-events-none\"}),n.jsx(\"button\",{onClick:l,className:\"absolute top-6 right-6 p-2 rounded-full bg-white/5 text-slate-400 hover:text-white hover:bg-white/10 transition-colors z-10\",\"aria-label\":\"Close about us popup\",children:n.jsx(il,{className:\"w-5 h-5\"})}),n.jsxs(\"div\",{className:\"p-8 pt-12 space-y-8 relative\",children:[n.jsxs(\"div\",{className:\"flex flex-col items-center text-center gap-3\",children:[n.jsx(\"div\",{className:\"w-16 h-16 rounded-[22px] bg-indigo-600 flex items-center justify-center shadow-lg shadow-indigo-500/20\",children:n.jsx(Dy,{className:\"w-8 h-8 text-white\"})}),n.jsxs(\"div\",{children:[n.jsx(\"h2\",{className:\"text-2xl font-black text-white tracking-tight uppercase\",children:\"FinHub Core\"}),n.jsx(\"p\",{className:\"text-[10px] font-bold text-indigo-400 uppercase tracking-[0.3em]\",children:\"Quantum Fabric v50.3\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"section\",{className:\"space-y-2\",children:[n.jsxs(\"h3\",{className:\"text-[10px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2\",children:[n.jsx(Hn,{className:\"w-3.5 h-3.5\"}),\"Our Vision\"]}),n.jsx(\"p\",{className:\"text-sm text-slate-300 leading-relaxed font-medium\",children:\"FinHub is designed to be the central nervous system of your personal economy. We merge neural-inspired data models with high-precision tracking to navigate complex wealth landscapes.\"})]}),n.jsxs(\"section\",{className:\"space-y-2\",children:[n.jsxs(\"h3\",{className:\"text-[10px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2\",children:[n.jsx(sl,{className:\"w-3.5 h-3.5\"}),\"Core Features\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[n.jsxs(\"div\",{className:\"bg-white/5 p-3 rounded-2xl border border-white/5\",children:[n.jsx(\"span\",{className:\"block text-[8px] font-black text-indigo-400 uppercase mb-1\",children:\"Localization\"}),n.jsx(\"span\",{className:\"text-[10px] text-slate-400 leading-tight\",children:\"Sovereign identity via node storage.\"})]}),n.jsxs(\"div\",{className:\"bg-white/5 p-3 rounded-2xl border border-white/5\",children:[n.jsx(\"span\",{className:\"block text-[8px] font-black text-indigo-400 uppercase mb-1\",children:\"Clamping Logic\"}),n.jsx(\"span\",{className:\"text-[10px] text-slate-400 leading-tight\",children:\"Mathematical stability in all simulations.\"})]})]})]}),n.jsxs(\"div\",{className:\"pt-6 border-t border-white/5 flex flex-col items-center gap-2\",children:[n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-600 uppercase tracking-widest\",children:\"Architect: Sijo Joseph\"}),n.jsx(\"p\",{className:\"text-[10px] font-black text-slate-800 uppercase tracking-[0.2em]\",children:\"© 2025 Neural FinHub Fabric\"})]})]})]})]})})]})}),vN=i=>{const{accounts:l,recurringTransactions:o,goals:u}=i,d=new Date,h=new Date;h.setDate(d.getDate()+7);const g=l.filter(B=>B.type!==\"credit_card\"),N=g.reduce((B,J)=>B+(J.balance||0),0),E=o.filter(B=>{const J=new Date(B.startDate);return B.type===\"expense\"&&J<=h&&J>=d}).reduce((B,J)=>B+J.amount,0),S=u.reduce((B,J)=>B+(J.currentAmount||0),0),p=N-E-S,f=l.filter(B=>B.type===\"credit_card\"),w=f.reduce((B,J)=>{const ne=J.creditLimit||0,F=J.balance||0,oe=Math.max(0,ne-F),ge=J.safeLimitPercentage||30,O=ne*ge/100;return B+Math.min(oe,O)},0),A=p+w;let T=-1/0,C=null,M=null;g.forEach(B=>{const J=o.filter(oe=>oe.accountId===B.id&&oe.type===\"expense\").reduce((oe,ge)=>{const O=new Date(ge.startDate);return O<=h&&O>=d?oe+ge.amount:oe},0),ne=B.min_buffer||0,F=B.balance-J-ne;F>T&&(T=F,C=B.id,M=B.name)});let y=\"SAFE\";const L=g.some(B=>{const J=o.filter(ne=>ne.accountId===B.id&&ne.type===\"expense\").reduce((ne,F)=>{const oe=new Date(F.startDate);return oe<=h&&oe>=d?ne+F.amount:ne},0);return B.balance<J});p<0||L?y=\"CRITICAL\":(p<N*.1||p<2e3)&&(y=\"TIGHT\");let z=null;const j=f.find(B=>B.balance/(B.creditLimit||1)>.7),G=g.find(B=>{const J=o.filter(ne=>ne.accountId===B.id&&ne.type===\"expense\").reduce((ne,F)=>{const oe=new Date(F.startDate);return oe<=h&&oe>=d?ne+F.amount:ne},0);return B.balance<J});G?z=`Payment risk: ${G.name} insufficient for upcoming dues.`:y===\"TIGHT\"?z=\"Low Safe-to-Spend: Consider postponing large purchases.\":j&&(z=`High credit utilization on ${j.name} (>70%).`);const ee=o.filter(B=>B.type===\"expense\").map(B=>{const J=new Date(B.startDate),ne=Math.ceil((J.getTime()-d.getTime())/(1e3*60*60*24));return{...B,daysRemaining:ne}}).filter(B=>B.daysRemaining>=0).sort((B,J)=>B.daysRemaining-J.daysRemaining),Z=ee.length>0?{title:ee[0].description||\"Upcoming Payment\",amount:ee[0].amount,daysRemaining:ee[0].daysRemaining}:null;let _=null;if(y===\"CRITICAL\"&&G&&C&&C!==G.id){const B=o.filter(J=>J.accountId===G.id&&J.type===\"expense\").reduce((J,ne)=>{const F=new Date(ne.startDate);return F<=h&&F>=d?J+ne.amount:J},0);_={fromAccountId:C,toAccountId:G.id,amount:B-G.balance}}return{liquidBalance:N,upcomingDues:E,reservedAmount:S,liquidSafeSpend:p,creditSafeSpend:w,safeToSpendGlobal:A,suggestedSpendAccountId:C,suggestedSpendAccountName:M,suggestedReason:\"Highest free buffer after upcoming payments\",status:y,topAlert:z,quickFix:_,nextDue:Z}},wN=i=>({accounts:i.accounts||[],recurringTransactions:i.recurringTransactions||[],goals:i.goals||[],liabilities:i.liabilities||[],settings:i.settings||{}}),Zi={calculateStressFactor(i,l){if(l===0)return .6;const o=i/l;return o<=.3?1:o<=.5?.9:o<=.7?.75:.6},calculateHabitShare(i,l){if(l===0)return .02;const o=i/l;return Math.min(Math.max(o,.02),.4)},calculateSSR(i,l,o,u){const d=l-o-u,h=new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate(),g=h-new Date().getDate()+1,N=d*(g/h);return N<=0?.6:Math.min(Math.max(i/N,.6),1)},calculateBaseLimit(i,l,o){return i*l*o},calculateProjection(i,l,o){return l===0?i:i/l*o},isDiscretionary(i){const l=[\"entertainment\",\"dining\",\"out\",\"shopping\",\"leisure\",\"hobby\",\"gift\",\"travel\",\"dress\",\"luxury\",\"movie\"],o=i.toLowerCase();return l.some(u=>o.includes(u))},calculateGap(i,l){return i-l}};function jN({className:i,value:l,indicatorClassName:o,...u}){return n.jsx(My,{\"data-slot\":\"progress\",className:De(\"bg-primary/20 relative h-2 w-full overflow-hidden rounded-full\",i),...u,children:n.jsx(_y,{\"data-slot\":\"progress-indicator\",className:De(\"bg-primary h-full w-full flex-1 transition-all\",o),style:{transform:`translateX(-${100-(l||0)}%)`}})})}const NN=()=>{const{expenses:i,incomes:l,liabilities:o,goals:u,accounts:d,emergencyFundAmount:h,currency:g}=ai(),{availableToSpend:N}=Gp({accounts:d,goals:u,liabilities:o,expenses:i,emergencyFundAmount:h}),E=x.useMemo(()=>{const f=new Date,w=f.getMonth(),A=f.getFullYear(),C=(ne=>new Date(A,w-ne,1))(2),y=l.filter(ne=>new Date(ne.date)>=C).reduce((ne,F)=>ne+F.amount,0)/3,L=o.reduce((ne,F)=>ne+(F.emiAmount||0),0),z=u.filter(ne=>ne.type===\"stability\"||ne.type===\"protection\"||ne.name.toLowerCase().includes(\"emergency\")).reduce((ne,F)=>ne+(F.monthly_contribution||0),0),j=z>0?z:.1*y,G=y-L-j,ee=Zi.calculateStressFactor(L,y),Z=Zi.calculateSSR(N,y,L,j),_=i.filter(ne=>new Date(ne.date)>=C),B=_.reduce((ne,F)=>ne+F.amount,0)/3,J={};return Tu.forEach(ne=>{const oe=_.filter(U=>U.category===ne.value).reduce((U,Q)=>U+Q.amount,0)/3,ge=Zi.calculateHabitShare(oe,B),O=Zi.calculateBaseLimit(G,ge,ee),k=Zi.isDiscretionary(ne.value);J[ne.value]=k?O*Math.min(Math.max(Z,.6),1):O}),{limits:J}},[i,l,o,u,N]),{limits:S}=E,p=f=>new Intl.NumberFormat(\"en-IN\",{style:\"currency\",currency:g||\"INR\",maximumFractionDigits:0}).format(f);return n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"header\",{className:\"px-1\",children:[n.jsx(\"h2\",{className:\"text-2xl font-black text-white tracking-tight\",children:\"Financial Guardrails\"}),n.jsx(\"p\",{className:\"text-slate-500 text-[10px] font-bold uppercase tracking-[0.2em] mt-1\",children:\"Hybrid Budget Engine v1.1\"})]}),n.jsx(\"div\",{className:\"grid gap-4\",children:Tu.map(f=>{const w=S[f.value]||0,A=i.filter(C=>{const M=new Date(C.date);return C.category===f.value&&M.getMonth()===new Date().getMonth()&&M.getFullYear()===new Date().getFullYear()}).reduce((C,M)=>C+M.amount,0),T=w>0?A/w*100:0;return n.jsxs(\"div\",{className:\"rounded-3xl border border-white/5 bg-white/5 p-5 transition-all hover:bg-white/10\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-start mb-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-xl\",role:\"img\",\"aria-label\":f.value,children:f.emoji}),n.jsxs(\"div\",{children:[n.jsx(\"h3\",{className:\"text-sm font-bold text-white\",children:f.value}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 uppercase tracking-widest mt-0.5\",children:\"Category Limit\"})]})]}),n.jsxs(\"div\",{className:\"text-right\",children:[n.jsx(\"p\",{className:\"text-sm font-black text-white\",children:p(w)}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 uppercase tracking-widest mt-0.5\",children:\"Monthly\"})]})]}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[10px] font-bold uppercase tracking-tighter\",children:[n.jsxs(\"span\",{className:\"text-slate-400\",children:[\"Spent: \",p(A)]}),n.jsxs(\"span\",{className:De(T>90?\"text-red-400\":\"text-emerald-400\"),children:[Math.round(T),\"%\"]})]}),n.jsx(jN,{value:T,className:\"h-1.5\",indicatorClassName:De(T>100?\"bg-red-500 shadow-[0_0_8px_rgba(239,68,68,0.5)]\":T>80?\"bg-orange-500 shadow-[0_0_8px_rgba(249,115,22,0.5)]\":\"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]\")})]})]},f.value)})})]})},SN=x.lazy(()=>Fa(()=>import(\"./Dashboard-IVoRIJ8c.js\"),__vite__mapDeps([8,1,2,9,10,4,3])).then(i=>({default:i.Dashboard}))),CN=x.lazy(()=>Fa(()=>import(\"./TransactionList-rKWzJlT2.js\"),__vite__mapDeps([11,1,2,10,3,4])).then(i=>({default:i.TransactionList}))),EN=x.lazy(()=>Fa(()=>import(\"./GoalsTracker-D6OcmKwC.js\"),__vite__mapDeps([12,1,2,3,4])).then(i=>({default:i.GoalsTracker}))),AN=x.lazy(()=>Fa(()=>import(\"./EmergencyFundsTab-gXH3z62T.js\"),__vite__mapDeps([13,1,2,3,4])).then(i=>({default:i.EmergencyFundsTab}))),kN=x.lazy(()=>Fa(()=>import(\"./InvestmentsTab-B4180PLB.js\"),__vite__mapDeps([14,1,2,9,10,4,3])).then(i=>({default:i.InvestmentsTab})));function TN(){const{settings:i,expenses:l,incomes:o,debts:u,goals:d,accounts:h,liabilities:g,notifications:N,emergencyFundAmount:E,investments:S,isLoading:p,refreshData:f,updateSettings:w,userId:A,createExpense:T,updateExpense:C,deleteExpense:M,createIncome:y,updateIncome:L,deleteIncome:z,createDebt:j,updateDebt:G,deleteDebt:ee,settleDebt:Z,createGoal:_,updateGoal:B,deleteGoal:J,createAccount:ne,updateAccount:F,deleteAccount:oe,setEmergencyFundAmount:ge,setNotifications:O,isFundAllocationOpen:k,fundAllocationType:U,closeFundAllocation:Q,performFundAllocation:ae,transferFunds:v,authStatus:D,isOffline:W,authMessage:q,backfillRequest:Y,setBackfillRequest:V,executeBackfill:te,createRecurring:me,recurringTransactions:ie}=ai(),[le,je]=x.useState(\"dashboard\"),[Ae,pe]=x.useState(!1),[ve,xe]=x.useState(\"expense\"),[Ke,We]=x.useState(null),[Ue,it]=x.useState(!1),[Ve,ke]=x.useState(!1),[Ft,fe]=x.useState(!1),[Se,ze]=x.useState(null),[lt,mt]=x.useState(!1),[_a,ga]=x.useState(!1),[Ra,Kt]=x.useState(!1),[Oa,ea]=x.useState(!1),[zt]=x.useState(null);hN(()=>ke(!0),()=>fe(!0)),x.useEffect(()=>{if(Gn.isNativePlatform()){(async()=>{try{(await Cr.checkPermissions()).display!==\"granted\"&&await Cr.requestPermissions()}catch(Ee){console.error(\"Error checking notification permissions:\",Ee)}})();const Fe=Cr.addListener(\"localNotificationActionPerformed\",Ee=>{const{notification:rt}=Ee,Ct=rt.extra;console.log(\"Native notification clicked:\",rt),Ct&&(Ct.achievementId?(ze(Ct.achievementId),mt(!0)):Ct.view&&je(Ct.view))});return()=>{Fe.then(Ee=>Ee.remove())}}},[]),x.useEffect(()=>{i.theme===\"dark\"?document.documentElement.classList.add(\"dark\"):document.documentElement.classList.remove(\"dark\")},[i.theme]);const{openFundAllocation:Ht}=ai();x.useEffect(()=>{window.showFundAllocation=Ht},[Ht]);const{currentMonthExpenses:ta}=x.useMemo(()=>{const de=new Date,Fe=de.getMonth(),Ee=de.getFullYear();return{currentMonthExpenses:l.filter(et=>!et.isInternalTransfer).filter(et=>{const bt=new Date(et.date);return bt.getMonth()===Fe&&bt.getFullYear()===Ee})}},[l]),xt=x.useMemo(()=>{const de=o.reduce((Zt,ht)=>Zt+ht.amount,0),Fe=l.reduce((Zt,ht)=>Zt+ht.amount,0),Ee=u.reduce((Zt,ht)=>Zt+ht.amount,0);if(de===0&&Ee===0)return{score:50,savingsRate:0,debtRatio:0,spendingRatio:0};const rt=[...o,...l,...u];let Ct=1;if(rt.length>0){const Zt=rt.map(Ur=>new Date(Ur.date).getTime()),ht=new Date(Math.min(...Zt)),pn=Math.abs(new Date().getTime()-ht.getTime()),si=Math.ceil(pn/(1e3*60*60*24*30));Ct=Math.max(1,si)}const bt=de/Ct*12,Tt=de>0?(de-Fe)/de:0,yt=de>0?Fe/de:0,Jt=bt>0?Ee/bt:Ee>0?1/0:0;let jt=50;return Tt>=.4?jt+=30:Tt>=.2?jt+=20:Tt>=.1?jt+=10:Tt>0?jt+=5:jt-=20,Jt===0?jt+=20:Jt<=.3?jt+=10:Jt<=.6?jt-=10:Jt<=1?jt-=30:jt-=50,yt<=.5?jt+=20:yt<=.7?jt+=10:yt<=.9?jt+=0:jt-=10,{score:Math.max(0,Math.min(100,Math.round(jt))),savingsRate:Tt,debtRatio:Jt,spendingRatio:yt}},[o,l,u]),ni=x.useMemo(()=>({totalIncome:o.reduce((de,Fe)=>de+Fe.amount,0),totalExpenses:l.reduce((de,Fe)=>de+Fe.amount,0),activeDebts:u.filter(de=>de.status===\"pending\").length,goalsCount:d.length,recentTransactions:[...l.slice(0,5).map(de=>({type:\"expense\",...de})),...o.slice(0,5).map(de=>({type:\"income\",...de}))],expenses:l,incomes:o,accounts:h,investments:S,liabilities:g,goals:d,debts:u,currentMonthExpenses:ta,savingsRate:xt.savingsRate,healthScore:xt.score,brainSummary:Ij({investments:S,accounts:h,healthScore:xt.score,savingsRate:xt.savingsRate,totalIncome:o.reduce((de,Fe)=>de+Fe.amount,0),totalExpenses:l.reduce((de,Fe)=>de+Fe.amount,0),activeDebts:u.filter(de=>de.status===\"pending\").length,goalsCount:d.length},i.currency,le)}),[o,l,u,d,xt.savingsRate,xt.score,h,S,g,ta,i.currency,le]),Fn=x.useMemo(()=>{const de=wN({accounts:h,recurringTransactions:ie,goals:d,liabilities:g,settings:i});return vN(de)},[h,ie,d,g,i]);if(p)return n.jsx(B0,{});Gn.isNativePlatform()&&Ov.hide().catch(de=>console.error(\"Splash hide error:\",de));const xa=async()=>{await f()},mn=de=>{xe(de),We(null),pe(!0)},hn=de=>{xe(\"expense\"),We(de),pe(!0)},Ya=de=>{xe(\"income\"),We(de),pe(!0)},ba=de=>{xe(\"debt\"),We(de),pe(!0)},Me=de=>{Ke?ve===\"expense\"?C(Ke.id,de):ve===\"income\"?L(Ke.id,de):ve===\"debt\"&&G(Ke.id,de):ve===\"expense\"?(T(de),de.roundUpAmount&&dt(d.length>0?d[0].id:\"general\",\"goal\",void 0,de.roundUpAmount,de.accountId)):ve===\"income\"?y(de):ve===\"debt\"&&j(de)},dt=async(de,Fe,Ee,rt,Ct)=>{if(!rt&&!zt)return;const et=rt||(zt?zt.roundedAmount-zt.expenseAmount:0),bt=Ct||(zt?zt.accountId:\"\"),Tt=h.find(yt=>yt.id===bt);if(Tt&&await F(Tt.id,{balance:Tt.balance-et}),Fe===\"goal\"){const yt=d.find(Jt=>Jt.id===de);if(yt)await B(de,{currentAmount:yt.currentAmount+et}),ce.success(`Saved ${dn[i.currency]}${et} to ${yt.name}!`);else{const Jt=d.find(jt=>jt.name===\"General Savings\");if(Jt)await B(Jt.id,{currentAmount:Jt.currentAmount+et}),ce.success(`Saved ${dn[i.currency]}${et} to General Savings!`);else{const jt={name:\"General Savings\",targetAmount:1e4,currentAmount:et,targetDate:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString(),emoji:\"🐷\"};_(jt),ce.success(`Created \"General Savings\" and saved ${dn[i.currency]}${et}!`)}}}else ge(yt=>yt+et),ce.success(`Saved ${dn[i.currency]}${et} to Emergency Fund!`);ea(!1),Or({particleCount:50,spread:60,origin:{y:.7}})},kt=de=>{const Fe={today:1,week:7,month:30},Ee=new Date;Ee.setDate(Ee.getDate()+Fe[de]),localStorage.setItem(\"roundUpMutedUntil\",Ee.toISOString()),ea(!1),ce.info(`Round ups muted for ${de===\"today\"?\"today\":de===\"week\"?\"a week\":\"a month\"}`)};return n.jsxs(n.Fragment,{children:[n.jsx(Bn,{mode:\"wait\",children:(D===\"guest\"||D===\"authenticating\")&&n.jsx(Le.div,{className:\"fixed inset-0 z-0\",exit:{opacity:0,scale:.95,filter:\"blur(20px)\"},transition:{duration:.8},children:n.jsx(bN,{})},\"login-container\")}),n.jsx(Bn,{children:D===\"authenticating\"&&n.jsx(Le.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4},className:\"fixed inset-0 z-50\",children:n.jsx(B0,{message:q?.message,subMessage:q?.subMessage})},\"loading-sprite\")}),n.jsx(Bn,{mode:\"wait\",children:D===\"authenticated\"&&n.jsx(Le.div,{className:\"relative z-10\",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.8,ease:[.16,1,.3,1]},children:n.jsxs(\"div\",{className:\"min-h-screen bg-transparent text-foreground transition-colors font-sans\",children:[n.jsx(dj,{activeTab:le,onTabChange:de=>je(de),notificationCount:N.filter(de=>!de.read).length,onNotificationClick:()=>fe(!Ft),onSettingsClick:()=>ke(!Ve),forceHide:lt,renderFab:de=>n.jsx(pN,{isVisible:de&&!Ve&&!Ft&&!lt,onOpenAI:()=>it(!0),onAddTransaction:mn,onMigrate:()=>ga(!0)}),children:n.jsx(fN,{onRefresh:xa,children:n.jsx(xN,{children:n.jsxs(x.Suspense,{fallback:n.jsxs(\"div\",{className:\"space-y-6 pt-12\",children:[n.jsx(mN,{}),n.jsx(\"p\",{className:\"text-center text-slate-500 text-sm\",children:\"Loading Component...\"})]}),children:[le===\"dashboard\"&&n.jsx(\"div\",{className:\"space-y-6\",children:n.jsx(SN,{expenses:l,incomes:o,currency:i.currency,goals:d,liabilities:g,debts:u,investments:S,accounts:h,emergencyFundAmount:E,healthScore:xt.score,userName:i.name,isOffline:W,isSampleMode:i.isSampleMode,onNavigate:de=>je(de),onAddTransaction:de=>{xe(de),pe(!0)}})}),le===\"budgets\"&&n.jsx(\"div\",{className:\"px-4 py-6\",children:n.jsx(NN,{})}),le===\"transactions\"&&n.jsx(CN,{expenses:l,incomes:o,debts:u,accounts:h,currency:i.currency,onEditExpense:hn,onDeleteExpense:M,onEditIncome:Ya,onDeleteIncome:z,onEditDebt:ba,onDeleteDebt:ee,onSettleDebt:Z}),le===\"goals\"&&n.jsx(EN,{goals:d,currency:i.currency,accounts:h,expenses:l,incomes:o,onCreateGoal:_,onUpdateGoal:B,onDeleteGoal:J,onDeductFromAccount:async(de,Fe)=>{const Ee=h.find(rt=>rt.id===de);Ee&&await F(de,{balance:Ee.balance-Fe})}}),le===\"accounts\"&&n.jsx(uN,{accounts:h,currency:i.currency,onCreateAccount:ne,onUpdateAccount:F,onDeleteAccount:oe}),le===\"investments\"&&n.jsx(kN,{}),le===\"emergency\"&&n.jsx(AN,{currency:i.currency,userId:A,expenses:l,incomes:o,accounts:h,onEmergencyFundUpdate:de=>ge(de)}),le===\"recurring\"&&n.jsx(oj,{}),le===\"more\"&&n.jsx(nN,{onNavigate:de=>je(de),onOpenSettings:()=>ke(!0),onOpenNotifications:()=>fe(!0),emergencyFundAmount:E,bankAccountsCount:h.filter(de=>de.type===\"bank\").length,cardsCount:h.filter(de=>de.type===\"credit_card\").length,currency:i.currency,onOpenAbout:()=>Kt(!0)})]})})})}),Ae&&n.jsx(gj,{isOpen:Ae,onClose:()=>{pe(!1),We(null)},type:ve,onSubmit:Me,initialData:Ke,accounts:h,liabilities:g,currency:i.currency,roundUpEnabled:i.roundUpEnabled,defaultAccountId:Fn.suggestedSpendAccountId||void 0}),zt&&n.jsx(xj,{isOpen:Oa,onClose:()=>ea(!1),onConfirm:dt,expenseAmount:zt.expenseAmount,roundedAmount:zt.roundedAmount,currency:i.currency,goals:d,onMute:kt}),n.jsx(gN,{isOpen:Ue,onClose:()=>it(!1),context:ni,settings:i,isOffline:W}),n.jsx(aN,{isOpen:Ve,onClose:()=>ke(!1),settings:i,onUpdateSettings:w,onAchievementClick:de=>{ze(de),mt(!0),ke(!1)},onOpenAbout:()=>Kt(!0)}),n.jsx(lN,{isOpen:Ft,onClose:()=>fe(!1),notifications:N,onNotificationClick:async de=>{if(de.achievementId&&(ze(de.achievementId),mt(!0)),de.action&&de.action.type===\"verify_subscription\"&&de.action.status===\"completed\"){const{description:Fe,amount:Ee,category:rt,accountId:Ct,date:et}=de.action.payload;try{await me({type:\"expense\",description:Fe,amount:Ee,category:rt,accountId:Ct,frequency:\"monthly\",startDate:et||new Date().toISOString().split(\"T\")[0],tags:[\"auto-verified\",\"subscription\"]}),ce.success(`Verified: ${Fe} is now a recurring subscription.`),O(bt=>bt.map(Tt=>Tt.id===de.id?{...Tt,read:!0}:Tt))}catch{ce.error(\"Failed to automate subscription.\")}}else de.action&&de.action.status===\"dismissed\"&&(ce.info(\"Marked as one-time purchase.\"),O(Fe=>Fe.map(Ee=>Ee.id===de.id?{...Ee,read:!0}:Ee)));de.action||(de.category===\"reminders\"?je(\"recurring\"):de.category===\"transactions\"&&je(\"transactions\"),fe(!1))},onMarkAsRead:de=>{O(Fe=>Fe.map(Ee=>Ee.id===de?{...Ee,read:!0}:Ee))},onClearRead:()=>{O(de=>de.filter(Fe=>!Fe.read)),ce.success(\"Read notifications cleared\")}}),n.jsx(rN,{isOpen:lt,onClose:()=>{mt(!1),ze(null)},achievementId:Se}),n.jsx(oN,{isOpen:k,onClose:Q,accounts:h,goals:d,currency:i.currency,destinationType:U,emergencyFund:{currentAmount:E,targetAmount:1e5},onAllocate:ae,liabilities:g,expenses:l}),n.jsx(dN,{isOpen:_a,onClose:()=>ga(!1),accounts:h,currency:i.currency,onTransfer:v}),n.jsx(yN,{isOpen:Ra,onClose:()=>Kt(!1)})]})},\"main-app\")}),Y&&n.jsx(Rp,{open:!0,onOpenChange:()=>V(null),children:n.jsxs(Op,{className:\"bg-slate-900/95 border-white/10 text-slate-100 z-[99999999] backdrop-blur-xl\",children:[n.jsxs(zp,{children:[n.jsx(Up,{className:\"text-white text-xl font-bold font-sans\",children:\"Backfill Configuration Required\"}),n.jsxs(Ip,{className:\"text-slate-400 text-base\",children:[\"System detected \",n.jsxs(\"span\",{className:\"text-emerald-400 font-bold\",children:[Y.count,\" missing entries\"]}),\" in the transaction history\",Y.dates?.length>0&&n.jsxs(n.Fragment,{children:[\" \",\"from \",n.jsx(\"span\",{className:\"text-white font-medium\",children:Y.dates[0]?.toLocaleDateString(\"en-IN\",{day:\"numeric\",month:\"short\",year:\"numeric\"})}),\" \",\"to \",n.jsx(\"span\",{className:\"text-white font-medium\",children:Y.dates[Y.dates.length-1]?.toLocaleDateString(\"en-IN\",{day:\"numeric\",month:\"short\",year:\"numeric\"})})]}),\".\",n.jsx(\"br\",{}),n.jsx(\"br\",{}),\"Would you like to auto-populate the ledger for this period?\"]})]}),n.jsxs(Lp,{className:\"mt-4\",children:[n.jsx(qp,{onClick:()=>V(null),className:\"bg-white/5 border-white/5 text-slate-400 hover:text-white hover:bg-white/10 rounded-xl h-12 uppercase tracking-wider text-xs font-bold\",children:\"Cancel\"}),n.jsx(Bp,{onClick:()=>{te(),V(null)},className:\"bg-indigo-600 hover:bg-indigo-500 text-white border-0 font-bold rounded-xl h-12 px-8 shadow-lg shadow-indigo-600/20\",children:\"Generate Ledger\"})]})]})}),n.jsx(d1,{position:\"bottom-center\",richColors:!0,theme:\"dark\",toastOptions:{style:{background:\"#1C1C1E\",border:\"1px solid rgba(255, 255, 255, 0.1)\",color:\"#FFFFFF\",borderRadius:\"20px\",backdropFilter:\"none\",zIndex:9999999}},className:\"!z-[9999999]\"})]})}function DN({children:i,...l}){return n.jsx(jj,{...l,children:i})}function MN(i={}){const{immediate:l=!1,onNeedRefresh:o,onOfflineReady:u,onRegistered:d,onRegisteredSW:h,onRegisterError:g}=i;let N,E;const S=async(f=!0)=>{await E};async function p(){if(\"serviceWorker\"in navigator){if(N=await Fa(async()=>{const{Workbox:f}=await import(\"./workbox-window.prod.es5-BIl4cyR9.js\");return{Workbox:f}},[]).then(({Workbox:f})=>new f(\"/sw.js\",{scope:\"/\",type:\"classic\"})).catch(f=>{g?.(f)}),!N)return;N.addEventListener(\"activated\",f=>{(f.isUpdate||f.isExternal)&&window.location.reload()}),N.addEventListener(\"installed\",f=>{f.isUpdate||u?.()}),N.register({immediate:l}).then(f=>{h?h(\"/sw.js\",f):d?.(f)}).catch(f=>{g?.(f)})}}return E=p(),S}MN({immediate:!0});wv.createRoot(document.getElementById(\"root\")).render(n.jsx(H1,{children:n.jsx(DN,{attribute:\"class\",defaultTheme:\"dark\",forcedTheme:\"dark\",children:n.jsx(TN,{})})}));export{Bn as A,Re as B,Ki as C,us as D,Tu as E,C0 as F,LN as G,z0 as H,wt as I,L0 as J,ye as L,Qu as M,Ha as N,Ut as S,Ru as T,Uu as W,at as a,u0 as b,Zi as c,hu as d,pu as e,Ne as f,gu as g,Fu as h,mj as i,fp as j,Ot as k,De as l,Le as m,Iu as n,ds as o,fs as p,ms as q,hs as r,Bt as s,ce as t,Gp as u,It as v,qt as w,qe as x,vu as y,ai as z};"
      },
      {
        "file": "dist_test\\assets\\index-DHabN7TV.js",
        "line": 11,
        "snippet": "`);try{z=new Worker(URL.createObjectURL(new Blob([le])))}catch(ue){return typeof console<\"u\"&&typeof console.warn==\"function\"&&console.warn(\"🎊 Could not load worker\",ue),null}$(z)}return z}})(),M={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:[\"square\",\"circle\"],zIndex:100,colors:[\"#26ccff\",\"#a25afd\",\"#ff5e7e\",\"#88ff5a\",\"#fcff42\",\"#ffa62d\",\"#ff36ff\"],disableForReducedMotion:!1,scalar:1};function O(z,T){return T?T(z):z}function B(z){return z!=null}function L(z,T,re){return O(z&&B(z[T])?z[T]:M[T],re)}function R(z){return z<0?0:Math.floor(z)}function P(z,T){return Math.floor(Math.random()*(T-z))+z}function V(z){return parseInt(z,16)}function S(z){return z.map(se)}function se(z){var T=String(z).replace(/[^0-9a-f]/gi,\"\");return T.length<6&&(T=T[0]+T[0]+T[1]+T[1]+T[2]+T[2]),{r:V(T.substring(0,2)),g:V(T.substring(2,4)),b:V(T.substring(4,6))}}function he(z){var T=L(z,\"origin\",Object);return T.x=L(T,\"x\",Number),T.y=L(T,\"y\",Number),T}function ve(z){z.width=document.documentElement.clientWidth,z.height=document.documentElement.clientHeight}function fe(z){var T=z.getBoundingClientRect();z.width=T.width,z.height=T.height}function ye(z){var T=document.createElement(\"canvas\");return T.style.position=\"fixed\",T.style.top=\"0px\",T.style.left=\"0px\",T.style.pointerEvents=\"none\",T.style.zIndex=z,T}function Se(z,T,re,$,le,ue,Ne,je,de){z.save(),z.translate(T,re),z.rotate(ue),z.scale($,le),z.arc(0,0,1,Ne,je,de),z.restore()}function qe(z){var T=z.angle*(Math.PI/180),re=z.spread*(Math.PI/180);return{x:z.x,y:z.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:z.startVelocity*.5+Math.random()*z.startVelocity,angle2D:-T+(.5*re-Math.random()*re),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:z.color,shape:z.shape,tick:0,totalTicks:z.ticks,decay:z.decay,drift:z.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:z.gravity*3,ovalScalar:.6,scalar:z.scalar,flat:z.flat}}function Te(z,T){T.x+=Math.cos(T.angle2D)*T.velocity+T.drift,T.y+=Math.sin(T.angle2D)*T.velocity+T.gravity,T.velocity*=T.decay,T.flat?(T.wobble=0,T.wobbleX=T.x+10*T.scalar,T.wobbleY=T.y+10*T.scalar,T.tiltSin=0,T.tiltCos=0,T.random=1):(T.wobble+=T.wobbleSpeed,T.wobbleX=T.x+10*T.scalar*Math.cos(T.wobble),T.wobbleY=T.y+10*T.scalar*Math.sin(T.wobble),T.tiltAngle+=.1,T.tiltSin=Math.sin(T.tiltAngle),T.tiltCos=Math.cos(T.tiltAngle),T.random=Math.random()+2);var re=T.tick++/T.totalTicks,$=T.x+T.random*T.tiltCos,le=T.y+T.random*T.tiltSin,ue=T.wobbleX+T.random*T.tiltCos,Ne=T.wobbleY+T.random*T.tiltSin;if(z.fillStyle=\"rgba(\"+T.color.r+\", \"+T.color.g+\", \"+T.color.b+\", \"+(1-re)+\")\",z.beginPath(),h&&T.shape.type===\"path\"&&typeof T.shape.path==\"string\"&&Array.isArray(T.shape.matrix))z.fill(Y(T.shape.path,T.shape.matrix,T.x,T.y,Math.abs(ue-$)*.1,Math.abs(Ne-le)*.1,Math.PI/10*T.wobble));else if(T.shape.type===\"bitmap\"){var je=Math.PI/10*T.wobble,de=Math.abs(ue-$)*.1,xe=Math.abs(Ne-le)*.1,Ke=T.shape.bitmap.width*T.scalar,Ie=T.shape.bitmap.height*T.scalar,Ve=new DOMMatrix([Math.cos(je)*de,Math.sin(je)*de,-Math.sin(je)*xe,Math.cos(je)*xe,T.x,T.y]);Ve.multiplySelf(new DOMMatrix(T.shape.matrix));var rt=z.createPattern(v.transform(T.shape.bitmap),\"no-repeat\");rt.setTransform(Ve),z.globalAlpha=1-re,z.fillStyle=rt,z.fillRect(T.x-Ke/2,T.y-Ie/2,Ke,Ie),z.globalAlpha=1}else if(T.shape===\"circle\")z.ellipse?z.ellipse(T.x,T.y,Math.abs(ue-$)*T.ovalScalar,Math.abs(Ne-le)*T.ovalScalar,Math.PI/10*T.wobble,0,2*Math.PI):Se(z,T.x,T.y,Math.abs(ue-$)*T.ovalScalar,Math.abs(Ne-le)*T.ovalScalar,Math.PI/10*T.wobble,0,2*Math.PI);else if(T.shape===\"star\")for(var De=Math.PI/2*3,tt=4*T.scalar,St=8*T.scalar,mt=T.x,zt=T.y,ut=5,bt=Math.PI/ut;ut--;)mt=T.x+Math.cos(De)*St,zt=T.y+Math.sin(De)*St,z.lineTo(mt,zt),De+=bt,mt=T.x+Math.cos(De)*tt,zt=T.y+Math.sin(De)*tt,z.lineTo(mt,zt),De+=bt;else z.moveTo(Math.floor(T.x),Math.floor(T.y)),z.lineTo(Math.floor(T.wobbleX),Math.floor(le)),z.lineTo(Math.floor(ue),Math.floor(Ne)),z.lineTo(Math.floor($),Math.floor(T.wobbleY));return z.closePath(),z.fill(),T.tick<T.totalTicks}function ee(z,T,re,$,le){var ue=T.slice(),Ne=z.getContext(\"2d\"),je,de,xe=x(function(Ke){function Ie(){je=de=null,Ne.clearRect(0,0,$.width,$.height),v.clear(),le(),Ke()}function Ve(){u&&!($.width===m.width&&$.height===m.height)&&($.width=z.width=m.width,$.height=z.height=m.height),!$.width&&!$.height&&(re(z),$.width=z.width,$.height=z.height),Ne.clearRect(0,0,$.width,$.height),ue=ue.filter(function(rt){return Te(Ne,rt)}),ue.length?je=f.frame(Ve):Ie()}je=f.frame(Ve),de=Ie});return{addFettis:function(Ke){return ue=ue.concat(Ke),xe},canvas:z,promise:xe,reset:function(){je&&f.cancel(je),de&&de()}}}function me(z,T){var re=!z,$=!!L(T||{},\"resize\"),le=!1,ue=L(T,\"disableForReducedMotion\",Boolean),Ne=g&&!!L(T||{},\"useWorker\"),je=Ne?N():null,de=re?ve:fe,xe=z&&je?!!z.__confetti_initialized:!1,Ke=typeof matchMedia==\"function\"&&matchMedia(\"(prefers-reduced-motion)\").matches,Ie;function Ve(De,tt,St){for(var mt=L(De,\"particleCount\",R),zt=L(De,\"angle\",Number),ut=L(De,\"spread\",Number),bt=L(De,\"startVelocity\",Number),la=L(De,\"decay\",Number),ce=L(De,\"gravity\",Number),Ee=L(De,\"drift\",Number),He=L(De,\"colors\",S),yt=L(De,\"ticks\",Number),Ut=L(De,\"shapes\"),Oa=L(De,\"scalar\"),_a=!!L(De,\"flat\"),ba=he(De),ma=mt,ja=[],It=z.width*ba.x,Na=z.height*ba.y;ma--;)ja.push(qe({x:It,y:Na,angle:zt,spread:ut,startVelocity:bt,color:He[ma%He.length],shape:Ut[P(0,Ut.length)],ticks:yt,decay:la,gravity:ce,drift:Ee,scalar:Oa,flat:_a}));return Ie?Ie.addFettis(ja):(Ie=ee(z,ja,de,tt,St),Ie.promise)}function rt(De){var tt=ue||L(De,\"disableForReducedMotion\",Boolean),St=L(De,\"zIndex\",Number);if(tt&&Ke)return x(function(bt){bt()});re&&Ie?z=Ie.canvas:re&&!z&&(z=ye(St),document.body.appendChild(z)),$&&!xe&&de(z);var mt={width:z.width,height:z.height};je&&!xe&&je.init(z),xe=!0,je&&(z.__confetti_initialized=!0);function zt(){if(je){var bt={getBoundingClientRect:function(){if(!re)return z.getBoundingClientRect()}};de(bt),je.postMessage({resize:{width:bt.width,height:bt.height}});return}mt.width=mt.height=null}function ut(){Ie=null,$&&(le=!1,r.removeEventListener(\"resize\",zt)),re&&z&&(document.body.contains(z)&&document.body.removeChild(z),z=null,xe=!1)}return $&&!le&&(le=!0,r.addEventListener(\"resize\",zt,!1)),je?je.fire(De,mt,ut):Ve(De,mt,ut)}return rt.reset=function(){je&&je.reset(),Ie&&Ie.reset()},rt}var G;function C(){return G||(G=me(null,{useWorker:!0,resize:!0})),G}function Y(z,T,re,$,le,ue,Ne){var je=new Path2D(z),de=new Path2D;de.addPath(je,new DOMMatrix(T));var xe=new Path2D;return xe.addPath(de,new DOMMatrix([Math.cos(Ne)*le,Math.sin(Ne)*le,-Math.sin(Ne)*ue,Math.cos(Ne)*ue,re,$])),xe}function oe(z){if(!h)throw new Error(\"path confetti are not supported in this browser\");var T,re;typeof z==\"string\"?T=z:(T=z.path,re=z.matrix);var $=new Path2D(T),le=document.createElement(\"canvas\"),ue=le.getContext(\"2d\");if(!re){for(var Ne=1e3,je=Ne,de=Ne,xe=0,Ke=0,Ie,Ve,rt=0;rt<Ne;rt+=2)for(var De=0;De<Ne;De+=2)ue.isPointInPath($,rt,De,\"nonzero\")&&(je=Math.min(je,rt),de=Math.min(de,De),xe=Math.max(xe,rt),Ke=Math.max(Ke,De));Ie=xe-je,Ve=Ke-de;var tt=10,St=Math.min(tt/Ie,tt/Ve);re=[St,0,0,St,-Math.round(Ie/2+je)*St,-Math.round(Ve/2+de)*St]}return{type:\"path\",path:T,matrix:re}}function ge(z){var T,re=1,$=\"#000000\",le='\"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\", \"EmojiOne Color\", \"Android Emoji\", \"Twemoji Mozilla\", \"system emoji\", sans-serif';typeof z==\"string\"?T=z:(T=z.text,re=\"scalar\"in z?z.scalar:re,le=\"fontFamily\"in z?z.fontFamily:le,$=\"color\"in z?z.color:$);var ue=10*re,Ne=\"\"+ue+\"px \"+le,je=new OffscreenCanvas(ue,ue),de=je.getContext(\"2d\");de.font=Ne;var xe=de.measureText(T),Ke=Math.ceil(xe.actualBoundingBoxRight+xe.actualBoundingBoxLeft),Ie=Math.ceil(xe.actualBoundingBoxAscent+xe.actualBoundingBoxDescent),Ve=2,rt=xe.actualBoundingBoxLeft+Ve,De=xe.actualBoundingBoxAscent+Ve;Ke+=Ve+Ve,Ie+=Ve+Ve,je=new OffscreenCanvas(Ke,Ie),de=je.getContext(\"2d\"),de.font=Ne,de.fillStyle=$,de.fillText(T,rt,De);var tt=1/re;return{type:\"bitmap\",bitmap:je.transferToImageBitmap(),matrix:[tt,0,0,tt,-Ke*tt/2,-Ie*tt/2]}}c.exports=function(){return C().apply(this,arguments)},c.exports.reset=function(){C().reset()},c.exports.create=me,c.exports.shapeFromPath=oe,c.exports.shapeFromText=ge})((function(){return typeof window<\"u\"?window:typeof self<\"u\"?self:this||{}})(),Xu,!1);const ji=Xu.exports;Xu.exports.create;const Pu=[{id:\"first_transaction\",name:\"Getting Started\",description:\"Add your first transaction\",icon:\"🎯\",condition:i=>i.totalTransactions>=1},{id:\"early_bird\",name:\"Early Bird\",description:\"Log in for the first time today\",icon:\"🌅\",condition:i=>i.dailyLogin===!0},{id:\"ten_transactions\",name:\"Building Habits\",description:\"Log 10 transactions\",icon:\"📊\",condition:i=>i.totalTransactions>=10},{id:\"fifty_transactions\",name:\"Momentum Builder\",description:\"Log 50 transactions\",icon:\"⚡\",condition:i=>i.totalTransactions>=50},{id:\"financial_guru\",name:\"Financial Guru\",description:\"Complete 100 transactions\",icon:\"🧙\",condition:i=>i.totalTransactions>=100},{id:\"three_day_streak\",name:\"Streak Starter\",description:\"Log in for 3 days in a row\",icon:\"🔥\",condition:i=>i.currentStreak>=3},{id:\"consistent_tracker\",name:\"Consistent Tracker\",description:\"Log transactions for 7 days in a row\",icon:\"📅\",condition:i=>i.currentStreak>=7},{id:\"habit_master\",name:\"Habit Master\",description:\"Maintain a 30-day streak\",icon:\"🏅\",condition:i=>i.currentStreak>=30},{id:\"dedication_champion\",name:\"Dedication Champion\",description:\"Achieve a 100-day streak\",icon:\"👑\",condition:i=>i.currentStreak>=100},{id:\"first_goal\",name:\"Goal Setter\",description:\"Create your first savings goal\",icon:\"🎯\",condition:i=>i.totalGoals>=1},{id:\"goal_achiever\",name:\"Goal Achiever\",description:\"Complete your first savings goal\",icon:\"🏆\",condition:i=>i.completedGoals>=1},{id:\"triple_winner\",name:\"Triple Winner\",description:\"Complete 3 savings goals\",icon:\"🎖️\",condition:i=>i.completedGoals>=3},{id:\"goal_crusher\",name:\"Goal Crusher\",description:\"Complete 5 savings goals\",icon:\"💎\",condition:i=>i.completedGoals>=5},{id:\"debt_aware\",name:\"Debt Aware\",description:\"Track your first debt\",icon:\"📝\",condition:i=>i.totalDebts>=1},{id:\"debt_settler\",name:\"Debt Settler\",description:\"Settle your first debt\",icon:\"✅\",condition:i=>i.settledDebts>=1},{id:\"debt_destroyer\",name:\"Debt Destroyer\",description:\"Settle 5 debts\",icon:\"💪\",condition:i=>i.settledDebts>=5},{id:\"debt_free_hero\",name:\"Debt-Free Hero\",description:\"Maintain zero pending debts\",icon:\"🦸\",condition:i=>i.totalDebts>0&&i.settledDebts===i.totalDebts},{id:\"first_saver\",name:\"First Saver\",description:\"Achieve 10%+ savings rate\",icon:\"🌱\",condition:i=>i.savingsRate>=.1},{id:\"super_saver\",name:\"Super Saver\",description:\"Maintain a 20%+ savings rate\",icon:\"💰\",condition:i=>i.savingsRate>=.2},{id:\"elite_saver\",name:\"Elite Saver\",description:\"Achieve 30%+ savings rate\",icon:\"💸\",condition:i=>i.savingsRate>=.3},{id:\"legendary_saver\",name:\"Legendary Saver\",description:\"Maintain 50%+ savings rate\",icon:\"🏰\",condition:i=>i.savingsRate>=.5},{id:\"budget_conscious\",name:\"Budget Conscious\",description:\"Keep spending under 80% of income\",icon:\"📊\",condition:i=>i.monthlySpendingRatio<=.8},{id:\"budget_master\",name:\"Budget Master\",description:\"Keep spending under 70% of income\",icon:\"👑\",condition:i=>i.monthlySpendingRatio<=.7},{id:\"frugal_champion\",name:\"Frugal Champion\",description:\"Keep spending under 50% of income\",icon:\"🌟\",condition:i=>i.monthlySpendingRatio<=.5},{id:\"stay_notified\",name:\"Stay Notified\",description:\"Enable notifications\",icon:\"🔔\",condition:i=>i.notificationsEnabled===!0},{id:\"ai_curious\",name:\"AI Curious\",description:\"Chat with AI Guru for the first time\",icon:\"🤖\",condition:i=>i.aiInteractions>=1},{id:\"ai_enthusiast\",name:\"AI Enthusiast\",description:\"Chat with AI Guru 10 times\",icon:\"🧠\",condition:i=>i.aiInteractions>=10},{id:\"profile_complete\",name:\"Profile Complete\",description:\"Add your name and photo\",icon:\"👤\",condition:i=>i.profileComplete===!0},{id:\"account_organizer\",name:\"Account Organizer\",description:\"Create 3 or more accounts\",icon:\"🏦\",condition:i=>i.totalAccounts>=3}];function a1(i,r){const c=[];return Pu.forEach(u=>{!r.includes(u.id)&&u.condition(i)&&c.push(u.id)}),c}function gp(i){return Pu.find(r=>r.id===i)}function n1(){return Pu}function s1(i){const{expenses:r,goals:c,userName:u}=i,m=[],g=new Date,h=new Date(g.getTime()-10080*60*1e3),y=new Date(g.getTime()-720*60*60*1e3),p=r.filter(O=>new Date(O.date)>=h),x=r.filter(O=>{const B=new Date(O.date);return B>=y&&B<h}),v=O=>O.reduce((B,L)=>(B[L.category]=(B[L.category]||0)+L.amount,B),{}),f=v(p),N=v(x),M=Object.keys(N).reduce((O,B)=>(O[B]=N[B]/3,O),{});return Object.keys(f).forEach(O=>{const B=f[O],L=M[O]||0;if(L>500&&B>L*1.2){const R=Math.round((B-L)/L*100),P=c.find(V=>V.currentAmount<V.targetAmount);P?m.push(`${u}, you've spent ${R}% more on ${O} this week. This slows down your '${P.name}' goal. Consider tightening up your protocol!`):m.push(`${u}, your ${O} spending is up ${R}% this week. Watch out before it becomes a habit!`)}}),m}function i1(i){return{id:`insight_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:\"insight\",priority:\"low\",category:\"insights\",title:\"Guruji Insight\",message:i,timestamp:new Date,read:!1}}const l1={netflix:\"Subscription\",spotify:\"Subscription\",google:\"Subscription\",apple:\"Subscription\",icloud:\"Subscription\",youtube:\"Subscription\",disney:\"Subscription\",hotstar:\"Subscription\",\"prime video\":\"Subscription\",\"prime membership\":\"Subscription\",\"amazon prime\":\"Subscription\",audible:\"Subscription\",kindle:\"Subscription\",hulu:\"Subscription\",hbomax:\"Subscription\",hbo:\"Subscription\",\"paramount+\":\"Subscription\",peacock:\"Subscription\",crunchyroll:\"Subscription\",chaisai:\"Subscription\",\"google play\":\"Subscription\",\"google one\":\"Subscription\",\"app store\":\"Subscription\",microsoft:\"Subscription\",\"office 365\":\"Subscription\",dropbox:\"Subscription\",zoom:\"Subscription\",canva:\"Subscription\",adobe:\"Subscription\",\"creative cloud\":\"Subscription\",jio:\"Subscription\",airtel:\"Subscription\",vodafone:\"Subscription\",idea:\"Subscription\",bsnl:\"Subscription\",\"vi \":\"Subscription\",broadband:\"Subscription\",isp:\"Subscription\",\"act fiber\":\"Subscription\",hathway:\"Subscription\",\"internet bill\":\"Subscription\",telecom:\"Subscription\",coffee:\"Food & Dining\",starbucks:\"Food & Dining\",cafe:\"Food & Dining\",restaurant:\"Food & Dining\",lunch:\"Food & Dining\",dinner:\"Food & Dining\",pizza:\"Food & Dining\",burger:\"Food & Dining\",mcdonalds:\"Food & Dining\",kfc:\"Food & Dining\",food:\"Food & Dining\",zomato:\"Food & Dining\",swiggy:\"Food & Dining\",beer:\"Food & Dining\",bar:\"Food & Dining\",uber:\"Transportation\",ola:\"Transportation\",cab:\"Transportation\",taxi:\"Transportation\",bus:\"Transportation\",train:\"Transportation\",metro:\"Transportation\",fuel:\"Transportation\",petrol:\"Transportation\",gas:\"Transportation\",parking:\"Transportation\",amazon:\"Shopping\",flipkart:\"Shopping\",clothes:\"Shopping\",zara:\"Shopping\",nike:\"Shopping\",shoes:\"Shopping\",mall:\"Shopping\",grocery:\"Groceries\",supermarket:\"Groceries\",vegetables:\"Groceries\",fruits:\"Groceries\",milk:\"Groceries\",electricity:\"Bills & Utilities\",water:\"Bills & Utilities\",\"gas bill\":\"Bills & Utilities\",rent:\"Bills & Utilities\",maintenance:\"Bills & Utilities\",movie:\"Entertainment\",cinema:\"Entertainment\",game:\"Entertainment\",steam:\"Entertainment\",playstation:\"Entertainment\",xbox:\"Entertainment\",doctor:\"Health & Wellbeing\",medical:\"Health & Wellbeing\",pharmacy:\"Health & Wellbeing\",medicine:\"Health & Wellbeing\",gym:\"Health & Wellbeing\",fitness:\"Health & Wellbeing\",hospital:\"Health & Wellbeing\",transfer:\"Transfer\",payment:\"Transfer\",\"cc bill\":\"Transfer\",internal:\"Transfer\",membership:\"Subscription\",subscription:\"Subscription\",recurring:\"Subscription\",premium:\"Subscription\",\"monthly bill\":\"Subscription\"},xp=[{keywords:[\"netflix\"],displayName:\"Netflix Premium\",defaultAmount:649,category:\"Subscription\"},{keywords:[\"hotstar\",\"disney\"],displayName:\"Disney+ Hotstar\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"prime video\",\"amazon prime\"],displayName:\"Amazon Prime\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"hulu\"],displayName:\"Hulu\",defaultAmount:650,category:\"Subscription\"},{keywords:[\"youtube\",\"yt premium\"],displayName:\"YouTube Premium\",defaultAmount:129,category:\"Subscription\"},{keywords:[\"sonyliv\"],displayName:\"SonyLIV\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"zee5\"],displayName:\"Zee5\",defaultAmount:100,category:\"Subscription\"},{keywords:[\"jiocinema\"],displayName:\"JioCinema Premium\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"apple tv\"],displayName:\"Apple TV+\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"spotify\"],displayName:\"Spotify Premium\",defaultAmount:119,category:\"Subscription\"},{keywords:[\"apple music\"],displayName:\"Apple Music\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"audible\"],displayName:\"Audible\",defaultAmount:199,category:\"Subscription\"},{keywords:[\"wynk\"],displayName:\"Wynk Music\",defaultAmount:49,category:\"Subscription\"},{keywords:[\"gaana\"],displayName:\"Gaana Plus\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"jiosaavn\"],displayName:\"JioSaavn Pro\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"google one\",\"google storage\"],displayName:\"Google One\",defaultAmount:130,category:\"Subscription\"},{keywords:[\"chatgpt\",\"openai\"],displayName:\"ChatGPT Plus\",defaultAmount:1999,category:\"Subscription\"},{keywords:[\"claude\",\"anthropic\"],displayName:\"Claude Pro\",defaultAmount:1999,category:\"Subscription\"},{keywords:[\"github\"],displayName:\"GitHub Copilot\",defaultAmount:830,category:\"Subscription\"},{keywords:[\"midjourney\"],displayName:\"Midjourney\",defaultAmount:830,category:\"Subscription\"},{keywords:[\"canva\"],displayName:\"Canva Pro\",defaultAmount:499,category:\"Subscription\"},{keywords:[\"adobe\",\"creative cloud\"],displayName:\"Adobe CC\",defaultAmount:2300,category:\"Subscription\"},{keywords:[\"jio\",\"myjio\"],displayName:\"Jio Mobile\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"airtel\"],displayName:\"Airtel Mobile\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"vi \",\"vodafone\"],displayName:\"Vi Mobile\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"act fiber\",\"act net\"],displayName:\"ACT Fibernet\",defaultAmount:820,category:\"Bills & Utilities\"},{keywords:[\"hathway\"],displayName:\"Hathway Broadband\",defaultAmount:600,category:\"Bills & Utilities\"}],bu=i=>{const r=i.toLowerCase();return xp.some(c=>c.keywords.some(u=>r.includes(u)))},Yr=i=>{const r=i.toLowerCase();for(const c of xp)if(c.keywords.some(u=>r.includes(u))){const u=[\"subscription\",\"online\"];return{category:c.category,tags:u,suggestedAmount:c.defaultAmount,suggestedDescription:c.displayName}}for(const[c,u]of Object.entries(l1))if(r.includes(c)){const m=[];return r.includes(\"online\")&&m.push(\"online\"),r.includes(\"subscription\")&&m.push(\"subscription\"),{category:u,tags:m}}return null},lt={SETTINGS:\"finhub_settings\",EXPENSES:\"finhub_expenses\",INCOMES:\"finhub_incomes\",DEBTS:\"finhub_debts\",GOALS:\"finhub_goals\",ACCOUNTS:\"finhub_accounts\",INVESTMENTS:\"finhub_investments\",LIABILITIES:\"finhub_liabilities\",NOTIFICATIONS:\"finhub_notifications\",EMERGENCY_FUND:\"finhub_emergency_fund\",RECURRING:\"finhub_recurring\",AUTH:\"finhub_auth\",REMEMBERED_MOBILE:\"finhub_remembered_mobile\",DELETION_SCHEDULE:\"finhub_deletion_schedule\"},bp=A.createContext(void 0),Di=()=>{const i=A.useContext(bp);if(!i)throw new Error(\"useFinance must be used within a FinanceProvider\");return i},r1=({children:i})=>{const[r]=A.useState(\"demo-user-001\"),[c,u]=A.useState(!0),[m,g]=A.useState(!1),[h,y]=A.useState({theme:\"system\",currency:\"INR\",unlockedAchievements:[],name:\"\",photoURL:\"\",notificationsEnabled:!1,roundUpEnabled:!0,aiProvider:\"openai\",onboardingPhase:0,passiveIncomeTarget:0,isSampleMode:!1}),[p,x]=A.useState([]),[v,f]=A.useState([]),[N,M]=A.useState([]),[O,B]=A.useState([]),[L,R]=A.useState([]),[P,V]=A.useState([]),[S,se]=A.useState([]),[he,ve]=A.useState([]),[fe,ye]=A.useState([]),[Se,qe]=A.useState(0),[Te,ee]=A.useState(!1),[me,G]=A.useState(\"online\"),[C,Y]=A.useState(\"guest\"),[oe,ge]=A.useState(null),[z,T]=A.useState(!1),[re,$]=A.useState(\"\"),[le,ue]=A.useState(!1),[Ne,je]=A.useState(\"\"),[de,xe]=A.useState(null),[Ke,Ie]=A.useState(null),[Ve,rt]=A.useState(),[De,tt]=A.useState(null),St=[{mobile:\"9447147230\",pin:\"2255\",name:\"tin2mon FinHub Node // 0x50.3\",userId:\"tin2mon-prod-001\"}],mt=j=>{const E=Array.isArray(j)?j:[j];ye(w=>{const D=E.filter(Z=>w.some(we=>we.id===Z.id)?!1:!w.some(we=>we.type===Z.type&&we.message===Z.message&&!we.read&&new Date().getTime()-new Date(we.timestamp).getTime()<1e3*60*60*24));return D.length===0?w:[...D,...w].sort((Z,ne)=>new Date(ne.timestamp).getTime()-new Date(Z.timestamp).getTime()).slice(0,100)})};A.useEffect(()=>{const j=()=>{const w=p.length+v.length+N.length,D=N.filter(Ce=>Ce.status===\"settled\").length,_=O.filter(Ce=>Ce.currentAmount>=Ce.targetAmount).length,Z=v.reduce((Ce,Pe)=>Ce+Pe.amount,0),ne=p.reduce((Ce,Pe)=>Ce+Pe.amount,0),Q=Z>0?(Z-ne)/Z:0,we=Z>0?ne/Z:0,te={totalTransactions:w,totalGoals:O.length,completedGoals:_,totalDebts:N.length,settledDebts:D,savingsRate:Q,monthlySpendingRatio:we,notificationsEnabled:h.notificationsEnabled,themeChanged:h.theme!==\"system\",aiInteractions:0,currentStreak:w>0?Math.min(w,3):0,dailyLogin:!0,profileComplete:h.name!==\"\"&&h.photoURL!==\"\",totalAccounts:L.length},pe=a1(te,h.unlockedAchievements);pe.length>0&&(pe.forEach(Ce=>{const Pe=gp(Ce);if(Pe){const Me={id:`notif_${Ce}`,type:\"achievement\",priority:\"low\",category:\"achievements\",title:\"Achievement Unlocked!\",message:`${Pe.icon} ${Pe.name}`,timestamp:new Date,read:!1,achievementId:Ce};mt(Me),J.success(`Achievement Unlocked: ${Pe.icon} ${Pe.name}!`,{duration:5e3})}}),Gt({unlockedAchievements:[...h.unlockedAchievements,...pe]}));const Je=s1({expenses:p,goals:O,userName:h.name||\"Friend\"});if(Je.length>0){const Ce=[];Je.forEach(Pe=>{const Me=i1(Pe);Me.priority=\"low\",Me.category=\"insights\",Ce.push(Me),J(Me.title,{description:Me.message,icon:\"🧘\"})}),Ce.length>0&&mt(Ce)}E()},E=()=>{const w=new Date;w.setHours(0,0,0,0);const D=L.reduce((Q,we)=>Q+(we.type===\"bank\"||we.type===\"cash\"?we.balance:0),0),_=O.reduce((Q,we)=>Q+we.currentAmount,0)+Se,Z=Math.max(0,D-_),ne=[];S.forEach(Q=>{const we=new Date(Q.startDate),te=new Date(w.getFullYear(),w.getMonth(),we.getDate());te<w&&te.setMonth(te.getMonth()+1),Math.ceil((te.getTime()-w.getTime())/(1e3*60*60*24))<=7&&ne.push({name:Q.name,amount:Q.emiAmount,dueDate:te,type:\"EMI\"})}),he.forEach(Q=>{if(Q.type===\"expense\"){const we=new Date(Q.startDate);let te;if(Q.frequency===\"monthly\")te=new Date(w.getFullYear(),w.getMonth(),we.getDate()),te<w&&te.setMonth(te.getMonth()+1);else if(Q.frequency===\"weekly\"){const Ce=(we.getDay()-w.getDay()+7)%7;te=new Date(w.getTime()+Ce*24*60*60*1e3),te<w&&te.setDate(te.getDate()+7)}else if(Q.frequency===\"custom\"){const Ce=Q.customIntervalDays||28,Pe=w.getTime()-we.getTime(),nt=Math.floor(Pe/(1e3*60*60*24))%Ce,Lt=Ce-nt;te=new Date(w.getTime()+Lt*24*60*60*1e3),Lt<=0&&(te=new Date(w.getTime()+Ce*24*60*60*1e3))}else return;const pe=Math.ceil((te.getTime()-w.getTime())/(1e3*60*60*24)),Je=Q.frequency===\"custom\"?2:7;pe<=Je&&pe>=0&&ne.push({name:Q.description||\"Subscription\",amount:Q.amount,dueDate:te,type:Q.frequency===\"custom\"?\"Recharge\":\"Bill\"})}}),ne.forEach(Q=>{const we=Z<Q.amount,te=Math.ceil((Q.dueDate.getTime()-w.getTime())/(1e3*60*60*24));if(we&&te<=3){const pe={id:`smart_breach_${Q.name}_${Q.dueDate.toISOString().split(\"T\")[0]}`,type:\"alert\",priority:\"high\",category:\"reminders\",title:\"Liquid Stability Warning\",message:`Critical: Your '${Q.name}' due on ${Q.dueDate.toLocaleDateString()} (₹${Q.amount}) exceeds current liquid cash (₹${Z}). Clear assets or increase bank balance immediately.`,timestamp:new Date,read:!1};mt(pe),J.error(pe.title,{description:pe.message,duration:1e4})}else if(te<=1){const pe={id:`reminder_${Q.name}_${Q.dueDate.toISOString().split(\"T\")[0]}`,type:\"reminder\",priority:\"medium\",category:\"reminders\",title:`${Q.type} Due Soon`,message:`Reminder: '${Q.name}' payment of ₹${Q.amount} is due tomorrow (${Q.dueDate.toLocaleDateString()}).`,timestamp:new Date,read:!1};mt(pe),J.info(pe.title,{description:pe.message})}})};j()},[p.length,v.length,N.length,O.length,h.notificationsEnabled,h.theme]),A.useEffect(()=>{zt()},[]),A.useEffect(()=>localStorage.setItem(lt.SETTINGS,JSON.stringify(h)),[h]),A.useEffect(()=>localStorage.setItem(lt.EXPENSES,JSON.stringify(p)),[p]),A.useEffect(()=>localStorage.setItem(lt.INCOMES,JSON.stringify(v)),[v]),A.useEffect(()=>localStorage.setItem(lt.DEBTS,JSON.stringify(N)),[N]),A.useEffect(()=>localStorage.setItem(lt.GOALS,JSON.stringify(O)),[O]),A.useEffect(()=>localStorage.setItem(lt.ACCOUNTS,JSON.stringify(L)),[L]),A.useEffect(()=>localStorage.setItem(lt.INVESTMENTS,JSON.stringify(P)),[P]),A.useEffect(()=>localStorage.setItem(lt.LIABILITIES,JSON.stringify(S)),[S]),A.useEffect(()=>localStorage.setItem(lt.RECURRING,JSON.stringify(he)),[he]),A.useEffect(()=>localStorage.setItem(lt.NOTIFICATIONS,JSON.stringify(fe)),[fe]),A.useEffect(()=>localStorage.setItem(lt.EMERGENCY_FUND,JSON.stringify(Se)),[Se]);const zt=async()=>{u(!0);try{const E=localStorage.getItem(lt.SETTINGS);if(E){const Me=JSON.parse(E);y(Me),ce(Me.theme)}const w=localStorage.getItem(lt.EXPENSES);w&&x(JSON.parse(w));const D=localStorage.getItem(lt.INCOMES);D&&f(JSON.parse(D));const _=localStorage.getItem(lt.DEBTS);_&&M(JSON.parse(_));const Z=localStorage.getItem(lt.GOALS);Z&&B(JSON.parse(Z));const ne=localStorage.getItem(lt.ACCOUNTS);ne&&R(JSON.parse(ne));const Q=localStorage.getItem(lt.INVESTMENTS);Q&&V(JSON.parse(Q));const we=localStorage.getItem(lt.LIABILITIES);we&&se(JSON.parse(we));const te=localStorage.getItem(lt.NOTIFICATIONS);if(te){const nt=JSON.parse(te).filter((Lt,Ft,Ua)=>Ua.findIndex(Xa=>Xa.id===Lt.id||Xa.message===Lt.message&&Xa.type===Lt.type)===Ft);ye(nt.slice(0,100))}const pe=localStorage.getItem(lt.EMERGENCY_FUND);pe&&qe(JSON.parse(pe));const Je=localStorage.getItem(lt.RECURRING);Je&&ve(JSON.parse(Je));const Ce=localStorage.getItem(lt.REMEMBERED_MOBILE);Ce&&(je(Ce),$(Ce),ue(!0));const Pe=localStorage.getItem(lt.DELETION_SCHEDULE);if(Pe){const Me=new Date(Pe).getTime();new Date().getTime()>=Me?(Na(),console.warn(\"Account purge executed based on schedule.\")):xe(Pe)}}catch(E){console.error(\"Error loading specific local data:\",E)}await bt(),!localStorage.getItem(\"finhub_subscription_migration_v3\")&&r&&(ut(),localStorage.setItem(\"finhub_subscription_migration_v3\",\"true\")),u(!1)},ut=()=>{x(j=>{let E=0;const w=j.map(D=>{const _=[\"other\",\"bills & utilities\",\"entertainment\",\"shopping\",\"\",void 0],Z=Yr(D.description);if(Z&&Z.category===\"Subscription\"){const ne=_.includes(D.category?.toLowerCase())||!D.category,Q=!D.isRecurring;if(ne||Q)return E++,{...D,category:\"Subscription\",isRecurring:!0}}return D});if(E>0){J.info(`Intelligence protocol: Identified and moved ${E} transactions to Subscriptions.`);const D=w.filter(Z=>Z.category===\"Subscription\"),_=new Map;D.forEach(Z=>{const ne=Z.description.toLowerCase().trim();(!_.has(ne)||new Date(Z.date)>new Date(_.get(ne).date))&&_.set(ne,Z)}),_.forEach((Z,ne)=>{he.some(we=>we.description?.toLowerCase().includes(ne)||ne.includes(we.description?.toLowerCase()||\"\"))||setTimeout(()=>{dt({type:\"expense\",description:Z.description,amount:Z.amount,category:\"Subscription\",accountId:Z.accountId,frequency:\"monthly\",startDate:Z.date,tags:[\"auto-migrated\"]})},100)})}return w})},bt=async()=>{try{try{await _e.processRecurring(r)}catch(te){console.error(\"Skip recurring process\",te)}const[j,E,w,D,_,Z,ne,Q,we]=await Promise.all([_e.getSettings(r).catch(()=>({success:!1,settings:void 0})),_e.getAccounts(r).catch(()=>({success:!1,accounts:[]})),_e.getExpenses(r).catch(()=>({success:!1,expenses:[]})),_e.getIncomes(r).catch(()=>({success:!1,incomes:[]})),_e.getDebts(r).catch(()=>({success:!1,debts:[]})),_e.getGoals(r).catch(()=>({success:!1,goals:[]})),_e.getLiabilities(r).catch(()=>({success:!1,liabilities:[]})),_e.getInvestments(r).catch(()=>({success:!1,investments:[]})),_e.getRecurring(r).catch(()=>({success:!1,recurring:[]}))]);ee(!1),G(\"online\"),j.success&&j.settings&&(y(te=>({...te,...j.settings,aiProvider:j.settings.aiProvider||te.aiProvider,apiKeys:{...te.apiKeys,...j.settings.apiKeys}})),ce(j.settings.theme)),E.success&&R(E.accounts||[]),w.success&&x(w.expenses||[]),D.success&&f(D.incomes||[]),_.success&&M(_.debts||[]),Z.success&&B(Z.goals||[]),ne.success&&se(ne.liabilities||[]),Q.success&&V(Q.investments||[]),we.success&&ve(we.recurring||[]),J.success(\"Sync complete\")}catch(j){console.error(\"API Sync failed, using local data\",j),ee(!0),G(\"offline\")}},la=async()=>{g(!0),await bt(),g(!1)},ce=j=>{if(j===\"system\"){const E=window.matchMedia(\"(prefers-color-scheme: dark)\").matches;document.documentElement.classList.toggle(\"dark\",E)}else document.documentElement.classList.toggle(\"dark\",j===\"dark\")},Ee=async j=>{$(j);const E=St.some(w=>w.mobile===j)||localStorage.getItem(`finhub_user_${j}`)!==null;return T(!0),E},He=async(j,E=!1)=>{rt({message:\"Validating PIN\",subMessage:\"Verifying secure node access...\"}),Y(\"authenticating\"),await new Promise(_=>setTimeout(_,2e3));const w=St.find(_=>_.mobile===re&&_.pin===j);let D=null;if(w)D={id:w.userId,mobile:w.mobile,name:w.name};else{const _=localStorage.getItem(`finhub_user_${re}`);if(_){const Z=JSON.parse(_);Z.pin===j&&(D={id:Z.userId,mobile:Z.mobile,name:Z.name})}}return D?(ge(D),localStorage.setItem(lt.AUTH,JSON.stringify(D)),rt({message:\"Handshake Success\",subMessage:\"Synchronizing decrypted ledger...\"}),Y(\"authenticated\"),T(!1),de&&(await It(),J.success(\"Your account deletion request has been canceled. Welcome back!\")),E&&(localStorage.setItem(lt.REMEMBERED_MOBILE,re),je(re),ue(!0)),!0):(rt(void 0),Y(\"guest\"),!1)},yt=async j=>{$(j);const E=Math.floor(1e3+Math.random()*9e3).toString();return Ie(E),console.log(`[AUTH-DEBUG] Mock OTP for ${j}: ${E}`),J.info(\"Verification code sent\",{description:`Dev Mode: Use ${E} (Simulated SMS)`}),!0},Ut=async(j,E)=>E===\"0000\"||E===Ke,Oa=async(j,E)=>{const w=localStorage.getItem(`finhub_user_${j}`);if(w){const _=JSON.parse(w);return _.pin=E,localStorage.setItem(`finhub_user_${j}`,JSON.stringify(_)),J.success(\"PIN reset successfully\"),!0}const D=St.findIndex(_=>_.mobile===j);if(D!==-1){const _={...St[D],pin:E};return localStorage.setItem(`finhub_user_${j}`,JSON.stringify(_)),J.success(\"Demo user PIN updated locally\"),!0}return!1},_a=async(j,E,w,D=!1)=>{rt({message:\"Creating Node\",subMessage:\"Initializing secure identity protocols...\"}),Y(\"authenticating\"),await new Promise(ne=>setTimeout(ne,2e3));const _={id:`user_${Date.now()}`,mobile:j,name:w,pin:E};localStorage.setItem(`finhub_user_${j}`,JSON.stringify(_));const Z={id:_.id,mobile:_.mobile,name:_.name};return ge(Z),localStorage.setItem(lt.AUTH,JSON.stringify(Z)),rt({message:\"Handshake Success\",subMessage:\"Synchronizing decrypted ledger...\"}),Y(\"authenticated\"),T(!1),D&&(localStorage.setItem(lt.REMEMBERED_MOBILE,j),je(j),ue(!0)),!0},ba=()=>{Y(\"guest\"),ge(null),Ie(null),localStorage.removeItem(lt.AUTH),le||$(\"\")},ma=()=>{Y(\"guest\"),ge(null),$(\"\"),Ie(null),localStorage.removeItem(lt.AUTH),localStorage.removeItem(lt.REMEMBERED_MOBILE),je(\"\"),ue(!1)},ja=async()=>{const j=new Date;j.setDate(j.getDate()+30);const E=j.toISOString();xe(E),localStorage.setItem(lt.DELETION_SCHEDULE,E),J.warning(\"Account scheduled for deletion in 30 days.\"),ba()},It=async()=>{xe(null),localStorage.removeItem(lt.DELETION_SCHEDULE)},Na=()=>{Object.values(lt).forEach(j=>{localStorage.removeItem(j)}),x([]),f([]),M([]),B([]),R([]),V([]),se([]),ve([]),ye([]),qe(0),xe(null),Y(\"guest\"),ge(null),J.info(\"Session purged successfully.\")};A.useEffect(()=>{const j=localStorage.getItem(lt.AUTH);if(j)try{const E=JSON.parse(j);E&&E.mobile&&($(E.mobile),Y(\"guest\"))}catch(E){console.error(\"Failed to parse stored auth\",E),localStorage.removeItem(lt.AUTH)}},[]);const Gt=async j=>{const E={...h,...j};y(E),j.theme&&ce(j.theme);try{const w=await _e.updateSettings(r,j);if(w.success)y(D=>({...D,...w.settings,aiProvider:w.settings.aiProvider||D.aiProvider,apiKeys:{...D.apiKeys,...w.settings.apiKeys}}));else throw new Error(w.error)}catch(w){console.error(\"Failed to sync settings\",w),J.error(\"Settings saved locally only\")}},kt=async(j,E)=>{try{const w=await _e.updateRecurring(r,j,E);if(w.success){const D=w.recurring;if(ve(_=>_.map(Z=>Z.id===j?D:Z)),J.success(\"Recurring transaction updated\"),D.startDate){console.log(\"[Backfill Debug Update] Analysis starting for:\",D.description||D.source),J.info(\"Analyzing transaction history...\");const _=new Date,Z=`${_.getFullYear()}-${String(_.getMonth()+1).padStart(2,\"0\")}-${String(_.getDate()).padStart(2,\"0\")}`,ne=D.startDate.split(\"T\")[0];if(console.log(\"[Backfill Debug Update] nowStr:\",Z,\"startStr:\",ne),ne<=Z&&D.type){const[Q,we,te]=ne.split(\"-\").map(Number);let pe=new Date(Q,we-1,te,12,0,0);const Je=[];let Ce=0;for(;Ce<1200;){const nt=pe.getFullYear(),Lt=pe.getMonth(),Ft=pe.getDate();if(`${nt}-${String(Lt+1).padStart(2,\"0\")}-${String(Ft).padStart(2,\"0\")}`>Z)break;switch(Je.push(new Date(pe)),D.frequency){case\"daily\":pe.setDate(pe.getDate()+1);break;case\"weekly\":pe.setDate(pe.getDate()+7);break;case\"monthly\":const Xa=te;pe.setMonth(pe.getMonth()+1),pe.getDate()<Xa&&pe.getMonth()===(Lt+2)%12&&pe.setDate(0);break;case\"yearly\":pe.setFullYear(pe.getFullYear()+1);break;case\"custom\":pe.setDate(pe.getDate()+(D.customIntervalDays||30));break;default:pe.setMonth(pe.getMonth()+1)}Ce++}console.log(\"[Backfill Debug Update] Generated\",Je.length,\"due dates\");const Pe=Number(D.amount),Me=Je.filter(nt=>{const Lt=`${nt.getFullYear()}-${String(nt.getMonth()+1).padStart(2,\"0\")}-${String(nt.getDate()).padStart(2,\"0\")}`;return![...p,...v].some(Ua=>{const Xa=(Ua.date||\"\").split(\"T\")[0],ps=Number(Ua.amount),yn=Math.abs(ps-Pe)<.01;return Xa===Lt&&yn})});console.log(`[Backfill Debug Update] Total Expected: ${Je.length}, Missing: ${Me.length}`),Me.length>0?(console.log(\"[Backfill Debug Update] Triggering popup request for\",Me.length,\"dates\"),tt({count:Me.length,dates:Me,recurring:D})):(console.log(\"[Backfill Debug Update] All expected entries already exist in history.\"),J.success(\"Transaction history is already up to date.\"))}else console.log(\"[Backfill Debug Update] Skip: start date is in the future or invalid type.\")}}}catch(w){console.error(\"Error updating recurring transaction:\",w),ve(D=>D.map(_=>_.id===j?{..._,...E}:_)),J.warning(\"Updated locally\")}},dt=async j=>{try{console.log(\"[Backfill Debug] createRecurringTransaction called with:\",j);const E=await _e.createRecurring(r,j);if(E.success){const w=E.recurring;if(ve(D=>[...D,w]),J.success(\"Recurring transaction created\"),w.startDate){console.log(\"[Backfill Debug] Analysis starting for:\",w.description||w.source),J.info(\"Analyzing transaction history...\");const D=new Date,_=`${D.getFullYear()}-${String(D.getMonth()+1).padStart(2,\"0\")}-${String(D.getDate()).padStart(2,\"0\")}`,Z=w.startDate.split(\"T\")[0];if(console.log(\"[Backfill Debug] nowStr:\",_,\"startStr:\",Z),Z<=_&&w.type){const[ne,Q,we]=Z.split(\"-\").map(Number);let te=new Date(ne,Q-1,we,12,0,0);const pe=[];let Je=0;for(;Je<1200;){const Me=te.getFullYear(),nt=te.getMonth(),Lt=te.getDate();if(`${Me}-${String(nt+1).padStart(2,\"0\")}-${String(Lt).padStart(2,\"0\")}`>_)break;switch(pe.push(new Date(te)),w.frequency){case\"daily\":te.setDate(te.getDate()+1);break;case\"weekly\":te.setDate(te.getDate()+7);break;case\"monthly\":const Ua=we;te.setMonth(te.getMonth()+1),te.getDate()<Ua&&te.getMonth()===(nt+2)%12&&te.setDate(0);break;case\"yearly\":te.setFullYear(te.getFullYear()+1);break;case\"custom\":te.setDate(te.getDate()+(w.customIntervalDays||30));break;default:te.setMonth(te.getMonth()+1)}Je++}console.log(\"[Backfill Debug] Generated\",pe.length,\"due dates\");const Ce=Number(w.amount),Pe=pe.filter(Me=>{const nt=`${Me.getFullYear()}-${String(Me.getMonth()+1).padStart(2,\"0\")}-${String(Me.getDate()).padStart(2,\"0\")}`;return![...p,...v].some(Ft=>{const Ua=(Ft.date||\"\").split(\"T\")[0],Xa=Number(Ft.amount),ps=Math.abs(Xa-Ce)<.01;return Ua===nt&&ps})});console.log(`[Backfill Debug] Total Expected: ${pe.length}, Missing: ${Pe.length}`),Pe.length>0?(console.log(\"[Backfill Debug] Triggering popup request for\",Pe.length,\"dates\"),tt({count:Pe.length,dates:Pe,recurring:w})):(console.log(\"[Backfill Debug] All expected entries already exist in history.\"),J.success(\"Transaction history is already up to date.\"))}else console.log(\"[Backfill Debug] Skip: start date is in the future or invalid type.\")}}}catch(E){console.error(\"Error creating recurring transaction:\",E);const w={id:`temp_${Date.now()}`,...j,createdAt:new Date().toISOString()};ve(D=>[...D,w]),J.warning(\"Offline: Created locally\")}},ds=async()=>{if(!De)return;const{count:j,dates:E,recurring:w}=De,D=J.loading(`Generating ${j} entries...`),_=[],Z=[];let ne=0;const Q=L.find(te=>te.id===w.accountId),we={};for(const te of E){const pe=`${te.getFullYear()}-${String(te.getMonth()+1).padStart(2,\"0\")}-${String(te.getDate()).padStart(2,\"0\")}`,Je={description:w.description,source:w.source,amount:w.amount,category:w.category,date:pe,tags:[...w.tags||[],\"auto-backfill\"],accountId:w.accountId,isRecurring:!0,recurringId:w.id};try{if(w.type===\"expense\"){const Ce=await _e.createExpense(r,Je);Ce.success&&(Z.push(Ce.expense),Q&&(Q.type===\"credit_card\"?ne+=Ce.expense.amount:ne-=Ce.expense.amount),w.goalId&&(we[w.goalId]=(we[w.goalId]||0)+Ce.expense.amount))}else{const Ce=await _e.createIncome(r,Je);Ce.success&&(_.push(Ce.income),Q&&(Q.type===\"credit_card\"?ne-=Ce.income.amount:ne+=Ce.income.amount))}await new Promise(Ce=>setTimeout(Ce,50))}catch(Ce){console.error(`Failed to create backfill for ${pe}`,Ce)}}_.length>0&&f(te=>[...te,..._]),Z.length>0&&x(te=>[...te,...Z]);for(const[te,pe]of Object.entries(we)){const Je=O.find(Ce=>Ce.id===te);if(Je){const Ce=Je.currentAmount+pe;try{await _e.updateGoal(r,te,{currentAmount:Ce}),B(Pe=>Pe.map(Me=>Me.id===te?{...Me,currentAmount:Ce}:Me))}catch(Pe){console.error(\"Failed to update goal after backfill\",Pe)}}}if(Q&&ne!==0){const te=Q.balance+ne;try{await _e.updateAccount(r,Q.id,{balance:te}),R(pe=>pe.map(Je=>Je.id===Q.id?{...Je,balance:te}:Je))}catch(pe){console.error(\"Failed to update account balance after backfill\",pe)}}J.dismiss(D),J.success(`Success: ${j} entries generated`),tt(null)},Sa=async j=>{try{(await _e.deleteRecurring(r,j)).success&&(ve(w=>w.filter(D=>D.id!==j)),J.success(\"Recurring transaction deleted\"))}catch(E){console.error(\"Error deleting recurring transaction:\",E),ve(w=>w.filter(D=>D.id!==j)),J.warning(\"Deleted locally\")}},Aa=async()=>{try{const j=await _e.processRecurring(r);j.success&&(J.success(`Processed ${j.count} transactions`),await bt())}catch(j){console.error(\"Error processing recurring transactions:\",j),J.error(\"Failed to process recurring transactions\")}},un=async j=>{try{const E=L.reduce((te,pe)=>te+(pe.type!==\"credit_card\"?pe.balance:0),0),w=O.reduce((te,pe)=>te+pe.currentAmount,0)+Se,D=S.reduce((te,pe)=>te+pe.emiAmount,0),_=Math.max(0,E-w-D);let Z=j.amount;if(Z>_){const te=Z-_;console.warn(`⚠️ Leakage Detected! Deficit: ${te}. Initiating Shadow Wallet Protocol.`);let pe=te;const Je=[];O.forEach(Me=>{const nt=Me.type||\"growth\";let Lt=1;nt===\"stability\"&&(Lt=2),nt===\"protection\"&&(Lt=3),Me.currentAmount>0&&Je.push({id:Me.id,type:\"goal\",currentAmount:Me.currentAmount,priority:Lt,name:Me.name})}),Se>0&&Je.push({id:\"emergency-fund\",type:\"emergency\",currentAmount:Se,priority:3,name:\"Emergency Fund\"}),Je.sort((Me,nt)=>Me.priority-nt.priority);const Ce=[],Pe=[];for(const Me of Je){if(pe<=0)break;const nt=Math.min(Me.currentAmount,pe);if(pe-=nt,Me.type===\"goal\"){const Lt=Me.currentAmount-nt;Ce.push(ht(Me.id,{currentAmount:Lt,status:\"leaking\"})),Pe.push({id:`leak_${Me.id}_${new Date().toISOString().split(\"T\")[0]}`,type:\"alert\",priority:\"medium\",category:\"transactions\",title:\"Shadow Wallet Leakage\",message:`₹${nt} spent reduced your '${Me.name}' reserve.`,timestamp:new Date,read:!1})}else Me.type===\"emergency\"&&(Ce.push(Promise.resolve(qe(Lt=>Lt-nt))),Pe.push({id:`leak_emergency_${new Date().toISOString().split(\"T\")[0]}`,type:\"alert\",priority:\"medium\",category:\"transactions\",title:\"Emergency Fund Alert\",message:`Warning: ₹${nt} withdrawn from Emergency Fund to cover spending.`,timestamp:new Date,read:!1}))}await Promise.all(Ce),Pe.length>0&&(mt(Pe),Pe.forEach(Me=>J.error(Me.title,{description:Me.message})))}const ne=L.find(te=>te.id===j.accountId);let Q={...j};if(ne?.type===\"credit_card\"){const te=ne.serviceChargePercentage||0;if(te>0){const nt=j.amount*te/100;Q.serviceChargeAmount=nt,console.log(`Credit Service Charge: ${nt}`)}const pe=ne.creditLimit||0,Je=ne.safeLimitPercentage||30,Ce=pe*Je/100,Me=Math.abs(ne.balance)+j.amount;if(Me>Ce&&pe>0)if(j.isIncomeGenerating)J.info(\"Strategic Credit Utilization\",{description:\"Limit exceeded, but marked as income-generating. Proceed with caution.\"});else{J.warning(\"High Interest Risk Detected\",{description:`This transaction puts your CC usage at ${(Me/pe*100).toFixed(1)}%, exceeding your ${Je}% safe limit with no income-justification.`,duration:6e3});const nt={id:`cc_limit_${ne.id}_${new Date().toISOString().split(\"T\")[0]}`,type:\"alert\",priority:\"medium\",category:\"transactions\",title:\"Credit Stability Breach\",message:`Card '${ne.name}' usage protocol exceeded ${Je}% threshold. Avoid non-essential outflow.`,timestamp:new Date,read:!1};mt(nt)}}if(!Q.category||Q.category===\"Other\"){const te=Yr(Q.description);te&&te.category===\"Subscription\"&&(Q.category=\"Subscription\",Q.tags=Array.from(new Set([...Q.tags||[],\"auto-detected\"])))}const we=await _e.createExpense(r,Q);if(we.success){if(x(te=>[...te,we.expense]),ne){const te=j.amount+(Q.serviceChargeAmount||0),pe=ne.type===\"credit_card\"?ne.balance+te:ne.balance-te;await Ye(ne.id,{balance:pe})}if(j.isRecurring){const te={type:\"expense\",description:j.description,amount:j.amount,category:j.category,accountId:j.accountId,frequency:j.frequency||\"monthly\",customIntervalDays:j.customIntervalDays,startDate:j.date,endDate:j.endDate,tags:j.tags};await dt(te)}else if(J.success(\"Expense added!\"),bu(j.description)&&!j.isRecurring){const te={id:`verify_sub_${we.expense.id}`,type:\"insight\",priority:\"medium\",category:\"transactions\",title:\"Automate Payment?\",message:`Detected '${j.description}' as a subscription. Add to cyclical routine?`,timestamp:new Date,read:!1,action:{type:\"verify_subscription\",label:\"Automate\",status:\"pending\",payload:{id:we.expense.id,description:j.description,amount:j.amount,category:j.category,accountId:j.accountId,date:j.date}}};mt(te)}}}catch(E){console.error(\"Create expense failed\",E);const w={id:`temp_${Date.now()}`,...j,createdAt:new Date().toISOString()};x(D=>[...D,w]),J.warning(\"Added in offline mode\")}},nn=async(j,E)=>{try{const w=await _e.updateExpense(r,j,E);if(w.success){const D=p.find(_=>_.id===j);if(D){const _=L.find(Q=>Q.id===D.accountId);if(_){const Q=D.amount+(D.serviceChargeAmount||0),we=_.type===\"credit_card\"?_.balance-Q:_.balance+Q;await Ye(_.id,{balance:we})}const Z=w.expense,ne=L.find(Q=>Q.id===Z.accountId);if(ne){const Q=Z.amount+(Z.serviceChargeAmount||0),we=ne.type===\"credit_card\"?ne.balance+Q:ne.balance-Q;await Ye(ne.id,{balance:we})}E.isRecurring?D.recurringId?await kt(D.recurringId,{amount:E.amount,description:E.description,category:E.category,tags:E.tags,frequency:E.frequency,customIntervalDays:E.customIntervalDays,endDate:E.endDate}):await dt({type:\"expense\",description:E.description,amount:E.amount,category:E.category,accountId:E.accountId,frequency:E.frequency||\"monthly\",customIntervalDays:E.customIntervalDays,startDate:D.date,endDate:E.endDate,tags:E.tags}):D.recurringId&&await Sa(D.recurringId)}x(_=>_.map(Z=>Z.id===j?w.expense:Z)),J.success(\"Expense updated\")}}catch{x(D=>D.map(_=>_.id===j?{..._,...E}:_)),J.warning(\"Updated in offline mode\")}},Fa=async j=>{try{if((await _e.deleteExpense(r,j)).success){const w=p.find(D=>D.id===j);if(w){const D=L.find(_=>_.id===w.accountId);if(D){const _=w.amount+(w.serviceChargeAmount||0),Z=D.type===\"credit_card\"?D.balance-_:D.balance+_;await Ye(D.id,{balance:Z})}}x(D=>D.filter(_=>_.id!==j)),J.success(\"Expense deleted\")}}catch{x(w=>w.filter(D=>D.id!==j)),J.warning(\"Deleted in offline mode\")}},Da=async j=>{try{const E=await _e.createIncome(r,j);if(E.success){f(D=>[...D,E.income]);const w=L.find(D=>D.id===j.accountId);if(w){const D=w.type===\"credit_card\"?w.balance-j.amount:w.balance+j.amount;await Ye(w.id,{balance:D})}if(j.isRecurring){const D={type:\"income\",source:j.source,amount:j.amount,accountId:j.accountId,frequency:j.frequency||\"monthly\",customIntervalDays:j.customIntervalDays,startDate:j.date,endDate:j.endDate,tags:j.tags};await dt(D)}else J.success(\"Income added!\")}}catch{const w={id:`temp_${Date.now()}`,...j,createdAt:new Date().toISOString()};f(D=>[...D,w]),J.warning(\"Added in offline mode\")}},Ue=async(j,E)=>{try{const w=await _e.updateIncome(r,j,E);if(w.success){const D=v.find(_=>_.id===j);if(D){const _=L.find(Q=>Q.id===D.accountId);if(_){const Q=_.type===\"credit_card\"?_.balance+D.amount:_.balance-D.amount;await Ye(_.id,{balance:Q})}const Z=w.income,ne=L.find(Q=>Q.id===Z.accountId);if(ne){const Q=ne.type===\"credit_card\"?ne.balance-Z.amount:ne.balance+Z.amount;await Ye(ne.id,{balance:Q})}E.isRecurring?D.recurringId?await kt(D.recurringId,{amount:E.amount,source:E.source,description:E.source,category:E.category,tags:E.tags,frequency:E.frequency,customIntervalDays:E.customIntervalDays,endDate:E.endDate}):await dt({type:\"income\",description:E.source,source:E.source,amount:E.amount,category:E.category,accountId:E.accountId,frequency:E.frequency||\"monthly\",customIntervalDays:E.customIntervalDays,startDate:D.date,endDate:E.endDate,tags:E.tags}):D.recurringId&&await Sa(D.recurringId)}f(_=>_.map(Z=>Z.id===j?w.income:Z)),J.success(\"Income updated\")}}catch{f(D=>D.map(_=>_.id===j?{..._,...E}:_)),J.warning(\"Updated in offline mode\")}},wt=async j=>{try{if((await _e.deleteIncome(r,j)).success){const w=v.find(D=>D.id===j);if(w){const D=L.find(_=>_.id===w.accountId);if(D){const _=D.type===\"credit_card\"?D.balance+w.amount:D.balance-w.amount;await Ye(D.id,{balance:_})}}f(D=>D.filter(_=>_.id!==j)),J.success(\"Income deleted\")}}catch{f(w=>w.filter(D=>D.id!==j)),J.warning(\"Deleted in offline mode\")}},ie=async j=>{try{const E=await _e.createDebt(r,j);if(E.success){M(D=>[...D,E.debt]);const w=L.find(D=>D.id===j.accountId);if(w){const D=j.type===\"borrowed\"?j.amount:-j.amount,_=w.type===\"credit_card\"?w.balance-D:w.balance+D;await Ye(w.id,{balance:_})}j.isRecurring&&await dt({type:\"expense\",description:`Debt: ${j.personName} (${j.type})`,amount:j.amount,category:\"Debt\",accountId:j.accountId,frequency:j.frequency||\"monthly\",startDate:j.date,tags:[...j.tags||[],\"debt\"]}),J.success(\"Debt created\")}}catch{const w={id:`temp_${Date.now()}`,...j,status:\"pending\",createdAt:new Date().toISOString()};M(D=>[...D,w]),J.warning(\"Added in offline mode\")}},Le=async(j,E)=>{try{const w=await _e.updateDebt(r,j,E);if(w.success){const D=N.find(_=>_.id===j);if(D){const _=L.find(Q=>Q.id===D.accountId);if(_){const Q=D.type===\"borrowed\"?-D.amount:D.amount,we=_.type===\"credit_card\"?_.balance-Q:_.balance+Q;await Ye(_.id,{balance:we})}const Z=w.debt,ne=L.find(Q=>Q.id===Z.accountId);if(ne){const Q=Z.type===\"borrowed\"?Z.amount:-Z.amount,we=ne.type===\"credit_card\"?ne.balance-Q:ne.balance+Q;await Ye(ne.id,{balance:we})}E.isRecurring&&(D.recurringId?await kt(D.recurringId,{amount:E.amount,description:`Debt: ${E.personName} (${E.type})`}):await dt({type:\"expense\",description:`Debt: ${E.personName} (${E.type})`,amount:E.amount,category:\"Debt\",accountId:E.accountId,frequency:E.frequency||\"monthly\",startDate:E.date,tags:[...E.tags||[],\"debt\"]}))}M(_=>_.map(Z=>Z.id===j?w.debt:Z)),J.success(\"Debt updated\")}}catch{M(D=>D.map(_=>_.id===j?{..._,...E}:_)),J.warning(\"Updated in offline mode\")}},ft=async j=>{try{if((await _e.deleteDebt(r,j)).success){const w=N.find(D=>D.id===j);if(w){const D=L.find(_=>_.id===w.accountId);if(D){const _=w.type===\"borrowed\"?-w.amount:w.amount,Z=D.type===\"credit_card\"?D.balance-_:D.balance+_;await Ye(D.id,{balance:Z})}}M(D=>D.filter(_=>_.id!==j)),J.success(\"Debt deleted\")}}catch{M(w=>w.filter(D=>D.id!==j)),J.warning(\"Deleted in offline mode\")}},at=async j=>{try{const E=await _e.updateDebt(r,j,{status:\"settled\"});if(E.success){const w=N.find(D=>D.id===j);if(w&&w.status!==\"settled\"){const D=L.find(_=>_.id===w.accountId);if(D){const _=w.type===\"borrowed\"?-w.amount:w.amount,Z=D.type===\"credit_card\"?D.balance-_:D.balance+_;await Ye(D.id,{balance:Z});const ne={description:`Debt Settlement: ${w.personName}`,amount:w.amount,category:\"Transfer\",date:new Date().toISOString().split(\"T\")[0],tags:[\"debt-settlement\"],accountId:w.accountId};if(w.type===\"borrowed\"){const Q=await _e.createExpense(r,ne);Q.success&&x(we=>[...we,Q.expense])}else{const Q=await _e.createIncome(r,ne);Q.success&&f(we=>[...we,Q.income])}}}M(D=>D.map(_=>_.id===j?E.debt:_)),J.success(\"🎉 Debt settled! Great job!\"),ji({particleCount:150,spread:100,origin:{y:.6}})}}catch{M(w=>w.map(D=>D.id===j?{...D,status:\"settled\"}:D)),J.warning(\"Marked as settled locally\")}},Bt=async()=>{let j=0;const E=[];for(const w of p)if(w.category!==\"Subscription\"&&bu(w.description)){const D=Yr(w.description);D&&D.category===\"Subscription\"&&(E.push(nn(w.id,{category:\"Subscription\",tags:[...new Set([...w.tags,\"auto-migrated\",\"subscription\"])]})),j++)}return E.length>0?(await Promise.all(E),J.success(`Migrated ${j} transactions to Subscriptions`)):J.info(\"No subscription transactions found to migrate\"),{count:j}},Mt=async()=>{let j=0;const E=[],w=new Set,D=new Set;p.forEach(ne=>{const Q=`${ne.date}-${ne.description?.toLowerCase().trim()}-${ne.amount}`,we=!ne.description||ne.description.trim()===\"\"||ne.amount===0,te=w.has(Q);we||te?D.add(ne.id):w.add(Q)});const _=new Map;p.forEach(ne=>{if(D.has(ne.id))return;if(ne.category===\"Subscription\"||ne.isRecurring||bu(ne.description)){const we=new Date(ne.date),te=`${ne.description.toLowerCase().trim()}-${we.getFullYear()}-${we.getMonth()}`;_.has(te)||_.set(te,[]),_.get(te).push(ne)}}),_.forEach(ne=>{if(ne.length>1){ne.sort((Q,we)=>Q.isRecurring!==we.isRecurring?Q.isRecurring?-1:1:new Date(we.date).getTime()-new Date(Q.date).getTime());for(let Q=1;Q<ne.length;Q++)D.add(ne[Q].id)}}),D.forEach(ne=>{E.push(Fa(ne)),j++});const Z=new Set;for(const ne of v){const Q=`${ne.date}-${ne.source?.toLowerCase().trim()}-${ne.amount}`,we=!ne.source||ne.source.trim()===\"\"||ne.amount===0,te=Z.has(Q);we||te?(E.push(wt(ne.id)),j++):Z.add(Q)}return E.length>0?(await Promise.all(E),J.success(`Cleaned up ${j} entries (Duplicates & Density Checks)`)):J.info(\"Logs are clean. No redundancies found.\"),{count:j}},Ct=async j=>{try{const E=await _e.createGoal(r,j);E.success&&(B(w=>[...w,E.goal]),j.monthly_contribution>0&&await dt({type:\"expense\",description:`Goal Contribution: ${E.goal.name}`,amount:j.monthly_contribution,category:\"Transfer\",accountId:j.accountId||\"none\",frequency:\"monthly\",startDate:j.startDate||E.goal.createdAt.split(\"T\")[0],tags:[\"goal\",\"contribution\",E.goal.name.toLowerCase()],goalId:E.goal.id}),J.success(\"Goal created\"))}catch{const w={id:`temp_${Date.now()}`,...j,createdAt:new Date().toISOString()};B(D=>[...D,w]),J.warning(\"Created in offline mode\")}},ht=async(j,E)=>{try{const w=await _e.updateGoal(r,j,E);if(w.success){const D=O.find(_=>_.id===j);if(D){if((w.goal.monthly_contribution||0)>0){const _=he.find(Z=>Z.goalId===j);_?await kt(_.id,{amount:w.goal.monthly_contribution||0,description:`Goal Contribution: ${w.goal.name}`}):await dt({type:\"expense\",description:`Goal Contribution: ${w.goal.name}`,amount:w.goal.monthly_contribution||0,category:\"Transfer\",accountId:w.goal.accountId||\"none\",frequency:\"monthly\",startDate:w.goal.startDate||D.createdAt?.split(\"T\")[0]||new Date().toISOString().split(\"T\")[0],tags:[\"goal\",\"contribution\",w.goal.name.toLowerCase()],goalId:w.goal.id})}else if(D.monthly_contribution&&D.monthly_contribution>0){const _=he.find(Z=>Z.goalId===j);_&&await Sa(_.id)}}B(_=>_.map(Z=>Z.id===j?w.goal:Z)),w.goal.currentAmount>=w.goal.targetAmount?(J.success(`🎉 Goal \"${w.goal.name}\" completed!`),ji({particleCount:200,spread:120,origin:{y:.5}})):J.success(\"Goal updated\")}}catch{B(D=>D.map(_=>_.id===j?{..._,...E}:_)),J.warning(\"Updated locally\")}},Yt=async j=>{try{(await _e.deleteGoal(r,j)).success&&(B(w=>w.filter(D=>D.id!==j)),J.success(\"Goal deleted\"))}catch{B(w=>w.filter(D=>D.id!==j)),J.warning(\"Deleted locally\")}},Rt=async j=>{try{const E=await _e.createAccount(r,j);E.success&&(R(w=>[...w,E.account]),J.success(\"Account created\"))}catch{const w={id:`temp_${Date.now()}`,...j,createdAt:new Date().toISOString()};R(D=>[...D,w]),J.warning(\"Created locally\")}},Ye=async(j,E)=>{try{const w=await _e.updateAccount(r,j,E);w.success&&(R(D=>D.map(_=>_.id===j?w.account:_)),J.success(\"Account updated\"))}catch{R(D=>D.map(_=>_.id===j?{..._,...E}:_)),J.warning(\"Updated locally\")}},$a=async j=>{try{(await _e.deleteAccount(r,j)).success&&(R(w=>w.filter(D=>D.id!==j)),J.success(\"Account deleted\"))}catch{R(w=>w.filter(D=>D.id!==j)),J.warning(\"Deleted locally\")}},na=async j=>{try{const E=await _e.createLiability(r,j);E.success&&(se(w=>[...w,E.liability]),J.success(\"Liability created\"),E.liability.emiAmount>0&&await dt({type:\"expense\",description:`EMI: ${E.liability.name}`,amount:E.liability.emiAmount,category:\"EMI\",accountId:E.liability.accountId||\"none\",frequency:\"monthly\",startDate:E.liability.startDate,tags:[\"emi\",\"liability\",E.liability.name.toLowerCase()],liabilityId:E.liability.id}))}catch{const w={id:`temp_${Date.now()}`,...j,principal:Number(j.principal),outstanding:Number(j.outstanding),interestRate:Number(j.interestRate),emiAmount:Number(j.emiAmount),tenure:Number(j.tenure),createdAt:new Date().toISOString()};se(D=>[...D,w]),J.warning(\"Created locally\")}},Qt=async(j,E)=>{try{const w=await _e.updateLiability(r,j,E);if(w.success){const D=S.find(_=>_.id===j);if(D){if(w.liability.emiAmount>0){const _=he.find(Z=>Z.liabilityId===j);_?await kt(_.id,{amount:w.liability.emiAmount,description:`EMI: ${w.liability.name}`}):await dt({type:\"expense\",description:`EMI: ${w.liability.name}`,amount:w.liability.emiAmount,category:\"EMI\",accountId:w.liability.accountId||\"none\",frequency:\"monthly\",startDate:w.liability.startDate,tags:[\"emi\",\"liability\",w.liability.name.toLowerCase()],liabilityId:w.liability.id})}else if(D.emiAmount>0){const _=he.find(Z=>Z.liabilityId===j);_&&await Sa(_.id)}}se(_=>_.map(Z=>Z.id===j?w.liability:Z)),J.success(\"Liability updated\")}}catch{se(D=>D.map(_=>_.id===j?{..._,...E}:_)),J.warning(\"Updated locally\")}},sa=async j=>{try{(await _e.deleteLiability(r,j)).success&&(se(w=>w.filter(D=>D.id!==j)),J.success(\"Liability deleted\"))}catch{se(w=>w.filter(D=>D.id!==j)),J.warning(\"Deleted locally\")}},dn=async(j,E)=>{try{const w=await _e.createInvestment(r,j);if(w.success){if(V(D=>[...D,w.investment]),E&&E!==\"none\"){const D=L.find(_=>_.id===E);if(D){const _=j.buyPrice*j.quantity;await Ye(E,{balance:D.balance-_});const Z={description:`Asset Purchase: ${j.symbol} (${j.quantity} units)`,amount:_,category:\"Transfer\",date:j.purchaseDate||new Date().toISOString().split(\"T\")[0],tags:[\"investment\",\"principal\",j.symbol],accountId:E},ne=await _e.createExpense(r,Z);ne.success&&x(Q=>[...Q,ne.expense])}}w.investment.type===\"sip\"&&await dt({type:\"expense\",description:`SIP: ${w.investment.symbol} (${w.investment.name})`,amount:w.investment.buyPrice*w.investment.quantity,category:\"Investment\",accountId:E||\"none\",frequency:\"monthly\",startDate:w.investment.purchaseDate,tags:[\"sip\",\"investment\",w.investment.symbol.toLowerCase()],investmentId:w.investment.id}),J.success(\"Investment created\")}}catch{const D={id:`temp_${Date.now()}`,...j,createdAt:new Date().toISOString()};V(_=>[..._,D]),J.warning(\"Created locally\")}},fs=async(j,E)=>{try{const w=await _e.updateInvestment(r,j,E);if(w.success){const D=P.find(_=>_.id===j);if(D){if(w.investment.type===\"sip\"){const _=he.find(Z=>Z.investmentId===j);_?await kt(_.id,{amount:w.investment.buyPrice*w.investment.quantity,description:`SIP: ${w.investment.symbol} (${w.investment.name})`}):await dt({type:\"expense\",description:`SIP: ${w.investment.symbol} (${w.investment.name})`,amount:w.investment.buyPrice*w.investment.quantity,category:\"Investment\",accountId:w.investment.accountId||\"none\",frequency:\"monthly\",startDate:w.investment.purchaseDate,tags:[\"sip\",\"investment\",w.investment.symbol.toLowerCase()],investmentId:w.investment.id})}else if(D.type===\"sip\"){const _=he.find(Z=>Z.investmentId===j);_&&await Sa(_.id)}}V(_=>_.map(Z=>Z.id===j?w.investment:Z)),J.success(\"Investment updated\")}}catch{V(D=>D.map(_=>_.id===j?{..._,...E}:_)),J.warning(\"Updated locally\")}},ao=async j=>{try{(await _e.deleteInvestment(r,j)).success&&(V(w=>w.filter(D=>D.id!==j)),J.success(\"Investment deleted\"))}catch{V(w=>w.filter(D=>D.id!==j)),J.warning(\"Deleted locally\")}},[no,ki]=A.useState(!1),[ms,Ci]=A.useState(\"goal\"),Ln=j=>{Ci(j),ki(!0)},qn=()=>{ki(!1)},hs=async j=>{const E=L.find(w=>w.id===j.accountId);if(!E){J.error(\"Account not found\");return}if(E.balance<j.amount){J.error(`Insufficient funds in ${E.name}`);return}if(await Ye(j.accountId,{balance:E.balance-j.amount}),j.destinationType===\"goal\"){const w=O.find(D=>D.id===j.destinationId);w&&await ht(j.destinationId,{currentAmount:w.currentAmount+j.amount})}else qe(w=>w+j.amount);J.success(`Successfully allocated ${cn[h.currency]}${j.amount.toLocaleString()} from ${E.name}!`,{description:`${j.destinationType===\"goal\"?\"Goal\":\"Emergency Fund\"} balance updated`}),ji({particleCount:100,spread:70,origin:{y:.6}})},In=async(j,E)=>{const w=L.find(D=>D.id===j);if(w){if(w.balance<E)throw J.error(`Insufficient funds in ${w.name}`),new Error(\"Insufficient funds\");await Ye(j,{balance:w.balance-E})}},Zt=async(j,E,w)=>{const D=L.find(Z=>Z.id===j),_=L.find(Z=>Z.id===E);if(!D||!_){J.error(\"Source or destination account not found\");return}if(D.balance<w){J.error(`Insufficient funds in ${D.name}`);return}try{await Ye(j,{balance:D.balance-w});const Z=_.type===\"credit_card\"?-w:w;await Ye(E,{balance:_.balance+Z});const ne={description:`Migration: ${D.name} → ${_.name}`,amount:w,category:\"Transfer\",date:new Date().toISOString().split(\"T\")[0],tags:[\"internal\",\"migration\"],accountId:j},Q=await _e.createExpense(r,ne);Q.success&&x(we=>[...we,Q.expense]),J.success(`Transferred ${cn[h.currency]}${w.toLocaleString()}!`,{description:`From ${D.name} to ${_.name}`}),ji({particleCount:50,spread:60,origin:{y:.7}})}catch(Z){console.error(\"Transfer failed\",Z),J.error(\"Capital migration protocol failed\")}},Cl=async()=>{try{const j=J.loading(\"Initiating factory reset...\"),E=async(D,_)=>{const Z=D.map(ne=>_(r,ne.id).catch(Q=>console.warn(`Failed to delete ${ne.id}`,Q)));await Promise.all(Z)};await Promise.all([E(he,_e.deleteRecurring),E(p,_e.deleteExpense),E(v,_e.deleteIncome),E(N,_e.deleteDebt),E(O,_e.deleteGoal),E(P,_e.deleteInvestment),E(S,_e.deleteLiability)]);const w=L.map(D=>_e.updateAccount(r,D.id,{balance:0}).catch(_=>console.warn(`Failed to reset ${D.name}`,_)));await Promise.all(w),await bt(),J.dismiss(j),J.success(\"All data purged. Clean slate initialized.\")}catch(j){console.error(j),J.error(\"Partial purge only. Some data remains.\")}};return n.jsx(bp.Provider,{value:{userId:r,settings:h,currency:h.currency,expenses:p,incomes:v,debts:N,goals:O,accounts:L,investments:P,liabilities:S,recurringTransactions:he,notifications:fe,emergencyFundAmount:Se,isLoading:c,isRefreshing:m,isOffline:Te,apiStatus:me,isFundAllocationOpen:no,fundAllocationType:ms,authStatus:C,currentUser:oe,isAwaitingPin:z,isRememberedUser:le,rememberedMobile:Ne,authMessage:Ve,refreshData:la,updateSettings:Gt,checkIdentity:Ee,login:He,signup:_a,logout:ba,clearPendingSession:ma,scheduleAccountDeletion:ja,cancelAccountDeletion:It,deletionDate:de,sendOtp:yt,verifyOtp:Ut,resetPin:Oa,pendingMobile:re,createExpense:un,updateExpense:nn,deleteExpense:Fa,createIncome:Da,updateIncome:Ue,deleteIncome:wt,createDebt:ie,updateDebt:Le,deleteDebt:ft,settleDebt:at,createGoal:Ct,updateGoal:ht,deleteGoal:Yt,createAccount:Rt,updateAccount:Ye,deleteAccount:$a,createLiability:na,updateLiability:Qt,deleteLiability:sa,migrateSubscriptions:Bt,cleanupDuplicates:Mt,createInvestment:dn,updateInvestment:fs,deleteInvestment:ao,createRecurringTransaction:dt,createRecurring:dt,updateRecurringTransaction:kt,deleteRecurringTransaction:Sa,processRecurringTransactions:Aa,setEmergencyFundAmount:qe,setNotifications:ye,applyTheme:ce,openFundAllocation:Ln,closeFundAllocation:qn,performFundAllocation:hs,deductFromAccount:In,transferFunds:Zt,clearAllData:Cl,backfillRequest:De,setBackfillRequest:tt,executeBackfill:ds},children:i})};function $e(i,r=\"USD\",c=!1){const u=typeof i==\"string\"?parseFloat(i.replace(/,/g,\"\")):i;if(isNaN(u))return\"\";const m=r===\"INR\"?\"en-IN\":\"en-US\",g={style:\"currency\",currency:r,notation:c?\"compact\":\"standard\",maximumFractionDigits:c?1:2};try{return new Intl.NumberFormat(m,g).format(u)}catch{return new Intl.NumberFormat(m,{...g,style:\"decimal\"}).format(u)}}function Qu(i,r=\"en-IN\"){const c=typeof i==\"string\"?parseFloat(i.replace(/,/g,\"\")):i;return isNaN(c)?\"\":new Intl.NumberFormat(r).format(c)}const yu=Qu;function o1(i){return i===\"\"||i===\"-\"?!0:/^-?\\d*\\.?\\d*$/.test(i)}function Wh(i){return i.replace(/,/g,\"\")}function UN(i){if(i<=0)return\"0 months\";const r=Math.floor(i/12),c=i%12,u=[];return r>0&&u.push(`${r} ${r===1?\"year\":\"years\"}`),(c>0||r===0)&&u.push(`${c} ${c===1?\"month\":\"months\"}`),u.join(\", \")}function BN(i,r=\"INR\"){const c=Math.abs(i),u=i<0?\"-\":\"\";if(r===\"INR\"){if(c>=1e7)return`${u}${(c/1e7).toFixed(2).replace(/\\.00$/,\"\")}C`;if(c>=1e5)return`${u}${(c/1e5).toFixed(2).replace(/\\.00$/,\"\")}L`;if(c>=1e4)return`${u}${(c/1e3).toFixed(1).replace(/\\.0$/,\"\")}K`}else{if(c>=1e9)return`${u}${(c/1e9).toFixed(2).replace(/\\.00$/,\"\")}B`;if(c>=1e6)return`${u}${(c/1e6).toFixed(2).replace(/\\.00$/,\"\")}M`;if(c>=1e4)return`${u}${(c/1e3).toFixed(1).replace(/\\.0$/,\"\")}K`}return u+Qu(c,r===\"INR\"?\"en-IN\":\"en-US\")}function LN(i,r=\"INR\"){const c=Math.abs(i),u=i<0?\"-\":\"\",m=(g,h)=>{let y=2;return g>=100?y=0:g>=10&&(y=1),`${u}${g.toFixed(y).replace(/\\.0+$/,\"\")}${h}`};if(r===\"INR\"){if(c>=1e7)return m(c/1e7,\"Cr\");if(c>=1e5)return m(c/1e5,\"L\");if(c>=1e3)return m(c/1e3,\"K\")}else{if(c>=1e9)return m(c/1e9,\"B\");if(c>=1e6)return m(c/1e6,\"M\");if(c>=1e3)return m(c/1e3,\"K\")}return u+Qu(c,r===\"INR\"?\"en-IN\":\"en-US\")}const Zu=A.createContext({});function Ku(i){const r=A.useRef(null);return r.current===null&&(r.current=i()),r.current}const yp=np?A.useLayoutEffect:A.useEffect,eo=A.createContext(null),Ju=A.createContext({transformPagePoint:i=>i,isStatic:!1,reducedMotion:\"never\"});function e0(i,r){if(typeof i==\"function\")return i(r);i!=null&&(i.current=r)}function c1(...i){return r=>{let c=!1;const u=i.map(m=>{const g=e0(m,r);return!c&&typeof g==\"function\"&&(c=!0),g});if(c)return()=>{for(let m=0;m<u.length;m++){const g=u[m];typeof g==\"function\"?g():e0(i[m],null)}}}}function u1(...i){return A.useCallback(c1(...i),i)}class d1 extends A.Component{getSnapshotBeforeUpdate(r){const c=this.props.childRef.current;if(c&&r.isPresent&&!this.props.isPresent){const u=c.offsetParent,m=Cy(u)&&u.offsetWidth||0,g=this.props.sizeRef.current;g.height=c.offsetHeight||0,g.width=c.offsetWidth||0,g.top=c.offsetTop,g.left=c.offsetLeft,g.right=m-g.width-g.left}return null}componentDidUpdate(){}render(){return this.props.children}}function f1({children:i,isPresent:r,anchorX:c,root:u}){const m=A.useId(),g=A.useRef(null),h=A.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:y}=A.useContext(Ju),p=i.props?.ref??i?.ref,x=u1(g,p);return A.useInsertionEffect(()=>{const{width:v,height:f,top:N,left:M,right:O}=h.current;if(r||!g.current||!v||!f)return;const B=c===\"left\"?`left: ${M}`:`right: ${O}`;g.current.dataset.motionPopId=m;const L=document.createElement(\"style\");y&&(L.nonce=y);const R=u??document.head;return R.appendChild(L),L.sheet&&L.sheet.insertRule(`"
      },
      {
        "file": "dist_test\\assets\\index-DHabN7TV.js",
        "line": 11,
        "snippet": "`);try{z=new Worker(URL.createObjectURL(new Blob([le])))}catch(ue){return typeof console<\"u\"&&typeof console.warn==\"function\"&&console.warn(\"🎊 Could not load worker\",ue),null}$(z)}return z}})(),M={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:[\"square\",\"circle\"],zIndex:100,colors:[\"#26ccff\",\"#a25afd\",\"#ff5e7e\",\"#88ff5a\",\"#fcff42\",\"#ffa62d\",\"#ff36ff\"],disableForReducedMotion:!1,scalar:1};function O(z,T){return T?T(z):z}function B(z){return z!=null}function L(z,T,re){return O(z&&B(z[T])?z[T]:M[T],re)}function R(z){return z<0?0:Math.floor(z)}function P(z,T){return Math.floor(Math.random()*(T-z))+z}function V(z){return parseInt(z,16)}function S(z){return z.map(se)}function se(z){var T=String(z).replace(/[^0-9a-f]/gi,\"\");return T.length<6&&(T=T[0]+T[0]+T[1]+T[1]+T[2]+T[2]),{r:V(T.substring(0,2)),g:V(T.substring(2,4)),b:V(T.substring(4,6))}}function he(z){var T=L(z,\"origin\",Object);return T.x=L(T,\"x\",Number),T.y=L(T,\"y\",Number),T}function ve(z){z.width=document.documentElement.clientWidth,z.height=document.documentElement.clientHeight}function fe(z){var T=z.getBoundingClientRect();z.width=T.width,z.height=T.height}function ye(z){var T=document.createElement(\"canvas\");return T.style.position=\"fixed\",T.style.top=\"0px\",T.style.left=\"0px\",T.style.pointerEvents=\"none\",T.style.zIndex=z,T}function Se(z,T,re,$,le,ue,Ne,je,de){z.save(),z.translate(T,re),z.rotate(ue),z.scale($,le),z.arc(0,0,1,Ne,je,de),z.restore()}function qe(z){var T=z.angle*(Math.PI/180),re=z.spread*(Math.PI/180);return{x:z.x,y:z.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:z.startVelocity*.5+Math.random()*z.startVelocity,angle2D:-T+(.5*re-Math.random()*re),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:z.color,shape:z.shape,tick:0,totalTicks:z.ticks,decay:z.decay,drift:z.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:z.gravity*3,ovalScalar:.6,scalar:z.scalar,flat:z.flat}}function Te(z,T){T.x+=Math.cos(T.angle2D)*T.velocity+T.drift,T.y+=Math.sin(T.angle2D)*T.velocity+T.gravity,T.velocity*=T.decay,T.flat?(T.wobble=0,T.wobbleX=T.x+10*T.scalar,T.wobbleY=T.y+10*T.scalar,T.tiltSin=0,T.tiltCos=0,T.random=1):(T.wobble+=T.wobbleSpeed,T.wobbleX=T.x+10*T.scalar*Math.cos(T.wobble),T.wobbleY=T.y+10*T.scalar*Math.sin(T.wobble),T.tiltAngle+=.1,T.tiltSin=Math.sin(T.tiltAngle),T.tiltCos=Math.cos(T.tiltAngle),T.random=Math.random()+2);var re=T.tick++/T.totalTicks,$=T.x+T.random*T.tiltCos,le=T.y+T.random*T.tiltSin,ue=T.wobbleX+T.random*T.tiltCos,Ne=T.wobbleY+T.random*T.tiltSin;if(z.fillStyle=\"rgba(\"+T.color.r+\", \"+T.color.g+\", \"+T.color.b+\", \"+(1-re)+\")\",z.beginPath(),h&&T.shape.type===\"path\"&&typeof T.shape.path==\"string\"&&Array.isArray(T.shape.matrix))z.fill(Y(T.shape.path,T.shape.matrix,T.x,T.y,Math.abs(ue-$)*.1,Math.abs(Ne-le)*.1,Math.PI/10*T.wobble));else if(T.shape.type===\"bitmap\"){var je=Math.PI/10*T.wobble,de=Math.abs(ue-$)*.1,xe=Math.abs(Ne-le)*.1,Ke=T.shape.bitmap.width*T.scalar,Ie=T.shape.bitmap.height*T.scalar,Ve=new DOMMatrix([Math.cos(je)*de,Math.sin(je)*de,-Math.sin(je)*xe,Math.cos(je)*xe,T.x,T.y]);Ve.multiplySelf(new DOMMatrix(T.shape.matrix));var rt=z.createPattern(v.transform(T.shape.bitmap),\"no-repeat\");rt.setTransform(Ve),z.globalAlpha=1-re,z.fillStyle=rt,z.fillRect(T.x-Ke/2,T.y-Ie/2,Ke,Ie),z.globalAlpha=1}else if(T.shape===\"circle\")z.ellipse?z.ellipse(T.x,T.y,Math.abs(ue-$)*T.ovalScalar,Math.abs(Ne-le)*T.ovalScalar,Math.PI/10*T.wobble,0,2*Math.PI):Se(z,T.x,T.y,Math.abs(ue-$)*T.ovalScalar,Math.abs(Ne-le)*T.ovalScalar,Math.PI/10*T.wobble,0,2*Math.PI);else if(T.shape===\"star\")for(var De=Math.PI/2*3,tt=4*T.scalar,St=8*T.scalar,mt=T.x,zt=T.y,ut=5,bt=Math.PI/ut;ut--;)mt=T.x+Math.cos(De)*St,zt=T.y+Math.sin(De)*St,z.lineTo(mt,zt),De+=bt,mt=T.x+Math.cos(De)*tt,zt=T.y+Math.sin(De)*tt,z.lineTo(mt,zt),De+=bt;else z.moveTo(Math.floor(T.x),Math.floor(T.y)),z.lineTo(Math.floor(T.wobbleX),Math.floor(le)),z.lineTo(Math.floor(ue),Math.floor(Ne)),z.lineTo(Math.floor($),Math.floor(T.wobbleY));return z.closePath(),z.fill(),T.tick<T.totalTicks}function ee(z,T,re,$,le){var ue=T.slice(),Ne=z.getContext(\"2d\"),je,de,xe=x(function(Ke){function Ie(){je=de=null,Ne.clearRect(0,0,$.width,$.height),v.clear(),le(),Ke()}function Ve(){u&&!($.width===m.width&&$.height===m.height)&&($.width=z.width=m.width,$.height=z.height=m.height),!$.width&&!$.height&&(re(z),$.width=z.width,$.height=z.height),Ne.clearRect(0,0,$.width,$.height),ue=ue.filter(function(rt){return Te(Ne,rt)}),ue.length?je=f.frame(Ve):Ie()}je=f.frame(Ve),de=Ie});return{addFettis:function(Ke){return ue=ue.concat(Ke),xe},canvas:z,promise:xe,reset:function(){je&&f.cancel(je),de&&de()}}}function me(z,T){var re=!z,$=!!L(T||{},\"resize\"),le=!1,ue=L(T,\"disableForReducedMotion\",Boolean),Ne=g&&!!L(T||{},\"useWorker\"),je=Ne?N():null,de=re?ve:fe,xe=z&&je?!!z.__confetti_initialized:!1,Ke=typeof matchMedia==\"function\"&&matchMedia(\"(prefers-reduced-motion)\").matches,Ie;function Ve(De,tt,St){for(var mt=L(De,\"particleCount\",R),zt=L(De,\"angle\",Number),ut=L(De,\"spread\",Number),bt=L(De,\"startVelocity\",Number),la=L(De,\"decay\",Number),ce=L(De,\"gravity\",Number),Ee=L(De,\"drift\",Number),He=L(De,\"colors\",S),yt=L(De,\"ticks\",Number),Ut=L(De,\"shapes\"),Oa=L(De,\"scalar\"),_a=!!L(De,\"flat\"),ba=he(De),ma=mt,ja=[],It=z.width*ba.x,Na=z.height*ba.y;ma--;)ja.push(qe({x:It,y:Na,angle:zt,spread:ut,startVelocity:bt,color:He[ma%He.length],shape:Ut[P(0,Ut.length)],ticks:yt,decay:la,gravity:ce,drift:Ee,scalar:Oa,flat:_a}));return Ie?Ie.addFettis(ja):(Ie=ee(z,ja,de,tt,St),Ie.promise)}function rt(De){var tt=ue||L(De,\"disableForReducedMotion\",Boolean),St=L(De,\"zIndex\",Number);if(tt&&Ke)return x(function(bt){bt()});re&&Ie?z=Ie.canvas:re&&!z&&(z=ye(St),document.body.appendChild(z)),$&&!xe&&de(z);var mt={width:z.width,height:z.height};je&&!xe&&je.init(z),xe=!0,je&&(z.__confetti_initialized=!0);function zt(){if(je){var bt={getBoundingClientRect:function(){if(!re)return z.getBoundingClientRect()}};de(bt),je.postMessage({resize:{width:bt.width,height:bt.height}});return}mt.width=mt.height=null}function ut(){Ie=null,$&&(le=!1,r.removeEventListener(\"resize\",zt)),re&&z&&(document.body.contains(z)&&document.body.removeChild(z),z=null,xe=!1)}return $&&!le&&(le=!0,r.addEventListener(\"resize\",zt,!1)),je?je.fire(De,mt,ut):Ve(De,mt,ut)}return rt.reset=function(){je&&je.reset(),Ie&&Ie.reset()},rt}var G;function C(){return G||(G=me(null,{useWorker:!0,resize:!0})),G}function Y(z,T,re,$,le,ue,Ne){var je=new Path2D(z),de=new Path2D;de.addPath(je,new DOMMatrix(T));var xe=new Path2D;return xe.addPath(de,new DOMMatrix([Math.cos(Ne)*le,Math.sin(Ne)*le,-Math.sin(Ne)*ue,Math.cos(Ne)*ue,re,$])),xe}function oe(z){if(!h)throw new Error(\"path confetti are not supported in this browser\");var T,re;typeof z==\"string\"?T=z:(T=z.path,re=z.matrix);var $=new Path2D(T),le=document.createElement(\"canvas\"),ue=le.getContext(\"2d\");if(!re){for(var Ne=1e3,je=Ne,de=Ne,xe=0,Ke=0,Ie,Ve,rt=0;rt<Ne;rt+=2)for(var De=0;De<Ne;De+=2)ue.isPointInPath($,rt,De,\"nonzero\")&&(je=Math.min(je,rt),de=Math.min(de,De),xe=Math.max(xe,rt),Ke=Math.max(Ke,De));Ie=xe-je,Ve=Ke-de;var tt=10,St=Math.min(tt/Ie,tt/Ve);re=[St,0,0,St,-Math.round(Ie/2+je)*St,-Math.round(Ve/2+de)*St]}return{type:\"path\",path:T,matrix:re}}function ge(z){var T,re=1,$=\"#000000\",le='\"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\", \"EmojiOne Color\", \"Android Emoji\", \"Twemoji Mozilla\", \"system emoji\", sans-serif';typeof z==\"string\"?T=z:(T=z.text,re=\"scalar\"in z?z.scalar:re,le=\"fontFamily\"in z?z.fontFamily:le,$=\"color\"in z?z.color:$);var ue=10*re,Ne=\"\"+ue+\"px \"+le,je=new OffscreenCanvas(ue,ue),de=je.getContext(\"2d\");de.font=Ne;var xe=de.measureText(T),Ke=Math.ceil(xe.actualBoundingBoxRight+xe.actualBoundingBoxLeft),Ie=Math.ceil(xe.actualBoundingBoxAscent+xe.actualBoundingBoxDescent),Ve=2,rt=xe.actualBoundingBoxLeft+Ve,De=xe.actualBoundingBoxAscent+Ve;Ke+=Ve+Ve,Ie+=Ve+Ve,je=new OffscreenCanvas(Ke,Ie),de=je.getContext(\"2d\"),de.font=Ne,de.fillStyle=$,de.fillText(T,rt,De);var tt=1/re;return{type:\"bitmap\",bitmap:je.transferToImageBitmap(),matrix:[tt,0,0,tt,-Ke*tt/2,-Ie*tt/2]}}c.exports=function(){return C().apply(this,arguments)},c.exports.reset=function(){C().reset()},c.exports.create=me,c.exports.shapeFromPath=oe,c.exports.shapeFromText=ge})((function(){return typeof window<\"u\"?window:typeof self<\"u\"?self:this||{}})(),Xu,!1);const ji=Xu.exports;Xu.exports.create;const Pu=[{id:\"first_transaction\",name:\"Getting Started\",description:\"Add your first transaction\",icon:\"🎯\",condition:i=>i.totalTransactions>=1},{id:\"early_bird\",name:\"Early Bird\",description:\"Log in for the first time today\",icon:\"🌅\",condition:i=>i.dailyLogin===!0},{id:\"ten_transactions\",name:\"Building Habits\",description:\"Log 10 transactions\",icon:\"📊\",condition:i=>i.totalTransactions>=10},{id:\"fifty_transactions\",name:\"Momentum Builder\",description:\"Log 50 transactions\",icon:\"⚡\",condition:i=>i.totalTransactions>=50},{id:\"financial_guru\",name:\"Financial Guru\",description:\"Complete 100 transactions\",icon:\"🧙\",condition:i=>i.totalTransactions>=100},{id:\"three_day_streak\",name:\"Streak Starter\",description:\"Log in for 3 days in a row\",icon:\"🔥\",condition:i=>i.currentStreak>=3},{id:\"consistent_tracker\",name:\"Consistent Tracker\",description:\"Log transactions for 7 days in a row\",icon:\"📅\",condition:i=>i.currentStreak>=7},{id:\"habit_master\",name:\"Habit Master\",description:\"Maintain a 30-day streak\",icon:\"🏅\",condition:i=>i.currentStreak>=30},{id:\"dedication_champion\",name:\"Dedication Champion\",description:\"Achieve a 100-day streak\",icon:\"👑\",condition:i=>i.currentStreak>=100},{id:\"first_goal\",name:\"Goal Setter\",description:\"Create your first savings goal\",icon:\"🎯\",condition:i=>i.totalGoals>=1},{id:\"goal_achiever\",name:\"Goal Achiever\",description:\"Complete your first savings goal\",icon:\"🏆\",condition:i=>i.completedGoals>=1},{id:\"triple_winner\",name:\"Triple Winner\",description:\"Complete 3 savings goals\",icon:\"🎖️\",condition:i=>i.completedGoals>=3},{id:\"goal_crusher\",name:\"Goal Crusher\",description:\"Complete 5 savings goals\",icon:\"💎\",condition:i=>i.completedGoals>=5},{id:\"debt_aware\",name:\"Debt Aware\",description:\"Track your first debt\",icon:\"📝\",condition:i=>i.totalDebts>=1},{id:\"debt_settler\",name:\"Debt Settler\",description:\"Settle your first debt\",icon:\"✅\",condition:i=>i.settledDebts>=1},{id:\"debt_destroyer\",name:\"Debt Destroyer\",description:\"Settle 5 debts\",icon:\"💪\",condition:i=>i.settledDebts>=5},{id:\"debt_free_hero\",name:\"Debt-Free Hero\",description:\"Maintain zero pending debts\",icon:\"🦸\",condition:i=>i.totalDebts>0&&i.settledDebts===i.totalDebts},{id:\"first_saver\",name:\"First Saver\",description:\"Achieve 10%+ savings rate\",icon:\"🌱\",condition:i=>i.savingsRate>=.1},{id:\"super_saver\",name:\"Super Saver\",description:\"Maintain a 20%+ savings rate\",icon:\"💰\",condition:i=>i.savingsRate>=.2},{id:\"elite_saver\",name:\"Elite Saver\",description:\"Achieve 30%+ savings rate\",icon:\"💸\",condition:i=>i.savingsRate>=.3},{id:\"legendary_saver\",name:\"Legendary Saver\",description:\"Maintain 50%+ savings rate\",icon:\"🏰\",condition:i=>i.savingsRate>=.5},{id:\"budget_conscious\",name:\"Budget Conscious\",description:\"Keep spending under 80% of income\",icon:\"📊\",condition:i=>i.monthlySpendingRatio<=.8},{id:\"budget_master\",name:\"Budget Master\",description:\"Keep spending under 70% of income\",icon:\"👑\",condition:i=>i.monthlySpendingRatio<=.7},{id:\"frugal_champion\",name:\"Frugal Champion\",description:\"Keep spending under 50% of income\",icon:\"🌟\",condition:i=>i.monthlySpendingRatio<=.5},{id:\"stay_notified\",name:\"Stay Notified\",description:\"Enable notifications\",icon:\"🔔\",condition:i=>i.notificationsEnabled===!0},{id:\"ai_curious\",name:\"AI Curious\",description:\"Chat with AI Guru for the first time\",icon:\"🤖\",condition:i=>i.aiInteractions>=1},{id:\"ai_enthusiast\",name:\"AI Enthusiast\",description:\"Chat with AI Guru 10 times\",icon:\"🧠\",condition:i=>i.aiInteractions>=10},{id:\"profile_complete\",name:\"Profile Complete\",description:\"Add your name and photo\",icon:\"👤\",condition:i=>i.profileComplete===!0},{id:\"account_organizer\",name:\"Account Organizer\",description:\"Create 3 or more accounts\",icon:\"🏦\",condition:i=>i.totalAccounts>=3}];function a1(i,r){const c=[];return Pu.forEach(u=>{!r.includes(u.id)&&u.condition(i)&&c.push(u.id)}),c}function gp(i){return Pu.find(r=>r.id===i)}function n1(){return Pu}function s1(i){const{expenses:r,goals:c,userName:u}=i,m=[],g=new Date,h=new Date(g.getTime()-10080*60*1e3),y=new Date(g.getTime()-720*60*60*1e3),p=r.filter(O=>new Date(O.date)>=h),x=r.filter(O=>{const B=new Date(O.date);return B>=y&&B<h}),v=O=>O.reduce((B,L)=>(B[L.category]=(B[L.category]||0)+L.amount,B),{}),f=v(p),N=v(x),M=Object.keys(N).reduce((O,B)=>(O[B]=N[B]/3,O),{});return Object.keys(f).forEach(O=>{const B=f[O],L=M[O]||0;if(L>500&&B>L*1.2){const R=Math.round((B-L)/L*100),P=c.find(V=>V.currentAmount<V.targetAmount);P?m.push(`${u}, you've spent ${R}% more on ${O} this week. This slows down your '${P.name}' goal. Consider tightening up your protocol!`):m.push(`${u}, your ${O} spending is up ${R}% this week. Watch out before it becomes a habit!`)}}),m}function i1(i){return{id:`insight_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:\"insight\",priority:\"low\",category:\"insights\",title:\"Guruji Insight\",message:i,timestamp:new Date,read:!1}}const l1={netflix:\"Subscription\",spotify:\"Subscription\",google:\"Subscription\",apple:\"Subscription\",icloud:\"Subscription\",youtube:\"Subscription\",disney:\"Subscription\",hotstar:\"Subscription\",\"prime video\":\"Subscription\",\"prime membership\":\"Subscription\",\"amazon prime\":\"Subscription\",audible:\"Subscription\",kindle:\"Subscription\",hulu:\"Subscription\",hbomax:\"Subscription\",hbo:\"Subscription\",\"paramount+\":\"Subscription\",peacock:\"Subscription\",crunchyroll:\"Subscription\",chaisai:\"Subscription\",\"google play\":\"Subscription\",\"google one\":\"Subscription\",\"app store\":\"Subscription\",microsoft:\"Subscription\",\"office 365\":\"Subscription\",dropbox:\"Subscription\",zoom:\"Subscription\",canva:\"Subscription\",adobe:\"Subscription\",\"creative cloud\":\"Subscription\",jio:\"Subscription\",airtel:\"Subscription\",vodafone:\"Subscription\",idea:\"Subscription\",bsnl:\"Subscription\",\"vi \":\"Subscription\",broadband:\"Subscription\",isp:\"Subscription\",\"act fiber\":\"Subscription\",hathway:\"Subscription\",\"internet bill\":\"Subscription\",telecom:\"Subscription\",coffee:\"Food & Dining\",starbucks:\"Food & Dining\",cafe:\"Food & Dining\",restaurant:\"Food & Dining\",lunch:\"Food & Dining\",dinner:\"Food & Dining\",pizza:\"Food & Dining\",burger:\"Food & Dining\",mcdonalds:\"Food & Dining\",kfc:\"Food & Dining\",food:\"Food & Dining\",zomato:\"Food & Dining\",swiggy:\"Food & Dining\",beer:\"Food & Dining\",bar:\"Food & Dining\",uber:\"Transportation\",ola:\"Transportation\",cab:\"Transportation\",taxi:\"Transportation\",bus:\"Transportation\",train:\"Transportation\",metro:\"Transportation\",fuel:\"Transportation\",petrol:\"Transportation\",gas:\"Transportation\",parking:\"Transportation\",amazon:\"Shopping\",flipkart:\"Shopping\",clothes:\"Shopping\",zara:\"Shopping\",nike:\"Shopping\",shoes:\"Shopping\",mall:\"Shopping\",grocery:\"Groceries\",supermarket:\"Groceries\",vegetables:\"Groceries\",fruits:\"Groceries\",milk:\"Groceries\",electricity:\"Bills & Utilities\",water:\"Bills & Utilities\",\"gas bill\":\"Bills & Utilities\",rent:\"Bills & Utilities\",maintenance:\"Bills & Utilities\",movie:\"Entertainment\",cinema:\"Entertainment\",game:\"Entertainment\",steam:\"Entertainment\",playstation:\"Entertainment\",xbox:\"Entertainment\",doctor:\"Health & Wellbeing\",medical:\"Health & Wellbeing\",pharmacy:\"Health & Wellbeing\",medicine:\"Health & Wellbeing\",gym:\"Health & Wellbeing\",fitness:\"Health & Wellbeing\",hospital:\"Health & Wellbeing\",transfer:\"Transfer\",payment:\"Transfer\",\"cc bill\":\"Transfer\",internal:\"Transfer\",membership:\"Subscription\",subscription:\"Subscription\",recurring:\"Subscription\",premium:\"Subscription\",\"monthly bill\":\"Subscription\"},xp=[{keywords:[\"netflix\"],displayName:\"Netflix Premium\",defaultAmount:649,category:\"Subscription\"},{keywords:[\"hotstar\",\"disney\"],displayName:\"Disney+ Hotstar\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"prime video\",\"amazon prime\"],displayName:\"Amazon Prime\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"hulu\"],displayName:\"Hulu\",defaultAmount:650,category:\"Subscription\"},{keywords:[\"youtube\",\"yt premium\"],displayName:\"YouTube Premium\",defaultAmount:129,category:\"Subscription\"},{keywords:[\"sonyliv\"],displayName:\"SonyLIV\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"zee5\"],displayName:\"Zee5\",defaultAmount:100,category:\"Subscription\"},{keywords:[\"jiocinema\"],displayName:\"JioCinema Premium\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"apple tv\"],displayName:\"Apple TV+\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"spotify\"],displayName:\"Spotify Premium\",defaultAmount:119,category:\"Subscription\"},{keywords:[\"apple music\"],displayName:\"Apple Music\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"audible\"],displayName:\"Audible\",defaultAmount:199,category:\"Subscription\"},{keywords:[\"wynk\"],displayName:\"Wynk Music\",defaultAmount:49,category:\"Subscription\"},{keywords:[\"gaana\"],displayName:\"Gaana Plus\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"jiosaavn\"],displayName:\"JioSaavn Pro\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"google one\",\"google storage\"],displayName:\"Google One\",defaultAmount:130,category:\"Subscription\"},{keywords:[\"chatgpt\",\"openai\"],displayName:\"ChatGPT Plus\",defaultAmount:1999,category:\"Subscription\"},{keywords:[\"claude\",\"anthropic\"],displayName:\"Claude Pro\",defaultAmount:1999,category:\"Subscription\"},{keywords:[\"github\"],displayName:\"GitHub Copilot\",defaultAmount:830,category:\"Subscription\"},{keywords:[\"midjourney\"],displayName:\"Midjourney\",defaultAmount:830,category:\"Subscription\"},{keywords:[\"canva\"],displayName:\"Canva Pro\",defaultAmount:499,category:\"Subscription\"},{keywords:[\"adobe\",\"creative cloud\"],displayName:\"Adobe CC\",defaultAmount:2300,category:\"Subscription\"},{keywords:[\"jio\",\"myjio\"],displayName:\"Jio Mobile\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"airtel\"],displayName:\"Airtel Mobile\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"vi \",\"vodafone\"],displayName:\"Vi Mobile\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"act fiber\",\"act net\"],displayName:\"ACT Fibernet\",defaultAmount:820,category:\"Bills & Utilities\"},{keywords:[\"hathway\"],displayName:\"Hathway Broadband\",defaultAmount:600,category:\"Bills & Utilities\"}],bu=i=>{const r=i.toLowerCase();return xp.some(c=>c.keywords.some(u=>r.includes(u)))},Yr=i=>{const r=i.toLowerCase();for(const c of xp)if(c.keywords.some(u=>r.includes(u))){const u=[\"subscription\",\"online\"];return{category:c.category,tags:u,suggestedAmount:c.defaultAmount,suggestedDescription:c.displayName}}for(const[c,u]of Object.entries(l1))if(r.includes(c)){const m=[];return r.includes(\"online\")&&m.push(\"online\"),r.includes(\"subscription\")&&m.push(\"subscription\"),{category:u,tags:m}}return null},lt={SETTINGS:\"finhub_settings\",EXPENSES:\"finhub_expenses\",INCOMES:\"finhub_incomes\",DEBTS:\"finhub_debts\",GOALS:\"finhub_goals\",ACCOUNTS:\"finhub_accounts\",INVESTMENTS:\"finhub_investments\",LIABILITIES:\"finhub_liabilities\",NOTIFICATIONS:\"finhub_notifications\",EMERGENCY_FUND:\"finhub_emergency_fund\",RECURRING:\"finhub_recurring\",AUTH:\"finhub_auth\",REMEMBERED_MOBILE:\"finhub_remembered_mobile\",DELETION_SCHEDULE:\"finhub_deletion_schedule\"},bp=A.createContext(void 0),Di=()=>{const i=A.useContext(bp);if(!i)throw new Error(\"useFinance must be used within a FinanceProvider\");return i},r1=({children:i})=>{const[r]=A.useState(\"demo-user-001\"),[c,u]=A.useState(!0),[m,g]=A.useState(!1),[h,y]=A.useState({theme:\"system\",currency:\"INR\",unlockedAchievements:[],name:\"\",photoURL:\"\",notificationsEnabled:!1,roundUpEnabled:!0,aiProvider:\"openai\",onboardingPhase:0,passiveIncomeTarget:0,isSampleMode:!1}),[p,x]=A.useState([]),[v,f]=A.useState([]),[N,M]=A.useState([]),[O,B]=A.useState([]),[L,R]=A.useState([]),[P,V]=A.useState([]),[S,se]=A.useState([]),[he,ve]=A.useState([]),[fe,ye]=A.useState([]),[Se,qe]=A.useState(0),[Te,ee]=A.useState(!1),[me,G]=A.useState(\"online\"),[C,Y]=A.useState(\"guest\"),[oe,ge]=A.useState(null),[z,T]=A.useState(!1),[re,$]=A.useState(\"\"),[le,ue]=A.useState(!1),[Ne,je]=A.useState(\"\"),[de,xe]=A.useState(null),[Ke,Ie]=A.useState(null),[Ve,rt]=A.useState(),[De,tt]=A.useState(null),St=[{mobile:\"9447147230\",pin:\"2255\",name:\"tin2mon FinHub Node // 0x50.3\",userId:\"tin2mon-prod-001\"}],mt=j=>{const E=Array.isArray(j)?j:[j];ye(w=>{const D=E.filter(Z=>w.some(we=>we.id===Z.id)?!1:!w.some(we=>we.type===Z.type&&we.message===Z.message&&!we.read&&new Date().getTime()-new Date(we.timestamp).getTime()<1e3*60*60*24));return D.length===0?w:[...D,...w].sort((Z,ne)=>new Date(ne.timestamp).getTime()-new Date(Z.timestamp).getTime()).slice(0,100)})};A.useEffect(()=>{const j=()=>{const w=p.length+v.length+N.length,D=N.filter(Ce=>Ce.status===\"settled\").length,_=O.filter(Ce=>Ce.currentAmount>=Ce.targetAmount).length,Z=v.reduce((Ce,Pe)=>Ce+Pe.amount,0),ne=p.reduce((Ce,Pe)=>Ce+Pe.amount,0),Q=Z>0?(Z-ne)/Z:0,we=Z>0?ne/Z:0,te={totalTransactions:w,totalGoals:O.length,completedGoals:_,totalDebts:N.length,settledDebts:D,savingsRate:Q,monthlySpendingRatio:we,notificationsEnabled:h.notificationsEnabled,themeChanged:h.theme!==\"system\",aiInteractions:0,currentStreak:w>0?Math.min(w,3):0,dailyLogin:!0,profileComplete:h.name!==\"\"&&h.photoURL!==\"\",totalAccounts:L.length},pe=a1(te,h.unlockedAchievements);pe.length>0&&(pe.forEach(Ce=>{const Pe=gp(Ce);if(Pe){const Me={id:`notif_${Ce}`,type:\"achievement\",priority:\"low\",category:\"achievements\",title:\"Achievement Unlocked!\",message:`${Pe.icon} ${Pe.name}`,timestamp:new Date,read:!1,achievementId:Ce};mt(Me),J.success(`Achievement Unlocked: ${Pe.icon} ${Pe.name}!`,{duration:5e3})}}),Gt({unlockedAchievements:[...h.unlockedAchievements,...pe]}));const Je=s1({expenses:p,goals:O,userName:h.name||\"Friend\"});if(Je.length>0){const Ce=[];Je.forEach(Pe=>{const Me=i1(Pe);Me.priority=\"low\",Me.category=\"insights\",Ce.push(Me),J(Me.title,{description:Me.message,icon:\"🧘\"})}),Ce.length>0&&mt(Ce)}E()},E=()=>{const w=new Date;w.setHours(0,0,0,0);const D=L.reduce((Q,we)=>Q+(we.type===\"bank\"||we.type===\"cash\"?we.balance:0),0),_=O.reduce((Q,we)=>Q+we.currentAmount,0)+Se,Z=Math.max(0,D-_),ne=[];S.forEach(Q=>{const we=new Date(Q.startDate),te=new Date(w.getFullYear(),w.getMonth(),we.getDate());te<w&&te.setMonth(te.getMonth()+1),Math.ceil((te.getTime()-w.getTime())/(1e3*60*60*24))<=7&&ne.push({name:Q.name,amount:Q.emiAmount,dueDate:te,type:\"EMI\"})}),he.forEach(Q=>{if(Q.type===\"expense\"){const we=new Date(Q.startDate);let te;if(Q.frequency===\"monthly\")te=new Date(w.getFullYear(),w.getMonth(),we.getDate()),te<w&&te.setMonth(te.getMonth()+1);else if(Q.frequency===\"weekly\"){const Ce=(we.getDay()-w.getDay()+7)%7;te=new Date(w.getTime()+Ce*24*60*60*1e3),te<w&&te.setDate(te.getDate()+7)}else if(Q.frequency===\"custom\"){const Ce=Q.customIntervalDays||28,Pe=w.getTime()-we.getTime(),nt=Math.floor(Pe/(1e3*60*60*24))%Ce,Lt=Ce-nt;te=new Date(w.getTime()+Lt*24*60*60*1e3),Lt<=0&&(te=new Date(w.getTime()+Ce*24*60*60*1e3))}else return;const pe=Math.ceil((te.getTime()-w.getTime())/(1e3*60*60*24)),Je=Q.frequency===\"custom\"?2:7;pe<=Je&&pe>=0&&ne.push({name:Q.description||\"Subscription\",amount:Q.amount,dueDate:te,type:Q.frequency===\"custom\"?\"Recharge\":\"Bill\"})}}),ne.forEach(Q=>{const we=Z<Q.amount,te=Math.ceil((Q.dueDate.getTime()-w.getTime())/(1e3*60*60*24));if(we&&te<=3){const pe={id:`smart_breach_${Q.name}_${Q.dueDate.toISOString().split(\"T\")[0]}`,type:\"alert\",priority:\"high\",category:\"reminders\",title:\"Liquid Stability Warning\",message:`Critical: Your '${Q.name}' due on ${Q.dueDate.toLocaleDateString()} (₹${Q.amount}) exceeds current liquid cash (₹${Z}). Clear assets or increase bank balance immediately.`,timestamp:new Date,read:!1};mt(pe),J.error(pe.title,{description:pe.message,duration:1e4})}else if(te<=1){const pe={id:`reminder_${Q.name}_${Q.dueDate.toISOString().split(\"T\")[0]}`,type:\"reminder\",priority:\"medium\",category:\"reminders\",title:`${Q.type} Due Soon`,message:`Reminder: '${Q.name}' payment of ₹${Q.amount} is due tomorrow (${Q.dueDate.toLocaleDateString()}).`,timestamp:new Date,read:!1};mt(pe),J.info(pe.title,{description:pe.message})}})};j()},[p.length,v.length,N.length,O.length,h.notificationsEnabled,h.theme]),A.useEffect(()=>{zt()},[]),A.useEffect(()=>localStorage.setItem(lt.SETTINGS,JSON.stringify(h)),[h]),A.useEffect(()=>localStorage.setItem(lt.EXPENSES,JSON.stringify(p)),[p]),A.useEffect(()=>localStorage.setItem(lt.INCOMES,JSON.stringify(v)),[v]),A.useEffect(()=>localStorage.setItem(lt.DEBTS,JSON.stringify(N)),[N]),A.useEffect(()=>localStorage.setItem(lt.GOALS,JSON.stringify(O)),[O]),A.useEffect(()=>localStorage.setItem(lt.ACCOUNTS,JSON.stringify(L)),[L]),A.useEffect(()=>localStorage.setItem(lt.INVESTMENTS,JSON.stringify(P)),[P]),A.useEffect(()=>localStorage.setItem(lt.LIABILITIES,JSON.stringify(S)),[S]),A.useEffect(()=>localStorage.setItem(lt.RECURRING,JSON.stringify(he)),[he]),A.useEffect(()=>localStorage.setItem(lt.NOTIFICATIONS,JSON.stringify(fe)),[fe]),A.useEffect(()=>localStorage.setItem(lt.EMERGENCY_FUND,JSON.stringify(Se)),[Se]);const zt=async()=>{u(!0);try{const E=localStorage.getItem(lt.SETTINGS);if(E){const Me=JSON.parse(E);y(Me),ce(Me.theme)}const w=localStorage.getItem(lt.EXPENSES);w&&x(JSON.parse(w));const D=localStorage.getItem(lt.INCOMES);D&&f(JSON.parse(D));const _=localStorage.getItem(lt.DEBTS);_&&M(JSON.parse(_));const Z=localStorage.getItem(lt.GOALS);Z&&B(JSON.parse(Z));const ne=localStorage.getItem(lt.ACCOUNTS);ne&&R(JSON.parse(ne));const Q=localStorage.getItem(lt.INVESTMENTS);Q&&V(JSON.parse(Q));const we=localStorage.getItem(lt.LIABILITIES);we&&se(JSON.parse(we));const te=localStorage.getItem(lt.NOTIFICATIONS);if(te){const nt=JSON.parse(te).filter((Lt,Ft,Ua)=>Ua.findIndex(Xa=>Xa.id===Lt.id||Xa.message===Lt.message&&Xa.type===Lt.type)===Ft);ye(nt.slice(0,100))}const pe=localStorage.getItem(lt.EMERGENCY_FUND);pe&&qe(JSON.parse(pe));const Je=localStorage.getItem(lt.RECURRING);Je&&ve(JSON.parse(Je));const Ce=localStorage.getItem(lt.REMEMBERED_MOBILE);Ce&&(je(Ce),$(Ce),ue(!0));const Pe=localStorage.getItem(lt.DELETION_SCHEDULE);if(Pe){const Me=new Date(Pe).getTime();new Date().getTime()>=Me?(Na(),console.warn(\"Account purge executed based on schedule.\")):xe(Pe)}}catch(E){console.error(\"Error loading specific local data:\",E)}await bt(),!localStorage.getItem(\"finhub_subscription_migration_v3\")&&r&&(ut(),localStorage.setItem(\"finhub_subscription_migration_v3\",\"true\")),u(!1)},ut=()=>{x(j=>{let E=0;const w=j.map(D=>{const _=[\"other\",\"bills & utilities\",\"entertainment\",\"shopping\",\"\",void 0],Z=Yr(D.description);if(Z&&Z.category===\"Subscription\"){const ne=_.includes(D.category?.toLowerCase())||!D.category,Q=!D.isRecurring;if(ne||Q)return E++,{...D,category:\"Subscription\",isRecurring:!0}}return D});if(E>0){J.info(`Intelligence protocol: Identified and moved ${E} transactions to Subscriptions.`);const D=w.filter(Z=>Z.category===\"Subscription\"),_=new Map;D.forEach(Z=>{const ne=Z.description.toLowerCase().trim();(!_.has(ne)||new Date(Z.date)>new Date(_.get(ne).date))&&_.set(ne,Z)}),_.forEach((Z,ne)=>{he.some(we=>we.description?.toLowerCase().includes(ne)||ne.includes(we.description?.toLowerCase()||\"\"))||setTimeout(()=>{dt({type:\"expense\",description:Z.description,amount:Z.amount,category:\"Subscription\",accountId:Z.accountId,frequency:\"monthly\",startDate:Z.date,tags:[\"auto-migrated\"]})},100)})}return w})},bt=async()=>{try{try{await _e.processRecurring(r)}catch(te){console.error(\"Skip recurring process\",te)}const[j,E,w,D,_,Z,ne,Q,we]=await Promise.all([_e.getSettings(r).catch(()=>({success:!1,settings:void 0})),_e.getAccounts(r).catch(()=>({success:!1,accounts:[]})),_e.getExpenses(r).catch(()=>({success:!1,expenses:[]})),_e.getIncomes(r).catch(()=>({success:!1,incomes:[]})),_e.getDebts(r).catch(()=>({success:!1,debts:[]})),_e.getGoals(r).catch(()=>({success:!1,goals:[]})),_e.getLiabilities(r).catch(()=>({success:!1,liabilities:[]})),_e.getInvestments(r).catch(()=>({success:!1,investments:[]})),_e.getRecurring(r).catch(()=>({success:!1,recurring:[]}))]);ee(!1),G(\"online\"),j.success&&j.settings&&(y(te=>({...te,...j.settings,aiProvider:j.settings.aiProvider||te.aiProvider,apiKeys:{...te.apiKeys,...j.settings.apiKeys}})),ce(j.settings.theme)),E.success&&R(E.accounts||[]),w.success&&x(w.expenses||[]),D.success&&f(D.incomes||[]),_.success&&M(_.debts||[]),Z.success&&B(Z.goals||[]),ne.success&&se(ne.liabilities||[]),Q.success&&V(Q.investments||[]),we.success&&ve(we.recurring||[]),J.success(\"Sync complete\")}catch(j){console.error(\"API Sync failed, using local data\",j),ee(!0),G(\"offline\")}},la=async()=>{g(!0),await bt(),g(!1)},ce=j=>{if(j===\"system\"){const E=window.matchMedia(\"(prefers-color-scheme: dark)\").matches;document.documentElement.classList.toggle(\"dark\",E)}else document.documentElement.classList.toggle(\"dark\",j===\"dark\")},Ee=async j=>{$(j);const E=St.some(w=>w.mobile===j)||localStorage.getItem(`finhub_user_${j}`)!==null;return T(!0),E},He=async(j,E=!1)=>{rt({message:\"Validating PIN\",subMessage:\"Verifying secure node access...\"}),Y(\"authenticating\"),await new Promise(_=>setTimeout(_,2e3));const w=St.find(_=>_.mobile===re&&_.pin===j);let D=null;if(w)D={id:w.userId,mobile:w.mobile,name:w.name};else{const _=localStorage.getItem(`finhub_user_${re}`);if(_){const Z=JSON.parse(_);Z.pin===j&&(D={id:Z.userId,mobile:Z.mobile,name:Z.name})}}return D?(ge(D),localStorage.setItem(lt.AUTH,JSON.stringify(D)),rt({message:\"Handshake Success\",subMessage:\"Synchronizing decrypted ledger...\"}),Y(\"authenticated\"),T(!1),de&&(await It(),J.success(\"Your account deletion request has been canceled. Welcome back!\")),E&&(localStorage.setItem(lt.REMEMBERED_MOBILE,re),je(re),ue(!0)),!0):(rt(void 0),Y(\"guest\"),!1)},yt=async j=>{$(j);const E=Math.floor(1e3+Math.random()*9e3).toString();return Ie(E),console.log(`[AUTH-DEBUG] Mock OTP for ${j}: ${E}`),J.info(\"Verification code sent\",{description:`Dev Mode: Use ${E} (Simulated SMS)`}),!0},Ut=async(j,E)=>E===\"0000\"||E===Ke,Oa=async(j,E)=>{const w=localStorage.getItem(`finhub_user_${j}`);if(w){const _=JSON.parse(w);return _.pin=E,localStorage.setItem(`finhub_user_${j}`,JSON.stringify(_)),J.success(\"PIN reset successfully\"),!0}const D=St.findIndex(_=>_.mobile===j);if(D!==-1){const _={...St[D],pin:E};return localStorage.setItem(`finhub_user_${j}`,JSON.stringify(_)),J.success(\"Demo user PIN updated locally\"),!0}return!1},_a=async(j,E,w,D=!1)=>{rt({message:\"Creating Node\",subMessage:\"Initializing secure identity protocols...\"}),Y(\"authenticating\"),await new Promise(ne=>setTimeout(ne,2e3));const _={id:`user_${Date.now()}`,mobile:j,name:w,pin:E};localStorage.setItem(`finhub_user_${j}`,JSON.stringify(_));const Z={id:_.id,mobile:_.mobile,name:_.name};return ge(Z),localStorage.setItem(lt.AUTH,JSON.stringify(Z)),rt({message:\"Handshake Success\",subMessage:\"Synchronizing decrypted ledger...\"}),Y(\"authenticated\"),T(!1),D&&(localStorage.setItem(lt.REMEMBERED_MOBILE,j),je(j),ue(!0)),!0},ba=()=>{Y(\"guest\"),ge(null),Ie(null),localStorage.removeItem(lt.AUTH),le||$(\"\")},ma=()=>{Y(\"guest\"),ge(null),$(\"\"),Ie(null),localStorage.removeItem(lt.AUTH),localStorage.removeItem(lt.REMEMBERED_MOBILE),je(\"\"),ue(!1)},ja=async()=>{const j=new Date;j.setDate(j.getDate()+30);const E=j.toISOString();xe(E),localStorage.setItem(lt.DELETION_SCHEDULE,E),J.warning(\"Account scheduled for deletion in 30 days.\"),ba()},It=async()=>{xe(null),localStorage.removeItem(lt.DELETION_SCHEDULE)},Na=()=>{Object.values(lt).forEach(j=>{localStorage.removeItem(j)}),x([]),f([]),M([]),B([]),R([]),V([]),se([]),ve([]),ye([]),qe(0),xe(null),Y(\"guest\"),ge(null),J.info(\"Session purged successfully.\")};A.useEffect(()=>{const j=localStorage.getItem(lt.AUTH);if(j)try{const E=JSON.parse(j);E&&E.mobile&&($(E.mobile),Y(\"guest\"))}catch(E){console.error(\"Failed to parse stored auth\",E),localStorage.removeItem(lt.AUTH)}},[]);const Gt=async j=>{const E={...h,...j};y(E),j.theme&&ce(j.theme);try{const w=await _e.updateSettings(r,j);if(w.success)y(D=>({...D,...w.settings,aiProvider:w.settings.aiProvider||D.aiProvider,apiKeys:{...D.apiKeys,...w.settings.apiKeys}}));else throw new Error(w.error)}catch(w){console.error(\"Failed to sync settings\",w),J.error(\"Settings saved locally only\")}},kt=async(j,E)=>{try{const w=await _e.updateRecurring(r,j,E);if(w.success){const D=w.recurring;if(ve(_=>_.map(Z=>Z.id===j?D:Z)),J.success(\"Recurring transaction updated\"),D.startDate){console.log(\"[Backfill Debug Update] Analysis starting for:\",D.description||D.source),J.info(\"Analyzing transaction history...\");const _=new Date,Z=`${_.getFullYear()}-${String(_.getMonth()+1).padStart(2,\"0\")}-${String(_.getDate()).padStart(2,\"0\")}`,ne=D.startDate.split(\"T\")[0];if(console.log(\"[Backfill Debug Update] nowStr:\",Z,\"startStr:\",ne),ne<=Z&&D.type){const[Q,we,te]=ne.split(\"-\").map(Number);let pe=new Date(Q,we-1,te,12,0,0);const Je=[];let Ce=0;for(;Ce<1200;){const nt=pe.getFullYear(),Lt=pe.getMonth(),Ft=pe.getDate();if(`${nt}-${String(Lt+1).padStart(2,\"0\")}-${String(Ft).padStart(2,\"0\")}`>Z)break;switch(Je.push(new Date(pe)),D.frequency){case\"daily\":pe.setDate(pe.getDate()+1);break;case\"weekly\":pe.setDate(pe.getDate()+7);break;case\"monthly\":const Xa=te;pe.setMonth(pe.getMonth()+1),pe.getDate()<Xa&&pe.getMonth()===(Lt+2)%12&&pe.setDate(0);break;case\"yearly\":pe.setFullYear(pe.getFullYear()+1);break;case\"custom\":pe.setDate(pe.getDate()+(D.customIntervalDays||30));break;default:pe.setMonth(pe.getMonth()+1)}Ce++}console.log(\"[Backfill Debug Update] Generated\",Je.length,\"due dates\");const Pe=Number(D.amount),Me=Je.filter(nt=>{const Lt=`${nt.getFullYear()}-${String(nt.getMonth()+1).padStart(2,\"0\")}-${String(nt.getDate()).padStart(2,\"0\")}`;return![...p,...v].some(Ua=>{const Xa=(Ua.date||\"\").split(\"T\")[0],ps=Number(Ua.amount),yn=Math.abs(ps-Pe)<.01;return Xa===Lt&&yn})});console.log(`[Backfill Debug Update] Total Expected: ${Je.length}, Missing: ${Me.length}`),Me.length>0?(console.log(\"[Backfill Debug Update] Triggering popup request for\",Me.length,\"dates\"),tt({count:Me.length,dates:Me,recurring:D})):(console.log(\"[Backfill Debug Update] All expected entries already exist in history.\"),J.success(\"Transaction history is already up to date.\"))}else console.log(\"[Backfill Debug Update] Skip: start date is in the future or invalid type.\")}}}catch(w){console.error(\"Error updating recurring transaction:\",w),ve(D=>D.map(_=>_.id===j?{..._,...E}:_)),J.warning(\"Updated locally\")}},dt=async j=>{try{console.log(\"[Backfill Debug] createRecurringTransaction called with:\",j);const E=await _e.createRecurring(r,j);if(E.success){const w=E.recurring;if(ve(D=>[...D,w]),J.success(\"Recurring transaction created\"),w.startDate){console.log(\"[Backfill Debug] Analysis starting for:\",w.description||w.source),J.info(\"Analyzing transaction history...\");const D=new Date,_=`${D.getFullYear()}-${String(D.getMonth()+1).padStart(2,\"0\")}-${String(D.getDate()).padStart(2,\"0\")}`,Z=w.startDate.split(\"T\")[0];if(console.log(\"[Backfill Debug] nowStr:\",_,\"startStr:\",Z),Z<=_&&w.type){const[ne,Q,we]=Z.split(\"-\").map(Number);let te=new Date(ne,Q-1,we,12,0,0);const pe=[];let Je=0;for(;Je<1200;){const Me=te.getFullYear(),nt=te.getMonth(),Lt=te.getDate();if(`${Me}-${String(nt+1).padStart(2,\"0\")}-${String(Lt).padStart(2,\"0\")}`>_)break;switch(pe.push(new Date(te)),w.frequency){case\"daily\":te.setDate(te.getDate()+1);break;case\"weekly\":te.setDate(te.getDate()+7);break;case\"monthly\":const Ua=we;te.setMonth(te.getMonth()+1),te.getDate()<Ua&&te.getMonth()===(nt+2)%12&&te.setDate(0);break;case\"yearly\":te.setFullYear(te.getFullYear()+1);break;case\"custom\":te.setDate(te.getDate()+(w.customIntervalDays||30));break;default:te.setMonth(te.getMonth()+1)}Je++}console.log(\"[Backfill Debug] Generated\",pe.length,\"due dates\");const Ce=Number(w.amount),Pe=pe.filter(Me=>{const nt=`${Me.getFullYear()}-${String(Me.getMonth()+1).padStart(2,\"0\")}-${String(Me.getDate()).padStart(2,\"0\")}`;return![...p,...v].some(Ft=>{const Ua=(Ft.date||\"\").split(\"T\")[0],Xa=Number(Ft.amount),ps=Math.abs(Xa-Ce)<.01;return Ua===nt&&ps})});console.log(`[Backfill Debug] Total Expected: ${pe.length}, Missing: ${Pe.length}`),Pe.length>0?(console.log(\"[Backfill Debug] Triggering popup request for\",Pe.length,\"dates\"),tt({count:Pe.length,dates:Pe,recurring:w})):(console.log(\"[Backfill Debug] All expected entries already exist in history.\"),J.success(\"Transaction history is already up to date.\"))}else console.log(\"[Backfill Debug] Skip: start date is in the future or invalid type.\")}}}catch(E){console.error(\"Error creating recurring transaction:\",E);const w={id:`temp_${Date.now()}`,...j,createdAt:new Date().toISOString()};ve(D=>[...D,w]),J.warning(\"Offline: Created locally\")}},ds=async()=>{if(!De)return;const{count:j,dates:E,recurring:w}=De,D=J.loading(`Generating ${j} entries...`),_=[],Z=[];let ne=0;const Q=L.find(te=>te.id===w.accountId),we={};for(const te of E){const pe=`${te.getFullYear()}-${String(te.getMonth()+1).padStart(2,\"0\")}-${String(te.getDate()).padStart(2,\"0\")}`,Je={description:w.description,source:w.source,amount:w.amount,category:w.category,date:pe,tags:[...w.tags||[],\"auto-backfill\"],accountId:w.accountId,isRecurring:!0,recurringId:w.id};try{if(w.type===\"expense\"){const Ce=await _e.createExpense(r,Je);Ce.success&&(Z.push(Ce.expense),Q&&(Q.type===\"credit_card\"?ne+=Ce.expense.amount:ne-=Ce.expense.amount),w.goalId&&(we[w.goalId]=(we[w.goalId]||0)+Ce.expense.amount))}else{const Ce=await _e.createIncome(r,Je);Ce.success&&(_.push(Ce.income),Q&&(Q.type===\"credit_card\"?ne-=Ce.income.amount:ne+=Ce.income.amount))}await new Promise(Ce=>setTimeout(Ce,50))}catch(Ce){console.error(`Failed to create backfill for ${pe}`,Ce)}}_.length>0&&f(te=>[...te,..._]),Z.length>0&&x(te=>[...te,...Z]);for(const[te,pe]of Object.entries(we)){const Je=O.find(Ce=>Ce.id===te);if(Je){const Ce=Je.currentAmount+pe;try{await _e.updateGoal(r,te,{currentAmount:Ce}),B(Pe=>Pe.map(Me=>Me.id===te?{...Me,currentAmount:Ce}:Me))}catch(Pe){console.error(\"Failed to update goal after backfill\",Pe)}}}if(Q&&ne!==0){const te=Q.balance+ne;try{await _e.updateAccount(r,Q.id,{balance:te}),R(pe=>pe.map(Je=>Je.id===Q.id?{...Je,balance:te}:Je))}catch(pe){console.error(\"Failed to update account balance after backfill\",pe)}}J.dismiss(D),J.success(`Success: ${j} entries generated`),tt(null)},Sa=async j=>{try{(await _e.deleteRecurring(r,j)).success&&(ve(w=>w.filter(D=>D.id!==j)),J.success(\"Recurring transaction deleted\"))}catch(E){console.error(\"Error deleting recurring transaction:\",E),ve(w=>w.filter(D=>D.id!==j)),J.warning(\"Deleted locally\")}},Aa=async()=>{try{const j=await _e.processRecurring(r);j.success&&(J.success(`Processed ${j.count} transactions`),await bt())}catch(j){console.error(\"Error processing recurring transactions:\",j),J.error(\"Failed to process recurring transactions\")}},un=async j=>{try{const E=L.reduce((te,pe)=>te+(pe.type!==\"credit_card\"?pe.balance:0),0),w=O.reduce((te,pe)=>te+pe.currentAmount,0)+Se,D=S.reduce((te,pe)=>te+pe.emiAmount,0),_=Math.max(0,E-w-D);let Z=j.amount;if(Z>_){const te=Z-_;console.warn(`⚠️ Leakage Detected! Deficit: ${te}. Initiating Shadow Wallet Protocol.`);let pe=te;const Je=[];O.forEach(Me=>{const nt=Me.type||\"growth\";let Lt=1;nt===\"stability\"&&(Lt=2),nt===\"protection\"&&(Lt=3),Me.currentAmount>0&&Je.push({id:Me.id,type:\"goal\",currentAmount:Me.currentAmount,priority:Lt,name:Me.name})}),Se>0&&Je.push({id:\"emergency-fund\",type:\"emergency\",currentAmount:Se,priority:3,name:\"Emergency Fund\"}),Je.sort((Me,nt)=>Me.priority-nt.priority);const Ce=[],Pe=[];for(const Me of Je){if(pe<=0)break;const nt=Math.min(Me.currentAmount,pe);if(pe-=nt,Me.type===\"goal\"){const Lt=Me.currentAmount-nt;Ce.push(ht(Me.id,{currentAmount:Lt,status:\"leaking\"})),Pe.push({id:`leak_${Me.id}_${new Date().toISOString().split(\"T\")[0]}`,type:\"alert\",priority:\"medium\",category:\"transactions\",title:\"Shadow Wallet Leakage\",message:`₹${nt} spent reduced your '${Me.name}' reserve.`,timestamp:new Date,read:!1})}else Me.type===\"emergency\"&&(Ce.push(Promise.resolve(qe(Lt=>Lt-nt))),Pe.push({id:`leak_emergency_${new Date().toISOString().split(\"T\")[0]}`,type:\"alert\",priority:\"medium\",category:\"transactions\",title:\"Emergency Fund Alert\",message:`Warning: ₹${nt} withdrawn from Emergency Fund to cover spending.`,timestamp:new Date,read:!1}))}await Promise.all(Ce),Pe.length>0&&(mt(Pe),Pe.forEach(Me=>J.error(Me.title,{description:Me.message})))}const ne=L.find(te=>te.id===j.accountId);let Q={...j};if(ne?.type===\"credit_card\"){const te=ne.serviceChargePercentage||0;if(te>0){const nt=j.amount*te/100;Q.serviceChargeAmount=nt,console.log(`Credit Service Charge: ${nt}`)}const pe=ne.creditLimit||0,Je=ne.safeLimitPercentage||30,Ce=pe*Je/100,Me=Math.abs(ne.balance)+j.amount;if(Me>Ce&&pe>0)if(j.isIncomeGenerating)J.info(\"Strategic Credit Utilization\",{description:\"Limit exceeded, but marked as income-generating. Proceed with caution.\"});else{J.warning(\"High Interest Risk Detected\",{description:`This transaction puts your CC usage at ${(Me/pe*100).toFixed(1)}%, exceeding your ${Je}% safe limit with no income-justification.`,duration:6e3});const nt={id:`cc_limit_${ne.id}_${new Date().toISOString().split(\"T\")[0]}`,type:\"alert\",priority:\"medium\",category:\"transactions\",title:\"Credit Stability Breach\",message:`Card '${ne.name}' usage protocol exceeded ${Je}% threshold. Avoid non-essential outflow.`,timestamp:new Date,read:!1};mt(nt)}}if(!Q.category||Q.category===\"Other\"){const te=Yr(Q.description);te&&te.category===\"Subscription\"&&(Q.category=\"Subscription\",Q.tags=Array.from(new Set([...Q.tags||[],\"auto-detected\"])))}const we=await _e.createExpense(r,Q);if(we.success){if(x(te=>[...te,we.expense]),ne){const te=j.amount+(Q.serviceChargeAmount||0),pe=ne.type===\"credit_card\"?ne.balance+te:ne.balance-te;await Ye(ne.id,{balance:pe})}if(j.isRecurring){const te={type:\"expense\",description:j.description,amount:j.amount,category:j.category,accountId:j.accountId,frequency:j.frequency||\"monthly\",customIntervalDays:j.customIntervalDays,startDate:j.date,endDate:j.endDate,tags:j.tags};await dt(te)}else if(J.success(\"Expense added!\"),bu(j.description)&&!j.isRecurring){const te={id:`verify_sub_${we.expense.id}`,type:\"insight\",priority:\"medium\",category:\"transactions\",title:\"Automate Payment?\",message:`Detected '${j.description}' as a subscription. Add to cyclical routine?`,timestamp:new Date,read:!1,action:{type:\"verify_subscription\",label:\"Automate\",status:\"pending\",payload:{id:we.expense.id,description:j.description,amount:j.amount,category:j.category,accountId:j.accountId,date:j.date}}};mt(te)}}}catch(E){console.error(\"Create expense failed\",E);const w={id:`temp_${Date.now()}`,...j,createdAt:new Date().toISOString()};x(D=>[...D,w]),J.warning(\"Added in offline mode\")}},nn=async(j,E)=>{try{const w=await _e.updateExpense(r,j,E);if(w.success){const D=p.find(_=>_.id===j);if(D){const _=L.find(Q=>Q.id===D.accountId);if(_){const Q=D.amount+(D.serviceChargeAmount||0),we=_.type===\"credit_card\"?_.balance-Q:_.balance+Q;await Ye(_.id,{balance:we})}const Z=w.expense,ne=L.find(Q=>Q.id===Z.accountId);if(ne){const Q=Z.amount+(Z.serviceChargeAmount||0),we=ne.type===\"credit_card\"?ne.balance+Q:ne.balance-Q;await Ye(ne.id,{balance:we})}E.isRecurring?D.recurringId?await kt(D.recurringId,{amount:E.amount,description:E.description,category:E.category,tags:E.tags,frequency:E.frequency,customIntervalDays:E.customIntervalDays,endDate:E.endDate}):await dt({type:\"expense\",description:E.description,amount:E.amount,category:E.category,accountId:E.accountId,frequency:E.frequency||\"monthly\",customIntervalDays:E.customIntervalDays,startDate:D.date,endDate:E.endDate,tags:E.tags}):D.recurringId&&await Sa(D.recurringId)}x(_=>_.map(Z=>Z.id===j?w.expense:Z)),J.success(\"Expense updated\")}}catch{x(D=>D.map(_=>_.id===j?{..._,...E}:_)),J.warning(\"Updated in offline mode\")}},Fa=async j=>{try{if((await _e.deleteExpense(r,j)).success){const w=p.find(D=>D.id===j);if(w){const D=L.find(_=>_.id===w.accountId);if(D){const _=w.amount+(w.serviceChargeAmount||0),Z=D.type===\"credit_card\"?D.balance-_:D.balance+_;await Ye(D.id,{balance:Z})}}x(D=>D.filter(_=>_.id!==j)),J.success(\"Expense deleted\")}}catch{x(w=>w.filter(D=>D.id!==j)),J.warning(\"Deleted in offline mode\")}},Da=async j=>{try{const E=await _e.createIncome(r,j);if(E.success){f(D=>[...D,E.income]);const w=L.find(D=>D.id===j.accountId);if(w){const D=w.type===\"credit_card\"?w.balance-j.amount:w.balance+j.amount;await Ye(w.id,{balance:D})}if(j.isRecurring){const D={type:\"income\",source:j.source,amount:j.amount,accountId:j.accountId,frequency:j.frequency||\"monthly\",customIntervalDays:j.customIntervalDays,startDate:j.date,endDate:j.endDate,tags:j.tags};await dt(D)}else J.success(\"Income added!\")}}catch{const w={id:`temp_${Date.now()}`,...j,createdAt:new Date().toISOString()};f(D=>[...D,w]),J.warning(\"Added in offline mode\")}},Ue=async(j,E)=>{try{const w=await _e.updateIncome(r,j,E);if(w.success){const D=v.find(_=>_.id===j);if(D){const _=L.find(Q=>Q.id===D.accountId);if(_){const Q=_.type===\"credit_card\"?_.balance+D.amount:_.balance-D.amount;await Ye(_.id,{balance:Q})}const Z=w.income,ne=L.find(Q=>Q.id===Z.accountId);if(ne){const Q=ne.type===\"credit_card\"?ne.balance-Z.amount:ne.balance+Z.amount;await Ye(ne.id,{balance:Q})}E.isRecurring?D.recurringId?await kt(D.recurringId,{amount:E.amount,source:E.source,description:E.source,category:E.category,tags:E.tags,frequency:E.frequency,customIntervalDays:E.customIntervalDays,endDate:E.endDate}):await dt({type:\"income\",description:E.source,source:E.source,amount:E.amount,category:E.category,accountId:E.accountId,frequency:E.frequency||\"monthly\",customIntervalDays:E.customIntervalDays,startDate:D.date,endDate:E.endDate,tags:E.tags}):D.recurringId&&await Sa(D.recurringId)}f(_=>_.map(Z=>Z.id===j?w.income:Z)),J.success(\"Income updated\")}}catch{f(D=>D.map(_=>_.id===j?{..._,...E}:_)),J.warning(\"Updated in offline mode\")}},wt=async j=>{try{if((await _e.deleteIncome(r,j)).success){const w=v.find(D=>D.id===j);if(w){const D=L.find(_=>_.id===w.accountId);if(D){const _=D.type===\"credit_card\"?D.balance+w.amount:D.balance-w.amount;await Ye(D.id,{balance:_})}}f(D=>D.filter(_=>_.id!==j)),J.success(\"Income deleted\")}}catch{f(w=>w.filter(D=>D.id!==j)),J.warning(\"Deleted in offline mode\")}},ie=async j=>{try{const E=await _e.createDebt(r,j);if(E.success){M(D=>[...D,E.debt]);const w=L.find(D=>D.id===j.accountId);if(w){const D=j.type===\"borrowed\"?j.amount:-j.amount,_=w.type===\"credit_card\"?w.balance-D:w.balance+D;await Ye(w.id,{balance:_})}j.isRecurring&&await dt({type:\"expense\",description:`Debt: ${j.personName} (${j.type})`,amount:j.amount,category:\"Debt\",accountId:j.accountId,frequency:j.frequency||\"monthly\",startDate:j.date,tags:[...j.tags||[],\"debt\"]}),J.success(\"Debt created\")}}catch{const w={id:`temp_${Date.now()}`,...j,status:\"pending\",createdAt:new Date().toISOString()};M(D=>[...D,w]),J.warning(\"Added in offline mode\")}},Le=async(j,E)=>{try{const w=await _e.updateDebt(r,j,E);if(w.success){const D=N.find(_=>_.id===j);if(D){const _=L.find(Q=>Q.id===D.accountId);if(_){const Q=D.type===\"borrowed\"?-D.amount:D.amount,we=_.type===\"credit_card\"?_.balance-Q:_.balance+Q;await Ye(_.id,{balance:we})}const Z=w.debt,ne=L.find(Q=>Q.id===Z.accountId);if(ne){const Q=Z.type===\"borrowed\"?Z.amount:-Z.amount,we=ne.type===\"credit_card\"?ne.balance-Q:ne.balance+Q;await Ye(ne.id,{balance:we})}E.isRecurring&&(D.recurringId?await kt(D.recurringId,{amount:E.amount,description:`Debt: ${E.personName} (${E.type})`}):await dt({type:\"expense\",description:`Debt: ${E.personName} (${E.type})`,amount:E.amount,category:\"Debt\",accountId:E.accountId,frequency:E.frequency||\"monthly\",startDate:E.date,tags:[...E.tags||[],\"debt\"]}))}M(_=>_.map(Z=>Z.id===j?w.debt:Z)),J.success(\"Debt updated\")}}catch{M(D=>D.map(_=>_.id===j?{..._,...E}:_)),J.warning(\"Updated in offline mode\")}},ft=async j=>{try{if((await _e.deleteDebt(r,j)).success){const w=N.find(D=>D.id===j);if(w){const D=L.find(_=>_.id===w.accountId);if(D){const _=w.type===\"borrowed\"?-w.amount:w.amount,Z=D.type===\"credit_card\"?D.balance-_:D.balance+_;await Ye(D.id,{balance:Z})}}M(D=>D.filter(_=>_.id!==j)),J.success(\"Debt deleted\")}}catch{M(w=>w.filter(D=>D.id!==j)),J.warning(\"Deleted in offline mode\")}},at=async j=>{try{const E=await _e.updateDebt(r,j,{status:\"settled\"});if(E.success){const w=N.find(D=>D.id===j);if(w&&w.status!==\"settled\"){const D=L.find(_=>_.id===w.accountId);if(D){const _=w.type===\"borrowed\"?-w.amount:w.amount,Z=D.type===\"credit_card\"?D.balance-_:D.balance+_;await Ye(D.id,{balance:Z});const ne={description:`Debt Settlement: ${w.personName}`,amount:w.amount,category:\"Transfer\",date:new Date().toISOString().split(\"T\")[0],tags:[\"debt-settlement\"],accountId:w.accountId};if(w.type===\"borrowed\"){const Q=await _e.createExpense(r,ne);Q.success&&x(we=>[...we,Q.expense])}else{const Q=await _e.createIncome(r,ne);Q.success&&f(we=>[...we,Q.income])}}}M(D=>D.map(_=>_.id===j?E.debt:_)),J.success(\"🎉 Debt settled! Great job!\"),ji({particleCount:150,spread:100,origin:{y:.6}})}}catch{M(w=>w.map(D=>D.id===j?{...D,status:\"settled\"}:D)),J.warning(\"Marked as settled locally\")}},Bt=async()=>{let j=0;const E=[];for(const w of p)if(w.category!==\"Subscription\"&&bu(w.description)){const D=Yr(w.description);D&&D.category===\"Subscription\"&&(E.push(nn(w.id,{category:\"Subscription\",tags:[...new Set([...w.tags,\"auto-migrated\",\"subscription\"])]})),j++)}return E.length>0?(await Promise.all(E),J.success(`Migrated ${j} transactions to Subscriptions`)):J.info(\"No subscription transactions found to migrate\"),{count:j}},Mt=async()=>{let j=0;const E=[],w=new Set,D=new Set;p.forEach(ne=>{const Q=`${ne.date}-${ne.description?.toLowerCase().trim()}-${ne.amount}`,we=!ne.description||ne.description.trim()===\"\"||ne.amount===0,te=w.has(Q);we||te?D.add(ne.id):w.add(Q)});const _=new Map;p.forEach(ne=>{if(D.has(ne.id))return;if(ne.category===\"Subscription\"||ne.isRecurring||bu(ne.description)){const we=new Date(ne.date),te=`${ne.description.toLowerCase().trim()}-${we.getFullYear()}-${we.getMonth()}`;_.has(te)||_.set(te,[]),_.get(te).push(ne)}}),_.forEach(ne=>{if(ne.length>1){ne.sort((Q,we)=>Q.isRecurring!==we.isRecurring?Q.isRecurring?-1:1:new Date(we.date).getTime()-new Date(Q.date).getTime());for(let Q=1;Q<ne.length;Q++)D.add(ne[Q].id)}}),D.forEach(ne=>{E.push(Fa(ne)),j++});const Z=new Set;for(const ne of v){const Q=`${ne.date}-${ne.source?.toLowerCase().trim()}-${ne.amount}`,we=!ne.source||ne.source.trim()===\"\"||ne.amount===0,te=Z.has(Q);we||te?(E.push(wt(ne.id)),j++):Z.add(Q)}return E.length>0?(await Promise.all(E),J.success(`Cleaned up ${j} entries (Duplicates & Density Checks)`)):J.info(\"Logs are clean. No redundancies found.\"),{count:j}},Ct=async j=>{try{const E=await _e.createGoal(r,j);E.success&&(B(w=>[...w,E.goal]),j.monthly_contribution>0&&await dt({type:\"expense\",description:`Goal Contribution: ${E.goal.name}`,amount:j.monthly_contribution,category:\"Transfer\",accountId:j.accountId||\"none\",frequency:\"monthly\",startDate:j.startDate||E.goal.createdAt.split(\"T\")[0],tags:[\"goal\",\"contribution\",E.goal.name.toLowerCase()],goalId:E.goal.id}),J.success(\"Goal created\"))}catch{const w={id:`temp_${Date.now()}`,...j,createdAt:new Date().toISOString()};B(D=>[...D,w]),J.warning(\"Created in offline mode\")}},ht=async(j,E)=>{try{const w=await _e.updateGoal(r,j,E);if(w.success){const D=O.find(_=>_.id===j);if(D){if((w.goal.monthly_contribution||0)>0){const _=he.find(Z=>Z.goalId===j);_?await kt(_.id,{amount:w.goal.monthly_contribution||0,description:`Goal Contribution: ${w.goal.name}`}):await dt({type:\"expense\",description:`Goal Contribution: ${w.goal.name}`,amount:w.goal.monthly_contribution||0,category:\"Transfer\",accountId:w.goal.accountId||\"none\",frequency:\"monthly\",startDate:w.goal.startDate||D.createdAt?.split(\"T\")[0]||new Date().toISOString().split(\"T\")[0],tags:[\"goal\",\"contribution\",w.goal.name.toLowerCase()],goalId:w.goal.id})}else if(D.monthly_contribution&&D.monthly_contribution>0){const _=he.find(Z=>Z.goalId===j);_&&await Sa(_.id)}}B(_=>_.map(Z=>Z.id===j?w.goal:Z)),w.goal.currentAmount>=w.goal.targetAmount?(J.success(`🎉 Goal \"${w.goal.name}\" completed!`),ji({particleCount:200,spread:120,origin:{y:.5}})):J.success(\"Goal updated\")}}catch{B(D=>D.map(_=>_.id===j?{..._,...E}:_)),J.warning(\"Updated locally\")}},Yt=async j=>{try{(await _e.deleteGoal(r,j)).success&&(B(w=>w.filter(D=>D.id!==j)),J.success(\"Goal deleted\"))}catch{B(w=>w.filter(D=>D.id!==j)),J.warning(\"Deleted locally\")}},Rt=async j=>{try{const E=await _e.createAccount(r,j);E.success&&(R(w=>[...w,E.account]),J.success(\"Account created\"))}catch{const w={id:`temp_${Date.now()}`,...j,createdAt:new Date().toISOString()};R(D=>[...D,w]),J.warning(\"Created locally\")}},Ye=async(j,E)=>{try{const w=await _e.updateAccount(r,j,E);w.success&&(R(D=>D.map(_=>_.id===j?w.account:_)),J.success(\"Account updated\"))}catch{R(D=>D.map(_=>_.id===j?{..._,...E}:_)),J.warning(\"Updated locally\")}},$a=async j=>{try{(await _e.deleteAccount(r,j)).success&&(R(w=>w.filter(D=>D.id!==j)),J.success(\"Account deleted\"))}catch{R(w=>w.filter(D=>D.id!==j)),J.warning(\"Deleted locally\")}},na=async j=>{try{const E=await _e.createLiability(r,j);E.success&&(se(w=>[...w,E.liability]),J.success(\"Liability created\"),E.liability.emiAmount>0&&await dt({type:\"expense\",description:`EMI: ${E.liability.name}`,amount:E.liability.emiAmount,category:\"EMI\",accountId:E.liability.accountId||\"none\",frequency:\"monthly\",startDate:E.liability.startDate,tags:[\"emi\",\"liability\",E.liability.name.toLowerCase()],liabilityId:E.liability.id}))}catch{const w={id:`temp_${Date.now()}`,...j,principal:Number(j.principal),outstanding:Number(j.outstanding),interestRate:Number(j.interestRate),emiAmount:Number(j.emiAmount),tenure:Number(j.tenure),createdAt:new Date().toISOString()};se(D=>[...D,w]),J.warning(\"Created locally\")}},Qt=async(j,E)=>{try{const w=await _e.updateLiability(r,j,E);if(w.success){const D=S.find(_=>_.id===j);if(D){if(w.liability.emiAmount>0){const _=he.find(Z=>Z.liabilityId===j);_?await kt(_.id,{amount:w.liability.emiAmount,description:`EMI: ${w.liability.name}`}):await dt({type:\"expense\",description:`EMI: ${w.liability.name}`,amount:w.liability.emiAmount,category:\"EMI\",accountId:w.liability.accountId||\"none\",frequency:\"monthly\",startDate:w.liability.startDate,tags:[\"emi\",\"liability\",w.liability.name.toLowerCase()],liabilityId:w.liability.id})}else if(D.emiAmount>0){const _=he.find(Z=>Z.liabilityId===j);_&&await Sa(_.id)}}se(_=>_.map(Z=>Z.id===j?w.liability:Z)),J.success(\"Liability updated\")}}catch{se(D=>D.map(_=>_.id===j?{..._,...E}:_)),J.warning(\"Updated locally\")}},sa=async j=>{try{(await _e.deleteLiability(r,j)).success&&(se(w=>w.filter(D=>D.id!==j)),J.success(\"Liability deleted\"))}catch{se(w=>w.filter(D=>D.id!==j)),J.warning(\"Deleted locally\")}},dn=async(j,E)=>{try{const w=await _e.createInvestment(r,j);if(w.success){if(V(D=>[...D,w.investment]),E&&E!==\"none\"){const D=L.find(_=>_.id===E);if(D){const _=j.buyPrice*j.quantity;await Ye(E,{balance:D.balance-_});const Z={description:`Asset Purchase: ${j.symbol} (${j.quantity} units)`,amount:_,category:\"Transfer\",date:j.purchaseDate||new Date().toISOString().split(\"T\")[0],tags:[\"investment\",\"principal\",j.symbol],accountId:E},ne=await _e.createExpense(r,Z);ne.success&&x(Q=>[...Q,ne.expense])}}w.investment.type===\"sip\"&&await dt({type:\"expense\",description:`SIP: ${w.investment.symbol} (${w.investment.name})`,amount:w.investment.buyPrice*w.investment.quantity,category:\"Investment\",accountId:E||\"none\",frequency:\"monthly\",startDate:w.investment.purchaseDate,tags:[\"sip\",\"investment\",w.investment.symbol.toLowerCase()],investmentId:w.investment.id}),J.success(\"Investment created\")}}catch{const D={id:`temp_${Date.now()}`,...j,createdAt:new Date().toISOString()};V(_=>[..._,D]),J.warning(\"Created locally\")}},fs=async(j,E)=>{try{const w=await _e.updateInvestment(r,j,E);if(w.success){const D=P.find(_=>_.id===j);if(D){if(w.investment.type===\"sip\"){const _=he.find(Z=>Z.investmentId===j);_?await kt(_.id,{amount:w.investment.buyPrice*w.investment.quantity,description:`SIP: ${w.investment.symbol} (${w.investment.name})`}):await dt({type:\"expense\",description:`SIP: ${w.investment.symbol} (${w.investment.name})`,amount:w.investment.buyPrice*w.investment.quantity,category:\"Investment\",accountId:w.investment.accountId||\"none\",frequency:\"monthly\",startDate:w.investment.purchaseDate,tags:[\"sip\",\"investment\",w.investment.symbol.toLowerCase()],investmentId:w.investment.id})}else if(D.type===\"sip\"){const _=he.find(Z=>Z.investmentId===j);_&&await Sa(_.id)}}V(_=>_.map(Z=>Z.id===j?w.investment:Z)),J.success(\"Investment updated\")}}catch{V(D=>D.map(_=>_.id===j?{..._,...E}:_)),J.warning(\"Updated locally\")}},ao=async j=>{try{(await _e.deleteInvestment(r,j)).success&&(V(w=>w.filter(D=>D.id!==j)),J.success(\"Investment deleted\"))}catch{V(w=>w.filter(D=>D.id!==j)),J.warning(\"Deleted locally\")}},[no,ki]=A.useState(!1),[ms,Ci]=A.useState(\"goal\"),Ln=j=>{Ci(j),ki(!0)},qn=()=>{ki(!1)},hs=async j=>{const E=L.find(w=>w.id===j.accountId);if(!E){J.error(\"Account not found\");return}if(E.balance<j.amount){J.error(`Insufficient funds in ${E.name}`);return}if(await Ye(j.accountId,{balance:E.balance-j.amount}),j.destinationType===\"goal\"){const w=O.find(D=>D.id===j.destinationId);w&&await ht(j.destinationId,{currentAmount:w.currentAmount+j.amount})}else qe(w=>w+j.amount);J.success(`Successfully allocated ${cn[h.currency]}${j.amount.toLocaleString()} from ${E.name}!`,{description:`${j.destinationType===\"goal\"?\"Goal\":\"Emergency Fund\"} balance updated`}),ji({particleCount:100,spread:70,origin:{y:.6}})},In=async(j,E)=>{const w=L.find(D=>D.id===j);if(w){if(w.balance<E)throw J.error(`Insufficient funds in ${w.name}`),new Error(\"Insufficient funds\");await Ye(j,{balance:w.balance-E})}},Zt=async(j,E,w)=>{const D=L.find(Z=>Z.id===j),_=L.find(Z=>Z.id===E);if(!D||!_){J.error(\"Source or destination account not found\");return}if(D.balance<w){J.error(`Insufficient funds in ${D.name}`);return}try{await Ye(j,{balance:D.balance-w});const Z=_.type===\"credit_card\"?-w:w;await Ye(E,{balance:_.balance+Z});const ne={description:`Migration: ${D.name} → ${_.name}`,amount:w,category:\"Transfer\",date:new Date().toISOString().split(\"T\")[0],tags:[\"internal\",\"migration\"],accountId:j},Q=await _e.createExpense(r,ne);Q.success&&x(we=>[...we,Q.expense]),J.success(`Transferred ${cn[h.currency]}${w.toLocaleString()}!`,{description:`From ${D.name} to ${_.name}`}),ji({particleCount:50,spread:60,origin:{y:.7}})}catch(Z){console.error(\"Transfer failed\",Z),J.error(\"Capital migration protocol failed\")}},Cl=async()=>{try{const j=J.loading(\"Initiating factory reset...\"),E=async(D,_)=>{const Z=D.map(ne=>_(r,ne.id).catch(Q=>console.warn(`Failed to delete ${ne.id}`,Q)));await Promise.all(Z)};await Promise.all([E(he,_e.deleteRecurring),E(p,_e.deleteExpense),E(v,_e.deleteIncome),E(N,_e.deleteDebt),E(O,_e.deleteGoal),E(P,_e.deleteInvestment),E(S,_e.deleteLiability)]);const w=L.map(D=>_e.updateAccount(r,D.id,{balance:0}).catch(_=>console.warn(`Failed to reset ${D.name}`,_)));await Promise.all(w),await bt(),J.dismiss(j),J.success(\"All data purged. Clean slate initialized.\")}catch(j){console.error(j),J.error(\"Partial purge only. Some data remains.\")}};return n.jsx(bp.Provider,{value:{userId:r,settings:h,currency:h.currency,expenses:p,incomes:v,debts:N,goals:O,accounts:L,investments:P,liabilities:S,recurringTransactions:he,notifications:fe,emergencyFundAmount:Se,isLoading:c,isRefreshing:m,isOffline:Te,apiStatus:me,isFundAllocationOpen:no,fundAllocationType:ms,authStatus:C,currentUser:oe,isAwaitingPin:z,isRememberedUser:le,rememberedMobile:Ne,authMessage:Ve,refreshData:la,updateSettings:Gt,checkIdentity:Ee,login:He,signup:_a,logout:ba,clearPendingSession:ma,scheduleAccountDeletion:ja,cancelAccountDeletion:It,deletionDate:de,sendOtp:yt,verifyOtp:Ut,resetPin:Oa,pendingMobile:re,createExpense:un,updateExpense:nn,deleteExpense:Fa,createIncome:Da,updateIncome:Ue,deleteIncome:wt,createDebt:ie,updateDebt:Le,deleteDebt:ft,settleDebt:at,createGoal:Ct,updateGoal:ht,deleteGoal:Yt,createAccount:Rt,updateAccount:Ye,deleteAccount:$a,createLiability:na,updateLiability:Qt,deleteLiability:sa,migrateSubscriptions:Bt,cleanupDuplicates:Mt,createInvestment:dn,updateInvestment:fs,deleteInvestment:ao,createRecurringTransaction:dt,createRecurring:dt,updateRecurringTransaction:kt,deleteRecurringTransaction:Sa,processRecurringTransactions:Aa,setEmergencyFundAmount:qe,setNotifications:ye,applyTheme:ce,openFundAllocation:Ln,closeFundAllocation:qn,performFundAllocation:hs,deductFromAccount:In,transferFunds:Zt,clearAllData:Cl,backfillRequest:De,setBackfillRequest:tt,executeBackfill:ds},children:i})};function $e(i,r=\"USD\",c=!1){const u=typeof i==\"string\"?parseFloat(i.replace(/,/g,\"\")):i;if(isNaN(u))return\"\";const m=r===\"INR\"?\"en-IN\":\"en-US\",g={style:\"currency\",currency:r,notation:c?\"compact\":\"standard\",maximumFractionDigits:c?1:2};try{return new Intl.NumberFormat(m,g).format(u)}catch{return new Intl.NumberFormat(m,{...g,style:\"decimal\"}).format(u)}}function Qu(i,r=\"en-IN\"){const c=typeof i==\"string\"?parseFloat(i.replace(/,/g,\"\")):i;return isNaN(c)?\"\":new Intl.NumberFormat(r).format(c)}const yu=Qu;function o1(i){return i===\"\"||i===\"-\"?!0:/^-?\\d*\\.?\\d*$/.test(i)}function Wh(i){return i.replace(/,/g,\"\")}function UN(i){if(i<=0)return\"0 months\";const r=Math.floor(i/12),c=i%12,u=[];return r>0&&u.push(`${r} ${r===1?\"year\":\"years\"}`),(c>0||r===0)&&u.push(`${c} ${c===1?\"month\":\"months\"}`),u.join(\", \")}function BN(i,r=\"INR\"){const c=Math.abs(i),u=i<0?\"-\":\"\";if(r===\"INR\"){if(c>=1e7)return`${u}${(c/1e7).toFixed(2).replace(/\\.00$/,\"\")}C`;if(c>=1e5)return`${u}${(c/1e5).toFixed(2).replace(/\\.00$/,\"\")}L`;if(c>=1e4)return`${u}${(c/1e3).toFixed(1).replace(/\\.0$/,\"\")}K`}else{if(c>=1e9)return`${u}${(c/1e9).toFixed(2).replace(/\\.00$/,\"\")}B`;if(c>=1e6)return`${u}${(c/1e6).toFixed(2).replace(/\\.00$/,\"\")}M`;if(c>=1e4)return`${u}${(c/1e3).toFixed(1).replace(/\\.0$/,\"\")}K`}return u+Qu(c,r===\"INR\"?\"en-IN\":\"en-US\")}function LN(i,r=\"INR\"){const c=Math.abs(i),u=i<0?\"-\":\"\",m=(g,h)=>{let y=2;return g>=100?y=0:g>=10&&(y=1),`${u}${g.toFixed(y).replace(/\\.0+$/,\"\")}${h}`};if(r===\"INR\"){if(c>=1e7)return m(c/1e7,\"Cr\");if(c>=1e5)return m(c/1e5,\"L\");if(c>=1e3)return m(c/1e3,\"K\")}else{if(c>=1e9)return m(c/1e9,\"B\");if(c>=1e6)return m(c/1e6,\"M\");if(c>=1e3)return m(c/1e3,\"K\")}return u+Qu(c,r===\"INR\"?\"en-IN\":\"en-US\")}const Zu=A.createContext({});function Ku(i){const r=A.useRef(null);return r.current===null&&(r.current=i()),r.current}const yp=np?A.useLayoutEffect:A.useEffect,eo=A.createContext(null),Ju=A.createContext({transformPagePoint:i=>i,isStatic:!1,reducedMotion:\"never\"});function e0(i,r){if(typeof i==\"function\")return i(r);i!=null&&(i.current=r)}function c1(...i){return r=>{let c=!1;const u=i.map(m=>{const g=e0(m,r);return!c&&typeof g==\"function\"&&(c=!0),g});if(c)return()=>{for(let m=0;m<u.length;m++){const g=u[m];typeof g==\"function\"?g():e0(i[m],null)}}}}function u1(...i){return A.useCallback(c1(...i),i)}class d1 extends A.Component{getSnapshotBeforeUpdate(r){const c=this.props.childRef.current;if(c&&r.isPresent&&!this.props.isPresent){const u=c.offsetParent,m=Cy(u)&&u.offsetWidth||0,g=this.props.sizeRef.current;g.height=c.offsetHeight||0,g.width=c.offsetWidth||0,g.top=c.offsetTop,g.left=c.offsetLeft,g.right=m-g.width-g.left}return null}componentDidUpdate(){}render(){return this.props.children}}function f1({children:i,isPresent:r,anchorX:c,root:u}){const m=A.useId(),g=A.useRef(null),h=A.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:y}=A.useContext(Ju),p=i.props?.ref??i?.ref,x=u1(g,p);return A.useInsertionEffect(()=>{const{width:v,height:f,top:N,left:M,right:O}=h.current;if(r||!g.current||!v||!f)return;const B=c===\"left\"?`left: ${M}`:`right: ${O}`;g.current.dataset.motionPopId=m;const L=document.createElement(\"style\");y&&(L.nonce=y);const R=u??document.head;return R.appendChild(L),L.sheet&&L.sheet.insertRule(`"
      },
      {
        "file": "dist_test\\assets\\index-DHabN7TV.js",
        "line": 11,
        "snippet": "`);try{z=new Worker(URL.createObjectURL(new Blob([le])))}catch(ue){return typeof console<\"u\"&&typeof console.warn==\"function\"&&console.warn(\"🎊 Could not load worker\",ue),null}$(z)}return z}})(),M={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:[\"square\",\"circle\"],zIndex:100,colors:[\"#26ccff\",\"#a25afd\",\"#ff5e7e\",\"#88ff5a\",\"#fcff42\",\"#ffa62d\",\"#ff36ff\"],disableForReducedMotion:!1,scalar:1};function O(z,T){return T?T(z):z}function B(z){return z!=null}function L(z,T,re){return O(z&&B(z[T])?z[T]:M[T],re)}function R(z){return z<0?0:Math.floor(z)}function P(z,T){return Math.floor(Math.random()*(T-z))+z}function V(z){return parseInt(z,16)}function S(z){return z.map(se)}function se(z){var T=String(z).replace(/[^0-9a-f]/gi,\"\");return T.length<6&&(T=T[0]+T[0]+T[1]+T[1]+T[2]+T[2]),{r:V(T.substring(0,2)),g:V(T.substring(2,4)),b:V(T.substring(4,6))}}function he(z){var T=L(z,\"origin\",Object);return T.x=L(T,\"x\",Number),T.y=L(T,\"y\",Number),T}function ve(z){z.width=document.documentElement.clientWidth,z.height=document.documentElement.clientHeight}function fe(z){var T=z.getBoundingClientRect();z.width=T.width,z.height=T.height}function ye(z){var T=document.createElement(\"canvas\");return T.style.position=\"fixed\",T.style.top=\"0px\",T.style.left=\"0px\",T.style.pointerEvents=\"none\",T.style.zIndex=z,T}function Se(z,T,re,$,le,ue,Ne,je,de){z.save(),z.translate(T,re),z.rotate(ue),z.scale($,le),z.arc(0,0,1,Ne,je,de),z.restore()}function qe(z){var T=z.angle*(Math.PI/180),re=z.spread*(Math.PI/180);return{x:z.x,y:z.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:z.startVelocity*.5+Math.random()*z.startVelocity,angle2D:-T+(.5*re-Math.random()*re),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:z.color,shape:z.shape,tick:0,totalTicks:z.ticks,decay:z.decay,drift:z.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:z.gravity*3,ovalScalar:.6,scalar:z.scalar,flat:z.flat}}function Te(z,T){T.x+=Math.cos(T.angle2D)*T.velocity+T.drift,T.y+=Math.sin(T.angle2D)*T.velocity+T.gravity,T.velocity*=T.decay,T.flat?(T.wobble=0,T.wobbleX=T.x+10*T.scalar,T.wobbleY=T.y+10*T.scalar,T.tiltSin=0,T.tiltCos=0,T.random=1):(T.wobble+=T.wobbleSpeed,T.wobbleX=T.x+10*T.scalar*Math.cos(T.wobble),T.wobbleY=T.y+10*T.scalar*Math.sin(T.wobble),T.tiltAngle+=.1,T.tiltSin=Math.sin(T.tiltAngle),T.tiltCos=Math.cos(T.tiltAngle),T.random=Math.random()+2);var re=T.tick++/T.totalTicks,$=T.x+T.random*T.tiltCos,le=T.y+T.random*T.tiltSin,ue=T.wobbleX+T.random*T.tiltCos,Ne=T.wobbleY+T.random*T.tiltSin;if(z.fillStyle=\"rgba(\"+T.color.r+\", \"+T.color.g+\", \"+T.color.b+\", \"+(1-re)+\")\",z.beginPath(),h&&T.shape.type===\"path\"&&typeof T.shape.path==\"string\"&&Array.isArray(T.shape.matrix))z.fill(Y(T.shape.path,T.shape.matrix,T.x,T.y,Math.abs(ue-$)*.1,Math.abs(Ne-le)*.1,Math.PI/10*T.wobble));else if(T.shape.type===\"bitmap\"){var je=Math.PI/10*T.wobble,de=Math.abs(ue-$)*.1,xe=Math.abs(Ne-le)*.1,Ke=T.shape.bitmap.width*T.scalar,Ie=T.shape.bitmap.height*T.scalar,Ve=new DOMMatrix([Math.cos(je)*de,Math.sin(je)*de,-Math.sin(je)*xe,Math.cos(je)*xe,T.x,T.y]);Ve.multiplySelf(new DOMMatrix(T.shape.matrix));var rt=z.createPattern(v.transform(T.shape.bitmap),\"no-repeat\");rt.setTransform(Ve),z.globalAlpha=1-re,z.fillStyle=rt,z.fillRect(T.x-Ke/2,T.y-Ie/2,Ke,Ie),z.globalAlpha=1}else if(T.shape===\"circle\")z.ellipse?z.ellipse(T.x,T.y,Math.abs(ue-$)*T.ovalScalar,Math.abs(Ne-le)*T.ovalScalar,Math.PI/10*T.wobble,0,2*Math.PI):Se(z,T.x,T.y,Math.abs(ue-$)*T.ovalScalar,Math.abs(Ne-le)*T.ovalScalar,Math.PI/10*T.wobble,0,2*Math.PI);else if(T.shape===\"star\")for(var De=Math.PI/2*3,tt=4*T.scalar,St=8*T.scalar,mt=T.x,zt=T.y,ut=5,bt=Math.PI/ut;ut--;)mt=T.x+Math.cos(De)*St,zt=T.y+Math.sin(De)*St,z.lineTo(mt,zt),De+=bt,mt=T.x+Math.cos(De)*tt,zt=T.y+Math.sin(De)*tt,z.lineTo(mt,zt),De+=bt;else z.moveTo(Math.floor(T.x),Math.floor(T.y)),z.lineTo(Math.floor(T.wobbleX),Math.floor(le)),z.lineTo(Math.floor(ue),Math.floor(Ne)),z.lineTo(Math.floor($),Math.floor(T.wobbleY));return z.closePath(),z.fill(),T.tick<T.totalTicks}function ee(z,T,re,$,le){var ue=T.slice(),Ne=z.getContext(\"2d\"),je,de,xe=x(function(Ke){function Ie(){je=de=null,Ne.clearRect(0,0,$.width,$.height),v.clear(),le(),Ke()}function Ve(){u&&!($.width===m.width&&$.height===m.height)&&($.width=z.width=m.width,$.height=z.height=m.height),!$.width&&!$.height&&(re(z),$.width=z.width,$.height=z.height),Ne.clearRect(0,0,$.width,$.height),ue=ue.filter(function(rt){return Te(Ne,rt)}),ue.length?je=f.frame(Ve):Ie()}je=f.frame(Ve),de=Ie});return{addFettis:function(Ke){return ue=ue.concat(Ke),xe},canvas:z,promise:xe,reset:function(){je&&f.cancel(je),de&&de()}}}function me(z,T){var re=!z,$=!!L(T||{},\"resize\"),le=!1,ue=L(T,\"disableForReducedMotion\",Boolean),Ne=g&&!!L(T||{},\"useWorker\"),je=Ne?N():null,de=re?ve:fe,xe=z&&je?!!z.__confetti_initialized:!1,Ke=typeof matchMedia==\"function\"&&matchMedia(\"(prefers-reduced-motion)\").matches,Ie;function Ve(De,tt,St){for(var mt=L(De,\"particleCount\",R),zt=L(De,\"angle\",Number),ut=L(De,\"spread\",Number),bt=L(De,\"startVelocity\",Number),la=L(De,\"decay\",Number),ce=L(De,\"gravity\",Number),Ee=L(De,\"drift\",Number),He=L(De,\"colors\",S),yt=L(De,\"ticks\",Number),Ut=L(De,\"shapes\"),Oa=L(De,\"scalar\"),_a=!!L(De,\"flat\"),ba=he(De),ma=mt,ja=[],It=z.width*ba.x,Na=z.height*ba.y;ma--;)ja.push(qe({x:It,y:Na,angle:zt,spread:ut,startVelocity:bt,color:He[ma%He.length],shape:Ut[P(0,Ut.length)],ticks:yt,decay:la,gravity:ce,drift:Ee,scalar:Oa,flat:_a}));return Ie?Ie.addFettis(ja):(Ie=ee(z,ja,de,tt,St),Ie.promise)}function rt(De){var tt=ue||L(De,\"disableForReducedMotion\",Boolean),St=L(De,\"zIndex\",Number);if(tt&&Ke)return x(function(bt){bt()});re&&Ie?z=Ie.canvas:re&&!z&&(z=ye(St),document.body.appendChild(z)),$&&!xe&&de(z);var mt={width:z.width,height:z.height};je&&!xe&&je.init(z),xe=!0,je&&(z.__confetti_initialized=!0);function zt(){if(je){var bt={getBoundingClientRect:function(){if(!re)return z.getBoundingClientRect()}};de(bt),je.postMessage({resize:{width:bt.width,height:bt.height}});return}mt.width=mt.height=null}function ut(){Ie=null,$&&(le=!1,r.removeEventListener(\"resize\",zt)),re&&z&&(document.body.contains(z)&&document.body.removeChild(z),z=null,xe=!1)}return $&&!le&&(le=!0,r.addEventListener(\"resize\",zt,!1)),je?je.fire(De,mt,ut):Ve(De,mt,ut)}return rt.reset=function(){je&&je.reset(),Ie&&Ie.reset()},rt}var G;function C(){return G||(G=me(null,{useWorker:!0,resize:!0})),G}function Y(z,T,re,$,le,ue,Ne){var je=new Path2D(z),de=new Path2D;de.addPath(je,new DOMMatrix(T));var xe=new Path2D;return xe.addPath(de,new DOMMatrix([Math.cos(Ne)*le,Math.sin(Ne)*le,-Math.sin(Ne)*ue,Math.cos(Ne)*ue,re,$])),xe}function oe(z){if(!h)throw new Error(\"path confetti are not supported in this browser\");var T,re;typeof z==\"string\"?T=z:(T=z.path,re=z.matrix);var $=new Path2D(T),le=document.createElement(\"canvas\"),ue=le.getContext(\"2d\");if(!re){for(var Ne=1e3,je=Ne,de=Ne,xe=0,Ke=0,Ie,Ve,rt=0;rt<Ne;rt+=2)for(var De=0;De<Ne;De+=2)ue.isPointInPath($,rt,De,\"nonzero\")&&(je=Math.min(je,rt),de=Math.min(de,De),xe=Math.max(xe,rt),Ke=Math.max(Ke,De));Ie=xe-je,Ve=Ke-de;var tt=10,St=Math.min(tt/Ie,tt/Ve);re=[St,0,0,St,-Math.round(Ie/2+je)*St,-Math.round(Ve/2+de)*St]}return{type:\"path\",path:T,matrix:re}}function ge(z){var T,re=1,$=\"#000000\",le='\"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\", \"EmojiOne Color\", \"Android Emoji\", \"Twemoji Mozilla\", \"system emoji\", sans-serif';typeof z==\"string\"?T=z:(T=z.text,re=\"scalar\"in z?z.scalar:re,le=\"fontFamily\"in z?z.fontFamily:le,$=\"color\"in z?z.color:$);var ue=10*re,Ne=\"\"+ue+\"px \"+le,je=new OffscreenCanvas(ue,ue),de=je.getContext(\"2d\");de.font=Ne;var xe=de.measureText(T),Ke=Math.ceil(xe.actualBoundingBoxRight+xe.actualBoundingBoxLeft),Ie=Math.ceil(xe.actualBoundingBoxAscent+xe.actualBoundingBoxDescent),Ve=2,rt=xe.actualBoundingBoxLeft+Ve,De=xe.actualBoundingBoxAscent+Ve;Ke+=Ve+Ve,Ie+=Ve+Ve,je=new OffscreenCanvas(Ke,Ie),de=je.getContext(\"2d\"),de.font=Ne,de.fillStyle=$,de.fillText(T,rt,De);var tt=1/re;return{type:\"bitmap\",bitmap:je.transferToImageBitmap(),matrix:[tt,0,0,tt,-Ke*tt/2,-Ie*tt/2]}}c.exports=function(){return C().apply(this,arguments)},c.exports.reset=function(){C().reset()},c.exports.create=me,c.exports.shapeFromPath=oe,c.exports.shapeFromText=ge})((function(){return typeof window<\"u\"?window:typeof self<\"u\"?self:this||{}})(),Xu,!1);const ji=Xu.exports;Xu.exports.create;const Pu=[{id:\"first_transaction\",name:\"Getting Started\",description:\"Add your first transaction\",icon:\"🎯\",condition:i=>i.totalTransactions>=1},{id:\"early_bird\",name:\"Early Bird\",description:\"Log in for the first time today\",icon:\"🌅\",condition:i=>i.dailyLogin===!0},{id:\"ten_transactions\",name:\"Building Habits\",description:\"Log 10 transactions\",icon:\"📊\",condition:i=>i.totalTransactions>=10},{id:\"fifty_transactions\",name:\"Momentum Builder\",description:\"Log 50 transactions\",icon:\"⚡\",condition:i=>i.totalTransactions>=50},{id:\"financial_guru\",name:\"Financial Guru\",description:\"Complete 100 transactions\",icon:\"🧙\",condition:i=>i.totalTransactions>=100},{id:\"three_day_streak\",name:\"Streak Starter\",description:\"Log in for 3 days in a row\",icon:\"🔥\",condition:i=>i.currentStreak>=3},{id:\"consistent_tracker\",name:\"Consistent Tracker\",description:\"Log transactions for 7 days in a row\",icon:\"📅\",condition:i=>i.currentStreak>=7},{id:\"habit_master\",name:\"Habit Master\",description:\"Maintain a 30-day streak\",icon:\"🏅\",condition:i=>i.currentStreak>=30},{id:\"dedication_champion\",name:\"Dedication Champion\",description:\"Achieve a 100-day streak\",icon:\"👑\",condition:i=>i.currentStreak>=100},{id:\"first_goal\",name:\"Goal Setter\",description:\"Create your first savings goal\",icon:\"🎯\",condition:i=>i.totalGoals>=1},{id:\"goal_achiever\",name:\"Goal Achiever\",description:\"Complete your first savings goal\",icon:\"🏆\",condition:i=>i.completedGoals>=1},{id:\"triple_winner\",name:\"Triple Winner\",description:\"Complete 3 savings goals\",icon:\"🎖️\",condition:i=>i.completedGoals>=3},{id:\"goal_crusher\",name:\"Goal Crusher\",description:\"Complete 5 savings goals\",icon:\"💎\",condition:i=>i.completedGoals>=5},{id:\"debt_aware\",name:\"Debt Aware\",description:\"Track your first debt\",icon:\"📝\",condition:i=>i.totalDebts>=1},{id:\"debt_settler\",name:\"Debt Settler\",description:\"Settle your first debt\",icon:\"✅\",condition:i=>i.settledDebts>=1},{id:\"debt_destroyer\",name:\"Debt Destroyer\",description:\"Settle 5 debts\",icon:\"💪\",condition:i=>i.settledDebts>=5},{id:\"debt_free_hero\",name:\"Debt-Free Hero\",description:\"Maintain zero pending debts\",icon:\"🦸\",condition:i=>i.totalDebts>0&&i.settledDebts===i.totalDebts},{id:\"first_saver\",name:\"First Saver\",description:\"Achieve 10%+ savings rate\",icon:\"🌱\",condition:i=>i.savingsRate>=.1},{id:\"super_saver\",name:\"Super Saver\",description:\"Maintain a 20%+ savings rate\",icon:\"💰\",condition:i=>i.savingsRate>=.2},{id:\"elite_saver\",name:\"Elite Saver\",description:\"Achieve 30%+ savings rate\",icon:\"💸\",condition:i=>i.savingsRate>=.3},{id:\"legendary_saver\",name:\"Legendary Saver\",description:\"Maintain 50%+ savings rate\",icon:\"🏰\",condition:i=>i.savingsRate>=.5},{id:\"budget_conscious\",name:\"Budget Conscious\",description:\"Keep spending under 80% of income\",icon:\"📊\",condition:i=>i.monthlySpendingRatio<=.8},{id:\"budget_master\",name:\"Budget Master\",description:\"Keep spending under 70% of income\",icon:\"👑\",condition:i=>i.monthlySpendingRatio<=.7},{id:\"frugal_champion\",name:\"Frugal Champion\",description:\"Keep spending under 50% of income\",icon:\"🌟\",condition:i=>i.monthlySpendingRatio<=.5},{id:\"stay_notified\",name:\"Stay Notified\",description:\"Enable notifications\",icon:\"🔔\",condition:i=>i.notificationsEnabled===!0},{id:\"ai_curious\",name:\"AI Curious\",description:\"Chat with AI Guru for the first time\",icon:\"🤖\",condition:i=>i.aiInteractions>=1},{id:\"ai_enthusiast\",name:\"AI Enthusiast\",description:\"Chat with AI Guru 10 times\",icon:\"🧠\",condition:i=>i.aiInteractions>=10},{id:\"profile_complete\",name:\"Profile Complete\",description:\"Add your name and photo\",icon:\"👤\",condition:i=>i.profileComplete===!0},{id:\"account_organizer\",name:\"Account Organizer\",description:\"Create 3 or more accounts\",icon:\"🏦\",condition:i=>i.totalAccounts>=3}];function a1(i,r){const c=[];return Pu.forEach(u=>{!r.includes(u.id)&&u.condition(i)&&c.push(u.id)}),c}function gp(i){return Pu.find(r=>r.id===i)}function n1(){return Pu}function s1(i){const{expenses:r,goals:c,userName:u}=i,m=[],g=new Date,h=new Date(g.getTime()-10080*60*1e3),y=new Date(g.getTime()-720*60*60*1e3),p=r.filter(O=>new Date(O.date)>=h),x=r.filter(O=>{const B=new Date(O.date);return B>=y&&B<h}),v=O=>O.reduce((B,L)=>(B[L.category]=(B[L.category]||0)+L.amount,B),{}),f=v(p),N=v(x),M=Object.keys(N).reduce((O,B)=>(O[B]=N[B]/3,O),{});return Object.keys(f).forEach(O=>{const B=f[O],L=M[O]||0;if(L>500&&B>L*1.2){const R=Math.round((B-L)/L*100),P=c.find(V=>V.currentAmount<V.targetAmount);P?m.push(`${u}, you've spent ${R}% more on ${O} this week. This slows down your '${P.name}' goal. Consider tightening up your protocol!`):m.push(`${u}, your ${O} spending is up ${R}% this week. Watch out before it becomes a habit!`)}}),m}function i1(i){return{id:`insight_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:\"insight\",priority:\"low\",category:\"insights\",title:\"Guruji Insight\",message:i,timestamp:new Date,read:!1}}const l1={netflix:\"Subscription\",spotify:\"Subscription\",google:\"Subscription\",apple:\"Subscription\",icloud:\"Subscription\",youtube:\"Subscription\",disney:\"Subscription\",hotstar:\"Subscription\",\"prime video\":\"Subscription\",\"prime membership\":\"Subscription\",\"amazon prime\":\"Subscription\",audible:\"Subscription\",kindle:\"Subscription\",hulu:\"Subscription\",hbomax:\"Subscription\",hbo:\"Subscription\",\"paramount+\":\"Subscription\",peacock:\"Subscription\",crunchyroll:\"Subscription\",chaisai:\"Subscription\",\"google play\":\"Subscription\",\"google one\":\"Subscription\",\"app store\":\"Subscription\",microsoft:\"Subscription\",\"office 365\":\"Subscription\",dropbox:\"Subscription\",zoom:\"Subscription\",canva:\"Subscription\",adobe:\"Subscription\",\"creative cloud\":\"Subscription\",jio:\"Subscription\",airtel:\"Subscription\",vodafone:\"Subscription\",idea:\"Subscription\",bsnl:\"Subscription\",\"vi \":\"Subscription\",broadband:\"Subscription\",isp:\"Subscription\",\"act fiber\":\"Subscription\",hathway:\"Subscription\",\"internet bill\":\"Subscription\",telecom:\"Subscription\",coffee:\"Food & Dining\",starbucks:\"Food & Dining\",cafe:\"Food & Dining\",restaurant:\"Food & Dining\",lunch:\"Food & Dining\",dinner:\"Food & Dining\",pizza:\"Food & Dining\",burger:\"Food & Dining\",mcdonalds:\"Food & Dining\",kfc:\"Food & Dining\",food:\"Food & Dining\",zomato:\"Food & Dining\",swiggy:\"Food & Dining\",beer:\"Food & Dining\",bar:\"Food & Dining\",uber:\"Transportation\",ola:\"Transportation\",cab:\"Transportation\",taxi:\"Transportation\",bus:\"Transportation\",train:\"Transportation\",metro:\"Transportation\",fuel:\"Transportation\",petrol:\"Transportation\",gas:\"Transportation\",parking:\"Transportation\",amazon:\"Shopping\",flipkart:\"Shopping\",clothes:\"Shopping\",zara:\"Shopping\",nike:\"Shopping\",shoes:\"Shopping\",mall:\"Shopping\",grocery:\"Groceries\",supermarket:\"Groceries\",vegetables:\"Groceries\",fruits:\"Groceries\",milk:\"Groceries\",electricity:\"Bills & Utilities\",water:\"Bills & Utilities\",\"gas bill\":\"Bills & Utilities\",rent:\"Bills & Utilities\",maintenance:\"Bills & Utilities\",movie:\"Entertainment\",cinema:\"Entertainment\",game:\"Entertainment\",steam:\"Entertainment\",playstation:\"Entertainment\",xbox:\"Entertainment\",doctor:\"Health & Wellbeing\",medical:\"Health & Wellbeing\",pharmacy:\"Health & Wellbeing\",medicine:\"Health & Wellbeing\",gym:\"Health & Wellbeing\",fitness:\"Health & Wellbeing\",hospital:\"Health & Wellbeing\",transfer:\"Transfer\",payment:\"Transfer\",\"cc bill\":\"Transfer\",internal:\"Transfer\",membership:\"Subscription\",subscription:\"Subscription\",recurring:\"Subscription\",premium:\"Subscription\",\"monthly bill\":\"Subscription\"},xp=[{keywords:[\"netflix\"],displayName:\"Netflix Premium\",defaultAmount:649,category:\"Subscription\"},{keywords:[\"hotstar\",\"disney\"],displayName:\"Disney+ Hotstar\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"prime video\",\"amazon prime\"],displayName:\"Amazon Prime\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"hulu\"],displayName:\"Hulu\",defaultAmount:650,category:\"Subscription\"},{keywords:[\"youtube\",\"yt premium\"],displayName:\"YouTube Premium\",defaultAmount:129,category:\"Subscription\"},{keywords:[\"sonyliv\"],displayName:\"SonyLIV\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"zee5\"],displayName:\"Zee5\",defaultAmount:100,category:\"Subscription\"},{keywords:[\"jiocinema\"],displayName:\"JioCinema Premium\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"apple tv\"],displayName:\"Apple TV+\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"spotify\"],displayName:\"Spotify Premium\",defaultAmount:119,category:\"Subscription\"},{keywords:[\"apple music\"],displayName:\"Apple Music\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"audible\"],displayName:\"Audible\",defaultAmount:199,category:\"Subscription\"},{keywords:[\"wynk\"],displayName:\"Wynk Music\",defaultAmount:49,category:\"Subscription\"},{keywords:[\"gaana\"],displayName:\"Gaana Plus\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"jiosaavn\"],displayName:\"JioSaavn Pro\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"google one\",\"google storage\"],displayName:\"Google One\",defaultAmount:130,category:\"Subscription\"},{keywords:[\"chatgpt\",\"openai\"],displayName:\"ChatGPT Plus\",defaultAmount:1999,category:\"Subscription\"},{keywords:[\"claude\",\"anthropic\"],displayName:\"Claude Pro\",defaultAmount:1999,category:\"Subscription\"},{keywords:[\"github\"],displayName:\"GitHub Copilot\",defaultAmount:830,category:\"Subscription\"},{keywords:[\"midjourney\"],displayName:\"Midjourney\",defaultAmount:830,category:\"Subscription\"},{keywords:[\"canva\"],displayName:\"Canva Pro\",defaultAmount:499,category:\"Subscription\"},{keywords:[\"adobe\",\"creative cloud\"],displayName:\"Adobe CC\",defaultAmount:2300,category:\"Subscription\"},{keywords:[\"jio\",\"myjio\"],displayName:\"Jio Mobile\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"airtel\"],displayName:\"Airtel Mobile\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"vi \",\"vodafone\"],displayName:\"Vi Mobile\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"act fiber\",\"act net\"],displayName:\"ACT Fibernet\",defaultAmount:820,category:\"Bills & Utilities\"},{keywords:[\"hathway\"],displayName:\"Hathway Broadband\",defaultAmount:600,category:\"Bills & Utilities\"}],bu=i=>{const r=i.toLowerCase();return xp.some(c=>c.keywords.some(u=>r.includes(u)))},Yr=i=>{const r=i.toLowerCase();for(const c of xp)if(c.keywords.some(u=>r.includes(u))){const u=[\"subscription\",\"online\"];return{category:c.category,tags:u,suggestedAmount:c.defaultAmount,suggestedDescription:c.displayName}}for(const[c,u]of Object.entries(l1))if(r.includes(c)){const m=[];return r.includes(\"online\")&&m.push(\"online\"),r.includes(\"subscription\")&&m.push(\"subscription\"),{category:u,tags:m}}return null},lt={SETTINGS:\"finhub_settings\",EXPENSES:\"finhub_expenses\",INCOMES:\"finhub_incomes\",DEBTS:\"finhub_debts\",GOALS:\"finhub_goals\",ACCOUNTS:\"finhub_accounts\",INVESTMENTS:\"finhub_investments\",LIABILITIES:\"finhub_liabilities\",NOTIFICATIONS:\"finhub_notifications\",EMERGENCY_FUND:\"finhub_emergency_fund\",RECURRING:\"finhub_recurring\",AUTH:\"finhub_auth\",REMEMBERED_MOBILE:\"finhub_remembered_mobile\",DELETION_SCHEDULE:\"finhub_deletion_schedule\"},bp=A.createContext(void 0),Di=()=>{const i=A.useContext(bp);if(!i)throw new Error(\"useFinance must be used within a FinanceProvider\");return i},r1=({children:i})=>{const[r]=A.useState(\"demo-user-001\"),[c,u]=A.useState(!0),[m,g]=A.useState(!1),[h,y]=A.useState({theme:\"system\",currency:\"INR\",unlockedAchievements:[],name:\"\",photoURL:\"\",notificationsEnabled:!1,roundUpEnabled:!0,aiProvider:\"openai\",onboardingPhase:0,passiveIncomeTarget:0,isSampleMode:!1}),[p,x]=A.useState([]),[v,f]=A.useState([]),[N,M]=A.useState([]),[O,B]=A.useState([]),[L,R]=A.useState([]),[P,V]=A.useState([]),[S,se]=A.useState([]),[he,ve]=A.useState([]),[fe,ye]=A.useState([]),[Se,qe]=A.useState(0),[Te,ee]=A.useState(!1),[me,G]=A.useState(\"online\"),[C,Y]=A.useState(\"guest\"),[oe,ge]=A.useState(null),[z,T]=A.useState(!1),[re,$]=A.useState(\"\"),[le,ue]=A.useState(!1),[Ne,je]=A.useState(\"\"),[de,xe]=A.useState(null),[Ke,Ie]=A.useState(null),[Ve,rt]=A.useState(),[De,tt]=A.useState(null),St=[{mobile:\"9447147230\",pin:\"2255\",name:\"tin2mon FinHub Node // 0x50.3\",userId:\"tin2mon-prod-001\"}],mt=j=>{const E=Array.isArray(j)?j:[j];ye(w=>{const D=E.filter(Z=>w.some(we=>we.id===Z.id)?!1:!w.some(we=>we.type===Z.type&&we.message===Z.message&&!we.read&&new Date().getTime()-new Date(we.timestamp).getTime()<1e3*60*60*24));return D.length===0?w:[...D,...w].sort((Z,ne)=>new Date(ne.timestamp).getTime()-new Date(Z.timestamp).getTime()).slice(0,100)})};A.useEffect(()=>{const j=()=>{const w=p.length+v.length+N.length,D=N.filter(Ce=>Ce.status===\"settled\").length,_=O.filter(Ce=>Ce.currentAmount>=Ce.targetAmount).length,Z=v.reduce((Ce,Pe)=>Ce+Pe.amount,0),ne=p.reduce((Ce,Pe)=>Ce+Pe.amount,0),Q=Z>0?(Z-ne)/Z:0,we=Z>0?ne/Z:0,te={totalTransactions:w,totalGoals:O.length,completedGoals:_,totalDebts:N.length,settledDebts:D,savingsRate:Q,monthlySpendingRatio:we,notificationsEnabled:h.notificationsEnabled,themeChanged:h.theme!==\"system\",aiInteractions:0,currentStreak:w>0?Math.min(w,3):0,dailyLogin:!0,profileComplete:h.name!==\"\"&&h.photoURL!==\"\",totalAccounts:L.length},pe=a1(te,h.unlockedAchievements);pe.length>0&&(pe.forEach(Ce=>{const Pe=gp(Ce);if(Pe){const Me={id:`notif_${Ce}`,type:\"achievement\",priority:\"low\",category:\"achievements\",title:\"Achievement Unlocked!\",message:`${Pe.icon} ${Pe.name}`,timestamp:new Date,read:!1,achievementId:Ce};mt(Me),J.success(`Achievement Unlocked: ${Pe.icon} ${Pe.name}!`,{duration:5e3})}}),Gt({unlockedAchievements:[...h.unlockedAchievements,...pe]}));const Je=s1({expenses:p,goals:O,userName:h.name||\"Friend\"});if(Je.length>0){const Ce=[];Je.forEach(Pe=>{const Me=i1(Pe);Me.priority=\"low\",Me.category=\"insights\",Ce.push(Me),J(Me.title,{description:Me.message,icon:\"🧘\"})}),Ce.length>0&&mt(Ce)}E()},E=()=>{const w=new Date;w.setHours(0,0,0,0);const D=L.reduce((Q,we)=>Q+(we.type===\"bank\"||we.type===\"cash\"?we.balance:0),0),_=O.reduce((Q,we)=>Q+we.currentAmount,0)+Se,Z=Math.max(0,D-_),ne=[];S.forEach(Q=>{const we=new Date(Q.startDate),te=new Date(w.getFullYear(),w.getMonth(),we.getDate());te<w&&te.setMonth(te.getMonth()+1),Math.ceil((te.getTime()-w.getTime())/(1e3*60*60*24))<=7&&ne.push({name:Q.name,amount:Q.emiAmount,dueDate:te,type:\"EMI\"})}),he.forEach(Q=>{if(Q.type===\"expense\"){const we=new Date(Q.startDate);let te;if(Q.frequency===\"monthly\")te=new Date(w.getFullYear(),w.getMonth(),we.getDate()),te<w&&te.setMonth(te.getMonth()+1);else if(Q.frequency===\"weekly\"){const Ce=(we.getDay()-w.getDay()+7)%7;te=new Date(w.getTime()+Ce*24*60*60*1e3),te<w&&te.setDate(te.getDate()+7)}else if(Q.frequency===\"custom\"){const Ce=Q.customIntervalDays||28,Pe=w.getTime()-we.getTime(),nt=Math.floor(Pe/(1e3*60*60*24))%Ce,Lt=Ce-nt;te=new Date(w.getTime()+Lt*24*60*60*1e3),Lt<=0&&(te=new Date(w.getTime()+Ce*24*60*60*1e3))}else return;const pe=Math.ceil((te.getTime()-w.getTime())/(1e3*60*60*24)),Je=Q.frequency===\"custom\"?2:7;pe<=Je&&pe>=0&&ne.push({name:Q.description||\"Subscription\",amount:Q.amount,dueDate:te,type:Q.frequency===\"custom\"?\"Recharge\":\"Bill\"})}}),ne.forEach(Q=>{const we=Z<Q.amount,te=Math.ceil((Q.dueDate.getTime()-w.getTime())/(1e3*60*60*24));if(we&&te<=3){const pe={id:`smart_breach_${Q.name}_${Q.dueDate.toISOString().split(\"T\")[0]}`,type:\"alert\",priority:\"high\",category:\"reminders\",title:\"Liquid Stability Warning\",message:`Critical: Your '${Q.name}' due on ${Q.dueDate.toLocaleDateString()} (₹${Q.amount}) exceeds current liquid cash (₹${Z}). Clear assets or increase bank balance immediately.`,timestamp:new Date,read:!1};mt(pe),J.error(pe.title,{description:pe.message,duration:1e4})}else if(te<=1){const pe={id:`reminder_${Q.name}_${Q.dueDate.toISOString().split(\"T\")[0]}`,type:\"reminder\",priority:\"medium\",category:\"reminders\",title:`${Q.type} Due Soon`,message:`Reminder: '${Q.name}' payment of ₹${Q.amount} is due tomorrow (${Q.dueDate.toLocaleDateString()}).`,timestamp:new Date,read:!1};mt(pe),J.info(pe.title,{description:pe.message})}})};j()},[p.length,v.length,N.length,O.length,h.notificationsEnabled,h.theme]),A.useEffect(()=>{zt()},[]),A.useEffect(()=>localStorage.setItem(lt.SETTINGS,JSON.stringify(h)),[h]),A.useEffect(()=>localStorage.setItem(lt.EXPENSES,JSON.stringify(p)),[p]),A.useEffect(()=>localStorage.setItem(lt.INCOMES,JSON.stringify(v)),[v]),A.useEffect(()=>localStorage.setItem(lt.DEBTS,JSON.stringify(N)),[N]),A.useEffect(()=>localStorage.setItem(lt.GOALS,JSON.stringify(O)),[O]),A.useEffect(()=>localStorage.setItem(lt.ACCOUNTS,JSON.stringify(L)),[L]),A.useEffect(()=>localStorage.setItem(lt.INVESTMENTS,JSON.stringify(P)),[P]),A.useEffect(()=>localStorage.setItem(lt.LIABILITIES,JSON.stringify(S)),[S]),A.useEffect(()=>localStorage.setItem(lt.RECURRING,JSON.stringify(he)),[he]),A.useEffect(()=>localStorage.setItem(lt.NOTIFICATIONS,JSON.stringify(fe)),[fe]),A.useEffect(()=>localStorage.setItem(lt.EMERGENCY_FUND,JSON.stringify(Se)),[Se]);const zt=async()=>{u(!0);try{const E=localStorage.getItem(lt.SETTINGS);if(E){const Me=JSON.parse(E);y(Me),ce(Me.theme)}const w=localStorage.getItem(lt.EXPENSES);w&&x(JSON.parse(w));const D=localStorage.getItem(lt.INCOMES);D&&f(JSON.parse(D));const _=localStorage.getItem(lt.DEBTS);_&&M(JSON.parse(_));const Z=localStorage.getItem(lt.GOALS);Z&&B(JSON.parse(Z));const ne=localStorage.getItem(lt.ACCOUNTS);ne&&R(JSON.parse(ne));const Q=localStorage.getItem(lt.INVESTMENTS);Q&&V(JSON.parse(Q));const we=localStorage.getItem(lt.LIABILITIES);we&&se(JSON.parse(we));const te=localStorage.getItem(lt.NOTIFICATIONS);if(te){const nt=JSON.parse(te).filter((Lt,Ft,Ua)=>Ua.findIndex(Xa=>Xa.id===Lt.id||Xa.message===Lt.message&&Xa.type===Lt.type)===Ft);ye(nt.slice(0,100))}const pe=localStorage.getItem(lt.EMERGENCY_FUND);pe&&qe(JSON.parse(pe));const Je=localStorage.getItem(lt.RECURRING);Je&&ve(JSON.parse(Je));const Ce=localStorage.getItem(lt.REMEMBERED_MOBILE);Ce&&(je(Ce),$(Ce),ue(!0));const Pe=localStorage.getItem(lt.DELETION_SCHEDULE);if(Pe){const Me=new Date(Pe).getTime();new Date().getTime()>=Me?(Na(),console.warn(\"Account purge executed based on schedule.\")):xe(Pe)}}catch(E){console.error(\"Error loading specific local data:\",E)}await bt(),!localStorage.getItem(\"finhub_subscription_migration_v3\")&&r&&(ut(),localStorage.setItem(\"finhub_subscription_migration_v3\",\"true\")),u(!1)},ut=()=>{x(j=>{let E=0;const w=j.map(D=>{const _=[\"other\",\"bills & utilities\",\"entertainment\",\"shopping\",\"\",void 0],Z=Yr(D.description);if(Z&&Z.category===\"Subscription\"){const ne=_.includes(D.category?.toLowerCase())||!D.category,Q=!D.isRecurring;if(ne||Q)return E++,{...D,category:\"Subscription\",isRecurring:!0}}return D});if(E>0){J.info(`Intelligence protocol: Identified and moved ${E} transactions to Subscriptions.`);const D=w.filter(Z=>Z.category===\"Subscription\"),_=new Map;D.forEach(Z=>{const ne=Z.description.toLowerCase().trim();(!_.has(ne)||new Date(Z.date)>new Date(_.get(ne).date))&&_.set(ne,Z)}),_.forEach((Z,ne)=>{he.some(we=>we.description?.toLowerCase().includes(ne)||ne.includes(we.description?.toLowerCase()||\"\"))||setTimeout(()=>{dt({type:\"expense\",description:Z.description,amount:Z.amount,category:\"Subscription\",accountId:Z.accountId,frequency:\"monthly\",startDate:Z.date,tags:[\"auto-migrated\"]})},100)})}return w})},bt=async()=>{try{try{await _e.processRecurring(r)}catch(te){console.error(\"Skip recurring process\",te)}const[j,E,w,D,_,Z,ne,Q,we]=await Promise.all([_e.getSettings(r).catch(()=>({success:!1,settings:void 0})),_e.getAccounts(r).catch(()=>({success:!1,accounts:[]})),_e.getExpenses(r).catch(()=>({success:!1,expenses:[]})),_e.getIncomes(r).catch(()=>({success:!1,incomes:[]})),_e.getDebts(r).catch(()=>({success:!1,debts:[]})),_e.getGoals(r).catch(()=>({success:!1,goals:[]})),_e.getLiabilities(r).catch(()=>({success:!1,liabilities:[]})),_e.getInvestments(r).catch(()=>({success:!1,investments:[]})),_e.getRecurring(r).catch(()=>({success:!1,recurring:[]}))]);ee(!1),G(\"online\"),j.success&&j.settings&&(y(te=>({...te,...j.settings,aiProvider:j.settings.aiProvider||te.aiProvider,apiKeys:{...te.apiKeys,...j.settings.apiKeys}})),ce(j.settings.theme)),E.success&&R(E.accounts||[]),w.success&&x(w.expenses||[]),D.success&&f(D.incomes||[]),_.success&&M(_.debts||[]),Z.success&&B(Z.goals||[]),ne.success&&se(ne.liabilities||[]),Q.success&&V(Q.investments||[]),we.success&&ve(we.recurring||[]),J.success(\"Sync complete\")}catch(j){console.error(\"API Sync failed, using local data\",j),ee(!0),G(\"offline\")}},la=async()=>{g(!0),await bt(),g(!1)},ce=j=>{if(j===\"system\"){const E=window.matchMedia(\"(prefers-color-scheme: dark)\").matches;document.documentElement.classList.toggle(\"dark\",E)}else document.documentElement.classList.toggle(\"dark\",j===\"dark\")},Ee=async j=>{$(j);const E=St.some(w=>w.mobile===j)||localStorage.getItem(`finhub_user_${j}`)!==null;return T(!0),E},He=async(j,E=!1)=>{rt({message:\"Validating PIN\",subMessage:\"Verifying secure node access...\"}),Y(\"authenticating\"),await new Promise(_=>setTimeout(_,2e3));const w=St.find(_=>_.mobile===re&&_.pin===j);let D=null;if(w)D={id:w.userId,mobile:w.mobile,name:w.name};else{const _=localStorage.getItem(`finhub_user_${re}`);if(_){const Z=JSON.parse(_);Z.pin===j&&(D={id:Z.userId,mobile:Z.mobile,name:Z.name})}}return D?(ge(D),localStorage.setItem(lt.AUTH,JSON.stringify(D)),rt({message:\"Handshake Success\",subMessage:\"Synchronizing decrypted ledger...\"}),Y(\"authenticated\"),T(!1),de&&(await It(),J.success(\"Your account deletion request has been canceled. Welcome back!\")),E&&(localStorage.setItem(lt.REMEMBERED_MOBILE,re),je(re),ue(!0)),!0):(rt(void 0),Y(\"guest\"),!1)},yt=async j=>{$(j);const E=Math.floor(1e3+Math.random()*9e3).toString();return Ie(E),console.log(`[AUTH-DEBUG] Mock OTP for ${j}: ${E}`),J.info(\"Verification code sent\",{description:`Dev Mode: Use ${E} (Simulated SMS)`}),!0},Ut=async(j,E)=>E===\"0000\"||E===Ke,Oa=async(j,E)=>{const w=localStorage.getItem(`finhub_user_${j}`);if(w){const _=JSON.parse(w);return _.pin=E,localStorage.setItem(`finhub_user_${j}`,JSON.stringify(_)),J.success(\"PIN reset successfully\"),!0}const D=St.findIndex(_=>_.mobile===j);if(D!==-1){const _={...St[D],pin:E};return localStorage.setItem(`finhub_user_${j}`,JSON.stringify(_)),J.success(\"Demo user PIN updated locally\"),!0}return!1},_a=async(j,E,w,D=!1)=>{rt({message:\"Creating Node\",subMessage:\"Initializing secure identity protocols...\"}),Y(\"authenticating\"),await new Promise(ne=>setTimeout(ne,2e3));const _={id:`user_${Date.now()}`,mobile:j,name:w,pin:E};localStorage.setItem(`finhub_user_${j}`,JSON.stringify(_));const Z={id:_.id,mobile:_.mobile,name:_.name};return ge(Z),localStorage.setItem(lt.AUTH,JSON.stringify(Z)),rt({message:\"Handshake Success\",subMessage:\"Synchronizing decrypted ledger...\"}),Y(\"authenticated\"),T(!1),D&&(localStorage.setItem(lt.REMEMBERED_MOBILE,j),je(j),ue(!0)),!0},ba=()=>{Y(\"guest\"),ge(null),Ie(null),localStorage.removeItem(lt.AUTH),le||$(\"\")},ma=()=>{Y(\"guest\"),ge(null),$(\"\"),Ie(null),localStorage.removeItem(lt.AUTH),localStorage.removeItem(lt.REMEMBERED_MOBILE),je(\"\"),ue(!1)},ja=async()=>{const j=new Date;j.setDate(j.getDate()+30);const E=j.toISOString();xe(E),localStorage.setItem(lt.DELETION_SCHEDULE,E),J.warning(\"Account scheduled for deletion in 30 days.\"),ba()},It=async()=>{xe(null),localStorage.removeItem(lt.DELETION_SCHEDULE)},Na=()=>{Object.values(lt).forEach(j=>{localStorage.removeItem(j)}),x([]),f([]),M([]),B([]),R([]),V([]),se([]),ve([]),ye([]),qe(0),xe(null),Y(\"guest\"),ge(null),J.info(\"Session purged successfully.\")};A.useEffect(()=>{const j=localStorage.getItem(lt.AUTH);if(j)try{const E=JSON.parse(j);E&&E.mobile&&($(E.mobile),Y(\"guest\"))}catch(E){console.error(\"Failed to parse stored auth\",E),localStorage.removeItem(lt.AUTH)}},[]);const Gt=async j=>{const E={...h,...j};y(E),j.theme&&ce(j.theme);try{const w=await _e.updateSettings(r,j);if(w.success)y(D=>({...D,...w.settings,aiProvider:w.settings.aiProvider||D.aiProvider,apiKeys:{...D.apiKeys,...w.settings.apiKeys}}));else throw new Error(w.error)}catch(w){console.error(\"Failed to sync settings\",w),J.error(\"Settings saved locally only\")}},kt=async(j,E)=>{try{const w=await _e.updateRecurring(r,j,E);if(w.success){const D=w.recurring;if(ve(_=>_.map(Z=>Z.id===j?D:Z)),J.success(\"Recurring transaction updated\"),D.startDate){console.log(\"[Backfill Debug Update] Analysis starting for:\",D.description||D.source),J.info(\"Analyzing transaction history...\");const _=new Date,Z=`${_.getFullYear()}-${String(_.getMonth()+1).padStart(2,\"0\")}-${String(_.getDate()).padStart(2,\"0\")}`,ne=D.startDate.split(\"T\")[0];if(console.log(\"[Backfill Debug Update] nowStr:\",Z,\"startStr:\",ne),ne<=Z&&D.type){const[Q,we,te]=ne.split(\"-\").map(Number);let pe=new Date(Q,we-1,te,12,0,0);const Je=[];let Ce=0;for(;Ce<1200;){const nt=pe.getFullYear(),Lt=pe.getMonth(),Ft=pe.getDate();if(`${nt}-${String(Lt+1).padStart(2,\"0\")}-${String(Ft).padStart(2,\"0\")}`>Z)break;switch(Je.push(new Date(pe)),D.frequency){case\"daily\":pe.setDate(pe.getDate()+1);break;case\"weekly\":pe.setDate(pe.getDate()+7);break;case\"monthly\":const Xa=te;pe.setMonth(pe.getMonth()+1),pe.getDate()<Xa&&pe.getMonth()===(Lt+2)%12&&pe.setDate(0);break;case\"yearly\":pe.setFullYear(pe.getFullYear()+1);break;case\"custom\":pe.setDate(pe.getDate()+(D.customIntervalDays||30));break;default:pe.setMonth(pe.getMonth()+1)}Ce++}console.log(\"[Backfill Debug Update] Generated\",Je.length,\"due dates\");const Pe=Number(D.amount),Me=Je.filter(nt=>{const Lt=`${nt.getFullYear()}-${String(nt.getMonth()+1).padStart(2,\"0\")}-${String(nt.getDate()).padStart(2,\"0\")}`;return![...p,...v].some(Ua=>{const Xa=(Ua.date||\"\").split(\"T\")[0],ps=Number(Ua.amount),yn=Math.abs(ps-Pe)<.01;return Xa===Lt&&yn})});console.log(`[Backfill Debug Update] Total Expected: ${Je.length}, Missing: ${Me.length}`),Me.length>0?(console.log(\"[Backfill Debug Update] Triggering popup request for\",Me.length,\"dates\"),tt({count:Me.length,dates:Me,recurring:D})):(console.log(\"[Backfill Debug Update] All expected entries already exist in history.\"),J.success(\"Transaction history is already up to date.\"))}else console.log(\"[Backfill Debug Update] Skip: start date is in the future or invalid type.\")}}}catch(w){console.error(\"Error updating recurring transaction:\",w),ve(D=>D.map(_=>_.id===j?{..._,...E}:_)),J.warning(\"Updated locally\")}},dt=async j=>{try{console.log(\"[Backfill Debug] createRecurringTransaction called with:\",j);const E=await _e.createRecurring(r,j);if(E.success){const w=E.recurring;if(ve(D=>[...D,w]),J.success(\"Recurring transaction created\"),w.startDate){console.log(\"[Backfill Debug] Analysis starting for:\",w.description||w.source),J.info(\"Analyzing transaction history...\");const D=new Date,_=`${D.getFullYear()}-${String(D.getMonth()+1).padStart(2,\"0\")}-${String(D.getDate()).padStart(2,\"0\")}`,Z=w.startDate.split(\"T\")[0];if(console.log(\"[Backfill Debug] nowStr:\",_,\"startStr:\",Z),Z<=_&&w.type){const[ne,Q,we]=Z.split(\"-\").map(Number);let te=new Date(ne,Q-1,we,12,0,0);const pe=[];let Je=0;for(;Je<1200;){const Me=te.getFullYear(),nt=te.getMonth(),Lt=te.getDate();if(`${Me}-${String(nt+1).padStart(2,\"0\")}-${String(Lt).padStart(2,\"0\")}`>_)break;switch(pe.push(new Date(te)),w.frequency){case\"daily\":te.setDate(te.getDate()+1);break;case\"weekly\":te.setDate(te.getDate()+7);break;case\"monthly\":const Ua=we;te.setMonth(te.getMonth()+1),te.getDate()<Ua&&te.getMonth()===(nt+2)%12&&te.setDate(0);break;case\"yearly\":te.setFullYear(te.getFullYear()+1);break;case\"custom\":te.setDate(te.getDate()+(w.customIntervalDays||30));break;default:te.setMonth(te.getMonth()+1)}Je++}console.log(\"[Backfill Debug] Generated\",pe.length,\"due dates\");const Ce=Number(w.amount),Pe=pe.filter(Me=>{const nt=`${Me.getFullYear()}-${String(Me.getMonth()+1).padStart(2,\"0\")}-${String(Me.getDate()).padStart(2,\"0\")}`;return![...p,...v].some(Ft=>{const Ua=(Ft.date||\"\").split(\"T\")[0],Xa=Number(Ft.amount),ps=Math.abs(Xa-Ce)<.01;return Ua===nt&&ps})});console.log(`[Backfill Debug] Total Expected: ${pe.length}, Missing: ${Pe.length}`),Pe.length>0?(console.log(\"[Backfill Debug] Triggering popup request for\",Pe.length,\"dates\"),tt({count:Pe.length,dates:Pe,recurring:w})):(console.log(\"[Backfill Debug] All expected entries already exist in history.\"),J.success(\"Transaction history is already up to date.\"))}else console.log(\"[Backfill Debug] Skip: start date is in the future or invalid type.\")}}}catch(E){console.error(\"Error creating recurring transaction:\",E);const w={id:`temp_${Date.now()}`,...j,createdAt:new Date().toISOString()};ve(D=>[...D,w]),J.warning(\"Offline: Created locally\")}},ds=async()=>{if(!De)return;const{count:j,dates:E,recurring:w}=De,D=J.loading(`Generating ${j} entries...`),_=[],Z=[];let ne=0;const Q=L.find(te=>te.id===w.accountId),we={};for(const te of E){const pe=`${te.getFullYear()}-${String(te.getMonth()+1).padStart(2,\"0\")}-${String(te.getDate()).padStart(2,\"0\")}`,Je={description:w.description,source:w.source,amount:w.amount,category:w.category,date:pe,tags:[...w.tags||[],\"auto-backfill\"],accountId:w.accountId,isRecurring:!0,recurringId:w.id};try{if(w.type===\"expense\"){const Ce=await _e.createExpense(r,Je);Ce.success&&(Z.push(Ce.expense),Q&&(Q.type===\"credit_card\"?ne+=Ce.expense.amount:ne-=Ce.expense.amount),w.goalId&&(we[w.goalId]=(we[w.goalId]||0)+Ce.expense.amount))}else{const Ce=await _e.createIncome(r,Je);Ce.success&&(_.push(Ce.income),Q&&(Q.type===\"credit_card\"?ne-=Ce.income.amount:ne+=Ce.income.amount))}await new Promise(Ce=>setTimeout(Ce,50))}catch(Ce){console.error(`Failed to create backfill for ${pe}`,Ce)}}_.length>0&&f(te=>[...te,..._]),Z.length>0&&x(te=>[...te,...Z]);for(const[te,pe]of Object.entries(we)){const Je=O.find(Ce=>Ce.id===te);if(Je){const Ce=Je.currentAmount+pe;try{await _e.updateGoal(r,te,{currentAmount:Ce}),B(Pe=>Pe.map(Me=>Me.id===te?{...Me,currentAmount:Ce}:Me))}catch(Pe){console.error(\"Failed to update goal after backfill\",Pe)}}}if(Q&&ne!==0){const te=Q.balance+ne;try{await _e.updateAccount(r,Q.id,{balance:te}),R(pe=>pe.map(Je=>Je.id===Q.id?{...Je,balance:te}:Je))}catch(pe){console.error(\"Failed to update account balance after backfill\",pe)}}J.dismiss(D),J.success(`Success: ${j} entries generated`),tt(null)},Sa=async j=>{try{(await _e.deleteRecurring(r,j)).success&&(ve(w=>w.filter(D=>D.id!==j)),J.success(\"Recurring transaction deleted\"))}catch(E){console.error(\"Error deleting recurring transaction:\",E),ve(w=>w.filter(D=>D.id!==j)),J.warning(\"Deleted locally\")}},Aa=async()=>{try{const j=await _e.processRecurring(r);j.success&&(J.success(`Processed ${j.count} transactions`),await bt())}catch(j){console.error(\"Error processing recurring transactions:\",j),J.error(\"Failed to process recurring transactions\")}},un=async j=>{try{const E=L.reduce((te,pe)=>te+(pe.type!==\"credit_card\"?pe.balance:0),0),w=O.reduce((te,pe)=>te+pe.currentAmount,0)+Se,D=S.reduce((te,pe)=>te+pe.emiAmount,0),_=Math.max(0,E-w-D);let Z=j.amount;if(Z>_){const te=Z-_;console.warn(`⚠️ Leakage Detected! Deficit: ${te}. Initiating Shadow Wallet Protocol.`);let pe=te;const Je=[];O.forEach(Me=>{const nt=Me.type||\"growth\";let Lt=1;nt===\"stability\"&&(Lt=2),nt===\"protection\"&&(Lt=3),Me.currentAmount>0&&Je.push({id:Me.id,type:\"goal\",currentAmount:Me.currentAmount,priority:Lt,name:Me.name})}),Se>0&&Je.push({id:\"emergency-fund\",type:\"emergency\",currentAmount:Se,priority:3,name:\"Emergency Fund\"}),Je.sort((Me,nt)=>Me.priority-nt.priority);const Ce=[],Pe=[];for(const Me of Je){if(pe<=0)break;const nt=Math.min(Me.currentAmount,pe);if(pe-=nt,Me.type===\"goal\"){const Lt=Me.currentAmount-nt;Ce.push(ht(Me.id,{currentAmount:Lt,status:\"leaking\"})),Pe.push({id:`leak_${Me.id}_${new Date().toISOString().split(\"T\")[0]}`,type:\"alert\",priority:\"medium\",category:\"transactions\",title:\"Shadow Wallet Leakage\",message:`₹${nt} spent reduced your '${Me.name}' reserve.`,timestamp:new Date,read:!1})}else Me.type===\"emergency\"&&(Ce.push(Promise.resolve(qe(Lt=>Lt-nt))),Pe.push({id:`leak_emergency_${new Date().toISOString().split(\"T\")[0]}`,type:\"alert\",priority:\"medium\",category:\"transactions\",title:\"Emergency Fund Alert\",message:`Warning: ₹${nt} withdrawn from Emergency Fund to cover spending.`,timestamp:new Date,read:!1}))}await Promise.all(Ce),Pe.length>0&&(mt(Pe),Pe.forEach(Me=>J.error(Me.title,{description:Me.message})))}const ne=L.find(te=>te.id===j.accountId);let Q={...j};if(ne?.type===\"credit_card\"){const te=ne.serviceChargePercentage||0;if(te>0){const nt=j.amount*te/100;Q.serviceChargeAmount=nt,console.log(`Credit Service Charge: ${nt}`)}const pe=ne.creditLimit||0,Je=ne.safeLimitPercentage||30,Ce=pe*Je/100,Me=Math.abs(ne.balance)+j.amount;if(Me>Ce&&pe>0)if(j.isIncomeGenerating)J.info(\"Strategic Credit Utilization\",{description:\"Limit exceeded, but marked as income-generating. Proceed with caution.\"});else{J.warning(\"High Interest Risk Detected\",{description:`This transaction puts your CC usage at ${(Me/pe*100).toFixed(1)}%, exceeding your ${Je}% safe limit with no income-justification.`,duration:6e3});const nt={id:`cc_limit_${ne.id}_${new Date().toISOString().split(\"T\")[0]}`,type:\"alert\",priority:\"medium\",category:\"transactions\",title:\"Credit Stability Breach\",message:`Card '${ne.name}' usage protocol exceeded ${Je}% threshold. Avoid non-essential outflow.`,timestamp:new Date,read:!1};mt(nt)}}if(!Q.category||Q.category===\"Other\"){const te=Yr(Q.description);te&&te.category===\"Subscription\"&&(Q.category=\"Subscription\",Q.tags=Array.from(new Set([...Q.tags||[],\"auto-detected\"])))}const we=await _e.createExpense(r,Q);if(we.success){if(x(te=>[...te,we.expense]),ne){const te=j.amount+(Q.serviceChargeAmount||0),pe=ne.type===\"credit_card\"?ne.balance+te:ne.balance-te;await Ye(ne.id,{balance:pe})}if(j.isRecurring){const te={type:\"expense\",description:j.description,amount:j.amount,category:j.category,accountId:j.accountId,frequency:j.frequency||\"monthly\",customIntervalDays:j.customIntervalDays,startDate:j.date,endDate:j.endDate,tags:j.tags};await dt(te)}else if(J.success(\"Expense added!\"),bu(j.description)&&!j.isRecurring){const te={id:`verify_sub_${we.expense.id}`,type:\"insight\",priority:\"medium\",category:\"transactions\",title:\"Automate Payment?\",message:`Detected '${j.description}' as a subscription. Add to cyclical routine?`,timestamp:new Date,read:!1,action:{type:\"verify_subscription\",label:\"Automate\",status:\"pending\",payload:{id:we.expense.id,description:j.description,amount:j.amount,category:j.category,accountId:j.accountId,date:j.date}}};mt(te)}}}catch(E){console.error(\"Create expense failed\",E);const w={id:`temp_${Date.now()}`,...j,createdAt:new Date().toISOString()};x(D=>[...D,w]),J.warning(\"Added in offline mode\")}},nn=async(j,E)=>{try{const w=await _e.updateExpense(r,j,E);if(w.success){const D=p.find(_=>_.id===j);if(D){const _=L.find(Q=>Q.id===D.accountId);if(_){const Q=D.amount+(D.serviceChargeAmount||0),we=_.type===\"credit_card\"?_.balance-Q:_.balance+Q;await Ye(_.id,{balance:we})}const Z=w.expense,ne=L.find(Q=>Q.id===Z.accountId);if(ne){const Q=Z.amount+(Z.serviceChargeAmount||0),we=ne.type===\"credit_card\"?ne.balance+Q:ne.balance-Q;await Ye(ne.id,{balance:we})}E.isRecurring?D.recurringId?await kt(D.recurringId,{amount:E.amount,description:E.description,category:E.category,tags:E.tags,frequency:E.frequency,customIntervalDays:E.customIntervalDays,endDate:E.endDate}):await dt({type:\"expense\",description:E.description,amount:E.amount,category:E.category,accountId:E.accountId,frequency:E.frequency||\"monthly\",customIntervalDays:E.customIntervalDays,startDate:D.date,endDate:E.endDate,tags:E.tags}):D.recurringId&&await Sa(D.recurringId)}x(_=>_.map(Z=>Z.id===j?w.expense:Z)),J.success(\"Expense updated\")}}catch{x(D=>D.map(_=>_.id===j?{..._,...E}:_)),J.warning(\"Updated in offline mode\")}},Fa=async j=>{try{if((await _e.deleteExpense(r,j)).success){const w=p.find(D=>D.id===j);if(w){const D=L.find(_=>_.id===w.accountId);if(D){const _=w.amount+(w.serviceChargeAmount||0),Z=D.type===\"credit_card\"?D.balance-_:D.balance+_;await Ye(D.id,{balance:Z})}}x(D=>D.filter(_=>_.id!==j)),J.success(\"Expense deleted\")}}catch{x(w=>w.filter(D=>D.id!==j)),J.warning(\"Deleted in offline mode\")}},Da=async j=>{try{const E=await _e.createIncome(r,j);if(E.success){f(D=>[...D,E.income]);const w=L.find(D=>D.id===j.accountId);if(w){const D=w.type===\"credit_card\"?w.balance-j.amount:w.balance+j.amount;await Ye(w.id,{balance:D})}if(j.isRecurring){const D={type:\"income\",source:j.source,amount:j.amount,accountId:j.accountId,frequency:j.frequency||\"monthly\",customIntervalDays:j.customIntervalDays,startDate:j.date,endDate:j.endDate,tags:j.tags};await dt(D)}else J.success(\"Income added!\")}}catch{const w={id:`temp_${Date.now()}`,...j,createdAt:new Date().toISOString()};f(D=>[...D,w]),J.warning(\"Added in offline mode\")}},Ue=async(j,E)=>{try{const w=await _e.updateIncome(r,j,E);if(w.success){const D=v.find(_=>_.id===j);if(D){const _=L.find(Q=>Q.id===D.accountId);if(_){const Q=_.type===\"credit_card\"?_.balance+D.amount:_.balance-D.amount;await Ye(_.id,{balance:Q})}const Z=w.income,ne=L.find(Q=>Q.id===Z.accountId);if(ne){const Q=ne.type===\"credit_card\"?ne.balance-Z.amount:ne.balance+Z.amount;await Ye(ne.id,{balance:Q})}E.isRecurring?D.recurringId?await kt(D.recurringId,{amount:E.amount,source:E.source,description:E.source,category:E.category,tags:E.tags,frequency:E.frequency,customIntervalDays:E.customIntervalDays,endDate:E.endDate}):await dt({type:\"income\",description:E.source,source:E.source,amount:E.amount,category:E.category,accountId:E.accountId,frequency:E.frequency||\"monthly\",customIntervalDays:E.customIntervalDays,startDate:D.date,endDate:E.endDate,tags:E.tags}):D.recurringId&&await Sa(D.recurringId)}f(_=>_.map(Z=>Z.id===j?w.income:Z)),J.success(\"Income updated\")}}catch{f(D=>D.map(_=>_.id===j?{..._,...E}:_)),J.warning(\"Updated in offline mode\")}},wt=async j=>{try{if((await _e.deleteIncome(r,j)).success){const w=v.find(D=>D.id===j);if(w){const D=L.find(_=>_.id===w.accountId);if(D){const _=D.type===\"credit_card\"?D.balance+w.amount:D.balance-w.amount;await Ye(D.id,{balance:_})}}f(D=>D.filter(_=>_.id!==j)),J.success(\"Income deleted\")}}catch{f(w=>w.filter(D=>D.id!==j)),J.warning(\"Deleted in offline mode\")}},ie=async j=>{try{const E=await _e.createDebt(r,j);if(E.success){M(D=>[...D,E.debt]);const w=L.find(D=>D.id===j.accountId);if(w){const D=j.type===\"borrowed\"?j.amount:-j.amount,_=w.type===\"credit_card\"?w.balance-D:w.balance+D;await Ye(w.id,{balance:_})}j.isRecurring&&await dt({type:\"expense\",description:`Debt: ${j.personName} (${j.type})`,amount:j.amount,category:\"Debt\",accountId:j.accountId,frequency:j.frequency||\"monthly\",startDate:j.date,tags:[...j.tags||[],\"debt\"]}),J.success(\"Debt created\")}}catch{const w={id:`temp_${Date.now()}`,...j,status:\"pending\",createdAt:new Date().toISOString()};M(D=>[...D,w]),J.warning(\"Added in offline mode\")}},Le=async(j,E)=>{try{const w=await _e.updateDebt(r,j,E);if(w.success){const D=N.find(_=>_.id===j);if(D){const _=L.find(Q=>Q.id===D.accountId);if(_){const Q=D.type===\"borrowed\"?-D.amount:D.amount,we=_.type===\"credit_card\"?_.balance-Q:_.balance+Q;await Ye(_.id,{balance:we})}const Z=w.debt,ne=L.find(Q=>Q.id===Z.accountId);if(ne){const Q=Z.type===\"borrowed\"?Z.amount:-Z.amount,we=ne.type===\"credit_card\"?ne.balance-Q:ne.balance+Q;await Ye(ne.id,{balance:we})}E.isRecurring&&(D.recurringId?await kt(D.recurringId,{amount:E.amount,description:`Debt: ${E.personName} (${E.type})`}):await dt({type:\"expense\",description:`Debt: ${E.personName} (${E.type})`,amount:E.amount,category:\"Debt\",accountId:E.accountId,frequency:E.frequency||\"monthly\",startDate:E.date,tags:[...E.tags||[],\"debt\"]}))}M(_=>_.map(Z=>Z.id===j?w.debt:Z)),J.success(\"Debt updated\")}}catch{M(D=>D.map(_=>_.id===j?{..._,...E}:_)),J.warning(\"Updated in offline mode\")}},ft=async j=>{try{if((await _e.deleteDebt(r,j)).success){const w=N.find(D=>D.id===j);if(w){const D=L.find(_=>_.id===w.accountId);if(D){const _=w.type===\"borrowed\"?-w.amount:w.amount,Z=D.type===\"credit_card\"?D.balance-_:D.balance+_;await Ye(D.id,{balance:Z})}}M(D=>D.filter(_=>_.id!==j)),J.success(\"Debt deleted\")}}catch{M(w=>w.filter(D=>D.id!==j)),J.warning(\"Deleted in offline mode\")}},at=async j=>{try{const E=await _e.updateDebt(r,j,{status:\"settled\"});if(E.success){const w=N.find(D=>D.id===j);if(w&&w.status!==\"settled\"){const D=L.find(_=>_.id===w.accountId);if(D){const _=w.type===\"borrowed\"?-w.amount:w.amount,Z=D.type===\"credit_card\"?D.balance-_:D.balance+_;await Ye(D.id,{balance:Z});const ne={description:`Debt Settlement: ${w.personName}`,amount:w.amount,category:\"Transfer\",date:new Date().toISOString().split(\"T\")[0],tags:[\"debt-settlement\"],accountId:w.accountId};if(w.type===\"borrowed\"){const Q=await _e.createExpense(r,ne);Q.success&&x(we=>[...we,Q.expense])}else{const Q=await _e.createIncome(r,ne);Q.success&&f(we=>[...we,Q.income])}}}M(D=>D.map(_=>_.id===j?E.debt:_)),J.success(\"🎉 Debt settled! Great job!\"),ji({particleCount:150,spread:100,origin:{y:.6}})}}catch{M(w=>w.map(D=>D.id===j?{...D,status:\"settled\"}:D)),J.warning(\"Marked as settled locally\")}},Bt=async()=>{let j=0;const E=[];for(const w of p)if(w.category!==\"Subscription\"&&bu(w.description)){const D=Yr(w.description);D&&D.category===\"Subscription\"&&(E.push(nn(w.id,{category:\"Subscription\",tags:[...new Set([...w.tags,\"auto-migrated\",\"subscription\"])]})),j++)}return E.length>0?(await Promise.all(E),J.success(`Migrated ${j} transactions to Subscriptions`)):J.info(\"No subscription transactions found to migrate\"),{count:j}},Mt=async()=>{let j=0;const E=[],w=new Set,D=new Set;p.forEach(ne=>{const Q=`${ne.date}-${ne.description?.toLowerCase().trim()}-${ne.amount}`,we=!ne.description||ne.description.trim()===\"\"||ne.amount===0,te=w.has(Q);we||te?D.add(ne.id):w.add(Q)});const _=new Map;p.forEach(ne=>{if(D.has(ne.id))return;if(ne.category===\"Subscription\"||ne.isRecurring||bu(ne.description)){const we=new Date(ne.date),te=`${ne.description.toLowerCase().trim()}-${we.getFullYear()}-${we.getMonth()}`;_.has(te)||_.set(te,[]),_.get(te).push(ne)}}),_.forEach(ne=>{if(ne.length>1){ne.sort((Q,we)=>Q.isRecurring!==we.isRecurring?Q.isRecurring?-1:1:new Date(we.date).getTime()-new Date(Q.date).getTime());for(let Q=1;Q<ne.length;Q++)D.add(ne[Q].id)}}),D.forEach(ne=>{E.push(Fa(ne)),j++});const Z=new Set;for(const ne of v){const Q=`${ne.date}-${ne.source?.toLowerCase().trim()}-${ne.amount}`,we=!ne.source||ne.source.trim()===\"\"||ne.amount===0,te=Z.has(Q);we||te?(E.push(wt(ne.id)),j++):Z.add(Q)}return E.length>0?(await Promise.all(E),J.success(`Cleaned up ${j} entries (Duplicates & Density Checks)`)):J.info(\"Logs are clean. No redundancies found.\"),{count:j}},Ct=async j=>{try{const E=await _e.createGoal(r,j);E.success&&(B(w=>[...w,E.goal]),j.monthly_contribution>0&&await dt({type:\"expense\",description:`Goal Contribution: ${E.goal.name}`,amount:j.monthly_contribution,category:\"Transfer\",accountId:j.accountId||\"none\",frequency:\"monthly\",startDate:j.startDate||E.goal.createdAt.split(\"T\")[0],tags:[\"goal\",\"contribution\",E.goal.name.toLowerCase()],goalId:E.goal.id}),J.success(\"Goal created\"))}catch{const w={id:`temp_${Date.now()}`,...j,createdAt:new Date().toISOString()};B(D=>[...D,w]),J.warning(\"Created in offline mode\")}},ht=async(j,E)=>{try{const w=await _e.updateGoal(r,j,E);if(w.success){const D=O.find(_=>_.id===j);if(D){if((w.goal.monthly_contribution||0)>0){const _=he.find(Z=>Z.goalId===j);_?await kt(_.id,{amount:w.goal.monthly_contribution||0,description:`Goal Contribution: ${w.goal.name}`}):await dt({type:\"expense\",description:`Goal Contribution: ${w.goal.name}`,amount:w.goal.monthly_contribution||0,category:\"Transfer\",accountId:w.goal.accountId||\"none\",frequency:\"monthly\",startDate:w.goal.startDate||D.createdAt?.split(\"T\")[0]||new Date().toISOString().split(\"T\")[0],tags:[\"goal\",\"contribution\",w.goal.name.toLowerCase()],goalId:w.goal.id})}else if(D.monthly_contribution&&D.monthly_contribution>0){const _=he.find(Z=>Z.goalId===j);_&&await Sa(_.id)}}B(_=>_.map(Z=>Z.id===j?w.goal:Z)),w.goal.currentAmount>=w.goal.targetAmount?(J.success(`🎉 Goal \"${w.goal.name}\" completed!`),ji({particleCount:200,spread:120,origin:{y:.5}})):J.success(\"Goal updated\")}}catch{B(D=>D.map(_=>_.id===j?{..._,...E}:_)),J.warning(\"Updated locally\")}},Yt=async j=>{try{(await _e.deleteGoal(r,j)).success&&(B(w=>w.filter(D=>D.id!==j)),J.success(\"Goal deleted\"))}catch{B(w=>w.filter(D=>D.id!==j)),J.warning(\"Deleted locally\")}},Rt=async j=>{try{const E=await _e.createAccount(r,j);E.success&&(R(w=>[...w,E.account]),J.success(\"Account created\"))}catch{const w={id:`temp_${Date.now()}`,...j,createdAt:new Date().toISOString()};R(D=>[...D,w]),J.warning(\"Created locally\")}},Ye=async(j,E)=>{try{const w=await _e.updateAccount(r,j,E);w.success&&(R(D=>D.map(_=>_.id===j?w.account:_)),J.success(\"Account updated\"))}catch{R(D=>D.map(_=>_.id===j?{..._,...E}:_)),J.warning(\"Updated locally\")}},$a=async j=>{try{(await _e.deleteAccount(r,j)).success&&(R(w=>w.filter(D=>D.id!==j)),J.success(\"Account deleted\"))}catch{R(w=>w.filter(D=>D.id!==j)),J.warning(\"Deleted locally\")}},na=async j=>{try{const E=await _e.createLiability(r,j);E.success&&(se(w=>[...w,E.liability]),J.success(\"Liability created\"),E.liability.emiAmount>0&&await dt({type:\"expense\",description:`EMI: ${E.liability.name}`,amount:E.liability.emiAmount,category:\"EMI\",accountId:E.liability.accountId||\"none\",frequency:\"monthly\",startDate:E.liability.startDate,tags:[\"emi\",\"liability\",E.liability.name.toLowerCase()],liabilityId:E.liability.id}))}catch{const w={id:`temp_${Date.now()}`,...j,principal:Number(j.principal),outstanding:Number(j.outstanding),interestRate:Number(j.interestRate),emiAmount:Number(j.emiAmount),tenure:Number(j.tenure),createdAt:new Date().toISOString()};se(D=>[...D,w]),J.warning(\"Created locally\")}},Qt=async(j,E)=>{try{const w=await _e.updateLiability(r,j,E);if(w.success){const D=S.find(_=>_.id===j);if(D){if(w.liability.emiAmount>0){const _=he.find(Z=>Z.liabilityId===j);_?await kt(_.id,{amount:w.liability.emiAmount,description:`EMI: ${w.liability.name}`}):await dt({type:\"expense\",description:`EMI: ${w.liability.name}`,amount:w.liability.emiAmount,category:\"EMI\",accountId:w.liability.accountId||\"none\",frequency:\"monthly\",startDate:w.liability.startDate,tags:[\"emi\",\"liability\",w.liability.name.toLowerCase()],liabilityId:w.liability.id})}else if(D.emiAmount>0){const _=he.find(Z=>Z.liabilityId===j);_&&await Sa(_.id)}}se(_=>_.map(Z=>Z.id===j?w.liability:Z)),J.success(\"Liability updated\")}}catch{se(D=>D.map(_=>_.id===j?{..._,...E}:_)),J.warning(\"Updated locally\")}},sa=async j=>{try{(await _e.deleteLiability(r,j)).success&&(se(w=>w.filter(D=>D.id!==j)),J.success(\"Liability deleted\"))}catch{se(w=>w.filter(D=>D.id!==j)),J.warning(\"Deleted locally\")}},dn=async(j,E)=>{try{const w=await _e.createInvestment(r,j);if(w.success){if(V(D=>[...D,w.investment]),E&&E!==\"none\"){const D=L.find(_=>_.id===E);if(D){const _=j.buyPrice*j.quantity;await Ye(E,{balance:D.balance-_});const Z={description:`Asset Purchase: ${j.symbol} (${j.quantity} units)`,amount:_,category:\"Transfer\",date:j.purchaseDate||new Date().toISOString().split(\"T\")[0],tags:[\"investment\",\"principal\",j.symbol],accountId:E},ne=await _e.createExpense(r,Z);ne.success&&x(Q=>[...Q,ne.expense])}}w.investment.type===\"sip\"&&await dt({type:\"expense\",description:`SIP: ${w.investment.symbol} (${w.investment.name})`,amount:w.investment.buyPrice*w.investment.quantity,category:\"Investment\",accountId:E||\"none\",frequency:\"monthly\",startDate:w.investment.purchaseDate,tags:[\"sip\",\"investment\",w.investment.symbol.toLowerCase()],investmentId:w.investment.id}),J.success(\"Investment created\")}}catch{const D={id:`temp_${Date.now()}`,...j,createdAt:new Date().toISOString()};V(_=>[..._,D]),J.warning(\"Created locally\")}},fs=async(j,E)=>{try{const w=await _e.updateInvestment(r,j,E);if(w.success){const D=P.find(_=>_.id===j);if(D){if(w.investment.type===\"sip\"){const _=he.find(Z=>Z.investmentId===j);_?await kt(_.id,{amount:w.investment.buyPrice*w.investment.quantity,description:`SIP: ${w.investment.symbol} (${w.investment.name})`}):await dt({type:\"expense\",description:`SIP: ${w.investment.symbol} (${w.investment.name})`,amount:w.investment.buyPrice*w.investment.quantity,category:\"Investment\",accountId:w.investment.accountId||\"none\",frequency:\"monthly\",startDate:w.investment.purchaseDate,tags:[\"sip\",\"investment\",w.investment.symbol.toLowerCase()],investmentId:w.investment.id})}else if(D.type===\"sip\"){const _=he.find(Z=>Z.investmentId===j);_&&await Sa(_.id)}}V(_=>_.map(Z=>Z.id===j?w.investment:Z)),J.success(\"Investment updated\")}}catch{V(D=>D.map(_=>_.id===j?{..._,...E}:_)),J.warning(\"Updated locally\")}},ao=async j=>{try{(await _e.deleteInvestment(r,j)).success&&(V(w=>w.filter(D=>D.id!==j)),J.success(\"Investment deleted\"))}catch{V(w=>w.filter(D=>D.id!==j)),J.warning(\"Deleted locally\")}},[no,ki]=A.useState(!1),[ms,Ci]=A.useState(\"goal\"),Ln=j=>{Ci(j),ki(!0)},qn=()=>{ki(!1)},hs=async j=>{const E=L.find(w=>w.id===j.accountId);if(!E){J.error(\"Account not found\");return}if(E.balance<j.amount){J.error(`Insufficient funds in ${E.name}`);return}if(await Ye(j.accountId,{balance:E.balance-j.amount}),j.destinationType===\"goal\"){const w=O.find(D=>D.id===j.destinationId);w&&await ht(j.destinationId,{currentAmount:w.currentAmount+j.amount})}else qe(w=>w+j.amount);J.success(`Successfully allocated ${cn[h.currency]}${j.amount.toLocaleString()} from ${E.name}!`,{description:`${j.destinationType===\"goal\"?\"Goal\":\"Emergency Fund\"} balance updated`}),ji({particleCount:100,spread:70,origin:{y:.6}})},In=async(j,E)=>{const w=L.find(D=>D.id===j);if(w){if(w.balance<E)throw J.error(`Insufficient funds in ${w.name}`),new Error(\"Insufficient funds\");await Ye(j,{balance:w.balance-E})}},Zt=async(j,E,w)=>{const D=L.find(Z=>Z.id===j),_=L.find(Z=>Z.id===E);if(!D||!_){J.error(\"Source or destination account not found\");return}if(D.balance<w){J.error(`Insufficient funds in ${D.name}`);return}try{await Ye(j,{balance:D.balance-w});const Z=_.type===\"credit_card\"?-w:w;await Ye(E,{balance:_.balance+Z});const ne={description:`Migration: ${D.name} → ${_.name}`,amount:w,category:\"Transfer\",date:new Date().toISOString().split(\"T\")[0],tags:[\"internal\",\"migration\"],accountId:j},Q=await _e.createExpense(r,ne);Q.success&&x(we=>[...we,Q.expense]),J.success(`Transferred ${cn[h.currency]}${w.toLocaleString()}!`,{description:`From ${D.name} to ${_.name}`}),ji({particleCount:50,spread:60,origin:{y:.7}})}catch(Z){console.error(\"Transfer failed\",Z),J.error(\"Capital migration protocol failed\")}},Cl=async()=>{try{const j=J.loading(\"Initiating factory reset...\"),E=async(D,_)=>{const Z=D.map(ne=>_(r,ne.id).catch(Q=>console.warn(`Failed to delete ${ne.id}`,Q)));await Promise.all(Z)};await Promise.all([E(he,_e.deleteRecurring),E(p,_e.deleteExpense),E(v,_e.deleteIncome),E(N,_e.deleteDebt),E(O,_e.deleteGoal),E(P,_e.deleteInvestment),E(S,_e.deleteLiability)]);const w=L.map(D=>_e.updateAccount(r,D.id,{balance:0}).catch(_=>console.warn(`Failed to reset ${D.name}`,_)));await Promise.all(w),await bt(),J.dismiss(j),J.success(\"All data purged. Clean slate initialized.\")}catch(j){console.error(j),J.error(\"Partial purge only. Some data remains.\")}};return n.jsx(bp.Provider,{value:{userId:r,settings:h,currency:h.currency,expenses:p,incomes:v,debts:N,goals:O,accounts:L,investments:P,liabilities:S,recurringTransactions:he,notifications:fe,emergencyFundAmount:Se,isLoading:c,isRefreshing:m,isOffline:Te,apiStatus:me,isFundAllocationOpen:no,fundAllocationType:ms,authStatus:C,currentUser:oe,isAwaitingPin:z,isRememberedUser:le,rememberedMobile:Ne,authMessage:Ve,refreshData:la,updateSettings:Gt,checkIdentity:Ee,login:He,signup:_a,logout:ba,clearPendingSession:ma,scheduleAccountDeletion:ja,cancelAccountDeletion:It,deletionDate:de,sendOtp:yt,verifyOtp:Ut,resetPin:Oa,pendingMobile:re,createExpense:un,updateExpense:nn,deleteExpense:Fa,createIncome:Da,updateIncome:Ue,deleteIncome:wt,createDebt:ie,updateDebt:Le,deleteDebt:ft,settleDebt:at,createGoal:Ct,updateGoal:ht,deleteGoal:Yt,createAccount:Rt,updateAccount:Ye,deleteAccount:$a,createLiability:na,updateLiability:Qt,deleteLiability:sa,migrateSubscriptions:Bt,cleanupDuplicates:Mt,createInvestment:dn,updateInvestment:fs,deleteInvestment:ao,createRecurringTransaction:dt,createRecurring:dt,updateRecurringTransaction:kt,deleteRecurringTransaction:Sa,processRecurringTransactions:Aa,setEmergencyFundAmount:qe,setNotifications:ye,applyTheme:ce,openFundAllocation:Ln,closeFundAllocation:qn,performFundAllocation:hs,deductFromAccount:In,transferFunds:Zt,clearAllData:Cl,backfillRequest:De,setBackfillRequest:tt,executeBackfill:ds},children:i})};function $e(i,r=\"USD\",c=!1){const u=typeof i==\"string\"?parseFloat(i.replace(/,/g,\"\")):i;if(isNaN(u))return\"\";const m=r===\"INR\"?\"en-IN\":\"en-US\",g={style:\"currency\",currency:r,notation:c?\"compact\":\"standard\",maximumFractionDigits:c?1:2};try{return new Intl.NumberFormat(m,g).format(u)}catch{return new Intl.NumberFormat(m,{...g,style:\"decimal\"}).format(u)}}function Qu(i,r=\"en-IN\"){const c=typeof i==\"string\"?parseFloat(i.replace(/,/g,\"\")):i;return isNaN(c)?\"\":new Intl.NumberFormat(r).format(c)}const yu=Qu;function o1(i){return i===\"\"||i===\"-\"?!0:/^-?\\d*\\.?\\d*$/.test(i)}function Wh(i){return i.replace(/,/g,\"\")}function UN(i){if(i<=0)return\"0 months\";const r=Math.floor(i/12),c=i%12,u=[];return r>0&&u.push(`${r} ${r===1?\"year\":\"years\"}`),(c>0||r===0)&&u.push(`${c} ${c===1?\"month\":\"months\"}`),u.join(\", \")}function BN(i,r=\"INR\"){const c=Math.abs(i),u=i<0?\"-\":\"\";if(r===\"INR\"){if(c>=1e7)return`${u}${(c/1e7).toFixed(2).replace(/\\.00$/,\"\")}C`;if(c>=1e5)return`${u}${(c/1e5).toFixed(2).replace(/\\.00$/,\"\")}L`;if(c>=1e4)return`${u}${(c/1e3).toFixed(1).replace(/\\.0$/,\"\")}K`}else{if(c>=1e9)return`${u}${(c/1e9).toFixed(2).replace(/\\.00$/,\"\")}B`;if(c>=1e6)return`${u}${(c/1e6).toFixed(2).replace(/\\.00$/,\"\")}M`;if(c>=1e4)return`${u}${(c/1e3).toFixed(1).replace(/\\.0$/,\"\")}K`}return u+Qu(c,r===\"INR\"?\"en-IN\":\"en-US\")}function LN(i,r=\"INR\"){const c=Math.abs(i),u=i<0?\"-\":\"\",m=(g,h)=>{let y=2;return g>=100?y=0:g>=10&&(y=1),`${u}${g.toFixed(y).replace(/\\.0+$/,\"\")}${h}`};if(r===\"INR\"){if(c>=1e7)return m(c/1e7,\"Cr\");if(c>=1e5)return m(c/1e5,\"L\");if(c>=1e3)return m(c/1e3,\"K\")}else{if(c>=1e9)return m(c/1e9,\"B\");if(c>=1e6)return m(c/1e6,\"M\");if(c>=1e3)return m(c/1e3,\"K\")}return u+Qu(c,r===\"INR\"?\"en-IN\":\"en-US\")}const Zu=A.createContext({});function Ku(i){const r=A.useRef(null);return r.current===null&&(r.current=i()),r.current}const yp=np?A.useLayoutEffect:A.useEffect,eo=A.createContext(null),Ju=A.createContext({transformPagePoint:i=>i,isStatic:!1,reducedMotion:\"never\"});function e0(i,r){if(typeof i==\"function\")return i(r);i!=null&&(i.current=r)}function c1(...i){return r=>{let c=!1;const u=i.map(m=>{const g=e0(m,r);return!c&&typeof g==\"function\"&&(c=!0),g});if(c)return()=>{for(let m=0;m<u.length;m++){const g=u[m];typeof g==\"function\"?g():e0(i[m],null)}}}}function u1(...i){return A.useCallback(c1(...i),i)}class d1 extends A.Component{getSnapshotBeforeUpdate(r){const c=this.props.childRef.current;if(c&&r.isPresent&&!this.props.isPresent){const u=c.offsetParent,m=Cy(u)&&u.offsetWidth||0,g=this.props.sizeRef.current;g.height=c.offsetHeight||0,g.width=c.offsetWidth||0,g.top=c.offsetTop,g.left=c.offsetLeft,g.right=m-g.width-g.left}return null}componentDidUpdate(){}render(){return this.props.children}}function f1({children:i,isPresent:r,anchorX:c,root:u}){const m=A.useId(),g=A.useRef(null),h=A.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:y}=A.useContext(Ju),p=i.props?.ref??i?.ref,x=u1(g,p);return A.useInsertionEffect(()=>{const{width:v,height:f,top:N,left:M,right:O}=h.current;if(r||!g.current||!v||!f)return;const B=c===\"left\"?`left: ${M}`:`right: ${O}`;g.current.dataset.motionPopId=m;const L=document.createElement(\"style\");y&&(L.nonce=y);const R=u??document.head;return R.appendChild(L),L.sheet&&L.sheet.insertRule(`"
      },
      {
        "file": "dist_test\\assets\\index-DHabN7TV.js",
        "line": 11,
        "snippet": "`);try{z=new Worker(URL.createObjectURL(new Blob([le])))}catch(ue){return typeof console<\"u\"&&typeof console.warn==\"function\"&&console.warn(\"🎊 Could not load worker\",ue),null}$(z)}return z}})(),M={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:[\"square\",\"circle\"],zIndex:100,colors:[\"#26ccff\",\"#a25afd\",\"#ff5e7e\",\"#88ff5a\",\"#fcff42\",\"#ffa62d\",\"#ff36ff\"],disableForReducedMotion:!1,scalar:1};function O(z,T){return T?T(z):z}function B(z){return z!=null}function L(z,T,re){return O(z&&B(z[T])?z[T]:M[T],re)}function R(z){return z<0?0:Math.floor(z)}function P(z,T){return Math.floor(Math.random()*(T-z))+z}function V(z){return parseInt(z,16)}function S(z){return z.map(se)}function se(z){var T=String(z).replace(/[^0-9a-f]/gi,\"\");return T.length<6&&(T=T[0]+T[0]+T[1]+T[1]+T[2]+T[2]),{r:V(T.substring(0,2)),g:V(T.substring(2,4)),b:V(T.substring(4,6))}}function he(z){var T=L(z,\"origin\",Object);return T.x=L(T,\"x\",Number),T.y=L(T,\"y\",Number),T}function ve(z){z.width=document.documentElement.clientWidth,z.height=document.documentElement.clientHeight}function fe(z){var T=z.getBoundingClientRect();z.width=T.width,z.height=T.height}function ye(z){var T=document.createElement(\"canvas\");return T.style.position=\"fixed\",T.style.top=\"0px\",T.style.left=\"0px\",T.style.pointerEvents=\"none\",T.style.zIndex=z,T}function Se(z,T,re,$,le,ue,Ne,je,de){z.save(),z.translate(T,re),z.rotate(ue),z.scale($,le),z.arc(0,0,1,Ne,je,de),z.restore()}function qe(z){var T=z.angle*(Math.PI/180),re=z.spread*(Math.PI/180);return{x:z.x,y:z.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:z.startVelocity*.5+Math.random()*z.startVelocity,angle2D:-T+(.5*re-Math.random()*re),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:z.color,shape:z.shape,tick:0,totalTicks:z.ticks,decay:z.decay,drift:z.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:z.gravity*3,ovalScalar:.6,scalar:z.scalar,flat:z.flat}}function Te(z,T){T.x+=Math.cos(T.angle2D)*T.velocity+T.drift,T.y+=Math.sin(T.angle2D)*T.velocity+T.gravity,T.velocity*=T.decay,T.flat?(T.wobble=0,T.wobbleX=T.x+10*T.scalar,T.wobbleY=T.y+10*T.scalar,T.tiltSin=0,T.tiltCos=0,T.random=1):(T.wobble+=T.wobbleSpeed,T.wobbleX=T.x+10*T.scalar*Math.cos(T.wobble),T.wobbleY=T.y+10*T.scalar*Math.sin(T.wobble),T.tiltAngle+=.1,T.tiltSin=Math.sin(T.tiltAngle),T.tiltCos=Math.cos(T.tiltAngle),T.random=Math.random()+2);var re=T.tick++/T.totalTicks,$=T.x+T.random*T.tiltCos,le=T.y+T.random*T.tiltSin,ue=T.wobbleX+T.random*T.tiltCos,Ne=T.wobbleY+T.random*T.tiltSin;if(z.fillStyle=\"rgba(\"+T.color.r+\", \"+T.color.g+\", \"+T.color.b+\", \"+(1-re)+\")\",z.beginPath(),h&&T.shape.type===\"path\"&&typeof T.shape.path==\"string\"&&Array.isArray(T.shape.matrix))z.fill(Y(T.shape.path,T.shape.matrix,T.x,T.y,Math.abs(ue-$)*.1,Math.abs(Ne-le)*.1,Math.PI/10*T.wobble));else if(T.shape.type===\"bitmap\"){var je=Math.PI/10*T.wobble,de=Math.abs(ue-$)*.1,xe=Math.abs(Ne-le)*.1,Ke=T.shape.bitmap.width*T.scalar,Ie=T.shape.bitmap.height*T.scalar,Ve=new DOMMatrix([Math.cos(je)*de,Math.sin(je)*de,-Math.sin(je)*xe,Math.cos(je)*xe,T.x,T.y]);Ve.multiplySelf(new DOMMatrix(T.shape.matrix));var rt=z.createPattern(v.transform(T.shape.bitmap),\"no-repeat\");rt.setTransform(Ve),z.globalAlpha=1-re,z.fillStyle=rt,z.fillRect(T.x-Ke/2,T.y-Ie/2,Ke,Ie),z.globalAlpha=1}else if(T.shape===\"circle\")z.ellipse?z.ellipse(T.x,T.y,Math.abs(ue-$)*T.ovalScalar,Math.abs(Ne-le)*T.ovalScalar,Math.PI/10*T.wobble,0,2*Math.PI):Se(z,T.x,T.y,Math.abs(ue-$)*T.ovalScalar,Math.abs(Ne-le)*T.ovalScalar,Math.PI/10*T.wobble,0,2*Math.PI);else if(T.shape===\"star\")for(var De=Math.PI/2*3,tt=4*T.scalar,St=8*T.scalar,mt=T.x,zt=T.y,ut=5,bt=Math.PI/ut;ut--;)mt=T.x+Math.cos(De)*St,zt=T.y+Math.sin(De)*St,z.lineTo(mt,zt),De+=bt,mt=T.x+Math.cos(De)*tt,zt=T.y+Math.sin(De)*tt,z.lineTo(mt,zt),De+=bt;else z.moveTo(Math.floor(T.x),Math.floor(T.y)),z.lineTo(Math.floor(T.wobbleX),Math.floor(le)),z.lineTo(Math.floor(ue),Math.floor(Ne)),z.lineTo(Math.floor($),Math.floor(T.wobbleY));return z.closePath(),z.fill(),T.tick<T.totalTicks}function ee(z,T,re,$,le){var ue=T.slice(),Ne=z.getContext(\"2d\"),je,de,xe=x(function(Ke){function Ie(){je=de=null,Ne.clearRect(0,0,$.width,$.height),v.clear(),le(),Ke()}function Ve(){u&&!($.width===m.width&&$.height===m.height)&&($.width=z.width=m.width,$.height=z.height=m.height),!$.width&&!$.height&&(re(z),$.width=z.width,$.height=z.height),Ne.clearRect(0,0,$.width,$.height),ue=ue.filter(function(rt){return Te(Ne,rt)}),ue.length?je=f.frame(Ve):Ie()}je=f.frame(Ve),de=Ie});return{addFettis:function(Ke){return ue=ue.concat(Ke),xe},canvas:z,promise:xe,reset:function(){je&&f.cancel(je),de&&de()}}}function me(z,T){var re=!z,$=!!L(T||{},\"resize\"),le=!1,ue=L(T,\"disableForReducedMotion\",Boolean),Ne=g&&!!L(T||{},\"useWorker\"),je=Ne?N():null,de=re?ve:fe,xe=z&&je?!!z.__confetti_initialized:!1,Ke=typeof matchMedia==\"function\"&&matchMedia(\"(prefers-reduced-motion)\").matches,Ie;function Ve(De,tt,St){for(var mt=L(De,\"particleCount\",R),zt=L(De,\"angle\",Number),ut=L(De,\"spread\",Number),bt=L(De,\"startVelocity\",Number),la=L(De,\"decay\",Number),ce=L(De,\"gravity\",Number),Ee=L(De,\"drift\",Number),He=L(De,\"colors\",S),yt=L(De,\"ticks\",Number),Ut=L(De,\"shapes\"),Oa=L(De,\"scalar\"),_a=!!L(De,\"flat\"),ba=he(De),ma=mt,ja=[],It=z.width*ba.x,Na=z.height*ba.y;ma--;)ja.push(qe({x:It,y:Na,angle:zt,spread:ut,startVelocity:bt,color:He[ma%He.length],shape:Ut[P(0,Ut.length)],ticks:yt,decay:la,gravity:ce,drift:Ee,scalar:Oa,flat:_a}));return Ie?Ie.addFettis(ja):(Ie=ee(z,ja,de,tt,St),Ie.promise)}function rt(De){var tt=ue||L(De,\"disableForReducedMotion\",Boolean),St=L(De,\"zIndex\",Number);if(tt&&Ke)return x(function(bt){bt()});re&&Ie?z=Ie.canvas:re&&!z&&(z=ye(St),document.body.appendChild(z)),$&&!xe&&de(z);var mt={width:z.width,height:z.height};je&&!xe&&je.init(z),xe=!0,je&&(z.__confetti_initialized=!0);function zt(){if(je){var bt={getBoundingClientRect:function(){if(!re)return z.getBoundingClientRect()}};de(bt),je.postMessage({resize:{width:bt.width,height:bt.height}});return}mt.width=mt.height=null}function ut(){Ie=null,$&&(le=!1,r.removeEventListener(\"resize\",zt)),re&&z&&(document.body.contains(z)&&document.body.removeChild(z),z=null,xe=!1)}return $&&!le&&(le=!0,r.addEventListener(\"resize\",zt,!1)),je?je.fire(De,mt,ut):Ve(De,mt,ut)}return rt.reset=function(){je&&je.reset(),Ie&&Ie.reset()},rt}var G;function C(){return G||(G=me(null,{useWorker:!0,resize:!0})),G}function Y(z,T,re,$,le,ue,Ne){var je=new Path2D(z),de=new Path2D;de.addPath(je,new DOMMatrix(T));var xe=new Path2D;return xe.addPath(de,new DOMMatrix([Math.cos(Ne)*le,Math.sin(Ne)*le,-Math.sin(Ne)*ue,Math.cos(Ne)*ue,re,$])),xe}function oe(z){if(!h)throw new Error(\"path confetti are not supported in this browser\");var T,re;typeof z==\"string\"?T=z:(T=z.path,re=z.matrix);var $=new Path2D(T),le=document.createElement(\"canvas\"),ue=le.getContext(\"2d\");if(!re){for(var Ne=1e3,je=Ne,de=Ne,xe=0,Ke=0,Ie,Ve,rt=0;rt<Ne;rt+=2)for(var De=0;De<Ne;De+=2)ue.isPointInPath($,rt,De,\"nonzero\")&&(je=Math.min(je,rt),de=Math.min(de,De),xe=Math.max(xe,rt),Ke=Math.max(Ke,De));Ie=xe-je,Ve=Ke-de;var tt=10,St=Math.min(tt/Ie,tt/Ve);re=[St,0,0,St,-Math.round(Ie/2+je)*St,-Math.round(Ve/2+de)*St]}return{type:\"path\",path:T,matrix:re}}function ge(z){var T,re=1,$=\"#000000\",le='\"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\", \"EmojiOne Color\", \"Android Emoji\", \"Twemoji Mozilla\", \"system emoji\", sans-serif';typeof z==\"string\"?T=z:(T=z.text,re=\"scalar\"in z?z.scalar:re,le=\"fontFamily\"in z?z.fontFamily:le,$=\"color\"in z?z.color:$);var ue=10*re,Ne=\"\"+ue+\"px \"+le,je=new OffscreenCanvas(ue,ue),de=je.getContext(\"2d\");de.font=Ne;var xe=de.measureText(T),Ke=Math.ceil(xe.actualBoundingBoxRight+xe.actualBoundingBoxLeft),Ie=Math.ceil(xe.actualBoundingBoxAscent+xe.actualBoundingBoxDescent),Ve=2,rt=xe.actualBoundingBoxLeft+Ve,De=xe.actualBoundingBoxAscent+Ve;Ke+=Ve+Ve,Ie+=Ve+Ve,je=new OffscreenCanvas(Ke,Ie),de=je.getContext(\"2d\"),de.font=Ne,de.fillStyle=$,de.fillText(T,rt,De);var tt=1/re;return{type:\"bitmap\",bitmap:je.transferToImageBitmap(),matrix:[tt,0,0,tt,-Ke*tt/2,-Ie*tt/2]}}c.exports=function(){return C().apply(this,arguments)},c.exports.reset=function(){C().reset()},c.exports.create=me,c.exports.shapeFromPath=oe,c.exports.shapeFromText=ge})((function(){return typeof window<\"u\"?window:typeof self<\"u\"?self:this||{}})(),Xu,!1);const ji=Xu.exports;Xu.exports.create;const Pu=[{id:\"first_transaction\",name:\"Getting Started\",description:\"Add your first transaction\",icon:\"🎯\",condition:i=>i.totalTransactions>=1},{id:\"early_bird\",name:\"Early Bird\",description:\"Log in for the first time today\",icon:\"🌅\",condition:i=>i.dailyLogin===!0},{id:\"ten_transactions\",name:\"Building Habits\",description:\"Log 10 transactions\",icon:\"📊\",condition:i=>i.totalTransactions>=10},{id:\"fifty_transactions\",name:\"Momentum Builder\",description:\"Log 50 transactions\",icon:\"⚡\",condition:i=>i.totalTransactions>=50},{id:\"financial_guru\",name:\"Financial Guru\",description:\"Complete 100 transactions\",icon:\"🧙\",condition:i=>i.totalTransactions>=100},{id:\"three_day_streak\",name:\"Streak Starter\",description:\"Log in for 3 days in a row\",icon:\"🔥\",condition:i=>i.currentStreak>=3},{id:\"consistent_tracker\",name:\"Consistent Tracker\",description:\"Log transactions for 7 days in a row\",icon:\"📅\",condition:i=>i.currentStreak>=7},{id:\"habit_master\",name:\"Habit Master\",description:\"Maintain a 30-day streak\",icon:\"🏅\",condition:i=>i.currentStreak>=30},{id:\"dedication_champion\",name:\"Dedication Champion\",description:\"Achieve a 100-day streak\",icon:\"👑\",condition:i=>i.currentStreak>=100},{id:\"first_goal\",name:\"Goal Setter\",description:\"Create your first savings goal\",icon:\"🎯\",condition:i=>i.totalGoals>=1},{id:\"goal_achiever\",name:\"Goal Achiever\",description:\"Complete your first savings goal\",icon:\"🏆\",condition:i=>i.completedGoals>=1},{id:\"triple_winner\",name:\"Triple Winner\",description:\"Complete 3 savings goals\",icon:\"🎖️\",condition:i=>i.completedGoals>=3},{id:\"goal_crusher\",name:\"Goal Crusher\",description:\"Complete 5 savings goals\",icon:\"💎\",condition:i=>i.completedGoals>=5},{id:\"debt_aware\",name:\"Debt Aware\",description:\"Track your first debt\",icon:\"📝\",condition:i=>i.totalDebts>=1},{id:\"debt_settler\",name:\"Debt Settler\",description:\"Settle your first debt\",icon:\"✅\",condition:i=>i.settledDebts>=1},{id:\"debt_destroyer\",name:\"Debt Destroyer\",description:\"Settle 5 debts\",icon:\"💪\",condition:i=>i.settledDebts>=5},{id:\"debt_free_hero\",name:\"Debt-Free Hero\",description:\"Maintain zero pending debts\",icon:\"🦸\",condition:i=>i.totalDebts>0&&i.settledDebts===i.totalDebts},{id:\"first_saver\",name:\"First Saver\",description:\"Achieve 10%+ savings rate\",icon:\"🌱\",condition:i=>i.savingsRate>=.1},{id:\"super_saver\",name:\"Super Saver\",description:\"Maintain a 20%+ savings rate\",icon:\"💰\",condition:i=>i.savingsRate>=.2},{id:\"elite_saver\",name:\"Elite Saver\",description:\"Achieve 30%+ savings rate\",icon:\"💸\",condition:i=>i.savingsRate>=.3},{id:\"legendary_saver\",name:\"Legendary Saver\",description:\"Maintain 50%+ savings rate\",icon:\"🏰\",condition:i=>i.savingsRate>=.5},{id:\"budget_conscious\",name:\"Budget Conscious\",description:\"Keep spending under 80% of income\",icon:\"📊\",condition:i=>i.monthlySpendingRatio<=.8},{id:\"budget_master\",name:\"Budget Master\",description:\"Keep spending under 70% of income\",icon:\"👑\",condition:i=>i.monthlySpendingRatio<=.7},{id:\"frugal_champion\",name:\"Frugal Champion\",description:\"Keep spending under 50% of income\",icon:\"🌟\",condition:i=>i.monthlySpendingRatio<=.5},{id:\"stay_notified\",name:\"Stay Notified\",description:\"Enable notifications\",icon:\"🔔\",condition:i=>i.notificationsEnabled===!0},{id:\"ai_curious\",name:\"AI Curious\",description:\"Chat with AI Guru for the first time\",icon:\"🤖\",condition:i=>i.aiInteractions>=1},{id:\"ai_enthusiast\",name:\"AI Enthusiast\",description:\"Chat with AI Guru 10 times\",icon:\"🧠\",condition:i=>i.aiInteractions>=10},{id:\"profile_complete\",name:\"Profile Complete\",description:\"Add your name and photo\",icon:\"👤\",condition:i=>i.profileComplete===!0},{id:\"account_organizer\",name:\"Account Organizer\",description:\"Create 3 or more accounts\",icon:\"🏦\",condition:i=>i.totalAccounts>=3}];function a1(i,r){const c=[];return Pu.forEach(u=>{!r.includes(u.id)&&u.condition(i)&&c.push(u.id)}),c}function gp(i){return Pu.find(r=>r.id===i)}function n1(){return Pu}function s1(i){const{expenses:r,goals:c,userName:u}=i,m=[],g=new Date,h=new Date(g.getTime()-10080*60*1e3),y=new Date(g.getTime()-720*60*60*1e3),p=r.filter(O=>new Date(O.date)>=h),x=r.filter(O=>{const B=new Date(O.date);return B>=y&&B<h}),v=O=>O.reduce((B,L)=>(B[L.category]=(B[L.category]||0)+L.amount,B),{}),f=v(p),N=v(x),M=Object.keys(N).reduce((O,B)=>(O[B]=N[B]/3,O),{});return Object.keys(f).forEach(O=>{const B=f[O],L=M[O]||0;if(L>500&&B>L*1.2){const R=Math.round((B-L)/L*100),P=c.find(V=>V.currentAmount<V.targetAmount);P?m.push(`${u}, you've spent ${R}% more on ${O} this week. This slows down your '${P.name}' goal. Consider tightening up your protocol!`):m.push(`${u}, your ${O} spending is up ${R}% this week. Watch out before it becomes a habit!`)}}),m}function i1(i){return{id:`insight_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:\"insight\",priority:\"low\",category:\"insights\",title:\"Guruji Insight\",message:i,timestamp:new Date,read:!1}}const l1={netflix:\"Subscription\",spotify:\"Subscription\",google:\"Subscription\",apple:\"Subscription\",icloud:\"Subscription\",youtube:\"Subscription\",disney:\"Subscription\",hotstar:\"Subscription\",\"prime video\":\"Subscription\",\"prime membership\":\"Subscription\",\"amazon prime\":\"Subscription\",audible:\"Subscription\",kindle:\"Subscription\",hulu:\"Subscription\",hbomax:\"Subscription\",hbo:\"Subscription\",\"paramount+\":\"Subscription\",peacock:\"Subscription\",crunchyroll:\"Subscription\",chaisai:\"Subscription\",\"google play\":\"Subscription\",\"google one\":\"Subscription\",\"app store\":\"Subscription\",microsoft:\"Subscription\",\"office 365\":\"Subscription\",dropbox:\"Subscription\",zoom:\"Subscription\",canva:\"Subscription\",adobe:\"Subscription\",\"creative cloud\":\"Subscription\",jio:\"Subscription\",airtel:\"Subscription\",vodafone:\"Subscription\",idea:\"Subscription\",bsnl:\"Subscription\",\"vi \":\"Subscription\",broadband:\"Subscription\",isp:\"Subscription\",\"act fiber\":\"Subscription\",hathway:\"Subscription\",\"internet bill\":\"Subscription\",telecom:\"Subscription\",coffee:\"Food & Dining\",starbucks:\"Food & Dining\",cafe:\"Food & Dining\",restaurant:\"Food & Dining\",lunch:\"Food & Dining\",dinner:\"Food & Dining\",pizza:\"Food & Dining\",burger:\"Food & Dining\",mcdonalds:\"Food & Dining\",kfc:\"Food & Dining\",food:\"Food & Dining\",zomato:\"Food & Dining\",swiggy:\"Food & Dining\",beer:\"Food & Dining\",bar:\"Food & Dining\",uber:\"Transportation\",ola:\"Transportation\",cab:\"Transportation\",taxi:\"Transportation\",bus:\"Transportation\",train:\"Transportation\",metro:\"Transportation\",fuel:\"Transportation\",petrol:\"Transportation\",gas:\"Transportation\",parking:\"Transportation\",amazon:\"Shopping\",flipkart:\"Shopping\",clothes:\"Shopping\",zara:\"Shopping\",nike:\"Shopping\",shoes:\"Shopping\",mall:\"Shopping\",grocery:\"Groceries\",supermarket:\"Groceries\",vegetables:\"Groceries\",fruits:\"Groceries\",milk:\"Groceries\",electricity:\"Bills & Utilities\",water:\"Bills & Utilities\",\"gas bill\":\"Bills & Utilities\",rent:\"Bills & Utilities\",maintenance:\"Bills & Utilities\",movie:\"Entertainment\",cinema:\"Entertainment\",game:\"Entertainment\",steam:\"Entertainment\",playstation:\"Entertainment\",xbox:\"Entertainment\",doctor:\"Health & Wellbeing\",medical:\"Health & Wellbeing\",pharmacy:\"Health & Wellbeing\",medicine:\"Health & Wellbeing\",gym:\"Health & Wellbeing\",fitness:\"Health & Wellbeing\",hospital:\"Health & Wellbeing\",transfer:\"Transfer\",payment:\"Transfer\",\"cc bill\":\"Transfer\",internal:\"Transfer\",membership:\"Subscription\",subscription:\"Subscription\",recurring:\"Subscription\",premium:\"Subscription\",\"monthly bill\":\"Subscription\"},xp=[{keywords:[\"netflix\"],displayName:\"Netflix Premium\",defaultAmount:649,category:\"Subscription\"},{keywords:[\"hotstar\",\"disney\"],displayName:\"Disney+ Hotstar\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"prime video\",\"amazon prime\"],displayName:\"Amazon Prime\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"hulu\"],displayName:\"Hulu\",defaultAmount:650,category:\"Subscription\"},{keywords:[\"youtube\",\"yt premium\"],displayName:\"YouTube Premium\",defaultAmount:129,category:\"Subscription\"},{keywords:[\"sonyliv\"],displayName:\"SonyLIV\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"zee5\"],displayName:\"Zee5\",defaultAmount:100,category:\"Subscription\"},{keywords:[\"jiocinema\"],displayName:\"JioCinema Premium\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"apple tv\"],displayName:\"Apple TV+\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"spotify\"],displayName:\"Spotify Premium\",defaultAmount:119,category:\"Subscription\"},{keywords:[\"apple music\"],displayName:\"Apple Music\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"audible\"],displayName:\"Audible\",defaultAmount:199,category:\"Subscription\"},{keywords:[\"wynk\"],displayName:\"Wynk Music\",defaultAmount:49,category:\"Subscription\"},{keywords:[\"gaana\"],displayName:\"Gaana Plus\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"jiosaavn\"],displayName:\"JioSaavn Pro\",defaultAmount:99,category:\"Subscription\"},{keywords:[\"google one\",\"google storage\"],displayName:\"Google One\",defaultAmount:130,category:\"Subscription\"},{keywords:[\"chatgpt\",\"openai\"],displayName:\"ChatGPT Plus\",defaultAmount:1999,category:\"Subscription\"},{keywords:[\"claude\",\"anthropic\"],displayName:\"Claude Pro\",defaultAmount:1999,category:\"Subscription\"},{keywords:[\"github\"],displayName:\"GitHub Copilot\",defaultAmount:830,category:\"Subscription\"},{keywords:[\"midjourney\"],displayName:\"Midjourney\",defaultAmount:830,category:\"Subscription\"},{keywords:[\"canva\"],displayName:\"Canva Pro\",defaultAmount:499,category:\"Subscription\"},{keywords:[\"adobe\",\"creative cloud\"],displayName:\"Adobe CC\",defaultAmount:2300,category:\"Subscription\"},{keywords:[\"jio\",\"myjio\"],displayName:\"Jio Mobile\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"airtel\"],displayName:\"Airtel Mobile\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"vi \",\"vodafone\"],displayName:\"Vi Mobile\",defaultAmount:299,category:\"Subscription\"},{keywords:[\"act fiber\",\"act net\"],displayName:\"ACT Fibernet\",defaultAmount:820,category:\"Bills & Utilities\"},{keywords:[\"hathway\"],displayName:\"Hathway Broadband\",defaultAmount:600,category:\"Bills & Utilities\"}],bu=i=>{const r=i.toLowerCase();return xp.some(c=>c.keywords.some(u=>r.includes(u)))},Yr=i=>{const r=i.toLowerCase();for(const c of xp)if(c.keywords.some(u=>r.includes(u))){const u=[\"subscription\",\"online\"];return{category:c.category,tags:u,suggestedAmount:c.defaultAmount,suggestedDescription:c.displayName}}for(const[c,u]of Object.entries(l1))if(r.includes(c)){const m=[];return r.includes(\"online\")&&m.push(\"online\"),r.includes(\"subscription\")&&m.push(\"subscription\"),{category:u,tags:m}}return null},lt={SETTINGS:\"finhub_settings\",EXPENSES:\"finhub_expenses\",INCOMES:\"finhub_incomes\",DEBTS:\"finhub_debts\",GOALS:\"finhub_goals\",ACCOUNTS:\"finhub_accounts\",INVESTMENTS:\"finhub_investments\",LIABILITIES:\"finhub_liabilities\",NOTIFICATIONS:\"finhub_notifications\",EMERGENCY_FUND:\"finhub_emergency_fund\",RECURRING:\"finhub_recurring\",AUTH:\"finhub_auth\",REMEMBERED_MOBILE:\"finhub_remembered_mobile\",DELETION_SCHEDULE:\"finhub_deletion_schedule\"},bp=A.createContext(void 0),Di=()=>{const i=A.useContext(bp);if(!i)throw new Error(\"useFinance must be used within a FinanceProvider\");return i},r1=({children:i})=>{const[r]=A.useState(\"demo-user-001\"),[c,u]=A.useState(!0),[m,g]=A.useState(!1),[h,y]=A.useState({theme:\"system\",currency:\"INR\",unlockedAchievements:[],name:\"\",photoURL:\"\",notificationsEnabled:!1,roundUpEnabled:!0,aiProvider:\"openai\",onboardingPhase:0,passiveIncomeTarget:0,isSampleMode:!1}),[p,x]=A.useState([]),[v,f]=A.useState([]),[N,M]=A.useState([]),[O,B]=A.useState([]),[L,R]=A.useState([]),[P,V]=A.useState([]),[S,se]=A.useState([]),[he,ve]=A.useState([]),[fe,ye]=A.useState([]),[Se,qe]=A.useState(0),[Te,ee]=A.useState(!1),[me,G]=A.useState(\"online\"),[C,Y]=A.useState(\"guest\"),[oe,ge]=A.useState(null),[z,T]=A.useState(!1),[re,$]=A.useState(\"\"),[le,ue]=A.useState(!1),[Ne,je]=A.useState(\"\"),[de,xe]=A.useState(null),[Ke,Ie]=A.useState(null),[Ve,rt]=A.useState(),[De,tt]=A.useState(null),St=[{mobile:\"9447147230\",pin:\"2255\",name:\"tin2mon FinHub Node // 0x50.3\",userId:\"tin2mon-prod-001\"}],mt=j=>{const E=Array.isArray(j)?j:[j];ye(w=>{const D=E.filter(Z=>w.some(we=>we.id===Z.id)?!1:!w.some(we=>we.type===Z.type&&we.message===Z.message&&!we.read&&new Date().getTime()-new Date(we.timestamp).getTime()<1e3*60*60*24));return D.length===0?w:[...D,...w].sort((Z,ne)=>new Date(ne.timestamp).getTime()-new Date(Z.timestamp).getTime()).slice(0,100)})};A.useEffect(()=>{const j=()=>{const w=p.length+v.length+N.length,D=N.filter(Ce=>Ce.status===\"settled\").length,_=O.filter(Ce=>Ce.currentAmount>=Ce.targetAmount).length,Z=v.reduce((Ce,Pe)=>Ce+Pe.amount,0),ne=p.reduce((Ce,Pe)=>Ce+Pe.amount,0),Q=Z>0?(Z-ne)/Z:0,we=Z>0?ne/Z:0,te={totalTransactions:w,totalGoals:O.length,completedGoals:_,totalDebts:N.length,settledDebts:D,savingsRate:Q,monthlySpendingRatio:we,notificationsEnabled:h.notificationsEnabled,themeChanged:h.theme!==\"system\",aiInteractions:0,currentStreak:w>0?Math.min(w,3):0,dailyLogin:!0,profileComplete:h.name!==\"\"&&h.photoURL!==\"\",totalAccounts:L.length},pe=a1(te,h.unlockedAchievements);pe.length>0&&(pe.forEach(Ce=>{const Pe=gp(Ce);if(Pe){const Me={id:`notif_${Ce}`,type:\"achievement\",priority:\"low\",category:\"achievements\",title:\"Achievement Unlocked!\",message:`${Pe.icon} ${Pe.name}`,timestamp:new Date,read:!1,achievementId:Ce};mt(Me),J.success(`Achievement Unlocked: ${Pe.icon} ${Pe.name}!`,{duration:5e3})}}),Gt({unlockedAchievements:[...h.unlockedAchievements,...pe]}));const Je=s1({expenses:p,goals:O,userName:h.name||\"Friend\"});if(Je.length>0){const Ce=[];Je.forEach(Pe=>{const Me=i1(Pe);Me.priority=\"low\",Me.category=\"insights\",Ce.push(Me),J(Me.title,{description:Me.message,icon:\"🧘\"})}),Ce.length>0&&mt(Ce)}E()},E=()=>{const w=new Date;w.setHours(0,0,0,0);const D=L.reduce((Q,we)=>Q+(we.type===\"bank\"||we.type===\"cash\"?we.balance:0),0),_=O.reduce((Q,we)=>Q+we.currentAmount,0)+Se,Z=Math.max(0,D-_),ne=[];S.forEach(Q=>{const we=new Date(Q.startDate),te=new Date(w.getFullYear(),w.getMonth(),we.getDate());te<w&&te.setMonth(te.getMonth()+1),Math.ceil((te.getTime()-w.getTime())/(1e3*60*60*24))<=7&&ne.push({name:Q.name,amount:Q.emiAmount,dueDate:te,type:\"EMI\"})}),he.forEach(Q=>{if(Q.type===\"expense\"){const we=new Date(Q.startDate);let te;if(Q.frequency===\"monthly\")te=new Date(w.getFullYear(),w.getMonth(),we.getDate()),te<w&&te.setMonth(te.getMonth()+1);else if(Q.frequency===\"weekly\"){const Ce=(we.getDay()-w.getDay()+7)%7;te=new Date(w.getTime()+Ce*24*60*60*1e3),te<w&&te.setDate(te.getDate()+7)}else if(Q.frequency===\"custom\"){const Ce=Q.customIntervalDays||28,Pe=w.getTime()-we.getTime(),nt=Math.floor(Pe/(1e3*60*60*24))%Ce,Lt=Ce-nt;te=new Date(w.getTime()+Lt*24*60*60*1e3),Lt<=0&&(te=new Date(w.getTime()+Ce*24*60*60*1e3))}else return;const pe=Math.ceil((te.getTime()-w.getTime())/(1e3*60*60*24)),Je=Q.frequency===\"custom\"?2:7;pe<=Je&&pe>=0&&ne.push({name:Q.description||\"Subscription\",amount:Q.amount,dueDate:te,type:Q.frequency===\"custom\"?\"Recharge\":\"Bill\"})}}),ne.forEach(Q=>{const we=Z<Q.amount,te=Math.ceil((Q.dueDate.getTime()-w.getTime())/(1e3*60*60*24));if(we&&te<=3){const pe={id:`smart_breach_${Q.name}_${Q.dueDate.toISOString().split(\"T\")[0]}`,type:\"alert\",priority:\"high\",category:\"reminders\",title:\"Liquid Stability Warning\",message:`Critical: Your '${Q.name}' due on ${Q.dueDate.toLocaleDateString()} (₹${Q.amount}) exceeds current liquid cash (₹${Z}). Clear assets or increase bank balance immediately.`,timestamp:new Date,read:!1};mt(pe),J.error(pe.title,{description:pe.message,duration:1e4})}else if(te<=1){const pe={id:`reminder_${Q.name}_${Q.dueDate.toISOString().split(\"T\")[0]}`,type:\"reminder\",priority:\"medium\",category:\"reminders\",title:`${Q.type} Due Soon`,message:`Reminder: '${Q.name}' payment of ₹${Q.amount} is due tomorrow (${Q.dueDate.toLocaleDateString()}).`,timestamp:new Date,read:!1};mt(pe),J.info(pe.title,{description:pe.message})}})};j()},[p.length,v.length,N.length,O.length,h.notificationsEnabled,h.theme]),A.useEffect(()=>{zt()},[]),A.useEffect(()=>localStorage.setItem(lt.SETTINGS,JSON.stringify(h)),[h]),A.useEffect(()=>localStorage.setItem(lt.EXPENSES,JSON.stringify(p)),[p]),A.useEffect(()=>localStorage.setItem(lt.INCOMES,JSON.stringify(v)),[v]),A.useEffect(()=>localStorage.setItem(lt.DEBTS,JSON.stringify(N)),[N]),A.useEffect(()=>localStorage.setItem(lt.GOALS,JSON.stringify(O)),[O]),A.useEffect(()=>localStorage.setItem(lt.ACCOUNTS,JSON.stringify(L)),[L]),A.useEffect(()=>localStorage.setItem(lt.INVESTMENTS,JSON.stringify(P)),[P]),A.useEffect(()=>localStorage.setItem(lt.LIABILITIES,JSON.stringify(S)),[S]),A.useEffect(()=>localStorage.setItem(lt.RECURRING,JSON.stringify(he)),[he]),A.useEffect(()=>localStorage.setItem(lt.NOTIFICATIONS,JSON.stringify(fe)),[fe]),A.useEffect(()=>localStorage.setItem(lt.EMERGENCY_FUND,JSON.stringify(Se)),[Se]);const zt=async()=>{u(!0);try{const E=localStorage.getItem(lt.SETTINGS);if(E){const Me=JSON.parse(E);y(Me),ce(Me.theme)}const w=localStorage.getItem(lt.EXPENSES);w&&x(JSON.parse(w));const D=localStorage.getItem(lt.INCOMES);D&&f(JSON.parse(D));const _=localStorage.getItem(lt.DEBTS);_&&M(JSON.parse(_));const Z=localStorage.getItem(lt.GOALS);Z&&B(JSON.parse(Z));const ne=localStorage.getItem(lt.ACCOUNTS);ne&&R(JSON.parse(ne));const Q=localStorage.getItem(lt.INVESTMENTS);Q&&V(JSON.parse(Q));const we=localStorage.getItem(lt.LIABILITIES);we&&se(JSON.parse(we));const te=localStorage.getItem(lt.NOTIFICATIONS);if(te){const nt=JSON.parse(te).filter((Lt,Ft,Ua)=>Ua.findIndex(Xa=>Xa.id===Lt.id||Xa.message===Lt.message&&Xa.type===Lt.type)===Ft);ye(nt.slice(0,100))}const pe=localStorage.getItem(lt.EMERGENCY_FUND);pe&&qe(JSON.parse(pe));const Je=localStorage.getItem(lt.RECURRING);Je&&ve(JSON.parse(Je));const Ce=localStorage.getItem(lt.REMEMBERED_MOBILE);Ce&&(je(Ce),$(Ce),ue(!0));const Pe=localStorage.getItem(lt.DELETION_SCHEDULE);if(Pe){const Me=new Date(Pe).getTime();new Date().getTime()>=Me?(Na(),console.warn(\"Account purge executed based on schedule.\")):xe(Pe)}}catch(E){console.error(\"Error loading specific local data:\",E)}await bt(),!localStorage.getItem(\"finhub_subscription_migration_v3\")&&r&&(ut(),localStorage.setItem(\"finhub_subscription_migration_v3\",\"true\")),u(!1)},ut=()=>{x(j=>{let E=0;const w=j.map(D=>{const _=[\"other\",\"bills & utilities\",\"entertainment\",\"shopping\",\"\",void 0],Z=Yr(D.description);if(Z&&Z.category===\"Subscription\"){const ne=_.includes(D.category?.toLowerCase())||!D.category,Q=!D.isRecurring;if(ne||Q)return E++,{...D,category:\"Subscription\",isRecurring:!0}}return D});if(E>0){J.info(`Intelligence protocol: Identified and moved ${E} transactions to Subscriptions.`);const D=w.filter(Z=>Z.category===\"Subscription\"),_=new Map;D.forEach(Z=>{const ne=Z.description.toLowerCase().trim();(!_.has(ne)||new Date(Z.date)>new Date(_.get(ne).date))&&_.set(ne,Z)}),_.forEach((Z,ne)=>{he.some(we=>we.description?.toLowerCase().includes(ne)||ne.includes(we.description?.toLowerCase()||\"\"))||setTimeout(()=>{dt({type:\"expense\",description:Z.description,amount:Z.amount,category:\"Subscription\",accountId:Z.accountId,frequency:\"monthly\",startDate:Z.date,tags:[\"auto-migrated\"]})},100)})}return w})},bt=async()=>{try{try{await _e.processRecurring(r)}catch(te){console.error(\"Skip recurring process\",te)}const[j,E,w,D,_,Z,ne,Q,we]=await Promise.all([_e.getSettings(r).catch(()=>({success:!1,settings:void 0})),_e.getAccounts(r).catch(()=>({success:!1,accounts:[]})),_e.getExpenses(r).catch(()=>({success:!1,expenses:[]})),_e.getIncomes(r).catch(()=>({success:!1,incomes:[]})),_e.getDebts(r).catch(()=>({success:!1,debts:[]})),_e.getGoals(r).catch(()=>({success:!1,goals:[]})),_e.getLiabilities(r).catch(()=>({success:!1,liabilities:[]})),_e.getInvestments(r).catch(()=>({success:!1,investments:[]})),_e.getRecurring(r).catch(()=>({success:!1,recurring:[]}))]);ee(!1),G(\"online\"),j.success&&j.settings&&(y(te=>({...te,...j.settings,aiProvider:j.settings.aiProvider||te.aiProvider,apiKeys:{...te.apiKeys,...j.settings.apiKeys}})),ce(j.settings.theme)),E.success&&R(E.accounts||[]),w.success&&x(w.expenses||[]),D.success&&f(D.incomes||[]),_.success&&M(_.debts||[]),Z.success&&B(Z.goals||[]),ne.success&&se(ne.liabilities||[]),Q.success&&V(Q.investments||[]),we.success&&ve(we.recurring||[]),J.success(\"Sync complete\")}catch(j){console.error(\"API Sync failed, using local data\",j),ee(!0),G(\"offline\")}},la=async()=>{g(!0),await bt(),g(!1)},ce=j=>{if(j===\"system\"){const E=window.matchMedia(\"(prefers-color-scheme: dark)\").matches;document.documentElement.classList.toggle(\"dark\",E)}else document.documentElement.classList.toggle(\"dark\",j===\"dark\")},Ee=async j=>{$(j);const E=St.some(w=>w.mobile===j)||localStorage.getItem(`finhub_user_${j}`)!==null;return T(!0),E},He=async(j,E=!1)=>{rt({message:\"Validating PIN\",subMessage:\"Verifying secure node access...\"}),Y(\"authenticating\"),await new Promise(_=>setTimeout(_,2e3));const w=St.find(_=>_.mobile===re&&_.pin===j);let D=null;if(w)D={id:w.userId,mobile:w.mobile,name:w.name};else{const _=localStorage.getItem(`finhub_user_${re}`);if(_){const Z=JSON.parse(_);Z.pin===j&&(D={id:Z.userId,mobile:Z.mobile,name:Z.name})}}return D?(ge(D),localStorage.setItem(lt.AUTH,JSON.stringify(D)),rt({message:\"Handshake Success\",subMessage:\"Synchronizing decrypted ledger...\"}),Y(\"authenticated\"),T(!1),de&&(await It(),J.success(\"Your account deletion request has been canceled. Welcome back!\")),E&&(localStorage.setItem(lt.REMEMBERED_MOBILE,re),je(re),ue(!0)),!0):(rt(void 0),Y(\"guest\"),!1)},yt=async j=>{$(j);const E=Math.floor(1e3+Math.random()*9e3).toString();return Ie(E),console.log(`[AUTH-DEBUG] Mock OTP for ${j}: ${E}`),J.info(\"Verification code sent\",{description:`Dev Mode: Use ${E} (Simulated SMS)`}),!0},Ut=async(j,E)=>E===\"0000\"||E===Ke,Oa=async(j,E)=>{const w=localStorage.getItem(`finhub_user_${j}`);if(w){const _=JSON.parse(w);return _.pin=E,localStorage.setItem(`finhub_user_${j}`,JSON.stringify(_)),J.success(\"PIN reset successfully\"),!0}const D=St.findIndex(_=>_.mobile===j);if(D!==-1){const _={...St[D],pin:E};return localStorage.setItem(`finhub_user_${j}`,JSON.stringify(_)),J.success(\"Demo user PIN updated locally\"),!0}return!1},_a=async(j,E,w,D=!1)=>{rt({message:\"Creating Node\",subMessage:\"Initializing secure identity protocols...\"}),Y(\"authenticating\"),await new Promise(ne=>setTimeout(ne,2e3));const _={id:`user_${Date.now()}`,mobile:j,name:w,pin:E};localStorage.setItem(`finhub_user_${j}`,JSON.stringify(_));const Z={id:_.id,mobile:_.mobile,name:_.name};return ge(Z),localStorage.setItem(lt.AUTH,JSON.stringify(Z)),rt({message:\"Handshake Success\",subMessage:\"Synchronizing decrypted ledger...\"}),Y(\"authenticated\"),T(!1),D&&(localStorage.setItem(lt.REMEMBERED_MOBILE,j),je(j),ue(!0)),!0},ba=()=>{Y(\"guest\"),ge(null),Ie(null),localStorage.removeItem(lt.AUTH),le||$(\"\")},ma=()=>{Y(\"guest\"),ge(null),$(\"\"),Ie(null),localStorage.removeItem(lt.AUTH),localStorage.removeItem(lt.REMEMBERED_MOBILE),je(\"\"),ue(!1)},ja=async()=>{const j=new Date;j.setDate(j.getDate()+30);const E=j.toISOString();xe(E),localStorage.setItem(lt.DELETION_SCHEDULE,E),J.warning(\"Account scheduled for deletion in 30 days.\"),ba()},It=async()=>{xe(null),localStorage.removeItem(lt.DELETION_SCHEDULE)},Na=()=>{Object.values(lt).forEach(j=>{localStorage.removeItem(j)}),x([]),f([]),M([]),B([]),R([]),V([]),se([]),ve([]),ye([]),qe(0),xe(null),Y(\"guest\"),ge(null),J.info(\"Session purged successfully.\")};A.useEffect(()=>{const j=localStorage.getItem(lt.AUTH);if(j)try{const E=JSON.parse(j);E&&E.mobile&&($(E.mobile),Y(\"guest\"))}catch(E){console.error(\"Failed to parse stored auth\",E),localStorage.removeItem(lt.AUTH)}},[]);const Gt=async j=>{const E={...h,...j};y(E),j.theme&&ce(j.theme);try{const w=await _e.updateSettings(r,j);if(w.success)y(D=>({...D,...w.settings,aiProvider:w.settings.aiProvider||D.aiProvider,apiKeys:{...D.apiKeys,...w.settings.apiKeys}}));else throw new Error(w.error)}catch(w){console.error(\"Failed to sync settings\",w),J.error(\"Settings saved locally only\")}},kt=async(j,E)=>{try{const w=await _e.updateRecurring(r,j,E);if(w.success){const D=w.recurring;if(ve(_=>_.map(Z=>Z.id===j?D:Z)),J.success(\"Recurring transaction updated\"),D.startDate){console.log(\"[Backfill Debug Update] Analysis starting for:\",D.description||D.source),J.info(\"Analyzing transaction history...\");const _=new Date,Z=`${_.getFullYear()}-${String(_.getMonth()+1).padStart(2,\"0\")}-${String(_.getDate()).padStart(2,\"0\")}`,ne=D.startDate.split(\"T\")[0];if(console.log(\"[Backfill Debug Update] nowStr:\",Z,\"startStr:\",ne),ne<=Z&&D.type){const[Q,we,te]=ne.split(\"-\").map(Number);let pe=new Date(Q,we-1,te,12,0,0);const Je=[];let Ce=0;for(;Ce<1200;){const nt=pe.getFullYear(),Lt=pe.getMonth(),Ft=pe.getDate();if(`${nt}-${String(Lt+1).padStart(2,\"0\")}-${String(Ft).padStart(2,\"0\")}`>Z)break;switch(Je.push(new Date(pe)),D.frequency){case\"daily\":pe.setDate(pe.getDate()+1);break;case\"weekly\":pe.setDate(pe.getDate()+7);break;case\"monthly\":const Xa=te;pe.setMonth(pe.getMonth()+1),pe.getDate()<Xa&&pe.getMonth()===(Lt+2)%12&&pe.setDate(0);break;case\"yearly\":pe.setFullYear(pe.getFullYear()+1);break;case\"custom\":pe.setDate(pe.getDate()+(D.customIntervalDays||30));break;default:pe.setMonth(pe.getMonth()+1)}Ce++}console.log(\"[Backfill Debug Update] Generated\",Je.length,\"due dates\");const Pe=Number(D.amount),Me=Je.filter(nt=>{const Lt=`${nt.getFullYear()}-${String(nt.getMonth()+1).padStart(2,\"0\")}-${String(nt.getDate()).padStart(2,\"0\")}`;return![...p,...v].some(Ua=>{const Xa=(Ua.date||\"\").split(\"T\")[0],ps=Number(Ua.amount),yn=Math.abs(ps-Pe)<.01;return Xa===Lt&&yn})});console.log(`[Backfill Debug Update] Total Expected: ${Je.length}, Missing: ${Me.length}`),Me.length>0?(console.log(\"[Backfill Debug Update] Triggering popup request for\",Me.length,\"dates\"),tt({count:Me.length,dates:Me,recurring:D})):(console.log(\"[Backfill Debug Update] All expected entries already exist in history.\"),J.success(\"Transaction history is already up to date.\"))}else console.log(\"[Backfill Debug Update] Skip: start date is in the future or invalid type.\")}}}catch(w){console.error(\"Error updating recurring transaction:\",w),ve(D=>D.map(_=>_.id===j?{..._,...E}:_)),J.warning(\"Updated locally\")}},dt=async j=>{try{console.log(\"[Backfill Debug] createRecurringTransaction called with:\",j);const E=await _e.createRecurring(r,j);if(E.success){const w=E.recurring;if(ve(D=>[...D,w]),J.success(\"Recurring transaction created\"),w.startDate){console.log(\"[Backfill Debug] Analysis starting for:\",w.description||w.source),J.info(\"Analyzing transaction history...\");const D=new Date,_=`${D.getFullYear()}-${String(D.getMonth()+1).padStart(2,\"0\")}-${String(D.getDate()).padStart(2,\"0\")}`,Z=w.startDate.split(\"T\")[0];if(console.log(\"[Backfill Debug] nowStr:\",_,\"startStr:\",Z),Z<=_&&w.type){const[ne,Q,we]=Z.split(\"-\").map(Number);let te=new Date(ne,Q-1,we,12,0,0);const pe=[];let Je=0;for(;Je<1200;){const Me=te.getFullYear(),nt=te.getMonth(),Lt=te.getDate();if(`${Me}-${String(nt+1).padStart(2,\"0\")}-${String(Lt).padStart(2,\"0\")}`>_)break;switch(pe.push(new Date(te)),w.frequency){case\"daily\":te.setDate(te.getDate()+1);break;case\"weekly\":te.setDate(te.getDate()+7);break;case\"monthly\":const Ua=we;te.setMonth(te.getMonth()+1),te.getDate()<Ua&&te.getMonth()===(nt+2)%12&&te.setDate(0);break;case\"yearly\":te.setFullYear(te.getFullYear()+1);break;case\"custom\":te.setDate(te.getDate()+(w.customIntervalDays||30));break;default:te.setMonth(te.getMonth()+1)}Je++}console.log(\"[Backfill Debug] Generated\",pe.length,\"due dates\");const Ce=Number(w.amount),Pe=pe.filter(Me=>{const nt=`${Me.getFullYear()}-${String(Me.getMonth()+1).padStart(2,\"0\")}-${String(Me.getDate()).padStart(2,\"0\")}`;return![...p,...v].some(Ft=>{const Ua=(Ft.date||\"\").split(\"T\")[0],Xa=Number(Ft.amount),ps=Math.abs(Xa-Ce)<.01;return Ua===nt&&ps})});console.log(`[Backfill Debug] Total Expected: ${pe.length}, Missing: ${Pe.length}`),Pe.length>0?(console.log(\"[Backfill Debug] Triggering popup request for\",Pe.length,\"dates\"),tt({count:Pe.length,dates:Pe,recurring:w})):(console.log(\"[Backfill Debug] All expected entries already exist in history.\"),J.success(\"Transaction history is already up to date.\"))}else console.log(\"[Backfill Debug] Skip: start date is in the future or invalid type.\")}}}catch(E){console.error(\"Error creating recurring transaction:\",E);const w={id:`temp_${Date.now()}`,...j,createdAt:new Date().toISOString()};ve(D=>[...D,w]),J.warning(\"Offline: Created locally\")}},ds=async()=>{if(!De)return;const{count:j,dates:E,recurring:w}=De,D=J.loading(`Generating ${j} entries...`),_=[],Z=[];let ne=0;const Q=L.find(te=>te.id===w.accountId),we={};for(const te of E){const pe=`${te.getFullYear()}-${String(te.getMonth()+1).padStart(2,\"0\")}-${String(te.getDate()).padStart(2,\"0\")}`,Je={description:w.description,source:w.source,amount:w.amount,category:w.category,date:pe,tags:[...w.tags||[],\"auto-backfill\"],accountId:w.accountId,isRecurring:!0,recurringId:w.id};try{if(w.type===\"expense\"){const Ce=await _e.createExpense(r,Je);Ce.success&&(Z.push(Ce.expense),Q&&(Q.type===\"credit_card\"?ne+=Ce.expense.amount:ne-=Ce.expense.amount),w.goalId&&(we[w.goalId]=(we[w.goalId]||0)+Ce.expense.amount))}else{const Ce=await _e.createIncome(r,Je);Ce.success&&(_.push(Ce.income),Q&&(Q.type===\"credit_card\"?ne-=Ce.income.amount:ne+=Ce.income.amount))}await new Promise(Ce=>setTimeout(Ce,50))}catch(Ce){console.error(`Failed to create backfill for ${pe}`,Ce)}}_.length>0&&f(te=>[...te,..._]),Z.length>0&&x(te=>[...te,...Z]);for(const[te,pe]of Object.entries(we)){const Je=O.find(Ce=>Ce.id===te);if(Je){const Ce=Je.currentAmount+pe;try{await _e.updateGoal(r,te,{currentAmount:Ce}),B(Pe=>Pe.map(Me=>Me.id===te?{...Me,currentAmount:Ce}:Me))}catch(Pe){console.error(\"Failed to update goal after backfill\",Pe)}}}if(Q&&ne!==0){const te=Q.balance+ne;try{await _e.updateAccount(r,Q.id,{balance:te}),R(pe=>pe.map(Je=>Je.id===Q.id?{...Je,balance:te}:Je))}catch(pe){console.error(\"Failed to update account balance after backfill\",pe)}}J.dismiss(D),J.success(`Success: ${j} entries generated`),tt(null)},Sa=async j=>{try{(await _e.deleteRecurring(r,j)).success&&(ve(w=>w.filter(D=>D.id!==j)),J.success(\"Recurring transaction deleted\"))}catch(E){console.error(\"Error deleting recurring transaction:\",E),ve(w=>w.filter(D=>D.id!==j)),J.warning(\"Deleted locally\")}},Aa=async()=>{try{const j=await _e.processRecurring(r);j.success&&(J.success(`Processed ${j.count} transactions`),await bt())}catch(j){console.error(\"Error processing recurring transactions:\",j),J.error(\"Failed to process recurring transactions\")}},un=async j=>{try{const E=L.reduce((te,pe)=>te+(pe.type!==\"credit_card\"?pe.balance:0),0),w=O.reduce((te,pe)=>te+pe.currentAmount,0)+Se,D=S.reduce((te,pe)=>te+pe.emiAmount,0),_=Math.max(0,E-w-D);let Z=j.amount;if(Z>_){const te=Z-_;console.warn(`⚠️ Leakage Detected! Deficit: ${te}. Initiating Shadow Wallet Protocol.`);let pe=te;const Je=[];O.forEach(Me=>{const nt=Me.type||\"growth\";let Lt=1;nt===\"stability\"&&(Lt=2),nt===\"protection\"&&(Lt=3),Me.currentAmount>0&&Je.push({id:Me.id,type:\"goal\",currentAmount:Me.currentAmount,priority:Lt,name:Me.name})}),Se>0&&Je.push({id:\"emergency-fund\",type:\"emergency\",currentAmount:Se,priority:3,name:\"Emergency Fund\"}),Je.sort((Me,nt)=>Me.priority-nt.priority);const Ce=[],Pe=[];for(const Me of Je){if(pe<=0)break;const nt=Math.min(Me.currentAmount,pe);if(pe-=nt,Me.type===\"goal\"){const Lt=Me.currentAmount-nt;Ce.push(ht(Me.id,{currentAmount:Lt,status:\"leaking\"})),Pe.push({id:`leak_${Me.id}_${new Date().toISOString().split(\"T\")[0]}`,type:\"alert\",priority:\"medium\",category:\"transactions\",title:\"Shadow Wallet Leakage\",message:`₹${nt} spent reduced your '${Me.name}' reserve.`,timestamp:new Date,read:!1})}else Me.type===\"emergency\"&&(Ce.push(Promise.resolve(qe(Lt=>Lt-nt))),Pe.push({id:`leak_emergency_${new Date().toISOString().split(\"T\")[0]}`,type:\"alert\",priority:\"medium\",category:\"transactions\",title:\"Emergency Fund Alert\",message:`Warning: ₹${nt} withdrawn from Emergency Fund to cover spending.`,timestamp:new Date,read:!1}))}await Promise.all(Ce),Pe.length>0&&(mt(Pe),Pe.forEach(Me=>J.error(Me.title,{description:Me.message})))}const ne=L.find(te=>te.id===j.accountId);let Q={...j};if(ne?.type===\"credit_card\"){const te=ne.serviceChargePercentage||0;if(te>0){const nt=j.amount*te/100;Q.serviceChargeAmount=nt,console.log(`Credit Service Charge: ${nt}`)}const pe=ne.creditLimit||0,Je=ne.safeLimitPercentage||30,Ce=pe*Je/100,Me=Math.abs(ne.balance)+j.amount;if(Me>Ce&&pe>0)if(j.isIncomeGenerating)J.info(\"Strategic Credit Utilization\",{description:\"Limit exceeded, but marked as income-generating. Proceed with caution.\"});else{J.warning(\"High Interest Risk Detected\",{description:`This transaction puts your CC usage at ${(Me/pe*100).toFixed(1)}%, exceeding your ${Je}% safe limit with no income-justification.`,duration:6e3});const nt={id:`cc_limit_${ne.id}_${new Date().toISOString().split(\"T\")[0]}`,type:\"alert\",priority:\"medium\",category:\"transactions\",title:\"Credit Stability Breach\",message:`Card '${ne.name}' usage protocol exceeded ${Je}% threshold. Avoid non-essential outflow.`,timestamp:new Date,read:!1};mt(nt)}}if(!Q.category||Q.category===\"Other\"){const te=Yr(Q.description);te&&te.category===\"Subscription\"&&(Q.category=\"Subscription\",Q.tags=Array.from(new Set([...Q.tags||[],\"auto-detected\"])))}const we=await _e.createExpense(r,Q);if(we.success){if(x(te=>[...te,we.expense]),ne){const te=j.amount+(Q.serviceChargeAmount||0),pe=ne.type===\"credit_card\"?ne.balance+te:ne.balance-te;await Ye(ne.id,{balance:pe})}if(j.isRecurring){const te={type:\"expense\",description:j.description,amount:j.amount,category:j.category,accountId:j.accountId,frequency:j.frequency||\"monthly\",customIntervalDays:j.customIntervalDays,startDate:j.date,endDate:j.endDate,tags:j.tags};await dt(te)}else if(J.success(\"Expense added!\"),bu(j.description)&&!j.isRecurring){const te={id:`verify_sub_${we.expense.id}`,type:\"insight\",priority:\"medium\",category:\"transactions\",title:\"Automate Payment?\",message:`Detected '${j.description}' as a subscription. Add to cyclical routine?`,timestamp:new Date,read:!1,action:{type:\"verify_subscription\",label:\"Automate\",status:\"pending\",payload:{id:we.expense.id,description:j.description,amount:j.amount,category:j.category,accountId:j.accountId,date:j.date}}};mt(te)}}}catch(E){console.error(\"Create expense failed\",E);const w={id:`temp_${Date.now()}`,...j,createdAt:new Date().toISOString()};x(D=>[...D,w]),J.warning(\"Added in offline mode\")}},nn=async(j,E)=>{try{const w=await _e.updateExpense(r,j,E);if(w.success){const D=p.find(_=>_.id===j);if(D){const _=L.find(Q=>Q.id===D.accountId);if(_){const Q=D.amount+(D.serviceChargeAmount||0),we=_.type===\"credit_card\"?_.balance-Q:_.balance+Q;await Ye(_.id,{balance:we})}const Z=w.expense,ne=L.find(Q=>Q.id===Z.accountId);if(ne){const Q=Z.amount+(Z.serviceChargeAmount||0),we=ne.type===\"credit_card\"?ne.balance+Q:ne.balance-Q;await Ye(ne.id,{balance:we})}E.isRecurring?D.recurringId?await kt(D.recurringId,{amount:E.amount,description:E.description,category:E.category,tags:E.tags,frequency:E.frequency,customIntervalDays:E.customIntervalDays,endDate:E.endDate}):await dt({type:\"expense\",description:E.description,amount:E.amount,category:E.category,accountId:E.accountId,frequency:E.frequency||\"monthly\",customIntervalDays:E.customIntervalDays,startDate:D.date,endDate:E.endDate,tags:E.tags}):D.recurringId&&await Sa(D.recurringId)}x(_=>_.map(Z=>Z.id===j?w.expense:Z)),J.success(\"Expense updated\")}}catch{x(D=>D.map(_=>_.id===j?{..._,...E}:_)),J.warning(\"Updated in offline mode\")}},Fa=async j=>{try{if((await _e.deleteExpense(r,j)).success){const w=p.find(D=>D.id===j);if(w){const D=L.find(_=>_.id===w.accountId);if(D){const _=w.amount+(w.serviceChargeAmount||0),Z=D.type===\"credit_card\"?D.balance-_:D.balance+_;await Ye(D.id,{balance:Z})}}x(D=>D.filter(_=>_.id!==j)),J.success(\"Expense deleted\")}}catch{x(w=>w.filter(D=>D.id!==j)),J.warning(\"Deleted in offline mode\")}},Da=async j=>{try{const E=await _e.createIncome(r,j);if(E.success){f(D=>[...D,E.income]);const w=L.find(D=>D.id===j.accountId);if(w){const D=w.type===\"credit_card\"?w.balance-j.amount:w.balance+j.amount;await Ye(w.id,{balance:D})}if(j.isRecurring){const D={type:\"income\",source:j.source,amount:j.amount,accountId:j.accountId,frequency:j.frequency||\"monthly\",customIntervalDays:j.customIntervalDays,startDate:j.date,endDate:j.endDate,tags:j.tags};await dt(D)}else J.success(\"Income added!\")}}catch{const w={id:`temp_${Date.now()}`,...j,createdAt:new Date().toISOString()};f(D=>[...D,w]),J.warning(\"Added in offline mode\")}},Ue=async(j,E)=>{try{const w=await _e.updateIncome(r,j,E);if(w.success){const D=v.find(_=>_.id===j);if(D){const _=L.find(Q=>Q.id===D.accountId);if(_){const Q=_.type===\"credit_card\"?_.balance+D.amount:_.balance-D.amount;await Ye(_.id,{balance:Q})}const Z=w.income,ne=L.find(Q=>Q.id===Z.accountId);if(ne){const Q=ne.type===\"credit_card\"?ne.balance-Z.amount:ne.balance+Z.amount;await Ye(ne.id,{balance:Q})}E.isRecurring?D.recurringId?await kt(D.recurringId,{amount:E.amount,source:E.source,description:E.source,category:E.category,tags:E.tags,frequency:E.frequency,customIntervalDays:E.customIntervalDays,endDate:E.endDate}):await dt({type:\"income\",description:E.source,source:E.source,amount:E.amount,category:E.category,accountId:E.accountId,frequency:E.frequency||\"monthly\",customIntervalDays:E.customIntervalDays,startDate:D.date,endDate:E.endDate,tags:E.tags}):D.recurringId&&await Sa(D.recurringId)}f(_=>_.map(Z=>Z.id===j?w.income:Z)),J.success(\"Income updated\")}}catch{f(D=>D.map(_=>_.id===j?{..._,...E}:_)),J.warning(\"Updated in offline mode\")}},wt=async j=>{try{if((await _e.deleteIncome(r,j)).success){const w=v.find(D=>D.id===j);if(w){const D=L.find(_=>_.id===w.accountId);if(D){const _=D.type===\"credit_card\"?D.balance+w.amount:D.balance-w.amount;await Ye(D.id,{balance:_})}}f(D=>D.filter(_=>_.id!==j)),J.success(\"Income deleted\")}}catch{f(w=>w.filter(D=>D.id!==j)),J.warning(\"Deleted in offline mode\")}},ie=async j=>{try{const E=await _e.createDebt(r,j);if(E.success){M(D=>[...D,E.debt]);const w=L.find(D=>D.id===j.accountId);if(w){const D=j.type===\"borrowed\"?j.amount:-j.amount,_=w.type===\"credit_card\"?w.balance-D:w.balance+D;await Ye(w.id,{balance:_})}j.isRecurring&&await dt({type:\"expense\",description:`Debt: ${j.personName} (${j.type})`,amount:j.amount,category:\"Debt\",accountId:j.accountId,frequency:j.frequency||\"monthly\",startDate:j.date,tags:[...j.tags||[],\"debt\"]}),J.success(\"Debt created\")}}catch{const w={id:`temp_${Date.now()}`,...j,status:\"pending\",createdAt:new Date().toISOString()};M(D=>[...D,w]),J.warning(\"Added in offline mode\")}},Le=async(j,E)=>{try{const w=await _e.updateDebt(r,j,E);if(w.success){const D=N.find(_=>_.id===j);if(D){const _=L.find(Q=>Q.id===D.accountId);if(_){const Q=D.type===\"borrowed\"?-D.amount:D.amount,we=_.type===\"credit_card\"?_.balance-Q:_.balance+Q;await Ye(_.id,{balance:we})}const Z=w.debt,ne=L.find(Q=>Q.id===Z.accountId);if(ne){const Q=Z.type===\"borrowed\"?Z.amount:-Z.amount,we=ne.type===\"credit_card\"?ne.balance-Q:ne.balance+Q;await Ye(ne.id,{balance:we})}E.isRecurring&&(D.recurringId?await kt(D.recurringId,{amount:E.amount,description:`Debt: ${E.personName} (${E.type})`}):await dt({type:\"expense\",description:`Debt: ${E.personName} (${E.type})`,amount:E.amount,category:\"Debt\",accountId:E.accountId,frequency:E.frequency||\"monthly\",startDate:E.date,tags:[...E.tags||[],\"debt\"]}))}M(_=>_.map(Z=>Z.id===j?w.debt:Z)),J.success(\"Debt updated\")}}catch{M(D=>D.map(_=>_.id===j?{..._,...E}:_)),J.warning(\"Updated in offline mode\")}},ft=async j=>{try{if((await _e.deleteDebt(r,j)).success){const w=N.find(D=>D.id===j);if(w){const D=L.find(_=>_.id===w.accountId);if(D){const _=w.type===\"borrowed\"?-w.amount:w.amount,Z=D.type===\"credit_card\"?D.balance-_:D.balance+_;await Ye(D.id,{balance:Z})}}M(D=>D.filter(_=>_.id!==j)),J.success(\"Debt deleted\")}}catch{M(w=>w.filter(D=>D.id!==j)),J.warning(\"Deleted in offline mode\")}},at=async j=>{try{const E=await _e.updateDebt(r,j,{status:\"settled\"});if(E.success){const w=N.find(D=>D.id===j);if(w&&w.status!==\"settled\"){const D=L.find(_=>_.id===w.accountId);if(D){const _=w.type===\"borrowed\"?-w.amount:w.amount,Z=D.type===\"credit_card\"?D.balance-_:D.balance+_;await Ye(D.id,{balance:Z});const ne={description:`Debt Settlement: ${w.personName}`,amount:w.amount,category:\"Transfer\",date:new Date().toISOString().split(\"T\")[0],tags:[\"debt-settlement\"],accountId:w.accountId};if(w.type===\"borrowed\"){const Q=await _e.createExpense(r,ne);Q.success&&x(we=>[...we,Q.expense])}else{const Q=await _e.createIncome(r,ne);Q.success&&f(we=>[...we,Q.income])}}}M(D=>D.map(_=>_.id===j?E.debt:_)),J.success(\"🎉 Debt settled! Great job!\"),ji({particleCount:150,spread:100,origin:{y:.6}})}}catch{M(w=>w.map(D=>D.id===j?{...D,status:\"settled\"}:D)),J.warning(\"Marked as settled locally\")}},Bt=async()=>{let j=0;const E=[];for(const w of p)if(w.category!==\"Subscription\"&&bu(w.description)){const D=Yr(w.description);D&&D.category===\"Subscription\"&&(E.push(nn(w.id,{category:\"Subscription\",tags:[...new Set([...w.tags,\"auto-migrated\",\"subscription\"])]})),j++)}return E.length>0?(await Promise.all(E),J.success(`Migrated ${j} transactions to Subscriptions`)):J.info(\"No subscription transactions found to migrate\"),{count:j}},Mt=async()=>{let j=0;const E=[],w=new Set,D=new Set;p.forEach(ne=>{const Q=`${ne.date}-${ne.description?.toLowerCase().trim()}-${ne.amount}`,we=!ne.description||ne.description.trim()===\"\"||ne.amount===0,te=w.has(Q);we||te?D.add(ne.id):w.add(Q)});const _=new Map;p.forEach(ne=>{if(D.has(ne.id))return;if(ne.category===\"Subscription\"||ne.isRecurring||bu(ne.description)){const we=new Date(ne.date),te=`${ne.description.toLowerCase().trim()}-${we.getFullYear()}-${we.getMonth()}`;_.has(te)||_.set(te,[]),_.get(te).push(ne)}}),_.forEach(ne=>{if(ne.length>1){ne.sort((Q,we)=>Q.isRecurring!==we.isRecurring?Q.isRecurring?-1:1:new Date(we.date).getTime()-new Date(Q.date).getTime());for(let Q=1;Q<ne.length;Q++)D.add(ne[Q].id)}}),D.forEach(ne=>{E.push(Fa(ne)),j++});const Z=new Set;for(const ne of v){const Q=`${ne.date}-${ne.source?.toLowerCase().trim()}-${ne.amount}`,we=!ne.source||ne.source.trim()===\"\"||ne.amount===0,te=Z.has(Q);we||te?(E.push(wt(ne.id)),j++):Z.add(Q)}return E.length>0?(await Promise.all(E),J.success(`Cleaned up ${j} entries (Duplicates & Density Checks)`)):J.info(\"Logs are clean. No redundancies found.\"),{count:j}},Ct=async j=>{try{const E=await _e.createGoal(r,j);E.success&&(B(w=>[...w,E.goal]),j.monthly_contribution>0&&await dt({type:\"expense\",description:`Goal Contribution: ${E.goal.name}`,amount:j.monthly_contribution,category:\"Transfer\",accountId:j.accountId||\"none\",frequency:\"monthly\",startDate:j.startDate||E.goal.createdAt.split(\"T\")[0],tags:[\"goal\",\"contribution\",E.goal.name.toLowerCase()],goalId:E.goal.id}),J.success(\"Goal created\"))}catch{const w={id:`temp_${Date.now()}`,...j,createdAt:new Date().toISOString()};B(D=>[...D,w]),J.warning(\"Created in offline mode\")}},ht=async(j,E)=>{try{const w=await _e.updateGoal(r,j,E);if(w.success){const D=O.find(_=>_.id===j);if(D){if((w.goal.monthly_contribution||0)>0){const _=he.find(Z=>Z.goalId===j);_?await kt(_.id,{amount:w.goal.monthly_contribution||0,description:`Goal Contribution: ${w.goal.name}`}):await dt({type:\"expense\",description:`Goal Contribution: ${w.goal.name}`,amount:w.goal.monthly_contribution||0,category:\"Transfer\",accountId:w.goal.accountId||\"none\",frequency:\"monthly\",startDate:w.goal.startDate||D.createdAt?.split(\"T\")[0]||new Date().toISOString().split(\"T\")[0],tags:[\"goal\",\"contribution\",w.goal.name.toLowerCase()],goalId:w.goal.id})}else if(D.monthly_contribution&&D.monthly_contribution>0){const _=he.find(Z=>Z.goalId===j);_&&await Sa(_.id)}}B(_=>_.map(Z=>Z.id===j?w.goal:Z)),w.goal.currentAmount>=w.goal.targetAmount?(J.success(`🎉 Goal \"${w.goal.name}\" completed!`),ji({particleCount:200,spread:120,origin:{y:.5}})):J.success(\"Goal updated\")}}catch{B(D=>D.map(_=>_.id===j?{..._,...E}:_)),J.warning(\"Updated locally\")}},Yt=async j=>{try{(await _e.deleteGoal(r,j)).success&&(B(w=>w.filter(D=>D.id!==j)),J.success(\"Goal deleted\"))}catch{B(w=>w.filter(D=>D.id!==j)),J.warning(\"Deleted locally\")}},Rt=async j=>{try{const E=await _e.createAccount(r,j);E.success&&(R(w=>[...w,E.account]),J.success(\"Account created\"))}catch{const w={id:`temp_${Date.now()}`,...j,createdAt:new Date().toISOString()};R(D=>[...D,w]),J.warning(\"Created locally\")}},Ye=async(j,E)=>{try{const w=await _e.updateAccount(r,j,E);w.success&&(R(D=>D.map(_=>_.id===j?w.account:_)),J.success(\"Account updated\"))}catch{R(D=>D.map(_=>_.id===j?{..._,...E}:_)),J.warning(\"Updated locally\")}},$a=async j=>{try{(await _e.deleteAccount(r,j)).success&&(R(w=>w.filter(D=>D.id!==j)),J.success(\"Account deleted\"))}catch{R(w=>w.filter(D=>D.id!==j)),J.warning(\"Deleted locally\")}},na=async j=>{try{const E=await _e.createLiability(r,j);E.success&&(se(w=>[...w,E.liability]),J.success(\"Liability created\"),E.liability.emiAmount>0&&await dt({type:\"expense\",description:`EMI: ${E.liability.name}`,amount:E.liability.emiAmount,category:\"EMI\",accountId:E.liability.accountId||\"none\",frequency:\"monthly\",startDate:E.liability.startDate,tags:[\"emi\",\"liability\",E.liability.name.toLowerCase()],liabilityId:E.liability.id}))}catch{const w={id:`temp_${Date.now()}`,...j,principal:Number(j.principal),outstanding:Number(j.outstanding),interestRate:Number(j.interestRate),emiAmount:Number(j.emiAmount),tenure:Number(j.tenure),createdAt:new Date().toISOString()};se(D=>[...D,w]),J.warning(\"Created locally\")}},Qt=async(j,E)=>{try{const w=await _e.updateLiability(r,j,E);if(w.success){const D=S.find(_=>_.id===j);if(D){if(w.liability.emiAmount>0){const _=he.find(Z=>Z.liabilityId===j);_?await kt(_.id,{amount:w.liability.emiAmount,description:`EMI: ${w.liability.name}`}):await dt({type:\"expense\",description:`EMI: ${w.liability.name}`,amount:w.liability.emiAmount,category:\"EMI\",accountId:w.liability.accountId||\"none\",frequency:\"monthly\",startDate:w.liability.startDate,tags:[\"emi\",\"liability\",w.liability.name.toLowerCase()],liabilityId:w.liability.id})}else if(D.emiAmount>0){const _=he.find(Z=>Z.liabilityId===j);_&&await Sa(_.id)}}se(_=>_.map(Z=>Z.id===j?w.liability:Z)),J.success(\"Liability updated\")}}catch{se(D=>D.map(_=>_.id===j?{..._,...E}:_)),J.warning(\"Updated locally\")}},sa=async j=>{try{(await _e.deleteLiability(r,j)).success&&(se(w=>w.filter(D=>D.id!==j)),J.success(\"Liability deleted\"))}catch{se(w=>w.filter(D=>D.id!==j)),J.warning(\"Deleted locally\")}},dn=async(j,E)=>{try{const w=await _e.createInvestment(r,j);if(w.success){if(V(D=>[...D,w.investment]),E&&E!==\"none\"){const D=L.find(_=>_.id===E);if(D){const _=j.buyPrice*j.quantity;await Ye(E,{balance:D.balance-_});const Z={description:`Asset Purchase: ${j.symbol} (${j.quantity} units)`,amount:_,category:\"Transfer\",date:j.purchaseDate||new Date().toISOString().split(\"T\")[0],tags:[\"investment\",\"principal\",j.symbol],accountId:E},ne=await _e.createExpense(r,Z);ne.success&&x(Q=>[...Q,ne.expense])}}w.investment.type===\"sip\"&&await dt({type:\"expense\",description:`SIP: ${w.investment.symbol} (${w.investment.name})`,amount:w.investment.buyPrice*w.investment.quantity,category:\"Investment\",accountId:E||\"none\",frequency:\"monthly\",startDate:w.investment.purchaseDate,tags:[\"sip\",\"investment\",w.investment.symbol.toLowerCase()],investmentId:w.investment.id}),J.success(\"Investment created\")}}catch{const D={id:`temp_${Date.now()}`,...j,createdAt:new Date().toISOString()};V(_=>[..._,D]),J.warning(\"Created locally\")}},fs=async(j,E)=>{try{const w=await _e.updateInvestment(r,j,E);if(w.success){const D=P.find(_=>_.id===j);if(D){if(w.investment.type===\"sip\"){const _=he.find(Z=>Z.investmentId===j);_?await kt(_.id,{amount:w.investment.buyPrice*w.investment.quantity,description:`SIP: ${w.investment.symbol} (${w.investment.name})`}):await dt({type:\"expense\",description:`SIP: ${w.investment.symbol} (${w.investment.name})`,amount:w.investment.buyPrice*w.investment.quantity,category:\"Investment\",accountId:w.investment.accountId||\"none\",frequency:\"monthly\",startDate:w.investment.purchaseDate,tags:[\"sip\",\"investment\",w.investment.symbol.toLowerCase()],investmentId:w.investment.id})}else if(D.type===\"sip\"){const _=he.find(Z=>Z.investmentId===j);_&&await Sa(_.id)}}V(_=>_.map(Z=>Z.id===j?w.investment:Z)),J.success(\"Investment updated\")}}catch{V(D=>D.map(_=>_.id===j?{..._,...E}:_)),J.warning(\"Updated locally\")}},ao=async j=>{try{(await _e.deleteInvestment(r,j)).success&&(V(w=>w.filter(D=>D.id!==j)),J.success(\"Investment deleted\"))}catch{V(w=>w.filter(D=>D.id!==j)),J.warning(\"Deleted locally\")}},[no,ki]=A.useState(!1),[ms,Ci]=A.useState(\"goal\"),Ln=j=>{Ci(j),ki(!0)},qn=()=>{ki(!1)},hs=async j=>{const E=L.find(w=>w.id===j.accountId);if(!E){J.error(\"Account not found\");return}if(E.balance<j.amount){J.error(`Insufficient funds in ${E.name}`);return}if(await Ye(j.accountId,{balance:E.balance-j.amount}),j.destinationType===\"goal\"){const w=O.find(D=>D.id===j.destinationId);w&&await ht(j.destinationId,{currentAmount:w.currentAmount+j.amount})}else qe(w=>w+j.amount);J.success(`Successfully allocated ${cn[h.currency]}${j.amount.toLocaleString()} from ${E.name}!`,{description:`${j.destinationType===\"goal\"?\"Goal\":\"Emergency Fund\"} balance updated`}),ji({particleCount:100,spread:70,origin:{y:.6}})},In=async(j,E)=>{const w=L.find(D=>D.id===j);if(w){if(w.balance<E)throw J.error(`Insufficient funds in ${w.name}`),new Error(\"Insufficient funds\");await Ye(j,{balance:w.balance-E})}},Zt=async(j,E,w)=>{const D=L.find(Z=>Z.id===j),_=L.find(Z=>Z.id===E);if(!D||!_){J.error(\"Source or destination account not found\");return}if(D.balance<w){J.error(`Insufficient funds in ${D.name}`);return}try{await Ye(j,{balance:D.balance-w});const Z=_.type===\"credit_card\"?-w:w;await Ye(E,{balance:_.balance+Z});const ne={description:`Migration: ${D.name} → ${_.name}`,amount:w,category:\"Transfer\",date:new Date().toISOString().split(\"T\")[0],tags:[\"internal\",\"migration\"],accountId:j},Q=await _e.createExpense(r,ne);Q.success&&x(we=>[...we,Q.expense]),J.success(`Transferred ${cn[h.currency]}${w.toLocaleString()}!`,{description:`From ${D.name} to ${_.name}`}),ji({particleCount:50,spread:60,origin:{y:.7}})}catch(Z){console.error(\"Transfer failed\",Z),J.error(\"Capital migration protocol failed\")}},Cl=async()=>{try{const j=J.loading(\"Initiating factory reset...\"),E=async(D,_)=>{const Z=D.map(ne=>_(r,ne.id).catch(Q=>console.warn(`Failed to delete ${ne.id}`,Q)));await Promise.all(Z)};await Promise.all([E(he,_e.deleteRecurring),E(p,_e.deleteExpense),E(v,_e.deleteIncome),E(N,_e.deleteDebt),E(O,_e.deleteGoal),E(P,_e.deleteInvestment),E(S,_e.deleteLiability)]);const w=L.map(D=>_e.updateAccount(r,D.id,{balance:0}).catch(_=>console.warn(`Failed to reset ${D.name}`,_)));await Promise.all(w),await bt(),J.dismiss(j),J.success(\"All data purged. Clean slate initialized.\")}catch(j){console.error(j),J.error(\"Partial purge only. Some data remains.\")}};return n.jsx(bp.Provider,{value:{userId:r,settings:h,currency:h.currency,expenses:p,incomes:v,debts:N,goals:O,accounts:L,investments:P,liabilities:S,recurringTransactions:he,notifications:fe,emergencyFundAmount:Se,isLoading:c,isRefreshing:m,isOffline:Te,apiStatus:me,isFundAllocationOpen:no,fundAllocationType:ms,authStatus:C,currentUser:oe,isAwaitingPin:z,isRememberedUser:le,rememberedMobile:Ne,authMessage:Ve,refreshData:la,updateSettings:Gt,checkIdentity:Ee,login:He,signup:_a,logout:ba,clearPendingSession:ma,scheduleAccountDeletion:ja,cancelAccountDeletion:It,deletionDate:de,sendOtp:yt,verifyOtp:Ut,resetPin:Oa,pendingMobile:re,createExpense:un,updateExpense:nn,deleteExpense:Fa,createIncome:Da,updateIncome:Ue,deleteIncome:wt,createDebt:ie,updateDebt:Le,deleteDebt:ft,settleDebt:at,createGoal:Ct,updateGoal:ht,deleteGoal:Yt,createAccount:Rt,updateAccount:Ye,deleteAccount:$a,createLiability:na,updateLiability:Qt,deleteLiability:sa,migrateSubscriptions:Bt,cleanupDuplicates:Mt,createInvestment:dn,updateInvestment:fs,deleteInvestment:ao,createRecurringTransaction:dt,createRecurring:dt,updateRecurringTransaction:kt,deleteRecurringTransaction:Sa,processRecurringTransactions:Aa,setEmergencyFundAmount:qe,setNotifications:ye,applyTheme:ce,openFundAllocation:Ln,closeFundAllocation:qn,performFundAllocation:hs,deductFromAccount:In,transferFunds:Zt,clearAllData:Cl,backfillRequest:De,setBackfillRequest:tt,executeBackfill:ds},children:i})};function $e(i,r=\"USD\",c=!1){const u=typeof i==\"string\"?parseFloat(i.replace(/,/g,\"\")):i;if(isNaN(u))return\"\";const m=r===\"INR\"?\"en-IN\":\"en-US\",g={style:\"currency\",currency:r,notation:c?\"compact\":\"standard\",maximumFractionDigits:c?1:2};try{return new Intl.NumberFormat(m,g).format(u)}catch{return new Intl.NumberFormat(m,{...g,style:\"decimal\"}).format(u)}}function Qu(i,r=\"en-IN\"){const c=typeof i==\"string\"?parseFloat(i.replace(/,/g,\"\")):i;return isNaN(c)?\"\":new Intl.NumberFormat(r).format(c)}const yu=Qu;function o1(i){return i===\"\"||i===\"-\"?!0:/^-?\\d*\\.?\\d*$/.test(i)}function Wh(i){return i.replace(/,/g,\"\")}function UN(i){if(i<=0)return\"0 months\";const r=Math.floor(i/12),c=i%12,u=[];return r>0&&u.push(`${r} ${r===1?\"year\":\"years\"}`),(c>0||r===0)&&u.push(`${c} ${c===1?\"month\":\"months\"}`),u.join(\", \")}function BN(i,r=\"INR\"){const c=Math.abs(i),u=i<0?\"-\":\"\";if(r===\"INR\"){if(c>=1e7)return`${u}${(c/1e7).toFixed(2).replace(/\\.00$/,\"\")}C`;if(c>=1e5)return`${u}${(c/1e5).toFixed(2).replace(/\\.00$/,\"\")}L`;if(c>=1e4)return`${u}${(c/1e3).toFixed(1).replace(/\\.0$/,\"\")}K`}else{if(c>=1e9)return`${u}${(c/1e9).toFixed(2).replace(/\\.00$/,\"\")}B`;if(c>=1e6)return`${u}${(c/1e6).toFixed(2).replace(/\\.00$/,\"\")}M`;if(c>=1e4)return`${u}${(c/1e3).toFixed(1).replace(/\\.0$/,\"\")}K`}return u+Qu(c,r===\"INR\"?\"en-IN\":\"en-US\")}function LN(i,r=\"INR\"){const c=Math.abs(i),u=i<0?\"-\":\"\",m=(g,h)=>{let y=2;return g>=100?y=0:g>=10&&(y=1),`${u}${g.toFixed(y).replace(/\\.0+$/,\"\")}${h}`};if(r===\"INR\"){if(c>=1e7)return m(c/1e7,\"Cr\");if(c>=1e5)return m(c/1e5,\"L\");if(c>=1e3)return m(c/1e3,\"K\")}else{if(c>=1e9)return m(c/1e9,\"B\");if(c>=1e6)return m(c/1e6,\"M\");if(c>=1e3)return m(c/1e3,\"K\")}return u+Qu(c,r===\"INR\"?\"en-IN\":\"en-US\")}const Zu=A.createContext({});function Ku(i){const r=A.useRef(null);return r.current===null&&(r.current=i()),r.current}const yp=np?A.useLayoutEffect:A.useEffect,eo=A.createContext(null),Ju=A.createContext({transformPagePoint:i=>i,isStatic:!1,reducedMotion:\"never\"});function e0(i,r){if(typeof i==\"function\")return i(r);i!=null&&(i.current=r)}function c1(...i){return r=>{let c=!1;const u=i.map(m=>{const g=e0(m,r);return!c&&typeof g==\"function\"&&(c=!0),g});if(c)return()=>{for(let m=0;m<u.length;m++){const g=u[m];typeof g==\"function\"?g():e0(i[m],null)}}}}function u1(...i){return A.useCallback(c1(...i),i)}class d1 extends A.Component{getSnapshotBeforeUpdate(r){const c=this.props.childRef.current;if(c&&r.isPresent&&!this.props.isPresent){const u=c.offsetParent,m=Cy(u)&&u.offsetWidth||0,g=this.props.sizeRef.current;g.height=c.offsetHeight||0,g.width=c.offsetWidth||0,g.top=c.offsetTop,g.left=c.offsetLeft,g.right=m-g.width-g.left}return null}componentDidUpdate(){}render(){return this.props.children}}function f1({children:i,isPresent:r,anchorX:c,root:u}){const m=A.useId(),g=A.useRef(null),h=A.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:y}=A.useContext(Ju),p=i.props?.ref??i?.ref,x=u1(g,p);return A.useInsertionEffect(()=>{const{width:v,height:f,top:N,left:M,right:O}=h.current;if(r||!g.current||!v||!f)return;const B=c===\"left\"?`left: ${M}`:`right: ${O}`;g.current.dataset.motionPopId=m;const L=document.createElement(\"style\");y&&(L.nonce=y);const R=u??document.head;return R.appendChild(L),L.sheet&&L.sheet.insertRule(`"
      },
      {
        "file": "dist_test\\assets\\index-DHabN7TV.js",
        "line": 19,
        "snippet": "`),()=>{R.contains(L)&&R.removeChild(L)}},[r]),n.jsx(d1,{isPresent:r,childRef:g,sizeRef:h,children:A.cloneElement(i,{ref:x})})}const m1=({children:i,initial:r,isPresent:c,onExitComplete:u,custom:m,presenceAffectsLayout:g,mode:h,anchorX:y,root:p})=>{const x=Ku(h1),v=A.useId();let f=!0,N=A.useMemo(()=>(f=!1,{id:v,initial:r,isPresent:c,custom:m,onExitComplete:M=>{x.set(M,!0);for(const O of x.values())if(!O)return;u&&u()},register:M=>(x.set(M,!1),()=>x.delete(M))}),[c,x,u]);return g&&f&&(N={...N}),A.useMemo(()=>{x.forEach((M,O)=>x.set(O,!1))},[c]),A.useEffect(()=>{!c&&!x.size&&u&&u()},[c]),h===\"popLayout\"&&(i=n.jsx(f1,{isPresent:c,anchorX:y,root:p,children:i})),n.jsx(eo.Provider,{value:N,children:i})};function h1(){return new Map}function vp(i=!0){const r=A.useContext(eo);if(r===null)return[!0,null];const{isPresent:c,onExitComplete:u,register:m}=r,g=A.useId();A.useEffect(()=>{if(i)return m(g)},[i]);const h=A.useCallback(()=>i&&u&&u(g),[g,u,i]);return!c&&u?[!1,h]:[!0]}const Hr=i=>i.key||\"\";function t0(i){const r=[];return A.Children.forEach(i,c=>{A.isValidElement(c)&&r.push(c)}),r}const Bn=({children:i,custom:r,initial:c=!0,onExitComplete:u,presenceAffectsLayout:m=!0,mode:g=\"sync\",propagate:h=!1,anchorX:y=\"left\",root:p})=>{const[x,v]=vp(h),f=A.useMemo(()=>t0(i),[i]),N=h&&!x?[]:f.map(Hr),M=A.useRef(!0),O=A.useRef(f),B=Ku(()=>new Map),L=A.useRef(new Set),[R,P]=A.useState(f),[V,S]=A.useState(f);yp(()=>{M.current=!1,O.current=f;for(let ve=0;ve<V.length;ve++){const fe=Hr(V[ve]);N.includes(fe)?(B.delete(fe),L.current.delete(fe)):B.get(fe)!==!0&&B.set(fe,!1)}},[V,N.length,N.join(\"-\")]);const se=[];if(f!==R){let ve=[...f];for(let fe=0;fe<V.length;fe++){const ye=V[fe],Se=Hr(ye);N.includes(Se)||(ve.splice(fe,0,ye),se.push(ye))}return g===\"wait\"&&se.length&&(ve=se),S(t0(ve)),P(f),null}const{forceRender:he}=A.useContext(Zu);return n.jsx(n.Fragment,{children:V.map(ve=>{const fe=Hr(ve),ye=h&&!x?!1:f===V||N.includes(fe),Se=()=>{if(L.current.has(fe))return;if(L.current.add(fe),B.has(fe))B.set(fe,!0);else return;let qe=!0;B.forEach(Te=>{Te||(qe=!1)}),qe&&(he?.(),S(O.current),h&&v?.(),u&&u())};return n.jsx(m1,{isPresent:ye,initial:!M.current||c?void 0:!1,custom:r,presenceAffectsLayout:m,mode:g,root:p,onExitComplete:ye?void 0:Se,anchorX:y,children:ve},fe)})})},wp=A.createContext({strict:!1});function p1(i){for(const r in i)Ou[r]={...Ou[r],...i[r]}}const g1=new Set([\"animate\",\"exit\",\"variants\",\"initial\",\"style\",\"values\",\"variants\",\"transition\",\"transformTemplate\",\"custom\",\"inherit\",\"onBeforeLayoutMeasure\",\"onAnimationStart\",\"onAnimationComplete\",\"onUpdate\",\"onDragStart\",\"onDrag\",\"onDragEnd\",\"onMeasureDragConstraints\",\"onDirectionLock\",\"onDragTransitionEnd\",\"_dragX\",\"_dragY\",\"onHoverStart\",\"onHoverEnd\",\"onViewportEnter\",\"onViewportLeave\",\"globalTapTarget\",\"ignoreStrict\",\"viewport\"]);function Qr(i){return i.startsWith(\"while\")||i.startsWith(\"drag\")&&i!==\"draggable\"||i.startsWith(\"layout\")||i.startsWith(\"onTap\")||i.startsWith(\"onPan\")||i.startsWith(\"onLayout\")||g1.has(i)}let jp=i=>!Qr(i);function x1(i){typeof i==\"function\"&&(jp=r=>r.startsWith(\"on\")?!Qr(r):i(r))}try{x1(require(\"@emotion/is-prop-valid\").default)}catch{}function b1(i,r,c){const u={};for(const m in i)m===\"values\"&&typeof i.values==\"object\"||(jp(m)||c===!0&&Qr(m)||!r&&!Qr(m)||i.draggable&&m.startsWith(\"onDrag\"))&&(u[m]=i[m]);return u}const to=A.createContext({});function y1(i,r){if(sp(i)){const{initial:c,animate:u}=i;return{initial:c===!1||Xr(c)?c:void 0,animate:Xr(u)?u:void 0}}return i.inherit!==!1?r:{}}function v1(i){const{initial:r,animate:c}=y1(i,A.useContext(to));return A.useMemo(()=>({initial:r,animate:c}),[a0(r),a0(c)])}function a0(i){return Array.isArray(i)?i.join(\" \"):i}const Wu=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Np(i,r,c){for(const u in r)!Yu(r[u])&&!Ey(u,c)&&(i[u]=r[u])}function w1({transformTemplate:i},r){return A.useMemo(()=>{const c=Wu();return My(c,r,i),Object.assign({},c.vars,c.style)},[r])}function j1(i,r){const c=i.style||{},u={};return Np(u,c,i),Object.assign(u,w1(i,r)),u}function N1(i,r){const c={},u=j1(i,r);return i.drag&&i.dragListener!==!1&&(c.draggable=!1,u.userSelect=u.WebkitUserSelect=u.WebkitTouchCallout=\"none\",u.touchAction=i.drag===!0?\"none\":`pan-${i.drag===\"x\"?\"y\":\"x\"}`),i.tabIndex===void 0&&(i.onTap||i.onTapStart||i.whileTap)&&(c.tabIndex=0),c.style=u,c}const Sp=()=>({...Wu(),attrs:{}});function S1(i,r,c,u){const m=A.useMemo(()=>{const g=Sp();return zy(g,r,Ry(u),i.transformTemplate,i.style),{...g.attrs,style:{...g.style}}},[r]);if(i.style){const g={};Np(g,i.style,i),m.style={...g,...m.style}}return m}const A1=[\"animate\",\"circle\",\"defs\",\"desc\",\"ellipse\",\"g\",\"image\",\"line\",\"filter\",\"marker\",\"mask\",\"metadata\",\"path\",\"pattern\",\"polygon\",\"polyline\",\"rect\",\"stop\",\"switch\",\"symbol\",\"svg\",\"text\",\"tspan\",\"use\",\"view\"];function ed(i){return typeof i!=\"string\"||i.includes(\"-\")?!1:!!(A1.indexOf(i)>-1||/[A-Z]/u.test(i))}function D1(i,r,c,{latestValues:u},m,g=!1,h){const p=(h??ed(i)?S1:N1)(r,u,m,i),x=b1(r,typeof i==\"string\",g),v=i!==A.Fragment?{...x,...p,ref:c}:{},{children:f}=r,N=A.useMemo(()=>Yu(f)?f.get():f,[f]);return A.createElement(i,{...v,children:N})}function Fr(i){return Yu(i)?i.get():i}function T1({scrapeMotionValuesFromProps:i,createRenderState:r},c,u,m){return{latestValues:k1(c,u,m,i),renderState:r()}}function k1(i,r,c,u){const m={},g=u(i,{});for(const N in g)m[N]=Fr(g[N]);let{initial:h,animate:y}=i;const p=sp(i),x=Oy(i);r&&x&&!p&&i.inherit!==!1&&(h===void 0&&(h=r.initial),y===void 0&&(y=r.animate));let v=c?c.initial===!1:!1;v=v||h===!1;const f=v?y:h;if(f&&typeof f!=\"boolean\"&&!Fu(f)){const N=Array.isArray(f)?f:[f];for(let M=0;M<N.length;M++){const O=_y(i,N[M]);if(O){const{transitionEnd:B,transition:L,...R}=O;for(const P in R){let V=R[P];if(Array.isArray(V)){const S=v?V.length-1:0;V=V[S]}V!==null&&(m[P]=V)}for(const P in B)m[P]=B[P]}}}return m}const Ap=i=>(r,c)=>{const u=A.useContext(to),m=A.useContext(eo),g=()=>T1(i,r,u,m);return c?g():Ku(g)},C1=Ap({scrapeMotionValuesFromProps:Uy,createRenderState:Wu}),E1=Ap({scrapeMotionValuesFromProps:By,createRenderState:Sp}),M1=Symbol.for(\"motionComponentSymbol\");function z1(i,r,c){const u=A.useRef(c);A.useInsertionEffect(()=>{u.current=c});const m=A.useRef(null);return A.useCallback(g=>{g&&i.onMount?.(g),r&&(g?r.mount(g):r.unmount());const h=u.current;if(typeof h==\"function\")if(g){const y=h(g);typeof y==\"function\"&&(m.current=y)}else m.current?(m.current(),m.current=null):h(g);else h&&(h.current=g)},[r])}const Dp=A.createContext({});function yl(i){return i&&typeof i==\"object\"&&Object.prototype.hasOwnProperty.call(i,\"current\")}function R1(i,r,c,u,m,g){const{visualElement:h}=A.useContext(to),y=A.useContext(wp),p=A.useContext(eo),x=A.useContext(Ju).reducedMotion,v=A.useRef(null);u=u||y.renderer,!v.current&&u&&(v.current=u(i,{visualState:r,parent:h,props:c,presenceContext:p,blockInitialAnimation:p?p.initial===!1:!1,reducedMotionConfig:x,isSVG:g}));const f=v.current,N=A.useContext(Dp);f&&!f.projection&&m&&(f.type===\"html\"||f.type===\"svg\")&&O1(v.current,c,m,N);const M=A.useRef(!1);A.useInsertionEffect(()=>{f&&M.current&&f.update(c,p)});const O=c[Ly],B=A.useRef(!!O&&!window.MotionHandoffIsComplete?.(O)&&window.MotionHasOptimisedAnimation?.(O));return yp(()=>{f&&(M.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),B.current&&f.animationState&&f.animationState.animateChanges())}),A.useEffect(()=>{f&&(!B.current&&f.animationState&&f.animationState.animateChanges(),B.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(O)}),B.current=!1),f.enteringChildren=void 0)}),f}function O1(i,r,c,u){const{layoutId:m,layout:g,drag:h,dragConstraints:y,layoutScroll:p,layoutRoot:x,layoutCrossfade:v}=r;i.projection=new c(i.latestValues,r[\"data-framer-portal-id\"]?void 0:Tp(i.parent)),i.projection.setOptions({layoutId:m,layout:g,alwaysMeasureLayout:!!h||y&&yl(y),visualElement:i,animationType:typeof g==\"string\"?g:\"both\",initialPromotionConfig:u,crossfade:v,layoutScroll:p,layoutRoot:x})}function Tp(i){if(i)return i.options.allowProjection!==!1?i.projection:Tp(i.parent)}function vu(i,{forwardMotionProps:r=!1,type:c}={},u,m){u&&p1(u);const g=c?c===\"svg\":ed(i),h=g?E1:C1;function y(x,v){let f;const N={...A.useContext(Ju),...x,layoutId:_1(x)},{isStatic:M}=N,O=v1(x),B=h(x,M);if(!M&&np){U1();const L=B1(N);f=L.MeasureLayout,O.visualElement=R1(i,B,N,m,L.ProjectionNode,g)}return n.jsxs(to.Provider,{value:O,children:[f&&O.visualElement?n.jsx(f,{visualElement:O.visualElement,...N}):null,D1(i,x,z1(B,O.visualElement,v),B,M,r,g)]})}y.displayName=`motion.${typeof i==\"string\"?i:`create(${i.displayName??i.name??\"\"})`}`;const p=A.forwardRef(y);return p[M1]=i,p}function _1({layoutId:i}){const r=A.useContext(Zu).id;return r&&i!==void 0?r+\"-\"+i:i}function U1(i,r){A.useContext(wp).strict}function B1(i){const{drag:r,layout:c}=Ou;if(!r&&!c)return{};const u={...r,...c};return{MeasureLayout:r?.isEnabled(i)||c?.isEnabled(i)?u.MeasureLayout:void 0,ProjectionNode:u.ProjectionNode}}function L1(i,r){if(typeof Proxy>\"u\")return vu;const c=new Map,u=(g,h)=>vu(g,h,i,r),m=(g,h)=>u(g,h);return new Proxy(m,{get:(g,h)=>h===\"create\"?u:(c.has(h)||c.set(h,vu(h,void 0,i,r)),c.get(h))})}const q1=(i,r)=>r.isSVG??ed(i)?new qy(r):new Iy(r,{allowProjection:i!==A.Fragment});function kp(i,r,c,u=0,m=1){const g=Array.from(i).sort((x,v)=>x.sortNodePosition(v)).indexOf(r),h=i.size,y=(h-1)*u;return typeof c==\"function\"?c(g,h):m===1?g*u:y-g*u}function Lu(i,r,c={}){const u=vl(i,r,c.type===\"exit\"?i.presenceContext?.custom:void 0);let{transition:m=i.getDefaultTransition()||{}}=u||{};c.transitionOverride&&(m=c.transitionOverride);const g=u?()=>Promise.all(ip(i,u,c)):()=>Promise.resolve(),h=i.variantChildren&&i.variantChildren.size?(p=0)=>{const{delayChildren:x=0,staggerChildren:v,staggerDirection:f}=m;return I1(i,r,p,x,v,f,c)}:()=>Promise.resolve(),{when:y}=m;if(y){const[p,x]=y===\"beforeChildren\"?[g,h]:[h,g];return p().then(()=>x())}else return Promise.all([g(),h(c.delay)])}function I1(i,r,c=0,u=0,m=0,g=1,h){const y=[];for(const p of i.variantChildren)p.notify(\"AnimationStart\",r),y.push(Lu(p,r,{...h,delay:c+(typeof u==\"function\"?0:u)+kp(i.variantChildren,p,u,m,g)}).then(()=>p.notify(\"AnimationComplete\",r)));return Promise.all(y)}function V1(i,r,c={}){i.notify(\"AnimationStart\",r);let u;if(Array.isArray(r)){const m=r.map(g=>Lu(i,g,c));u=Promise.all(m)}else if(typeof r==\"string\")u=Lu(i,r,c);else{const m=typeof r==\"function\"?vl(i,r,c.custom):r;u=Promise.all(ip(i,m,c))}return u.then(()=>{i.notify(\"AnimationComplete\",r)})}function Cp(i,r){if(!Array.isArray(r))return!1;const c=r.length;if(c!==i.length)return!1;for(let u=0;u<c;u++)if(r[u]!==i[u])return!1;return!0}const H1=lp.length;function Ep(i){if(!i)return;if(!i.isControllingVariants){const c=i.parent?Ep(i.parent)||{}:{};return i.props.initial!==void 0&&(c.initial=i.props.initial),c}const r={};for(let c=0;c<H1;c++){const u=lp[c],m=i.props[u];(Xr(m)||m===!1)&&(r[u]=m)}return r}const G1=[...rp].reverse(),Y1=rp.length;function F1(i){return r=>Promise.all(r.map(({animation:c,options:u})=>V1(i,c,u)))}function $1(i){let r=F1(i),c=n0(),u=!0;const m=p=>(x,v)=>{const f=vl(i,v,p===\"exit\"?i.presenceContext?.custom:void 0);if(f){const{transition:N,transitionEnd:M,...O}=f;x={...x,...O,...M}}return x};function g(p){r=p(i)}function h(p){const{props:x}=i,v=Ep(i.parent)||{},f=[],N=new Set;let M={},O=1/0;for(let L=0;L<Y1;L++){const R=G1[L],P=c[R],V=x[R]!==void 0?x[R]:v[R],S=Xr(V),se=R===p?P.isActive:null;se===!1&&(O=L);let he=V===v[R]&&V!==x[R]&&S;if(he&&u&&i.manuallyAnimateOnMount&&(he=!1),P.protectedKeys={...M},!P.isActive&&se===null||!V&&!P.prevProp||Fu(V)||typeof V==\"boolean\")continue;const ve=X1(P.prevProp,V);let fe=ve||R===p&&P.isActive&&!he&&S||L>O&&S,ye=!1;const Se=Array.isArray(V)?V:[V];let qe=Se.reduce(m(R),{});se===!1&&(qe={});const{prevResolvedValues:Te={}}=P,ee={...Te,...qe},me=Y=>{fe=!0,N.has(Y)&&(ye=!0,N.delete(Y)),P.needsAnimating[Y]=!0;const oe=i.getValue(Y);oe&&(oe.liveStyle=!1)};for(const Y in ee){const oe=qe[Y],ge=Te[Y];if(M.hasOwnProperty(Y))continue;let z=!1;Ih(oe)&&Ih(ge)?z=!Cp(oe,ge):z=oe!==ge,z?oe!=null?me(Y):N.add(Y):oe!==void 0&&N.has(Y)?me(Y):P.protectedKeys[Y]=!0}P.prevProp=V,P.prevResolvedValues=qe,P.isActive&&(M={...M,...qe}),u&&i.blockInitialAnimation&&(fe=!1);const G=he&&ve;fe&&(!G||ye)&&f.push(...Se.map(Y=>{const oe={type:R};if(typeof Y==\"string\"&&u&&!G&&i.manuallyAnimateOnMount&&i.parent){const{parent:ge}=i,z=vl(ge,Y);if(ge.enteringChildren&&z){const{delayChildren:T}=z.transition||{};oe.delay=kp(ge.enteringChildren,i,T)}}return{animation:Y,options:oe}}))}if(N.size){const L={};if(typeof x.initial!=\"boolean\"){const R=vl(i,Array.isArray(x.initial)?x.initial[0]:x.initial);R&&R.transition&&(L.transition=R.transition)}N.forEach(R=>{const P=i.getBaseTarget(R),V=i.getValue(R);V&&(V.liveStyle=!0),L[R]=P??null}),f.push({animation:L})}let B=!!f.length;return u&&(x.initial===!1||x.initial===x.animate)&&!i.manuallyAnimateOnMount&&(B=!1),u=!1,B?r(f):Promise.resolve()}function y(p,x){if(c[p].isActive===x)return Promise.resolve();i.variantChildren?.forEach(f=>f.animationState?.setActive(p,x)),c[p].isActive=x;const v=h(p);for(const f in c)c[f].protectedKeys={};return v}return{animateChanges:h,setActive:y,setAnimateFunction:g,getState:()=>c,reset:()=>{c=n0()}}}function X1(i,r){return typeof r==\"string\"?r!==i:Array.isArray(r)?!Cp(r,i):!1}function zs(i=!1){return{isActive:i,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function n0(){return{animate:zs(!0),whileInView:zs(),whileHover:zs(),whileTap:zs(),whileDrag:zs(),whileFocus:zs(),exit:zs()}}class us{constructor(r){this.isMounted=!1,this.node=r}update(){}}class P1 extends us{constructor(r){super(r),r.animationState||(r.animationState=$1(r))}updateAnimationControlsSubscription(){const{animate:r}=this.node.getProps();Fu(r)&&(this.unmountControls=r.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:r}=this.node.getProps(),{animate:c}=this.node.prevProps||{};r!==c&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Q1=0;class Z1 extends us{constructor(){super(...arguments),this.id=Q1++}update(){if(!this.node.presenceContext)return;const{isPresent:r,onExitComplete:c}=this.node.presenceContext,{isPresent:u}=this.node.prevPresenceContext||{};if(!this.node.animationState||r===u)return;const m=this.node.animationState.setActive(\"exit\",!r);c&&!r&&m.then(()=>{c(this.id)})}mount(){const{register:r,onExitComplete:c}=this.node.presenceContext||{};c&&c(this.id),r&&(this.unmount=r(this.id))}unmount(){}}const K1={animation:{Feature:P1},exit:{Feature:Z1}};function Al(i,r,c,u={passive:!0}){return i.addEventListener(r,c,u),()=>i.removeEventListener(r,c)}function kl(i){return{point:{x:i.pageX,y:i.pageY}}}const J1=i=>r=>op(r)&&i(r,kl(r));function wl(i,r,c,u){return Al(i,r,J1(c),u)}const Mp=1e-4,W1=1-Mp,ew=1+Mp,zp=.01,tw=0-zp,aw=0+zp;function wa(i){return i.max-i.min}function nw(i,r,c){return Math.abs(i-r)<=c}function s0(i,r,c,u=.5){i.origin=u,i.originPoint=fa(r.min,r.max,i.origin),i.scale=wa(c)/wa(r),i.translate=fa(c.min,c.max,i.origin)-i.originPoint,(i.scale>=W1&&i.scale<=ew||isNaN(i.scale))&&(i.scale=1),(i.translate>=tw&&i.translate<=aw||isNaN(i.translate))&&(i.translate=0)}function jl(i,r,c,u){s0(i.x,r.x,c.x,u?u.originX:void 0),s0(i.y,r.y,c.y,u?u.originY:void 0)}function i0(i,r,c){i.min=c.min+r.min,i.max=i.min+wa(r)}function sw(i,r,c){i0(i.x,r.x,c.x),i0(i.y,r.y,c.y)}function l0(i,r,c){i.min=r.min-c.min,i.max=i.min+wa(r)}function Zr(i,r,c){l0(i.x,r.x,c.x),l0(i.y,r.y,c.y)}function an(i){return[i(\"x\"),i(\"y\")]}const Rp=({current:i})=>i?i.ownerDocument.defaultView:null,r0=new Set([\"auto\",\"scroll\"]);class Op{constructor(r,c,{transformPagePoint:u,contextWindow:m=window,dragSnapToOrigin:g=!1,distanceThreshold:h=3,element:y}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=M=>{this.handleScroll(M.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const M=ju(this.lastMoveEventInfo,this.history),O=this.startEvent!==null,B=Vy(M.offset,{x:0,y:0})>=this.distanceThreshold;if(!O&&!B)return;const{point:L}=M,{timestamp:R}=Ya;this.history.push({...L,timestamp:R});const{onStart:P,onMove:V}=this.handlers;O||(P&&P(this.lastMoveEvent,M),this.startEvent=this.lastMoveEvent),V&&V(this.lastMoveEvent,M)},this.handlePointerMove=(M,O)=>{this.lastMoveEvent=M,this.lastMoveEventInfo=wu(O,this.transformPagePoint),va.update(this.updatePoint,!0)},this.handlePointerUp=(M,O)=>{this.end();const{onEnd:B,onSessionEnd:L,resumeAnimation:R}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&R&&R(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=ju(M.type===\"pointercancel\"?this.lastMoveEventInfo:wu(O,this.transformPagePoint),this.history);this.startEvent&&B&&B(M,P),L&&L(M,P)},!op(r))return;this.dragSnapToOrigin=g,this.handlers=c,this.transformPagePoint=u,this.distanceThreshold=h,this.contextWindow=m||window;const p=kl(r),x=wu(p,this.transformPagePoint),{point:v}=x,{timestamp:f}=Ya;this.history=[{...v,timestamp:f}];const{onSessionStart:N}=c;N&&N(r,ju(x,this.history)),this.removeListeners=cp(wl(this.contextWindow,\"pointermove\",this.handlePointerMove),wl(this.contextWindow,\"pointerup\",this.handlePointerUp),wl(this.contextWindow,\"pointercancel\",this.handlePointerUp)),y&&this.startScrollTracking(y)}startScrollTracking(r){let c=r.parentElement;for(;c;){const u=getComputedStyle(c);(r0.has(u.overflowX)||r0.has(u.overflowY))&&this.scrollPositions.set(c,{x:c.scrollLeft,y:c.scrollTop}),c=c.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener(\"scroll\",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener(\"scroll\",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener(\"scroll\",this.onElementScroll,{capture:!0}),window.removeEventListener(\"scroll\",this.onWindowScroll)}}handleScroll(r){const c=this.scrollPositions.get(r);if(!c)return;const u=r===window,m=u?{x:window.scrollX,y:window.scrollY}:{x:r.scrollLeft,y:r.scrollTop},g={x:m.x-c.x,y:m.y-c.y};g.x===0&&g.y===0||(u?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=g.x,this.lastMoveEventInfo.point.y+=g.y):this.history.length>0&&(this.history[0].x-=g.x,this.history[0].y-=g.y),this.scrollPositions.set(r,m),va.update(this.updatePoint,!0))}updateHandlers(r){this.handlers=r}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),_u(this.updatePoint)}}function wu(i,r){return r?{point:r(i.point)}:i}function o0(i,r){return{x:i.x-r.x,y:i.y-r.y}}function ju({point:i},r){return{point:i,delta:o0(i,_p(r)),offset:o0(i,iw(r)),velocity:lw(r,.1)}}function iw(i){return i[0]}function _p(i){return i[i.length-1]}function lw(i,r){if(i.length<2)return{x:0,y:0};let c=i.length-1,u=null;const m=_p(i);for(;c>=0&&(u=i[c],!(m.timestamp-u.timestamp>Hy(r)));)c--;if(!u)return{x:0,y:0};const g=Gy(m.timestamp-u.timestamp);if(g===0)return{x:0,y:0};const h={x:(m.x-u.x)/g,y:(m.y-u.y)/g};return h.x===1/0&&(h.x=0),h.y===1/0&&(h.y=0),h}function rw(i,{min:r,max:c},u){return r!==void 0&&i<r?i=u?fa(r,i,u.min):Math.max(i,r):c!==void 0&&i>c&&(i=u?fa(c,i,u.max):Math.min(i,c)),i}function c0(i,r,c){return{min:r!==void 0?i.min+r:void 0,max:c!==void 0?i.max+c-(i.max-i.min):void 0}}function ow(i,{top:r,left:c,bottom:u,right:m}){return{x:c0(i.x,c,m),y:c0(i.y,r,u)}}function u0(i,r){let c=r.min-i.min,u=r.max-i.max;return r.max-r.min<i.max-i.min&&([c,u]=[u,c]),{min:c,max:u}}function cw(i,r){return{x:u0(i.x,r.x),y:u0(i.y,r.y)}}function uw(i,r){let c=.5;const u=wa(i),m=wa(r);return m>u?c=Uu(r.min,r.max-u,i.min):u>m&&(c=Uu(i.min,i.max-m,r.min)),up(0,1,c)}function dw(i,r){const c={};return r.min!==void 0&&(c.min=r.min-i.min),r.max!==void 0&&(c.max=r.max-i.min),c}const qu=.35;function fw(i=qu){return i===!1?i=0:i===!0&&(i=qu),{x:d0(i,\"left\",\"right\"),y:d0(i,\"top\",\"bottom\")}}function d0(i,r,c){return{min:f0(i,r),max:f0(i,c)}}function f0(i,r){return typeof i==\"number\"?i:i[r]||0}const mw=new WeakMap;class hw{constructor(r){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=da(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=r}start(r,{snapToCursor:c=!1,distanceThreshold:u}={}){const{presenceContext:m}=this.visualElement;if(m&&m.isPresent===!1)return;const g=f=>{c?(this.stopAnimation(),this.snapToCursor(kl(f).point)):this.pauseAnimation()},h=(f,N)=>{this.stopAnimation();const{drag:M,dragPropagation:O,onDragStart:B}=this.getProps();if(M&&!O&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Py(M),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=N,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),an(R=>{let P=this.getAxisMotionValue(R).get()||0;if(Pr.test(P)){const{projection:V}=this.visualElement;if(V&&V.layout){const S=V.layout.layoutBox[R];S&&(P=wa(S)*(parseFloat(P)/100))}}this.originPoint[R]=P}),B&&va.postRender(()=>B(f,N)),Vh(this.visualElement,\"transform\");const{animationState:L}=this.visualElement;L&&L.setActive(\"whileDrag\",!0)},y=(f,N)=>{this.latestPointerEvent=f,this.latestPanInfo=N;const{dragPropagation:M,dragDirectionLock:O,onDirectionLock:B,onDrag:L}=this.getProps();if(!M&&!this.openDragLock)return;const{offset:R}=N;if(O&&this.currentDirection===null){this.currentDirection=pw(R),this.currentDirection!==null&&B&&B(this.currentDirection);return}this.updateAxis(\"x\",N.point,R),this.updateAxis(\"y\",N.point,R),this.visualElement.render(),L&&L(f,N)},p=(f,N)=>{this.latestPointerEvent=f,this.latestPanInfo=N,this.stop(f,N),this.latestPointerEvent=null,this.latestPanInfo=null},x=()=>an(f=>this.getAnimationState(f)===\"paused\"&&this.getAxisMotionValue(f).animation?.play()),{dragSnapToOrigin:v}=this.getProps();this.panSession=new Op(r,{onSessionStart:g,onStart:h,onMove:y,onSessionEnd:p,resumeAnimation:x},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:v,distanceThreshold:u,contextWindow:Rp(this.visualElement),element:this.visualElement.current})}stop(r,c){const u=r||this.latestPointerEvent,m=c||this.latestPanInfo,g=this.isDragging;if(this.cancel(),!g||!m||!u)return;const{velocity:h}=m;this.startAnimation(h);const{onDragEnd:y}=this.getProps();y&&va.postRender(()=>y(u,m))}cancel(){this.isDragging=!1;const{projection:r,animationState:c}=this.visualElement;r&&(r.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:u}=this.getProps();!u&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),c&&c.setActive(\"whileDrag\",!1)}updateAxis(r,c,u){const{drag:m}=this.getProps();if(!u||!Gr(r,m,this.currentDirection))return;const g=this.getAxisMotionValue(r);let h=this.originPoint[r]+u[r];this.constraints&&this.constraints[r]&&(h=rw(h,this.constraints[r],this.elastic[r])),g.set(h)}resolveConstraints(){const{dragConstraints:r,dragElastic:c}=this.getProps(),u=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,m=this.constraints;r&&yl(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&u?this.constraints=ow(u.layoutBox,r):this.constraints=!1,this.elastic=fw(c),m!==this.constraints&&u&&this.constraints&&!this.hasMutatedConstraints&&an(g=>{this.constraints!==!1&&this.getAxisMotionValue(g)&&(this.constraints[g]=dw(u.layoutBox[g],this.constraints[g]))})}resolveRefConstraints(){const{dragConstraints:r,onMeasureDragConstraints:c}=this.getProps();if(!r||!yl(r))return!1;const u=r.current,{projection:m}=this.visualElement;if(!m||!m.layout)return!1;const g=Yy(u,m.root,this.visualElement.getTransformPagePoint());let h=cw(m.layout.layoutBox,g);if(c){const y=c(Fy(h));this.hasMutatedConstraints=!!y,y&&(h=$y(y))}return h}startAnimation(r){const{drag:c,dragMomentum:u,dragElastic:m,dragTransition:g,dragSnapToOrigin:h,onDragTransitionEnd:y}=this.getProps(),p=this.constraints||{},x=an(v=>{if(!Gr(v,c,this.currentDirection))return;let f=p&&p[v]||{};h&&(f={min:0,max:0});const N=m?200:1e6,M=m?40:1e7,O={type:\"inertia\",velocity:u?r[v]:0,bounceStiffness:N,bounceDamping:M,timeConstant:750,restDelta:1,restSpeed:10,...g,...f};return this.startAxisValueAnimation(v,O)});return Promise.all(x).then(y)}startAxisValueAnimation(r,c){const u=this.getAxisMotionValue(r);return Vh(this.visualElement,r),u.start(Xy(r,u,0,c,this.visualElement,!1))}stopAnimation(){an(r=>this.getAxisMotionValue(r).stop())}pauseAnimation(){an(r=>this.getAxisMotionValue(r).animation?.pause())}getAnimationState(r){return this.getAxisMotionValue(r).animation?.state}getAxisMotionValue(r){const c=`_drag${r.toUpperCase()}`,u=this.visualElement.getProps(),m=u[c];return m||this.visualElement.getValue(r,(u.initial?u.initial[r]:void 0)||0)}snapToCursor(r){an(c=>{const{drag:u}=this.getProps();if(!Gr(c,u,this.currentDirection))return;const{projection:m}=this.visualElement,g=this.getAxisMotionValue(c);if(m&&m.layout){const{min:h,max:y}=m.layout.layoutBox[c],p=g.get()||0;g.set(r[c]-fa(h,y,.5)+p)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:r,dragConstraints:c}=this.getProps(),{projection:u}=this.visualElement;if(!yl(c)||!u||!this.constraints)return;this.stopAnimation();const m={x:0,y:0};an(h=>{const y=this.getAxisMotionValue(h);if(y&&this.constraints!==!1){const p=y.get();m[h]=uw({min:p,max:p},this.constraints[h])}});const{transformTemplate:g}=this.visualElement.getProps();this.visualElement.current.style.transform=g?g({},\"\"):\"none\",u.root&&u.root.updateScroll(),u.updateLayout(),this.resolveConstraints(),an(h=>{if(!Gr(h,r,null))return;const y=this.getAxisMotionValue(h),{min:p,max:x}=this.constraints[h];y.set(fa(p,x,m[h]))})}addListeners(){if(!this.visualElement.current)return;mw.set(this.visualElement,this);const r=this.visualElement.current,c=wl(r,\"pointerdown\",p=>{const{drag:x,dragListener:v=!0}=this.getProps();x&&v&&!Qy(p.target)&&this.start(p)}),u=()=>{const{dragConstraints:p}=this.getProps();yl(p)&&p.current&&(this.constraints=this.resolveRefConstraints())},{projection:m}=this.visualElement,g=m.addEventListener(\"measure\",u);m&&!m.layout&&(m.root&&m.root.updateScroll(),m.updateLayout()),va.read(u);const h=Al(window,\"resize\",()=>this.scalePositionWithinConstraints()),y=m.addEventListener(\"didUpdate\",(({delta:p,hasLayoutChanged:x})=>{this.isDragging&&x&&(an(v=>{const f=this.getAxisMotionValue(v);f&&(this.originPoint[v]+=p[v].translate,f.set(f.get()+p[v].translate))}),this.visualElement.render())}));return()=>{h(),c(),g(),y&&y()}}getProps(){const r=this.visualElement.getProps(),{drag:c=!1,dragDirectionLock:u=!1,dragPropagation:m=!1,dragConstraints:g=!1,dragElastic:h=qu,dragMomentum:y=!0}=r;return{...r,drag:c,dragDirectionLock:u,dragPropagation:m,dragConstraints:g,dragElastic:h,dragMomentum:y}}}function Gr(i,r,c){return(r===!0||r===i)&&(c===null||c===i)}function pw(i,r=10){let c=null;return Math.abs(i.y)>r?c=\"y\":Math.abs(i.x)>r&&(c=\"x\"),c}class gw extends us{constructor(r){super(r),this.removeGroupControls=Ni,this.removeListeners=Ni,this.controls=new hw(r)}mount(){const{dragControls:r}=this.node.getProps();r&&(this.removeGroupControls=r.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ni}update(){const{dragControls:r}=this.node.getProps(),{dragControls:c}=this.node.prevProps||{};r!==c&&(this.removeGroupControls(),r&&(this.removeGroupControls=r.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const m0=i=>(r,c)=>{i&&va.postRender(()=>i(r,c))};class xw extends us{constructor(){super(...arguments),this.removePointerDownListener=Ni}onPointerDown(r){this.session=new Op(r,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Rp(this.node)})}createPanHandlers(){const{onPanSessionStart:r,onPanStart:c,onPan:u,onPanEnd:m}=this.node.getProps();return{onSessionStart:m0(r),onStart:m0(c),onMove:u,onEnd:(g,h)=>{delete this.session,m&&va.postRender(()=>m(g,h))}}}mount(){this.removePointerDownListener=wl(this.node.current,\"pointerdown\",r=>this.onPointerDown(r))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const $r={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let Nu=!1;class bw extends A.Component{componentDidMount(){const{visualElement:r,layoutGroup:c,switchLayoutGroup:u,layoutId:m}=this.props,{projection:g}=r;g&&(c.group&&c.group.add(g),u&&u.register&&m&&u.register(g),Nu&&g.root.didUpdate(),g.addEventListener(\"animationComplete\",()=>{this.safeToRemove()}),g.setOptions({...g.options,onExitComplete:()=>this.safeToRemove()})),$r.hasEverUpdated=!0}getSnapshotBeforeUpdate(r){const{layoutDependency:c,visualElement:u,drag:m,isPresent:g}=this.props,{projection:h}=u;return h&&(h.isPresent=g,Nu=!0,m||r.layoutDependency!==c||c===void 0||r.isPresent!==g?h.willUpdate():this.safeToRemove(),r.isPresent!==g&&(g?h.promote():h.relegate()||va.postRender(()=>{const y=h.getStack();(!y||!y.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:r}=this.props.visualElement;r&&(r.root.didUpdate(),dp.postRender(()=>{!r.currentAnimation&&r.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:r,layoutGroup:c,switchLayoutGroup:u}=this.props,{projection:m}=r;Nu=!0,m&&(m.scheduleCheckAfterUnmount(),c&&c.group&&c.group.remove(m),u&&u.deregister&&u.deregister(m))}safeToRemove(){const{safeToRemove:r}=this.props;r&&r()}render(){return null}}function Up(i){const[r,c]=vp(),u=A.useContext(Zu);return n.jsx(bw,{...i,layoutGroup:u,switchLayoutGroup:A.useContext(Dp),isPresent:r,safeToRemove:c})}const yw=(i,r)=>i.depth-r.depth;class vw{constructor(){this.children=[],this.isDirty=!1}add(r){fp(this.children,r),this.isDirty=!0}remove(r){mp(this.children,r),this.isDirty=!0}forEach(r){this.isDirty&&this.children.sort(yw),this.isDirty=!1,this.children.forEach(r)}}const Bp=[\"TopLeft\",\"TopRight\",\"BottomLeft\",\"BottomRight\"],ww=Bp.length,h0=i=>typeof i==\"string\"?parseFloat(i):i,p0=i=>typeof i==\"number\"||Zy.test(i);function jw(i,r,c,u,m,g){m?(i.opacity=fa(0,c.opacity??1,Nw(u)),i.opacityExit=fa(r.opacity??1,0,Sw(u))):g&&(i.opacity=fa(r.opacity??1,c.opacity??1,u));for(let h=0;h<ww;h++){const y=`border${Bp[h]}Radius`;let p=g0(r,y),x=g0(c,y);if(p===void 0&&x===void 0)continue;p||(p=0),x||(x=0),p===0||x===0||p0(p)===p0(x)?(i[y]=Math.max(fa(h0(p),h0(x),u),0),(Pr.test(x)||Pr.test(p))&&(i[y]+=\"%\")):i[y]=x}(r.rotate||c.rotate)&&(i.rotate=fa(r.rotate||0,c.rotate||0,u))}function g0(i,r){return i[r]!==void 0?i[r]:i.borderRadius}const Nw=Lp(0,.5,Ky),Sw=Lp(.5,.95,Ni);function Lp(i,r,c){return u=>u<i?0:u>r?1:c(Uu(i,r,u))}function x0(i,r){i.min=r.min,i.max=r.max}function on(i,r){x0(i.x,r.x),x0(i.y,r.y)}function b0(i,r){i.translate=r.translate,i.scale=r.scale,i.originPoint=r.originPoint,i.origin=r.origin}function y0(i,r,c,u,m){return i-=r,i=Hh(i,1/c,u),m!==void 0&&(i=Hh(i,1/m,u)),i}function Aw(i,r=0,c=1,u=.5,m,g=i,h=i){if(Pr.test(r)&&(r=parseFloat(r),r=fa(h.min,h.max,r/100)-h.min),typeof r!=\"number\")return;let y=fa(g.min,g.max,u);i===g&&(y-=r),i.min=y0(i.min,r,c,y,m),i.max=y0(i.max,r,c,y,m)}function v0(i,r,[c,u,m],g,h){Aw(i,r[c],r[u],r[m],r.scale,g,h)}const Dw=[\"x\",\"scaleX\",\"originX\"],Tw=[\"y\",\"scaleY\",\"originY\"];function w0(i,r,c,u){v0(i.x,r,Dw,c?c.x:void 0,u?u.x:void 0),v0(i.y,r,Tw,c?c.y:void 0,u?u.y:void 0)}function j0(i){return i.translate===0&&i.scale===1}function qp(i){return j0(i.x)&&j0(i.y)}function N0(i,r){return i.min===r.min&&i.max===r.max}function kw(i,r){return N0(i.x,r.x)&&N0(i.y,r.y)}function S0(i,r){return Math.round(i.min)===Math.round(r.min)&&Math.round(i.max)===Math.round(r.max)}function Ip(i,r){return S0(i.x,r.x)&&S0(i.y,r.y)}function A0(i){return wa(i.x)/wa(i.y)}function D0(i,r){return i.translate===r.translate&&i.scale===r.scale&&i.originPoint===r.originPoint}class Cw{constructor(){this.members=[]}add(r){fp(this.members,r),r.scheduleRender()}remove(r){if(mp(this.members,r),r===this.prevLead&&(this.prevLead=void 0),r===this.lead){const c=this.members[this.members.length-1];c&&this.promote(c)}}relegate(r){const c=this.members.findIndex(m=>r===m);if(c===0)return!1;let u;for(let m=c;m>=0;m--){const g=this.members[m];if(g.isPresent!==!1){u=g;break}}return u?(this.promote(u),!0):!1}promote(r,c){const u=this.lead;if(r!==u&&(this.prevLead=u,this.lead=r,r.show(),u)){u.instance&&u.scheduleRender(),r.scheduleRender(),r.resumeFrom=u,c&&(r.resumeFrom.preserveOpacity=!0),u.snapshot&&(r.snapshot=u.snapshot,r.snapshot.latestValues=u.animationValues||u.latestValues),r.root&&r.root.isUpdating&&(r.isLayoutDirty=!0);const{crossfade:m}=r.options;m===!1&&u.hide()}}exitAnimationComplete(){this.members.forEach(r=>{const{options:c,resumingFrom:u}=r;c.onExitComplete&&c.onExitComplete(),u&&u.options.onExitComplete&&u.options.onExitComplete()})}scheduleRender(){this.members.forEach(r=>{r.instance&&r.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Ew(i,r,c){let u=\"\";const m=i.x.translate/r.x,g=i.y.translate/r.y,h=c?.z||0;if((m||g||h)&&(u=`translate3d(${m}px, ${g}px, ${h}px) `),(r.x!==1||r.y!==1)&&(u+=`scale(${1/r.x}, ${1/r.y}) `),c){const{transformPerspective:x,rotate:v,rotateX:f,rotateY:N,skewX:M,skewY:O}=c;x&&(u=`perspective(${x}px) ${u}`),v&&(u+=`rotate(${v}deg) `),f&&(u+=`rotateX(${f}deg) `),N&&(u+=`rotateY(${N}deg) `),M&&(u+=`skewX(${M}deg) `),O&&(u+=`skewY(${O}deg) `)}const y=i.x.scale*r.x,p=i.y.scale*r.y;return(y!==1||p!==1)&&(u+=`scale(${y}, ${p})`),u||\"none\"}const Su=[\"\",\"X\",\"Y\",\"Z\"],Mw=1e3;let zw=0;function Au(i,r,c,u){const{latestValues:m}=r;m[i]&&(c[i]=m[i],r.setStaticValue(i,0),u&&(u[i]=0))}function Vp(i){if(i.hasCheckedOptimisedAppear=!0,i.root===i)return;const{visualElement:r}=i.options;if(!r)return;const c=cv(r);if(window.MotionHasOptimisedAnimation(c,\"transform\")){const{layout:m,layoutId:g}=i.options;window.MotionCancelOptimisedAnimation(c,\"transform\",va,!(m||g))}const{parent:u}=i;u&&!u.hasCheckedOptimisedAppear&&Vp(u)}function Hp({attachResizeListener:i,defaultParent:r,measureScroll:c,checkIsScrollRoot:u,resetTransform:m}){return class{constructor(h={},y=r?.()){this.id=zw++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(_w),this.nodes.forEach(qw),this.nodes.forEach(Iw),this.nodes.forEach(Uw)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=h,this.root=y?y.root||y:this,this.path=y?[...y.path,y]:[],this.parent=y,this.depth=y?y.depth+1:0;for(let p=0;p<this.path.length;p++)this.path[p].shouldResetTransform=!0;this.root===this&&(this.nodes=new vw)}addEventListener(h,y){return this.eventHandlers.has(h)||this.eventHandlers.set(h,new Jy),this.eventHandlers.get(h).add(y)}notifyListeners(h,...y){const p=this.eventHandlers.get(h);p&&p.notify(...y)}hasListeners(h){return this.eventHandlers.has(h)}mount(h){if(this.instance)return;this.isSVG=Wy(h)&&!ev(h),this.instance=h;const{layoutId:y,layout:p,visualElement:x}=this.options;if(x&&!x.current&&x.mount(h),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(p||y)&&(this.isLayoutDirty=!0),i){let v,f=0;const N=()=>this.root.updateBlockedByResize=!1;va.read(()=>{f=window.innerWidth}),i(h,()=>{const M=window.innerWidth;M!==f&&(f=M,this.root.updateBlockedByResize=!0,v&&v(),v=tv(N,250),$r.hasAnimatedSinceResize&&($r.hasAnimatedSinceResize=!1,this.nodes.forEach(C0)))})}y&&this.root.registerSharedNode(y,this),this.options.animate!==!1&&x&&(y||p)&&this.addEventListener(\"didUpdate\",({delta:v,hasLayoutChanged:f,hasRelativeLayoutChanged:N,layout:M})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const O=this.options.transition||x.getDefaultTransition()||Fw,{onLayoutAnimationStart:B,onLayoutAnimationComplete:L}=x.getProps(),R=!this.targetLayout||!Ip(this.targetLayout,M),P=!f&&N;if(this.options.layoutRoot||this.resumeFrom||P||f&&(R||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const V={...av(O,\"layout\"),onPlay:B,onComplete:L};(x.shouldReduceMotion||this.options.layoutRoot)&&(V.delay=0,V.type=!1),this.startAnimation(V),this.setAnimationOrigin(v,P)}else f||C0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=M})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const h=this.getStack();h&&h.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),_u(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Vw),this.animationId++)}getTransformTemplate(){const{visualElement:h}=this.options;return h&&h.getProps().transformTemplate}willUpdate(h=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Vp(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let v=0;v<this.path.length;v++){const f=this.path[v];f.shouldResetTransform=!0,f.updateScroll(\"snapshot\"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:y,layout:p}=this.options;if(y===void 0&&!p)return;const x=this.getTransformTemplate();this.prevTransformTemplateValue=x?x(this.latestValues,\"\"):void 0,this.updateSnapshot(),h&&this.notifyListeners(\"willUpdate\")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(T0);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(k0);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Lw),this.nodes.forEach(Rw),this.nodes.forEach(Ow)):this.nodes.forEach(k0),this.clearAllSnapshots();const y=nv.now();Ya.delta=up(0,1e3/60,y-Ya.timestamp),Ya.timestamp=y,Ya.isProcessing=!0,fu.update.process(Ya),fu.preRender.process(Ya),fu.render.process(Ya),Ya.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,dp.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Bw),this.sharedNodes.forEach(Hw)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,va.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){va.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!wa(this.snapshot.measuredBox.x)&&!wa(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let p=0;p<this.path.length;p++)this.path[p].updateScroll();const h=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=da(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners(\"measure\",this.layout.layoutBox);const{visualElement:y}=this.options;y&&y.notify(\"LayoutMeasure\",this.layout.layoutBox,h?h.layoutBox:void 0)}updateScroll(h=\"measure\"){let y=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===h&&(y=!1),y&&this.instance){const p=u(this.instance);this.scroll={animationId:this.root.animationId,phase:h,isRoot:p,offset:c(this.instance),wasRoot:this.scroll?this.scroll.isRoot:p}}}resetTransform(){if(!m)return;const h=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,y=this.projectionDelta&&!qp(this.projectionDelta),p=this.getTransformTemplate(),x=p?p(this.latestValues,\"\"):void 0,v=x!==this.prevTransformTemplateValue;h&&this.instance&&(y||vi(this.latestValues)||v)&&(m(this.instance,x),this.shouldResetTransform=!1,this.scheduleRender())}measure(h=!0){const y=this.measurePageBox();let p=this.removeElementScroll(y);return h&&(p=this.removeTransform(p)),$w(p),{animationId:this.root.animationId,measuredBox:y,layoutBox:p,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:h}=this.options;if(!h)return da();const y=h.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Xw))){const{scroll:x}=this.root;x&&(qr(y.x,x.offset.x),qr(y.y,x.offset.y))}return y}removeElementScroll(h){const y=da();if(on(y,h),this.scroll?.wasRoot)return y;for(let p=0;p<this.path.length;p++){const x=this.path[p],{scroll:v,options:f}=x;x!==this.root&&v&&f.layoutScroll&&(v.wasRoot&&on(y,h),qr(y.x,v.offset.x),qr(y.y,v.offset.y))}return y}applyTransform(h,y=!1){const p=da();on(p,h);for(let x=0;x<this.path.length;x++){const v=this.path[x];!y&&v.options.layoutScroll&&v.scroll&&v!==v.root&&Ir(p,{x:-v.scroll.offset.x,y:-v.scroll.offset.y}),vi(v.latestValues)&&Ir(p,v.latestValues)}return vi(this.latestValues)&&Ir(p,this.latestValues),p}removeTransform(h){const y=da();on(y,h);for(let p=0;p<this.path.length;p++){const x=this.path[p];if(!x.instance||!vi(x.latestValues))continue;Gh(x.latestValues)&&x.updateSnapshot();const v=da(),f=x.measurePageBox();on(v,f),w0(y,x.latestValues,x.snapshot?x.snapshot.layoutBox:void 0,v)}return vi(this.latestValues)&&w0(y,this.latestValues),y}setTargetDelta(h){this.targetDelta=h,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(h){this.options={...this.options,...h,crossfade:h.crossfade!==void 0?h.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ya.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(h=!1){const y=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=y.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=y.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=y.isSharedProjectionDirty);const p=!!this.resumingFrom||this!==y;if(!(h||p&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:v,layoutId:f}=this.options;if(!this.layout||!(v||f))return;this.resolvedRelativeTargetAt=Ya.timestamp;const N=this.getClosestProjectingParent();N&&this.linkedParentVersion!==N.layoutVersion&&!N.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(N&&N.layout?this.createRelativeTarget(N,this.layout.layoutBox,N.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=da(),this.targetWithTransforms=da()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),sw(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):on(this.target,this.layout.layoutBox),sv(this.target,this.targetDelta)):on(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,N&&!!N.resumingFrom==!!this.resumingFrom&&!N.options.layoutScroll&&N.target&&this.animationProgress!==1?this.createRelativeTarget(N,this.target,N.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Gh(this.parent.latestValues)||iv(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(h,y,p){this.relativeParent=h,this.linkedParentVersion=h.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=da(),this.relativeTargetOrigin=da(),Zr(this.relativeTargetOrigin,y,p),on(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const h=this.getLead(),y=!!this.resumingFrom||this!==h;let p=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(p=!1),y&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(p=!1),this.resolvedRelativeTargetAt===Ya.timestamp&&(p=!1),p)return;const{layout:x,layoutId:v}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(x||v))return;on(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,N=this.treeScale.y;lv(this.layoutCorrected,this.treeScale,this.path,y),h.layout&&!h.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(h.target=h.layout.layoutBox,h.targetWithTransforms=da());const{target:M}=h;if(!M){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(b0(this.prevProjectionDelta.x,this.projectionDelta.x),b0(this.prevProjectionDelta.y,this.projectionDelta.y)),jl(this.projectionDelta,this.layoutCorrected,M,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==N||!D0(this.projectionDelta.x,this.prevProjectionDelta.x)||!D0(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners(\"projectionUpdate\",M))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(h=!0){if(this.options.visualElement?.scheduleRender(),h){const y=this.getStack();y&&y.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=wi(),this.projectionDelta=wi(),this.projectionDeltaWithTransform=wi()}setAnimationOrigin(h,y=!1){const p=this.snapshot,x=p?p.latestValues:{},v={...this.latestValues},f=wi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!y;const N=da(),M=p?p.source:void 0,O=this.layout?this.layout.source:void 0,B=M!==O,L=this.getStack(),R=!L||L.members.length<=1,P=!!(B&&!R&&this.options.crossfade===!0&&!this.path.some(Yw));this.animationProgress=0;let V;this.mixTargetDelta=S=>{const se=S/1e3;E0(f.x,h.x,se),E0(f.y,h.y,se),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Zr(N,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Gw(this.relativeTarget,this.relativeTargetOrigin,N,se),V&&kw(this.relativeTarget,V)&&(this.isProjectionDirty=!1),V||(V=da()),on(V,this.relativeTarget)),B&&(this.animationValues=v,jw(v,x,this.latestValues,se,P,R)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=se},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(h){this.notifyListeners(\"animationStart\"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(_u(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=va.update(()=>{$r.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=rv(0)),this.currentAnimation=ov(this.motionValue,[0,1e3],{...h,velocity:0,isSync:!0,onUpdate:y=>{this.mixTargetDelta(y),h.onUpdate&&h.onUpdate(y)},onStop:()=>{},onComplete:()=>{h.onComplete&&h.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const h=this.getStack();h&&h.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners(\"animationComplete\")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Mw),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const h=this.getLead();let{targetWithTransforms:y,target:p,layout:x,latestValues:v}=h;if(!(!y||!p||!x)){if(this!==h&&this.layout&&x&&Gp(this.options.animationType,this.layout.layoutBox,x.layoutBox)){p=this.target||da();const f=wa(this.layout.layoutBox.x);p.x.min=h.target.x.min,p.x.max=p.x.min+f;const N=wa(this.layout.layoutBox.y);p.y.min=h.target.y.min,p.y.max=p.y.min+N}on(y,p),Ir(y,v),jl(this.projectionDeltaWithTransform,this.layoutCorrected,y,v)}}registerSharedNode(h,y){this.sharedNodes.has(h)||this.sharedNodes.set(h,new Cw),this.sharedNodes.get(h).add(y);const x=y.options.initialPromotionConfig;y.promote({transition:x?x.transition:void 0,preserveFollowOpacity:x&&x.shouldPreserveFollowOpacity?x.shouldPreserveFollowOpacity(y):void 0})}isLead(){const h=this.getStack();return h?h.lead===this:!0}getLead(){const{layoutId:h}=this.options;return h?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:h}=this.options;return h?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:h}=this.options;if(h)return this.root.sharedNodes.get(h)}promote({needsReset:h,transition:y,preserveFollowOpacity:p}={}){const x=this.getStack();x&&x.promote(this,p),h&&(this.projectionDelta=void 0,this.needsReset=!0),y&&this.setOptions({transition:y})}relegate(){const h=this.getStack();return h?h.relegate(this):!1}resetSkewAndRotation(){const{visualElement:h}=this.options;if(!h)return;let y=!1;const{latestValues:p}=h;if((p.z||p.rotate||p.rotateX||p.rotateY||p.rotateZ||p.skewX||p.skewY)&&(y=!0),!y)return;const x={};p.z&&Au(\"z\",h,x,this.animationValues);for(let v=0;v<Su.length;v++)Au(`rotate${Su[v]}`,h,x,this.animationValues),Au(`skew${Su[v]}`,h,x,this.animationValues);h.render();for(const v in x)h.setStaticValue(v,x[v]),this.animationValues&&(this.animationValues[v]=x[v]);h.scheduleRender()}applyProjectionStyles(h,y){if(!this.instance||this.isSVG)return;if(!this.isVisible){h.visibility=\"hidden\";return}const p=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,h.visibility=\"\",h.opacity=\"\",h.pointerEvents=Fr(y?.pointerEvents)||\"\",h.transform=p?p(this.latestValues,\"\"):\"none\";return}const x=this.getLead();if(!this.projectionDelta||!this.layout||!x.target){this.options.layoutId&&(h.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,h.pointerEvents=Fr(y?.pointerEvents)||\"\"),this.hasProjected&&!vi(this.latestValues)&&(h.transform=p?p({},\"\"):\"none\",this.hasProjected=!1);return}h.visibility=\"\";const v=x.animationValues||x.latestValues;this.applyTransformsToTarget();let f=Ew(this.projectionDeltaWithTransform,this.treeScale,v);p&&(f=p(v,f)),h.transform=f;const{x:N,y:M}=this.projectionDelta;h.transformOrigin=`${N.origin*100}% ${M.origin*100}% 0`,x.animationValues?h.opacity=x===this?v.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:h.opacity=x===this?v.opacity!==void 0?v.opacity:\"\":v.opacityExit!==void 0?v.opacityExit:0;for(const O in Yh){if(v[O]===void 0)continue;const{correct:B,applyTo:L,isCSSVariable:R}=Yh[O],P=f===\"none\"?v[O]:B(v[O],x);if(L){const V=L.length;for(let S=0;S<V;S++)h[L[S]]=P}else R?this.options.visualElement.renderState.vars[O]=P:h[O]=P}this.options.layoutId&&(h.pointerEvents=x===this?Fr(y?.pointerEvents)||\"\":\"none\")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(h=>h.currentAnimation?.stop()),this.root.nodes.forEach(T0),this.root.sharedNodes.clear()}}}function Rw(i){i.updateLayout()}function Ow(i){const r=i.resumeFrom?.snapshot||i.snapshot;if(i.isLead()&&i.layout&&r&&i.hasListeners(\"didUpdate\")){const{layoutBox:c,measuredBox:u}=i.layout,{animationType:m}=i.options,g=r.source!==i.layout.source;m===\"size\"?an(v=>{const f=g?r.measuredBox[v]:r.layoutBox[v],N=wa(f);f.min=c[v].min,f.max=f.min+N}):Gp(m,r.layoutBox,c)&&an(v=>{const f=g?r.measuredBox[v]:r.layoutBox[v],N=wa(c[v]);f.max=f.min+N,i.relativeTarget&&!i.currentAnimation&&(i.isProjectionDirty=!0,i.relativeTarget[v].max=i.relativeTarget[v].min+N)});const h=wi();jl(h,c,r.layoutBox);const y=wi();g?jl(y,i.applyTransform(u,!0),r.measuredBox):jl(y,c,r.layoutBox);const p=!qp(h);let x=!1;if(!i.resumeFrom){const v=i.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:f,layout:N}=v;if(f&&N){const M=da();Zr(M,r.layoutBox,f.layoutBox);const O=da();Zr(O,c,N.layoutBox),Ip(M,O)||(x=!0),v.options.layoutRoot&&(i.relativeTarget=O,i.relativeTargetOrigin=M,i.relativeParent=v)}}}i.notifyListeners(\"didUpdate\",{layout:c,snapshot:r,delta:y,layoutDelta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:x})}else if(i.isLead()){const{onExitComplete:c}=i.options;c&&c()}i.options.transition=void 0}function _w(i){i.parent&&(i.isProjecting()||(i.isProjectionDirty=i.parent.isProjectionDirty),i.isSharedProjectionDirty||(i.isSharedProjectionDirty=!!(i.isProjectionDirty||i.parent.isProjectionDirty||i.parent.isSharedProjectionDirty)),i.isTransformDirty||(i.isTransformDirty=i.parent.isTransformDirty))}function Uw(i){i.isProjectionDirty=i.isSharedProjectionDirty=i.isTransformDirty=!1}function Bw(i){i.clearSnapshot()}function T0(i){i.clearMeasurements()}function k0(i){i.isLayoutDirty=!1}function Lw(i){const{visualElement:r}=i.options;r&&r.getProps().onBeforeLayoutMeasure&&r.notify(\"BeforeLayoutMeasure\"),i.resetTransform()}function C0(i){i.finishAnimation(),i.targetDelta=i.relativeTarget=i.target=void 0,i.isProjectionDirty=!0}function qw(i){i.resolveTargetDelta()}function Iw(i){i.calcProjection()}function Vw(i){i.resetSkewAndRotation()}function Hw(i){i.removeLeadSnapshot()}function E0(i,r,c){i.translate=fa(r.translate,0,c),i.scale=fa(r.scale,1,c),i.origin=r.origin,i.originPoint=r.originPoint}function M0(i,r,c,u){i.min=fa(r.min,c.min,u),i.max=fa(r.max,c.max,u)}function Gw(i,r,c,u){M0(i.x,r.x,c.x,u),M0(i.y,r.y,c.y,u)}function Yw(i){return i.animationValues&&i.animationValues.opacityExit!==void 0}const Fw={duration:.45,ease:[.4,0,.1,1]},z0=i=>typeof navigator<\"u\"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(i),R0=z0(\"applewebkit/\")&&!z0(\"chrome/\")?Math.round:Ni;function O0(i){i.min=R0(i.min),i.max=R0(i.max)}function $w(i){O0(i.x),O0(i.y)}function Gp(i,r,c){return i===\"position\"||i===\"preserve-aspect\"&&!nw(A0(r),A0(c),.2)}function Xw(i){return i!==i.root&&i.scroll?.wasRoot}const Pw=Hp({attachResizeListener:(i,r)=>Al(i,\"resize\",r),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Du={current:void 0},Yp=Hp({measureScroll:i=>({x:i.scrollLeft,y:i.scrollTop}),defaultParent:()=>{if(!Du.current){const i=new Pw({});i.mount(window),i.setOptions({layoutScroll:!0}),Du.current=i}return Du.current},resetTransform:(i,r)=>{i.style.transform=r!==void 0?r:\"none\"},checkIsScrollRoot:i=>window.getComputedStyle(i).position===\"fixed\"}),Qw={pan:{Feature:xw},drag:{Feature:gw,ProjectionNode:Yp,MeasureLayout:Up}};function _0(i,r,c){const{props:u}=i;i.animationState&&u.whileHover&&i.animationState.setActive(\"whileHover\",c===\"Start\");const m=\"onHover\"+c,g=u[m];g&&va.postRender(()=>g(r,kl(r)))}class Zw extends us{mount(){const{current:r}=this.node;r&&(this.unmount=uv(r,(c,u)=>(_0(this.node,u,\"Start\"),m=>_0(this.node,m,\"End\"))))}unmount(){}}class Kw extends us{constructor(){super(...arguments),this.isActive=!1}onFocus(){let r=!1;try{r=this.node.current.matches(\":focus-visible\")}catch{r=!0}!r||!this.node.animationState||(this.node.animationState.setActive(\"whileFocus\",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive(\"whileFocus\",!1),this.isActive=!1)}mount(){this.unmount=cp(Al(this.node.current,\"focus\",()=>this.onFocus()),Al(this.node.current,\"blur\",()=>this.onBlur()))}unmount(){}}function U0(i,r,c){const{props:u}=i;if(i.current instanceof HTMLButtonElement&&i.current.disabled)return;i.animationState&&u.whileTap&&i.animationState.setActive(\"whileTap\",c===\"Start\");const m=\"onTap\"+(c===\"End\"?\"\":c),g=u[m];g&&va.postRender(()=>g(r,kl(r)))}class Jw extends us{mount(){const{current:r}=this.node;r&&(this.unmount=dv(r,(c,u)=>(U0(this.node,u,\"Start\"),(m,{success:g})=>U0(this.node,m,g?\"End\":\"Cancel\")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Iu=new WeakMap,Tu=new WeakMap,Ww=i=>{const r=Iu.get(i.target);r&&r(i)},ej=i=>{i.forEach(Ww)};function tj({root:i,...r}){const c=i||document;Tu.has(c)||Tu.set(c,{});const u=Tu.get(c),m=JSON.stringify(r);return u[m]||(u[m]=new IntersectionObserver(ej,{root:i,...r})),u[m]}function aj(i,r,c){const u=tj(r);return Iu.set(i,c),u.observe(i),()=>{Iu.delete(i),u.unobserve(i)}}const nj={some:0,all:1};class sj extends us{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:r={}}=this.node.getProps(),{root:c,margin:u,amount:m=\"some\",once:g}=r,h={root:c?c.current:void 0,rootMargin:u,threshold:typeof m==\"number\"?m:nj[m]},y=p=>{const{isIntersecting:x}=p;if(this.isInView===x||(this.isInView=x,g&&!x&&this.hasEnteredView))return;x&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive(\"whileInView\",x);const{onViewportEnter:v,onViewportLeave:f}=this.node.getProps(),N=x?v:f;N&&N(p)};return aj(this.node.current,h,y)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>\"u\")return;const{props:r,prevProps:c}=this.node;[\"amount\",\"margin\",\"root\"].some(ij(r,c))&&this.startObserver()}unmount(){}}function ij({viewport:i={}},{viewport:r={}}={}){return c=>i[c]!==r[c]}const lj={inView:{Feature:sj},tap:{Feature:Jw},focus:{Feature:Kw},hover:{Feature:Zw}},rj={layout:{ProjectionNode:Yp,MeasureLayout:Up}},oj={...K1,...lj,...Qw,...rj},Oe=L1(oj,q1),cj=()=>n.jsx(\"div\",{className:\"absolute inset-0 opacity-[0.03] pointer-events-none overflow-hidden\",children:n.jsxs(\"svg\",{width:\"100%\",height:\"100%\",xmlns:\"http://www.w3.org/2000/svg\",children:[n.jsx(\"defs\",{children:n.jsxs(\"pattern\",{id:\"grid\",width:\"40\",height:\"40\",patternUnits:\"userSpaceOnUse\",children:[n.jsx(\"path\",{d:\"M 40 0 L 0 0 0 40\",fill:\"none\",stroke:\"white\",strokeWidth:\"1\"}),n.jsx(\"circle\",{cx:\"0\",cy:\"0\",r:\"1\",fill:\"white\"})]})}),n.jsx(\"rect\",{width:\"100%\",height:\"100%\",fill:\"url(#grid)\"})]})}),Fp=({variant:i,className:r=\"\",animate:c=!1})=>{const u=i===\"ghost\"?\"mesh-ghost-blue\":i?`mesh-${i}`:\"\",m={animate1:{x:[0,40,-20,0],y:[0,-30,20,0],scale:[1,1.2,.8,1],transition:{duration:30,repeat:1/0,ease:\"linear\"}},animate2:{x:[0,-30,50,0],y:[0,40,-30,0],scale:[1,.8,1.2,1],transition:{duration:25,repeat:1/0,ease:\"linear\"}},animate3:{x:[0,20,-40,0],y:[0,-40,30,0],scale:[1,1.1,.9,1],transition:{duration:35,repeat:1/0,ease:\"linear\"}}};return n.jsxs(\"div\",{className:`absolute inset-0 pointer-events-none overflow-hidden ${u} ${r}`,children:[n.jsx(cj,{}),n.jsx(\"div\",{className:\"mesh-readability-lock\"}),n.jsx(\"div\",{className:\"mesh-blob mesh-blob-base\"}),n.jsx(Oe.div,{variants:m,animate:c?\"animate1\":void 0,className:\"mesh-blob mesh-blob-1\"}),n.jsx(Oe.div,{variants:m,animate:c?\"animate2\":void 0,className:\"mesh-blob mesh-blob-2\"}),n.jsx(Oe.div,{variants:m,animate:c?\"animate3\":void 0,className:\"mesh-blob mesh-blob-3\"})]})},uj=({recurring:i,currency:r,totalMonthlyIncome:c,onDelete:u})=>{const m=A.useMemo(()=>i.filter(B=>B.type===\"expense\").map(B=>{let L=\"Lifestyle\";const R=B.description?.toLowerCase()||\"\",P=B.category?.toLowerCase()||\"\";return(R.includes(\"insurance\")||R.includes(\"cloud\")||R.includes(\"drive\")||R.includes(\"icloud\")||R.includes(\"adobe\")||P.includes(\"insurance\")||P.includes(\"emi\"))&&(L=\"Vital\"),R.includes(\"trial\")||R.includes(\"premium\")&&Math.random()>.7,{...B,strategyCategory:L}}),[i]),g=A.useMemo(()=>{const B=[\"spotify\",\"apple music\",\"youtube music\",\"amazon music\",\"tidal\"],L=[\"netflix\",\"prime video\",\"hulu\",\"disney\",\"hbo\",\"hotstar\"],R=m.filter(V=>B.some(S=>V.description?.toLowerCase().includes(S))),P=m.filter(V=>L.some(S=>V.description?.toLowerCase().includes(S)));return m.map(V=>{let S=V.strategyCategory;const se=V.description?.toLowerCase()||\"\";if(R.length>1&&R.includes(V)){const he=R.reduce((ve,fe)=>ve.amount>fe.amount?ve:fe);V.id!==he.id&&(S=\"Ghost\")}return P.length>2&&P.includes(V)&&[...P].sort((ve,fe)=>fe.amount-ve.amount).indexOf(V)>=2&&(S=\"Ghost\"),se.includes(\"trial\")&&(S=\"Ghost\"),{...V,strategyCategory:S}})},[m]),h=g.reduce((B,L)=>{let R=L.amount;return L.frequency===\"yearly\"&&(R=L.amount/12),L.frequency===\"weekly\"&&(R=L.amount*4),L.frequency===\"custom\"&&L.customIntervalDays&&(R=L.amount*(30/L.customIntervalDays)),B+R},0),y=c>0?c/30:1,p=h/y,v=g.filter(B=>B.strategyCategory===\"Ghost\").reduce((B,L)=>{let R=L.amount;return L.frequency===\"yearly\"&&(R=L.amount/12),L.frequency===\"weekly\"&&(R=L.amount*4),B+R},0),f=.01,M=v*(Math.pow(1+f,60)-1)/f,O=(B,L)=>{let R=B;return L===\"yearly\"&&(R=B/12),L===\"weekly\"&&(R=B*4),L===\"custom\"&&(R=B*(30/28)),(R/y).toFixed(1)};return n.jsxs(\"div\",{className:\"space-y-6 animate-in slide-in-from-right duration-500\",children:[n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[n.jsxs(aa,{className:\"p-6 bg-slate-900/60 border-white/10 relative overflow-hidden\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 p-4 opacity-10\",children:n.jsx(kb,{className:\"w-24 h-24\"})}),n.jsx(\"h3\",{className:\"text-sm font-bold uppercase tracking-widest text-slate-400 mb-4\",children:\"Total Freedom Tax\"}),n.jsxs(\"div\",{className:\"flex items-end gap-2 mb-2\",children:[n.jsx(\"span\",{className:\"text-4xl font-black text-rose-400\",children:p.toFixed(1)}),n.jsx(\"span\",{className:\"text-lg font-bold text-slate-500 mb-1\",children:\"Days/Month\"})]}),n.jsx(\"p\",{className:\"text-xs text-slate-400\",children:'The \"Freedom Tax\" you pay with your life time.'})]}),n.jsxs(aa,{className:\"p-6 bg-indigo-900/20 border-indigo-500/20 relative overflow-hidden\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 p-4 opacity-10\",children:n.jsx(Si,{className:\"w-24 h-24 text-indigo-400\"})}),n.jsx(\"h3\",{className:\"text-sm font-bold uppercase tracking-widest text-indigo-400 mb-4\",children:\"Growth Pivot Potential\"}),n.jsxs(\"div\",{className:\"flex items-end gap-2 mb-2\",children:[n.jsx(\"span\",{className:\"text-4xl font-black text-indigo-300\",children:$e(M,r)}),n.jsx(\"span\",{className:\"text-lg font-bold text-indigo-500/60 mb-1\",children:\"in 5 Years\"})]}),n.jsx(\"p\",{className:\"text-xs text-indigo-400/80\",children:'If you cancel \"Ghost\" items and invest the savings at 12%.'})]})]}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"h3\",{className:\"text-lg font-black text-white uppercase tracking-tight flex items-center gap-2\",children:[n.jsx(Cb,{className:\"w-5 h-5 text-rose-400\"}),\"Strategist Analysis\"]}),n.jsx(\"div\",{className:\"grid gap-3\",children:g.map(B=>{const L=O(B.amount,B.frequency),R=B.strategyCategory===\"Ghost\",P=B.strategyCategory===\"Vital\",V=B.strategyCategory===\"Asset\";return n.jsxs(aa,{className:`p-4 border flex items-center justify-between group transition-all overflow-hidden relative ${R?\"mesh-purple border-purple-500/20 hover:border-purple-500/40\":P||V?\"mesh-teal border-teal-500/20\":\"mesh-purple border-purple-500/20\"}`,children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:`w-10 h-10 rounded-xl flex items-center justify-center text-lg ${R?\"bg-rose-500/10 text-rose-400\":P?\"bg-emerald-500/10 text-emerald-400\":\"bg-slate-800 text-slate-400\"}`,children:R?n.jsx(Jr,{className:\"w-5 h-5\"}):P?n.jsx(Ti,{className:\"w-5 h-5\"}):n.jsx(W0,{className:\"w-5 h-5\"})}),n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"font-bold text-slate-200\",children:B.description||B.source}),n.jsxs(\"div\",{className:\"flex items-center gap-2 mt-1\",children:[n.jsx(\"span\",{className:`text-[10px] font-black uppercase px-1.5 py-0.5 rounded ${R?\"bg-rose-500 text-black\":P?\"bg-emerald-500/20 text-emerald-400\":\"bg-slate-700 text-slate-400\"}`,children:B.strategyCategory}),n.jsxs(\"span\",{className:\"text-[10px] text-slate-500 font-medium\",children:[\"Freedom Tax: \",L,\" days\"]})]})]})]}),n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsxs(\"div\",{className:\"text-right\",children:[n.jsx(\"p\",{className:\"font-bold text-slate-200\",children:$e(B.amount,r)}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 uppercase\",children:B.frequency})]}),R&&n.jsx(Ge,{size:\"sm\",variant:\"destructive\",className:\"opacity-0 group-hover:opacity-100 transition-opacity\",onClick:()=>u(B.id,B.description||\"Subscription\"),children:\"Kill\"})]})]},B.id)})})]})]})};function dj(){const{accounts:i,currency:r,recurringTransactions:c,createRecurringTransaction:u,updateRecurringTransaction:m,deleteRecurringTransaction:g,processRecurringTransactions:h}=Di(),[y,p]=A.useState(\"list\"),x=c.filter(G=>G.type===\"income\").reduce((G,C)=>{let Y=C.amount;return C.frequency===\"yearly\"&&(Y=C.amount/12),C.frequency===\"weekly\"&&(Y=C.amount*4),G+Y},0),v=G=>({daily:\"Daily\",weekly:\"Weekly\",monthly:\"Monthly\",yearly:\"Yearly\"})[G]||G,f=({rec:G})=>{const C=i.find(Y=>Y.id===G.accountId);return n.jsxs(aa,{className:\"p-6 bg-slate-900/40 border-white/5 rounded-[28px] border hover:bg-slate-900/60 transition-all duration-300 group relative overflow-hidden\",children:[n.jsx(\"div\",{className:`absolute top-0 right-0 w-24 h-24 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20 ${G.type===\"income\"?\"bg-emerald-500\":\"bg-rose-500\"}`}),n.jsxs(\"div\",{className:\"flex items-start justify-between mb-8 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:`w-14 h-14 border border-white/5 rounded-2xl flex items-center justify-center shadow-inner group-hover:scale-105 transition-transform text-2xl ${G.type===\"income\"?\"bg-emerald-500/10 text-emerald-400\":\"bg-rose-500/10 text-rose-400\"}`,children:G.type===\"income\"?\"💰\":\"💸\"}),n.jsxs(\"div\",{className:\"min-w-0\",children:[n.jsx(\"h3\",{className:\"text-base font-bold text-slate-100 truncate flex items-center gap-2\",children:G.description||G.source}),n.jsx(\"p\",{className:\"text-[10px] uppercase font-black tracking-widest text-slate-600 mt-1\",children:v(G.frequency)})]})]}),n.jsxs(\"div\",{className:\"flex bg-slate-900/80 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity\",children:[n.jsx(Ge,{variant:\"ghost\",size:\"sm\",onClick:()=>ve(G),className:\"w-10 h-10 p-0 rounded-l-xl hover:bg-slate-800 text-slate-500 hover:text-indigo-400\",children:n.jsx(zb,{className:\"w-4 h-4\"})}),n.jsx(\"div\",{className:\"w-px bg-white/10 my-2\"}),n.jsx(Ge,{variant:\"ghost\",size:\"sm\",onClick:()=>g(G.id),className:\"w-10 h-10 p-0 rounded-r-xl hover:bg-rose-500/10 hover:text-rose-400 text-slate-500 hover:text-rose-400\",children:n.jsx(Ai,{className:\"w-4 h-4\"})})]})]}),n.jsxs(\"div\",{className:\"space-y-6 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-end\",children:[n.jsxs(\"div\",{className:\"flex flex-col\",children:[n.jsx(\"span\",{className:\"text-[10px] uppercase tracking-widest font-black text-slate-600 mb-1\",children:\"Commitment\"}),n.jsxs(\"span\",{className:`text-2xl font-black tabular-nums leading-none ${G.type===\"income\"?\"text-emerald-400\":\"text-slate-100\"}`,children:[G.type===\"income\"?\"+\":\"-\",$e(G.amount,r)]})]}),n.jsxs(\"div\",{className:\"text-right flex flex-col items-end\",children:[n.jsx(\"span\",{className:\"text-[10px] uppercase tracking-widest font-black text-slate-600 mb-1\",children:\"Wallet\"}),n.jsxs(\"span\",{className:\"text-xs font-bold text-slate-300 flex items-center gap-1.5 bg-white/5 px-2 py-1 rounded-lg\",children:[C?.icon,\" \",C?.name]})]})]}),n.jsxs(\"div\",{className:\"pt-6 border-t border-white/5 flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex flex-col gap-1\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-2 text-slate-500\",children:[n.jsx(Eu,{className:\"w-3 h-3\"}),n.jsx(\"span\",{className:\"text-[9px] font-black uppercase tracking-wider\",children:\"Timeline\"})]}),n.jsxs(\"div\",{className:\"text-[10px] font-bold text-slate-300\",children:[new Date(G.startDate).toLocaleDateString(void 0,{month:\"short\",year:\"numeric\"}),G.endDate?` — ${new Date(G.endDate).toLocaleDateString(void 0,{month:\"short\",year:\"numeric\"})}`:\" — Ongoing\"]})]}),n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[G.category&&n.jsx(\"div\",{className:\"bg-slate-800/50 px-2.5 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest text-slate-500 border border-white/5\",children:G.category}),n.jsx(\"div\",{className:\"w-8 h-8 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-lg shadow-inner\",children:C?.icon||\"🏦\"})]})]})]})]})},[N,M]=A.useState(!1),[O,B]=A.useState(!1),[L,R]=A.useState(!1),[P,V]=A.useState(null),[S,se]=A.useState({type:\"expense\",description:\"\",source:\"\",amount:\"\",category:\"\",accountId:i.length>0?i[0].id:\"\",frequency:\"monthly\",startDate:new Date().toISOString().split(\"T\")[0],endDate:\"\",tags:[]}),he=async()=>{const G={type:S.type,amount:parseFloat(S.amount),accountId:S.accountId,frequency:S.frequency,startDate:S.startDate,endDate:S.endDate||void 0,tags:S.tags};S.type===\"expense\"?(G.description=S.description,G.category=S.category):G.source=S.source,P?await m(P,G):await u(G),M(!1),ye()},ve=G=>{se({type:G.type,description:G.description||\"\",source:G.source||\"\",amount:G.amount.toString(),category:G.category||\"\",accountId:G.accountId,frequency:G.frequency,startDate:G.startDate.split(\"T\")[0],endDate:G.endDate?G.endDate.split(\"T\")[0]:\"\",tags:G.tags||[]}),V(G.id),M(!0)},fe=async()=>{B(!0),await h(),B(!1)},ye=()=>{se({type:\"expense\",description:\"\",source:\"\",amount:\"\",category:\"\",accountId:i.length>0?i[0].id:\"\",frequency:\"monthly\",startDate:new Date().toISOString().split(\"T\")[0],endDate:\"\",tags:[]}),V(null)},Se=c.filter(G=>G.amount&&G.amount>0),Te=(()=>{const G=Se.filter(ge=>ge.category===\"EMI\"||ge.description?.toLowerCase().includes(\"loan\")),C=Se.filter(ge=>ge.category===\"Subscription\"||ge.description?.toLowerCase().includes(\"subscription\")||[\"netflix\",\"spotify\",\"prime\",\"youtube\",\"apple\",\"hulu\",\"disney\",\"google\"].some(z=>ge.description?.toLowerCase().includes(z))),Y=Se.filter(ge=>ge.type===\"income\"),oe=Se.filter(ge=>!G.some(z=>z.id===ge.id)&&!C.some(z=>z.id===ge.id)&&!Y.some(z=>z.id===ge.id));return{loans:G,subscriptions:C,incomes:Y,others:oe}})(),me=(()=>{const G=$=>{const le=$.amount||0;return $.frequency===\"monthly\"?le:$.frequency===\"yearly\"?le/12:$.frequency===\"weekly\"?le*4:le*30},C=Te.loans.reduce(($,le)=>$+G(le),0),Y=Te.subscriptions.reduce(($,le)=>$+G(le),0),oe=Te.incomes.reduce(($,le)=>$+G(le),0),ge=Te.others.reduce(($,le)=>$+G(le),0),z=C+Y+ge,T=oe-z,re=oe>0?Math.max(0,Math.min(100,T/oe*100)):0;return{loanTotal:C,subTotal:Y,incomeTotal:oe,otherTotal:ge,totalOutflow:z,netMonthly:T,healthScore:re,totalActive:Se.length}})();return n.jsxs(\"div\",{className:\"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700\",children:[n.jsx(\"div\",{className:\"flex justify-center mb-6\",children:n.jsxs(\"div\",{className:\"bg-slate-900/60 p-1 rounded-2xl flex gap-1 border border-white/5\",children:[n.jsx(\"button\",{onClick:()=>p(\"list\"),className:`px-6 py-2 rounded-xl text-sm font-bold transition-all ${y===\"list\"?\"bg-indigo-600 text-white shadow-lg\":\"text-slate-500 hover:text-slate-300\"}`,children:\"Flow List\"}),n.jsxs(\"button\",{onClick:()=>p(\"strategist\"),className:`px-6 py-2 rounded-xl text-sm font-bold transition-all flex items-center gap-2 ${y===\"strategist\"?\"bg-indigo-600 text-white shadow-lg\":\"text-slate-500 hover:text-slate-300\"}`,children:[n.jsx(_s,{className:\"w-4 h-4\"}),\"Strategist\"]})]})}),y===\"strategist\"?n.jsx(uj,{recurring:c,currency:r,totalMonthlyIncome:x,onDelete:(G,C)=>{g(G)}}):n.jsxs(n.Fragment,{children:[n.jsxs(aa,{className:\"relative overflow-hidden bg-gradient-to-br from-indigo-600 via-purple-600 to-indigo-700 text-white rounded-[32px] border-white/10 shadow-2xl p-8\",children:[n.jsx(Fp,{variant:\"spending\",className:\"opacity-50\"}),n.jsx(\"div\",{className:\"absolute top-0 right-0 p-8 opacity-10 scale-150 rotate-12\",children:n.jsx(Eb,{className:\"w-32 h-32\"})}),n.jsxs(\"div\",{className:\"relative z-10 flex flex-col md:flex-row items-center justify-between gap-12\",children:[n.jsxs(\"div\",{className:\"space-y-4 text-center md:text-left\",children:[n.jsx(\"p\",{className:\"text-white/70 text-sm font-bold uppercase tracking-widest mb-1\",children:\"Monthly Leftover Cash\"}),n.jsxs(\"h1\",{className:\"text-5xl md:text-6xl font-black tracking-tighter tabular-nums mb-2\",children:[me.netMonthly>=0?\"+\":\"\",$e(me.netMonthly,r),n.jsx(\"span\",{className:\"text-xl text-white/50 ml-2 font-medium italic\",children:\"/month\"})]})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-3 gap-4 w-full md:w-auto\",children:[n.jsxs(\"div\",{className:\"bg-white/10 backdrop-blur-md px-6 py-4 rounded-3xl border border-white/10 text-center\",children:[n.jsx(\"p\",{className:\"text-[10px] uppercase font-bold text-white/60 mb-1\",children:\"Loan EMIs\"}),n.jsxs(\"span\",{className:\"font-bold text-lg text-rose-300\",children:[\"-\",$e(me.loanTotal,r)]})]}),n.jsxs(\"div\",{className:\"bg-white/10 backdrop-blur-md px-6 py-4 rounded-3xl border border-white/10 text-center\",children:[n.jsx(\"p\",{className:\"text-[10px] uppercase font-bold text-white/60 mb-1\",children:\"Subscriptions\"}),n.jsxs(\"span\",{className:\"font-bold text-lg text-indigo-200\",children:[\"-\",$e(me.subTotal,r)]})]}),n.jsxs(\"div\",{className:\"bg-white/10 backdrop-blur-md px-6 py-4 rounded-3xl border border-white/10 text-center\",children:[n.jsx(\"p\",{className:\"text-[10px] uppercase font-bold text-white/60 mb-1\",children:\"Recur. Income\"}),n.jsxs(\"span\",{className:\"font-bold text-lg text-emerald-400\",children:[\"+\",$e(me.incomeTotal,r)]})]})]})]})]}),n.jsxs(\"div\",{className:\"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 sticky top-0 z-30 py-2 bg-slate-950/80 backdrop-blur-md rounded-2xl border border-white/5\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-1.5 h-6 bg-indigo-500 rounded-full shadow-[0_0_15px_rgba(99,102,241,0.5)]\"}),n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-500\",children:\"Commitment Stream\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-2 w-full sm:w-auto\",children:[n.jsxs(Ge,{variant:\"ghost\",size:\"sm\",onClick:fe,disabled:O||c.length===0,className:\"flex-1 sm:flex-initial rounded-xl border border-white/5 hover:bg-slate-900/40 font-bold text-slate-400 hover:text-slate-100 px-4 h-10 text-xs\",children:[n.jsx(Wr,{className:`w-3.5 h-3.5 mr-2 ${O?\"animate-spin\":\"\"}`}),\"Sync\"]}),n.jsxs(Ge,{onClick:()=>M(!0),size:\"sm\",className:\"flex-1 sm:flex-initial bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl px-6 h-10 font-bold shadow-lg shadow-indigo-600/20 transition-all active:scale-95 text-xs\",children:[n.jsx(Nl,{className:\"w-3.5 h-3.5 mr-2\"}),\"Add New\"]})]})]}),c.length>0&&n.jsxs(\"div\",{className:\"px-4\",children:[n.jsxs(\"div\",{className:\"bg-slate-900/40 border border-white/5 rounded-2xl p-4 flex flex-col sm:flex-row sm:items-center justify-between gap-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-10 h-10 bg-indigo-500/10 rounded-xl flex items-center justify-center\",children:n.jsx(bn,{className:\"w-5 h-5 text-indigo-400\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-xs font-black uppercase tracking-widest text-slate-500 mb-0.5\",children:\"Net Monthly Flow\"}),n.jsxs(\"h4\",{className:`text-lg font-black tabular-nums leading-none ${me.netMonthly>=0?\"text-emerald-400\":\"text-rose-400\"}`,children:[me.netMonthly>=0?\"+\":\"\",$e(me.netMonthly,r)]})]})]}),n.jsxs(\"div\",{className:\"flex items-center gap-4 border-t sm:border-t-0 sm:border-l border-white/5 pt-4 sm:pt-0 sm:pl-6\",children:[n.jsxs(\"div\",{className:\"space-y-0.5\",children:[n.jsx(\"p\",{className:\"text-[10px] uppercase font-black text-slate-600\",children:\"Shadow Health\"}),n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsxs(\"span\",{className:`font-black text-lg tabular-nums ${me.healthScore>60?\"text-emerald-400\":me.healthScore>30?\"text-indigo-400\":\"text-rose-400\"}`,children:[Math.round(me.healthScore),\"%\"]}),n.jsx(\"div\",{className:\"px-2 py-0.5 rounded bg-white/5 border border-white/5\",children:n.jsx(\"span\",{className:\"text-[9px] font-black uppercase tracking-tight text-slate-400\",children:me.healthScore>=80?\"Elite\":me.healthScore>=60?\"Strong\":me.healthScore>=40?\"Stable\":me.healthScore>=20?\"Warning\":\"Critical\"})}),n.jsx(\"div\",{className:\"flex gap-0.5 ml-1\",children:[1,2,3,4,5].map(G=>n.jsx(\"div\",{className:`w-1.5 h-3 rounded-full transition-colors duration-500 ${me.healthScore/20>=G?me.healthScore>60?\"bg-emerald-500\":me.healthScore>30?\"bg-indigo-500\":\"bg-rose-500\":\"bg-slate-800\"}`},G))})]})]}),n.jsx(Ge,{variant:\"ghost\",size:\"sm\",onClick:()=>R(!L),className:\"text-indigo-400 hover:text-indigo-300 hover:bg-indigo-500/10 rounded-xl font-bold\",children:L?\"Hide Analysis\":\"Show Analysis\"})]})]}),L&&n.jsxs(\"div\",{className:\"mt-4 animate-in zoom-in-95 duration-300 grid grid-cols-1 md:grid-cols-2 gap-4\",children:[n.jsxs(aa,{className:\"bg-slate-900/40 border-white/5 p-4 rounded-2xl\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 mb-2 opacity-50\",children:[n.jsx(Hu,{className:\"w-4 h-4\"}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-[0.2em]\",children:\"Total Outflow\"})]}),n.jsx(\"p\",{className:\"text-xl font-black text-rose-400\",children:$e(me.totalOutflow,r)})]}),n.jsxs(aa,{className:\"bg-slate-900/40 border-white/5 p-4 rounded-2xl\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 mb-2 opacity-50\",children:[n.jsx(Mb,{className:\"w-4 h-4\"}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-[0.2em]\",children:\"Total Inflow\"})]}),n.jsx(\"p\",{className:\"text-xl font-black text-emerald-400\",children:$e(me.incomeTotal,r)})]})]})]}),n.jsx(\"div\",{className:\"px-4 pb-20 space-y-12\",children:Se.length===0?n.jsxs(aa,{className:\"py-24 text-center bg-slate-800/20 rounded-[40px] border border-dashed border-white/10\",children:[n.jsx(Eu,{className:\"w-20 h-20 mx-auto text-slate-700 mb-6\"}),n.jsx(\"h3\",{className:\"text-2xl font-black text-slate-200 mb-3\",children:\"No Active Commitments\"}),n.jsx(\"p\",{className:\"text-sm text-slate-500 font-bold mb-10 max-w-[320px] mx-auto leading-relaxed\",children:\"Set up your subscriptions, EMIs, and monthly income to unlock deep financial insights.\"}),n.jsxs(Ge,{onClick:()=>M(!0),className:\"bg-indigo-600/10 hover:bg-indigo-600/20 text-indigo-400 border border-indigo-600/20 rounded-2xl px-10 h-14 font-black\",children:[n.jsx(Nl,{className:\"w-5 h-5 mr-3\"}),\"Add First Commitment\"]})]}):n.jsxs(n.Fragment,{children:[Te.incomes.length>0&&n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 border-l-4 border-emerald-500 pl-4 py-1\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100 uppercase tracking-tight\",children:\"Recurring Income\"}),n.jsxs(\"span\",{className:\"bg-emerald-500/10 text-emerald-400 px-2 py-0.5 rounded text-[10px] font-black\",children:[Te.incomes.length,\" SOURCE(S)\"]})]}),n.jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:Te.incomes.map((G,C)=>n.jsx(f,{rec:G},`${G.id}-${C}`))})]}),Te.loans.length>0&&n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 border-l-4 border-rose-500 pl-4 py-1\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100 uppercase tracking-tight\",children:\"Loan EMIs\"}),n.jsxs(\"span\",{className:\"bg-rose-500/10 text-rose-400 px-2 py-0.5 rounded text-[10px] font-black\",children:[Te.loans.length,\" COMMITMENT(S)\"]})]}),n.jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:Te.loans.map((G,C)=>n.jsx(f,{rec:G},`${G.id}-${C}`))})]}),Te.subscriptions.length>0&&n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 border-l-4 border-indigo-500 pl-4 py-1\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100 uppercase tracking-tight\",children:\"Active Subscriptions\"}),n.jsxs(\"span\",{className:\"bg-indigo-500/10 text-indigo-400 px-2 py-0.5 rounded text-[10px] font-black\",children:[Te.subscriptions.length,\" SERVICE(S)\"]})]}),n.jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:Te.subscriptions.map((G,C)=>n.jsx(f,{rec:G},`${G.id}-${C}`))})]}),Te.others.length>0&&n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 border-l-4 border-slate-500 pl-4 py-1\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100 uppercase tracking-tight\",children:\"Other Commitments\"}),n.jsxs(\"span\",{className:\"bg-slate-500/10 text-slate-400 px-2 py-0.5 rounded text-[10px] font-black\",children:[Te.others.length,\" ITEM(S)\"]})]}),n.jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:Te.others.map((G,C)=>n.jsx(f,{rec:G},`${G.id}-${C}`))})]})]})}),n.jsx(Bs,{open:N,onOpenChange:M,children:n.jsxs(Ls,{className:\"max-w-md bg-slate-950 border-white/10 text-white rounded-[32px]\",children:[n.jsxs(qs,{children:[n.jsx(Is,{className:\"text-2xl font-black tracking-tight text-white\",children:P?\"Edit Commitment\":\"Create New Commitment\"}),n.jsx(Vs,{className:\"text-slate-400 font-bold\",children:P?\"Modify existing flow parameters.\":\"Automate your financial shadow-wallets.\"})]}),n.jsxs(\"div\",{className:\"space-y-6 mt-4\",children:[n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{className:`p-4 rounded-2xl border-2 cursor-pointer transition-all ${S.type===\"income\"?\"border-emerald-500 bg-emerald-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>se({...S,type:\"income\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 rounded-xl bg-emerald-500/20 flex items-center justify-center text-xl mb-2\",children:\"💰\"}),n.jsx(\"p\",{className:\"text-xs font-black uppercase text-white\",children:\"Money In\"}),n.jsx(\"p\",{className:\"text-[10px] text-emerald-400 font-bold\",children:\"Salary / Gift\"})]}),n.jsxs(\"div\",{className:`p-4 rounded-2xl border-2 cursor-pointer transition-all ${S.type===\"expense\"?\"border-indigo-500 bg-indigo-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>se({...S,type:\"expense\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 rounded-xl bg-indigo-500/20 flex items-center justify-center text-xl mb-2\",children:\"💸\"}),n.jsx(\"p\",{className:\"text-xs font-black uppercase text-white\",children:\"Money Out\"}),n.jsx(\"p\",{className:\"text-[10px] text-indigo-400 font-bold\",children:\"Rent / Sub\"})]})]}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"div\",{className:\"group\",children:[n.jsx(Re,{htmlFor:\"recurring-name\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block\",children:\"Commitment Name\"}),n.jsx(Pt,{id:\"recurring-name\",name:\"description\",value:S.type===\"expense\"?S.description:S.source,onChange:G=>se({...S,[S.type===\"expense\"?\"description\":\"source\"]:G.target.value}),placeholder:S.type===\"expense\"?\"e.g. Netflix, Rent\":\"e.g. Salary\",className:\"bg-white/5 border-white/5 rounded-xl h-12 focus:ring-indigo-500/50\",autoComplete:\"off\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"recurring-amount\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block\",children:\"Amount\"}),n.jsx(Pt,{id:\"recurring-amount\",name:\"amount\",type:\"number\",value:S.amount,onChange:G=>se({...S,amount:G.target.value}),placeholder:\"0.00\",className:\"bg-white/5 border-white/5 rounded-xl h-12\",autoComplete:\"off\"})]}),n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"recurring-frequency\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block\",children:\"Frequency\"}),n.jsxs(ha,{value:S.frequency,onValueChange:G=>se({...S,frequency:G}),children:[n.jsx(ga,{id:\"recurring-frequency\",name:\"frequency\",className:\"bg-white/5 border-white/5 rounded-xl h-12\",children:n.jsx(pa,{})}),n.jsxs(xa,{className:\"bg-slate-900 border-white/10 text-white\",children:[n.jsx(vt,{value:\"monthly\",children:\"Monthly\"}),n.jsx(vt,{value:\"weekly\",children:\"Weekly\"}),n.jsx(vt,{value:\"daily\",children:\"Daily\"}),n.jsx(vt,{value:\"yearly\",children:\"Yearly\"})]})]})]})]}),n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"recurring-account\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block\",children:\"Funding Wallet\"}),n.jsxs(ha,{value:S.accountId,onValueChange:G=>se({...S,accountId:G}),children:[n.jsx(ga,{id:\"recurring-account\",name:\"accountId\",className:\"bg-white/5 border-white/5 rounded-xl h-12\",children:n.jsx(pa,{placeholder:\"Target Account\"})}),n.jsx(xa,{className:\"bg-slate-900 border-white/10 text-white\",children:i.map(G=>n.jsxs(vt,{value:G.id,children:[G.icon,\" \",G.name]},G.id))})]})]}),S.type===\"expense\"&&n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"recurring-category\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block\",children:\"Category\"}),n.jsxs(ha,{value:S.category,onValueChange:G=>se({...S,category:G}),children:[n.jsx(ga,{id:\"recurring-category\",name:\"category\",className:\"bg-white/5 border-white/5 rounded-xl h-12\",children:n.jsx(pa,{placeholder:\"Purpose\"})}),n.jsx(xa,{className:\"bg-slate-900 border-white/10 text-white max-h-[200px]\",children:pp.map(G=>n.jsxs(vt,{value:G.value,children:[G.emoji,\" \",G.value]},G.value))})]})]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"recurring-start-date\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block\",children:\"Start Date\"}),n.jsx(Pt,{id:\"recurring-start-date\",name:\"startDate\",type:\"date\",value:S.startDate,onChange:G=>se({...S,startDate:G.target.value}),className:\"bg-white/5 border-white/5 rounded-xl h-12 text-xs\",autoComplete:\"off\"})]}),n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"recurring-end-date\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block\",children:\"End Date (Optional)\"}),n.jsx(Pt,{id:\"recurring-end-date\",name:\"endDate\",type:\"date\",value:S.endDate,onChange:G=>se({...S,endDate:G.target.value}),className:\"bg-white/5 border-white/5 rounded-xl h-12\",autoComplete:\"off\"})]})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4 relative z-10\",children:[n.jsx(Ge,{variant:\"ghost\",onClick:()=>M(!1),className:\"flex-1 rounded-2xl h-14 font-black text-slate-500 hover:bg-white/5\",children:\"Discard\"}),n.jsx(Ge,{onClick:he,className:\"flex-1 bg-indigo-600 hover:bg-indigo-500 text-white rounded-2xl h-14 font-black shadow-lg shadow-indigo-600/20\",disabled:!S.amount||!S.description&&!S.source||!S.accountId||S.type===\"expense\"&&!S.category,children:P?\"Update Flow\":\"Activate Flow\"})]})]})]})})]})]})}const fj=({isVisible:i,onNotificationClick:r,onSettingsClick:c,notificationCount:u=0})=>n.jsxs(\"header\",{className:`nav-bar fixed top-0 w-full h-16 flex items-center justify-between px-6 border-b border-white/5 transition-transform duration-300 ease-in-out z-[100] ${i?\"translate-y-0\":\"-translate-y-full\"}`,children:[n.jsx(\"button\",{onClick:c,\"aria-label\":\"User Settings\",className:\"w-10 h-10 sq-md bg-black border border-white/5 flex items-center justify-center hover:bg-white/5 transition-colors\",children:n.jsx(Mu,{className:\"w-5 h-5 text-slate-400\"})}),n.jsxs(\"div\",{className:\"flex flex-col items-center\",children:[n.jsx(\"img\",{src:\"/images/logo-dark.png\",alt:\"FinHub\",className:\"h-8 w-auto hidden dark:block\"}),n.jsx(\"img\",{src:\"/images/logo-light.png\",alt:\"FinHub\",className:\"h-8 w-auto block dark:hidden\"})]}),n.jsx(\"button\",{onClick:r,\"aria-label\":\"Notifications\",className:\"w-10 h-10 flex items-center justify-center text-slate-400 hover:text-white transition-colors relative\",children:n.jsxs(\"div\",{className:\"relative\",children:[n.jsx(Gu,{className:\"w-5 h-5\"}),u>0&&n.jsx(\"span\",{className:\"absolute top-0 right-0 w-2 h-2 bg-[#FF453A] sq-full ring-2 ring-black\"})]})})]}),mj=({isVisible:i,activeTab:r,onTabChange:c})=>n.jsxs(\"nav\",{className:`nav-bar fixed bottom-0 w-full h-20 flex items-center justify-around px-4 border-t border-white/5 transition-transform duration-300 ease-in-out z-[100] ${i?\"translate-y-0\":\"translate-y-full\"}`,children:[n.jsxs(\"div\",{className:`flex flex-col items-center relative py-4 cursor-pointer transition-colors ${r===\"dashboard\"?\"text-[#0A84FF]\":\"text-[#8E8E93] hover:text-white\"}`,onClick:()=>c(\"dashboard\"),children:[r===\"dashboard\"&&n.jsx(\"div\",{className:\"absolute top-0 w-8 h-0.5 bg-[#0A84FF] shadow-[0_0_15px_#0A84FF] rounded-full\"}),n.jsx(Rb,{className:\"w-6 h-6\"}),n.jsx(\"span\",{className:\"text-[9px] font-black uppercase mt-2 tracking-[0.3em]\",children:\"Home\"})]}),n.jsxs(\"div\",{className:`flex flex-col items-center transition-all cursor-pointer ${r===\"transactions\"?\"text-[#0A84FF]\":\"text-[#8E8E93] hover:text-white\"}`,onClick:()=>c(\"transactions\"),children:[n.jsx(Ob,{className:\"w-6 h-6\"}),n.jsx(\"span\",{className:\"text-[9px] font-black uppercase mt-2 tracking-[0.3em]\",children:\"History\"})]}),n.jsxs(\"div\",{className:`flex flex-col items-center transition-all cursor-pointer ${r===\"liability\"?\"text-[#0A84FF]\":\"text-[#8E8E93] hover:text-white\"}`,onClick:()=>c(\"liability\"),children:[n.jsx(ep,{className:\"w-6 h-6\"}),n.jsx(\"span\",{className:\"text-[9px] font-black uppercase mt-2 tracking-[0.3em]\",children:\"Bills\"})]}),n.jsxs(\"div\",{className:`flex flex-col items-center transition-all cursor-pointer ${r===\"investments\"?\"text-[#0A84FF]\":\"text-[#8E8E93] hover:text-white\"}`,onClick:()=>c(\"investments\"),children:[n.jsx(_b,{className:\"w-6 h-6\"}),n.jsx(\"span\",{className:\"text-[9px] font-black uppercase mt-2 tracking-[0.3em]\",children:\"Growth\"})]}),n.jsxs(\"div\",{className:`flex flex-col items-center transition-all cursor-pointer ${r===\"goals\"?\"text-[#0A84FF]\":\"text-[#8E8E93] hover:text-white\"}`,onClick:()=>c(\"goals\"),children:[n.jsx(_s,{className:\"w-6 h-6\"}),n.jsx(\"span\",{className:\"text-[9px] font-black uppercase mt-2 tracking-[0.3em]\",children:\"Goals\"})]}),n.jsxs(\"div\",{className:`flex flex-col items-center transition-all cursor-pointer ${r===\"more\"?\"text-[#0A84FF]\":\"text-[#8E8E93] hover:text-white\"}`,onClick:()=>c(\"more\"),children:[n.jsx(Ub,{className:\"w-6 h-6\"}),n.jsx(\"span\",{className:\"text-[9px] font-black uppercase mt-2 tracking-[0.3em]\",children:\"More\"})]})]}),hj=({children:i,activeTab:r,onTabChange:c,notificationCount:u,onNotificationClick:m,onSettingsClick:g,renderFab:h,forceHide:y=!1})=>{const[p,x]=A.useState(!0),v=A.useRef(0),f=20,N=p&&!y;return A.useEffect(()=>{const M=()=>{if(y)return;const O=window.scrollY;if(O<10){x(!0),v.current=O;return}const B=O-v.current;Math.abs(B)>f&&(B>0?x(!1):x(!0),v.current=O)};return window.addEventListener(\"scroll\",M,{passive:!0}),()=>window.removeEventListener(\"scroll\",M)},[y]),n.jsxs(\"div\",{className:\"min-h-screen bg-bg-primary text-text-primary\",children:[n.jsx(fj,{isVisible:N,notificationCount:u,onNotificationClick:m,onSettingsClick:g}),n.jsx(\"main\",{className:\"pt-[80px] pb-[140px] px-4 w-full md:max-w-3xl lg:max-w-5xl mx-auto min-h-screen\",children:i}),n.jsx(mj,{isVisible:N,activeTab:r,onTabChange:c}),h&&h(N)]})},Os=A.forwardRef(({value:i,onChange:r,allowDecimals:c=!0,maxDecimals:u=2,className:m,...g},h)=>{const[y,p]=A.useState(\"\");A.useEffect(()=>{if(i===\"\"||i===void 0||i===null)p(\"\");else{const f=i.toString();p(yu(f))}},[i]);const x=f=>{let N=f.target.value;const M=Wh(N);if(o1(M)&&!(!c&&M.includes(\".\"))){if(c&&M.includes(\".\")){const O=M.split(\".\");if(O[1]&&O[1].length>u)return}p(yu(M)),r(M)}},v=f=>{const N=Wh(y);N&&p(yu(N)),g.onBlur&&g.onBlur(f)};return n.jsx(Pt,{...g,ref:h,type:\"text\",inputMode:\"decimal\",value:y,onChange:x,onBlur:v,className:m})});Os.displayName=\"NumberInput\";const pj=Y0(\"inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden\",{variants:{variant:{default:\"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90\",secondary:\"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90\",destructive:\"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",outline:\"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground\"}},defaultVariants:{variant:\"default\"}});function B0({className:i,variant:r,asChild:c=!1,...u}){const m=c?G0:\"span\";return n.jsx(m,{\"data-slot\":\"badge\",className:ct(pj({variant:r}),i),...u})}const gj=i=>{if(i.category?.toLowerCase().includes(\"transfer\"))return!0;const r=(i.description||i.source||\"\").toLowerCase();return!!(r.includes(\"transfer\")||r.includes(\"payment\")||r.includes(\"cc bill\")||r.includes(\"credit card bill\")||r.includes(\"migration\")||i.tags&&Array.isArray(i.tags)&&i.tags.some(c=>c.toLowerCase()===\"transfer\"||c.toLowerCase()===\"internal\"))};function ku({className:i,...r}){return n.jsx(Bb,{\"data-slot\":\"checkbox\",className:ct(\"peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50\",i),...r,children:n.jsx(Lb,{\"data-slot\":\"checkbox-indicator\",className:\"flex items-center justify-center text-current transition-none\",children:n.jsx(F0,{className:\"size-3.5\"})})})}const xj=({isOpen:i,onClose:r,type:c,onSubmit:u,initialData:m,accounts:g,currency:h,roundUpEnabled:y=!0})=>{const[p,x]=A.useState({description:\"\",amount:\"\",category:\"\",source:\"\",personName:\"\",debtType:\"borrowed\",accountId:\"\",date:new Date().toISOString().split(\"T\")[0],tags:[],isRecurring:!1,frequency:\"monthly\",endDate:\"\",isIncomeGenerating:!1,justification:\"\",debtDueDate:\"\"}),[v,f]=A.useState(\"\"),[N,M]=A.useState(null),[O,B]=A.useState([]),[L,R]=A.useState(void 0),[P,V]=A.useState(void 0);A.useEffect(()=>{i&&(m?x({description:m.description||\"\",amount:m.amount?.toString()||\"\",category:m.category||\"\",source:m.source||\"\",personName:m.personName||\"\",debtType:m.type||\"borrowed\",accountId:m.accountId||\"\",date:m.date||new Date().toISOString().split(\"T\")[0],tags:m.tags||[],isRecurring:m.isRecurring||!1,frequency:m.frequency||\"monthly\",endDate:m.endDate||\"\",isIncomeGenerating:m.isIncomeGenerating||!1,justification:m.justification||\"\",debtDueDate:m.dueDate||\"\"}):g.length>0&&!p.accountId&&x(ee=>({...ee,accountId:g[0].id})))},[i,m,g,p.accountId]),A.useEffect(()=>{const ee=c===\"expense\"||c===\"income\"?p.description:p.personName;if(ee.length>2&&!m){const me=Yr(ee);me?(M(me.category),B(me.tags),R(me.suggestedAmount),V(me.suggestedDescription)):(M(null),B([]),R(void 0),V(void 0))}},[p.description,p.personName,c,m]);const S=ee=>{if(ee.preventDefault(),!p.accountId&&g.length>0){alert(\"Please select an account\");return}let me={amount:parseFloat(p.amount),date:p.date,tags:p.tags,accountId:p.accountId||(g.length>0?g[0].id:\"\"),isRecurring:p.isRecurring,frequency:p.frequency,customIntervalDays:p.customIntervalDays,startDate:p.date,endDate:p.endDate||void 0,isIncomeGenerating:p.isIncomeGenerating,justification:p.justification};c===\"expense\"?me={...me,description:p.description,category:p.category,roundUpAmount:p.roundUpAmount}:c===\"income\"?me={...me,source:p.description}:c===\"debt\"&&(me={...me,personName:p.personName,type:p.debtType,dueDate:p.debtDueDate||void 0});const G=g.find(C=>C.id===p.accountId);c===\"expense\"&&G?.type===\"credit_card\"&&gj({description:p.description,category:p.category})&&(me.category=\"Transfer\"),u(me),se()},se=()=>{x({description:\"\",amount:\"\",category:\"\",source:\"\",personName:\"\",debtType:\"borrowed\",accountId:g.length>0?g[0].id:\"\",date:new Date().toISOString().split(\"T\")[0],tags:[],isRecurring:!1,frequency:\"monthly\",endDate:\"\",isIncomeGenerating:!1,justification:\"\",debtDueDate:\"\"}),f(\"\"),M(null),B([]),R(void 0),V(void 0),r()},he=()=>{v.trim()&&!p.tags.includes(v.trim())&&(x({...p,tags:[...p.tags,v.trim()]}),f(\"\"))},ve=ee=>{if(ee.includes(\",\")){const me=ee.split(\",\").map(G=>G.trim()).filter(G=>G&&!p.tags.includes(G));me.length>0&&(x({...p,tags:[...p.tags,...me]}),f(\"\"))}else f(ee)},fe=ee=>{x({...p,tags:p.tags.filter(me=>me!==ee)})},ye=()=>{N&&(x(ee=>({...ee,category:N,tags:[...new Set([...ee.tags,...O])],amount:L&&!ee.amount?L.toString():ee.amount,description:P||ee.description,isRecurring:N===\"Subscription\"?!0:ee.isRecurring,frequency:N===\"Subscription\"?\"monthly\":ee.frequency})),M(null),B([]),R(void 0),V(void 0))},Se=async()=>{if(\"contacts\"in navigator&&\"ContactsManager\"in window)try{const ee=[\"name\"],me={multiple:!1},G=await navigator.contacts.select(ee,me);if(G.length>0&&G[0].name?.length>0){const C=G[0].name[0];x(Y=>({...Y,personName:C})),window.navigator.vibrate&&window.navigator.vibrate(20)}}catch(ee){console.error(\"Contact picker error:\",ee)}else alert(\"Contact Selection is only available on supported mobile browsers.\")},qe=[100,500,1e3,5e3],Te=ee=>{const G=(p.amount||\"0\")+\"0\".repeat(ee);x({...p,amount:G})};return n.jsx(Bs,{open:i,onOpenChange:se,children:n.jsxs(Ls,{className:\"max-w-md max-h-[90vh] overflow-y-auto bg-black border-white/5 p-0 shadow-2xl custom-scrollbar sq-2xl\",children:[n.jsxs(\"div\",{className:`px-8 pt-10 pb-8 border-b border-white/5 relative overflow-hidden ${c===\"expense\"?\"bg-rose-500/5\":c===\"income\"?\"bg-emerald-500/5\":\"bg-yellow-500/5\"}`,children:[n.jsx(\"div\",{className:`absolute top-0 right-0 w-32 h-32 blur-[60px] opacity-20 -mr-16 -mt-16 ${c===\"expense\"?\"bg-rose-500\":c===\"income\"?\"bg-emerald-500\":\"bg-yellow-500\"}`}),n.jsxs(qs,{className:\"relative z-10\",children:[n.jsxs(Is,{className:\"text-2xl font-black tracking-tighter text-slate-100\",children:[m?\"Update\":\"Add\",\" \",c===\"expense\"?\"Money Out\":c===\"income\"?\"Money In\":\"Personal IOU\"]}),n.jsx(Vs,{className:\"text-slate-500 font-bold text-[10px] uppercase tracking-[0.2em] mt-1\",children:c===\"debt\"?\"Protocol for personal liquidity exchange\":`Recording ${c===\"expense\"?\"capital depletion\":\"capital injection\"} event`})]})]}),n.jsx(\"div\",{className:\"p-8\",children:n.jsxs(\"form\",{onSubmit:S,className:\"space-y-6\",children:[g.length>0?n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(Re,{htmlFor:\"transaction-account\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Account Reservoir\"}),n.jsxs(ha,{value:p.accountId,onValueChange:ee=>x({...p,accountId:ee}),children:[n.jsx(ga,{id:\"transaction-account\",name:\"accountId\",className:\"h-12 bg-black border-white/5 sq-md focus:ring-1 focus:ring-white/10 text-slate-200 font-bold\",children:n.jsx(pa,{placeholder:\"Select account\"})}),n.jsx(xa,{className:\"bg-black border-white/5\",children:g.map(ee=>n.jsx(vt,{value:ee.id,className:\"focus:bg-white/5 focus:text-white\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between w-full\",children:[n.jsx(\"span\",{className:\"font-bold\",children:ee.name}),n.jsx(\"span\",{className:\"text-[10px] text-slate-500 ml-4 font-mono\",children:$e(ee.balance,h)})]})},ee.id))})]})]}):n.jsx(\"div\",{className:\"p-4 bg-amber-500/10 border border-amber-500/20 sq-md text-[10px] font-black uppercase tracking-widest text-amber-400\",children:\"⚠️ Protocol Failure: No accounts detected\"}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(Re,{htmlFor:\"transaction-description\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:c===\"expense\"?\"Description\":c===\"income\"?\"Source\":\"Person Name\"}),n.jsxs(\"div\",{className:\"flex gap-2\",children:[n.jsx(Pt,{id:\"transaction-description\",name:\"description\",value:c===\"debt\"?p.personName:p.description,onChange:ee=>x({...p,[c===\"debt\"?\"personName\":\"description\"]:ee.target.value}),placeholder:c===\"expense\"?\"Starbucks Coffee, Netflix...\":c===\"income\"?\"Salary, Freelance...\":\"John Doe\",required:!0,className:\"h-12 bg-black border-white/5 sq-md focus:border-white/10 text-slate-200 font-bold placeholder:text-slate-600 flex-1\",autoComplete:\"off\"}),c===\"debt\"&&n.jsx(Ge,{type:\"button\",variant:\"ghost\",onClick:Se,className:\"h-12 w-12 bg-white/5 border border-white/5 sq-md flex items-center justify-center p-0 text-slate-400 hover:text-white\",title:\"Select from Contacts\",children:n.jsx(tp,{className:\"w-5 h-5\"})})]}),N&&n.jsxs(\"div\",{className:\"mt-3 p-4 bg-indigo-500/5 border border-indigo-500/10 sq-md flex items-start gap-3 animate-in fade-in zoom-in-95 duration-300\",children:[n.jsx(bn,{className:\"w-4 h-4 text-indigo-400 mt-0.5 flex-shrink-0\"}),n.jsxs(\"div\",{className:\"flex-1\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-widest text-indigo-300 leading-tight\",children:\"Intelligence Suggested\"}),n.jsxs(\"div\",{className:\"text-xs text-slate-400 mt-1 font-bold\",children:[c===\"expense\"&&n.jsxs(\"div\",{className:\"flex flex-col gap-1\",children:[n.jsxs(\"div\",{children:[\"Category: \",n.jsx(\"span\",{className:\"text-slate-100 uppercase\",children:N})]}),L&&n.jsxs(\"div\",{children:[\"Detected Amount: \",n.jsx(\"span\",{className:\"text-emerald-400\",children:$e(L,h)})]})]}),O.length>0&&n.jsxs(\"div\",{className:\"mt-1\",children:[\"Tags: \",n.jsx(\"span\",{className:\"text-slate-100\",children:O.join(\", \")})]})]}),n.jsx(Ge,{type:\"button\",size:\"sm\",variant:\"ghost\",onClick:ye,className:\"mt-3 h-8 bg-indigo-500/10 text-indigo-300 hover:bg-indigo-500/20 sq-sm text-[10px] font-black uppercase tracking-widest w-full\",children:\"Auto-Configure Form\"})]})]})]}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(Re,{htmlFor:\"transaction-amount\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Capital Value\"}),n.jsxs(\"div\",{className:\"flex gap-2\",children:[n.jsx(Os,{id:\"transaction-amount\",name:\"amount\",value:p.amount,onChange:ee=>x({...p,amount:ee}),placeholder:\"0.00\",step:\"any\",min:\"0\",required:!0,className:\"flex-1 h-14 bg-black border-white/5 sq-md focus:border-white/10 text-xl font-black text-slate-100 placeholder:text-slate-800\",autoComplete:\"off\"}),n.jsxs(\"div\",{className:\"flex flex-col gap-1\",children:[n.jsx(Ge,{type:\"button\",variant:\"ghost\",size:\"sm\",onClick:()=>Te(2),className:\"px-3 h-[25px] bg-white/5 text-[10px] font-black text-slate-400 hover:text-white sq-sm border border-white/5\",title:\"Add 00\",children:\"+00\"}),n.jsx(Ge,{type:\"button\",variant:\"ghost\",size:\"sm\",onClick:()=>Te(3),className:\"px-3 h-[25px] bg-white/5 text-[10px] font-black text-slate-400 hover:text-white sq-sm border border-white/5\",title:\"Add 000\",children:\"+000\"})]})]}),n.jsx(\"div\",{className:\"flex gap-2 mt-3\",children:qe.map(ee=>n.jsx(\"button\",{type:\"button\",onClick:()=>x({...p,amount:ee.toString()}),className:\"flex-1 py-2 text-[10px] font-black bg-black border border-white/5 text-slate-500 sq-md hover:bg-white/5 hover:text-slate-200 transition-all uppercase tracking-widest\",children:ee},ee))}),y&&c===\"expense\"&&p.amount&&parseFloat(p.amount)>0&&(()=>{const ee=parseFloat(p.amount),me=ee<100?Math.ceil(ee/10)*10:Math.ceil(ee/100)*100,G=me-ee;return G>0&&G>=1?n.jsxs(\"div\",{className:\"flex items-center space-x-3 mt-4 p-4 bg-indigo-500/5 border border-indigo-500/10 sq-md animate-in fade-in duration-500\",children:[n.jsx(ku,{id:\"roundUp\",name:\"roundUp\",className:\"border-white/20 data-[state=checked]:bg-indigo-500 data-[state=checked]:border-indigo-500\",onCheckedChange:C=>{x(Y=>({...Y,roundUpAmount:C?G:void 0}))}}),n.jsxs(\"div\",{className:\"grid gap-1.5 leading-none\",children:[n.jsxs(Re,{htmlFor:\"roundUp\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-100 flex items-center gap-2 cursor-pointer\",children:[n.jsx(Si,{className:\"w-3 h-3 text-indigo-400\"}),\"Reserve \",$e(G,h),\" to Goals\"]}),n.jsxs(\"p\",{className:\"text-[9px] font-bold text-slate-500 uppercase tracking-tighter\",children:[\"Round up capital to nearest 100 (\",$e(me,h),\")\"]})]})]}):null})()]}),c===\"expense\"&&n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(Re,{htmlFor:\"transaction-category\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Spending Domain\"}),n.jsxs(ha,{value:p.category,onValueChange:ee=>{x(me=>({...me,category:ee,isRecurring:ee===\"Subscription\"?!0:me.isRecurring,frequency:ee===\"Subscription\"?\"monthly\":me.frequency}))},children:[n.jsx(ga,{id:\"transaction-category\",name:\"category\",className:\"h-12 bg-black border-white/5 sq-md focus:ring-1 focus:ring-white/10 text-slate-200 font-bold\",children:n.jsx(pa,{placeholder:\"Select domain\"})}),n.jsx(xa,{className:\"bg-black border-white/5 max-h-[300px]\",children:Dv.map(ee=>n.jsxs(vt,{value:ee.value,className:\"focus:bg-white/5 focus:text-white\",children:[n.jsx(\"span\",{className:\"mr-2\",children:ee.emoji}),n.jsx(\"span\",{className:\"font-bold\",children:ee.value})]},ee.value))})]})]}),(()=>{const ee=g.find(z=>z.id===p.accountId);if(ee?.type!==\"credit_card\"||c!==\"expense\")return null;const me=ee.creditLimit||0,G=me*(ee.safeLimitPercentage||30)/100,C=Math.abs(ee.balance),Y=parseFloat(p.amount||\"0\"),ge=C+Y>G&&me>0;return n.jsxs(\"div\",{className:\"space-y-4 p-4 bg-black border border-white/5 sq-md animate-in slide-in-from-top-2 duration-300\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsx(Re,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500\",children:\"Credit Protocol\"}),ge&&n.jsx(B0,{variant:\"destructive\",className:\"bg-rose-500/10 text-rose-400 border-rose-500/20 text-[8px] font-black uppercase\",children:\"Limit Breach Risk\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(ku,{id:\"incomeGenerating\",name:\"isIncomeGenerating\",checked:p.isIncomeGenerating,onCheckedChange:z=>x(T=>({...T,isIncomeGenerating:!!z}))}),n.jsx(Re,{htmlFor:\"incomeGenerating\",className:\"text-xs font-bold text-slate-300 cursor-pointer\",children:\"This expense generates additional income\"})]}),ge&&!p.isIncomeGenerating&&n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(Re,{htmlFor:\"justification\",className:\"text-[9px] font-black uppercase tracking-widest text-rose-400\",children:\"Security Justification Required\"}),n.jsx(Pt,{id:\"justification\",name:\"justification\",placeholder:\"Why is this credit use essential?\",value:p.justification,onChange:z=>x(T=>({...T,justification:z.target.value})),className:\"bg-white/5 border-rose-500/20 focus:border-rose-500/50 sq-md h-12 text-sm\",required:ge,autoComplete:\"off\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase leading-relaxed\",children:\"Strategic credit use is prohibited beyond the safe threshold unless it manifests capital growth.\"})]})]})})(),c===\"debt\"&&n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(Re,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Asset Direction\"}),n.jsxs(\"div\",{className:\"flex gap-2 p-1.5 bg-black border border-white/5 sq-md\",children:[n.jsx(\"button\",{type:\"button\",onClick:()=>x({...p,debtType:\"lent\"}),className:`flex-1 py-3 px-4 sq-md text-[10px] font-black uppercase tracking-widest transition-all ${p.debtType===\"lent\"?\"bg-emerald-600 text-white shadow-lg\":\"text-slate-500 hover:text-slate-200 hover:bg-white/5\"} `,children:\"I Lent Capital\"}),n.jsx(\"button\",{type:\"button\",onClick:()=>x({...p,debtType:\"borrowed\"}),className:`flex-1 py-3 px-4 sq-md text-[10px] font-black uppercase tracking-widest transition-all ${p.debtType===\"borrowed\"?\"bg-rose-600 text-white shadow-lg\":\"text-slate-500 hover:text-slate-200 hover:bg-white/5\"} `,children:\"I Borrowed\"})]})]}),c===\"debt\"&&n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(Re,{htmlFor:\"debt-due-date\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Repayment Date (Optional)\"}),n.jsx(Pt,{id:\"debt-due-date\",name:\"debtDueDate\",type:\"date\",value:p.debtDueDate,onChange:ee=>x({...p,debtDueDate:ee.target.value}),className:\"h-12 bg-black border-white/5 sq-md focus:border-white/10 text-slate-200 font-bold\"})]}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(Re,{htmlFor:\"transaction-date\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Event Timestamp\"}),n.jsx(Pt,{id:\"transaction-date\",name:\"date\",type:\"date\",value:p.date,onChange:ee=>x({...p,date:ee.target.value}),required:!0,className:\"h-12 bg-black border-white/5 sq-md focus:border-white/10 text-slate-200 font-bold\"})]}),n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(Re,{htmlFor:\"transaction-tags\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Protocol Tags\"}),n.jsxs(\"div\",{className:\"flex gap-2\",children:[n.jsx(Pt,{id:\"transaction-tags\",name:\"tags\",value:v,onChange:ee=>ve(ee.target.value),onKeyPress:ee=>ee.key===\"Enter\"&&(ee.preventDefault(),he()),placeholder:\"urgent, recurring, etc...\",autoComplete:\"off\",className:\"h-12 bg-black border-white/5 sq-md focus:border-white/10 text-slate-200 font-bold placeholder:text-slate-800\"}),n.jsx(Ge,{type:\"button\",onClick:he,variant:\"ghost\",size:\"sm\",className:\"h-12 px-6 bg-white/5 text-[10px] font-black uppercase tracking-widest text-slate-400 hover:text-white sq-md border border-white/5\",children:\"Index\"})]}),p.tags.length>0&&n.jsx(\"div\",{className:\"flex flex-wrap gap-2 mt-2\",children:p.tags.map(ee=>n.jsxs(B0,{variant:\"secondary\",className:\"gap-2 bg-black border border-white/5 text-slate-300 font-bold px-3 py-1 sq-sm\",children:[\"#\",ee,n.jsx(\"button\",{type:\"button\",onClick:()=>fe(ee),\"aria-label\":`Remove tag ${ee}`,className:\"hover:text-rose-400 transition-colors\",children:n.jsx(Tl,{className:\"w-3 h-3\"})})]},ee))})]}),n.jsxs(\"div\",{className:\"flex items-center gap-3 p-4 bg-black border border-white/5 sq-md group\",children:[n.jsx(ku,{id:\"recurring\",name:\"isRecurring\",checked:p.isRecurring,onCheckedChange:ee=>x({...p,isRecurring:!!ee}),className:\"border-white/20 data-[state=checked]:bg-indigo-500 data-[state=checked]:border-indigo-500\"}),n.jsx(Re,{htmlFor:\"recurring\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-100 cursor-pointer\",children:\"Cyclical Routine Entry\"})]}),p.isRecurring&&n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4 mt-4\",children:[n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(Re,{htmlFor:\"transaction-frequency\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Period\"}),n.jsxs(ha,{value:p.frequency,onValueChange:ee=>x({...p,frequency:ee}),children:[n.jsx(ga,{id:\"transaction-frequency\",name:\"frequency\",className:\"bg-black border-white/5 h-12 sq-md text-slate-200 font-bold\",children:n.jsx(pa,{})}),n.jsxs(xa,{className:\"bg-black border-white/5\",children:[n.jsx(vt,{value:\"daily\",children:\"Daily\"}),n.jsx(vt,{value:\"weekly\",children:\"Weekly\"}),n.jsx(vt,{value:\"monthly\",children:\"Monthly\"}),n.jsx(vt,{value:\"yearly\",children:\"Yearly\"}),n.jsx(vt,{value:\"custom\",children:\"Custom\"})]})]})]}),p.frequency===\"custom\"?n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(Re,{htmlFor:\"transaction-interval\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Days Interval\"}),n.jsx(Os,{id:\"transaction-interval\",name:\"customIntervalDays\",value:p.customIntervalDays||\"\",onChange:ee=>x({...p,customIntervalDays:parseInt(ee)}),placeholder:\"e.g. 45\",min:\"1\",className:\"bg-black border-white/5 h-12 sq-md text-slate-200 font-bold\"})]}):n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(Re,{htmlFor:\"transaction-end-date\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Termination\"}),n.jsx(Pt,{id:\"transaction-end-date\",name:\"endDate\",type:\"date\",value:p.endDate,onChange:ee=>x({...p,endDate:ee.target.value}),className:\"bg-black border-white/5 h-12 sq-md text-slate-200 font-bold\"})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-6\",children:[n.jsx(Ge,{type:\"button\",variant:\"ghost\",onClick:se,className:\"flex-1 h-14 sq-md text-[10px] font-black uppercase tracking-widest text-slate-500 hover:text-slate-100 hover:bg-white/5 border border-white/5\",children:\"Abort\"}),n.jsx(Ge,{type:\"submit\",className:`flex-1 h-14 sq-md text-[10px] font-black uppercase tracking-widest shadow-xl active:scale-[0.98] transition-all ${c===\"expense\"?\"bg-rose-600 hover:bg-rose-500 shadow-rose-900/20\":c===\"income\"?\"bg-emerald-600 hover:bg-emerald-500 shadow-emerald-900/20\":\"bg-yellow-600 hover:bg-yellow-500 shadow-yellow-900/20\"}`,disabled:g.length===0,children:m?\"Update Matrix\":\"Record Transaction\"})]})]})})]})})},bj=({isOpen:i,onClose:r,onConfirm:c,expenseAmount:u,roundedAmount:m,currency:g,goals:h,onMute:y})=>{const[p,x]=A.useState(\"emergency\"),[v,f]=A.useState(\"\"),N=m-u,M=()=>{if(p===\"goal\"&&h.length>0&&!v){J.error(\"Please select a goal to save into.\");return}c(p===\"goal\"?v:\"emergency\",p)};return n.jsx(Bs,{open:i,onOpenChange:r,children:n.jsxs(Ls,{className:\"sm:max-w-md max-h-[90vh] overflow-y-auto bg-slate-950 border-white/5 p-0 shadow-2xl custom-scrollbar\",children:[n.jsxs(\"div\",{className:\"px-8 pt-10 pb-8 border-b border-white/5 relative overflow-hidden bg-emerald-500/5\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 bg-emerald-500 blur-[80px] opacity-20 -mr-16 -mt-16\"}),n.jsxs(qs,{className:\"relative z-10\",children:[n.jsxs(Is,{className:\"flex items-center gap-3 text-2xl font-black tracking-tighter text-slate-100\",children:[n.jsx(qb,{className:\"w-7 h-7 text-emerald-500\"}),\"Wealth Multiplier\"]}),n.jsx(Vs,{className:\"text-slate-500 font-bold text-[10px] uppercase tracking-[0.2em] mt-1\",children:\"System detected idle capital in transaction\"})]})]}),n.jsxs(\"div\",{className:\"p-8 space-y-8\",children:[n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"p\",{className:\"text-sm font-bold text-slate-300 leading-relaxed text-center px-4\",children:[\"Transaction of \",n.jsx(\"span\",{className:\"text-slate-100\",children:$e(u,g)}),\" processed. Initialize round-up to \",n.jsx(\"span\",{className:\"text-emerald-400\",children:$e(m,g)}),\"?\"]}),n.jsxs(\"div\",{className:\"flex flex-col items-center justify-center py-8 bg-slate-900 border border-white/5 rounded-[32px] relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute inset-0 bg-emerald-500/5 opacity-0 group-hover:opacity-100 transition-opacity\"}),n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-emerald-500 mb-1\",children:\"Leftover Cash\"}),n.jsx(\"p\",{className:\"text-5xl font-black text-white tracking-tighter\",children:$e(N,g)})]})]}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(Re,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Asset Allocation Target\"}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"button\",{type:\"button\",onClick:()=>x(\"emergency\"),className:`p-5 rounded-3xl border transition-all duration-300 flex flex-col items-center gap-3 ${p===\"emergency\"?\"bg-emerald-600 border-emerald-500 text-white shadow-lg shadow-emerald-900/40\":\"bg-slate-900 border-white/5 text-slate-500 hover:text-slate-300 hover:bg-white/5\"}`,children:[n.jsx(Ib,{className:`w-6 h-6 ${p===\"emergency\"?\"text-white\":\"text-slate-500\"}`}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest\",children:\"Stability\"})]}),n.jsxs(\"button\",{type:\"button\",onClick:()=>{x(\"goal\"),h.length>0&&!v&&f(h[0].id)},className:`p-5 rounded-3xl border transition-all duration-300 flex flex-col items-center gap-3 ${p===\"goal\"?\"bg-indigo-600 border-indigo-500 text-white shadow-lg shadow-indigo-900/40\":\"bg-slate-900 border-white/5 text-slate-500 hover:text-slate-300 hover:bg-white/5\"}`,children:[n.jsx(Vb,{className:`w-6 h-6 ${p===\"goal\"?\"text-white\":\"text-slate-500\"}`}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest\",children:\"Growth\"})]})]}),p===\"goal\"&&h.length>0&&n.jsx(\"div\",{className:\"mt-4 animate-in slide-in-from-top-2 duration-300\",children:n.jsxs(ha,{value:v,onValueChange:f,children:[n.jsx(ga,{id:\"round-up-goal-select\",name:\"goalId\",className:\"h-12 bg-slate-900 border-white/5 rounded-2xl text-slate-200 font-bold focus:ring-1 focus:ring-white/10\",children:n.jsx(pa,{placeholder:\"Select Growth Target\"})}),n.jsx(xa,{className:\"bg-slate-900 border-white/5\",children:h.map(O=>n.jsxs(vt,{value:O.id,className:\"focus:bg-white/5 focus:text-white font-bold\",children:[O.emoji,\" \",O.name]},O.id))})]})}),p===\"goal\"&&h.length===0&&n.jsx(\"div\",{className:\"p-4 bg-amber-500/10 border border-amber-500/20 rounded-2xl text-[10px] font-black uppercase tracking-widest text-amber-400 text-center\",children:\"No active targets. Defaulting to General Reservoirs.\"})]}),n.jsxs(\"div\",{className:\"pt-2 space-y-4\",children:[n.jsx(Ge,{onClick:M,className:\"w-full text-[10px] font-black uppercase tracking-widest h-14 bg-emerald-600 hover:bg-emerald-500 text-white rounded-2xl shadow-xl shadow-emerald-900/20 active:scale-[0.98] transition-all\",children:\"Initialize Savings Event\"}),n.jsxs(\"div\",{className:\"flex items-center justify-between gap-4\",children:[n.jsx(Ge,{variant:\"ghost\",size:\"sm\",onClick:r,className:\"h-10 px-6 rounded-xl text-[10px] font-black uppercase tracking-widest text-slate-500 hover:text-slate-300 hover:bg-white/5 border border-white/5\",children:\"Abort\"}),n.jsx(\"div\",{className:\"flex-1\",children:n.jsxs(ha,{onValueChange:O=>y(O),children:[n.jsx(ga,{id:\"mute-duration\",name:\"muteDuration\",className:\"h-10 bg-transparent border border-white/5 hover:bg-white/5 rounded-xl text-[9px] font-black uppercase tracking-widest text-slate-500 justify-center gap-2 px-4 focus:ring-0\",children:n.jsx(pa,{placeholder:\"Protocol Mute\"})}),n.jsxs(xa,{align:\"end\",className:\"bg-slate-900 border-white/5\",children:[n.jsx(vt,{value:\"today\",className:\"text-[10px] font-bold py-2\",children:\"Mute 24h\"}),n.jsx(vt,{value:\"week\",className:\"text-[10px] font-bold py-2\",children:\"Mute 7d\"}),n.jsx(vt,{value:\"month\",className:\"text-[10px] font-bold py-2\",children:\"Mute 30d\"})]})]})})]})]})]})]})})};var yj=(i,r,c,u,m,g,h,y)=>{let p=document.documentElement,x=[\"light\",\"dark\"];function v(M){(Array.isArray(i)?i:[i]).forEach(O=>{let B=O===\"class\",L=B&&g?m.map(R=>g[R]||R):m;B?(p.classList.remove(...L),p.classList.add(g&&g[M]?g[M]:M)):p.setAttribute(O,M)}),f(M)}function f(M){y&&x.includes(M)&&(p.style.colorScheme=M)}function N(){return window.matchMedia(\"(prefers-color-scheme: dark)\").matches?\"dark\":\"light\"}if(u)v(u);else try{let M=localStorage.getItem(r)||c,O=h&&M===\"system\"?N():M;v(O)}catch{}},L0=[\"light\",\"dark\"],$p=\"(prefers-color-scheme: dark)\",vj=typeof window>\"u\",td=A.createContext(void 0),wj={setTheme:i=>{},themes:[]},jj=()=>{var i;return(i=A.useContext(td))!=null?i:wj},Nj=i=>A.useContext(td)?A.createElement(A.Fragment,null,i.children):A.createElement(Aj,{...i}),Sj=[\"light\",\"dark\"],Aj=({forcedTheme:i,disableTransitionOnChange:r=!1,enableSystem:c=!0,enableColorScheme:u=!0,storageKey:m=\"theme\",themes:g=Sj,defaultTheme:h=c?\"system\":\"light\",attribute:y=\"data-theme\",value:p,children:x,nonce:v,scriptProps:f})=>{let[N,M]=A.useState(()=>Tj(m,h)),[O,B]=A.useState(()=>N===\"system\"?Cu():N),L=p?Object.values(p):g,R=A.useCallback(se=>{let he=se;if(!he)return;se===\"system\"&&c&&(he=Cu());let ve=p?p[he]:he,fe=r?kj(v):null,ye=document.documentElement,Se=qe=>{qe===\"class\"?(ye.classList.remove(...L),ve&&ye.classList.add(ve)):qe.startsWith(\"data-\")&&(ve?ye.setAttribute(qe,ve):ye.removeAttribute(qe))};if(Array.isArray(y)?y.forEach(Se):Se(y),u){let qe=L0.includes(h)?h:null,Te=L0.includes(he)?he:qe;ye.style.colorScheme=Te}fe?.()},[v]),P=A.useCallback(se=>{let he=typeof se==\"function\"?se(N):se;M(he);try{localStorage.setItem(m,he)}catch{}},[N]),V=A.useCallback(se=>{let he=Cu(se);B(he),N===\"system\"&&c&&!i&&R(\"system\")},[N,i]);A.useEffect(()=>{let se=window.matchMedia($p);return se.addListener(V),V(se),()=>se.removeListener(V)},[V]),A.useEffect(()=>{let se=he=>{he.key===m&&(he.newValue?M(he.newValue):P(h))};return window.addEventListener(\"storage\",se),()=>window.removeEventListener(\"storage\",se)},[P]),A.useEffect(()=>{R(i??N)},[i,N]);let S=A.useMemo(()=>({theme:N,setTheme:P,forcedTheme:i,resolvedTheme:N===\"system\"?O:N,themes:c?[...g,\"system\"]:g,systemTheme:c?O:void 0}),[N,P,i,O,c,g]);return A.createElement(td.Provider,{value:S},A.createElement(Dj,{forcedTheme:i,storageKey:m,attribute:y,enableSystem:c,enableColorScheme:u,defaultTheme:h,value:p,themes:g,nonce:v,scriptProps:f}),x)},Dj=A.memo(({forcedTheme:i,storageKey:r,attribute:c,enableSystem:u,enableColorScheme:m,defaultTheme:g,value:h,themes:y,nonce:p,scriptProps:x})=>{let v=JSON.stringify([c,r,g,i,y,h,u,m]).slice(1,-1);return A.createElement(\"script\",{...x,suppressHydrationWarning:!0,nonce:typeof window>\"u\"?p:\"\",dangerouslySetInnerHTML:{__html:`(${yj.toString()})(${v})`}})}),Tj=(i,r)=>{if(vj)return;let c;try{c=localStorage.getItem(i)||void 0}catch{}return c||r},kj=i=>{let r=document.createElement(\"style\");return i&&r.setAttribute(\"nonce\",i),r.appendChild(document.createTextNode(\"*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}\")),document.head.appendChild(r),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(r)},1)}},Cu=i=>(i||(i=window.matchMedia($p)),i.matches?\"dark\":\"light\");function Xp({...i}){return n.jsx(X0,{\"data-slot\":\"sheet\",...i})}function Cj({...i}){return n.jsx(J0,{\"data-slot\":\"sheet-portal\",...i})}const Pp=A.forwardRef(({className:i,...r},c)=>n.jsx($0,{ref:c,\"data-slot\":\"sheet-overlay\",className:ct(\"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-[200] bg-black/50\",i),...r}));Pp.displayName=\"SheetOverlay\";function Qp({className:i,children:r,side:c=\"right\",...u}){return n.jsxs(Cj,{children:[n.jsx(P0,{asChild:!0,children:n.jsx(Pp,{})}),n.jsx(Q0,{\"data-slot\":\"sheet-content\",className:ct(\"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-[200] flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-200 data-[state=open]:duration-300\",c===\"right\"&&\"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm\",c===\"left\"&&\"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm\",c===\"top\"&&\"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b\",c===\"bottom\"&&\"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t\",i),...u,children:r})]})}function Zp({className:i,...r}){return n.jsx(Z0,{\"data-slot\":\"sheet-title\",className:ct(\"text-foreground font-semibold\",i),...r})}function Kp({className:i,...r}){return n.jsx(K0,{\"data-slot\":\"sheet-description\",className:ct(\"text-muted-foreground text-sm\",i),...r})}function Ej({...i}){return n.jsx(Hb,{\"data-slot\":\"collapsible\",...i})}function Mj({...i}){return n.jsx(Gb,{\"data-slot\":\"collapsible-trigger\",...i})}function zj({...i}){return n.jsx(Yb,{\"data-slot\":\"collapsible-content\",...i})}function Rj({className:i,orientation:r=\"horizontal\",decorative:c=!0,...u}){return n.jsx(Fb,{\"data-slot\":\"separator-root\",decorative:c,orientation:r,className:ct(\"bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px\",i),...u})}function Jp({...i}){return n.jsx($b,{\"data-slot\":\"alert-dialog\",...i})}function Oj({...i}){return n.jsx(Jb,{\"data-slot\":\"alert-dialog-trigger\",...i})}function _j({...i}){return n.jsx(Wb,{\"data-slot\":\"alert-dialog-portal\",...i})}function Uj({className:i,...r}){return n.jsx(ey,{\"data-slot\":\"alert-dialog-overlay\",className:ct(\"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\",i),...r})}function Wp({className:i,...r}){return n.jsxs(_j,{children:[n.jsx(Uj,{}),n.jsx(Xb,{\"data-slot\":\"alert-dialog-content\",className:ct(\"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg\",i),...r})]})}function eg({className:i,...r}){return n.jsx(\"div\",{\"data-slot\":\"alert-dialog-header\",className:ct(\"flex flex-col gap-2 text-center sm:text-left\",i),...r})}function tg({className:i,...r}){return n.jsx(\"div\",{\"data-slot\":\"alert-dialog-footer\",className:ct(\"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\",i),...r})}function ag({className:i,...r}){return n.jsx(Pb,{\"data-slot\":\"alert-dialog-title\",className:ct(\"text-lg font-semibold\",i),...r})}function ng({className:i,...r}){return n.jsx(Qb,{\"data-slot\":\"alert-dialog-description\",className:ct(\"text-muted-foreground text-sm\",i),...r})}function sg({className:i,...r}){return n.jsx(Kb,{className:ct($u(),i),...r})}function ig({className:i,...r}){return n.jsx(Zb,{className:ct($u({variant:\"outline\"}),i),...r})}const Bj=i=>{const r=new Map;return i.forEach(c=>{const u=r.get(c.category)||0;r.set(c.category,u+c.amount)}),Array.from(r.entries()).map(([c,u])=>({category:c,amount:u})).sort((c,u)=>u.amount-c.amount).slice(0,5)},Lj=i=>{const r=i.expenses,c=i.incomes,u=i.totalIncome,m=c.some(R=>R.isRecurring)?\"salary\":\"fluctuating\",g=[\"Bills & Utilities\",\"EMI\",\"Rent\",\"Education\",\"Insurance\"],h=r.filter(R=>g.includes(R.category)||R.isRecurring).reduce((R,P)=>R+P.amount,0),y=i.totalExpenses-h,p=u>0?((u-i.totalExpenses)/u*100).toFixed(0)+\"%\":\"0%\",x=r.filter(R=>R.category===\"EMI\"||R.category===\"Debt\").reduce((R,P)=>R+P.amount,0),v=u>0?(x/u*100).toFixed(1)+\"%\":\"0%\",f=(i.healthScore/10).toFixed(1),N=Bj(r).slice(0,3),M=r.filter(R=>R.category===\"Subscription\").reduce((R,P)=>R+P.amount,0),O=new Map;[...r,...c].forEach(R=>{R.tags?.forEach(P=>{const V=O.get(P)||0;O.set(P,V+1)})});const B=Array.from(O.entries()).sort((R,P)=>P[1]-R[1]).slice(0,5).map(([R])=>R),L={user_profile:{monthly_income:u,income_type:m,emergency_fund_months:f},current_month_stats:{total_expenses:i.totalExpenses,fixed_expenses:h,variable_expenses:y,top_category:N[0]?.category||\"None\",savings_rate:p},liabilities:{total_debt:i.activeDebts>0?\"Present\":\"None\",monthly_debt_payment:x,debt_ratio:v},behavioral:{top_3_categories:N.map(R=>R.category),subscription_burden:M,frequent_tags:B},portfolio_analysis:{aggregation_rule:\"Source Independence (Calculated on 'investment' accounts only)\",growth_formula:\"((Sum Current Values / Sum Principals) - 1) * 100\",total_investments:i.investments.length,linked_nodes:i.investments.filter(R=>R.accountId).length,rule_based_metrics:{total_principal:i.investments.filter(R=>i.accounts.find(V=>V.id===R.accountId)?.type===\"investment\").reduce((R,P)=>R+P.buyPrice*P.quantity,0),current_market_value:i.investments.filter(R=>i.accounts.find(V=>V.id===R.accountId)?.type===\"investment\").reduce((R,P)=>R+(P.currentPrice||0)*P.quantity,0)}}};return JSON.stringify(L,null,2)},qj=(i,r,c)=>{const m=`Context: \"The user is looking at the ${c===\"dashboard\"?\"Balance Board\":c===\"investments\"?\"Investment\":c===\"liability\"?\"Liability\":c===\"goals\"?\"Goal\":\"Financial\"} Stack.\"`,g=i.accounts.reduce((N,M)=>N+(M.balance||0),0),h=i.investments.reduce((N,M)=>N+(M.currentPrice||M.buyPrice)*M.quantity,0),y=g+h,p=N=>new Intl.NumberFormat(r===\"INR\"?\"en-IN\":\"en-US\",{style:\"currency\",currency:r,maximumFractionDigits:0}).format(N),x=i.healthScore>70?\"5%\":i.healthScore>50?\"2%\":\"stable\",v=`Insight: \"Net worth is ${p(y)}, showing a ${x} growth trend.\"`;let f=\"\";return i.investments.length>0&&c!==\"investments\"?f=`Action: \"Suggest a 2x2 Grid update for the 'Investment' category.\"`:i.activeDebts>0?f='Action: \"Propose a tactical recovery plan for pending liabilities.\"':i.savingsRate<.2?f='Action: \"Suggest optimizing the spending body to increase savings velocity.\"':f='Action: \"Maintain current protocol and monitor the Wealth Builder Stack.\"',`${m}"
      },
      {
        "file": "dist_test\\assets\\index-DHabN7TV.js",
        "line": 19,
        "snippet": "`),()=>{R.contains(L)&&R.removeChild(L)}},[r]),n.jsx(d1,{isPresent:r,childRef:g,sizeRef:h,children:A.cloneElement(i,{ref:x})})}const m1=({children:i,initial:r,isPresent:c,onExitComplete:u,custom:m,presenceAffectsLayout:g,mode:h,anchorX:y,root:p})=>{const x=Ku(h1),v=A.useId();let f=!0,N=A.useMemo(()=>(f=!1,{id:v,initial:r,isPresent:c,custom:m,onExitComplete:M=>{x.set(M,!0);for(const O of x.values())if(!O)return;u&&u()},register:M=>(x.set(M,!1),()=>x.delete(M))}),[c,x,u]);return g&&f&&(N={...N}),A.useMemo(()=>{x.forEach((M,O)=>x.set(O,!1))},[c]),A.useEffect(()=>{!c&&!x.size&&u&&u()},[c]),h===\"popLayout\"&&(i=n.jsx(f1,{isPresent:c,anchorX:y,root:p,children:i})),n.jsx(eo.Provider,{value:N,children:i})};function h1(){return new Map}function vp(i=!0){const r=A.useContext(eo);if(r===null)return[!0,null];const{isPresent:c,onExitComplete:u,register:m}=r,g=A.useId();A.useEffect(()=>{if(i)return m(g)},[i]);const h=A.useCallback(()=>i&&u&&u(g),[g,u,i]);return!c&&u?[!1,h]:[!0]}const Hr=i=>i.key||\"\";function t0(i){const r=[];return A.Children.forEach(i,c=>{A.isValidElement(c)&&r.push(c)}),r}const Bn=({children:i,custom:r,initial:c=!0,onExitComplete:u,presenceAffectsLayout:m=!0,mode:g=\"sync\",propagate:h=!1,anchorX:y=\"left\",root:p})=>{const[x,v]=vp(h),f=A.useMemo(()=>t0(i),[i]),N=h&&!x?[]:f.map(Hr),M=A.useRef(!0),O=A.useRef(f),B=Ku(()=>new Map),L=A.useRef(new Set),[R,P]=A.useState(f),[V,S]=A.useState(f);yp(()=>{M.current=!1,O.current=f;for(let ve=0;ve<V.length;ve++){const fe=Hr(V[ve]);N.includes(fe)?(B.delete(fe),L.current.delete(fe)):B.get(fe)!==!0&&B.set(fe,!1)}},[V,N.length,N.join(\"-\")]);const se=[];if(f!==R){let ve=[...f];for(let fe=0;fe<V.length;fe++){const ye=V[fe],Se=Hr(ye);N.includes(Se)||(ve.splice(fe,0,ye),se.push(ye))}return g===\"wait\"&&se.length&&(ve=se),S(t0(ve)),P(f),null}const{forceRender:he}=A.useContext(Zu);return n.jsx(n.Fragment,{children:V.map(ve=>{const fe=Hr(ve),ye=h&&!x?!1:f===V||N.includes(fe),Se=()=>{if(L.current.has(fe))return;if(L.current.add(fe),B.has(fe))B.set(fe,!0);else return;let qe=!0;B.forEach(Te=>{Te||(qe=!1)}),qe&&(he?.(),S(O.current),h&&v?.(),u&&u())};return n.jsx(m1,{isPresent:ye,initial:!M.current||c?void 0:!1,custom:r,presenceAffectsLayout:m,mode:g,root:p,onExitComplete:ye?void 0:Se,anchorX:y,children:ve},fe)})})},wp=A.createContext({strict:!1});function p1(i){for(const r in i)Ou[r]={...Ou[r],...i[r]}}const g1=new Set([\"animate\",\"exit\",\"variants\",\"initial\",\"style\",\"values\",\"variants\",\"transition\",\"transformTemplate\",\"custom\",\"inherit\",\"onBeforeLayoutMeasure\",\"onAnimationStart\",\"onAnimationComplete\",\"onUpdate\",\"onDragStart\",\"onDrag\",\"onDragEnd\",\"onMeasureDragConstraints\",\"onDirectionLock\",\"onDragTransitionEnd\",\"_dragX\",\"_dragY\",\"onHoverStart\",\"onHoverEnd\",\"onViewportEnter\",\"onViewportLeave\",\"globalTapTarget\",\"ignoreStrict\",\"viewport\"]);function Qr(i){return i.startsWith(\"while\")||i.startsWith(\"drag\")&&i!==\"draggable\"||i.startsWith(\"layout\")||i.startsWith(\"onTap\")||i.startsWith(\"onPan\")||i.startsWith(\"onLayout\")||g1.has(i)}let jp=i=>!Qr(i);function x1(i){typeof i==\"function\"&&(jp=r=>r.startsWith(\"on\")?!Qr(r):i(r))}try{x1(require(\"@emotion/is-prop-valid\").default)}catch{}function b1(i,r,c){const u={};for(const m in i)m===\"values\"&&typeof i.values==\"object\"||(jp(m)||c===!0&&Qr(m)||!r&&!Qr(m)||i.draggable&&m.startsWith(\"onDrag\"))&&(u[m]=i[m]);return u}const to=A.createContext({});function y1(i,r){if(sp(i)){const{initial:c,animate:u}=i;return{initial:c===!1||Xr(c)?c:void 0,animate:Xr(u)?u:void 0}}return i.inherit!==!1?r:{}}function v1(i){const{initial:r,animate:c}=y1(i,A.useContext(to));return A.useMemo(()=>({initial:r,animate:c}),[a0(r),a0(c)])}function a0(i){return Array.isArray(i)?i.join(\" \"):i}const Wu=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Np(i,r,c){for(const u in r)!Yu(r[u])&&!Ey(u,c)&&(i[u]=r[u])}function w1({transformTemplate:i},r){return A.useMemo(()=>{const c=Wu();return My(c,r,i),Object.assign({},c.vars,c.style)},[r])}function j1(i,r){const c=i.style||{},u={};return Np(u,c,i),Object.assign(u,w1(i,r)),u}function N1(i,r){const c={},u=j1(i,r);return i.drag&&i.dragListener!==!1&&(c.draggable=!1,u.userSelect=u.WebkitUserSelect=u.WebkitTouchCallout=\"none\",u.touchAction=i.drag===!0?\"none\":`pan-${i.drag===\"x\"?\"y\":\"x\"}`),i.tabIndex===void 0&&(i.onTap||i.onTapStart||i.whileTap)&&(c.tabIndex=0),c.style=u,c}const Sp=()=>({...Wu(),attrs:{}});function S1(i,r,c,u){const m=A.useMemo(()=>{const g=Sp();return zy(g,r,Ry(u),i.transformTemplate,i.style),{...g.attrs,style:{...g.style}}},[r]);if(i.style){const g={};Np(g,i.style,i),m.style={...g,...m.style}}return m}const A1=[\"animate\",\"circle\",\"defs\",\"desc\",\"ellipse\",\"g\",\"image\",\"line\",\"filter\",\"marker\",\"mask\",\"metadata\",\"path\",\"pattern\",\"polygon\",\"polyline\",\"rect\",\"stop\",\"switch\",\"symbol\",\"svg\",\"text\",\"tspan\",\"use\",\"view\"];function ed(i){return typeof i!=\"string\"||i.includes(\"-\")?!1:!!(A1.indexOf(i)>-1||/[A-Z]/u.test(i))}function D1(i,r,c,{latestValues:u},m,g=!1,h){const p=(h??ed(i)?S1:N1)(r,u,m,i),x=b1(r,typeof i==\"string\",g),v=i!==A.Fragment?{...x,...p,ref:c}:{},{children:f}=r,N=A.useMemo(()=>Yu(f)?f.get():f,[f]);return A.createElement(i,{...v,children:N})}function Fr(i){return Yu(i)?i.get():i}function T1({scrapeMotionValuesFromProps:i,createRenderState:r},c,u,m){return{latestValues:k1(c,u,m,i),renderState:r()}}function k1(i,r,c,u){const m={},g=u(i,{});for(const N in g)m[N]=Fr(g[N]);let{initial:h,animate:y}=i;const p=sp(i),x=Oy(i);r&&x&&!p&&i.inherit!==!1&&(h===void 0&&(h=r.initial),y===void 0&&(y=r.animate));let v=c?c.initial===!1:!1;v=v||h===!1;const f=v?y:h;if(f&&typeof f!=\"boolean\"&&!Fu(f)){const N=Array.isArray(f)?f:[f];for(let M=0;M<N.length;M++){const O=_y(i,N[M]);if(O){const{transitionEnd:B,transition:L,...R}=O;for(const P in R){let V=R[P];if(Array.isArray(V)){const S=v?V.length-1:0;V=V[S]}V!==null&&(m[P]=V)}for(const P in B)m[P]=B[P]}}}return m}const Ap=i=>(r,c)=>{const u=A.useContext(to),m=A.useContext(eo),g=()=>T1(i,r,u,m);return c?g():Ku(g)},C1=Ap({scrapeMotionValuesFromProps:Uy,createRenderState:Wu}),E1=Ap({scrapeMotionValuesFromProps:By,createRenderState:Sp}),M1=Symbol.for(\"motionComponentSymbol\");function z1(i,r,c){const u=A.useRef(c);A.useInsertionEffect(()=>{u.current=c});const m=A.useRef(null);return A.useCallback(g=>{g&&i.onMount?.(g),r&&(g?r.mount(g):r.unmount());const h=u.current;if(typeof h==\"function\")if(g){const y=h(g);typeof y==\"function\"&&(m.current=y)}else m.current?(m.current(),m.current=null):h(g);else h&&(h.current=g)},[r])}const Dp=A.createContext({});function yl(i){return i&&typeof i==\"object\"&&Object.prototype.hasOwnProperty.call(i,\"current\")}function R1(i,r,c,u,m,g){const{visualElement:h}=A.useContext(to),y=A.useContext(wp),p=A.useContext(eo),x=A.useContext(Ju).reducedMotion,v=A.useRef(null);u=u||y.renderer,!v.current&&u&&(v.current=u(i,{visualState:r,parent:h,props:c,presenceContext:p,blockInitialAnimation:p?p.initial===!1:!1,reducedMotionConfig:x,isSVG:g}));const f=v.current,N=A.useContext(Dp);f&&!f.projection&&m&&(f.type===\"html\"||f.type===\"svg\")&&O1(v.current,c,m,N);const M=A.useRef(!1);A.useInsertionEffect(()=>{f&&M.current&&f.update(c,p)});const O=c[Ly],B=A.useRef(!!O&&!window.MotionHandoffIsComplete?.(O)&&window.MotionHasOptimisedAnimation?.(O));return yp(()=>{f&&(M.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),B.current&&f.animationState&&f.animationState.animateChanges())}),A.useEffect(()=>{f&&(!B.current&&f.animationState&&f.animationState.animateChanges(),B.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(O)}),B.current=!1),f.enteringChildren=void 0)}),f}function O1(i,r,c,u){const{layoutId:m,layout:g,drag:h,dragConstraints:y,layoutScroll:p,layoutRoot:x,layoutCrossfade:v}=r;i.projection=new c(i.latestValues,r[\"data-framer-portal-id\"]?void 0:Tp(i.parent)),i.projection.setOptions({layoutId:m,layout:g,alwaysMeasureLayout:!!h||y&&yl(y),visualElement:i,animationType:typeof g==\"string\"?g:\"both\",initialPromotionConfig:u,crossfade:v,layoutScroll:p,layoutRoot:x})}function Tp(i){if(i)return i.options.allowProjection!==!1?i.projection:Tp(i.parent)}function vu(i,{forwardMotionProps:r=!1,type:c}={},u,m){u&&p1(u);const g=c?c===\"svg\":ed(i),h=g?E1:C1;function y(x,v){let f;const N={...A.useContext(Ju),...x,layoutId:_1(x)},{isStatic:M}=N,O=v1(x),B=h(x,M);if(!M&&np){U1();const L=B1(N);f=L.MeasureLayout,O.visualElement=R1(i,B,N,m,L.ProjectionNode,g)}return n.jsxs(to.Provider,{value:O,children:[f&&O.visualElement?n.jsx(f,{visualElement:O.visualElement,...N}):null,D1(i,x,z1(B,O.visualElement,v),B,M,r,g)]})}y.displayName=`motion.${typeof i==\"string\"?i:`create(${i.displayName??i.name??\"\"})`}`;const p=A.forwardRef(y);return p[M1]=i,p}function _1({layoutId:i}){const r=A.useContext(Zu).id;return r&&i!==void 0?r+\"-\"+i:i}function U1(i,r){A.useContext(wp).strict}function B1(i){const{drag:r,layout:c}=Ou;if(!r&&!c)return{};const u={...r,...c};return{MeasureLayout:r?.isEnabled(i)||c?.isEnabled(i)?u.MeasureLayout:void 0,ProjectionNode:u.ProjectionNode}}function L1(i,r){if(typeof Proxy>\"u\")return vu;const c=new Map,u=(g,h)=>vu(g,h,i,r),m=(g,h)=>u(g,h);return new Proxy(m,{get:(g,h)=>h===\"create\"?u:(c.has(h)||c.set(h,vu(h,void 0,i,r)),c.get(h))})}const q1=(i,r)=>r.isSVG??ed(i)?new qy(r):new Iy(r,{allowProjection:i!==A.Fragment});function kp(i,r,c,u=0,m=1){const g=Array.from(i).sort((x,v)=>x.sortNodePosition(v)).indexOf(r),h=i.size,y=(h-1)*u;return typeof c==\"function\"?c(g,h):m===1?g*u:y-g*u}function Lu(i,r,c={}){const u=vl(i,r,c.type===\"exit\"?i.presenceContext?.custom:void 0);let{transition:m=i.getDefaultTransition()||{}}=u||{};c.transitionOverride&&(m=c.transitionOverride);const g=u?()=>Promise.all(ip(i,u,c)):()=>Promise.resolve(),h=i.variantChildren&&i.variantChildren.size?(p=0)=>{const{delayChildren:x=0,staggerChildren:v,staggerDirection:f}=m;return I1(i,r,p,x,v,f,c)}:()=>Promise.resolve(),{when:y}=m;if(y){const[p,x]=y===\"beforeChildren\"?[g,h]:[h,g];return p().then(()=>x())}else return Promise.all([g(),h(c.delay)])}function I1(i,r,c=0,u=0,m=0,g=1,h){const y=[];for(const p of i.variantChildren)p.notify(\"AnimationStart\",r),y.push(Lu(p,r,{...h,delay:c+(typeof u==\"function\"?0:u)+kp(i.variantChildren,p,u,m,g)}).then(()=>p.notify(\"AnimationComplete\",r)));return Promise.all(y)}function V1(i,r,c={}){i.notify(\"AnimationStart\",r);let u;if(Array.isArray(r)){const m=r.map(g=>Lu(i,g,c));u=Promise.all(m)}else if(typeof r==\"string\")u=Lu(i,r,c);else{const m=typeof r==\"function\"?vl(i,r,c.custom):r;u=Promise.all(ip(i,m,c))}return u.then(()=>{i.notify(\"AnimationComplete\",r)})}function Cp(i,r){if(!Array.isArray(r))return!1;const c=r.length;if(c!==i.length)return!1;for(let u=0;u<c;u++)if(r[u]!==i[u])return!1;return!0}const H1=lp.length;function Ep(i){if(!i)return;if(!i.isControllingVariants){const c=i.parent?Ep(i.parent)||{}:{};return i.props.initial!==void 0&&(c.initial=i.props.initial),c}const r={};for(let c=0;c<H1;c++){const u=lp[c],m=i.props[u];(Xr(m)||m===!1)&&(r[u]=m)}return r}const G1=[...rp].reverse(),Y1=rp.length;function F1(i){return r=>Promise.all(r.map(({animation:c,options:u})=>V1(i,c,u)))}function $1(i){let r=F1(i),c=n0(),u=!0;const m=p=>(x,v)=>{const f=vl(i,v,p===\"exit\"?i.presenceContext?.custom:void 0);if(f){const{transition:N,transitionEnd:M,...O}=f;x={...x,...O,...M}}return x};function g(p){r=p(i)}function h(p){const{props:x}=i,v=Ep(i.parent)||{},f=[],N=new Set;let M={},O=1/0;for(let L=0;L<Y1;L++){const R=G1[L],P=c[R],V=x[R]!==void 0?x[R]:v[R],S=Xr(V),se=R===p?P.isActive:null;se===!1&&(O=L);let he=V===v[R]&&V!==x[R]&&S;if(he&&u&&i.manuallyAnimateOnMount&&(he=!1),P.protectedKeys={...M},!P.isActive&&se===null||!V&&!P.prevProp||Fu(V)||typeof V==\"boolean\")continue;const ve=X1(P.prevProp,V);let fe=ve||R===p&&P.isActive&&!he&&S||L>O&&S,ye=!1;const Se=Array.isArray(V)?V:[V];let qe=Se.reduce(m(R),{});se===!1&&(qe={});const{prevResolvedValues:Te={}}=P,ee={...Te,...qe},me=Y=>{fe=!0,N.has(Y)&&(ye=!0,N.delete(Y)),P.needsAnimating[Y]=!0;const oe=i.getValue(Y);oe&&(oe.liveStyle=!1)};for(const Y in ee){const oe=qe[Y],ge=Te[Y];if(M.hasOwnProperty(Y))continue;let z=!1;Ih(oe)&&Ih(ge)?z=!Cp(oe,ge):z=oe!==ge,z?oe!=null?me(Y):N.add(Y):oe!==void 0&&N.has(Y)?me(Y):P.protectedKeys[Y]=!0}P.prevProp=V,P.prevResolvedValues=qe,P.isActive&&(M={...M,...qe}),u&&i.blockInitialAnimation&&(fe=!1);const G=he&&ve;fe&&(!G||ye)&&f.push(...Se.map(Y=>{const oe={type:R};if(typeof Y==\"string\"&&u&&!G&&i.manuallyAnimateOnMount&&i.parent){const{parent:ge}=i,z=vl(ge,Y);if(ge.enteringChildren&&z){const{delayChildren:T}=z.transition||{};oe.delay=kp(ge.enteringChildren,i,T)}}return{animation:Y,options:oe}}))}if(N.size){const L={};if(typeof x.initial!=\"boolean\"){const R=vl(i,Array.isArray(x.initial)?x.initial[0]:x.initial);R&&R.transition&&(L.transition=R.transition)}N.forEach(R=>{const P=i.getBaseTarget(R),V=i.getValue(R);V&&(V.liveStyle=!0),L[R]=P??null}),f.push({animation:L})}let B=!!f.length;return u&&(x.initial===!1||x.initial===x.animate)&&!i.manuallyAnimateOnMount&&(B=!1),u=!1,B?r(f):Promise.resolve()}function y(p,x){if(c[p].isActive===x)return Promise.resolve();i.variantChildren?.forEach(f=>f.animationState?.setActive(p,x)),c[p].isActive=x;const v=h(p);for(const f in c)c[f].protectedKeys={};return v}return{animateChanges:h,setActive:y,setAnimateFunction:g,getState:()=>c,reset:()=>{c=n0()}}}function X1(i,r){return typeof r==\"string\"?r!==i:Array.isArray(r)?!Cp(r,i):!1}function zs(i=!1){return{isActive:i,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function n0(){return{animate:zs(!0),whileInView:zs(),whileHover:zs(),whileTap:zs(),whileDrag:zs(),whileFocus:zs(),exit:zs()}}class us{constructor(r){this.isMounted=!1,this.node=r}update(){}}class P1 extends us{constructor(r){super(r),r.animationState||(r.animationState=$1(r))}updateAnimationControlsSubscription(){const{animate:r}=this.node.getProps();Fu(r)&&(this.unmountControls=r.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:r}=this.node.getProps(),{animate:c}=this.node.prevProps||{};r!==c&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Q1=0;class Z1 extends us{constructor(){super(...arguments),this.id=Q1++}update(){if(!this.node.presenceContext)return;const{isPresent:r,onExitComplete:c}=this.node.presenceContext,{isPresent:u}=this.node.prevPresenceContext||{};if(!this.node.animationState||r===u)return;const m=this.node.animationState.setActive(\"exit\",!r);c&&!r&&m.then(()=>{c(this.id)})}mount(){const{register:r,onExitComplete:c}=this.node.presenceContext||{};c&&c(this.id),r&&(this.unmount=r(this.id))}unmount(){}}const K1={animation:{Feature:P1},exit:{Feature:Z1}};function Al(i,r,c,u={passive:!0}){return i.addEventListener(r,c,u),()=>i.removeEventListener(r,c)}function kl(i){return{point:{x:i.pageX,y:i.pageY}}}const J1=i=>r=>op(r)&&i(r,kl(r));function wl(i,r,c,u){return Al(i,r,J1(c),u)}const Mp=1e-4,W1=1-Mp,ew=1+Mp,zp=.01,tw=0-zp,aw=0+zp;function wa(i){return i.max-i.min}function nw(i,r,c){return Math.abs(i-r)<=c}function s0(i,r,c,u=.5){i.origin=u,i.originPoint=fa(r.min,r.max,i.origin),i.scale=wa(c)/wa(r),i.translate=fa(c.min,c.max,i.origin)-i.originPoint,(i.scale>=W1&&i.scale<=ew||isNaN(i.scale))&&(i.scale=1),(i.translate>=tw&&i.translate<=aw||isNaN(i.translate))&&(i.translate=0)}function jl(i,r,c,u){s0(i.x,r.x,c.x,u?u.originX:void 0),s0(i.y,r.y,c.y,u?u.originY:void 0)}function i0(i,r,c){i.min=c.min+r.min,i.max=i.min+wa(r)}function sw(i,r,c){i0(i.x,r.x,c.x),i0(i.y,r.y,c.y)}function l0(i,r,c){i.min=r.min-c.min,i.max=i.min+wa(r)}function Zr(i,r,c){l0(i.x,r.x,c.x),l0(i.y,r.y,c.y)}function an(i){return[i(\"x\"),i(\"y\")]}const Rp=({current:i})=>i?i.ownerDocument.defaultView:null,r0=new Set([\"auto\",\"scroll\"]);class Op{constructor(r,c,{transformPagePoint:u,contextWindow:m=window,dragSnapToOrigin:g=!1,distanceThreshold:h=3,element:y}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=M=>{this.handleScroll(M.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const M=ju(this.lastMoveEventInfo,this.history),O=this.startEvent!==null,B=Vy(M.offset,{x:0,y:0})>=this.distanceThreshold;if(!O&&!B)return;const{point:L}=M,{timestamp:R}=Ya;this.history.push({...L,timestamp:R});const{onStart:P,onMove:V}=this.handlers;O||(P&&P(this.lastMoveEvent,M),this.startEvent=this.lastMoveEvent),V&&V(this.lastMoveEvent,M)},this.handlePointerMove=(M,O)=>{this.lastMoveEvent=M,this.lastMoveEventInfo=wu(O,this.transformPagePoint),va.update(this.updatePoint,!0)},this.handlePointerUp=(M,O)=>{this.end();const{onEnd:B,onSessionEnd:L,resumeAnimation:R}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&R&&R(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=ju(M.type===\"pointercancel\"?this.lastMoveEventInfo:wu(O,this.transformPagePoint),this.history);this.startEvent&&B&&B(M,P),L&&L(M,P)},!op(r))return;this.dragSnapToOrigin=g,this.handlers=c,this.transformPagePoint=u,this.distanceThreshold=h,this.contextWindow=m||window;const p=kl(r),x=wu(p,this.transformPagePoint),{point:v}=x,{timestamp:f}=Ya;this.history=[{...v,timestamp:f}];const{onSessionStart:N}=c;N&&N(r,ju(x,this.history)),this.removeListeners=cp(wl(this.contextWindow,\"pointermove\",this.handlePointerMove),wl(this.contextWindow,\"pointerup\",this.handlePointerUp),wl(this.contextWindow,\"pointercancel\",this.handlePointerUp)),y&&this.startScrollTracking(y)}startScrollTracking(r){let c=r.parentElement;for(;c;){const u=getComputedStyle(c);(r0.has(u.overflowX)||r0.has(u.overflowY))&&this.scrollPositions.set(c,{x:c.scrollLeft,y:c.scrollTop}),c=c.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener(\"scroll\",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener(\"scroll\",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener(\"scroll\",this.onElementScroll,{capture:!0}),window.removeEventListener(\"scroll\",this.onWindowScroll)}}handleScroll(r){const c=this.scrollPositions.get(r);if(!c)return;const u=r===window,m=u?{x:window.scrollX,y:window.scrollY}:{x:r.scrollLeft,y:r.scrollTop},g={x:m.x-c.x,y:m.y-c.y};g.x===0&&g.y===0||(u?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=g.x,this.lastMoveEventInfo.point.y+=g.y):this.history.length>0&&(this.history[0].x-=g.x,this.history[0].y-=g.y),this.scrollPositions.set(r,m),va.update(this.updatePoint,!0))}updateHandlers(r){this.handlers=r}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),_u(this.updatePoint)}}function wu(i,r){return r?{point:r(i.point)}:i}function o0(i,r){return{x:i.x-r.x,y:i.y-r.y}}function ju({point:i},r){return{point:i,delta:o0(i,_p(r)),offset:o0(i,iw(r)),velocity:lw(r,.1)}}function iw(i){return i[0]}function _p(i){return i[i.length-1]}function lw(i,r){if(i.length<2)return{x:0,y:0};let c=i.length-1,u=null;const m=_p(i);for(;c>=0&&(u=i[c],!(m.timestamp-u.timestamp>Hy(r)));)c--;if(!u)return{x:0,y:0};const g=Gy(m.timestamp-u.timestamp);if(g===0)return{x:0,y:0};const h={x:(m.x-u.x)/g,y:(m.y-u.y)/g};return h.x===1/0&&(h.x=0),h.y===1/0&&(h.y=0),h}function rw(i,{min:r,max:c},u){return r!==void 0&&i<r?i=u?fa(r,i,u.min):Math.max(i,r):c!==void 0&&i>c&&(i=u?fa(c,i,u.max):Math.min(i,c)),i}function c0(i,r,c){return{min:r!==void 0?i.min+r:void 0,max:c!==void 0?i.max+c-(i.max-i.min):void 0}}function ow(i,{top:r,left:c,bottom:u,right:m}){return{x:c0(i.x,c,m),y:c0(i.y,r,u)}}function u0(i,r){let c=r.min-i.min,u=r.max-i.max;return r.max-r.min<i.max-i.min&&([c,u]=[u,c]),{min:c,max:u}}function cw(i,r){return{x:u0(i.x,r.x),y:u0(i.y,r.y)}}function uw(i,r){let c=.5;const u=wa(i),m=wa(r);return m>u?c=Uu(r.min,r.max-u,i.min):u>m&&(c=Uu(i.min,i.max-m,r.min)),up(0,1,c)}function dw(i,r){const c={};return r.min!==void 0&&(c.min=r.min-i.min),r.max!==void 0&&(c.max=r.max-i.min),c}const qu=.35;function fw(i=qu){return i===!1?i=0:i===!0&&(i=qu),{x:d0(i,\"left\",\"right\"),y:d0(i,\"top\",\"bottom\")}}function d0(i,r,c){return{min:f0(i,r),max:f0(i,c)}}function f0(i,r){return typeof i==\"number\"?i:i[r]||0}const mw=new WeakMap;class hw{constructor(r){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=da(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=r}start(r,{snapToCursor:c=!1,distanceThreshold:u}={}){const{presenceContext:m}=this.visualElement;if(m&&m.isPresent===!1)return;const g=f=>{c?(this.stopAnimation(),this.snapToCursor(kl(f).point)):this.pauseAnimation()},h=(f,N)=>{this.stopAnimation();const{drag:M,dragPropagation:O,onDragStart:B}=this.getProps();if(M&&!O&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Py(M),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=N,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),an(R=>{let P=this.getAxisMotionValue(R).get()||0;if(Pr.test(P)){const{projection:V}=this.visualElement;if(V&&V.layout){const S=V.layout.layoutBox[R];S&&(P=wa(S)*(parseFloat(P)/100))}}this.originPoint[R]=P}),B&&va.postRender(()=>B(f,N)),Vh(this.visualElement,\"transform\");const{animationState:L}=this.visualElement;L&&L.setActive(\"whileDrag\",!0)},y=(f,N)=>{this.latestPointerEvent=f,this.latestPanInfo=N;const{dragPropagation:M,dragDirectionLock:O,onDirectionLock:B,onDrag:L}=this.getProps();if(!M&&!this.openDragLock)return;const{offset:R}=N;if(O&&this.currentDirection===null){this.currentDirection=pw(R),this.currentDirection!==null&&B&&B(this.currentDirection);return}this.updateAxis(\"x\",N.point,R),this.updateAxis(\"y\",N.point,R),this.visualElement.render(),L&&L(f,N)},p=(f,N)=>{this.latestPointerEvent=f,this.latestPanInfo=N,this.stop(f,N),this.latestPointerEvent=null,this.latestPanInfo=null},x=()=>an(f=>this.getAnimationState(f)===\"paused\"&&this.getAxisMotionValue(f).animation?.play()),{dragSnapToOrigin:v}=this.getProps();this.panSession=new Op(r,{onSessionStart:g,onStart:h,onMove:y,onSessionEnd:p,resumeAnimation:x},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:v,distanceThreshold:u,contextWindow:Rp(this.visualElement),element:this.visualElement.current})}stop(r,c){const u=r||this.latestPointerEvent,m=c||this.latestPanInfo,g=this.isDragging;if(this.cancel(),!g||!m||!u)return;const{velocity:h}=m;this.startAnimation(h);const{onDragEnd:y}=this.getProps();y&&va.postRender(()=>y(u,m))}cancel(){this.isDragging=!1;const{projection:r,animationState:c}=this.visualElement;r&&(r.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:u}=this.getProps();!u&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),c&&c.setActive(\"whileDrag\",!1)}updateAxis(r,c,u){const{drag:m}=this.getProps();if(!u||!Gr(r,m,this.currentDirection))return;const g=this.getAxisMotionValue(r);let h=this.originPoint[r]+u[r];this.constraints&&this.constraints[r]&&(h=rw(h,this.constraints[r],this.elastic[r])),g.set(h)}resolveConstraints(){const{dragConstraints:r,dragElastic:c}=this.getProps(),u=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,m=this.constraints;r&&yl(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&u?this.constraints=ow(u.layoutBox,r):this.constraints=!1,this.elastic=fw(c),m!==this.constraints&&u&&this.constraints&&!this.hasMutatedConstraints&&an(g=>{this.constraints!==!1&&this.getAxisMotionValue(g)&&(this.constraints[g]=dw(u.layoutBox[g],this.constraints[g]))})}resolveRefConstraints(){const{dragConstraints:r,onMeasureDragConstraints:c}=this.getProps();if(!r||!yl(r))return!1;const u=r.current,{projection:m}=this.visualElement;if(!m||!m.layout)return!1;const g=Yy(u,m.root,this.visualElement.getTransformPagePoint());let h=cw(m.layout.layoutBox,g);if(c){const y=c(Fy(h));this.hasMutatedConstraints=!!y,y&&(h=$y(y))}return h}startAnimation(r){const{drag:c,dragMomentum:u,dragElastic:m,dragTransition:g,dragSnapToOrigin:h,onDragTransitionEnd:y}=this.getProps(),p=this.constraints||{},x=an(v=>{if(!Gr(v,c,this.currentDirection))return;let f=p&&p[v]||{};h&&(f={min:0,max:0});const N=m?200:1e6,M=m?40:1e7,O={type:\"inertia\",velocity:u?r[v]:0,bounceStiffness:N,bounceDamping:M,timeConstant:750,restDelta:1,restSpeed:10,...g,...f};return this.startAxisValueAnimation(v,O)});return Promise.all(x).then(y)}startAxisValueAnimation(r,c){const u=this.getAxisMotionValue(r);return Vh(this.visualElement,r),u.start(Xy(r,u,0,c,this.visualElement,!1))}stopAnimation(){an(r=>this.getAxisMotionValue(r).stop())}pauseAnimation(){an(r=>this.getAxisMotionValue(r).animation?.pause())}getAnimationState(r){return this.getAxisMotionValue(r).animation?.state}getAxisMotionValue(r){const c=`_drag${r.toUpperCase()}`,u=this.visualElement.getProps(),m=u[c];return m||this.visualElement.getValue(r,(u.initial?u.initial[r]:void 0)||0)}snapToCursor(r){an(c=>{const{drag:u}=this.getProps();if(!Gr(c,u,this.currentDirection))return;const{projection:m}=this.visualElement,g=this.getAxisMotionValue(c);if(m&&m.layout){const{min:h,max:y}=m.layout.layoutBox[c],p=g.get()||0;g.set(r[c]-fa(h,y,.5)+p)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:r,dragConstraints:c}=this.getProps(),{projection:u}=this.visualElement;if(!yl(c)||!u||!this.constraints)return;this.stopAnimation();const m={x:0,y:0};an(h=>{const y=this.getAxisMotionValue(h);if(y&&this.constraints!==!1){const p=y.get();m[h]=uw({min:p,max:p},this.constraints[h])}});const{transformTemplate:g}=this.visualElement.getProps();this.visualElement.current.style.transform=g?g({},\"\"):\"none\",u.root&&u.root.updateScroll(),u.updateLayout(),this.resolveConstraints(),an(h=>{if(!Gr(h,r,null))return;const y=this.getAxisMotionValue(h),{min:p,max:x}=this.constraints[h];y.set(fa(p,x,m[h]))})}addListeners(){if(!this.visualElement.current)return;mw.set(this.visualElement,this);const r=this.visualElement.current,c=wl(r,\"pointerdown\",p=>{const{drag:x,dragListener:v=!0}=this.getProps();x&&v&&!Qy(p.target)&&this.start(p)}),u=()=>{const{dragConstraints:p}=this.getProps();yl(p)&&p.current&&(this.constraints=this.resolveRefConstraints())},{projection:m}=this.visualElement,g=m.addEventListener(\"measure\",u);m&&!m.layout&&(m.root&&m.root.updateScroll(),m.updateLayout()),va.read(u);const h=Al(window,\"resize\",()=>this.scalePositionWithinConstraints()),y=m.addEventListener(\"didUpdate\",(({delta:p,hasLayoutChanged:x})=>{this.isDragging&&x&&(an(v=>{const f=this.getAxisMotionValue(v);f&&(this.originPoint[v]+=p[v].translate,f.set(f.get()+p[v].translate))}),this.visualElement.render())}));return()=>{h(),c(),g(),y&&y()}}getProps(){const r=this.visualElement.getProps(),{drag:c=!1,dragDirectionLock:u=!1,dragPropagation:m=!1,dragConstraints:g=!1,dragElastic:h=qu,dragMomentum:y=!0}=r;return{...r,drag:c,dragDirectionLock:u,dragPropagation:m,dragConstraints:g,dragElastic:h,dragMomentum:y}}}function Gr(i,r,c){return(r===!0||r===i)&&(c===null||c===i)}function pw(i,r=10){let c=null;return Math.abs(i.y)>r?c=\"y\":Math.abs(i.x)>r&&(c=\"x\"),c}class gw extends us{constructor(r){super(r),this.removeGroupControls=Ni,this.removeListeners=Ni,this.controls=new hw(r)}mount(){const{dragControls:r}=this.node.getProps();r&&(this.removeGroupControls=r.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ni}update(){const{dragControls:r}=this.node.getProps(),{dragControls:c}=this.node.prevProps||{};r!==c&&(this.removeGroupControls(),r&&(this.removeGroupControls=r.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const m0=i=>(r,c)=>{i&&va.postRender(()=>i(r,c))};class xw extends us{constructor(){super(...arguments),this.removePointerDownListener=Ni}onPointerDown(r){this.session=new Op(r,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Rp(this.node)})}createPanHandlers(){const{onPanSessionStart:r,onPanStart:c,onPan:u,onPanEnd:m}=this.node.getProps();return{onSessionStart:m0(r),onStart:m0(c),onMove:u,onEnd:(g,h)=>{delete this.session,m&&va.postRender(()=>m(g,h))}}}mount(){this.removePointerDownListener=wl(this.node.current,\"pointerdown\",r=>this.onPointerDown(r))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const $r={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let Nu=!1;class bw extends A.Component{componentDidMount(){const{visualElement:r,layoutGroup:c,switchLayoutGroup:u,layoutId:m}=this.props,{projection:g}=r;g&&(c.group&&c.group.add(g),u&&u.register&&m&&u.register(g),Nu&&g.root.didUpdate(),g.addEventListener(\"animationComplete\",()=>{this.safeToRemove()}),g.setOptions({...g.options,onExitComplete:()=>this.safeToRemove()})),$r.hasEverUpdated=!0}getSnapshotBeforeUpdate(r){const{layoutDependency:c,visualElement:u,drag:m,isPresent:g}=this.props,{projection:h}=u;return h&&(h.isPresent=g,Nu=!0,m||r.layoutDependency!==c||c===void 0||r.isPresent!==g?h.willUpdate():this.safeToRemove(),r.isPresent!==g&&(g?h.promote():h.relegate()||va.postRender(()=>{const y=h.getStack();(!y||!y.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:r}=this.props.visualElement;r&&(r.root.didUpdate(),dp.postRender(()=>{!r.currentAnimation&&r.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:r,layoutGroup:c,switchLayoutGroup:u}=this.props,{projection:m}=r;Nu=!0,m&&(m.scheduleCheckAfterUnmount(),c&&c.group&&c.group.remove(m),u&&u.deregister&&u.deregister(m))}safeToRemove(){const{safeToRemove:r}=this.props;r&&r()}render(){return null}}function Up(i){const[r,c]=vp(),u=A.useContext(Zu);return n.jsx(bw,{...i,layoutGroup:u,switchLayoutGroup:A.useContext(Dp),isPresent:r,safeToRemove:c})}const yw=(i,r)=>i.depth-r.depth;class vw{constructor(){this.children=[],this.isDirty=!1}add(r){fp(this.children,r),this.isDirty=!0}remove(r){mp(this.children,r),this.isDirty=!0}forEach(r){this.isDirty&&this.children.sort(yw),this.isDirty=!1,this.children.forEach(r)}}const Bp=[\"TopLeft\",\"TopRight\",\"BottomLeft\",\"BottomRight\"],ww=Bp.length,h0=i=>typeof i==\"string\"?parseFloat(i):i,p0=i=>typeof i==\"number\"||Zy.test(i);function jw(i,r,c,u,m,g){m?(i.opacity=fa(0,c.opacity??1,Nw(u)),i.opacityExit=fa(r.opacity??1,0,Sw(u))):g&&(i.opacity=fa(r.opacity??1,c.opacity??1,u));for(let h=0;h<ww;h++){const y=`border${Bp[h]}Radius`;let p=g0(r,y),x=g0(c,y);if(p===void 0&&x===void 0)continue;p||(p=0),x||(x=0),p===0||x===0||p0(p)===p0(x)?(i[y]=Math.max(fa(h0(p),h0(x),u),0),(Pr.test(x)||Pr.test(p))&&(i[y]+=\"%\")):i[y]=x}(r.rotate||c.rotate)&&(i.rotate=fa(r.rotate||0,c.rotate||0,u))}function g0(i,r){return i[r]!==void 0?i[r]:i.borderRadius}const Nw=Lp(0,.5,Ky),Sw=Lp(.5,.95,Ni);function Lp(i,r,c){return u=>u<i?0:u>r?1:c(Uu(i,r,u))}function x0(i,r){i.min=r.min,i.max=r.max}function on(i,r){x0(i.x,r.x),x0(i.y,r.y)}function b0(i,r){i.translate=r.translate,i.scale=r.scale,i.originPoint=r.originPoint,i.origin=r.origin}function y0(i,r,c,u,m){return i-=r,i=Hh(i,1/c,u),m!==void 0&&(i=Hh(i,1/m,u)),i}function Aw(i,r=0,c=1,u=.5,m,g=i,h=i){if(Pr.test(r)&&(r=parseFloat(r),r=fa(h.min,h.max,r/100)-h.min),typeof r!=\"number\")return;let y=fa(g.min,g.max,u);i===g&&(y-=r),i.min=y0(i.min,r,c,y,m),i.max=y0(i.max,r,c,y,m)}function v0(i,r,[c,u,m],g,h){Aw(i,r[c],r[u],r[m],r.scale,g,h)}const Dw=[\"x\",\"scaleX\",\"originX\"],Tw=[\"y\",\"scaleY\",\"originY\"];function w0(i,r,c,u){v0(i.x,r,Dw,c?c.x:void 0,u?u.x:void 0),v0(i.y,r,Tw,c?c.y:void 0,u?u.y:void 0)}function j0(i){return i.translate===0&&i.scale===1}function qp(i){return j0(i.x)&&j0(i.y)}function N0(i,r){return i.min===r.min&&i.max===r.max}function kw(i,r){return N0(i.x,r.x)&&N0(i.y,r.y)}function S0(i,r){return Math.round(i.min)===Math.round(r.min)&&Math.round(i.max)===Math.round(r.max)}function Ip(i,r){return S0(i.x,r.x)&&S0(i.y,r.y)}function A0(i){return wa(i.x)/wa(i.y)}function D0(i,r){return i.translate===r.translate&&i.scale===r.scale&&i.originPoint===r.originPoint}class Cw{constructor(){this.members=[]}add(r){fp(this.members,r),r.scheduleRender()}remove(r){if(mp(this.members,r),r===this.prevLead&&(this.prevLead=void 0),r===this.lead){const c=this.members[this.members.length-1];c&&this.promote(c)}}relegate(r){const c=this.members.findIndex(m=>r===m);if(c===0)return!1;let u;for(let m=c;m>=0;m--){const g=this.members[m];if(g.isPresent!==!1){u=g;break}}return u?(this.promote(u),!0):!1}promote(r,c){const u=this.lead;if(r!==u&&(this.prevLead=u,this.lead=r,r.show(),u)){u.instance&&u.scheduleRender(),r.scheduleRender(),r.resumeFrom=u,c&&(r.resumeFrom.preserveOpacity=!0),u.snapshot&&(r.snapshot=u.snapshot,r.snapshot.latestValues=u.animationValues||u.latestValues),r.root&&r.root.isUpdating&&(r.isLayoutDirty=!0);const{crossfade:m}=r.options;m===!1&&u.hide()}}exitAnimationComplete(){this.members.forEach(r=>{const{options:c,resumingFrom:u}=r;c.onExitComplete&&c.onExitComplete(),u&&u.options.onExitComplete&&u.options.onExitComplete()})}scheduleRender(){this.members.forEach(r=>{r.instance&&r.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Ew(i,r,c){let u=\"\";const m=i.x.translate/r.x,g=i.y.translate/r.y,h=c?.z||0;if((m||g||h)&&(u=`translate3d(${m}px, ${g}px, ${h}px) `),(r.x!==1||r.y!==1)&&(u+=`scale(${1/r.x}, ${1/r.y}) `),c){const{transformPerspective:x,rotate:v,rotateX:f,rotateY:N,skewX:M,skewY:O}=c;x&&(u=`perspective(${x}px) ${u}`),v&&(u+=`rotate(${v}deg) `),f&&(u+=`rotateX(${f}deg) `),N&&(u+=`rotateY(${N}deg) `),M&&(u+=`skewX(${M}deg) `),O&&(u+=`skewY(${O}deg) `)}const y=i.x.scale*r.x,p=i.y.scale*r.y;return(y!==1||p!==1)&&(u+=`scale(${y}, ${p})`),u||\"none\"}const Su=[\"\",\"X\",\"Y\",\"Z\"],Mw=1e3;let zw=0;function Au(i,r,c,u){const{latestValues:m}=r;m[i]&&(c[i]=m[i],r.setStaticValue(i,0),u&&(u[i]=0))}function Vp(i){if(i.hasCheckedOptimisedAppear=!0,i.root===i)return;const{visualElement:r}=i.options;if(!r)return;const c=cv(r);if(window.MotionHasOptimisedAnimation(c,\"transform\")){const{layout:m,layoutId:g}=i.options;window.MotionCancelOptimisedAnimation(c,\"transform\",va,!(m||g))}const{parent:u}=i;u&&!u.hasCheckedOptimisedAppear&&Vp(u)}function Hp({attachResizeListener:i,defaultParent:r,measureScroll:c,checkIsScrollRoot:u,resetTransform:m}){return class{constructor(h={},y=r?.()){this.id=zw++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(_w),this.nodes.forEach(qw),this.nodes.forEach(Iw),this.nodes.forEach(Uw)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=h,this.root=y?y.root||y:this,this.path=y?[...y.path,y]:[],this.parent=y,this.depth=y?y.depth+1:0;for(let p=0;p<this.path.length;p++)this.path[p].shouldResetTransform=!0;this.root===this&&(this.nodes=new vw)}addEventListener(h,y){return this.eventHandlers.has(h)||this.eventHandlers.set(h,new Jy),this.eventHandlers.get(h).add(y)}notifyListeners(h,...y){const p=this.eventHandlers.get(h);p&&p.notify(...y)}hasListeners(h){return this.eventHandlers.has(h)}mount(h){if(this.instance)return;this.isSVG=Wy(h)&&!ev(h),this.instance=h;const{layoutId:y,layout:p,visualElement:x}=this.options;if(x&&!x.current&&x.mount(h),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(p||y)&&(this.isLayoutDirty=!0),i){let v,f=0;const N=()=>this.root.updateBlockedByResize=!1;va.read(()=>{f=window.innerWidth}),i(h,()=>{const M=window.innerWidth;M!==f&&(f=M,this.root.updateBlockedByResize=!0,v&&v(),v=tv(N,250),$r.hasAnimatedSinceResize&&($r.hasAnimatedSinceResize=!1,this.nodes.forEach(C0)))})}y&&this.root.registerSharedNode(y,this),this.options.animate!==!1&&x&&(y||p)&&this.addEventListener(\"didUpdate\",({delta:v,hasLayoutChanged:f,hasRelativeLayoutChanged:N,layout:M})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const O=this.options.transition||x.getDefaultTransition()||Fw,{onLayoutAnimationStart:B,onLayoutAnimationComplete:L}=x.getProps(),R=!this.targetLayout||!Ip(this.targetLayout,M),P=!f&&N;if(this.options.layoutRoot||this.resumeFrom||P||f&&(R||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const V={...av(O,\"layout\"),onPlay:B,onComplete:L};(x.shouldReduceMotion||this.options.layoutRoot)&&(V.delay=0,V.type=!1),this.startAnimation(V),this.setAnimationOrigin(v,P)}else f||C0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=M})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const h=this.getStack();h&&h.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),_u(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Vw),this.animationId++)}getTransformTemplate(){const{visualElement:h}=this.options;return h&&h.getProps().transformTemplate}willUpdate(h=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Vp(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let v=0;v<this.path.length;v++){const f=this.path[v];f.shouldResetTransform=!0,f.updateScroll(\"snapshot\"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:y,layout:p}=this.options;if(y===void 0&&!p)return;const x=this.getTransformTemplate();this.prevTransformTemplateValue=x?x(this.latestValues,\"\"):void 0,this.updateSnapshot(),h&&this.notifyListeners(\"willUpdate\")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(T0);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(k0);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Lw),this.nodes.forEach(Rw),this.nodes.forEach(Ow)):this.nodes.forEach(k0),this.clearAllSnapshots();const y=nv.now();Ya.delta=up(0,1e3/60,y-Ya.timestamp),Ya.timestamp=y,Ya.isProcessing=!0,fu.update.process(Ya),fu.preRender.process(Ya),fu.render.process(Ya),Ya.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,dp.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Bw),this.sharedNodes.forEach(Hw)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,va.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){va.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!wa(this.snapshot.measuredBox.x)&&!wa(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let p=0;p<this.path.length;p++)this.path[p].updateScroll();const h=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=da(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners(\"measure\",this.layout.layoutBox);const{visualElement:y}=this.options;y&&y.notify(\"LayoutMeasure\",this.layout.layoutBox,h?h.layoutBox:void 0)}updateScroll(h=\"measure\"){let y=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===h&&(y=!1),y&&this.instance){const p=u(this.instance);this.scroll={animationId:this.root.animationId,phase:h,isRoot:p,offset:c(this.instance),wasRoot:this.scroll?this.scroll.isRoot:p}}}resetTransform(){if(!m)return;const h=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,y=this.projectionDelta&&!qp(this.projectionDelta),p=this.getTransformTemplate(),x=p?p(this.latestValues,\"\"):void 0,v=x!==this.prevTransformTemplateValue;h&&this.instance&&(y||vi(this.latestValues)||v)&&(m(this.instance,x),this.shouldResetTransform=!1,this.scheduleRender())}measure(h=!0){const y=this.measurePageBox();let p=this.removeElementScroll(y);return h&&(p=this.removeTransform(p)),$w(p),{animationId:this.root.animationId,measuredBox:y,layoutBox:p,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:h}=this.options;if(!h)return da();const y=h.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Xw))){const{scroll:x}=this.root;x&&(qr(y.x,x.offset.x),qr(y.y,x.offset.y))}return y}removeElementScroll(h){const y=da();if(on(y,h),this.scroll?.wasRoot)return y;for(let p=0;p<this.path.length;p++){const x=this.path[p],{scroll:v,options:f}=x;x!==this.root&&v&&f.layoutScroll&&(v.wasRoot&&on(y,h),qr(y.x,v.offset.x),qr(y.y,v.offset.y))}return y}applyTransform(h,y=!1){const p=da();on(p,h);for(let x=0;x<this.path.length;x++){const v=this.path[x];!y&&v.options.layoutScroll&&v.scroll&&v!==v.root&&Ir(p,{x:-v.scroll.offset.x,y:-v.scroll.offset.y}),vi(v.latestValues)&&Ir(p,v.latestValues)}return vi(this.latestValues)&&Ir(p,this.latestValues),p}removeTransform(h){const y=da();on(y,h);for(let p=0;p<this.path.length;p++){const x=this.path[p];if(!x.instance||!vi(x.latestValues))continue;Gh(x.latestValues)&&x.updateSnapshot();const v=da(),f=x.measurePageBox();on(v,f),w0(y,x.latestValues,x.snapshot?x.snapshot.layoutBox:void 0,v)}return vi(this.latestValues)&&w0(y,this.latestValues),y}setTargetDelta(h){this.targetDelta=h,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(h){this.options={...this.options,...h,crossfade:h.crossfade!==void 0?h.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ya.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(h=!1){const y=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=y.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=y.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=y.isSharedProjectionDirty);const p=!!this.resumingFrom||this!==y;if(!(h||p&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:v,layoutId:f}=this.options;if(!this.layout||!(v||f))return;this.resolvedRelativeTargetAt=Ya.timestamp;const N=this.getClosestProjectingParent();N&&this.linkedParentVersion!==N.layoutVersion&&!N.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(N&&N.layout?this.createRelativeTarget(N,this.layout.layoutBox,N.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=da(),this.targetWithTransforms=da()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),sw(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):on(this.target,this.layout.layoutBox),sv(this.target,this.targetDelta)):on(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,N&&!!N.resumingFrom==!!this.resumingFrom&&!N.options.layoutScroll&&N.target&&this.animationProgress!==1?this.createRelativeTarget(N,this.target,N.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Gh(this.parent.latestValues)||iv(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(h,y,p){this.relativeParent=h,this.linkedParentVersion=h.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=da(),this.relativeTargetOrigin=da(),Zr(this.relativeTargetOrigin,y,p),on(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const h=this.getLead(),y=!!this.resumingFrom||this!==h;let p=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(p=!1),y&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(p=!1),this.resolvedRelativeTargetAt===Ya.timestamp&&(p=!1),p)return;const{layout:x,layoutId:v}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(x||v))return;on(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,N=this.treeScale.y;lv(this.layoutCorrected,this.treeScale,this.path,y),h.layout&&!h.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(h.target=h.layout.layoutBox,h.targetWithTransforms=da());const{target:M}=h;if(!M){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(b0(this.prevProjectionDelta.x,this.projectionDelta.x),b0(this.prevProjectionDelta.y,this.projectionDelta.y)),jl(this.projectionDelta,this.layoutCorrected,M,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==N||!D0(this.projectionDelta.x,this.prevProjectionDelta.x)||!D0(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners(\"projectionUpdate\",M))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(h=!0){if(this.options.visualElement?.scheduleRender(),h){const y=this.getStack();y&&y.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=wi(),this.projectionDelta=wi(),this.projectionDeltaWithTransform=wi()}setAnimationOrigin(h,y=!1){const p=this.snapshot,x=p?p.latestValues:{},v={...this.latestValues},f=wi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!y;const N=da(),M=p?p.source:void 0,O=this.layout?this.layout.source:void 0,B=M!==O,L=this.getStack(),R=!L||L.members.length<=1,P=!!(B&&!R&&this.options.crossfade===!0&&!this.path.some(Yw));this.animationProgress=0;let V;this.mixTargetDelta=S=>{const se=S/1e3;E0(f.x,h.x,se),E0(f.y,h.y,se),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Zr(N,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Gw(this.relativeTarget,this.relativeTargetOrigin,N,se),V&&kw(this.relativeTarget,V)&&(this.isProjectionDirty=!1),V||(V=da()),on(V,this.relativeTarget)),B&&(this.animationValues=v,jw(v,x,this.latestValues,se,P,R)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=se},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(h){this.notifyListeners(\"animationStart\"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(_u(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=va.update(()=>{$r.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=rv(0)),this.currentAnimation=ov(this.motionValue,[0,1e3],{...h,velocity:0,isSync:!0,onUpdate:y=>{this.mixTargetDelta(y),h.onUpdate&&h.onUpdate(y)},onStop:()=>{},onComplete:()=>{h.onComplete&&h.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const h=this.getStack();h&&h.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners(\"animationComplete\")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Mw),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const h=this.getLead();let{targetWithTransforms:y,target:p,layout:x,latestValues:v}=h;if(!(!y||!p||!x)){if(this!==h&&this.layout&&x&&Gp(this.options.animationType,this.layout.layoutBox,x.layoutBox)){p=this.target||da();const f=wa(this.layout.layoutBox.x);p.x.min=h.target.x.min,p.x.max=p.x.min+f;const N=wa(this.layout.layoutBox.y);p.y.min=h.target.y.min,p.y.max=p.y.min+N}on(y,p),Ir(y,v),jl(this.projectionDeltaWithTransform,this.layoutCorrected,y,v)}}registerSharedNode(h,y){this.sharedNodes.has(h)||this.sharedNodes.set(h,new Cw),this.sharedNodes.get(h).add(y);const x=y.options.initialPromotionConfig;y.promote({transition:x?x.transition:void 0,preserveFollowOpacity:x&&x.shouldPreserveFollowOpacity?x.shouldPreserveFollowOpacity(y):void 0})}isLead(){const h=this.getStack();return h?h.lead===this:!0}getLead(){const{layoutId:h}=this.options;return h?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:h}=this.options;return h?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:h}=this.options;if(h)return this.root.sharedNodes.get(h)}promote({needsReset:h,transition:y,preserveFollowOpacity:p}={}){const x=this.getStack();x&&x.promote(this,p),h&&(this.projectionDelta=void 0,this.needsReset=!0),y&&this.setOptions({transition:y})}relegate(){const h=this.getStack();return h?h.relegate(this):!1}resetSkewAndRotation(){const{visualElement:h}=this.options;if(!h)return;let y=!1;const{latestValues:p}=h;if((p.z||p.rotate||p.rotateX||p.rotateY||p.rotateZ||p.skewX||p.skewY)&&(y=!0),!y)return;const x={};p.z&&Au(\"z\",h,x,this.animationValues);for(let v=0;v<Su.length;v++)Au(`rotate${Su[v]}`,h,x,this.animationValues),Au(`skew${Su[v]}`,h,x,this.animationValues);h.render();for(const v in x)h.setStaticValue(v,x[v]),this.animationValues&&(this.animationValues[v]=x[v]);h.scheduleRender()}applyProjectionStyles(h,y){if(!this.instance||this.isSVG)return;if(!this.isVisible){h.visibility=\"hidden\";return}const p=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,h.visibility=\"\",h.opacity=\"\",h.pointerEvents=Fr(y?.pointerEvents)||\"\",h.transform=p?p(this.latestValues,\"\"):\"none\";return}const x=this.getLead();if(!this.projectionDelta||!this.layout||!x.target){this.options.layoutId&&(h.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,h.pointerEvents=Fr(y?.pointerEvents)||\"\"),this.hasProjected&&!vi(this.latestValues)&&(h.transform=p?p({},\"\"):\"none\",this.hasProjected=!1);return}h.visibility=\"\";const v=x.animationValues||x.latestValues;this.applyTransformsToTarget();let f=Ew(this.projectionDeltaWithTransform,this.treeScale,v);p&&(f=p(v,f)),h.transform=f;const{x:N,y:M}=this.projectionDelta;h.transformOrigin=`${N.origin*100}% ${M.origin*100}% 0`,x.animationValues?h.opacity=x===this?v.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:h.opacity=x===this?v.opacity!==void 0?v.opacity:\"\":v.opacityExit!==void 0?v.opacityExit:0;for(const O in Yh){if(v[O]===void 0)continue;const{correct:B,applyTo:L,isCSSVariable:R}=Yh[O],P=f===\"none\"?v[O]:B(v[O],x);if(L){const V=L.length;for(let S=0;S<V;S++)h[L[S]]=P}else R?this.options.visualElement.renderState.vars[O]=P:h[O]=P}this.options.layoutId&&(h.pointerEvents=x===this?Fr(y?.pointerEvents)||\"\":\"none\")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(h=>h.currentAnimation?.stop()),this.root.nodes.forEach(T0),this.root.sharedNodes.clear()}}}function Rw(i){i.updateLayout()}function Ow(i){const r=i.resumeFrom?.snapshot||i.snapshot;if(i.isLead()&&i.layout&&r&&i.hasListeners(\"didUpdate\")){const{layoutBox:c,measuredBox:u}=i.layout,{animationType:m}=i.options,g=r.source!==i.layout.source;m===\"size\"?an(v=>{const f=g?r.measuredBox[v]:r.layoutBox[v],N=wa(f);f.min=c[v].min,f.max=f.min+N}):Gp(m,r.layoutBox,c)&&an(v=>{const f=g?r.measuredBox[v]:r.layoutBox[v],N=wa(c[v]);f.max=f.min+N,i.relativeTarget&&!i.currentAnimation&&(i.isProjectionDirty=!0,i.relativeTarget[v].max=i.relativeTarget[v].min+N)});const h=wi();jl(h,c,r.layoutBox);const y=wi();g?jl(y,i.applyTransform(u,!0),r.measuredBox):jl(y,c,r.layoutBox);const p=!qp(h);let x=!1;if(!i.resumeFrom){const v=i.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:f,layout:N}=v;if(f&&N){const M=da();Zr(M,r.layoutBox,f.layoutBox);const O=da();Zr(O,c,N.layoutBox),Ip(M,O)||(x=!0),v.options.layoutRoot&&(i.relativeTarget=O,i.relativeTargetOrigin=M,i.relativeParent=v)}}}i.notifyListeners(\"didUpdate\",{layout:c,snapshot:r,delta:y,layoutDelta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:x})}else if(i.isLead()){const{onExitComplete:c}=i.options;c&&c()}i.options.transition=void 0}function _w(i){i.parent&&(i.isProjecting()||(i.isProjectionDirty=i.parent.isProjectionDirty),i.isSharedProjectionDirty||(i.isSharedProjectionDirty=!!(i.isProjectionDirty||i.parent.isProjectionDirty||i.parent.isSharedProjectionDirty)),i.isTransformDirty||(i.isTransformDirty=i.parent.isTransformDirty))}function Uw(i){i.isProjectionDirty=i.isSharedProjectionDirty=i.isTransformDirty=!1}function Bw(i){i.clearSnapshot()}function T0(i){i.clearMeasurements()}function k0(i){i.isLayoutDirty=!1}function Lw(i){const{visualElement:r}=i.options;r&&r.getProps().onBeforeLayoutMeasure&&r.notify(\"BeforeLayoutMeasure\"),i.resetTransform()}function C0(i){i.finishAnimation(),i.targetDelta=i.relativeTarget=i.target=void 0,i.isProjectionDirty=!0}function qw(i){i.resolveTargetDelta()}function Iw(i){i.calcProjection()}function Vw(i){i.resetSkewAndRotation()}function Hw(i){i.removeLeadSnapshot()}function E0(i,r,c){i.translate=fa(r.translate,0,c),i.scale=fa(r.scale,1,c),i.origin=r.origin,i.originPoint=r.originPoint}function M0(i,r,c,u){i.min=fa(r.min,c.min,u),i.max=fa(r.max,c.max,u)}function Gw(i,r,c,u){M0(i.x,r.x,c.x,u),M0(i.y,r.y,c.y,u)}function Yw(i){return i.animationValues&&i.animationValues.opacityExit!==void 0}const Fw={duration:.45,ease:[.4,0,.1,1]},z0=i=>typeof navigator<\"u\"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(i),R0=z0(\"applewebkit/\")&&!z0(\"chrome/\")?Math.round:Ni;function O0(i){i.min=R0(i.min),i.max=R0(i.max)}function $w(i){O0(i.x),O0(i.y)}function Gp(i,r,c){return i===\"position\"||i===\"preserve-aspect\"&&!nw(A0(r),A0(c),.2)}function Xw(i){return i!==i.root&&i.scroll?.wasRoot}const Pw=Hp({attachResizeListener:(i,r)=>Al(i,\"resize\",r),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Du={current:void 0},Yp=Hp({measureScroll:i=>({x:i.scrollLeft,y:i.scrollTop}),defaultParent:()=>{if(!Du.current){const i=new Pw({});i.mount(window),i.setOptions({layoutScroll:!0}),Du.current=i}return Du.current},resetTransform:(i,r)=>{i.style.transform=r!==void 0?r:\"none\"},checkIsScrollRoot:i=>window.getComputedStyle(i).position===\"fixed\"}),Qw={pan:{Feature:xw},drag:{Feature:gw,ProjectionNode:Yp,MeasureLayout:Up}};function _0(i,r,c){const{props:u}=i;i.animationState&&u.whileHover&&i.animationState.setActive(\"whileHover\",c===\"Start\");const m=\"onHover\"+c,g=u[m];g&&va.postRender(()=>g(r,kl(r)))}class Zw extends us{mount(){const{current:r}=this.node;r&&(this.unmount=uv(r,(c,u)=>(_0(this.node,u,\"Start\"),m=>_0(this.node,m,\"End\"))))}unmount(){}}class Kw extends us{constructor(){super(...arguments),this.isActive=!1}onFocus(){let r=!1;try{r=this.node.current.matches(\":focus-visible\")}catch{r=!0}!r||!this.node.animationState||(this.node.animationState.setActive(\"whileFocus\",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive(\"whileFocus\",!1),this.isActive=!1)}mount(){this.unmount=cp(Al(this.node.current,\"focus\",()=>this.onFocus()),Al(this.node.current,\"blur\",()=>this.onBlur()))}unmount(){}}function U0(i,r,c){const{props:u}=i;if(i.current instanceof HTMLButtonElement&&i.current.disabled)return;i.animationState&&u.whileTap&&i.animationState.setActive(\"whileTap\",c===\"Start\");const m=\"onTap\"+(c===\"End\"?\"\":c),g=u[m];g&&va.postRender(()=>g(r,kl(r)))}class Jw extends us{mount(){const{current:r}=this.node;r&&(this.unmount=dv(r,(c,u)=>(U0(this.node,u,\"Start\"),(m,{success:g})=>U0(this.node,m,g?\"End\":\"Cancel\")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Iu=new WeakMap,Tu=new WeakMap,Ww=i=>{const r=Iu.get(i.target);r&&r(i)},ej=i=>{i.forEach(Ww)};function tj({root:i,...r}){const c=i||document;Tu.has(c)||Tu.set(c,{});const u=Tu.get(c),m=JSON.stringify(r);return u[m]||(u[m]=new IntersectionObserver(ej,{root:i,...r})),u[m]}function aj(i,r,c){const u=tj(r);return Iu.set(i,c),u.observe(i),()=>{Iu.delete(i),u.unobserve(i)}}const nj={some:0,all:1};class sj extends us{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:r={}}=this.node.getProps(),{root:c,margin:u,amount:m=\"some\",once:g}=r,h={root:c?c.current:void 0,rootMargin:u,threshold:typeof m==\"number\"?m:nj[m]},y=p=>{const{isIntersecting:x}=p;if(this.isInView===x||(this.isInView=x,g&&!x&&this.hasEnteredView))return;x&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive(\"whileInView\",x);const{onViewportEnter:v,onViewportLeave:f}=this.node.getProps(),N=x?v:f;N&&N(p)};return aj(this.node.current,h,y)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>\"u\")return;const{props:r,prevProps:c}=this.node;[\"amount\",\"margin\",\"root\"].some(ij(r,c))&&this.startObserver()}unmount(){}}function ij({viewport:i={}},{viewport:r={}}={}){return c=>i[c]!==r[c]}const lj={inView:{Feature:sj},tap:{Feature:Jw},focus:{Feature:Kw},hover:{Feature:Zw}},rj={layout:{ProjectionNode:Yp,MeasureLayout:Up}},oj={...K1,...lj,...Qw,...rj},Oe=L1(oj,q1),cj=()=>n.jsx(\"div\",{className:\"absolute inset-0 opacity-[0.03] pointer-events-none overflow-hidden\",children:n.jsxs(\"svg\",{width:\"100%\",height:\"100%\",xmlns:\"http://www.w3.org/2000/svg\",children:[n.jsx(\"defs\",{children:n.jsxs(\"pattern\",{id:\"grid\",width:\"40\",height:\"40\",patternUnits:\"userSpaceOnUse\",children:[n.jsx(\"path\",{d:\"M 40 0 L 0 0 0 40\",fill:\"none\",stroke:\"white\",strokeWidth:\"1\"}),n.jsx(\"circle\",{cx:\"0\",cy:\"0\",r:\"1\",fill:\"white\"})]})}),n.jsx(\"rect\",{width:\"100%\",height:\"100%\",fill:\"url(#grid)\"})]})}),Fp=({variant:i,className:r=\"\",animate:c=!1})=>{const u=i===\"ghost\"?\"mesh-ghost-blue\":i?`mesh-${i}`:\"\",m={animate1:{x:[0,40,-20,0],y:[0,-30,20,0],scale:[1,1.2,.8,1],transition:{duration:30,repeat:1/0,ease:\"linear\"}},animate2:{x:[0,-30,50,0],y:[0,40,-30,0],scale:[1,.8,1.2,1],transition:{duration:25,repeat:1/0,ease:\"linear\"}},animate3:{x:[0,20,-40,0],y:[0,-40,30,0],scale:[1,1.1,.9,1],transition:{duration:35,repeat:1/0,ease:\"linear\"}}};return n.jsxs(\"div\",{className:`absolute inset-0 pointer-events-none overflow-hidden ${u} ${r}`,children:[n.jsx(cj,{}),n.jsx(\"div\",{className:\"mesh-readability-lock\"}),n.jsx(\"div\",{className:\"mesh-blob mesh-blob-base\"}),n.jsx(Oe.div,{variants:m,animate:c?\"animate1\":void 0,className:\"mesh-blob mesh-blob-1\"}),n.jsx(Oe.div,{variants:m,animate:c?\"animate2\":void 0,className:\"mesh-blob mesh-blob-2\"}),n.jsx(Oe.div,{variants:m,animate:c?\"animate3\":void 0,className:\"mesh-blob mesh-blob-3\"})]})},uj=({recurring:i,currency:r,totalMonthlyIncome:c,onDelete:u})=>{const m=A.useMemo(()=>i.filter(B=>B.type===\"expense\").map(B=>{let L=\"Lifestyle\";const R=B.description?.toLowerCase()||\"\",P=B.category?.toLowerCase()||\"\";return(R.includes(\"insurance\")||R.includes(\"cloud\")||R.includes(\"drive\")||R.includes(\"icloud\")||R.includes(\"adobe\")||P.includes(\"insurance\")||P.includes(\"emi\"))&&(L=\"Vital\"),R.includes(\"trial\")||R.includes(\"premium\")&&Math.random()>.7,{...B,strategyCategory:L}}),[i]),g=A.useMemo(()=>{const B=[\"spotify\",\"apple music\",\"youtube music\",\"amazon music\",\"tidal\"],L=[\"netflix\",\"prime video\",\"hulu\",\"disney\",\"hbo\",\"hotstar\"],R=m.filter(V=>B.some(S=>V.description?.toLowerCase().includes(S))),P=m.filter(V=>L.some(S=>V.description?.toLowerCase().includes(S)));return m.map(V=>{let S=V.strategyCategory;const se=V.description?.toLowerCase()||\"\";if(R.length>1&&R.includes(V)){const he=R.reduce((ve,fe)=>ve.amount>fe.amount?ve:fe);V.id!==he.id&&(S=\"Ghost\")}return P.length>2&&P.includes(V)&&[...P].sort((ve,fe)=>fe.amount-ve.amount).indexOf(V)>=2&&(S=\"Ghost\"),se.includes(\"trial\")&&(S=\"Ghost\"),{...V,strategyCategory:S}})},[m]),h=g.reduce((B,L)=>{let R=L.amount;return L.frequency===\"yearly\"&&(R=L.amount/12),L.frequency===\"weekly\"&&(R=L.amount*4),L.frequency===\"custom\"&&L.customIntervalDays&&(R=L.amount*(30/L.customIntervalDays)),B+R},0),y=c>0?c/30:1,p=h/y,v=g.filter(B=>B.strategyCategory===\"Ghost\").reduce((B,L)=>{let R=L.amount;return L.frequency===\"yearly\"&&(R=L.amount/12),L.frequency===\"weekly\"&&(R=L.amount*4),B+R},0),f=.01,M=v*(Math.pow(1+f,60)-1)/f,O=(B,L)=>{let R=B;return L===\"yearly\"&&(R=B/12),L===\"weekly\"&&(R=B*4),L===\"custom\"&&(R=B*(30/28)),(R/y).toFixed(1)};return n.jsxs(\"div\",{className:\"space-y-6 animate-in slide-in-from-right duration-500\",children:[n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[n.jsxs(aa,{className:\"p-6 bg-slate-900/60 border-white/10 relative overflow-hidden\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 p-4 opacity-10\",children:n.jsx(kb,{className:\"w-24 h-24\"})}),n.jsx(\"h3\",{className:\"text-sm font-bold uppercase tracking-widest text-slate-400 mb-4\",children:\"Total Freedom Tax\"}),n.jsxs(\"div\",{className:\"flex items-end gap-2 mb-2\",children:[n.jsx(\"span\",{className:\"text-4xl font-black text-rose-400\",children:p.toFixed(1)}),n.jsx(\"span\",{className:\"text-lg font-bold text-slate-500 mb-1\",children:\"Days/Month\"})]}),n.jsx(\"p\",{className:\"text-xs text-slate-400\",children:'The \"Freedom Tax\" you pay with your life time.'})]}),n.jsxs(aa,{className:\"p-6 bg-indigo-900/20 border-indigo-500/20 relative overflow-hidden\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 p-4 opacity-10\",children:n.jsx(Si,{className:\"w-24 h-24 text-indigo-400\"})}),n.jsx(\"h3\",{className:\"text-sm font-bold uppercase tracking-widest text-indigo-400 mb-4\",children:\"Growth Pivot Potential\"}),n.jsxs(\"div\",{className:\"flex items-end gap-2 mb-2\",children:[n.jsx(\"span\",{className:\"text-4xl font-black text-indigo-300\",children:$e(M,r)}),n.jsx(\"span\",{className:\"text-lg font-bold text-indigo-500/60 mb-1\",children:\"in 5 Years\"})]}),n.jsx(\"p\",{className:\"text-xs text-indigo-400/80\",children:'If you cancel \"Ghost\" items and invest the savings at 12%.'})]})]}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"h3\",{className:\"text-lg font-black text-white uppercase tracking-tight flex items-center gap-2\",children:[n.jsx(Cb,{className:\"w-5 h-5 text-rose-400\"}),\"Strategist Analysis\"]}),n.jsx(\"div\",{className:\"grid gap-3\",children:g.map(B=>{const L=O(B.amount,B.frequency),R=B.strategyCategory===\"Ghost\",P=B.strategyCategory===\"Vital\",V=B.strategyCategory===\"Asset\";return n.jsxs(aa,{className:`p-4 border flex items-center justify-between group transition-all overflow-hidden relative ${R?\"mesh-purple border-purple-500/20 hover:border-purple-500/40\":P||V?\"mesh-teal border-teal-500/20\":\"mesh-purple border-purple-500/20\"}`,children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:`w-10 h-10 rounded-xl flex items-center justify-center text-lg ${R?\"bg-rose-500/10 text-rose-400\":P?\"bg-emerald-500/10 text-emerald-400\":\"bg-slate-800 text-slate-400\"}`,children:R?n.jsx(Jr,{className:\"w-5 h-5\"}):P?n.jsx(Ti,{className:\"w-5 h-5\"}):n.jsx(W0,{className:\"w-5 h-5\"})}),n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"font-bold text-slate-200\",children:B.description||B.source}),n.jsxs(\"div\",{className:\"flex items-center gap-2 mt-1\",children:[n.jsx(\"span\",{className:`text-[10px] font-black uppercase px-1.5 py-0.5 rounded ${R?\"bg-rose-500 text-black\":P?\"bg-emerald-500/20 text-emerald-400\":\"bg-slate-700 text-slate-400\"}`,children:B.strategyCategory}),n.jsxs(\"span\",{className:\"text-[10px] text-slate-500 font-medium\",children:[\"Freedom Tax: \",L,\" days\"]})]})]})]}),n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsxs(\"div\",{className:\"text-right\",children:[n.jsx(\"p\",{className:\"font-bold text-slate-200\",children:$e(B.amount,r)}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 uppercase\",children:B.frequency})]}),R&&n.jsx(Ge,{size:\"sm\",variant:\"destructive\",className:\"opacity-0 group-hover:opacity-100 transition-opacity\",onClick:()=>u(B.id,B.description||\"Subscription\"),children:\"Kill\"})]})]},B.id)})})]})]})};function dj(){const{accounts:i,currency:r,recurringTransactions:c,createRecurringTransaction:u,updateRecurringTransaction:m,deleteRecurringTransaction:g,processRecurringTransactions:h}=Di(),[y,p]=A.useState(\"list\"),x=c.filter(G=>G.type===\"income\").reduce((G,C)=>{let Y=C.amount;return C.frequency===\"yearly\"&&(Y=C.amount/12),C.frequency===\"weekly\"&&(Y=C.amount*4),G+Y},0),v=G=>({daily:\"Daily\",weekly:\"Weekly\",monthly:\"Monthly\",yearly:\"Yearly\"})[G]||G,f=({rec:G})=>{const C=i.find(Y=>Y.id===G.accountId);return n.jsxs(aa,{className:\"p-6 bg-slate-900/40 border-white/5 rounded-[28px] border hover:bg-slate-900/60 transition-all duration-300 group relative overflow-hidden\",children:[n.jsx(\"div\",{className:`absolute top-0 right-0 w-24 h-24 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20 ${G.type===\"income\"?\"bg-emerald-500\":\"bg-rose-500\"}`}),n.jsxs(\"div\",{className:\"flex items-start justify-between mb-8 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:`w-14 h-14 border border-white/5 rounded-2xl flex items-center justify-center shadow-inner group-hover:scale-105 transition-transform text-2xl ${G.type===\"income\"?\"bg-emerald-500/10 text-emerald-400\":\"bg-rose-500/10 text-rose-400\"}`,children:G.type===\"income\"?\"💰\":\"💸\"}),n.jsxs(\"div\",{className:\"min-w-0\",children:[n.jsx(\"h3\",{className:\"text-base font-bold text-slate-100 truncate flex items-center gap-2\",children:G.description||G.source}),n.jsx(\"p\",{className:\"text-[10px] uppercase font-black tracking-widest text-slate-600 mt-1\",children:v(G.frequency)})]})]}),n.jsxs(\"div\",{className:\"flex bg-slate-900/80 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity\",children:[n.jsx(Ge,{variant:\"ghost\",size:\"sm\",onClick:()=>ve(G),className:\"w-10 h-10 p-0 rounded-l-xl hover:bg-slate-800 text-slate-500 hover:text-indigo-400\",children:n.jsx(zb,{className:\"w-4 h-4\"})}),n.jsx(\"div\",{className:\"w-px bg-white/10 my-2\"}),n.jsx(Ge,{variant:\"ghost\",size:\"sm\",onClick:()=>g(G.id),className:\"w-10 h-10 p-0 rounded-r-xl hover:bg-rose-500/10 hover:text-rose-400 text-slate-500 hover:text-rose-400\",children:n.jsx(Ai,{className:\"w-4 h-4\"})})]})]}),n.jsxs(\"div\",{className:\"space-y-6 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-end\",children:[n.jsxs(\"div\",{className:\"flex flex-col\",children:[n.jsx(\"span\",{className:\"text-[10px] uppercase tracking-widest font-black text-slate-600 mb-1\",children:\"Commitment\"}),n.jsxs(\"span\",{className:`text-2xl font-black tabular-nums leading-none ${G.type===\"income\"?\"text-emerald-400\":\"text-slate-100\"}`,children:[G.type===\"income\"?\"+\":\"-\",$e(G.amount,r)]})]}),n.jsxs(\"div\",{className:\"text-right flex flex-col items-end\",children:[n.jsx(\"span\",{className:\"text-[10px] uppercase tracking-widest font-black text-slate-600 mb-1\",children:\"Wallet\"}),n.jsxs(\"span\",{className:\"text-xs font-bold text-slate-300 flex items-center gap-1.5 bg-white/5 px-2 py-1 rounded-lg\",children:[C?.icon,\" \",C?.name]})]})]}),n.jsxs(\"div\",{className:\"pt-6 border-t border-white/5 flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex flex-col gap-1\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-2 text-slate-500\",children:[n.jsx(Eu,{className:\"w-3 h-3\"}),n.jsx(\"span\",{className:\"text-[9px] font-black uppercase tracking-wider\",children:\"Timeline\"})]}),n.jsxs(\"div\",{className:\"text-[10px] font-bold text-slate-300\",children:[new Date(G.startDate).toLocaleDateString(void 0,{month:\"short\",year:\"numeric\"}),G.endDate?` — ${new Date(G.endDate).toLocaleDateString(void 0,{month:\"short\",year:\"numeric\"})}`:\" — Ongoing\"]})]}),n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[G.category&&n.jsx(\"div\",{className:\"bg-slate-800/50 px-2.5 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest text-slate-500 border border-white/5\",children:G.category}),n.jsx(\"div\",{className:\"w-8 h-8 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-lg shadow-inner\",children:C?.icon||\"🏦\"})]})]})]})]})},[N,M]=A.useState(!1),[O,B]=A.useState(!1),[L,R]=A.useState(!1),[P,V]=A.useState(null),[S,se]=A.useState({type:\"expense\",description:\"\",source:\"\",amount:\"\",category:\"\",accountId:i.length>0?i[0].id:\"\",frequency:\"monthly\",startDate:new Date().toISOString().split(\"T\")[0],endDate:\"\",tags:[]}),he=async()=>{const G={type:S.type,amount:parseFloat(S.amount),accountId:S.accountId,frequency:S.frequency,startDate:S.startDate,endDate:S.endDate||void 0,tags:S.tags};S.type===\"expense\"?(G.description=S.description,G.category=S.category):G.source=S.source,P?await m(P,G):await u(G),M(!1),ye()},ve=G=>{se({type:G.type,description:G.description||\"\",source:G.source||\"\",amount:G.amount.toString(),category:G.category||\"\",accountId:G.accountId,frequency:G.frequency,startDate:G.startDate.split(\"T\")[0],endDate:G.endDate?G.endDate.split(\"T\")[0]:\"\",tags:G.tags||[]}),V(G.id),M(!0)},fe=async()=>{B(!0),await h(),B(!1)},ye=()=>{se({type:\"expense\",description:\"\",source:\"\",amount:\"\",category:\"\",accountId:i.length>0?i[0].id:\"\",frequency:\"monthly\",startDate:new Date().toISOString().split(\"T\")[0],endDate:\"\",tags:[]}),V(null)},Se=c.filter(G=>G.amount&&G.amount>0),Te=(()=>{const G=Se.filter(ge=>ge.category===\"EMI\"||ge.description?.toLowerCase().includes(\"loan\")),C=Se.filter(ge=>ge.category===\"Subscription\"||ge.description?.toLowerCase().includes(\"subscription\")||[\"netflix\",\"spotify\",\"prime\",\"youtube\",\"apple\",\"hulu\",\"disney\",\"google\"].some(z=>ge.description?.toLowerCase().includes(z))),Y=Se.filter(ge=>ge.type===\"income\"),oe=Se.filter(ge=>!G.some(z=>z.id===ge.id)&&!C.some(z=>z.id===ge.id)&&!Y.some(z=>z.id===ge.id));return{loans:G,subscriptions:C,incomes:Y,others:oe}})(),me=(()=>{const G=$=>{const le=$.amount||0;return $.frequency===\"monthly\"?le:$.frequency===\"yearly\"?le/12:$.frequency===\"weekly\"?le*4:le*30},C=Te.loans.reduce(($,le)=>$+G(le),0),Y=Te.subscriptions.reduce(($,le)=>$+G(le),0),oe=Te.incomes.reduce(($,le)=>$+G(le),0),ge=Te.others.reduce(($,le)=>$+G(le),0),z=C+Y+ge,T=oe-z,re=oe>0?Math.max(0,Math.min(100,T/oe*100)):0;return{loanTotal:C,subTotal:Y,incomeTotal:oe,otherTotal:ge,totalOutflow:z,netMonthly:T,healthScore:re,totalActive:Se.length}})();return n.jsxs(\"div\",{className:\"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700\",children:[n.jsx(\"div\",{className:\"flex justify-center mb-6\",children:n.jsxs(\"div\",{className:\"bg-slate-900/60 p-1 rounded-2xl flex gap-1 border border-white/5\",children:[n.jsx(\"button\",{onClick:()=>p(\"list\"),className:`px-6 py-2 rounded-xl text-sm font-bold transition-all ${y===\"list\"?\"bg-indigo-600 text-white shadow-lg\":\"text-slate-500 hover:text-slate-300\"}`,children:\"Flow List\"}),n.jsxs(\"button\",{onClick:()=>p(\"strategist\"),className:`px-6 py-2 rounded-xl text-sm font-bold transition-all flex items-center gap-2 ${y===\"strategist\"?\"bg-indigo-600 text-white shadow-lg\":\"text-slate-500 hover:text-slate-300\"}`,children:[n.jsx(_s,{className:\"w-4 h-4\"}),\"Strategist\"]})]})}),y===\"strategist\"?n.jsx(uj,{recurring:c,currency:r,totalMonthlyIncome:x,onDelete:(G,C)=>{g(G)}}):n.jsxs(n.Fragment,{children:[n.jsxs(aa,{className:\"relative overflow-hidden bg-gradient-to-br from-indigo-600 via-purple-600 to-indigo-700 text-white rounded-[32px] border-white/10 shadow-2xl p-8\",children:[n.jsx(Fp,{variant:\"spending\",className:\"opacity-50\"}),n.jsx(\"div\",{className:\"absolute top-0 right-0 p-8 opacity-10 scale-150 rotate-12\",children:n.jsx(Eb,{className:\"w-32 h-32\"})}),n.jsxs(\"div\",{className:\"relative z-10 flex flex-col md:flex-row items-center justify-between gap-12\",children:[n.jsxs(\"div\",{className:\"space-y-4 text-center md:text-left\",children:[n.jsx(\"p\",{className:\"text-white/70 text-sm font-bold uppercase tracking-widest mb-1\",children:\"Monthly Leftover Cash\"}),n.jsxs(\"h1\",{className:\"text-5xl md:text-6xl font-black tracking-tighter tabular-nums mb-2\",children:[me.netMonthly>=0?\"+\":\"\",$e(me.netMonthly,r),n.jsx(\"span\",{className:\"text-xl text-white/50 ml-2 font-medium italic\",children:\"/month\"})]})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-3 gap-4 w-full md:w-auto\",children:[n.jsxs(\"div\",{className:\"bg-white/10 backdrop-blur-md px-6 py-4 rounded-3xl border border-white/10 text-center\",children:[n.jsx(\"p\",{className:\"text-[10px] uppercase font-bold text-white/60 mb-1\",children:\"Loan EMIs\"}),n.jsxs(\"span\",{className:\"font-bold text-lg text-rose-300\",children:[\"-\",$e(me.loanTotal,r)]})]}),n.jsxs(\"div\",{className:\"bg-white/10 backdrop-blur-md px-6 py-4 rounded-3xl border border-white/10 text-center\",children:[n.jsx(\"p\",{className:\"text-[10px] uppercase font-bold text-white/60 mb-1\",children:\"Subscriptions\"}),n.jsxs(\"span\",{className:\"font-bold text-lg text-indigo-200\",children:[\"-\",$e(me.subTotal,r)]})]}),n.jsxs(\"div\",{className:\"bg-white/10 backdrop-blur-md px-6 py-4 rounded-3xl border border-white/10 text-center\",children:[n.jsx(\"p\",{className:\"text-[10px] uppercase font-bold text-white/60 mb-1\",children:\"Recur. Income\"}),n.jsxs(\"span\",{className:\"font-bold text-lg text-emerald-400\",children:[\"+\",$e(me.incomeTotal,r)]})]})]})]})]}),n.jsxs(\"div\",{className:\"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 sticky top-0 z-30 py-2 bg-slate-950/80 backdrop-blur-md rounded-2xl border border-white/5\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-1.5 h-6 bg-indigo-500 rounded-full shadow-[0_0_15px_rgba(99,102,241,0.5)]\"}),n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-500\",children:\"Commitment Stream\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-2 w-full sm:w-auto\",children:[n.jsxs(Ge,{variant:\"ghost\",size:\"sm\",onClick:fe,disabled:O||c.length===0,className:\"flex-1 sm:flex-initial rounded-xl border border-white/5 hover:bg-slate-900/40 font-bold text-slate-400 hover:text-slate-100 px-4 h-10 text-xs\",children:[n.jsx(Wr,{className:`w-3.5 h-3.5 mr-2 ${O?\"animate-spin\":\"\"}`}),\"Sync\"]}),n.jsxs(Ge,{onClick:()=>M(!0),size:\"sm\",className:\"flex-1 sm:flex-initial bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl px-6 h-10 font-bold shadow-lg shadow-indigo-600/20 transition-all active:scale-95 text-xs\",children:[n.jsx(Nl,{className:\"w-3.5 h-3.5 mr-2\"}),\"Add New\"]})]})]}),c.length>0&&n.jsxs(\"div\",{className:\"px-4\",children:[n.jsxs(\"div\",{className:\"bg-slate-900/40 border border-white/5 rounded-2xl p-4 flex flex-col sm:flex-row sm:items-center justify-between gap-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-10 h-10 bg-indigo-500/10 rounded-xl flex items-center justify-center\",children:n.jsx(bn,{className:\"w-5 h-5 text-indigo-400\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-xs font-black uppercase tracking-widest text-slate-500 mb-0.5\",children:\"Net Monthly Flow\"}),n.jsxs(\"h4\",{className:`text-lg font-black tabular-nums leading-none ${me.netMonthly>=0?\"text-emerald-400\":\"text-rose-400\"}`,children:[me.netMonthly>=0?\"+\":\"\",$e(me.netMonthly,r)]})]})]}),n.jsxs(\"div\",{className:\"flex items-center gap-4 border-t sm:border-t-0 sm:border-l border-white/5 pt-4 sm:pt-0 sm:pl-6\",children:[n.jsxs(\"div\",{className:\"space-y-0.5\",children:[n.jsx(\"p\",{className:\"text-[10px] uppercase font-black text-slate-600\",children:\"Shadow Health\"}),n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsxs(\"span\",{className:`font-black text-lg tabular-nums ${me.healthScore>60?\"text-emerald-400\":me.healthScore>30?\"text-indigo-400\":\"text-rose-400\"}`,children:[Math.round(me.healthScore),\"%\"]}),n.jsx(\"div\",{className:\"px-2 py-0.5 rounded bg-white/5 border border-white/5\",children:n.jsx(\"span\",{className:\"text-[9px] font-black uppercase tracking-tight text-slate-400\",children:me.healthScore>=80?\"Elite\":me.healthScore>=60?\"Strong\":me.healthScore>=40?\"Stable\":me.healthScore>=20?\"Warning\":\"Critical\"})}),n.jsx(\"div\",{className:\"flex gap-0.5 ml-1\",children:[1,2,3,4,5].map(G=>n.jsx(\"div\",{className:`w-1.5 h-3 rounded-full transition-colors duration-500 ${me.healthScore/20>=G?me.healthScore>60?\"bg-emerald-500\":me.healthScore>30?\"bg-indigo-500\":\"bg-rose-500\":\"bg-slate-800\"}`},G))})]})]}),n.jsx(Ge,{variant:\"ghost\",size:\"sm\",onClick:()=>R(!L),className:\"text-indigo-400 hover:text-indigo-300 hover:bg-indigo-500/10 rounded-xl font-bold\",children:L?\"Hide Analysis\":\"Show Analysis\"})]})]}),L&&n.jsxs(\"div\",{className:\"mt-4 animate-in zoom-in-95 duration-300 grid grid-cols-1 md:grid-cols-2 gap-4\",children:[n.jsxs(aa,{className:\"bg-slate-900/40 border-white/5 p-4 rounded-2xl\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 mb-2 opacity-50\",children:[n.jsx(Hu,{className:\"w-4 h-4\"}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-[0.2em]\",children:\"Total Outflow\"})]}),n.jsx(\"p\",{className:\"text-xl font-black text-rose-400\",children:$e(me.totalOutflow,r)})]}),n.jsxs(aa,{className:\"bg-slate-900/40 border-white/5 p-4 rounded-2xl\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 mb-2 opacity-50\",children:[n.jsx(Mb,{className:\"w-4 h-4\"}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-[0.2em]\",children:\"Total Inflow\"})]}),n.jsx(\"p\",{className:\"text-xl font-black text-emerald-400\",children:$e(me.incomeTotal,r)})]})]})]}),n.jsx(\"div\",{className:\"px-4 pb-20 space-y-12\",children:Se.length===0?n.jsxs(aa,{className:\"py-24 text-center bg-slate-800/20 rounded-[40px] border border-dashed border-white/10\",children:[n.jsx(Eu,{className:\"w-20 h-20 mx-auto text-slate-700 mb-6\"}),n.jsx(\"h3\",{className:\"text-2xl font-black text-slate-200 mb-3\",children:\"No Active Commitments\"}),n.jsx(\"p\",{className:\"text-sm text-slate-500 font-bold mb-10 max-w-[320px] mx-auto leading-relaxed\",children:\"Set up your subscriptions, EMIs, and monthly income to unlock deep financial insights.\"}),n.jsxs(Ge,{onClick:()=>M(!0),className:\"bg-indigo-600/10 hover:bg-indigo-600/20 text-indigo-400 border border-indigo-600/20 rounded-2xl px-10 h-14 font-black\",children:[n.jsx(Nl,{className:\"w-5 h-5 mr-3\"}),\"Add First Commitment\"]})]}):n.jsxs(n.Fragment,{children:[Te.incomes.length>0&&n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 border-l-4 border-emerald-500 pl-4 py-1\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100 uppercase tracking-tight\",children:\"Recurring Income\"}),n.jsxs(\"span\",{className:\"bg-emerald-500/10 text-emerald-400 px-2 py-0.5 rounded text-[10px] font-black\",children:[Te.incomes.length,\" SOURCE(S)\"]})]}),n.jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:Te.incomes.map((G,C)=>n.jsx(f,{rec:G},`${G.id}-${C}`))})]}),Te.loans.length>0&&n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 border-l-4 border-rose-500 pl-4 py-1\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100 uppercase tracking-tight\",children:\"Loan EMIs\"}),n.jsxs(\"span\",{className:\"bg-rose-500/10 text-rose-400 px-2 py-0.5 rounded text-[10px] font-black\",children:[Te.loans.length,\" COMMITMENT(S)\"]})]}),n.jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:Te.loans.map((G,C)=>n.jsx(f,{rec:G},`${G.id}-${C}`))})]}),Te.subscriptions.length>0&&n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 border-l-4 border-indigo-500 pl-4 py-1\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100 uppercase tracking-tight\",children:\"Active Subscriptions\"}),n.jsxs(\"span\",{className:\"bg-indigo-500/10 text-indigo-400 px-2 py-0.5 rounded text-[10px] font-black\",children:[Te.subscriptions.length,\" SERVICE(S)\"]})]}),n.jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:Te.subscriptions.map((G,C)=>n.jsx(f,{rec:G},`${G.id}-${C}`))})]}),Te.others.length>0&&n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 border-l-4 border-slate-500 pl-4 py-1\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100 uppercase tracking-tight\",children:\"Other Commitments\"}),n.jsxs(\"span\",{className:\"bg-slate-500/10 text-slate-400 px-2 py-0.5 rounded text-[10px] font-black\",children:[Te.others.length,\" ITEM(S)\"]})]}),n.jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:Te.others.map((G,C)=>n.jsx(f,{rec:G},`${G.id}-${C}`))})]})]})}),n.jsx(Bs,{open:N,onOpenChange:M,children:n.jsxs(Ls,{className:\"max-w-md bg-slate-950 border-white/10 text-white rounded-[32px]\",children:[n.jsxs(qs,{children:[n.jsx(Is,{className:\"text-2xl font-black tracking-tight text-white\",children:P?\"Edit Commitment\":\"Create New Commitment\"}),n.jsx(Vs,{className:\"text-slate-400 font-bold\",children:P?\"Modify existing flow parameters.\":\"Automate your financial shadow-wallets.\"})]}),n.jsxs(\"div\",{className:\"space-y-6 mt-4\",children:[n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{className:`p-4 rounded-2xl border-2 cursor-pointer transition-all ${S.type===\"income\"?\"border-emerald-500 bg-emerald-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>se({...S,type:\"income\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 rounded-xl bg-emerald-500/20 flex items-center justify-center text-xl mb-2\",children:\"💰\"}),n.jsx(\"p\",{className:\"text-xs font-black uppercase text-white\",children:\"Money In\"}),n.jsx(\"p\",{className:\"text-[10px] text-emerald-400 font-bold\",children:\"Salary / Gift\"})]}),n.jsxs(\"div\",{className:`p-4 rounded-2xl border-2 cursor-pointer transition-all ${S.type===\"expense\"?\"border-indigo-500 bg-indigo-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>se({...S,type:\"expense\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 rounded-xl bg-indigo-500/20 flex items-center justify-center text-xl mb-2\",children:\"💸\"}),n.jsx(\"p\",{className:\"text-xs font-black uppercase text-white\",children:\"Money Out\"}),n.jsx(\"p\",{className:\"text-[10px] text-indigo-400 font-bold\",children:\"Rent / Sub\"})]})]}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"div\",{className:\"group\",children:[n.jsx(Re,{htmlFor:\"recurring-name\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block\",children:\"Commitment Name\"}),n.jsx(Pt,{id:\"recurring-name\",name:\"description\",value:S.type===\"expense\"?S.description:S.source,onChange:G=>se({...S,[S.type===\"expense\"?\"description\":\"source\"]:G.target.value}),placeholder:S.type===\"expense\"?\"e.g. Netflix, Rent\":\"e.g. Salary\",className:\"bg-white/5 border-white/5 rounded-xl h-12 focus:ring-indigo-500/50\",autoComplete:\"off\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"recurring-amount\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block\",children:\"Amount\"}),n.jsx(Pt,{id:\"recurring-amount\",name:\"amount\",type:\"number\",value:S.amount,onChange:G=>se({...S,amount:G.target.value}),placeholder:\"0.00\",className:\"bg-white/5 border-white/5 rounded-xl h-12\",autoComplete:\"off\"})]}),n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"recurring-frequency\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block\",children:\"Frequency\"}),n.jsxs(ha,{value:S.frequency,onValueChange:G=>se({...S,frequency:G}),children:[n.jsx(ga,{id:\"recurring-frequency\",name:\"frequency\",className:\"bg-white/5 border-white/5 rounded-xl h-12\",children:n.jsx(pa,{})}),n.jsxs(xa,{className:\"bg-slate-900 border-white/10 text-white\",children:[n.jsx(vt,{value:\"monthly\",children:\"Monthly\"}),n.jsx(vt,{value:\"weekly\",children:\"Weekly\"}),n.jsx(vt,{value:\"daily\",children:\"Daily\"}),n.jsx(vt,{value:\"yearly\",children:\"Yearly\"})]})]})]})]}),n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"recurring-account\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block\",children:\"Funding Wallet\"}),n.jsxs(ha,{value:S.accountId,onValueChange:G=>se({...S,accountId:G}),children:[n.jsx(ga,{id:\"recurring-account\",name:\"accountId\",className:\"bg-white/5 border-white/5 rounded-xl h-12\",children:n.jsx(pa,{placeholder:\"Target Account\"})}),n.jsx(xa,{className:\"bg-slate-900 border-white/10 text-white\",children:i.map(G=>n.jsxs(vt,{value:G.id,children:[G.icon,\" \",G.name]},G.id))})]})]}),S.type===\"expense\"&&n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"recurring-category\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block\",children:\"Category\"}),n.jsxs(ha,{value:S.category,onValueChange:G=>se({...S,category:G}),children:[n.jsx(ga,{id:\"recurring-category\",name:\"category\",className:\"bg-white/5 border-white/5 rounded-xl h-12\",children:n.jsx(pa,{placeholder:\"Purpose\"})}),n.jsx(xa,{className:\"bg-slate-900 border-white/10 text-white max-h-[200px]\",children:pp.map(G=>n.jsxs(vt,{value:G.value,children:[G.emoji,\" \",G.value]},G.value))})]})]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"recurring-start-date\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block\",children:\"Start Date\"}),n.jsx(Pt,{id:\"recurring-start-date\",name:\"startDate\",type:\"date\",value:S.startDate,onChange:G=>se({...S,startDate:G.target.value}),className:\"bg-white/5 border-white/5 rounded-xl h-12 text-xs\",autoComplete:\"off\"})]}),n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"recurring-end-date\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2 block\",children:\"End Date (Optional)\"}),n.jsx(Pt,{id:\"recurring-end-date\",name:\"endDate\",type:\"date\",value:S.endDate,onChange:G=>se({...S,endDate:G.target.value}),className:\"bg-white/5 border-white/5 rounded-xl h-12\",autoComplete:\"off\"})]})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4 relative z-10\",children:[n.jsx(Ge,{variant:\"ghost\",onClick:()=>M(!1),className:\"flex-1 rounded-2xl h-14 font-black text-slate-500 hover:bg-white/5\",children:\"Discard\"}),n.jsx(Ge,{onClick:he,className:\"flex-1 bg-indigo-600 hover:bg-indigo-500 text-white rounded-2xl h-14 font-black shadow-lg shadow-indigo-600/20\",disabled:!S.amount||!S.description&&!S.source||!S.accountId||S.type===\"expense\"&&!S.category,children:P?\"Update Flow\":\"Activate Flow\"})]})]})]})})]})]})}const fj=({isVisible:i,onNotificationClick:r,onSettingsClick:c,notificationCount:u=0})=>n.jsxs(\"header\",{className:`nav-bar fixed top-0 w-full h-16 flex items-center justify-between px-6 border-b border-white/5 transition-transform duration-300 ease-in-out z-[100] ${i?\"translate-y-0\":\"-translate-y-full\"}`,children:[n.jsx(\"button\",{onClick:c,\"aria-label\":\"User Settings\",className:\"w-10 h-10 sq-md bg-black border border-white/5 flex items-center justify-center hover:bg-white/5 transition-colors\",children:n.jsx(Mu,{className:\"w-5 h-5 text-slate-400\"})}),n.jsxs(\"div\",{className:\"flex flex-col items-center\",children:[n.jsx(\"img\",{src:\"/images/logo-dark.png\",alt:\"FinHub\",className:\"h-8 w-auto hidden dark:block\"}),n.jsx(\"img\",{src:\"/images/logo-light.png\",alt:\"FinHub\",className:\"h-8 w-auto block dark:hidden\"})]}),n.jsx(\"button\",{onClick:r,\"aria-label\":\"Notifications\",className:\"w-10 h-10 flex items-center justify-center text-slate-400 hover:text-white transition-colors relative\",children:n.jsxs(\"div\",{className:\"relative\",children:[n.jsx(Gu,{className:\"w-5 h-5\"}),u>0&&n.jsx(\"span\",{className:\"absolute top-0 right-0 w-2 h-2 bg-[#FF453A] sq-full ring-2 ring-black\"})]})})]}),mj=({isVisible:i,activeTab:r,onTabChange:c})=>n.jsxs(\"nav\",{className:`nav-bar fixed bottom-0 w-full h-20 flex items-center justify-around px-4 border-t border-white/5 transition-transform duration-300 ease-in-out z-[100] ${i?\"translate-y-0\":\"translate-y-full\"}`,children:[n.jsxs(\"div\",{className:`flex flex-col items-center relative py-4 cursor-pointer transition-colors ${r===\"dashboard\"?\"text-[#0A84FF]\":\"text-[#8E8E93] hover:text-white\"}`,onClick:()=>c(\"dashboard\"),children:[r===\"dashboard\"&&n.jsx(\"div\",{className:\"absolute top-0 w-8 h-0.5 bg-[#0A84FF] shadow-[0_0_15px_#0A84FF] rounded-full\"}),n.jsx(Rb,{className:\"w-6 h-6\"}),n.jsx(\"span\",{className:\"text-[9px] font-black uppercase mt-2 tracking-[0.3em]\",children:\"Home\"})]}),n.jsxs(\"div\",{className:`flex flex-col items-center transition-all cursor-pointer ${r===\"transactions\"?\"text-[#0A84FF]\":\"text-[#8E8E93] hover:text-white\"}`,onClick:()=>c(\"transactions\"),children:[n.jsx(Ob,{className:\"w-6 h-6\"}),n.jsx(\"span\",{className:\"text-[9px] font-black uppercase mt-2 tracking-[0.3em]\",children:\"History\"})]}),n.jsxs(\"div\",{className:`flex flex-col items-center transition-all cursor-pointer ${r===\"liability\"?\"text-[#0A84FF]\":\"text-[#8E8E93] hover:text-white\"}`,onClick:()=>c(\"liability\"),children:[n.jsx(ep,{className:\"w-6 h-6\"}),n.jsx(\"span\",{className:\"text-[9px] font-black uppercase mt-2 tracking-[0.3em]\",children:\"Bills\"})]}),n.jsxs(\"div\",{className:`flex flex-col items-center transition-all cursor-pointer ${r===\"investments\"?\"text-[#0A84FF]\":\"text-[#8E8E93] hover:text-white\"}`,onClick:()=>c(\"investments\"),children:[n.jsx(_b,{className:\"w-6 h-6\"}),n.jsx(\"span\",{className:\"text-[9px] font-black uppercase mt-2 tracking-[0.3em]\",children:\"Growth\"})]}),n.jsxs(\"div\",{className:`flex flex-col items-center transition-all cursor-pointer ${r===\"goals\"?\"text-[#0A84FF]\":\"text-[#8E8E93] hover:text-white\"}`,onClick:()=>c(\"goals\"),children:[n.jsx(_s,{className:\"w-6 h-6\"}),n.jsx(\"span\",{className:\"text-[9px] font-black uppercase mt-2 tracking-[0.3em]\",children:\"Goals\"})]}),n.jsxs(\"div\",{className:`flex flex-col items-center transition-all cursor-pointer ${r===\"more\"?\"text-[#0A84FF]\":\"text-[#8E8E93] hover:text-white\"}`,onClick:()=>c(\"more\"),children:[n.jsx(Ub,{className:\"w-6 h-6\"}),n.jsx(\"span\",{className:\"text-[9px] font-black uppercase mt-2 tracking-[0.3em]\",children:\"More\"})]})]}),hj=({children:i,activeTab:r,onTabChange:c,notificationCount:u,onNotificationClick:m,onSettingsClick:g,renderFab:h,forceHide:y=!1})=>{const[p,x]=A.useState(!0),v=A.useRef(0),f=20,N=p&&!y;return A.useEffect(()=>{const M=()=>{if(y)return;const O=window.scrollY;if(O<10){x(!0),v.current=O;return}const B=O-v.current;Math.abs(B)>f&&(B>0?x(!1):x(!0),v.current=O)};return window.addEventListener(\"scroll\",M,{passive:!0}),()=>window.removeEventListener(\"scroll\",M)},[y]),n.jsxs(\"div\",{className:\"min-h-screen bg-bg-primary text-text-primary\",children:[n.jsx(fj,{isVisible:N,notificationCount:u,onNotificationClick:m,onSettingsClick:g}),n.jsx(\"main\",{className:\"pt-[80px] pb-[140px] px-4 w-full md:max-w-3xl lg:max-w-5xl mx-auto min-h-screen\",children:i}),n.jsx(mj,{isVisible:N,activeTab:r,onTabChange:c}),h&&h(N)]})},Os=A.forwardRef(({value:i,onChange:r,allowDecimals:c=!0,maxDecimals:u=2,className:m,...g},h)=>{const[y,p]=A.useState(\"\");A.useEffect(()=>{if(i===\"\"||i===void 0||i===null)p(\"\");else{const f=i.toString();p(yu(f))}},[i]);const x=f=>{let N=f.target.value;const M=Wh(N);if(o1(M)&&!(!c&&M.includes(\".\"))){if(c&&M.includes(\".\")){const O=M.split(\".\");if(O[1]&&O[1].length>u)return}p(yu(M)),r(M)}},v=f=>{const N=Wh(y);N&&p(yu(N)),g.onBlur&&g.onBlur(f)};return n.jsx(Pt,{...g,ref:h,type:\"text\",inputMode:\"decimal\",value:y,onChange:x,onBlur:v,className:m})});Os.displayName=\"NumberInput\";const pj=Y0(\"inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden\",{variants:{variant:{default:\"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90\",secondary:\"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90\",destructive:\"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",outline:\"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground\"}},defaultVariants:{variant:\"default\"}});function B0({className:i,variant:r,asChild:c=!1,...u}){const m=c?G0:\"span\";return n.jsx(m,{\"data-slot\":\"badge\",className:ct(pj({variant:r}),i),...u})}const gj=i=>{if(i.category?.toLowerCase().includes(\"transfer\"))return!0;const r=(i.description||i.source||\"\").toLowerCase();return!!(r.includes(\"transfer\")||r.includes(\"payment\")||r.includes(\"cc bill\")||r.includes(\"credit card bill\")||r.includes(\"migration\")||i.tags&&Array.isArray(i.tags)&&i.tags.some(c=>c.toLowerCase()===\"transfer\"||c.toLowerCase()===\"internal\"))};function ku({className:i,...r}){return n.jsx(Bb,{\"data-slot\":\"checkbox\",className:ct(\"peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50\",i),...r,children:n.jsx(Lb,{\"data-slot\":\"checkbox-indicator\",className:\"flex items-center justify-center text-current transition-none\",children:n.jsx(F0,{className:\"size-3.5\"})})})}const xj=({isOpen:i,onClose:r,type:c,onSubmit:u,initialData:m,accounts:g,currency:h,roundUpEnabled:y=!0})=>{const[p,x]=A.useState({description:\"\",amount:\"\",category:\"\",source:\"\",personName:\"\",debtType:\"borrowed\",accountId:\"\",date:new Date().toISOString().split(\"T\")[0],tags:[],isRecurring:!1,frequency:\"monthly\",endDate:\"\",isIncomeGenerating:!1,justification:\"\",debtDueDate:\"\"}),[v,f]=A.useState(\"\"),[N,M]=A.useState(null),[O,B]=A.useState([]),[L,R]=A.useState(void 0),[P,V]=A.useState(void 0);A.useEffect(()=>{i&&(m?x({description:m.description||\"\",amount:m.amount?.toString()||\"\",category:m.category||\"\",source:m.source||\"\",personName:m.personName||\"\",debtType:m.type||\"borrowed\",accountId:m.accountId||\"\",date:m.date||new Date().toISOString().split(\"T\")[0],tags:m.tags||[],isRecurring:m.isRecurring||!1,frequency:m.frequency||\"monthly\",endDate:m.endDate||\"\",isIncomeGenerating:m.isIncomeGenerating||!1,justification:m.justification||\"\",debtDueDate:m.dueDate||\"\"}):g.length>0&&!p.accountId&&x(ee=>({...ee,accountId:g[0].id})))},[i,m,g,p.accountId]),A.useEffect(()=>{const ee=c===\"expense\"||c===\"income\"?p.description:p.personName;if(ee.length>2&&!m){const me=Yr(ee);me?(M(me.category),B(me.tags),R(me.suggestedAmount),V(me.suggestedDescription)):(M(null),B([]),R(void 0),V(void 0))}},[p.description,p.personName,c,m]);const S=ee=>{if(ee.preventDefault(),!p.accountId&&g.length>0){alert(\"Please select an account\");return}let me={amount:parseFloat(p.amount),date:p.date,tags:p.tags,accountId:p.accountId||(g.length>0?g[0].id:\"\"),isRecurring:p.isRecurring,frequency:p.frequency,customIntervalDays:p.customIntervalDays,startDate:p.date,endDate:p.endDate||void 0,isIncomeGenerating:p.isIncomeGenerating,justification:p.justification};c===\"expense\"?me={...me,description:p.description,category:p.category,roundUpAmount:p.roundUpAmount}:c===\"income\"?me={...me,source:p.description}:c===\"debt\"&&(me={...me,personName:p.personName,type:p.debtType,dueDate:p.debtDueDate||void 0});const G=g.find(C=>C.id===p.accountId);c===\"expense\"&&G?.type===\"credit_card\"&&gj({description:p.description,category:p.category})&&(me.category=\"Transfer\"),u(me),se()},se=()=>{x({description:\"\",amount:\"\",category:\"\",source:\"\",personName:\"\",debtType:\"borrowed\",accountId:g.length>0?g[0].id:\"\",date:new Date().toISOString().split(\"T\")[0],tags:[],isRecurring:!1,frequency:\"monthly\",endDate:\"\",isIncomeGenerating:!1,justification:\"\",debtDueDate:\"\"}),f(\"\"),M(null),B([]),R(void 0),V(void 0),r()},he=()=>{v.trim()&&!p.tags.includes(v.trim())&&(x({...p,tags:[...p.tags,v.trim()]}),f(\"\"))},ve=ee=>{if(ee.includes(\",\")){const me=ee.split(\",\").map(G=>G.trim()).filter(G=>G&&!p.tags.includes(G));me.length>0&&(x({...p,tags:[...p.tags,...me]}),f(\"\"))}else f(ee)},fe=ee=>{x({...p,tags:p.tags.filter(me=>me!==ee)})},ye=()=>{N&&(x(ee=>({...ee,category:N,tags:[...new Set([...ee.tags,...O])],amount:L&&!ee.amount?L.toString():ee.amount,description:P||ee.description,isRecurring:N===\"Subscription\"?!0:ee.isRecurring,frequency:N===\"Subscription\"?\"monthly\":ee.frequency})),M(null),B([]),R(void 0),V(void 0))},Se=async()=>{if(\"contacts\"in navigator&&\"ContactsManager\"in window)try{const ee=[\"name\"],me={multiple:!1},G=await navigator.contacts.select(ee,me);if(G.length>0&&G[0].name?.length>0){const C=G[0].name[0];x(Y=>({...Y,personName:C})),window.navigator.vibrate&&window.navigator.vibrate(20)}}catch(ee){console.error(\"Contact picker error:\",ee)}else alert(\"Contact Selection is only available on supported mobile browsers.\")},qe=[100,500,1e3,5e3],Te=ee=>{const G=(p.amount||\"0\")+\"0\".repeat(ee);x({...p,amount:G})};return n.jsx(Bs,{open:i,onOpenChange:se,children:n.jsxs(Ls,{className:\"max-w-md max-h-[90vh] overflow-y-auto bg-black border-white/5 p-0 shadow-2xl custom-scrollbar sq-2xl\",children:[n.jsxs(\"div\",{className:`px-8 pt-10 pb-8 border-b border-white/5 relative overflow-hidden ${c===\"expense\"?\"bg-rose-500/5\":c===\"income\"?\"bg-emerald-500/5\":\"bg-yellow-500/5\"}`,children:[n.jsx(\"div\",{className:`absolute top-0 right-0 w-32 h-32 blur-[60px] opacity-20 -mr-16 -mt-16 ${c===\"expense\"?\"bg-rose-500\":c===\"income\"?\"bg-emerald-500\":\"bg-yellow-500\"}`}),n.jsxs(qs,{className:\"relative z-10\",children:[n.jsxs(Is,{className:\"text-2xl font-black tracking-tighter text-slate-100\",children:[m?\"Update\":\"Add\",\" \",c===\"expense\"?\"Money Out\":c===\"income\"?\"Money In\":\"Personal IOU\"]}),n.jsx(Vs,{className:\"text-slate-500 font-bold text-[10px] uppercase tracking-[0.2em] mt-1\",children:c===\"debt\"?\"Protocol for personal liquidity exchange\":`Recording ${c===\"expense\"?\"capital depletion\":\"capital injection\"} event`})]})]}),n.jsx(\"div\",{className:\"p-8\",children:n.jsxs(\"form\",{onSubmit:S,className:\"space-y-6\",children:[g.length>0?n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(Re,{htmlFor:\"transaction-account\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Account Reservoir\"}),n.jsxs(ha,{value:p.accountId,onValueChange:ee=>x({...p,accountId:ee}),children:[n.jsx(ga,{id:\"transaction-account\",name:\"accountId\",className:\"h-12 bg-black border-white/5 sq-md focus:ring-1 focus:ring-white/10 text-slate-200 font-bold\",children:n.jsx(pa,{placeholder:\"Select account\"})}),n.jsx(xa,{className:\"bg-black border-white/5\",children:g.map(ee=>n.jsx(vt,{value:ee.id,className:\"focus:bg-white/5 focus:text-white\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between w-full\",children:[n.jsx(\"span\",{className:\"font-bold\",children:ee.name}),n.jsx(\"span\",{className:\"text-[10px] text-slate-500 ml-4 font-mono\",children:$e(ee.balance,h)})]})},ee.id))})]})]}):n.jsx(\"div\",{className:\"p-4 bg-amber-500/10 border border-amber-500/20 sq-md text-[10px] font-black uppercase tracking-widest text-amber-400\",children:\"⚠️ Protocol Failure: No accounts detected\"}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(Re,{htmlFor:\"transaction-description\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:c===\"expense\"?\"Description\":c===\"income\"?\"Source\":\"Person Name\"}),n.jsxs(\"div\",{className:\"flex gap-2\",children:[n.jsx(Pt,{id:\"transaction-description\",name:\"description\",value:c===\"debt\"?p.personName:p.description,onChange:ee=>x({...p,[c===\"debt\"?\"personName\":\"description\"]:ee.target.value}),placeholder:c===\"expense\"?\"Starbucks Coffee, Netflix...\":c===\"income\"?\"Salary, Freelance...\":\"John Doe\",required:!0,className:\"h-12 bg-black border-white/5 sq-md focus:border-white/10 text-slate-200 font-bold placeholder:text-slate-600 flex-1\",autoComplete:\"off\"}),c===\"debt\"&&n.jsx(Ge,{type:\"button\",variant:\"ghost\",onClick:Se,className:\"h-12 w-12 bg-white/5 border border-white/5 sq-md flex items-center justify-center p-0 text-slate-400 hover:text-white\",title:\"Select from Contacts\",children:n.jsx(tp,{className:\"w-5 h-5\"})})]}),N&&n.jsxs(\"div\",{className:\"mt-3 p-4 bg-indigo-500/5 border border-indigo-500/10 sq-md flex items-start gap-3 animate-in fade-in zoom-in-95 duration-300\",children:[n.jsx(bn,{className:\"w-4 h-4 text-indigo-400 mt-0.5 flex-shrink-0\"}),n.jsxs(\"div\",{className:\"flex-1\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-widest text-indigo-300 leading-tight\",children:\"Intelligence Suggested\"}),n.jsxs(\"div\",{className:\"text-xs text-slate-400 mt-1 font-bold\",children:[c===\"expense\"&&n.jsxs(\"div\",{className:\"flex flex-col gap-1\",children:[n.jsxs(\"div\",{children:[\"Category: \",n.jsx(\"span\",{className:\"text-slate-100 uppercase\",children:N})]}),L&&n.jsxs(\"div\",{children:[\"Detected Amount: \",n.jsx(\"span\",{className:\"text-emerald-400\",children:$e(L,h)})]})]}),O.length>0&&n.jsxs(\"div\",{className:\"mt-1\",children:[\"Tags: \",n.jsx(\"span\",{className:\"text-slate-100\",children:O.join(\", \")})]})]}),n.jsx(Ge,{type:\"button\",size:\"sm\",variant:\"ghost\",onClick:ye,className:\"mt-3 h-8 bg-indigo-500/10 text-indigo-300 hover:bg-indigo-500/20 sq-sm text-[10px] font-black uppercase tracking-widest w-full\",children:\"Auto-Configure Form\"})]})]})]}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(Re,{htmlFor:\"transaction-amount\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Capital Value\"}),n.jsxs(\"div\",{className:\"flex gap-2\",children:[n.jsx(Os,{id:\"transaction-amount\",name:\"amount\",value:p.amount,onChange:ee=>x({...p,amount:ee}),placeholder:\"0.00\",step:\"any\",min:\"0\",required:!0,className:\"flex-1 h-14 bg-black border-white/5 sq-md focus:border-white/10 text-xl font-black text-slate-100 placeholder:text-slate-800\",autoComplete:\"off\"}),n.jsxs(\"div\",{className:\"flex flex-col gap-1\",children:[n.jsx(Ge,{type:\"button\",variant:\"ghost\",size:\"sm\",onClick:()=>Te(2),className:\"px-3 h-[25px] bg-white/5 text-[10px] font-black text-slate-400 hover:text-white sq-sm border border-white/5\",title:\"Add 00\",children:\"+00\"}),n.jsx(Ge,{type:\"button\",variant:\"ghost\",size:\"sm\",onClick:()=>Te(3),className:\"px-3 h-[25px] bg-white/5 text-[10px] font-black text-slate-400 hover:text-white sq-sm border border-white/5\",title:\"Add 000\",children:\"+000\"})]})]}),n.jsx(\"div\",{className:\"flex gap-2 mt-3\",children:qe.map(ee=>n.jsx(\"button\",{type:\"button\",onClick:()=>x({...p,amount:ee.toString()}),className:\"flex-1 py-2 text-[10px] font-black bg-black border border-white/5 text-slate-500 sq-md hover:bg-white/5 hover:text-slate-200 transition-all uppercase tracking-widest\",children:ee},ee))}),y&&c===\"expense\"&&p.amount&&parseFloat(p.amount)>0&&(()=>{const ee=parseFloat(p.amount),me=ee<100?Math.ceil(ee/10)*10:Math.ceil(ee/100)*100,G=me-ee;return G>0&&G>=1?n.jsxs(\"div\",{className:\"flex items-center space-x-3 mt-4 p-4 bg-indigo-500/5 border border-indigo-500/10 sq-md animate-in fade-in duration-500\",children:[n.jsx(ku,{id:\"roundUp\",name:\"roundUp\",className:\"border-white/20 data-[state=checked]:bg-indigo-500 data-[state=checked]:border-indigo-500\",onCheckedChange:C=>{x(Y=>({...Y,roundUpAmount:C?G:void 0}))}}),n.jsxs(\"div\",{className:\"grid gap-1.5 leading-none\",children:[n.jsxs(Re,{htmlFor:\"roundUp\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-100 flex items-center gap-2 cursor-pointer\",children:[n.jsx(Si,{className:\"w-3 h-3 text-indigo-400\"}),\"Reserve \",$e(G,h),\" to Goals\"]}),n.jsxs(\"p\",{className:\"text-[9px] font-bold text-slate-500 uppercase tracking-tighter\",children:[\"Round up capital to nearest 100 (\",$e(me,h),\")\"]})]})]}):null})()]}),c===\"expense\"&&n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(Re,{htmlFor:\"transaction-category\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Spending Domain\"}),n.jsxs(ha,{value:p.category,onValueChange:ee=>{x(me=>({...me,category:ee,isRecurring:ee===\"Subscription\"?!0:me.isRecurring,frequency:ee===\"Subscription\"?\"monthly\":me.frequency}))},children:[n.jsx(ga,{id:\"transaction-category\",name:\"category\",className:\"h-12 bg-black border-white/5 sq-md focus:ring-1 focus:ring-white/10 text-slate-200 font-bold\",children:n.jsx(pa,{placeholder:\"Select domain\"})}),n.jsx(xa,{className:\"bg-black border-white/5 max-h-[300px]\",children:Dv.map(ee=>n.jsxs(vt,{value:ee.value,className:\"focus:bg-white/5 focus:text-white\",children:[n.jsx(\"span\",{className:\"mr-2\",children:ee.emoji}),n.jsx(\"span\",{className:\"font-bold\",children:ee.value})]},ee.value))})]})]}),(()=>{const ee=g.find(z=>z.id===p.accountId);if(ee?.type!==\"credit_card\"||c!==\"expense\")return null;const me=ee.creditLimit||0,G=me*(ee.safeLimitPercentage||30)/100,C=Math.abs(ee.balance),Y=parseFloat(p.amount||\"0\"),ge=C+Y>G&&me>0;return n.jsxs(\"div\",{className:\"space-y-4 p-4 bg-black border border-white/5 sq-md animate-in slide-in-from-top-2 duration-300\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsx(Re,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500\",children:\"Credit Protocol\"}),ge&&n.jsx(B0,{variant:\"destructive\",className:\"bg-rose-500/10 text-rose-400 border-rose-500/20 text-[8px] font-black uppercase\",children:\"Limit Breach Risk\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(ku,{id:\"incomeGenerating\",name:\"isIncomeGenerating\",checked:p.isIncomeGenerating,onCheckedChange:z=>x(T=>({...T,isIncomeGenerating:!!z}))}),n.jsx(Re,{htmlFor:\"incomeGenerating\",className:\"text-xs font-bold text-slate-300 cursor-pointer\",children:\"This expense generates additional income\"})]}),ge&&!p.isIncomeGenerating&&n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(Re,{htmlFor:\"justification\",className:\"text-[9px] font-black uppercase tracking-widest text-rose-400\",children:\"Security Justification Required\"}),n.jsx(Pt,{id:\"justification\",name:\"justification\",placeholder:\"Why is this credit use essential?\",value:p.justification,onChange:z=>x(T=>({...T,justification:z.target.value})),className:\"bg-white/5 border-rose-500/20 focus:border-rose-500/50 sq-md h-12 text-sm\",required:ge,autoComplete:\"off\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase leading-relaxed\",children:\"Strategic credit use is prohibited beyond the safe threshold unless it manifests capital growth.\"})]})]})})(),c===\"debt\"&&n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(Re,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Asset Direction\"}),n.jsxs(\"div\",{className:\"flex gap-2 p-1.5 bg-black border border-white/5 sq-md\",children:[n.jsx(\"button\",{type:\"button\",onClick:()=>x({...p,debtType:\"lent\"}),className:`flex-1 py-3 px-4 sq-md text-[10px] font-black uppercase tracking-widest transition-all ${p.debtType===\"lent\"?\"bg-emerald-600 text-white shadow-lg\":\"text-slate-500 hover:text-slate-200 hover:bg-white/5\"} `,children:\"I Lent Capital\"}),n.jsx(\"button\",{type:\"button\",onClick:()=>x({...p,debtType:\"borrowed\"}),className:`flex-1 py-3 px-4 sq-md text-[10px] font-black uppercase tracking-widest transition-all ${p.debtType===\"borrowed\"?\"bg-rose-600 text-white shadow-lg\":\"text-slate-500 hover:text-slate-200 hover:bg-white/5\"} `,children:\"I Borrowed\"})]})]}),c===\"debt\"&&n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(Re,{htmlFor:\"debt-due-date\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Repayment Date (Optional)\"}),n.jsx(Pt,{id:\"debt-due-date\",name:\"debtDueDate\",type:\"date\",value:p.debtDueDate,onChange:ee=>x({...p,debtDueDate:ee.target.value}),className:\"h-12 bg-black border-white/5 sq-md focus:border-white/10 text-slate-200 font-bold\"})]}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(Re,{htmlFor:\"transaction-date\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Event Timestamp\"}),n.jsx(Pt,{id:\"transaction-date\",name:\"date\",type:\"date\",value:p.date,onChange:ee=>x({...p,date:ee.target.value}),required:!0,className:\"h-12 bg-black border-white/5 sq-md focus:border-white/10 text-slate-200 font-bold\"})]}),n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(Re,{htmlFor:\"transaction-tags\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Protocol Tags\"}),n.jsxs(\"div\",{className:\"flex gap-2\",children:[n.jsx(Pt,{id:\"transaction-tags\",name:\"tags\",value:v,onChange:ee=>ve(ee.target.value),onKeyPress:ee=>ee.key===\"Enter\"&&(ee.preventDefault(),he()),placeholder:\"urgent, recurring, etc...\",autoComplete:\"off\",className:\"h-12 bg-black border-white/5 sq-md focus:border-white/10 text-slate-200 font-bold placeholder:text-slate-800\"}),n.jsx(Ge,{type:\"button\",onClick:he,variant:\"ghost\",size:\"sm\",className:\"h-12 px-6 bg-white/5 text-[10px] font-black uppercase tracking-widest text-slate-400 hover:text-white sq-md border border-white/5\",children:\"Index\"})]}),p.tags.length>0&&n.jsx(\"div\",{className:\"flex flex-wrap gap-2 mt-2\",children:p.tags.map(ee=>n.jsxs(B0,{variant:\"secondary\",className:\"gap-2 bg-black border border-white/5 text-slate-300 font-bold px-3 py-1 sq-sm\",children:[\"#\",ee,n.jsx(\"button\",{type:\"button\",onClick:()=>fe(ee),\"aria-label\":`Remove tag ${ee}`,className:\"hover:text-rose-400 transition-colors\",children:n.jsx(Tl,{className:\"w-3 h-3\"})})]},ee))})]}),n.jsxs(\"div\",{className:\"flex items-center gap-3 p-4 bg-black border border-white/5 sq-md group\",children:[n.jsx(ku,{id:\"recurring\",name:\"isRecurring\",checked:p.isRecurring,onCheckedChange:ee=>x({...p,isRecurring:!!ee}),className:\"border-white/20 data-[state=checked]:bg-indigo-500 data-[state=checked]:border-indigo-500\"}),n.jsx(Re,{htmlFor:\"recurring\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-100 cursor-pointer\",children:\"Cyclical Routine Entry\"})]}),p.isRecurring&&n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4 mt-4\",children:[n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(Re,{htmlFor:\"transaction-frequency\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Period\"}),n.jsxs(ha,{value:p.frequency,onValueChange:ee=>x({...p,frequency:ee}),children:[n.jsx(ga,{id:\"transaction-frequency\",name:\"frequency\",className:\"bg-black border-white/5 h-12 sq-md text-slate-200 font-bold\",children:n.jsx(pa,{})}),n.jsxs(xa,{className:\"bg-black border-white/5\",children:[n.jsx(vt,{value:\"daily\",children:\"Daily\"}),n.jsx(vt,{value:\"weekly\",children:\"Weekly\"}),n.jsx(vt,{value:\"monthly\",children:\"Monthly\"}),n.jsx(vt,{value:\"yearly\",children:\"Yearly\"}),n.jsx(vt,{value:\"custom\",children:\"Custom\"})]})]})]}),p.frequency===\"custom\"?n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(Re,{htmlFor:\"transaction-interval\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Days Interval\"}),n.jsx(Os,{id:\"transaction-interval\",name:\"customIntervalDays\",value:p.customIntervalDays||\"\",onChange:ee=>x({...p,customIntervalDays:parseInt(ee)}),placeholder:\"e.g. 45\",min:\"1\",className:\"bg-black border-white/5 h-12 sq-md text-slate-200 font-bold\"})]}):n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(Re,{htmlFor:\"transaction-end-date\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Termination\"}),n.jsx(Pt,{id:\"transaction-end-date\",name:\"endDate\",type:\"date\",value:p.endDate,onChange:ee=>x({...p,endDate:ee.target.value}),className:\"bg-black border-white/5 h-12 sq-md text-slate-200 font-bold\"})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-6\",children:[n.jsx(Ge,{type:\"button\",variant:\"ghost\",onClick:se,className:\"flex-1 h-14 sq-md text-[10px] font-black uppercase tracking-widest text-slate-500 hover:text-slate-100 hover:bg-white/5 border border-white/5\",children:\"Abort\"}),n.jsx(Ge,{type:\"submit\",className:`flex-1 h-14 sq-md text-[10px] font-black uppercase tracking-widest shadow-xl active:scale-[0.98] transition-all ${c===\"expense\"?\"bg-rose-600 hover:bg-rose-500 shadow-rose-900/20\":c===\"income\"?\"bg-emerald-600 hover:bg-emerald-500 shadow-emerald-900/20\":\"bg-yellow-600 hover:bg-yellow-500 shadow-yellow-900/20\"}`,disabled:g.length===0,children:m?\"Update Matrix\":\"Record Transaction\"})]})]})})]})})},bj=({isOpen:i,onClose:r,onConfirm:c,expenseAmount:u,roundedAmount:m,currency:g,goals:h,onMute:y})=>{const[p,x]=A.useState(\"emergency\"),[v,f]=A.useState(\"\"),N=m-u,M=()=>{if(p===\"goal\"&&h.length>0&&!v){J.error(\"Please select a goal to save into.\");return}c(p===\"goal\"?v:\"emergency\",p)};return n.jsx(Bs,{open:i,onOpenChange:r,children:n.jsxs(Ls,{className:\"sm:max-w-md max-h-[90vh] overflow-y-auto bg-slate-950 border-white/5 p-0 shadow-2xl custom-scrollbar\",children:[n.jsxs(\"div\",{className:\"px-8 pt-10 pb-8 border-b border-white/5 relative overflow-hidden bg-emerald-500/5\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 bg-emerald-500 blur-[80px] opacity-20 -mr-16 -mt-16\"}),n.jsxs(qs,{className:\"relative z-10\",children:[n.jsxs(Is,{className:\"flex items-center gap-3 text-2xl font-black tracking-tighter text-slate-100\",children:[n.jsx(qb,{className:\"w-7 h-7 text-emerald-500\"}),\"Wealth Multiplier\"]}),n.jsx(Vs,{className:\"text-slate-500 font-bold text-[10px] uppercase tracking-[0.2em] mt-1\",children:\"System detected idle capital in transaction\"})]})]}),n.jsxs(\"div\",{className:\"p-8 space-y-8\",children:[n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"p\",{className:\"text-sm font-bold text-slate-300 leading-relaxed text-center px-4\",children:[\"Transaction of \",n.jsx(\"span\",{className:\"text-slate-100\",children:$e(u,g)}),\" processed. Initialize round-up to \",n.jsx(\"span\",{className:\"text-emerald-400\",children:$e(m,g)}),\"?\"]}),n.jsxs(\"div\",{className:\"flex flex-col items-center justify-center py-8 bg-slate-900 border border-white/5 rounded-[32px] relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute inset-0 bg-emerald-500/5 opacity-0 group-hover:opacity-100 transition-opacity\"}),n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-emerald-500 mb-1\",children:\"Leftover Cash\"}),n.jsx(\"p\",{className:\"text-5xl font-black text-white tracking-tighter\",children:$e(N,g)})]})]}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(Re,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Asset Allocation Target\"}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"button\",{type:\"button\",onClick:()=>x(\"emergency\"),className:`p-5 rounded-3xl border transition-all duration-300 flex flex-col items-center gap-3 ${p===\"emergency\"?\"bg-emerald-600 border-emerald-500 text-white shadow-lg shadow-emerald-900/40\":\"bg-slate-900 border-white/5 text-slate-500 hover:text-slate-300 hover:bg-white/5\"}`,children:[n.jsx(Ib,{className:`w-6 h-6 ${p===\"emergency\"?\"text-white\":\"text-slate-500\"}`}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest\",children:\"Stability\"})]}),n.jsxs(\"button\",{type:\"button\",onClick:()=>{x(\"goal\"),h.length>0&&!v&&f(h[0].id)},className:`p-5 rounded-3xl border transition-all duration-300 flex flex-col items-center gap-3 ${p===\"goal\"?\"bg-indigo-600 border-indigo-500 text-white shadow-lg shadow-indigo-900/40\":\"bg-slate-900 border-white/5 text-slate-500 hover:text-slate-300 hover:bg-white/5\"}`,children:[n.jsx(Vb,{className:`w-6 h-6 ${p===\"goal\"?\"text-white\":\"text-slate-500\"}`}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest\",children:\"Growth\"})]})]}),p===\"goal\"&&h.length>0&&n.jsx(\"div\",{className:\"mt-4 animate-in slide-in-from-top-2 duration-300\",children:n.jsxs(ha,{value:v,onValueChange:f,children:[n.jsx(ga,{id:\"round-up-goal-select\",name:\"goalId\",className:\"h-12 bg-slate-900 border-white/5 rounded-2xl text-slate-200 font-bold focus:ring-1 focus:ring-white/10\",children:n.jsx(pa,{placeholder:\"Select Growth Target\"})}),n.jsx(xa,{className:\"bg-slate-900 border-white/5\",children:h.map(O=>n.jsxs(vt,{value:O.id,className:\"focus:bg-white/5 focus:text-white font-bold\",children:[O.emoji,\" \",O.name]},O.id))})]})}),p===\"goal\"&&h.length===0&&n.jsx(\"div\",{className:\"p-4 bg-amber-500/10 border border-amber-500/20 rounded-2xl text-[10px] font-black uppercase tracking-widest text-amber-400 text-center\",children:\"No active targets. Defaulting to General Reservoirs.\"})]}),n.jsxs(\"div\",{className:\"pt-2 space-y-4\",children:[n.jsx(Ge,{onClick:M,className:\"w-full text-[10px] font-black uppercase tracking-widest h-14 bg-emerald-600 hover:bg-emerald-500 text-white rounded-2xl shadow-xl shadow-emerald-900/20 active:scale-[0.98] transition-all\",children:\"Initialize Savings Event\"}),n.jsxs(\"div\",{className:\"flex items-center justify-between gap-4\",children:[n.jsx(Ge,{variant:\"ghost\",size:\"sm\",onClick:r,className:\"h-10 px-6 rounded-xl text-[10px] font-black uppercase tracking-widest text-slate-500 hover:text-slate-300 hover:bg-white/5 border border-white/5\",children:\"Abort\"}),n.jsx(\"div\",{className:\"flex-1\",children:n.jsxs(ha,{onValueChange:O=>y(O),children:[n.jsx(ga,{id:\"mute-duration\",name:\"muteDuration\",className:\"h-10 bg-transparent border border-white/5 hover:bg-white/5 rounded-xl text-[9px] font-black uppercase tracking-widest text-slate-500 justify-center gap-2 px-4 focus:ring-0\",children:n.jsx(pa,{placeholder:\"Protocol Mute\"})}),n.jsxs(xa,{align:\"end\",className:\"bg-slate-900 border-white/5\",children:[n.jsx(vt,{value:\"today\",className:\"text-[10px] font-bold py-2\",children:\"Mute 24h\"}),n.jsx(vt,{value:\"week\",className:\"text-[10px] font-bold py-2\",children:\"Mute 7d\"}),n.jsx(vt,{value:\"month\",className:\"text-[10px] font-bold py-2\",children:\"Mute 30d\"})]})]})})]})]})]})]})})};var yj=(i,r,c,u,m,g,h,y)=>{let p=document.documentElement,x=[\"light\",\"dark\"];function v(M){(Array.isArray(i)?i:[i]).forEach(O=>{let B=O===\"class\",L=B&&g?m.map(R=>g[R]||R):m;B?(p.classList.remove(...L),p.classList.add(g&&g[M]?g[M]:M)):p.setAttribute(O,M)}),f(M)}function f(M){y&&x.includes(M)&&(p.style.colorScheme=M)}function N(){return window.matchMedia(\"(prefers-color-scheme: dark)\").matches?\"dark\":\"light\"}if(u)v(u);else try{let M=localStorage.getItem(r)||c,O=h&&M===\"system\"?N():M;v(O)}catch{}},L0=[\"light\",\"dark\"],$p=\"(prefers-color-scheme: dark)\",vj=typeof window>\"u\",td=A.createContext(void 0),wj={setTheme:i=>{},themes:[]},jj=()=>{var i;return(i=A.useContext(td))!=null?i:wj},Nj=i=>A.useContext(td)?A.createElement(A.Fragment,null,i.children):A.createElement(Aj,{...i}),Sj=[\"light\",\"dark\"],Aj=({forcedTheme:i,disableTransitionOnChange:r=!1,enableSystem:c=!0,enableColorScheme:u=!0,storageKey:m=\"theme\",themes:g=Sj,defaultTheme:h=c?\"system\":\"light\",attribute:y=\"data-theme\",value:p,children:x,nonce:v,scriptProps:f})=>{let[N,M]=A.useState(()=>Tj(m,h)),[O,B]=A.useState(()=>N===\"system\"?Cu():N),L=p?Object.values(p):g,R=A.useCallback(se=>{let he=se;if(!he)return;se===\"system\"&&c&&(he=Cu());let ve=p?p[he]:he,fe=r?kj(v):null,ye=document.documentElement,Se=qe=>{qe===\"class\"?(ye.classList.remove(...L),ve&&ye.classList.add(ve)):qe.startsWith(\"data-\")&&(ve?ye.setAttribute(qe,ve):ye.removeAttribute(qe))};if(Array.isArray(y)?y.forEach(Se):Se(y),u){let qe=L0.includes(h)?h:null,Te=L0.includes(he)?he:qe;ye.style.colorScheme=Te}fe?.()},[v]),P=A.useCallback(se=>{let he=typeof se==\"function\"?se(N):se;M(he);try{localStorage.setItem(m,he)}catch{}},[N]),V=A.useCallback(se=>{let he=Cu(se);B(he),N===\"system\"&&c&&!i&&R(\"system\")},[N,i]);A.useEffect(()=>{let se=window.matchMedia($p);return se.addListener(V),V(se),()=>se.removeListener(V)},[V]),A.useEffect(()=>{let se=he=>{he.key===m&&(he.newValue?M(he.newValue):P(h))};return window.addEventListener(\"storage\",se),()=>window.removeEventListener(\"storage\",se)},[P]),A.useEffect(()=>{R(i??N)},[i,N]);let S=A.useMemo(()=>({theme:N,setTheme:P,forcedTheme:i,resolvedTheme:N===\"system\"?O:N,themes:c?[...g,\"system\"]:g,systemTheme:c?O:void 0}),[N,P,i,O,c,g]);return A.createElement(td.Provider,{value:S},A.createElement(Dj,{forcedTheme:i,storageKey:m,attribute:y,enableSystem:c,enableColorScheme:u,defaultTheme:h,value:p,themes:g,nonce:v,scriptProps:f}),x)},Dj=A.memo(({forcedTheme:i,storageKey:r,attribute:c,enableSystem:u,enableColorScheme:m,defaultTheme:g,value:h,themes:y,nonce:p,scriptProps:x})=>{let v=JSON.stringify([c,r,g,i,y,h,u,m]).slice(1,-1);return A.createElement(\"script\",{...x,suppressHydrationWarning:!0,nonce:typeof window>\"u\"?p:\"\",dangerouslySetInnerHTML:{__html:`(${yj.toString()})(${v})`}})}),Tj=(i,r)=>{if(vj)return;let c;try{c=localStorage.getItem(i)||void 0}catch{}return c||r},kj=i=>{let r=document.createElement(\"style\");return i&&r.setAttribute(\"nonce\",i),r.appendChild(document.createTextNode(\"*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}\")),document.head.appendChild(r),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(r)},1)}},Cu=i=>(i||(i=window.matchMedia($p)),i.matches?\"dark\":\"light\");function Xp({...i}){return n.jsx(X0,{\"data-slot\":\"sheet\",...i})}function Cj({...i}){return n.jsx(J0,{\"data-slot\":\"sheet-portal\",...i})}const Pp=A.forwardRef(({className:i,...r},c)=>n.jsx($0,{ref:c,\"data-slot\":\"sheet-overlay\",className:ct(\"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-[200] bg-black/50\",i),...r}));Pp.displayName=\"SheetOverlay\";function Qp({className:i,children:r,side:c=\"right\",...u}){return n.jsxs(Cj,{children:[n.jsx(P0,{asChild:!0,children:n.jsx(Pp,{})}),n.jsx(Q0,{\"data-slot\":\"sheet-content\",className:ct(\"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-[200] flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-200 data-[state=open]:duration-300\",c===\"right\"&&\"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm\",c===\"left\"&&\"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm\",c===\"top\"&&\"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b\",c===\"bottom\"&&\"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t\",i),...u,children:r})]})}function Zp({className:i,...r}){return n.jsx(Z0,{\"data-slot\":\"sheet-title\",className:ct(\"text-foreground font-semibold\",i),...r})}function Kp({className:i,...r}){return n.jsx(K0,{\"data-slot\":\"sheet-description\",className:ct(\"text-muted-foreground text-sm\",i),...r})}function Ej({...i}){return n.jsx(Hb,{\"data-slot\":\"collapsible\",...i})}function Mj({...i}){return n.jsx(Gb,{\"data-slot\":\"collapsible-trigger\",...i})}function zj({...i}){return n.jsx(Yb,{\"data-slot\":\"collapsible-content\",...i})}function Rj({className:i,orientation:r=\"horizontal\",decorative:c=!0,...u}){return n.jsx(Fb,{\"data-slot\":\"separator-root\",decorative:c,orientation:r,className:ct(\"bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px\",i),...u})}function Jp({...i}){return n.jsx($b,{\"data-slot\":\"alert-dialog\",...i})}function Oj({...i}){return n.jsx(Jb,{\"data-slot\":\"alert-dialog-trigger\",...i})}function _j({...i}){return n.jsx(Wb,{\"data-slot\":\"alert-dialog-portal\",...i})}function Uj({className:i,...r}){return n.jsx(ey,{\"data-slot\":\"alert-dialog-overlay\",className:ct(\"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\",i),...r})}function Wp({className:i,...r}){return n.jsxs(_j,{children:[n.jsx(Uj,{}),n.jsx(Xb,{\"data-slot\":\"alert-dialog-content\",className:ct(\"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg\",i),...r})]})}function eg({className:i,...r}){return n.jsx(\"div\",{\"data-slot\":\"alert-dialog-header\",className:ct(\"flex flex-col gap-2 text-center sm:text-left\",i),...r})}function tg({className:i,...r}){return n.jsx(\"div\",{\"data-slot\":\"alert-dialog-footer\",className:ct(\"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\",i),...r})}function ag({className:i,...r}){return n.jsx(Pb,{\"data-slot\":\"alert-dialog-title\",className:ct(\"text-lg font-semibold\",i),...r})}function ng({className:i,...r}){return n.jsx(Qb,{\"data-slot\":\"alert-dialog-description\",className:ct(\"text-muted-foreground text-sm\",i),...r})}function sg({className:i,...r}){return n.jsx(Kb,{className:ct($u(),i),...r})}function ig({className:i,...r}){return n.jsx(Zb,{className:ct($u({variant:\"outline\"}),i),...r})}const Bj=i=>{const r=new Map;return i.forEach(c=>{const u=r.get(c.category)||0;r.set(c.category,u+c.amount)}),Array.from(r.entries()).map(([c,u])=>({category:c,amount:u})).sort((c,u)=>u.amount-c.amount).slice(0,5)},Lj=i=>{const r=i.expenses,c=i.incomes,u=i.totalIncome,m=c.some(R=>R.isRecurring)?\"salary\":\"fluctuating\",g=[\"Bills & Utilities\",\"EMI\",\"Rent\",\"Education\",\"Insurance\"],h=r.filter(R=>g.includes(R.category)||R.isRecurring).reduce((R,P)=>R+P.amount,0),y=i.totalExpenses-h,p=u>0?((u-i.totalExpenses)/u*100).toFixed(0)+\"%\":\"0%\",x=r.filter(R=>R.category===\"EMI\"||R.category===\"Debt\").reduce((R,P)=>R+P.amount,0),v=u>0?(x/u*100).toFixed(1)+\"%\":\"0%\",f=(i.healthScore/10).toFixed(1),N=Bj(r).slice(0,3),M=r.filter(R=>R.category===\"Subscription\").reduce((R,P)=>R+P.amount,0),O=new Map;[...r,...c].forEach(R=>{R.tags?.forEach(P=>{const V=O.get(P)||0;O.set(P,V+1)})});const B=Array.from(O.entries()).sort((R,P)=>P[1]-R[1]).slice(0,5).map(([R])=>R),L={user_profile:{monthly_income:u,income_type:m,emergency_fund_months:f},current_month_stats:{total_expenses:i.totalExpenses,fixed_expenses:h,variable_expenses:y,top_category:N[0]?.category||\"None\",savings_rate:p},liabilities:{total_debt:i.activeDebts>0?\"Present\":\"None\",monthly_debt_payment:x,debt_ratio:v},behavioral:{top_3_categories:N.map(R=>R.category),subscription_burden:M,frequent_tags:B},portfolio_analysis:{aggregation_rule:\"Source Independence (Calculated on 'investment' accounts only)\",growth_formula:\"((Sum Current Values / Sum Principals) - 1) * 100\",total_investments:i.investments.length,linked_nodes:i.investments.filter(R=>R.accountId).length,rule_based_metrics:{total_principal:i.investments.filter(R=>i.accounts.find(V=>V.id===R.accountId)?.type===\"investment\").reduce((R,P)=>R+P.buyPrice*P.quantity,0),current_market_value:i.investments.filter(R=>i.accounts.find(V=>V.id===R.accountId)?.type===\"investment\").reduce((R,P)=>R+(P.currentPrice||0)*P.quantity,0)}}};return JSON.stringify(L,null,2)},qj=(i,r,c)=>{const m=`Context: \"The user is looking at the ${c===\"dashboard\"?\"Balance Board\":c===\"investments\"?\"Investment\":c===\"liability\"?\"Liability\":c===\"goals\"?\"Goal\":\"Financial\"} Stack.\"`,g=i.accounts.reduce((N,M)=>N+(M.balance||0),0),h=i.investments.reduce((N,M)=>N+(M.currentPrice||M.buyPrice)*M.quantity,0),y=g+h,p=N=>new Intl.NumberFormat(r===\"INR\"?\"en-IN\":\"en-US\",{style:\"currency\",currency:r,maximumFractionDigits:0}).format(N),x=i.healthScore>70?\"5%\":i.healthScore>50?\"2%\":\"stable\",v=`Insight: \"Net worth is ${p(y)}, showing a ${x} growth trend.\"`;let f=\"\";return i.investments.length>0&&c!==\"investments\"?f=`Action: \"Suggest a 2x2 Grid update for the 'Investment' category.\"`:i.activeDebts>0?f='Action: \"Propose a tactical recovery plan for pending liabilities.\"':i.savingsRate<.2?f='Action: \"Suggest optimizing the spending body to increase savings velocity.\"':f='Action: \"Maintain current protocol and monitor the Wealth Builder Stack.\"',`${m}"
      },
      {
        "file": "dist_test\\assets\\index-DHabN7TV.js",
        "line": 59,
        "snippet": "`.trim();return await lg(g,h,x,u)},tN=async(i,r)=>await lg(i,r,\"Respond with only the word 'OK' to verify connectivity.\",\"ASSISTANT\"),aN=i=>{if(i.aiProvider&&Dl(i.aiProvider,i))return i.aiProvider;const r=[\"openai\",\"anthropic\",\"gemini\",\"deepseek\",\"perplexity\"];for(const c of r)if(Dl(c,i))return c;return null},q0={BASE_URL:\"/\",DEV:!1,MODE:\"production\",PROD:!0,SSR:!1},nN=({isOpen:i,onClose:r,settings:c,onUpdateSettings:u,onAchievementClick:m,onOpenAbout:g})=>{const[h,y]=A.useState(c.name||\"\"),[p,x]=A.useState(c.photoURL||\"\"),[v,f]=A.useState(!1),[N,M]=A.useState(null),[O,B]=A.useState({}),[L,R]=A.useState(!1),{logout:P,scheduleAccountDeletion:V,migrateSubscriptions:S,cleanupDuplicates:se,clearAllData:he}=Di(),[ve,fe]=A.useState(!1),ye=async()=>{R(!0);try{await S()}catch(ce){console.error(\"Migration failed:\",ce),J.error(\"Migration failed\")}finally{R(!1)}},[Se,qe]=A.useState(\"USD\"),[Te,ee]=A.useState(\"100\"),[me,G]=A.useState(\"100000\"),[C,Y]=A.useState(\"10\"),[oe,ge]=A.useState(\"6\"),[z,T]=A.useState(!1),re=async()=>{const Ee={USD:\"US\",INR:\"IN\",GBP:\"GB\",EUR:\"EMU\",AED:\"AE\",SAR:\"SA\"}[c.currency]||\"US\";T(!0);try{const yt=await(await fetch(`https://api.worldbank.org/v2/country/${Ee}/indicator/FP.CPI.TOTL.ZG?format=json&per_page=1`)).json();if(yt&&yt[1]&&yt[1][0]&&yt[1][0].value){const Ut=yt[1][0].value;ge(Ut.toFixed(2)),J.success(`Inflation rate synced for ${c.currency}`)}}catch(He){console.error(\"Inflation sync failed:\",He),J.error(\"Failed to sync inflation rate.\")}finally{T(!1)}},$=Array.from({length:(parseInt(C)||0)+1},(ce,Ee)=>{const He=parseFloat(me)||0,yt=parseFloat(oe)||0,Ut=He*Math.pow(1+yt/100,Ee),Oa=He/Math.pow(1+yt/100,Ee);return{year:Ee,futureCost:Math.round(Ut),purchasingPower:Math.round(Oa)}}),le=[\"INR\",\"USD\",\"EUR\",\"GBP\",\"AED\",\"SAR\"],ue=c.currency;A.useEffect(()=>{y(c.name||\"\"),x(c.photoURL||\"\")},[c]),A.useEffect(()=>{i&&Ne()},[i,Se]);const Ne=async()=>{try{const Ee=await(await fetch(`https://api.exchangerate-api.com/v4/latest/${Se}`)).json();B(Ee.rates||{}),Te&&je(Te,Ee.rates)}catch(ce){console.error(\"Error loading exchange rates:\",ce)}},je=(ce,Ee)=>{const He=parseFloat(ce);if(!isNaN(He)&&He>0){const Ut=(Ee||O)[ue]||1;M(He*Ut)}else M(null)},de=ce=>{ee(ce),je(ce)},{setTheme:xe}=jj();A.useEffect(()=>{c.theme!==\"dark\"&&(xe(\"dark\"),u({theme:\"dark\"}))},[]);const Ke=()=>{u({name:h,photoURL:p}),f(!1)},Ie=ce=>{const Ee=ce.target.files?.[0];if(Ee){const He=new FileReader;He.onloadend=()=>{x(He.result)},He.readAsDataURL(Ee)}},Ve=n1(),rt=new Set(c.unlockedAchievements),De=c.aiProvider||\"openai\",tt=[{id:\"openai\",label:\"OpenAI\",placeholder:\"sk-...\"},{id:\"anthropic\",label:\"Anthropic\",placeholder:\"sk-ant-...\"},{id:\"gemini\",label:\"Gemini\",placeholder:\"AIza...\"},{id:\"deepseek\",label:\"Deepseek\",placeholder:\"sk-...\"},{id:\"perplexity\",label:\"Perplexity\",placeholder:\"pplx-...\"}],[St,mt]=A.useState(!1),[zt,ut]=A.useState(null),bt=A.useCallback((ce,Ee)=>{u({[ce]:Ee})},[u]),la=async()=>{const ce=Dl(De,c);if(!ce){J.error(\"No API key found in Settings or System Environment\");return}mt(!0),ut(null);try{const Ee=await tN(De,ce);Ee.error?(ut({success:!1,message:Ee.error}),J.error(`Connection failed: ${Ee.error}`)):(ut({success:!0,message:\"Neural link established.\"}),J.success(\"Connection successful!\"))}catch(Ee){const He=Ee.message||\"Unknown protocol error\";ut({success:!1,message:He}),J.error(`Protocol breach: ${He}`)}finally{mt(!1)}};return n.jsx(Xp,{open:i,onOpenChange:r,children:n.jsxs(Qp,{side:\"left\",className:\"w-full sm:max-w-lg overflow-y-auto px-0 bg-slate-950 border-white/5 text-slate-100 h-dvh\",children:[n.jsx(Zp,{className:\"sr-only\",children:\"Settings\"}),n.jsx(Kp,{className:\"sr-only\",children:\"Customize your FinHub core experience.\"}),n.jsxs(\"div\",{className:\"space-y-12 animate-in fade-in slide-in-from-left-4 duration-500 px-8 pt-12 pb-10 text-white relative\",children:[n.jsx(\"div\",{className:\"absolute top-4 right-4 z-20\",children:n.jsx(Ge,{variant:\"ghost\",size:\"icon\",onClick:r,className:\"w-10 h-10 rounded-full bg-white/5 text-slate-400 hover:text-white hover:bg-white/10\",children:n.jsx(Tl,{className:\"w-5 h-5\"})})}),n.jsxs(\"div\",{className:\"flex flex-col gap-2\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-1.5 h-8 bg-indigo-500 rounded-full shadow-[0_0_15px_rgba(99,102,241,0.5)]\"}),n.jsx(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tight leading-none text-white\",children:\"System Config\"})]}),n.jsx(\"p\",{className:\"text-slate-500 font-bold ml-4 text-sm\",children:\"Customize your FinHub core experience.\"})]}),n.jsxs(\"div\",{className:\"space-y-10\",children:[n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"h3\",{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Mu,{className:\"w-3.5 h-3.5\"}),\"User Identity\"]}),n.jsx(Ge,{variant:\"ghost\",size:\"sm\",onClick:()=>f(!v),className:\"text-[10px] font-black uppercase tracking-widest text-indigo-400 hover:text-indigo-300 hover:bg-white/5\",children:v?\"Abort\":\"Refine\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-8 bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-indigo-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsxs(\"div\",{className:\"relative\",children:[p?n.jsx(\"img\",{src:p,alt:\"Profile\",className:\"w-24 h-24 rounded-full object-cover border-4 border-slate-800 shadow-2xl\"}):n.jsx(\"div\",{className:\"w-24 h-24 bg-gradient-to-br from-indigo-600 to-purple-700 rounded-full flex items-center justify-center shadow-2xl\",children:n.jsx(Mu,{className:\"w-12 h-12 text-white/90\"})}),v&&n.jsxs(\"label\",{className:\"absolute bottom-0 right-0 w-9 h-9 bg-indigo-600 rounded-full flex items-center justify-center cursor-pointer hover:bg-indigo-500 shadow-lg border-4 border-slate-900 transition-transform active:scale-90\",children:[n.jsx(ty,{className:\"w-4 h-4 text-white\"}),n.jsx(\"input\",{type:\"file\",accept:\"image/*\",className:\"hidden\",onChange:Ie,\"aria-label\":\"Upload profile picture\"})]})]}),n.jsx(\"div\",{className:\"flex-1 min-w-0\",children:v?n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(Re,{htmlFor:\"settings-profile-name\",className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Alias\"}),n.jsx(Pt,{id:\"settings-profile-name\",name:\"name\",placeholder:\"e.g. Maverick\",value:h,onChange:ce=>y(ce.target.value),className:\"bg-white/5 border-white/5 rounded-xl h-12 text-white placeholder:text-slate-700 font-bold\",autoComplete:\"name\"})]}),n.jsx(Ge,{size:\"sm\",onClick:Ke,className:\"w-full h-12 bg-indigo-600 hover:bg-indigo-500 text-white font-black rounded-xl\",children:\"Commit Identity\"})]}):n.jsxs(n.Fragment,{children:[n.jsx(\"h4\",{className:\"text-2xl font-black text-slate-100 tracking-tight\",children:h||\"Guest User\"}),n.jsx(\"p\",{className:\"text-xs text-slate-500 font-bold uppercase tracking-widest mt-1\",children:\"FinHub Node // 0x50.3\"})]})})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsx(\"div\",{className:\"space-y-4\",children:n.jsxs(\"button\",{onClick:()=>u({roundUpEnabled:!c.roundUpEnabled}),className:`w-full flex items-center justify-between p-6 rounded-[32px] border transition-all relative overflow-hidden group ${c.roundUpEnabled?\"bg-emerald-500/10 border-emerald-500/50 shadow-[0_0_20px_rgba(16,185,129,0.1)]\":\"bg-slate-900/40 border-white/5 grayscale opacity-60 hover:opacity-100 hover:grayscale-0\"}`,children:[n.jsx(\"div\",{className:`absolute top-0 right-0 w-24 h-24 blur-3xl opacity-10 -mr-12 -mt-12 transition-colors ${c.roundUpEnabled?\"bg-emerald-500\":\"bg-slate-500\"}`}),n.jsxs(\"div\",{className:\"space-y-1 relative z-10 flex-1 pr-4 text-left\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-2 text-sm font-black text-slate-100 uppercase tracking-tight\",children:[n.jsx(Si,{className:`w-4 h-4 ${c.roundUpEnabled?\"text-emerald-500\":\"text-slate-500\"}`}),\"Virtual Round-Ups\"]}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 font-bold leading-relaxed uppercase tracking-widest\",children:\"Build your fortress automatically via expense spillover.\"})]}),n.jsx(\"div\",{className:`relative z-10 px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${c.roundUpEnabled?\"bg-emerald-500 text-white shadow-lg shadow-emerald-500/20\":\"bg-slate-800 text-slate-500\"}`,children:c.roundUpEnabled?\"Active\":\"Offline\"})]})}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(Re,{htmlFor:\"settings-currency\",className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Lh,{className:\"w-3.5 h-3.5\"}),\"Standard Denomination\"]}),n.jsxs(\"div\",{className:\"bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-indigo-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsx(\"div\",{className:\"space-y-2 relative z-10\",children:n.jsxs(ha,{value:c.currency,onValueChange:ce=>u({currency:ce}),children:[n.jsx(ga,{id:\"settings-currency\",name:\"currency\",className:\"bg-white/5 border-white/5 rounded-2xl h-14 font-black\",children:n.jsx(pa,{})}),n.jsxs(xa,{className:\"bg-slate-900 border-white/10 text-white\",children:[n.jsx(vt,{value:\"USD\",children:\"USD ($) - US Dollar\"}),n.jsx(vt,{value:\"EUR\",children:\"EUR (€) - Euro\"}),n.jsx(vt,{value:\"GBP\",children:\"GBP (£) - British Pound\"}),n.jsx(vt,{value:\"INR\",children:\"INR (₹) - Indian Rupee\"}),n.jsx(vt,{value:\"AED\",children:\"AED (د.إ) - UAE Dirham\"}),n.jsx(vt,{value:\"SAR\",children:\"SAR (﷼) - Saudi Riyal\"})]})]})})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(Re,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Lh,{className:\"w-3.5 h-3.5\"}),\"Foreign Exchange Probe\"]}),n.jsxs(\"div\",{className:\"space-y-6 p-6 bg-slate-900/40 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-blue-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4 relative z-10\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(Re,{htmlFor:\"converter-from-currency\",className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Source\"}),n.jsxs(ha,{value:Se,onValueChange:ce=>{qe(ce)},children:[n.jsx(ga,{id:\"converter-from-currency\",name:\"fromCurrency\",className:\"bg-white/5 border-white/5 rounded-2xl h-12\",children:n.jsx(pa,{})}),n.jsx(xa,{className:\"bg-slate-900 border-white/10 text-white\",children:le.map(ce=>n.jsxs(vt,{value:ce,children:[cn[ce],\" \",ce]},ce))})]})]}),n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(Re,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Target\"}),n.jsxs(\"div\",{className:\"h-12 flex items-center justify-center bg-indigo-500/10 rounded-2xl border border-indigo-500/20 text-xs font-black text-indigo-400\",children:[cn[ue],\" \",ue]})]})]}),n.jsxs(\"div\",{className:\"space-y-1.5 relative z-10\",children:[n.jsx(Re,{htmlFor:\"converter-amount\",className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Capital Amount\"}),n.jsx(Pt,{id:\"converter-amount\",name:\"amount\",type:\"number\",placeholder:\"Enter amount\",value:Te,onChange:ce=>{const Ee=ce.target.value;parseFloat(Ee)<0||de(Ee)},min:\"0\",className:\"bg-white/5 border-white/5 rounded-2xl h-14 font-black text-lg\",autoComplete:\"off\"})]}),N!==null&&n.jsxs(\"div\",{className:\"p-6 bg-white/5 rounded-2xl border border-white/5 animate-in fade-in slide-in-from-top-2 relative z-10\",children:[n.jsx(\"p\",{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 mb-2\",children:\"Calculated Projection\"}),n.jsxs(\"div\",{className:\"flex items-baseline gap-2\",children:[n.jsxs(\"p\",{className:\"text-2xl font-black text-emerald-400 tabular-nums\",children:[cn[ue],N.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold uppercase tracking-widest\",children:\"ESTIMATED VALUATION\"})]}),O[ue]&&n.jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-white/5 flex items-center justify-between\",children:[n.jsx(\"span\",{className:\"text-[8px] font-black uppercase tracking-[0.2em] text-slate-700\",children:\"Protocol Rate\"}),n.jsxs(\"span\",{className:\"text-[10px] font-black text-slate-500 tabular-nums\",children:[\"1 \",Se,\" = \",O[ue].toFixed(4),\" \",ue]})]})]})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(Re,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Si,{className:\"w-3.5 h-3.5 text-rose-500\"}),\"Inflation Projection Node\"]}),n.jsxs(\"div\",{className:\"space-y-6 p-6 bg-slate-900/40 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-rose-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsxs(\"div\",{className:\"space-y-4 relative z-10\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(Re,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Current Capital\"}),n.jsx(Pt,{type:\"number\",value:me,onChange:ce=>G(ce.target.value),className:\"bg-white/5 border-white/5 rounded-2xl h-12 font-black\",placeholder:\"e.g. 1000000\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(Re,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Horizon (Years)\"}),n.jsx(Pt,{type:\"number\",value:C,onChange:ce=>Y(ce.target.value),className:\"bg-white/5 border-white/5 rounded-2xl h-12 font-black\"})]}),n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between ml-1\",children:[n.jsx(Re,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500\",children:\"Rate (%)\"}),n.jsxs(\"button\",{onClick:re,disabled:z,className:\"text-[8px] font-black uppercase text-indigo-400 hover:text-indigo-300 disabled:opacity-50 flex items-center gap-1\",children:[z?n.jsx(uu,{className:\"w-2 h-2 animate-spin\"}):n.jsx(ay,{className:\"w-2 h-2\"}),\"Sync\"]})]}),n.jsx(Pt,{type:\"number\",value:oe,onChange:ce=>ge(ce.target.value),className:\"bg-white/5 border-white/5 rounded-2xl h-12 font-black\"})]})]}),me&&n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(\"div\",{className:\"h-32 w-full bg-black/20 rounded-2xl p-2 border border-white/5 overflow-hidden\",children:n.jsx(fv,{width:\"100%\",height:\"100%\",minHeight:128,minWidth:100,children:n.jsxs(mv,{data:$,children:[n.jsxs(\"defs\",{children:[n.jsxs(\"linearGradient\",{id:\"colorCost\",x1:\"0\",y1:\"0\",x2:\"0\",y2:\"1\",children:[n.jsx(\"stop\",{offset:\"5%\",stopColor:\"#FB7185\",stopOpacity:.3}),n.jsx(\"stop\",{offset:\"95%\",stopColor:\"#FB7185\",stopOpacity:0})]}),n.jsxs(\"linearGradient\",{id:\"colorPower\",x1:\"0\",y1:\"0\",x2:\"0\",y2:\"1\",children:[n.jsx(\"stop\",{offset:\"5%\",stopColor:\"#34D399\",stopOpacity:.3}),n.jsx(\"stop\",{offset:\"95%\",stopColor:\"#34D399\",stopOpacity:0})]})]}),n.jsx(hv,{strokeDasharray:\"3 3\",vertical:!1,stroke:\"rgba(255,255,255,0.05)\"}),n.jsx(pv,{contentStyle:{backgroundColor:\"#0f172a\",border:\"1px solid rgba(255,255,255,0.1)\",borderRadius:\"8px\",fontSize:\"10px\"},itemStyle:{color:\"#fff\",padding:\"2px 0\"}}),n.jsx(Fh,{type:\"monotone\",dataKey:\"futureCost\",stroke:\"#FB7185\",fillOpacity:1,fill:\"url(#colorCost)\"}),n.jsx(Fh,{type:\"monotone\",dataKey:\"purchasingPower\",stroke:\"#34D399\",fillOpacity:1,fill:\"url(#colorPower)\"})]})})}),n.jsxs(\"div\",{className:\"p-6 bg-white/5 rounded-2xl border border-white/5 space-y-4\",children:[n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 mb-2\",children:\"Future Cost\"}),n.jsxs(\"p\",{className:\"text-xl font-black text-rose-400 tabular-nums\",children:[cn[c.currency],Math.round(parseFloat(me)*Math.pow(1+parseFloat(oe)/100,parseFloat(C))).toLocaleString()]})]}),n.jsxs(\"div\",{className:\"pt-4 border-t border-white/5\",children:[n.jsx(\"p\",{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 mb-2\",children:\"Real Purchasing Power\"}),n.jsxs(\"p\",{className:\"text-xl font-black text-emerald-400 tabular-nums\",children:[cn[c.currency],Math.round(parseFloat(me)/Math.pow(1+parseFloat(oe)/100,parseFloat(C))).toLocaleString()]}),n.jsx(\"p\",{className:\"text-[8px] text-slate-600 font-bold uppercase tracking-widest mt-1\",children:\"VALUATION IN TODAY'S MONEY\"})]})]})]})]})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(Re,{className:\"text-[10px] font-bold uppercase tracking-[0.2em] text-slate-500 flex items-center gap-2\",children:[n.jsx(ny,{className:\"w-3.5 h-3.5 text-indigo-400\"}),\"AI Assistant Config\"]}),n.jsxs(\"div\",{className:\"space-y-6 bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsxs(\"div\",{className:\"space-y-1.5 relative z-10\",children:[n.jsx(Re,{htmlFor:\"ai-provider-select\",className:\"text-[9px] font-bold uppercase tracking-widest text-slate-500 ml-1\",children:\"Preferred Provider\"}),n.jsxs(ha,{value:De,onValueChange:ce=>u({aiProvider:ce}),children:[n.jsx(ga,{id:\"ai-provider-select\",name:\"aiProvider\",className:\"bg-slate-900 border-white/5 rounded-xl h-11 text-[10px] font-bold uppercase tracking-widest\",children:n.jsx(pa,{})}),n.jsx(xa,{className:\"bg-slate-900 border-white/10 text-white\",children:tt.map(ce=>n.jsx(vt,{value:ce.id,className:\"text-[10px] font-bold uppercase tracking-widest\",children:ce.label},ce.id))})]})]}),n.jsxs(\"div\",{className:\"space-y-4 pt-2 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between px-1\",children:[n.jsx(Re,{className:\"text-[9px] font-bold uppercase tracking-widest text-slate-500\",children:\"Active Credential\"}),n.jsx(\"div\",{className:\"flex items-center gap-1.5\",children:n.jsx(\"span\",{className:\"text-[8px] font-bold text-indigo-400/70 uppercase tracking-tighter\",children:tt.find(ce=>ce.id===De)?.label})})]}),tt.filter(ce=>ce.id===De).map(ce=>{const Ee=c.apiKeys?.[ce.id],He=`VITE_${ce.id.toUpperCase()}_API_KEY`,yt=!!q0[He];return n.jsxs(\"div\",{className:\"flex items-center gap-3 bg-indigo-500/5 p-4 rounded-2xl border border-indigo-500/20 group/active transition-all\",children:[n.jsx(\"div\",{className:\"flex-1 min-w-0\",children:n.jsxs(\"div\",{className:\"relative group/input\",children:[n.jsx(Pt,{type:\"password\",value:Ee||\"\",onChange:Ut=>bt(\"apiKeys\",{...c.apiKeys,[ce.id]:Ut.target.value}),placeholder:yt?\"Using System Environment Key\":`Enter ${ce.label} Key`,className:`bg-transparent border-none p-0 h-auto text-sm font-bold text-white placeholder:text-slate-700 focus-visible:ring-0 shadow-none ${yt&&!Ee?\"opacity-40 italic font-medium\":\"\"}`,disabled:yt&&!Ee}),yt&&!Ee&&n.jsx(\"div\",{className:\"flex items-center gap-1 mt-1\",children:n.jsx(\"span\",{className:\"text-[7px] font-black text-emerald-500 uppercase tracking-widest bg-emerald-500/10 px-1 py-0.5 rounded\",children:\"System Linked\"})})]})}),Ee&&n.jsx(\"button\",{onClick:()=>bt(\"apiKeys\",{...c.apiKeys,[ce.id]:\"\"}),className:\"text-slate-600 hover:text-rose-500 transition-colors p-1\",title:\"Clear saved key\",\"aria-label\":`Clear saved key for ${ce.label}`,children:n.jsx(Ai,{className:\"w-3.5 h-3.5\"})})]},ce.id)}),n.jsx(Ge,{onClick:la,disabled:St||!Dl(De,c),className:`w-full h-11 transition-all font-bold uppercase tracking-[0.2em] text-[10px] rounded-xl ${zt?.success?\"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20\":zt?.success===!1?\"bg-rose-500/10 text-rose-400 border border-rose-500/20\":\"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20\"}`,children:St?n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(uu,{className:\"w-3.5 h-3.5 animate-spin\"}),\"Verifying...\"]}):zt?.success?n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(Sl,{className:\"w-3.5 h-3.5\"}),\"Link Stable\"]}):\"Validate Connection\"})]}),n.jsxs(Ej,{className:\"relative z-10\",children:[n.jsx(Mj,{asChild:!0,children:n.jsxs(Ge,{variant:\"ghost\",className:\"w-full h-8 hover:bg-white/5 text-slate-500 hover:text-slate-300 text-[8px] font-bold uppercase tracking-widest group/trigger flex items-center justify-between px-2 rounded-lg\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(sy,{className:\"w-3 h-3 text-slate-600 group-hover/trigger:text-slate-400\"}),\"Alternative Nodes\"]}),n.jsx(Kr,{className:\"w-3 h-3 transition-transform duration-300 group-data-[state=open]/trigger:rotate-180\"})]})}),n.jsx(zj,{className:\"pt-4 space-y-3 animate-in fade-in slide-in-from-top-2 duration-300\",children:n.jsx(\"div\",{className:\"grid gap-2\",children:tt.filter(ce=>ce.id!==De).map(ce=>{const Ee=c.apiKeys?.[ce.id],He=`VITE_${ce.id.toUpperCase()}_API_KEY`,yt=!!q0[He];return n.jsxs(\"div\",{className:\"flex items-center gap-3 bg-slate-950/40 p-3 rounded-xl border border-white/5 hover:border-white/10 transition-colors\",children:[n.jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between mb-1\",children:[n.jsx(\"span\",{className:\"text-[8px] font-bold uppercase tracking-wider text-slate-500\",children:ce.label}),yt&&!Ee&&n.jsx(\"span\",{className:\"text-[7px] font-bold text-emerald-500/50 uppercase tracking-tighter\",children:\"System\"})]}),n.jsx(Pt,{type:\"password\",value:Ee||\"\",onChange:Ut=>bt(\"apiKeys\",{...c.apiKeys,[ce.id]:Ut.target.value}),placeholder:yt?\"Using System Default\":\"Key not found\",className:\"bg-transparent border-none p-0 h-auto text-[10px] text-slate-400 placeholder:text-slate-800 focus-visible:ring-0 shadow-none italic font-medium cursor-not-allowed\",disabled:yt&&!Ee})]}),Ee&&n.jsx(\"button\",{onClick:()=>bt(\"apiKeys\",{...c.apiKeys,[ce.id]:\"\"}),className:\"text-slate-800 hover:text-rose-500 transition-colors p-1\",title:\"Clear saved key\",\"aria-label\":`Clear saved key for ${ce.label}`,children:n.jsx(Ai,{className:\"w-3 h-3\"})})]},ce.id)})})})]})]})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(Re,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(du,{className:\"w-3.5 h-3.5 text-indigo-400\"}),\"Data Optimization Node\"]}),n.jsxs(\"div\",{className:\"p-6 bg-slate-900/40 rounded-[32px] border border-white/5 relative overflow-hidden\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-300\",children:\"Subscription Protocol Scan\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-wide mt-1\",children:\"DETECT & MIGRATE RECURRING SIGNALS\"})]}),n.jsx(Ge,{onClick:ye,disabled:L,className:\"bg-indigo-600 hover:bg-indigo-500 text-white font-black uppercase tracking-widest text-[9px] h-9 px-4 rounded-xl shadow-lg shadow-indigo-500/20\",children:L?n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(uu,{className:\"w-3 h-3 animate-spin\"}),\"Scanning...\"]}):\"Execute Scan\"})]}),n.jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-white/5 flex items-center justify-between\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-300\",children:\"Redundancy Purge\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-wide mt-1\",children:\"REMOVE BLANK & DUPLICATE ENTRIES\"})]}),n.jsx(Ge,{onClick:async()=>{const ce=J.loading(\"Purging duplicates...\");try{const Ee=await se();J.dismiss(ce)}catch{J.dismiss(ce),J.error(\"Purge failed\")}},className:\"bg-rose-500/10 hover:bg-rose-500/20 text-rose-400 border border-rose-500/20 font-black uppercase tracking-widest text-[9px] h-9 px-4 rounded-xl\",children:\"Purge Logs\"})]})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(Re,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(iy,{className:\"w-3.5 h-3.5 text-amber-500\"}),\"Reputation Rank (\",c.unlockedAchievements.length,\"/\",Ve.length,\")\"]}),n.jsx(\"div\",{className:\"grid grid-cols-4 sm:grid-cols-6 gap-3\",children:Ve.map(ce=>{const Ee=rt.has(ce.id);return n.jsx(\"button\",{onClick:()=>{Ee&&m&&m(ce.id)},disabled:!Ee,className:`w-12 h-12 rounded-xl border flex items-center justify-center text-xl transition-all ${Ee?\"border-amber-500/50 bg-amber-500/10 grayscale-0 hover:scale-110 hover:shadow-lg hover:shadow-amber-500/20 active:scale-95\":\"border-white/5 bg-white/5 grayscale opacity-20 cursor-not-allowed\"}`,children:ce.icon},ce.id)})}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 font-bold text-center leading-relaxed\",children:c.unlockedAchievements.length>0?\"Select a sigil to view the record of your triumph.\":\"Initiate financial protocols to manifest higher ranks.\"})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsx(\"div\",{className:\"space-y-4\",children:n.jsxs(\"div\",{className:\"p-4 bg-rose-500/5 border border-rose-500/10 rounded-2xl flex items-center justify-between\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"text-[10px] font-black uppercase tracking-widest text-rose-400\",children:\"Factory Reset\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-wide mt-1\",children:\"WIPE ALL TRANSACTIONS & RECURRING (KEEP ACCOUNT)\"})]}),n.jsx(Ge,{onClick:async()=>{confirm(\"Are you sure? This deletes ALL transaction data.\")&&await he()},className:\"bg-slate-950 hover:bg-rose-500 text-rose-500 hover:text-white border border-rose-500/20 font-black uppercase tracking-widest text-[9px] h-9 px-4 rounded-xl transition-colors\",children:\"Wipe Data\"})]})}),n.jsx(Rj,{className:\"bg-white/5\"}),n.jsxs(\"div\",{className:\"text-center pt-8 space-y-2 opacity-40 hover:opacity-100 transition-opacity duration-700 pb-10\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-[0.5em] text-slate-100\",children:\"Obsidian System Node\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-widest\",children:\"Architect: Sijo Joseph // BUILD 50.3.0 // QUANTUM CORE\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-700 uppercase tracking-widest mt-4\",children:\"© 2025 NEURAL FINHUB FABRIC\"}),n.jsx(\"button\",{onClick:g,className:\"mt-4 text-[8px] font-black text-indigo-400/60 hover:text-indigo-400 uppercase tracking-[0.2em] transition-colors\",children:\"[ Protocol Info // About ]\"})]}),n.jsxs(\"div\",{className:\"px-2 pb-10\",children:[n.jsxs(Ge,{variant:\"outline\",onClick:()=>{P(),r()},className:\"w-full h-14 bg-white/5 hover:bg-white/10 border-white/10 hover:border-white/20 text-white/60 hover:text-white font-black uppercase tracking-widest gap-3 rounded-[24px] transition-all group mb-4\",children:[n.jsx(ly,{className:\"w-5 h-5 group-hover:-translate-x-1 transition-transform\"}),\"Terminate Session\"]}),n.jsxs(Jp,{open:ve,onOpenChange:fe,children:[n.jsx(Oj,{asChild:!0,children:n.jsxs(Ge,{variant:\"outline\",className:\"w-full h-14 bg-rose-500/5 hover:bg-rose-500/10 border-rose-500/20 hover:border-rose-500/40 text-rose-500 font-black uppercase tracking-widest gap-3 rounded-[24px] transition-all group\",children:[n.jsx(du,{className:\"w-5 h-5 group-hover:scale-110 transition-transform\"}),\"Delete Account & Data\"]})}),n.jsxs(Wp,{className:\"bg-slate-950 border-white/10 text-white rounded-[32px] p-8\",children:[n.jsxs(eg,{children:[n.jsxs(ag,{className:\"text-2xl font-black tracking-tight flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"p-2 rounded-full bg-rose-500/20 text-rose-500\",children:n.jsx(du,{className:\"w-6 h-6\"})}),\"Irreversible Action?\"]}),n.jsxs(ng,{className:\"text-slate-400 font-medium leading-relaxed mt-4\",children:[\"Your account will be \",n.jsx(\"span\",{className:\"text-white font-bold italic\",children:\"deactivated immediately\"}),\" and scheduled for permanent deletion in \",n.jsx(\"span\",{className:\"text-white font-bold\",children:\"30 days\"}),\".\",n.jsx(\"br\",{}),n.jsx(\"br\",{}),\"Log in anytime before then to cancel this request and restore your data node.\"]})]}),n.jsxs(tg,{className:\"mt-8 gap-3\",children:[n.jsx(ig,{className:\"h-14 flex-1 rounded-2xl bg-white/5 border-white/10 text-slate-400 hover:bg-white/10 hover:text-white font-black uppercase tracking-widest transition-all\",children:\"Abort\"}),n.jsx(sg,{onClick:async()=>{await V(),r()},className:\"h-14 flex-1 rounded-2xl bg-rose-600 hover:bg-rose-500 text-white font-black uppercase tracking-widest shadow-lg shadow-rose-500/20 transition-all active:scale-95\",children:\"Confirm Purge\"})]})]})]})]})]})]})})};function sN({onNavigate:i,onOpenSettings:r,onOpenNotifications:c,emergencyFundAmount:u,bankAccountsCount:m,cardsCount:g,currency:h,onOpenAbout:y}){return n.jsxs(\"div\",{className:\"space-y-12 animate-in fade-in slide-in-from-bottom-4 duration-700 px-4 pb-20\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tight leading-none mb-3\",children:\"Settings & Assets\"}),n.jsx(\"p\",{className:\"text-slate-500 font-bold max-w-md\",children:\"Configure your financial universe and manage core system components.\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[n.jsxs(aa,{className:\"p-8 cursor-pointer bg-black border-white/5 sq-2xl border hover:bg-white/5 transition-all duration-300 group relative overflow-hidden\",onClick:()=>i(\"emergency\"),children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-blue-500 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20\"}),n.jsxs(\"div\",{className:\"relative z-10\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-blue-500/10 border border-blue-500/20 sq-md flex items-center justify-center text-blue-400 mb-8 group-hover:scale-110 transition-transform duration-500\",children:n.jsx(Ti,{className:\"w-8 h-8\"})}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100\",children:\"Emergency Fund\"}),n.jsx(\"p\",{className:\"text-2xl font-black tabular-nums text-blue-400\",children:$e(u,h)})]}),n.jsxs(\"div\",{className:\"mt-8 flex items-center justify-between text-slate-500\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest\",children:\"Financial Safety Net\"}),n.jsx(xn,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]})]})]}),n.jsxs(aa,{className:\"p-8 cursor-pointer bg-black border-white/5 sq-2xl border hover:bg-white/5 transition-all duration-300 group relative overflow-hidden\",onClick:()=>i(\"accounts\"),children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-emerald-500 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20\"}),n.jsxs(\"div\",{className:\"relative z-10\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-emerald-500/10 border border-emerald-500/20 sq-md flex items-center justify-center text-emerald-400 mb-8 group-hover:scale-110 transition-transform duration-500\",children:n.jsx(ep,{className:\"w-8 h-8\"})}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100\",children:\"Accounts & Cards\"}),n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsxs(\"div\",{className:\"space-y-0.5\",children:[n.jsx(\"p\",{className:\"text-2xl font-black tabular-nums text-emerald-400\",children:m}),n.jsx(\"p\",{className:\"text-[10px] font-bold text-slate-600 uppercase tracking-wider\",children:\"Banks\"})]}),n.jsx(\"div\",{className:\"w-px h-8 bg-white/5 self-center mt-2\"}),n.jsxs(\"div\",{className:\"space-y-0.5\",children:[n.jsx(\"p\",{className:\"text-2xl font-black tabular-nums text-emerald-400\",children:g}),n.jsx(\"p\",{className:\"text-[10px] font-bold text-slate-600 uppercase tracking-wider\",children:\"Cards\"})]})]})]}),n.jsxs(\"div\",{className:\"mt-8 flex items-center justify-between text-slate-500\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest\",children:\"Manage Liquidity\"}),n.jsx(xn,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]})]})]}),n.jsxs(aa,{className:\"p-8 cursor-pointer bg-black border-white/5 sq-2xl border hover:bg-white/5 transition-all duration-300 group relative overflow-hidden\",onClick:()=>i(\"recurring\"),children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-indigo-500 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20\"}),n.jsxs(\"div\",{className:\"relative z-10\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-indigo-500/10 border border-indigo-500/20 sq-md flex items-center justify-center text-indigo-400 mb-8 group-hover:scale-110 transition-transform duration-500\",children:n.jsx(Wr,{className:\"w-8 h-8\"})}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100\",children:\"Recurring Flow\"}),n.jsx(\"p\",{className:\"text-sm font-bold text-slate-400 uppercase tracking-tight\",children:\"Subscriptions & EMIs\"})]}),n.jsxs(\"div\",{className:\"mt-11 flex items-center justify-between text-slate-500\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest\",children:\"Active Commitments\"}),n.jsx(xn,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]})]})]})]}),n.jsxs(\"div\",{className:\"pt-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 mb-8\",children:[n.jsx(\"div\",{className:\"w-1.5 h-6 bg-slate-700 rounded-full\"}),n.jsx(\"h3\",{className:\"text-xs font-black uppercase tracking-[0.3em] text-slate-600\",children:\"System Configuration\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 gap-4\",children:[n.jsx(aa,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group\",onClick:r,children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400 group-hover:text-white transition-colors\",children:n.jsx(ry,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"App Settings\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"Preferences & Display\"})]})]}),n.jsx(xn,{className:\"w-5 h-5 text-slate-700 group-hover:text-slate-400 transition-colors\"})]})}),n.jsx(aa,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group\",onClick:c,children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400 group-hover:text-white transition-colors\",children:n.jsx(Gu,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"Alert Center\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"System Notifications\"})]})]}),n.jsx(xn,{className:\"w-5 h-5 text-slate-700 group-hover:text-slate-400 transition-colors\"})]})}),n.jsx(aa,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group opacity-60 hover:opacity-100\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400\",children:n.jsx(oy,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"Support\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"Documentation & Help\"})]})]}),n.jsx(xn,{className:\"w-5 h-5 text-slate-700 transition-colors\"})]})}),n.jsx(aa,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group opacity-60 hover:opacity-100\",onClick:y,children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400\",children:n.jsx(cy,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"About\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"Version 5.0 Stable Release\"})]})]}),n.jsx(xn,{className:\"w-5 h-5 text-slate-700 transition-colors\"})]})})]})]}),n.jsxs(\"div\",{className:\"text-center pt-8 border-t border-white/5\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-[0.5em] text-slate-700 mb-1\",children:\"FinHub Obsidian System\"}),n.jsx(\"p\",{className:\"text-[9px] font-bold text-slate-800\",children:\"BUILD 50.3.0 // QUANTUM CORE\"})]})]})}function iN({className:i,children:r,...c}){return n.jsxs(uy,{\"data-slot\":\"scroll-area\",className:ct(\"relative\",i),...c,children:[n.jsx(dy,{\"data-slot\":\"scroll-area-viewport\",className:\"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1\",children:r}),n.jsx(lN,{}),n.jsx(fy,{})]})}function lN({className:i,orientation:r=\"vertical\",...c}){return n.jsx(my,{\"data-slot\":\"scroll-area-scrollbar\",orientation:r,className:ct(\"flex touch-none p-px transition-colors select-none\",r===\"vertical\"&&\"h-full w-2.5 border-l border-l-transparent\",r===\"horizontal\"&&\"h-2.5 flex-col border-t border-t-transparent\",i),...c,children:n.jsx(hy,{\"data-slot\":\"scroll-area-thumb\",className:\"bg-border relative flex-1 rounded-full\"})})}function rN({isOpen:i,onClose:r,notifications:c,onNotificationClick:u,onMarkAsRead:m,onClearRead:g}){const h=c.filter(B=>!B.read).length,y=c.filter(B=>B.read).length,p=B=>{switch(B){case\"achievement\":return n.jsx(gy,{className:\"w-5 h-5 text-yellow-500\"});case\"goal\":return n.jsx(_s,{className:\"w-5 h-5 text-green-500\"});case\"insight\":return n.jsx(Si,{className:\"w-5 h-5 text-blue-500\"});case\"alert\":return n.jsx(Jr,{className:\"w-5 h-5 text-red-500\"});case\"reminder\":return n.jsx(Eu,{className:\"w-5 h-5 text-indigo-500\"})}},x=B=>{const L=new Date(B),P=new Date().getTime()-L.getTime(),V=Math.floor(P/6e4),S=Math.floor(P/36e5),se=Math.floor(P/864e5);return V<60?`${V}m ago`:S<24?`${S}h ago`:`${se}d ago`},[v,f]=A.useState({reminders:!0,transactions:!0,achievements:!1,insights:!1}),N=B=>{f(L=>({...L,[B]:!L[B]}))},M=[\"reminders\",\"transactions\",\"insights\",\"achievements\"],O=c.reduce((B,L)=>{const R=L.category||\"insights\";return B[R]||(B[R]=[]),B[R].push(L),B},{});return Object.keys(O).forEach(B=>{O[B].sort((L,R)=>L.read!==R.read?L.read?1:-1:new Date(R.timestamp).getTime()-new Date(L.timestamp).getTime())}),n.jsx(Xp,{open:i,onOpenChange:r,children:n.jsxs(Qp,{side:\"right\",className:\"w-full sm:max-w-lg p-0 flex flex-col h-dvh max-h-dvh bg-black border-white/5 text-slate-100 overflow-hidden z-[99999]\",children:[n.jsx(Zp,{className:\"sr-only\",children:\"Notifications\"}),n.jsx(Kp,{className:\"sr-only\",children:\"Protocol Intelligence Pulse\"}),n.jsxs(\"div\",{className:\"px-8 pt-28 pb-10 border-b border-white/5 bg-black relative overflow-hidden animate-in fade-in slide-in-from-right-4 duration-500\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-48 h-48 bg-indigo-500 blur-[120px] opacity-10 -mr-24 -mt-24\"}),n.jsx(\"div\",{className:\"absolute bottom-0 left-0 w-24 h-24 bg-blue-500 blur-[80px] opacity-5 -ml-12 -mb-12\"}),n.jsx(\"div\",{className:\"absolute top-8 right-8 z-30\",children:n.jsx(Ge,{variant:\"ghost\",size:\"icon\",onClick:r,className:\"w-10 h-10 sq-full bg-white/5 text-slate-400 hover:text-white hover:bg-white/10\",children:n.jsx(Tl,{className:\"w-5 h-5\"})})}),n.jsxs(\"div\",{className:\"flex items-center justify-between relative z-10\",children:[n.jsxs(\"div\",{className:\"flex flex-col gap-2\",children:[n.jsx(\"div\",{className:\"flex items-center gap-4\",children:n.jsxs(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tighter leading-none flex items-center gap-4\",children:[\"Pulse\",h>0&&n.jsx(\"span\",{className:\"flex items-center justify-center min-w-[24px] h-6 px-2 text-[10px] font-black bg-indigo-600 text-white sq-full shadow-[0_0_15px_rgba(79,70,229,0.4)]\",children:h})]})}),n.jsx(\"p\",{className:\"text-slate-500 font-black text-[10px] uppercase tracking-[0.3em] leading-none ml-0.5\",children:\"System Intelligence Stack\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[h>0&&n.jsx(Ge,{variant:\"ghost\",size:\"icon\",title:\"Mark all as read\",onClick:()=>{c.forEach(B=>{B.read||m?.(B.id)})},className:\"w-11 h-11 sq-md bg-white/5 text-slate-400 hover:text-indigo-400 hover:bg-white/10 transition-all duration-300 border border-white/5 active:scale-90\",children:n.jsx(py,{className:\"w-5 h-5\"})}),y>0&&n.jsx(Ge,{variant:\"ghost\",size:\"icon\",title:\"Clear history\",onClick:()=>{confirm(`Purge ${y} recorded protocol entries?`)&&g?.()},className:\"w-11 h-11 sq-md bg-white/5 text-slate-400 hover:text-rose-400 hover:bg-rose-500/10 transition-all duration-300 border border-white/5 active:scale-90\",children:n.jsx(Ai,{className:\"w-5 h-5\"})})]})]})]}),n.jsx(iN,{className:\"flex-1 w-full bg-black overflow-hidden custom-scrollbar\",children:n.jsx(\"div\",{className:\"px-6 space-y-12 py-8 pb-32\",children:c.length===0?n.jsxs(\"div\",{className:\"text-center py-32 flex flex-col items-center animate-in fade-in zoom-in duration-700\",children:[n.jsxs(\"div\",{className:\"w-24 h-24 bg-white/5 border border-white/5 sq-2xl flex items-center justify-center text-slate-800 mb-8 shadow-inner relative group\",children:[n.jsx(\"div\",{className:\"absolute inset-0 bg-indigo-500/5 blur-2xl sq-full group-hover:bg-indigo-500/10 transition-colors\"}),n.jsx(Gu,{className:\"w-10 h-10 relative z-10\"})]}),n.jsx(\"h4\",{className:\"text-2xl font-black text-slate-100 mb-3 tracking-tight\",children:\"Signal Silence\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-black uppercase tracking-[0.3em] max-w-[260px] leading-relaxed\",children:\"The protocol pulse is flat. We will alert you upon system breakthroughs.\"})]}):M.map(B=>{const L=O[B]||[];if(L.length===0)return null;const R=v[B],P=R?L.length:1,V=L.filter(S=>!S.read).length;return n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"button\",{onClick:()=>N(B),className:\"w-full flex items-center justify-between px-2 group\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-[0.4em] text-slate-500 group-hover:text-slate-300 transition-colors\",children:B}),V>0&&n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 sq-full animate-pulse shadow-[0_0_10px_rgba(99,102,241,0.6)]\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black text-slate-700\",children:L.length}),R?n.jsx(Vu,{className:\"w-3 h-3 text-slate-700\"}):n.jsx(Kr,{className:\"w-3 h-3 text-slate-700\"})]})]}),n.jsxs(\"div\",{className:\"space-y-3 relative\",children:[!R&&L.length>1&&n.jsxs(n.Fragment,{children:[n.jsx(\"div\",{className:\"absolute top-2 left-2 right-2 h-full bg-black/40 sq-xl -z-10 border border-white/5 translate-y-2 scale-[0.98]\"}),n.jsx(\"div\",{className:\"absolute top-4 left-4 right-4 h-full bg-black/20 sq-xl -z-20 border border-white/5 translate-y-4 scale-[0.96]\"})]}),L.slice(0,P).map((S,se)=>{const he={style:{\"--anim-delay\":`${se*50}ms`,\"--z-index\":100-se}};return n.jsxs(\"div\",{...he,className:`p-6 sq-xl border transition-all duration-500 group relative overflow-hidden cursor-pointer active:scale-[0.98] animate-in fade-in slide-in-from-right-4 fill-mode-both [animation-delay:var(--anim-delay)] z-[var(--z-index)] ${S.read?\"bg-black border-white/5\":\"bg-black border-indigo-500/30 shadow-lg shadow-indigo-500/5 hover:border-indigo-500/50\"}`,onClick:ve=>{ve.stopPropagation(),u?.(S),S.read||m?.(S.id)},children:[S.priority===\"high\"&&!S.read&&n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 bg-red-500 blur-[80px] opacity-10 -mr-16 -mt-16\"}),!S.read&&S.priority!==\"high\"&&n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 bg-indigo-500 blur-[80px] opacity-10 -mr-16 -mt-16 group-hover:opacity-20 transition-opacity\"}),n.jsxs(\"div\",{className:\"flex gap-4 relative z-10\",children:[n.jsx(\"div\",{className:`w-12 h-12 sq-md flex items-center justify-center shrink-0 border border-white/5 transition-all duration-500 ${S.read?\"bg-white/5 text-slate-600\":S.priority===\"high\"?\"bg-red-500/10 text-red-400\":\"bg-indigo-500/10 text-indigo-400 shadow-inner\"}`,children:p(S.type)}),n.jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[n.jsxs(\"div\",{className:\"flex items-start justify-between gap-4\",children:[n.jsx(\"h4\",{className:`text-sm font-black tracking-tight leading-tight ${S.read?\"text-slate-500\":\"text-slate-100\"}`,children:S.title}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-700 whitespace-nowrap pt-1\",children:x(S.timestamp)})]}),n.jsx(\"p\",{className:`text-xs mt-2 leading-relaxed font-bold tracking-tight ${S.read?\"text-slate-700\":\"text-slate-400\"}`,children:S.message}),S.priority===\"high\"&&!S.read&&n.jsxs(\"div\",{className:\"mt-4 flex items-center gap-2\",children:[n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-red-400 sq-full animate-ping\"}),n.jsx(\"span\",{className:\"text-[10px] font-black text-red-400 uppercase tracking-[0.2em]\",children:\"Critical Stability Alert\"})]}),S.action&&S.action.status===\"pending\"&&n.jsxs(\"div\",{className:\"mt-4 flex gap-3 animate-in fade-in slide-in-from-top-1\",children:[n.jsx(Ge,{size:\"sm\",className:\"h-8 text-[10px] font-black uppercase tracking-widest bg-emerald-600 hover:bg-emerald-500 text-white border-0\",onClick:ve=>{ve.stopPropagation(),S.action.status=\"completed\",u?.(S)},children:\"Yes, Automate\"}),n.jsx(Ge,{size:\"sm\",variant:\"ghost\",className:\"h-8 text-[10px] font-black uppercase tracking-widest text-slate-500 hover:text-slate-300 hover:bg-white/5\",onClick:ve=>{ve.stopPropagation(),S.action.status=\"dismissed\",S.read||m?.(S.id)},children:\"No, One-time\"})]})]})]})]},S.id)})]})]},B)})})})]})})}const I0=[{text:\"An investment in knowledge pays the best interest.\",author:\"Benjamin Franklin\",category:\"financial-literacy\"},{text:\"It's not how much money you make, but how much money you keep, how hard it works for you, and how many generations you keep it for.\",author:\"Robert Kiyosaki\",category:\"financial-literacy\"},{text:\"Financial peace isn't the acquisition of stuff. It's learning to live on less than you make, so you can give money back and have money to invest.\",author:\"Dave Ramsey\",category:\"financial-literacy\"},{text:\"Do not save what is left after spending; instead spend what is left after saving.\",author:\"Warren Buffett\",category:\"financial-literacy\"},{text:\"The stock market is a device for transferring money from the impatient to the patient.\",author:\"Warren Buffett\",category:\"financial-literacy\"},{text:\"Know what you own, and know why you own it.\",author:\"Peter Lynch\",category:\"financial-literacy\"},{text:\"The individual investor should act consistently as an investor and not as a speculator.\",author:\"Ben Graham\",category:\"financial-literacy\"},{text:\"Price is what you pay. Value is what you get.\",author:\"Warren Buffett\",category:\"financial-literacy\"},{text:\"The goal isn't more money. The goal is living life on your terms.\",author:\"Chris Brogan\",category:\"financial-freedom\"},{text:\"Financial freedom is available to those who learn about it and work for it.\",author:\"Robert Kiyosaki\",category:\"financial-freedom\"},{text:\"The rich invest in time, the poor invest in money.\",author:\"Warren Buffett\",category:\"financial-freedom\"},{text:\"Wealth is the ability to fully experience life.\",author:\"Henry David Thoreau\",category:\"financial-freedom\"},{text:\"It's not about having lots of money. It's about knowing how to manage the money you do have.\",author:\"Dave Ramsey\",category:\"financial-freedom\"},{text:\"Money is a terrible master but an excellent servant.\",author:\"P.T. Barnum\",category:\"financial-freedom\"},{text:\"The quickest way to double your money is to fold it in half and put it in your back pocket.\",author:\"Will Rogers\",category:\"financial-freedom\"},{text:\"The best time to plant a tree was 20 years ago. The second best time is now.\",author:\"Chinese Proverb\",category:\"motivation\"},{text:\"A journey of a thousand miles begins with a single step.\",author:\"Lao Tzu\",category:\"motivation\"},{text:\"Success is not final, failure is not fatal: it is the courage to continue that counts.\",author:\"Winston Churchill\",category:\"motivation\"},{text:\"The only way to do great work is to love what you do.\",author:\"Steve Jobs\",category:\"motivation\"},{text:\"Don't watch the clock; do what it does. Keep going.\",author:\"Sam Levenson\",category:\"motivation\"},{text:\"Wealth is not about having a lot of money; it's about having a lot of options.\",author:\"Chris Rock\",category:\"motivation\"},{text:\"Every time you borrow money, you're robbing your future self.\",author:\"Nathan W. Morris\",category:\"motivation\"},{text:\"The habit of saving is itself an education; it fosters every virtue, teaches self-denial, cultivates the sense of order, trains to forethought, and so broadens the mind.\",author:\"T.T. Munger\",category:\"motivation\"},{text:\"Too many people spend money they haven't earned, to buy things they don't want, to impress people they don't like.\",author:\"Will Rogers\",category:\"motivation\"},{text:\"A budget is telling your money where to go instead of wondering where it went.\",author:\"Dave Ramsey\",category:\"motivation\"},{text:\"Beware of little expenses. A small leak will sink a great ship.\",author:\"Benjamin Franklin\",category:\"motivation\"},{text:\"Never spend your money before you have earned it.\",author:\"Thomas Jefferson\",category:\"motivation\"}];function V0(){return I0[Math.floor(Math.random()*I0.length)]}function oN({isOpen:i,onClose:r,achievementId:c}){const[u,m]=A.useState(V0());if(A.useEffect(()=>{i&&c&&(m(V0()),ji({particleCount:150,spread:100,origin:{y:.6},colors:[\"#FFD700\",\"#FFA500\",\"#FF6347\",\"#9370DB\",\"#3CB371\"]}))},[i,c]),!c)return null;const g=gp(c);return g?n.jsx(Bs,{open:i,onOpenChange:r,children:n.jsxs(Ls,{className:\"w-[270px] sm:w-full sm:max-w-md bg-slate-950 border-[#38383A] p-0 overflow-hidden rounded-[32px] shadow-2xl transition-all duration-500\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 sm:w-64 sm:h-64 bg-yellow-500 blur-[60px] sm:blur-[120px] opacity-10 -mr-16 -mt-16 sm:-mr-32 sm:-mt-32\"}),n.jsx(\"div\",{className:\"absolute bottom-0 left-0 w-24 h-24 sm:w-48 sm:h-48 bg-indigo-500 blur-[50px] sm:blur-[100px] opacity-5 -ml-12 -mb-12 sm:-ml-24 sm:-mb-24\"}),n.jsxs(qs,{className:\"px-6 sm:px-10 pt-8 sm:pt-12 pb-0 relative z-10\",children:[n.jsx(Is,{className:\"text-center text-xl sm:text-3xl font-black text-white tracking-tight transition-all\",children:\"Achievement Unlocked\"}),n.jsx(Vs,{className:\"text-center text-[8px] sm:text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] sm:tracking-[0.3em] mt-1 sm:mt-2 transition-all\",children:\"Protocol Milestone Verified\"})]}),n.jsxs(\"div\",{className:\"space-y-6 sm:space-y-10 py-8 sm:py-12 px-6 sm:px-10 relative z-10\",children:[n.jsxs(\"div\",{className:\"relative flex justify-center\",children:[n.jsx(Oe.div,{className:\"relative z-10\",initial:{scale:0,rotateY:0},animate:{scale:1,rotateY:[0,1080],transition:{scale:{duration:.8,ease:\"backOut\"},rotateY:{duration:4,ease:\"easeInOut\"}}},children:n.jsxs(\"div\",{className:\"relative\",children:[n.jsx(Oe.div,{className:\"absolute inset-0 bg-yellow-400 blur-3xl opacity-20 rounded-full\",animate:{scale:[1,1.3,1],opacity:[.2,.4,.2]},transition:{duration:3,repeat:1/0,ease:\"easeInOut\"}}),n.jsxs(\"div\",{className:\"relative w-32 h-32 sm:w-44 sm:h-44 bg-gradient-to-br from-yellow-400 via-orange-500 to-yellow-600 rounded-[32px] sm:rounded-[48px] flex items-center justify-center shadow-[0_15px_40px_rgba(234,179,8,0.25)] border-4 border-white/20 transition-all\",children:[n.jsx(\"span\",{className:\"text-5xl sm:text-7xl drop-shadow-2xl transition-all\",children:g.icon}),n.jsx(\"div\",{className:\"absolute inset-0 bg-gradient-to-tr from-white/10 to-transparent pointer-events-none rounded-[28px] sm:rounded-[44px]\"})]})]})}),n.jsxs(\"div\",{className:\"absolute inset-0 z-20 flex justify-center items-center pointer-events-none\",children:[n.jsx(Oe.div,{className:\"absolute w-32 h-32 sm:w-48 sm:h-48 bg-yellow-500/40 blur-[40px] sm:blur-[60px] rounded-full\",initial:{scale:0,opacity:0},animate:{scale:1.4,opacity:1},transition:{delay:.3,duration:1.2,ease:\"easeOut\"}}),n.jsx(Oe.div,{className:\"absolute w-24 h-24 sm:w-36 sm:h-36 bg-indigo-500/30 blur-[30px] sm:blur-[45px] rounded-full -ml-8 -mt-6 sm:-ml-12 sm:-mt-10\",initial:{scale:0,opacity:0},animate:{scale:1.8,opacity:.8},transition:{delay:.4,duration:1.2,ease:\"easeOut\"}}),n.jsx(Oe.div,{className:\"absolute w-20 h-20 sm:w-32 sm:h-32 bg-rose-500/30 blur-[25px] sm:blur-[40px] rounded-full ml-10 mt-8 sm:ml-16 sm:mt-12\",initial:{scale:0,opacity:0},animate:{scale:1.6,opacity:.8},transition:{delay:.5,duration:1.2,ease:\"easeOut\"}})]})]}),n.jsxs(Oe.div,{className:\"text-center space-y-2 sm:space-y-4\",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:.6},children:[n.jsx(\"h3\",{className:\"text-lg sm:text-3xl font-black bg-gradient-to-r from-yellow-200 via-yellow-500 to-yellow-200 bg-clip-text text-transparent tracking-tight transition-all\",children:g.name}),n.jsx(\"p\",{className:\"text-slate-400 font-bold text-[11px] sm:text-sm leading-relaxed max-w-[200px] sm:max-w-[280px] mx-auto transition-all\",children:g.description})]}),n.jsx(Oe.div,{className:\"flex justify-center\",initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},children:n.jsxs(\"div\",{className:\"flex items-center gap-3 sm:gap-4\",children:[n.jsx(\"div\",{className:\"h-px w-12 sm:w-20 bg-gradient-to-r from-transparent via-white/10 to-transparent\"}),n.jsx(\"div\",{className:\"w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full bg-yellow-500/50 blur-[1px] animate-pulse\"}),n.jsx(\"div\",{className:\"h-px w-12 sm:w-20 bg-gradient-to-r from-transparent via-white/10 to-transparent\"})]})}),n.jsxs(Oe.div,{className:\"p-4 sm:p-8 bg-white/5 rounded-2xl sm:rounded-[32px] border border-white/5 relative overflow-hidden transition-all\",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:1},children:[n.jsx(\"div\",{className:\"absolute top-0 left-0 w-12 h-12 bg-indigo-500 blur-2xl opacity-5\"}),n.jsxs(\"div\",{className:\"flex items-start gap-3 sm:gap-6 relative z-10 text-left\",children:[n.jsx(\"span\",{className:\"text-xl sm:text-3xl pt-0 opacity-40\",children:'\"'}),n.jsxs(\"div\",{className:\"flex-1\",children:[n.jsx(\"p\",{className:\"text-[10px] sm:text-sm font-bold italic text-slate-300 leading-snug sm:leading-relaxed tracking-tight transition-all\",children:u.text}),n.jsxs(\"div\",{className:\"flex items-center gap-2 sm:gap-4 mt-3 sm:mt-6 transition-all\",children:[n.jsx(\"div\",{className:\"h-px flex-1 bg-white/5\"}),n.jsxs(\"p\",{className:\"text-[8px] sm:text-[10px] font-black text-slate-500 uppercase tracking-widest shrink-0\",children:[\"— \",u.author]})]})]})]})]})]})]})}):null}const cN=({accounts:i,goals:r,liabilities:c,expenses:u,emergencyFundAmount:m=0})=>{const g=A.useMemo(()=>i.filter(f=>f.type===\"bank\"||f.type===\"cash\").reduce((f,N)=>f+N.balance,0),[i]),h=A.useMemo(()=>i.filter(f=>f.type===\"credit_card\").reduce((f,N)=>f+Math.abs(N.balance),0),[i]),y=A.useMemo(()=>{const f=c.reduce((M,O)=>M+(O.emiAmount||0),0),N=u.filter(M=>M.isRecurring).reduce((M,O)=>M+O.amount,0);return f+N},[c,u]),p=A.useMemo(()=>r.reduce((N,M)=>N+M.currentAmount,0)+(m||0),[r,m]),x=A.useMemo(()=>p+y,[p,y]),v=A.useMemo(()=>{const f=g-x;return Math.max(0,f)},[g,x]);return{totalBankBalance:g,totalCreditUsage:h,totalCommitments:y,shadowWalletTotal:p,totalReserved:x,availableToSpend:v}},bl=({children:i,icon:r,variant:c=\"blue\",glow:u=!0,className:m,...g})=>{const h={blue:\"border-blue-500/50 text-blue-400 hover:border-blue-500 hover:shadow-[0_0_20px_rgba(59,130,246,0.4)] shadow-[0_0_10px_rgba(59,130,246,0.2)]\",green:\"border-emerald-500/50 text-emerald-400 hover:border-emerald-500 hover:shadow-[0_0_20px_rgba(16,185,129,0.4)] shadow-[0_0_10px_rgba(16,185,129,0.2)]\",purple:\"border-purple-500/50 text-purple-400 hover:border-purple-500 hover:shadow-[0_0_20px_rgba(168,85,247,0.4)] shadow-[0_0_10px_rgba(168,85,247,0.2)]\",rose:\"border-rose-500/50 text-rose-400 hover:border-rose-500 hover:shadow-[0_0_20px_rgba(244,63,94,0.4)] shadow-[0_0_10px_rgba(244,63,94,0.2)]\"};return n.jsxs(\"button\",{className:ct(\"relative group flex items-center justify-center gap-2 px-6 h-11\",\"bg-[#0A141E]/80 backdrop-blur-md border-2 rounded-2xl transition-all duration-300\",\"font-mono font-bold uppercase tracking-widest text-[10px]\",\"hover:scale-[1.02] active:scale-[0.98]\",h[c],m),...g,children:[r&&n.jsx(r,{className:\"w-4 h-4 transition-all duration-700 ease-quantum group-hover:rotate-[720deg] active:-rotate-12\"}),n.jsx(\"span\",{children:i})]})};function uN({isOpen:i,onClose:r,accounts:c,goals:u,currency:m,destinationType:g,emergencyFund:h,onAllocate:y,liabilities:p=[],expenses:x=[]}){const[v,f]=A.useState(\"\"),[N,M]=A.useState(\"\"),[O,B]=A.useState(\"\"),[L,R]=A.useState(!1),[P,V]=A.useState(!1),{availableToSpend:S,totalBankBalance:se,shadowWalletTotal:he,totalCommitments:ve}=cN({accounts:c,goals:u,liabilities:p,expenses:x,emergencyFundAmount:h?.currentAmount||0});A.useEffect(()=>{if(i&&!v&&c.length>0){const C=c.filter(Y=>Y.type===\"bank\"||Y.type===\"cash\");if(C.length>0){const Y=C.find(oe=>oe.balance>=S)||[...C].sort((oe,ge)=>ge.balance-oe.balance)[0];f(Y.id)}}},[i,S,c,v]);const fe=c.find(C=>C.id===v),ye=u.find(C=>C.id===N),Se=parseFloat(O)||0,qe=()=>{if(S>0){if(B(S.toString()),g===\"goal\"&&!N&&u.length>0){const C=[...u].sort((Y,oe)=>{const ge=new Date(Y.targetDate).getTime(),z=new Date(oe.targetDate).getTime();if(ge!==z)return ge-z;const T=Y.currentAmount/Y.targetAmount,re=oe.currentAmount/oe.targetAmount;return T-re});M(C[0].id),J.info(`Suggested: ${C[0].name} based on timeline & progress`,{icon:n.jsx(bn,{className:\"w-4 h-4 text-blue-400\"})})}}else J.error(\"No surplus liquidity available for auto-fill\")},Te=()=>{if(!v){J.error(\"Please select an account\");return}if(g===\"goal\"&&!N){J.error(\"Please select a goal\");return}if(!O||Se<=0){J.error(\"Please enter a valid amount\");return}if(fe&&Se>fe.balance){J.error(\"Insufficient balance in selected account\");return}R(!0)},ee=()=>{y({accountId:v,destinationId:g===\"goal\"?N:\"emergency-fund\",amount:Se,destinationType:g}),f(\"\"),M(\"\"),B(\"\"),R(!1),r()},me=()=>{R(!1)},G=()=>{f(\"\"),M(\"\"),B(\"\"),R(!1),V(!1),r()};return n.jsx(Bs,{open:i,onOpenChange:G,children:n.jsx(Ls,{className:\"max-w-md bg-black border-white/5 text-white p-0 custom-scrollbar sq-2xl overflow-hidden\",children:n.jsxs(\"div\",{className:\"max-h-[85vh] overflow-y-auto p-8 custom-scrollbar\",children:[n.jsxs(qs,{className:\"mb-6\",children:[n.jsx(Is,{className:\"text-xl font-black tracking-tight text-white mb-1\",children:g===\"goal\"?\"🎯 ALLOCATE TO GOAL\":\"🛡️ ALLOCATE TO RESERVE\"}),n.jsxs(Vs,{className:\"text-slate-500 text-[10px] uppercase font-black tracking-widest\",children:[\"Protocol: Move liquidity from account to \",g===\"goal\"?\"savings milestone\":\"emergency reserve\"]})]}),L?n.jsxs(\"div\",{className:\"space-y-6 py-4\",children:[n.jsx(\"div\",{className:\"text-center pt-2\",children:n.jsx(\"p\",{className:\"text-[10px] text-emerald-500 uppercase font-black tracking-[0.2em] animate-pulse\",children:\"Capital Allocation Protocol Ready\"})}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"div\",{className:\"p-5 bg-white/5 sq-md border border-white/10 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 p-2 opacity-5\",children:n.jsx(Hu,{className:\"w-8 h-8\"})}),n.jsx(\"p\",{className:\"text-[8px] text-slate-500 uppercase font-black tracking-widest mb-3 opacity-60\",children:\"Debit Source\"}),n.jsx(\"p\",{className:\"font-black text-sm text-white tracking-tight\",children:fe?.name}),n.jsxs(\"div\",{className:\"mt-4 space-y-2.5\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-medium\",children:[n.jsx(\"span\",{className:\"text-slate-400 uppercase tracking-tighter\",children:\"Current Liquidity\"}),n.jsx(\"span\",{className:\"font-mono text-white\",children:$e(fe?.balance||0,m)})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-bold text-rose-500\",children:[n.jsx(\"span\",{className:\"uppercase tracking-tighter\",children:\"Debit Volume\"}),n.jsxs(\"span\",{className:\"font-mono\",children:[\"-\",$e(Se,m)]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"flex justify-between text-xs font-black\",children:[n.jsx(\"span\",{className:\"text-slate-500 uppercase tracking-widest\",children:\"Post-Debit Projection\"}),n.jsx(\"span\",{className:\"text-blue-400 font-mono\",children:$e((fe?.balance||0)-Se,m)})]})]})]}),n.jsx(\"div\",{className:\"flex justify-center -my-2 relative z-10\",children:n.jsx(\"div\",{className:\"w-10 h-10 bg-blue-600 sq-md flex items-center justify-center shadow-[0_0_20px_rgba(37,99,235,0.3)] border border-blue-400/20\",children:n.jsx(ap,{className:\"w-5 h-5 text-white\"})})}),n.jsxs(\"div\",{className:`p-5 sq-md border relative overflow-hidden ${g===\"goal\"?\"bg-emerald-500/5 border-emerald-500/20\":\"bg-blue-500/5 border-blue-500/20\"}`,children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 p-2 opacity-10\",children:g===\"goal\"?n.jsx(bn,{className:\"w-8 h-8 text-emerald-500\"}):n.jsx(_s,{className:\"w-8 h-8 text-blue-500\"})}),n.jsx(\"p\",{className:\"text-[8px] text-slate-500 uppercase font-black tracking-widest mb-3 opacity-60\",children:\"Credit Destination\"}),n.jsxs(\"div\",{className:\"flex items-center gap-2 mb-4\",children:[n.jsx(\"span\",{className:\"text-xl\",children:g===\"goal\"?ye?.emoji:\"🛡️\"}),n.jsx(\"p\",{className:\"font-black text-sm text-white tracking-tight\",children:g===\"goal\"?ye?.name:\"Emergency Reserve\"})]}),n.jsxs(\"div\",{className:\"space-y-2.5\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-medium\",children:[n.jsx(\"span\",{className:\"text-slate-400 uppercase tracking-tighter\",children:\"Current Level\"}),n.jsx(\"span\",{className:\"font-mono text-white\",children:$e((g===\"goal\"?ye?.currentAmount:h?.currentAmount)||0,m)})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-bold text-emerald-400\",children:[n.jsx(\"span\",{className:\"uppercase tracking-tighter\",children:\"Credit Volume\"}),n.jsxs(\"span\",{className:\"font-mono\",children:[\"+\",$e(Se,m)]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"flex justify-between text-xs font-black\",children:[n.jsx(\"span\",{className:\"text-slate-500 uppercase tracking-widest\",children:\"Post-Credit Value\"}),n.jsx(\"span\",{className:\"text-emerald-400 font-mono\",children:$e(((g===\"goal\"?ye?.currentAmount:h?.currentAmount)||0)+Se,m)})]})]})]})]}),n.jsx(\"div\",{className:\"p-4 bg-amber-500/5 border border-amber-500/20 sq-md\",children:n.jsxs(\"div\",{className:\"flex gap-3\",children:[n.jsx(zu,{className:\"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5\"}),n.jsxs(\"div\",{className:\"text-[10px]\",children:[n.jsx(\"p\",{className:\"font-black text-amber-400 uppercase tracking-widest mb-1\",children:\"Node Equilibrium Warning\"}),n.jsxs(\"p\",{className:\"text-amber-500/70 font-bold leading-relaxed\",children:[\"Net Liquidity and \",fe?.name,\" reserves will be reduced by \",$e(Se,m),\" immediately. This action is final.\"]})]})]})}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(bl,{onClick:me,className:\"flex-1 h-12 text-slate-500 hover:text-white border-white/5 font-black tracking-[0.2em]\",children:\"Re-Configure\"}),n.jsx(bl,{onClick:ee,className:\"flex-1 h-12 bg-emerald-600/20 text-emerald-400 border-emerald-500/30 font-black tracking-[0.2em] shadow-lg shadow-emerald-500/10\",children:\"Execute Move\"})]})]}):n.jsxs(\"div\",{className:\"space-y-6\",children:[S>0&&n.jsxs(\"div\",{className:\"relative group overflow-hidden sq-xl border border-emerald-500/20 bg-emerald-500/5 p-5 transition-all hover:bg-emerald-500/10 mb-2\",children:[n.jsx(Fp,{variant:\"savings\"}),n.jsxs(\"div\",{className:\"relative z-10 flex flex-col gap-4\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-10 h-10 bg-emerald-500/20 sq-md flex items-center justify-center border border-emerald-500/30\",children:n.jsx(bn,{className:\"w-5 h-5 text-emerald-400\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-[9px] text-emerald-500/70 font-black uppercase tracking-widest\",children:\"Surplus Detected\"}),n.jsx(\"h4\",{className:\"text-xl font-black text-white tabular-nums\",children:$e(S,m)})]})]}),n.jsx(\"button\",{onClick:()=>V(!P),className:\"p-2 hover:bg-white/5 rounded-full transition-colors text-slate-500 hover:text-white\",title:\"Show Calculation\",children:P?n.jsx(Vu,{className:\"w-4 h-4\"}):n.jsx(xy,{className:\"w-4 h-4\"})})]}),P&&n.jsxs(\"div\",{className:\"py-3 border-t border-emerald-500/10 space-y-2 animate-in fade-in slide-in-from-top-2 duration-300\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-emerald-500/60 font-medium\",children:[n.jsx(\"span\",{children:\"Total Liquidity\"}),n.jsx(\"span\",{children:$e(se,m)})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-rose-500/60 font-medium\",children:[n.jsx(\"span\",{children:\"Shadow Wallet (Goals + EF)\"}),n.jsxs(\"span\",{children:[\"-\",$e(he,m)]})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-rose-500/60 font-medium pb-2 border-b border-emerald-500/10\",children:[n.jsx(\"span\",{children:\"Total Commitments (Bills)\"}),n.jsxs(\"span\",{children:[\"-\",$e(ve,m)]})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-emerald-400 font-bold uppercase pt-1\",children:[n.jsx(\"span\",{children:\"Available Safety Margin\"}),n.jsx(\"span\",{children:$e(S,m)})]})]}),n.jsx(bl,{onClick:()=>{qe(),S>fe?.balance&&J.warning(\"Surplus exceeds selected account balance. Source adjusted.\")},className:\"w-full h-11 bg-emerald-500/20 text-emerald-400 border-emerald-500/30 font-black tracking-widest\",children:\"Allocate All Surplus\"})]})]}),n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(Re,{htmlFor:\"allocate-from-account\",className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 mb-2 block\",children:\"Source Node\"}),n.jsxs(ha,{value:v,onValueChange:f,children:[n.jsx(ga,{id:\"allocate-from-account\",name:\"fromAccountId\",className:\"bg-black border-white/5 sq-md h-14 text-white focus:ring-1 focus:ring-blue-500/50\",children:n.jsx(pa,{placeholder:\"Select Capital Source\"})}),n.jsx(xa,{className:\"bg-black border-white/10 text-white sq-xl\",children:c.map(C=>n.jsx(vt,{value:C.id,className:\"hover:bg-white/5\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between w-full\",children:[n.jsxs(\"span\",{children:[C.icon,\" \",C.name]}),n.jsx(\"span\",{className:\"text-[10px] text-slate-500 ml-4 font-mono\",children:$e(C.balance,m)})]})},C.id))})]}),fe&&n.jsxs(\"p\",{className:\"text-[10px] text-slate-500 mt-2 italic px-1\",children:[\"Available Liquidity: \",$e(fe.balance,m)]})]}),g===\"goal\"?n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(Re,{htmlFor:\"allocate-to-goal\",className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 mb-2 block\",children:\"Target Milestone\"}),n.jsxs(ha,{value:N,onValueChange:M,children:[n.jsx(ga,{id:\"allocate-to-goal\",name:\"toGoalId\",className:\"bg-black border-white/5 sq-md h-14 text-white focus:ring-1 focus:ring-emerald-500/50\",children:n.jsx(pa,{placeholder:\"Choose Destination Goal\"})}),n.jsx(xa,{className:\"bg-black border-white/10 text-white sq-xl\",children:u.map(C=>{const Y=C.currentAmount/C.targetAmount*100;return n.jsx(vt,{value:C.id,className:\"hover:bg-white/5\",children:n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(\"span\",{className:\"text-lg\",children:C.emoji}),n.jsxs(\"div\",{className:\"min-w-0\",children:[n.jsx(\"div\",{className:\"font-bold text-xs uppercase tracking-tight\",children:C.name}),n.jsxs(\"div\",{className:\"text-[9px] text-slate-500 font-mono\",children:[Math.round(Y),\"% SYNCHRONIZED • \",$e(C.currentAmount,m)]})]})]})},C.id)})})]})]}):n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(Re,{className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 mb-2 block\",children:\"Stability Reserve\"}),n.jsx(\"div\",{className:\"p-4 bg-white/5 border border-white/10 sq-md\",children:n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-10 h-10 bg-blue-500/10 sq-md flex items-center justify-center border border-blue-500/20\",children:\"🛡️\"}),n.jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[n.jsx(\"p\",{className:\"font-black text-xs uppercase tracking-widest text-white\",children:\"Emergency Fund\"}),h&&n.jsxs(\"p\",{className:\"text-[9px] text-slate-500 font-mono mt-1\",children:[$e(h.currentAmount,m),\" / \",$e(h.targetAmount,m)]})]})]})})]}),n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(\"div\",{className:\"flex justify-between items-center mb-1\",children:n.jsx(Re,{htmlFor:\"allocate-amount\",className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 block\",children:\"Contribution Volume\"})}),n.jsxs(\"div\",{className:\"relative\",children:[n.jsx(\"span\",{className:\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500\",children:m===\"INR\"?\"₹\":\"$\"}),n.jsx(Pt,{id:\"allocate-amount\",name:\"amount\",type:\"number\",placeholder:\"0\",value:O,onChange:C=>B(C.target.value),className:\"pl-8 bg-black border-white/5 h-12\",min:\"0\",step:\"0.01\"})]}),fe&&Se>fe.balance&&n.jsxs(\"div\",{className:\"flex items-center gap-2 text-sm text-red-600\",children:[n.jsx(zu,{className:\"w-4 h-4\"}),n.jsx(\"span\",{children:\"Amount exceeds available balance\"})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(bl,{onClick:G,className:\"flex-1 h-12 text-slate-500 hover:text-white border-white/5 font-black tracking-[0.2em]\",children:\"Abort\"}),n.jsx(bl,{onClick:Te,className:\"flex-1 h-12 bg-blue-600/20 text-blue-400 border-blue-500/30 font-black tracking-[0.2em] shadow-lg shadow-blue-500/10\",children:\"Preview Mode\"})]})]})]})})})}const dN=[{name:\"HDFC Bank\",icon:\"🏦\",color:\"#1d4ed8\",type:\"bank\"},{name:\"ICICI Bank\",icon:\"🏦\",color:\"#ea580c\",type:\"bank\"},{name:\"State Bank of India\",icon:\"🏦\",color:\"#2563eb\",type:\"bank\"},{name:\"Axis Bank\",icon:\"🏦\",color:\"#9d174d\",type:\"bank\"},{name:\"Kotak Mahindra Bank\",icon:\"🏦\",color:\"#dc2626\",type:\"bank\"},{name:\"Bank of America\",icon:\"🏦\",color:\"#0033aa\",type:\"bank\"},{name:\"Chase Bank\",icon:\"🏦\",color:\"#117aca\",type:\"bank\"},{name:\"Wells Fargo\",icon:\"🏦\",color:\"#d71e28\",type:\"bank\"},{name:\"HSBC\",icon:\"🏦\",color:\"#db0011\",type:\"bank\"},{name:\"Barclays\",icon:\"🏦\",color:\"#00aeef\",type:\"bank\"},{name:\"Standard Chartered\",icon:\"🏦\",color:\"#00945e\",type:\"bank\"},{name:\"Citibank\",icon:\"🏦\",color:\"#003b70\",type:\"bank\"},{name:\"DBS Bank\",icon:\"🏦\",color:\"#ff0000\",type:\"bank\"},{name:\"Federal Bank\",icon:\"🏦\",color:\"#0b5a91\",type:\"bank\"},{name:\"American Express\",icon:\"💳\",color:\"#006fcf\",type:\"credit_card\"},{name:\"Discover\",icon:\"💳\",color:\"#ff6600\",type:\"credit_card\"},{name:\"Capital One\",icon:\"💳\",color:\"#d22e2e\",type:\"credit_card\"},{name:\"Goldman Sachs\",icon:\"🏦\",color:\"#725a34\",type:\"bank\"},{name:\"Morgan Stanley\",icon:\"🏦\",color:\"#000033\",type:\"bank\"},{name:\"Apple Card\",icon:\"💳\",color:\"#000000\",type:\"credit_card\"},{name:\"PayPal\",icon:\"💳\",color:\"#003087\",type:\"credit_card\"},{name:\"Revolut\",icon:\"💳\",color:\"#000000\",type:\"credit_card\"},{name:\"Monzo\",icon:\"💳\",color:\"#ff4d4f\",type:\"credit_card\"}];function fN({accounts:i,currency:r,onCreateAccount:c,onUpdateAccount:u,onDeleteAccount:m}){const[g,h]=A.useState(!1),[y,p]=A.useState(null),[x,v]=A.useState({name:\"\",type:\"bank\",balance:0,color:gu[0],icon:xu[0].value,creditLimit:0,safeLimitPercentage:30,serviceChargePercentage:0,statementDate:1}),[f,N]=A.useState([]),M=S=>{S?(p(S),v({name:S.name,type:S.type,balance:S.balance,color:S.color,icon:S.icon,creditLimit:S.creditLimit||0,safeLimitPercentage:S.safeLimitPercentage||30,serviceChargePercentage:S.serviceChargePercentage||0,statementDate:S.statementDate||1})):(p(null),v({name:\"\",type:\"bank\",balance:0,color:gu[0],icon:xu[0].value,creditLimit:0,safeLimitPercentage:30,serviceChargePercentage:0,statementDate:1})),N([]),h(!0)},O=S=>{if(v({...x,name:S}),S.length>1){const se=dN.filter(he=>he.name.toLowerCase().includes(S.toLowerCase())).slice(0,4);N(se)}else N([])},B=S=>{v({...x,name:S.name,type:S.type,icon:S.icon,color:S.color}),N([])},L=async S=>{if(S.preventDefault(),!x.name.trim()){J.error(\"Please enter an account name\");return}try{y?await u(y.id,x):await c(x),h(!1)}catch(se){console.error(\"Error saving account:\",se)}},R=async S=>{if(confirm(\"Are you sure you want to delete this account? This action cannot be undone.\"))try{await m(S)}catch(se){console.error(\"Error deleting account:\",se)}};return n.jsxs(\"div\",{className:\"space-y-12 animate-in fade-in slide-in-from-bottom-4 duration-700 px-4 pb-24\",children:[n.jsxs(\"div\",{className:\"flex items-end justify-between gap-6\",children:[n.jsxs(\"div\",{className:\"min-w-0\",children:[n.jsx(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tight leading-none mb-3 truncate\",children:\"Accounts & Cards\"}),n.jsxs(\"div\",{className:\"flex flex-wrap gap-2 mb-3\",children:[n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-emerald-500 bg-emerald-500/10 px-2 py-0.5 rounded-lg border border-emerald-500/20 whitespace-nowrap\",children:[i.filter(S=>S.type===\"bank\").length,\" Banks\"]}),n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-rose-500 bg-rose-500/10 px-2 py-0.5 rounded-lg border border-rose-500/20 whitespace-nowrap\",children:[i.filter(S=>S.type===\"credit_card\").length,\" Credit\"]}),n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-amber-500 bg-amber-500/10 px-2 py-0.5 rounded-lg border border-amber-500/20 whitespace-nowrap\",children:[i.filter(S=>S.type===\"cash\").length,\" Cash\"]}),n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-blue-500 bg-blue-500/10 px-2 py-0.5 rounded-lg border border-blue-500/20 whitespace-nowrap\",children:[i.filter(S=>S.type===\"investment\").length,\" Holding\"]})]}),n.jsx(\"p\",{className:\"text-slate-500 font-bold max-w-md text-[10px] truncate\",children:\"Monitor liquidity across core reservoirs and credit pools.\"})]}),n.jsxs(Ge,{onClick:()=>M(),className:\"bg-emerald-600 hover:bg-emerald-500 text-white rounded-xl px-6 h-12 font-bold shadow-lg shadow-emerald-600/20 transition-all active:scale-95 shrink-0\",children:[n.jsx(Nl,{className:\"w-4 h-4 sm:mr-2\"}),n.jsx(\"span\",{className:\"hidden sm:inline\",children:\"Add Account\"}),n.jsx(\"span\",{className:\"sm:hidden\",children:\"Add\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(by,{className:\"w-3.5 h-3.5\"}),\"Bank Accounts\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(S=>S.type===\"bank\").map(S=>n.jsx(P,{account:S},S.id)),i.filter(S=>S.type===\"bank\").length===0&&n.jsx(V,{message:\"No bank accounts detected.\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(yy,{className:\"w-3.5 h-3.5\"}),\"Credit Pools (Cards)\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(S=>S.type===\"credit_card\").map(S=>n.jsx(P,{account:S},S.id)),i.filter(S=>S.type===\"credit_card\").length===0&&n.jsx(V,{message:\"No credit pools detected.\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(Hu,{className:\"w-3.5 h-3.5\"}),\"Cash in Hand\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(S=>S.type===\"cash\").map(S=>n.jsx(P,{account:S},S.id)),i.filter(S=>S.type===\"cash\").length===0&&n.jsx(V,{message:\"No physical liquid reservoirs detected.\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(Si,{className:\"w-3.5 h-3.5\"}),\"Investment Holding Nodes\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(S=>S.type===\"investment\").map(S=>n.jsx(P,{account:S},S.id)),i.filter(S=>S.type===\"investment\").length===0&&n.jsx(\"div\",{className:\"md:col-span-2 lg:col-span-3 p-8 border border-dashed border-white/5 squircle-22 flex items-center justify-center text-slate-600 font-bold text-xs\",children:\"No investment nodes detected. Link them to track growth separately.\"})]})]}),n.jsx(Bs,{open:g,onOpenChange:h,children:n.jsxs(Ls,{className:\"max-w-md max-h-[90vh] overflow-y-auto bg-slate-950 border-white/10 text-white squircle-22 p-8 custom-scrollbar\",children:[n.jsxs(qs,{children:[n.jsx(Is,{className:\"text-3xl font-black tracking-tight text-white mb-2\",children:y?\"Refine Account\":\"New Liquidity Reservoir\"}),n.jsx(Vs,{className:\"text-slate-500 font-bold mb-6\",children:\"Establish a new liquidity pool in the Obsidian system.\"})]}),n.jsxs(\"form\",{onSubmit:L,className:\"space-y-8\",children:[n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"name\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Account Identity\"}),n.jsx(Pt,{id:\"name\",name:\"name\",value:x.name,onChange:S=>O(S.target.value),placeholder:\"e.g. Mercury Checking\",required:!0,className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white focus:ring-emerald-500/50\",autoComplete:\"off\"}),f.length>0&&n.jsxs(\"div\",{className:\"mt-3 p-4 bg-indigo-500/5 border border-indigo-500/10 squircle-12 flex items-start gap-4 animate-in fade-in zoom-in-95 duration-300\",children:[n.jsx(bn,{className:\"w-4 h-4 text-indigo-400 mt-1 flex-shrink-0\"}),n.jsxs(\"div\",{className:\"flex-1\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-widest text-indigo-300 mb-3 opacity-60\",children:\"Intelligence Suggested\"}),n.jsx(\"div\",{className:\"grid grid-cols-1 gap-2\",children:f.map(S=>n.jsxs(\"button\",{type:\"button\",onClick:()=>B(S),className:\"flex items-center gap-3 p-2.5 squircle-12 bg-white/5 hover:bg-white/10 transition-all group border border-white/5\",children:[n.jsx(\"span\",{className:\"text-lg group-hover:scale-110 transition-transform\",children:S.icon}),n.jsx(\"span\",{className:\"text-xs font-bold text-slate-300 group-hover:text-white transition-colors\",children:S.name})]},S.name))})]})]})]}),n.jsxs(\"div\",{className:\"grid grid-cols-3 gap-4\",children:[n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${x.type===\"bank\"?\"border-emerald-500 bg-emerald-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>v({...x,type:\"bank\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-emerald-500/20 flex items-center justify-center text-xl mb-2\",children:\"🏦\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Bank Reservoir\"})]}),n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${x.type===\"credit_card\"?\"border-rose-500 bg-rose-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>v({...x,type:\"credit_card\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-rose-500/20 flex items-center justify-center text-xl mb-2\",children:\"💳\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Credit Pool\"})]}),n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${x.type===\"cash\"?\"border-amber-500 bg-amber-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>v({...x,type:\"cash\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-amber-500/20 flex items-center justify-center text-xl mb-2\",children:\"💵\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Cash in Hand\"})]}),n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${x.type===\"investment\"?\"border-blue-500 bg-blue-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>v({...x,type:\"investment\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-blue-500/20 flex items-center justify-center text-xl mb-2\",children:\"📈\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Growth Node\"})]})]}),n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"balance\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:x.type===\"bank\"||x.type===\"cash\"||x.type===\"investment\"?\"Initial Liquidity\":\"Current Spent Balance\"}),n.jsx(Os,{id:\"balance\",name:\"balance\",value:x.balance,onChange:S=>v({...x,balance:parseFloat(S)||0}),placeholder:\"0.00\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]}),x.type===\"credit_card\"&&n.jsxs(\"div\",{className:\"space-y-6 animate-in slide-in-from-top-4 duration-500\",children:[n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"creditLimit\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Total Credit Limit\"}),n.jsx(Os,{id:\"creditLimit\",name:\"creditLimit\",value:x.creditLimit,onChange:S=>v({...x,creditLimit:parseFloat(S)||0}),placeholder:\"e.g. 100000\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]}),n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"safeLimit\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Safe Use Threshold (%)\"}),n.jsx(Os,{id:\"safeLimit\",name:\"safeLimitPercentage\",value:x.safeLimitPercentage,onChange:S=>v({...x,safeLimitPercentage:parseFloat(S)||30}),placeholder:\"30\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]})]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"serviceCharge\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Svc Charge (%)\"}),n.jsx(Os,{id:\"serviceCharge\",name:\"serviceChargePercentage\",value:x.serviceChargePercentage,onChange:S=>v({...x,serviceChargePercentage:parseFloat(S)||0}),placeholder:\"0.0\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]}),n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"statementDate\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Statement Date\"}),n.jsxs(ha,{value:x.statementDate.toString(),onValueChange:S=>v({...x,statementDate:parseInt(S)}),children:[n.jsx(ga,{id:\"statementDate\",name:\"statementDate\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",children:n.jsx(pa,{})}),n.jsx(xa,{className:\"bg-slate-900 border-white/10 text-white\",children:[...Array(31)].map((S,se)=>n.jsx(vt,{value:(se+1).toString(),children:se+1},se+1))})]})]})]})]}),n.jsxs(\"div\",{children:[n.jsx(Re,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"System Icon\"}),n.jsx(\"div\",{className:\"grid grid-cols-6 sm:grid-cols-9 gap-2\",children:xu.map(S=>n.jsx(\"button\",{type:\"button\",onClick:()=>v({...x,icon:S.value}),className:`w-10 h-10 squircle-12 flex items-center justify-center text-lg border-2 transition-all ${x.icon===S.value?\"border-emerald-500 bg-emerald-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,children:S.value},S.value))})]}),n.jsxs(\"div\",{children:[n.jsx(Re,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Brand Color\"}),n.jsx(\"div\",{className:\"flex flex-wrap gap-3\",children:gu.map(S=>{const se={style:{\"--btn-color\":S}};return n.jsx(\"button\",{type:\"button\",onClick:()=>v({...x,color:S}),\"aria-label\":`Select color ${S}`,className:`w-8 h-8 rounded-full border-4 transition-all bg-[length:100%_100%] bg-[var(--btn-color)] ${x.color===S?\"border-white scale-110 shadow-lg shadow-white/20\":\"border-transparent hover:scale-105\"}`,...se},S)})})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Ge,{type:\"button\",variant:\"ghost\",onClick:()=>h(!1),className:\"flex-1 h-14 squircle-12 font-bold text-slate-500 hover:text-white\",children:\"Abort\"}),n.jsx(Ge,{type:\"submit\",className:\"flex-1 h-14 squircle-12 bg-emerald-600 hover:bg-emerald-500 text-white font-black shadow-lg shadow-emerald-600/20\",children:y?\"Update Account\":\"Ignite Account\"})]})]})]})})]});function P({account:S}){const se=S.type===\"credit_card\",he=se?(S.creditLimit||0)*(S.safeLimitPercentage||30)/100:0,ve=se&&S.creditLimit?Math.abs(S.balance)/S.creditLimit*100:0,fe=se&&ve<=(S.safeLimitPercentage||30);return n.jsxs(aa,{className:\"p-6 bg-slate-900/40 border-white/5 squircle-22 border hover:bg-slate-900/60 transition-all duration-300 group relative overflow-hidden\",children:[(()=>{const ye={style:{\"--card-glow\":S.color}};return n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20 bg-[var(--card-glow)]\",...ye})})(),n.jsxs(\"div\",{className:\"flex items-start justify-between mb-8 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[(()=>{const ye={style:{\"--icon-bg\":S.color+\"15\"}};return n.jsx(\"div\",{className:\"w-16 h-16 squircle-12 flex items-center justify-center text-3xl shadow-inner border border-white/5 group-hover:scale-105 transition-transform bg-[var(--icon-bg)]\",...ye,children:S.icon})})(),n.jsxs(\"div\",{className:\"min-w-0\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100 truncate\",children:S.name}),n.jsxs(\"div\",{className:\"flex items-center gap-1.5 mt-1\",children:[n.jsx(\"div\",{className:`w-1.5 h-1.5 rounded-full ${se?fe?\"bg-indigo-500\":\"bg-rose-500\":\"bg-emerald-500\"}`}),n.jsx(\"span\",{className:\"text-[10px] uppercase font-black tracking-widest text-slate-500\",children:se?\"Credit Pool\":\"Bank Account\"})]})]})]}),n.jsxs(\"div\",{className:\"flex gap-2\",children:[n.jsx(Ge,{variant:\"ghost\",title:\"Edit Account\",size:\"sm\",onClick:()=>M(S),className:\"w-8 h-8 p-0 squircle-12 hover:bg-white/5 text-slate-600 hover:text-white transition-all\",children:n.jsx(vy,{className:\"w-3.5 h-3.5\"})}),n.jsx(Ge,{variant:\"ghost\",title:\"Delete Account\",size:\"sm\",onClick:()=>R(S.id),className:\"w-8 h-8 p-0 squircle-12 hover:bg-rose-500/10 text-slate-600 hover:text-rose-400 transition-all\",children:n.jsx(Ai,{className:\"w-3.5 h-3.5\"})})]})]}),n.jsxs(\"div\",{className:\"pt-6 border-t border-white/5 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-end\",children:[n.jsxs(\"div\",{className:\"space-y-1\",children:[n.jsx(\"p\",{className:\"text-[10px] uppercase font-black tracking-widest text-slate-600\",children:se?\"Current Obligation\":\"Available Liquidity\"}),(()=>{const ye={style:{\"--balance-color\":S.color}};return n.jsx(\"h4\",{className:\"text-2xl font-black tabular-nums tracking-tight text-[var(--balance-color)]\",...ye,children:$e(S.balance,r)})})()]}),se&&S.creditLimit?n.jsxs(\"div\",{className:\"text-right\",children:[n.jsx(\"p\",{className:\"text-[9px] font-black text-slate-600 uppercase mb-1\",children:\"Limit Use\"}),n.jsxs(\"p\",{className:`text-xs font-black tabular-nums ${fe?\"text-indigo-400\":\"text-rose-400\"}`,children:[ve.toFixed(1),\"%\"]})]}):n.jsx(\"div\",{className:\"bg-white/5 px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest text-slate-500 border border-white/5\",children:\"Synced\"})]}),se&&S.creditLimit&&n.jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-white/5 flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"space-y-1\",children:[n.jsx(\"p\",{className:\"text-[8px] font-black text-slate-700 uppercase\",children:\"Safe Threshold\"}),n.jsx(\"p\",{className:\"text-[10px] font-black text-slate-500\",children:$e(he,r)})]}),S.serviceChargePercentage?n.jsxs(\"div\",{className:\"text-right space-y-1\",children:[n.jsx(\"p\",{className:\"text-[8px] font-black text-slate-700 uppercase\",children:\"Svc Charge\"}),n.jsxs(\"p\",{className:\"text-[10px] font-black text-slate-500\",children:[S.serviceChargePercentage,\"%\"]})]}):null,se&&S.statementDate&&n.jsxs(\"div\",{className:\"text-right space-y-1 ml-auto\",children:[n.jsx(\"p\",{className:\"text-[8px] font-black text-slate-700 uppercase\",children:\"Statement\"}),n.jsxs(\"p\",{className:\"text-[10px] font-black text-slate-500\",children:[\"Day \",S.statementDate]})]})]})]})]})}function V({message:S}){return n.jsx(\"div\",{className:\"py-12 text-center bg-slate-800/20 squircle-22 border border-dashed border-white/10 col-span-full\",children:n.jsx(\"p\",{className:\"text-sm text-slate-500 font-bold\",children:S})})}}function mN({isOpen:i,onClose:r,accounts:c,currency:u,onTransfer:m}){const[g,h]=A.useState(\"\"),[y,p]=A.useState(\"\"),[x,v]=A.useState(\"\"),[f,N]=A.useState(!1),M=c.find(V=>V.id===g),O=c.find(V=>V.id===y),B=parseFloat(x)||0,L=()=>{if(!g){J.error(\"Please select source reservoir\");return}if(!y){J.error(\"Please select destination reservoir\");return}if(g===y){J.error(\"Source and destination must be different\");return}if(!x||B<=0){J.error(\"Please enter a valid amount\");return}if(M&&B>M.balance){J.error(\"Insufficient funds in source reservoir\");return}N(!0)},R=()=>{m(g,y,B),P()},P=()=>{h(\"\"),p(\"\"),v(\"\"),N(!1),r()};return n.jsx(Bs,{open:i,onOpenChange:P,children:n.jsxs(Ls,{className:\"max-w-md max-h-[90vh] overflow-y-auto bg-[#020408] border-white/5 p-0 shadow-2xl custom-scrollbar text-white\",children:[n.jsxs(\"div\",{className:\"px-8 pt-10 pb-8 border-b border-white/5 relative overflow-hidden bg-indigo-500/5\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 blur-[60px] opacity-20 -mr-16 -mt-16 bg-indigo-500\"}),n.jsxs(qs,{className:\"relative z-10\",children:[n.jsxs(Is,{className:\"text-2xl font-black tracking-tighter text-slate-100 flex items-center gap-3\",children:[n.jsx(Ru,{className:\"w-6 h-6 text-indigo-400\"}),\"Capital Migration\"]}),n.jsx(Vs,{className:\"text-slate-500 font-bold text-[10px] uppercase tracking-[0.2em] mt-1\",children:\"Transfer between core liquidity reservoirs\"})]})]}),n.jsx(\"div\",{className:\"p-8\",children:f?n.jsxs(\"div\",{className:\"space-y-6 animate-in fade-in zoom-in-95 duration-300\",children:[n.jsxs(\"div\",{className:\"p-6 bg-slate-900/50 border border-white/5 rounded-3xl space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between gap-4\",children:[n.jsxs(\"div\",{className:\"flex-1 text-center space-y-2\",children:[n.jsx(\"div\",{className:\"w-12 h-12 rounded-2xl bg-slate-800 border border-white/10 flex items-center justify-center text-2xl mx-auto\",children:M?.icon}),n.jsx(\"p\",{className:\"text-[10px] font-black uppercase text-slate-500 truncate\",children:M?.name})]}),n.jsxs(\"div\",{className:\"flex flex-col items-center gap-1\",children:[n.jsx(Ru,{className:\"w-6 h-6 text-indigo-400 animate-pulse\"}),n.jsx(\"p\",{className:\"text-[10px] font-black text-indigo-400\",children:$e(B,u)})]}),n.jsxs(\"div\",{className:\"flex-1 text-center space-y-2\",children:[n.jsx(\"div\",{className:\"w-12 h-12 rounded-2xl bg-slate-800 border border-white/10 flex items-center justify-center text-2xl mx-auto\",children:O?.icon}),n.jsx(\"p\",{className:\"text-[10px] font-black uppercase text-slate-500 truncate\",children:O?.name})]})]}),n.jsxs(\"div\",{className:\"space-y-4 pt-4 border-t border-white/5\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-center text-xs\",children:[n.jsx(\"span\",{className:\"text-slate-500 font-bold\",children:\"Source New Balance\"}),n.jsx(\"span\",{className:\"text-rose-400 font-black\",children:$e((M?.balance||0)-B,u)})]}),n.jsxs(\"div\",{className:\"flex justify-between items-center text-xs\",children:[n.jsx(\"span\",{className:\"text-slate-500 font-bold\",children:\"Dest. New Balance\"}),n.jsx(\"span\",{className:\"text-emerald-400 font-black\",children:$e((O?.balance||0)+B,u)})]})]})]}),n.jsxs(\"div\",{className:\"p-4 bg-amber-500/5 border border-amber-500/10 rounded-2xl flex gap-3\",children:[n.jsx(wy,{className:\"w-5 h-5 text-amber-500 flex-shrink-0\"}),n.jsx(\"p\",{className:\"text-[10px] text-amber-200/60 font-medium leading-relaxed\",children:\"Notice: This migration will instantly adjust the liquidity status of both reservoirs. This action is recorded in the central protocol.\"})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Ge,{variant:\"ghost\",onClick:()=>N(!1),className:\"flex-1 h-12 rounded-2xl text-slate-500 font-bold hover:bg-white/5\",children:\"Back\"}),n.jsx(Ge,{onClick:R,className:\"flex-1 h-12 rounded-2xl bg-indigo-600 hover:bg-indigo-500 text-white font-black shadow-lg shadow-indigo-600/20 transition-all active:scale-95\",children:\"Confirm Migration\"})]})]}):n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(Re,{htmlFor:\"source-reservoir\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Source Reservoir\"}),n.jsxs(ha,{value:g,onValueChange:h,children:[n.jsx(ga,{id:\"source-reservoir\",className:\"h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-200 font-bold\",children:n.jsx(pa,{placeholder:\"Select source\"})}),n.jsx(xa,{className:\"bg-slate-900 border-white/5 max-h-[40vh]\",children:c.map(V=>n.jsx(vt,{value:V.id,className:\"focus:bg-white/5 focus:text-white\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between w-full pr-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-xl\",children:V.icon}),n.jsx(\"span\",{children:V.name})]}),n.jsx(\"span\",{className:\"text-xs font-black text-slate-500\",children:$e(V.balance,u)})]})},V.id))})]})]}),n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(Re,{htmlFor:\"dest-reservoir\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Destination Reservoir\"}),n.jsxs(ha,{value:y,onValueChange:p,children:[n.jsx(ga,{id:\"dest-reservoir\",className:\"h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-200 font-bold\",children:n.jsx(pa,{placeholder:\"Select destination\"})}),n.jsx(xa,{className:\"bg-slate-900 border-white/5 max-h-[40vh]\",children:c.map(V=>n.jsx(vt,{value:V.id,className:\"focus:bg-white/5 focus:text-white\",disabled:V.id===g,children:n.jsxs(\"div\",{className:\"flex items-center justify-between w-full pr-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-xl\",children:V.icon}),n.jsx(\"span\",{children:V.name})]}),n.jsx(\"span\",{className:\"text-xs font-black text-slate-500\",children:$e(V.balance,u)})]})},V.id))})]})]}),n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(Re,{htmlFor:\"migration-amount\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Capital Amount\"}),n.jsxs(\"div\",{className:\"relative group\",children:[n.jsx(\"div\",{className:\"absolute left-5 top-1/2 -translate-y-1/2 text-slate-500 font-bold group-focus-within:text-indigo-400 transition-colors\",children:u===\"INR\"?\"₹\":\"$\"}),n.jsx(Pt,{id:\"migration-amount\",name:\"amount\",type:\"number\",placeholder:\"0.00\",value:x,onChange:V=>v(V.target.value),className:\"pl-12 h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-100 font-black text-xl\"})]}),M&&B>M.balance&&n.jsxs(\"div\",{className:\"flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-rose-400 ml-1 animate-in slide-in-from-top-1\",children:[n.jsx(zu,{className:\"w-3 h-3\"}),n.jsx(\"span\",{children:\"Insufficient stability in source reservoir\"})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Ge,{variant:\"ghost\",onClick:P,className:\"flex-1 h-12 rounded-2xl text-slate-500 font-bold hover:bg-white/5\",children:\"Cancel\"}),n.jsx(Ge,{onClick:L,className:\"flex-1 h-12 rounded-2xl bg-indigo-600 hover:bg-indigo-500 text-white font-black shadow-lg shadow-indigo-600/20 transition-all active:scale-95\",children:\"Verify Migration\"})]})]})})]})})}function hN({onRefresh:i,children:r}){const c=A.useRef(0),[u,m]=A.useState(0),[g,h]=A.useState(!1),y=A.useRef(null),p=80,x=f=>{y.current&&y.current.scrollTop===0&&(c.current=f.touches[0].clientY)};A.useEffect(()=>{const f=M=>{if(c.current===0)return;const B=M.touches[0].clientY-c.current;if(B>0&&y.current&&y.current.scrollTop===0){M.cancelable&&M.preventDefault();const L=Math.min(B,p*1.5);L>=p&&u<p&&window.navigator.vibrate&&window.navigator.vibrate(10),m(L)}},N=y.current;return N&&N.addEventListener(\"touchmove\",f,{passive:!1}),()=>{N&&N.removeEventListener(\"touchmove\",f)}},[]);const v=async()=>{u>=p&&!g&&(h(!0),await i(),h(!1)),m(0),c.current=0};return n.jsxs(\"div\",{ref:y,className:\"relative overflow-y-auto\",onTouchStart:x,onTouchEnd:v,children:[n.jsx(Oe.div,{className:\"absolute top-0 left-0 right-0 flex justify-center items-center\",style:{height:u,opacity:u/p},animate:{y:g?0:-p},children:n.jsxs(\"div\",{className:\"flex flex-col items-center gap-2 py-4\",children:[n.jsx(Oe.div,{animate:{rotate:g?360:u/p*180},transition:{rotate:{duration:g?1:0,repeat:g?1/0:0,ease:\"linear\"}},children:n.jsx(Wr,{className:\"w-6 h-6 text-[#0A84FF]\"})}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-[0.2em] text-[#8E8E93]\",children:g?\"Synchronizing...\":u>=p?\"Relinquish to Sync\":\"Pull to Synchronize\"})]})}),n.jsx(Oe.div,{animate:{y:g?60:0},transition:{duration:.2},children:r})]})}function Rs({className:i,...r}){return n.jsx(\"div\",{\"data-slot\":\"skeleton\",className:ct(\"bg-accent animate-pulse rounded-md\",i),...r})}function pN(){return n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(aa,{className:\"p-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 mb-4\",children:[n.jsx(Rs,{className:\"w-12 h-12 rounded-lg\"}),n.jsxs(\"div\",{className:\"space-y-2 flex-1\",children:[n.jsx(Rs,{className:\"h-5 w-32\"}),n.jsx(Rs,{className:\"h-4 w-48\"})]})]}),n.jsx(\"div\",{className:\"grid grid-cols-3 gap-3\",children:[1,2,3].map(i=>n.jsx(\"div\",{className:\"space-y-2\",children:n.jsx(Rs,{className:\"h-20 w-full rounded-lg\"})},i))})]}),[1,2,3].map(i=>n.jsx(aa,{className:\"p-6\",children:n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(Rs,{className:\"h-6 w-48\"}),n.jsx(Rs,{className:\"h-4 w-full\"}),n.jsx(Rs,{className:\"h-4 w-3/4\"})]})},i))]})}function gN(i,r,c=30){let u=0;const m=h=>{u=h.touches[0].clientX},g=h=>{const p=h.touches[0].clientX-u;u<c&&p>30&&(h.cancelable&&h.preventDefault(),window.navigator.vibrate&&window.navigator.vibrate(20),i(),u=window.innerWidth),u>window.innerWidth-c&&p<-30&&(h.cancelable&&h.preventDefault(),window.navigator.vibrate&&window.navigator.vibrate(20),r(),u=0)};return document.addEventListener(\"touchstart\",m,{passive:!0}),document.addEventListener(\"touchmove\",g,{passive:!1}),()=>{document.removeEventListener(\"touchstart\",m),document.removeEventListener(\"touchmove\",g)}}const xN=({onOpenAI:i,onAddTransaction:r,onMigrate:c,isVisible:u})=>n.jsxs(\"div\",{id:\"fab-dock\",className:`fixed right-5 bottom-[110px] flex flex-col gap-3.5 z-[110] transition-all duration-500 ease-quantum ${u?\"translate-x-0 opacity-100\":\"translate-x-[100px] opacity-0\"}`,children:[n.jsx(\"div\",{onClick:i,title:\"AI Assistant\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-[#a855f74d] shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-[#A855F7] hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(bn,{className:\"w-5 h-5 group-hover:rotate-12 transition-transform\"})}),n.jsx(\"div\",{onClick:c,title:\"Migrate Capital\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-indigo-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-indigo-400 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(Ru,{className:\"w-5 h-5 group-hover:scale-110 transition-transform\"})}),n.jsx(\"div\",{onClick:()=>r(\"debt\"),title:\"Added Personal IOU\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-yellow-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-yellow-500 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(tp,{className:\"w-5 h-5 group-hover:-translate-y-0.5 transition-transform\"})}),n.jsx(\"div\",{onClick:()=>r(\"income\"),title:\"Add Money In\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-emerald-500/40 shadow-[0_0_20px_rgba(16,185,129,0.1)] cursor-pointer text-emerald-500 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(Nl,{className:\"w-5 h-5 group-hover:rotate-90 transition-transform\"})}),n.jsx(\"div\",{onClick:()=>r(\"expense\"),title:\"Add Money Out\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-rose-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-rose-500 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(jy,{className:\"w-5 h-5 group-hover:scale-110 transition-transform\"})})]}),bN=({isOpen:i,onClose:r,context:c,settings:u,isOffline:m=!1})=>{const[g,h]=A.useState(\"\"),[y,p]=A.useState([{text:\"Hello! I've analyzed your cash flow. How can I assist with your goals?\",type:\"ai\"}]),[x,v]=A.useState(!1),f=A.useRef(null);A.useEffect(()=>{f.current&&f.current.scrollIntoView({behavior:\"smooth\"})},[y]);const N=async()=>{if(!g.trim()||x)return;const M=g.trim();h(\"\"),p(O=>[...O,{text:M,type:\"user\"}]),v(!0);try{if(m){setTimeout(()=>{p(B=>[...B,{text:\"FinHub is currently in 'Cached View' (Offline). I've analyzed your local financial fabric: your liquidity nodes are stable, but synchronizing with global AI intelligence requires a stable link. How can I help you optimize your local state?\",type:\"ai\"}]),v(!1)},1e3);return}const O=await eN({userPrompt:M,context:c,settings:u,persona:\"ANALYST\"});O.error?p(B=>[...B,{text:O.error,type:\"ai\"}]):p(B=>[...B,{text:O.text||\"Analyzing financial pattern...\",type:\"ai\"}])}catch{p(B=>[...B,{text:\"Connection error. FinHub has transitioned to local 'Cached View'.\",type:\"ai\"}])}finally{m||v(!1)}};return i?n.jsxs(\"div\",{id:\"ai-chat-overlay\",className:\"fixed inset-0 bg-[#020408] z-[200] flex flex-col p-6 animate-in fade-in zoom-in-95 duration-300\",children:[n.jsx(\"div\",{className:\"absolute inset-0 bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-indigo-500/10 via-transparent to-transparent opacity-50\"}),n.jsxs(\"div\",{className:\"flex justify-between items-center mb-10 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-indigo-500/10 rounded-2xl flex items-center justify-center border border-indigo-500/20\",children:n.jsx(bn,{className:\"text-indigo-400 w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"h2\",{className:\"font-black text-2xl text-white tracking-tight leading-none\",children:\"AI Analyst\"}),n.jsxs(\"div\",{className:\"flex items-center gap-2 mt-1\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500\",children:\"Neural Core Context\"}),m&&n.jsx(\"span\",{className:\"text-[8px] bg-amber-500/10 text-amber-500 px-1.5 py-0.5 rounded border border-amber-500/20 font-black tracking-tighter uppercase\",children:\"Cached View\"})]})]})]}),n.jsx(\"button\",{onClick:r,\"aria-label\":\"Close Chat\",className:\"bg-white/5 w-12 h-12 rounded-full flex items-center justify-center hover:bg-white/10 hover:text-white text-slate-400 transition-all active:scale-95\",children:n.jsx(Tl,{className:\"w-6 h-6\"})})]}),n.jsxs(\"div\",{id:\"chat-messages\",className:\"flex-1 overflow-y-auto space-y-4 pr-2 custom-scrollbar\",children:[y.map((M,O)=>n.jsxs(\"div\",{className:ct(\"p-4 rounded-[24px] text-sm leading-relaxed\",M.type===\"ai\"?\"bg-slate-900 border border-white/5 text-slate-200 self-start max-w-[85%]\":\"bg-indigo-600 text-white font-medium shadow-lg shadow-indigo-600/20 self-end max-w-[85%]\"),children:[M.type===\"ai\"&&n.jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[n.jsx(bn,{className:\"w-3 h-3 text-indigo-400 font-black\"}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500\",children:\"Guru Analysis\"})]}),M.text]},O)),x&&n.jsx(\"div\",{className:\"p-4 bg-slate-900 border border-white/5 rounded-[24px] self-start animate-pulse\",children:n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:0ms]\"}),n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:150ms]\"}),n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:300ms]\"})]})}),n.jsx(\"div\",{ref:f})]}),n.jsxs(\"div\",{className:\"mt-8 flex gap-3 p-2 bg-slate-900/40 rounded-[28px] border border-white/5 relative z-10\",children:[n.jsx(\"input\",{type:\"text\",value:g,onChange:M=>h(M.target.value),onKeyDown:M=>M.key===\"Enter\"&&N(),placeholder:\"Ask the analyst...\",className:\"flex-1 bg-transparent border-none px-6 py-4 text-white focus:outline-none placeholder:text-slate-600 font-bold\"}),n.jsx(\"button\",{onClick:N,disabled:x||!g.trim(),\"aria-label\":\"Send Message\",className:\"w-14 h-14 bg-indigo-600 rounded-[22px] flex items-center justify-center shadow-lg shadow-indigo-900/30 hover:bg-indigo-500 transition-all active:scale-90 disabled:opacity-50 disabled:cursor-not-allowed group\",children:n.jsx(Ny,{className:\"w-6 h-6 text-white group-hover:-translate-y-1 transition-transform\"})})]}),n.jsx(\"p\",{className:\"text-[9px] font-bold text-slate-600 text-center uppercase tracking-widest mt-4\",children:\"Encryption Verified // Neural Fabric Link Stable\"})]}):null};class yN extends A.Component{state={hasError:!1};static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,c){console.error(\"Uncaught error:\",r,c)}render(){return this.state.hasError?n.jsx(\"div\",{className:\"min-h-[400px] flex items-center justify-center p-6\",children:n.jsxs(aa,{className:\"max-w-md w-full p-8 bg-slate-900 border-white/10 text-center space-y-6 rounded-[32px]\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-rose-500/10 rounded-full flex items-center justify-center mx-auto\",children:n.jsx(Jr,{className:\"w-8 h-8 text-rose-500\"})}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(\"h2\",{className:\"text-xl font-black text-white uppercase tracking-tight\",children:\"System Glitch Detected\"}),n.jsx(\"p\",{className:\"text-sm text-slate-400 font-medium\",children:\"The neural link to this component was interrupted. This usually happens during background updates.\"})]}),this.state.error&&n.jsx(\"pre\",{className:\"text-[10px] bg-black/40 p-3 rounded-xl text-rose-400/80 overflow-x-auto text-left font-mono\",children:this.state.error.message}),n.jsxs(Ge,{onClick:()=>window.location.reload(),className:\"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-black py-6 rounded-2xl gap-2 h-auto\",children:[n.jsx(Wr,{className:\"w-4 h-4\"}),\"Re-establish Connection\"]})]})}):this.props.children}}const vN=()=>{const{checkIdentity:i,login:r,signup:c,sendOtp:u,verifyOtp:m,resetPin:g,isRememberedUser:h,rememberedMobile:y,pendingMobile:p,clearPendingSession:x}=Di(),[v,f]=A.useState(\"identity\"),[N,M]=A.useState(\"\"),[O,B]=A.useState(\"\"),[L,R]=A.useState(\"\"),[P,V]=A.useState(\"\"),[S,se]=A.useState(\"\"),[he,ve]=A.useState(\"\"),[fe,ye]=A.useState(!1),[Se,qe]=A.useState(!1),[Te,ee]=A.useState(!1),[me,G]=A.useState(!1),C=A.useRef(null);A.useEffect(()=>{h&&y?(M(y),f(\"verify\"),Y()):p&&(M(p),f(\"verify\"))},[h,y,p]);const Y=async()=>{G(!0),setTimeout(async()=>{Math.random()>.2?await r(\"2255\",!0)||G(!1):(G(!1),navigator.vibrate&&navigator.vibrate([50,50]))},1500)};A.useEffect(()=>{v===\"identity\"&&N.length===10&&oe()},[N,v]),A.useEffect(()=>{v===\"verify\"&&O.length===4&&re()},[O,v]),A.useEffect(()=>{C.current&&(C.current.focus(),C.current.type!==\"hidden\"&&C.current.select())},[v]);const oe=async()=>{if(N.length!==10)return;const xe=await i(N);f(xe?\"verify\":\"create_name\"),B(\"\")},ge=async()=>{await u(N)&&f(\"otp_reset\")},z=async()=>{if(L.trim().length<2)return;await u(N)&&f(\"otp_verify\")},T=async()=>{await m(N,P)?f(v===\"otp_verify\"?\"create_pin\":\"reset_pin\"):$()},re=async()=>{v===\"verify\"?await r(O,Se)?(navigator.vibrate&&navigator.vibrate([10]),!Se&&!h&&ee(!0)):$():v===\"create_pin\"?O.length===4&&(await c(N,O,L,Se)||$()):v===\"reset_pin\"&&(S===he&&S.length===4&&await g(N,S)?(f(\"verify\"),B(\"\"),se(\"\"),ve(\"\")):$())},$=()=>{ye(!0),navigator.vibrate&&navigator.vibrate([50,30,50]),setTimeout(()=>ye(!1),500),V(\"\"),B(\"\"),ve(\"\")},le=()=>v===\"identity\"?N.length!==10:v===\"verify\"?O.length!==4:v===\"otp_verify\"||v===\"otp_reset\"?P.length!==4:v===\"create_name\"?L.trim().length<2:v===\"create_pin\"?O.length!==4:v===\"reset_pin\"?S.length!==4||he.length!==4:!1,ue=()=>{x(),f(\"identity\"),M(\"\"),B(\"\")},Ne=xe=>{xe.key===\"Enter\"&&!le()&&je()()},je=()=>{switch(v){case\"identity\":return oe;case\"otp_verify\":case\"otp_reset\":return T;case\"create_name\":return z;case\"verify\":case\"create_pin\":case\"reset_pin\":return re;default:return()=>{}}},de=()=>{switch(v){case\"identity\":return\"Continue\";case\"otp_verify\":case\"otp_reset\":return\"Verify OTP\";case\"create_name\":return\"Next\";case\"verify\":return\"Login\";case\"create_pin\":return\"Create Account\";case\"reset_pin\":return\"Reset PIN\";default:return\"Continue\"}};return n.jsxs(\"div\",{className:\"fixed inset-0 flex flex-col items-center justify-center overflow-hidden font-sans auth-mesh-gradient z-[9999999]\",children:[n.jsx(\"div\",{className:\"absolute inset-0 z-0 bg-[url('/mesh-grid.svg')] opacity-20\"}),n.jsxs(Oe.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},className:\"absolute top-12 z-10 flex flex-col items-center gap-2\",children:[n.jsx(\"img\",{src:\"/images/logo-dark.png\",alt:\"FinHub\",className:\"h-12 w-auto\"}),n.jsx(\"span\",{className:\"text-xs font-medium text-white/40 tracking-widest uppercase\",children:\"v0.1 Beta\"})]}),n.jsxs(\"div\",{className:\"z-10 w-full max-w-sm px-8\",children:[n.jsxs(Bn,{mode:\"wait\",children:[v===\"identity\"&&n.jsxs(Oe.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},exit:{x:-20,opacity:0},className:\"flex flex-col gap-6\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Welcome\"}),n.jsx(\"p\",{className:\"text-white/50 text-sm mt-2\",children:\"Enter your mobile number to continue\"})]}),n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-sky-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"Mobile Number\"}),n.jsx(\"input\",{ref:C,type:\"text\",inputMode:\"numeric\",maxLength:10,value:N,onChange:xe=>M(xe.target.value.replace(/\\D/g,\"\")),onKeyDown:Ne,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"999 999 9999\"})]}),n.jsxs(\"div\",{onClick:()=>{qe(!Se),navigator.vibrate&&navigator.vibrate(5)},className:\"flex items-center gap-3 cursor-pointer self-center\",children:[n.jsx(\"div\",{className:`h-5 w-5 rounded-md border transition-all flex items-center justify-center ${Se?\"bg-sky-500 border-sky-500\":\"border-white/20 bg-white/5\"}`,children:Se&&n.jsx(Sl,{className:\"h-3.5 w-3.5 text-white\"})}),n.jsx(\"span\",{className:\"text-sm text-white/60 font-medium\",children:\"Remember me for 30 days\"})]})]},\"identity\"),v===\"create_name\"&&n.jsxs(Oe.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},exit:{x:-20,opacity:0},className:\"flex flex-col gap-6\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Who are you?\"}),n.jsx(\"p\",{className:\"text-white/50 text-sm mt-2\",children:\"Personalize your node experience\"})]}),n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-sky-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"Full Name\"}),n.jsx(\"input\",{ref:C,type:\"text\",value:L,onChange:xe=>R(xe.target.value),onKeyDown:Ne,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"Joe Doe\"})]})]},\"create_name\"),(v===\"otp_verify\"||v===\"otp_reset\")&&n.jsxs(Oe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,x:fe?[0,-10,10,-10,10,0]:0},exit:{scale:1.1,opacity:0},className:\"relative flex flex-col gap-8 items-center\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"div\",{className:\"mb-4 flex justify-center\",children:n.jsx(\"div\",{className:\"p-4 rounded-full bg-white/5 ring-1 ring-white/10\",children:n.jsx(Sy,{className:\"h-8 w-8 text-sky-400\"})})}),n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Verify Node\"}),n.jsxs(\"p\",{className:\"text-white/40 text-sm mt-2\",children:[\"Enter the 4-digit code sent to\",n.jsx(\"br\",{}),n.jsx(\"span\",{className:\"text-white/70\",children:N})]})]}),n.jsxs(\"div\",{className:\"group relative flex flex-col items-center justify-center rounded-[32px] bg-white/5 p-10 ring-1 ring-white/10 backdrop-blur-md\",children:[n.jsx(\"div\",{className:\"flex gap-5\",children:[0,1,2,3].map(xe=>n.jsx(Oe.div,{animate:{scale:xe<P.length?1.2:1,backgroundColor:xe<P.length?\"#fff\":\"rgba(255,255,255,0.1)\"},transition:{duration:.1},className:\"h-3.5 w-3.5 rounded-full\"},xe))}),n.jsx(\"input\",{ref:C,type:\"password\",inputMode:\"numeric\",maxLength:4,value:P,onChange:xe=>V(xe.target.value.replace(/\\D/g,\"\")),onKeyDown:Ne,className:\"absolute inset-0 opacity-0 cursor-default\",\"aria-label\":\"One-time Password\",placeholder:\"OTP\"})]})]},\"otp\"),v===\"reset_pin\"&&n.jsxs(Oe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,x:fe?[0,-10,10,-10,10,0]:0},exit:{scale:1.1,opacity:0},className:\"relative flex flex-col gap-8 items-center\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"div\",{className:\"mb-4 flex justify-center\",children:n.jsx(\"div\",{className:\"p-4 rounded-full bg-white/5 ring-1 ring-white/10\",children:n.jsx(Ay,{className:\"h-8 w-8 text-amber-400\"})})}),n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Reset PIN\"}),n.jsx(\"p\",{className:\"text-white/40 text-sm mt-2\",children:\"Choose a new secure 4-digit access code\"})]}),n.jsxs(\"div\",{className:\"space-y-4 w-full\",children:[n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-amber-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"New PIN\"}),n.jsx(\"input\",{type:\"password\",inputMode:\"numeric\",maxLength:4,value:S,onChange:xe=>se(xe.target.value.replace(/\\D/g,\"\")),onKeyDown:Ne,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"****\"})]}),n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-amber-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"Confirm PIN\"}),n.jsx(\"input\",{type:\"password\",inputMode:\"numeric\",maxLength:4,value:he,onChange:xe=>ve(xe.target.value.replace(/\\D/g,\"\")),onKeyDown:Ne,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"****\"})]})]})]},\"reset_pin\"),(v===\"verify\"||v===\"create_pin\")&&n.jsxs(Oe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,x:fe?[0,-10,10,-10,10,0]:0},exit:{scale:1.1,opacity:0},className:\"relative flex flex-col gap-8 items-center\",children:[n.jsx(Oe.div,{initial:{opacity:0},animate:{opacity:1},className:\"fixed inset-0 z-[-1] bg-black/80 backdrop-blur-xl\"}),n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(Oe.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:\"mb-4 flex justify-center\",children:n.jsx(\"div\",{className:\"p-4 rounded-full bg-white/5 ring-1 ring-white/10\",children:n.jsx(Ti,{className:\"h-8 w-8 text-sky-400\"})})}),n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:v===\"verify\"?\"Private Access\":\"Secure Setup\"}),n.jsx(\"p\",{className:\"text-white/40 text-sm mt-2\",children:v===\"verify\"?\"Encrypted PIN required\":\"Create your master PIN\"})]}),n.jsxs(\"div\",{className:\"group relative flex flex-col items-center justify-center rounded-[32px] bg-white/5 p-10 ring-1 ring-white/10 backdrop-blur-md\",children:[n.jsx(\"div\",{className:\"flex gap-5\",children:[0,1,2,3].map(xe=>n.jsx(Oe.div,{animate:{scale:xe<O.length?1.2:1,backgroundColor:xe<O.length?\"#fff\":\"rgba(255,255,255,0.1)\"},transition:{duration:.1},className:\"h-3.5 w-3.5 rounded-full\"},xe))}),n.jsx(\"input\",{ref:C,type:\"password\",inputMode:\"numeric\",maxLength:4,value:O,onChange:xe=>B(xe.target.value.replace(/\\D/g,\"\")),onKeyDown:Ne,className:\"absolute inset-0 opacity-0 cursor-default\",\"aria-label\":\"Access PIN\",placeholder:\"PIN\"})]}),v===\"verify\"&&n.jsxs(\"div\",{className:\"flex flex-col items-center gap-4\",children:[n.jsxs(\"button\",{onClick:Y,className:\"flex items-center gap-2 text-sky-400 text-sm font-medium\",children:[n.jsx(_s,{className:\"h-5 w-5\"}),\" Use Biometrics\"]}),n.jsx(\"button\",{onClick:ge,className:\"text-white/30 text-xs hover:text-white/50 transition-colors\",children:\"Forgot PIN? Reset via SMS\"}),n.jsx(\"button\",{onClick:ue,className:\"text-sky-500/50 text-[10px] font-bold uppercase tracking-widest hover:text-sky-400/80 transition-colors mt-2\",children:\"Login with another account\"})]})]},\"pin\")]}),n.jsxs(Oe.button,{onClick:je(),disabled:le(),className:`mt-8 flex w-full items-center justify-center gap-2 rounded-[22px] py-4 text-base font-semibold text-white shadow-lg transition-all ${le()?\"cursor-not-allowed bg-[#3A3A3C] opacity-50\":\"bg-gradient-to-r from-[#0A84FF] to-[#0047AB] shadow-sky-500/20 active:scale-95\"}`,whileTap:{scale:.98},children:[de(),!le()&&n.jsx(ap,{className:\"h-4 w-4\"})]})]}),n.jsx(Bn,{children:Te&&n.jsx(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"fixed inset-0 z-[60] flex items-end justify-center bg-black/60 p-6 backdrop-blur-sm\",children:n.jsxs(Oe.div,{initial:{y:100},animate:{y:0},exit:{y:100},className:\"w-full max-w-sm rounded-[32px] bg-[#1C1C1E] p-8 text-center ring-1 ring-white/10 shadow-2xl\",children:[n.jsx(\"div\",{className:\"mx-auto mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-sky-500/20 text-sky-400\",children:n.jsx(Sl,{className:\"h-8 w-8\"})}),n.jsx(\"h3\",{className:\"text-xl font-bold text-white\",children:\"Speed up your next login?\"}),n.jsx(\"p\",{className:\"mt-2 text-sm text-white/50\",children:\"We can securely remember your ID so you can skip the mobile entry next time.\"}),n.jsxs(\"div\",{className:\"mt-8 flex flex-col gap-3\",children:[n.jsx(\"button\",{onClick:()=>{localStorage.setItem(\"finhub_remembered_mobile\",N),ee(!1)},className:\"w-full rounded-2xl bg-sky-500 py-4 font-semibold text-white active:scale-95 transition-all\",children:\"Enable Smart Login\"}),n.jsx(\"button\",{onClick:()=>ee(!1),className:\"w-full py-2 text-sm font-medium text-white/30 active:text-white/50\",children:\"Maybe later\"})]})]})})}),n.jsx(Bn,{children:me&&n.jsx(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"fixed inset-0 z-[70] flex flex-col items-center justify-center bg-black/40 backdrop-blur-md\",children:n.jsxs(Oe.div,{initial:{scale:.8},animate:{scale:1},className:\"flex flex-col items-center\",children:[n.jsxs(\"div\",{className:\"relative mb-6\",children:[n.jsx(Oe.div,{animate:{scale:[1,1.2,1],opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0},className:\"absolute inset-0 rounded-full bg-sky-500/30 blur-2xl\"}),n.jsx(\"div\",{className:\"relative flex h-24 w-24 items-center justify-center rounded-full bg-white/5 ring-1 ring-white/20\",children:n.jsx(_s,{className:\"h-12 w-12 text-sky-400\"})})]}),n.jsx(\"h3\",{className:\"text-lg font-medium text-white\",children:\"Scanning Biometrics\"}),n.jsx(\"p\",{className:\"mt-2 text-sm text-white/40 italic\",children:\"Verifying your node identity...\"}),n.jsx(\"button\",{onClick:()=>G(!1),className:\"mt-12 text-xs font-medium uppercase tracking-widest text-white/20 hover:text-white/40\",children:\"Cancel & use PIN\"})]})})}),n.jsx(\"div\",{className:\"absolute bottom-8 text-center text-[10px] text-white/20\",children:n.jsx(\"p\",{children:\"Protected by FinHub Node Protocols. Data is localized and encrypted.\"})})]})},H0=({message:i=\"Secure Node Handshake\",subMessage:r=\"Re-encrypting local session...\"})=>n.jsxs(\"div\",{className:\"fixed inset-0 z-[100] flex flex-col items-center justify-center bg-[#000000] overflow-hidden\",children:[n.jsx(Oe.div,{animate:{opacity:[.1,.2,.1],scale:[1,1.1,1]},transition:{duration:4,repeat:1/0,ease:\"easeInOut\"},className:\"absolute h-[500px] w-[500px] rounded-full bg-sky-500/10 blur-[120px]\"}),n.jsxs(\"div\",{className:\"relative flex flex-col items-center justify-center gap-12\",children:[n.jsxs(\"div\",{className:\"relative flex items-center justify-center\",children:[[0,1,2].map(c=>n.jsx(Oe.div,{className:\"absolute rounded-full border border-sky-400/20\",initial:{width:80,height:80,opacity:0},animate:{width:[80,250],height:[80,250],opacity:[.4,0]},transition:{duration:3,repeat:1/0,delay:c*1,ease:\"easeOut\"}},c)),n.jsx(Oe.div,{animate:{y:[0,-10,0]},transition:{duration:4,repeat:1/0,ease:\"easeInOut\"},className:\"relative z-10\",children:n.jsx(Oe.div,{animate:{scale:[1,1.1,1],filter:[\"drop-shadow(0 0 15px rgba(56,189,248,0.3))\",\"drop-shadow(0 0 30px rgba(56,189,248,0.6))\",\"drop-shadow(0 0 15px rgba(56,189,248,0.3))\"]},transition:{duration:3,repeat:1/0,ease:\"easeInOut\"},className:\"relative flex h-32 w-32 items-center justify-center rounded-[32px] bg-gradient-to-br from-[#1C1C1E] to-[#000000] ring-1 ring-white/10 shadow-2xl backdrop-blur-xl\",children:n.jsx(\"img\",{src:\"/images/logo-icon.png\",alt:\"FinHub\",className:\"h-20 w-20 object-contain drop-shadow-lg\"})})})]}),n.jsx(Oe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:\"flex flex-col items-center gap-2\",children:n.jsxs(\"div\",{className:\"flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/5 ring-1 ring-white/5 backdrop-blur-md\",children:[n.jsx(Ti,{className:\"h-3 w-3 text-sky-400\"}),n.jsx(\"span\",{className:\"text-[10px] font-bold tracking-[0.2em] uppercase text-white/40\",children:i})]})})]}),n.jsxs(\"div\",{className:\"absolute bottom-16 w-full max-w-[200px] px-6\",children:[n.jsx(\"div\",{className:\"h-[2px] w-full overflow-hidden rounded-full bg-white/10\",children:n.jsx(Oe.div,{initial:{x:\"-100%\"},animate:{x:\"100%\"},transition:{duration:1.5,repeat:1/0,ease:\"easeInOut\"},className:\"h-full w-1/3 bg-gradient-to-r from-transparent via-sky-400 to-transparent\"})}),n.jsx(\"div\",{className:\"mt-3 text-center\",children:n.jsx(\"span\",{className:\"text-[10px] font-medium text-white/20 italic tracking-wider\",children:r})})]})]}),wN=({isOpen:i,onClose:r})=>n.jsx(Bn,{children:i&&n.jsxs(n.Fragment,{children:[n.jsx(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,className:\"fixed inset-0 z-[200] bg-black/60 backdrop-blur-sm\"}),n.jsx(\"div\",{className:\"fixed inset-0 z-[201] flex items-center justify-center p-4 pointer-events-none\",children:n.jsxs(Oe.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:\"spring\",damping:25,stiffness:300},className:\"w-full max-w-md bg-slate-900 border border-white/5 rounded-[32px] shadow-2xl overflow-hidden pointer-events-auto relative\",children:[n.jsx(\"div\",{className:\"absolute top-0 inset-x-0 h-32 bg-gradient-to-b from-indigo-500/10 to-transparent pointer-events-none\"}),n.jsx(\"button\",{onClick:r,className:\"absolute top-6 right-6 p-2 rounded-full bg-white/5 text-slate-400 hover:text-white hover:bg-white/10 transition-colors z-10\",\"aria-label\":\"Close about us popup\",children:n.jsx(Tl,{className:\"w-5 h-5\"})}),n.jsxs(\"div\",{className:\"p-8 pt-12 space-y-8 relative\",children:[n.jsxs(\"div\",{className:\"flex flex-col items-center text-center gap-3\",children:[n.jsx(\"div\",{className:\"w-16 h-16 rounded-[22px] bg-indigo-600 flex items-center justify-center shadow-lg shadow-indigo-500/20\",children:n.jsx(Dy,{className:\"w-8 h-8 text-white\"})}),n.jsxs(\"div\",{children:[n.jsx(\"h2\",{className:\"text-2xl font-black text-white tracking-tight uppercase\",children:\"FinHub Core\"}),n.jsx(\"p\",{className:\"text-[10px] font-bold text-indigo-400 uppercase tracking-[0.3em]\",children:\"Quantum Fabric v50.3\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"section\",{className:\"space-y-2\",children:[n.jsxs(\"h3\",{className:\"text-[10px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2\",children:[n.jsx(_s,{className:\"w-3.5 h-3.5\"}),\"Our Vision\"]}),n.jsx(\"p\",{className:\"text-sm text-slate-300 leading-relaxed font-medium\",children:\"FinHub is designed to be the central nervous system of your personal economy. We merge neural-inspired data models with high-precision tracking to navigate complex wealth landscapes.\"})]}),n.jsxs(\"section\",{className:\"space-y-2\",children:[n.jsxs(\"h3\",{className:\"text-[10px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2\",children:[n.jsx(Ti,{className:\"w-3.5 h-3.5\"}),\"Core Protocol\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[n.jsxs(\"div\",{className:\"bg-white/5 p-3 rounded-2xl border border-white/5\",children:[n.jsx(\"span\",{className:\"block text-[8px] font-black text-indigo-400 uppercase mb-1\",children:\"Localization\"}),n.jsx(\"span\",{className:\"text-[10px] text-slate-400 leading-tight\",children:\"Sovereign identity via node storage.\"})]}),n.jsxs(\"div\",{className:\"bg-white/5 p-3 rounded-2xl border border-white/5\",children:[n.jsx(\"span\",{className:\"block text-[8px] font-black text-indigo-400 uppercase mb-1\",children:\"Clamping Logic\"}),n.jsx(\"span\",{className:\"text-[10px] text-slate-400 leading-tight\",children:\"Mathematical stability in all simulations.\"})]})]})]}),n.jsxs(\"div\",{className:\"pt-6 border-t border-white/5 flex flex-col items-center gap-2\",children:[n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-600 uppercase tracking-widest\",children:\"Architect: Sijo Joseph\"}),n.jsx(\"p\",{className:\"text-[10px] font-black text-slate-800 uppercase tracking-[0.2em]\",children:\"© 2025 Neural FinHub Fabric\"})]})]})]})]})})]})}),jN=()=>{const{settings:i,updateSettings:r,createGoal:c,createLiability:u}=Di(),[m,g]=A.useState(1),[h,y]=A.useState(\"intro\"),[p,x]=A.useState(!1),[v,f]=A.useState([]),[N,M]=A.useState({name:\"\",amount:\"\",interest:\"\"}),[O,B]=A.useState(i.passiveIncomeTarget?.toString()||\"\"),L=async ye=>{await r({isSampleMode:ye})},R=async ye=>{x(!0),ye||(await c({name:\"Health Insurance\",targetAmount:5e5,currentAmount:0,targetDate:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString(),emoji:\"🏥\",type:\"protection\",status:\"active\",createdAt:new Date().toISOString()}),await c({name:\"Term Insurance\",targetAmount:1e7,currentAmount:0,targetDate:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString(),emoji:\"🛡️\",type:\"protection\",status:\"active\",createdAt:new Date().toISOString()})),y(\"completion\"),x(!1)},P=()=>{g(2),y(\"intro\")},V=()=>{N.name&&N.amount&&N.interest&&(f([...v,N]),M({name:\"\",amount:\"\",interest:\"\"}))},S=ye=>{f(v.filter((Se,qe)=>qe!==ye))},se=async()=>{x(!0);for(const ye of v){const Se=parseFloat(ye.interest);await u({name:ye.name,type:\"other\",principal:parseFloat(ye.amount),outstanding:parseFloat(ye.amount),interestRate:Se,emiAmount:0,startDate:new Date().toISOString(),tenure:12,penalty_applied:Se>10})}y(\"completion\"),x(!1)},he=()=>{g(3),y(\"intro\")},ve=async()=>{x(!0),await r({passiveIncomeTarget:parseFloat(O)||0}),y(\"completion\"),x(!1)},fe=async()=>{await r({onboardingPhase:3})};return n.jsxs(\"div\",{className:\"fixed inset-0 z-[300] flex items-center justify-center p-6 bg-black overflow-hidden\",children:[n.jsxs(\"div\",{className:\"absolute inset-0 overflow-hidden pointer-events-none transition-colors duration-1000\",children:[n.jsxs(Bn,{children:[m===1&&n.jsxs(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"absolute inset-0\",children:[n.jsx(\"div\",{className:\"absolute -top-[20%] -left-[10%] w-[60%] h-[60%] bg-teal-500/20 blur-[120px] rounded-full animate-pulse\"}),n.jsx(\"div\",{className:\"absolute -bottom-[20%] -right-[10%] w-[60%] h-[60%] bg-emerald-500/10 blur-[120px] rounded-full animate-pulse\"})]},\"teal-bg\"),m===2&&n.jsxs(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"absolute inset-0\",children:[n.jsx(\"div\",{className:\"absolute -top-[20%] -left-[10%] w-[60%] h-[60%] bg-orange-500/20 blur-[120px] rounded-full animate-pulse\"}),n.jsx(\"div\",{className:\"absolute -bottom-[20%] -right-[10%] w-[60%] h-[60%] bg-rose-500/10 blur-[120px] rounded-full animate-pulse\"})]},\"orange-bg\"),m===3&&n.jsxs(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"absolute inset-0\",children:[n.jsx(\"div\",{className:\"absolute -top-[20%] -left-[10%] w-[60%] h-[60%] bg-purple-500/20 blur-[120px] rounded-full animate-pulse\"}),n.jsx(\"div\",{className:\"absolute -bottom-[20%] -right-[10%] w-[60%] h-[60%] bg-amber-500/10 blur-[120px] rounded-full animate-pulse\"})]},\"purple-bg\")]}),n.jsx(\"div\",{className:\"absolute top-[30%] left-[20%] w-[40%] h-[40%] bg-white/5 blur-[100px] rounded-full\"})]}),n.jsxs(Bn,{mode:\"wait\",children:[m===1&&h===\"intro\"&&n.jsxs(Oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:\"max-w-md w-full text-center space-y-8 relative z-10\",children:[n.jsx(\"div\",{className:\"w-20 h-20 bg-teal-500/10 border border-teal-500/20 rounded-[28px] flex items-center justify-center mx-auto mb-6 shadow-2xl shadow-teal-500/20\",children:n.jsx(Ti,{className:\"w-10 h-10 text-teal-400\"})}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"h1\",{className:\"text-4xl font-black text-white tracking-tight leading-tight uppercase\",children:[\"Welcome to \",n.jsx(\"span\",{className:\"text-teal-400\",children:\"FinHub\"})]}),n.jsx(\"p\",{className:\"text-slate-400 text-lg font-medium leading-relaxed\",children:\"Before we look at your wealth, let's ensure it's protected.\"})]}),n.jsxs(\"div\",{className:\"flex flex-col gap-3 w-full\",children:[n.jsxs(\"button\",{onClick:()=>y(\"question\"),className:\"group py-5 bg-white text-black font-black uppercase tracking-[0.2em] rounded-24 flex items-center justify-center gap-3 hover:bg-teal-400 transition-all duration-500\",children:[\"Begin Shield \",n.jsx(xn,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]}),n.jsx(\"button\",{onClick:()=>L(!0),className:\"py-3 text-slate-500 font-bold uppercase tracking-widest text-[10px] hover:text-teal-400 transition-colors\",children:\"View Sample Node\"})]})]},\"p1-intro\"),m===1&&h===\"question\"&&n.jsxs(Oe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:\"max-w-md w-full space-y-8 relative z-10\",children:[n.jsxs(\"div\",{className:\"space-y-4 text-center\",children:[n.jsx(\"div\",{className:\"text-[10px] font-black text-teal-500 uppercase tracking-[0.4em] mb-2\",children:\"Protocol: Protection Check\"}),n.jsx(\"h2\",{className:\"text-3xl font-black text-white tracking-tight leading-tight\",children:\"Do you have Health and Term Insurance?\"}),n.jsx(\"p\",{className:\"text-slate-500 font-bold\",children:\"These are the foundations of any terminal wealth flight path.\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 gap-4 pt-4 text-left\",children:[n.jsx(\"button\",{onClick:()=>R(!0),disabled:p,className:\"p-6 bg-slate-900/50 border border-white/5 rounded-3xl text-left hover:border-teal-500/30 hover:bg-teal-500/5 transition-all group\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"space-y-1\",children:[n.jsx(\"p\",{className:\"text-white font-black uppercase tracking-widest group-hover:text-teal-400 transition-colors\",children:\"Yes, I'm covered\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 font-bold uppercase\",children:\"Shield is active\"})]}),n.jsx(Sl,{className:\"w-6 h-6 text-slate-700 group-hover:text-teal-500 transition-colors\"})]})}),n.jsx(\"button\",{onClick:()=>R(!1),disabled:p,className:\"p-6 bg-slate-900/50 border border-white/5 rounded-3xl text-left hover:border-amber-500/30 hover:bg-amber-500/5 transition-all group\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"space-y-1\",children:[n.jsx(\"p\",{className:\"text-white font-black uppercase tracking-widest group-hover:text-amber-400 transition-colors\",children:\"Not yet\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 font-bold uppercase\",children:\"Security leak detected\"})]}),n.jsx(Jr,{className:\"w-6 h-6 text-slate-700 group-hover:text-amber-500 transition-colors\"})]})})]})]},\"p1-question\"),m===1&&h===\"completion\"&&n.jsxs(Oe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:\"max-w-md w-full text-center space-y-8 relative z-10\",children:[n.jsx(\"div\",{className:\"w-20 h-20 bg-teal-500/10 border border-teal-500/20 rounded-[28px] flex items-center justify-center mx-auto mb-6\",children:n.jsx(Sl,{className:\"w-10 h-10 text-teal-400\"})}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(\"h2\",{className:\"text-3xl font-black text-white tracking-tight leading-tight uppercase\",children:\"Shield Protocol Deployed\"}),n.jsx(\"p\",{className:\"text-slate-400 text-lg font-medium leading-relaxed\",children:\"Understood. We've prioritized these. A single emergency shouldn't crash your flight path.\"})]}),n.jsx(\"button\",{onClick:P,className:\"w-full py-5 bg-teal-500 text-black font-black uppercase tracking-[0.2em] rounded-24 hover:bg-teal-400 transition-all duration-500 shadow-xl shadow-teal-500/20\",children:\"Initialize Phase 2\"})]},\"p1-comp\"),m===2&&h===\"intro\"&&n.jsxs(Oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:\"max-w-md w-full text-center space-y-8 relative z-10\",children:[n.jsx(\"div\",{className:\"w-20 h-20 bg-orange-500/10 border border-orange-500/20 rounded-[28px] flex items-center justify-center mx-auto mb-6 shadow-2xl shadow-orange-500/20\",children:n.jsx(qh,{className:\"w-10 h-10 text-orange-400\"})}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"h1\",{className:\"text-4xl font-black text-white tracking-tight leading-tight uppercase\",children:[\"Action \",n.jsx(\"span\",{className:\"text-orange-400\",children:\"Zone\"})]}),n.jsx(\"p\",{className:\"text-slate-400 text-lg font-medium leading-relaxed\",children:\"Now, let's find the 'Wealth Leaks' that are slowing you down.\"})]}),n.jsxs(\"div\",{className:\"flex flex-col gap-3 w-full\",children:[n.jsxs(\"button\",{onClick:()=>y(\"question\"),className:\"group py-5 bg-white text-black font-black uppercase tracking-[0.2em] rounded-24 flex items-center justify-center gap-3 hover:bg-orange-400 transition-all duration-500\",children:[\"Run Scan \",n.jsx(xn,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]}),n.jsx(\"button\",{onClick:()=>L(!0),className:\"py-3 text-slate-500 font-bold uppercase tracking-widest text-[10px] hover:text-orange-400 transition-colors\",children:\"View Sample Node\"})]})]},\"p2-intro\"),m===2&&h===\"question\"&&n.jsxs(Oe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:\"max-w-md w-full space-y-6 relative z-10 flex flex-col h-[80vh]\",children:[n.jsxs(\"div\",{className:\"space-y-2 text-center shrink-0\",children:[n.jsx(\"div\",{className:\"text-[10px] font-black text-orange-500 uppercase tracking-[0.4em] mb-1\",children:\"Alert: High-Interest Detection\"}),n.jsx(\"h2\",{className:\"text-2xl font-black text-white tracking-tight uppercase\",children:\"Identify High-Interest Debt\"}),n.jsx(\"p\",{className:\"text-slate-500 text-xs font-bold leading-relaxed\",children:\"List liabilities (Credit Cards, Personal Loans) with interest above 10%.\"})]}),n.jsxs(\"div\",{className:\"space-y-3 bg-white/5 p-4 rounded-3xl border border-white/5 shrink-0\",children:[n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-2\",children:[n.jsx(\"input\",{placeholder:\"Name (e.g. ICICI CC)\",className:\"bg-black/50 border border-white/10 p-3 rounded-xl text-xs font-bold focus:border-orange-500 outline-none transition-colors\",value:N.name,onChange:ye=>M({...N,name:ye.target.value})}),n.jsx(\"input\",{type:\"number\",placeholder:\"Amount\",className:\"bg-black/50 border border-white/10 p-3 rounded-xl text-xs font-bold focus:border-orange-500 outline-none transition-colors\",value:N.amount,onChange:ye=>M({...N,amount:ye.target.value})})]}),n.jsxs(\"div\",{className:\"flex gap-2\",children:[n.jsx(\"input\",{type:\"number\",placeholder:\"Interest % (e.g. 14)\",className:\"flex-1 bg-black/50 border border-white/10 p-3 rounded-xl text-xs font-bold focus:border-orange-500 outline-none transition-colors\",value:N.interest,onChange:ye=>M({...N,interest:ye.target.value})}),n.jsx(\"button\",{onClick:V,className:\"px-6 bg-orange-500 hover:bg-orange-400 text-black rounded-xl p-3 transition-colors shrink-0\",\"aria-label\":\"Add liability\",children:n.jsx(Nl,{className:\"w-5 h-5\"})})]})]}),n.jsxs(\"div\",{className:\"flex-1 overflow-y-auto space-y-2 py-2 pr-1 custom-scrollbar\",children:[v.map((ye,Se)=>n.jsxs(Oe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:\"flex items-center justify-between p-4 bg-slate-900/40 border border-white/5 rounded-2xl group\",children:[n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-xs font-black uppercase text-white\",children:ye.name}),n.jsxs(\"p\",{className:\"text-[10px] font-bold text-slate-500 uppercase\",children:[\"₹\",ye.amount,\" @ \",ye.interest,\"%\"]})]}),n.jsx(\"button\",{onClick:()=>S(Se),className:\"text-slate-600 hover:text-rose-500 transition-colors\",\"aria-label\":\"Remove liability\",children:n.jsx(Ai,{className:\"w-4 h-4\"})})]},Se)),v.length===0&&n.jsx(\"div\",{className:\"h-20 flex items-center justify-center border border-dashed border-white/5 rounded-2xl\",children:n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold uppercase tracking-widest\",children:\"No leaks added yet\"})})]}),n.jsxs(\"div\",{className:\"pt-4 shrink-0 flex gap-3\",children:[n.jsx(\"button\",{onClick:()=>y(\"completion\"),className:\"flex-1 py-4 text-slate-500 font-black uppercase text-xs tracking-widest hover:text-white transition-colors\",children:\"Skip (No High Debt)\"}),n.jsx(\"button\",{onClick:se,disabled:v.length===0||p,className:\"flex-1 py-4 bg-orange-500 text-black font-black uppercase text-xs tracking-widest rounded-2xl disabled:opacity-50 hover:bg-orange-400 transition-all shadow-lg shadow-orange-500/20\",children:\"Patch Leaks\"})]})]},\"p2-question\"),m===2&&h===\"completion\"&&n.jsxs(Oe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:\"max-w-md w-full text-center space-y-8 relative z-10\",children:[n.jsx(\"div\",{className:\"w-20 h-20 bg-rose-500/10 border border-rose-500/20 rounded-[28px] flex items-center justify-center mx-auto mb-6\",children:n.jsx(qh,{className:\"w-10 h-10 text-rose-400\"})}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(\"h2\",{className:\"text-3xl font-black text-white tracking-tight leading-tight uppercase\",children:\"Analysis Complete\"}),n.jsxs(\"p\",{className:\"text-slate-400 text-lg font-medium leading-relaxed leading-relaxed\",children:[\"Found them. Paying these off isn't an expense—it's a \",n.jsx(\"span\",{className:\"text-rose-400\",children:\"guaranteed profit\"}),\". We'll tackle these before we scale your investments.\"]})]}),n.jsx(\"button\",{onClick:he,className:\"w-full py-5 bg-orange-500 text-black font-black uppercase tracking-[0.2em] rounded-24 hover:bg-orange-400 transition-all duration-500 shadow-xl shadow-orange-500/20\",children:\"Initialize Phase 3\"})]},\"p2-comp\"),m===3&&h===\"intro\"&&n.jsxs(Oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:\"max-w-md w-full text-center space-y-8 relative z-10\",children:[n.jsx(\"div\",{className:\"w-20 h-20 bg-purple-500/10 border border-purple-500/20 rounded-[28px] flex items-center justify-center mx-auto mb-6 shadow-2xl shadow-purple-500/20\",children:n.jsx(bn,{className:\"w-10 h-10 text-purple-400\"})}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"h1\",{className:\"text-4xl font-black text-white tracking-tight leading-tight uppercase\",children:[\"Growth \",n.jsx(\"span\",{className:\"text-purple-400\",children:\"Zone\"})]}),n.jsx(\"p\",{className:\"text-slate-400 text-lg font-medium leading-relaxed\",children:\"Your foundation is set. Now, what does freedom look like for you?\"})]}),n.jsxs(\"div\",{className:\"flex flex-col gap-3 w-full\",children:[n.jsxs(\"button\",{onClick:()=>y(\"question\"),className:\"group py-5 bg-white text-black font-black uppercase tracking-[0.2em] rounded-24 flex items-center justify-center gap-3 hover:bg-purple-400 transition-all duration-500\",children:[\"Set Target \",n.jsx(xn,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]}),n.jsx(\"button\",{onClick:()=>L(!0),className:\"py-3 text-slate-500 font-bold uppercase tracking-widest text-[10px] hover:text-purple-400 transition-colors\",children:\"View Sample Node\"})]})]},\"p3-intro\"),m===3&&h===\"question\"&&n.jsxs(Oe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:\"max-w-md w-full space-y-8 relative z-10\",children:[n.jsxs(\"div\",{className:\"space-y-4 text-center\",children:[n.jsx(\"div\",{className:\"text-[10px] font-black text-purple-500 uppercase tracking-[0.4em] mb-2\",children:\"Protocol: Freedom Metric\"}),n.jsx(\"h2\",{className:\"text-3xl font-black text-white tracking-tight leading-tight uppercase\",children:\"Target Monthly Passive Income\"}),n.jsx(\"p\",{className:\"text-slate-500 font-bold text-sm leading-relaxed\",children:\"This sets the baseline for your Freedom Meter. Every rupee you save now will be measured in Time.\"})]}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"div\",{className:\"relative\",children:[n.jsx(\"span\",{className:\"absolute left-6 top-1/2 -translate-y-1/2 text-2xl font-black text-slate-700\",children:\"₹\"}),n.jsx(\"input\",{type:\"number\",placeholder:\"50,000\",className:\"w-full bg-slate-900/50 border border-white/5 p-8 pl-12 rounded-[32px] text-4xl font-black text-white outline-none focus:border-purple-500/50 transition-all tabular-nums\",value:O,onChange:ye=>B(ye.target.value)})]}),n.jsx(\"button\",{onClick:ve,disabled:!O||p,className:\"w-full py-5 bg-purple-500 text-black font-black uppercase tracking-[0.2em] rounded-24 hover:bg-purple-400 transition-all duration-500 shadow-xl shadow-purple-500/20 disabled:opacity-50\",children:\"Lock Horizon\"})]})]},\"p3-question\"),m===3&&h===\"completion\"&&n.jsxs(Oe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:\"max-w-md w-full text-center space-y-8 relative z-10\",children:[n.jsx(\"div\",{className:\"w-20 h-20 bg-amber-500/10 border border-amber-500/20 rounded-[28px] flex items-center justify-center mx-auto mb-6\",children:n.jsx(W0,{className:\"w-10 h-10 text-amber-400\"})}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(\"h2\",{className:\"text-3xl font-black text-white tracking-tight leading-tight uppercase\",children:\"Target Locked\"}),n.jsxs(\"p\",{className:\"text-slate-400 text-lg font-medium leading-relaxed leading-relaxed\",children:[\"Welcome to the cockpit. Every rupee you save now will be measured in \",n.jsx(\"span\",{className:\"text-amber-400\",children:\"Time\"}),\", not just numbers.\"]})]}),n.jsx(\"button\",{onClick:fe,className:\"w-full py-5 bg-amber-500 text-black font-black uppercase tracking-[0.2em] rounded-24 hover:bg-amber-400 transition-all duration-500 shadow-xl shadow-amber-500/20\",children:\"Launch Terminal\"})]},\"p3-comp\")]})]})},NN=A.lazy(()=>Us(()=>import(\"./Dashboard-77mHvodX.js\"),__vite__mapDeps([0,1,2,3,4,5,6,7])).then(i=>({default:i.Dashboard}))),SN=A.lazy(()=>Us(()=>import(\"./TransactionList-C9g51JND.js\"),__vite__mapDeps([8,1,2,4,7,6])).then(i=>({default:i.TransactionList}))),AN=A.lazy(()=>Us(()=>import(\"./GoalsTracker-CDWKNqoN.js\"),__vite__mapDeps([9,1,2,7,6])).then(i=>({default:i.GoalsTracker}))),DN=A.lazy(()=>Us(()=>import(\"./EmergencyFundsTab-VfBln1SL.js\"),__vite__mapDeps([10,1,2,7,6])).then(i=>({default:i.EmergencyFundsTab}))),TN=A.lazy(()=>Us(()=>import(\"./InvestmentsTab-7b7ZOF_8.js\"),__vite__mapDeps([11,1,2,3,4,12,6,7])).then(i=>({default:i.InvestmentsTab}))),kN=A.lazy(()=>Us(()=>import(\"./LiabilityTab-Cihd-oaZ.js\"),__vite__mapDeps([13,1,2,7,6])).then(i=>({default:i.LiabilityTab}))),CN=A.lazy(()=>Us(()=>import(\"./LiabilityDashboard-BEre0Oy9.js\"),__vite__mapDeps([14,1,2,5,12,7,6])).then(i=>({default:i.LiabilityDashboard})));function EN(){const{settings:i,expenses:r,incomes:c,debts:u,goals:m,accounts:g,liabilities:h,notifications:y,emergencyFundAmount:p,investments:x,isLoading:v,refreshData:f,updateSettings:N,userId:M,createExpense:O,updateExpense:B,deleteExpense:L,createIncome:R,updateIncome:P,deleteIncome:V,createDebt:S,updateDebt:se,deleteDebt:he,settleDebt:ve,createGoal:fe,updateGoal:ye,deleteGoal:Se,createAccount:qe,updateAccount:Te,deleteAccount:ee,setEmergencyFundAmount:me,setNotifications:G,isFundAllocationOpen:C,fundAllocationType:Y,closeFundAllocation:oe,performFundAllocation:ge,transferFunds:z,authStatus:T,isOffline:re,authMessage:$,backfillRequest:le,setBackfillRequest:ue,executeBackfill:Ne,createRecurring:je}=Di(),[de,xe]=A.useState(\"dashboard\"),[Ke,Ie]=A.useState(!1),[Ve,rt]=A.useState(\"expense\"),[De,tt]=A.useState(null),[St,mt]=A.useState(!1),[zt,ut]=A.useState(!1),[bt,la]=A.useState(!1),[ce,Ee]=A.useState(null),[He,yt]=A.useState(!1),[Ut,Oa]=A.useState(!1),[_a,ba]=A.useState(!1),[ma,ja]=A.useState(!1),[It]=A.useState(null);A.useEffect(()=>gN(()=>ut(!0),()=>la(!0)),[]),A.useEffect(()=>{i.theme===\"dark\"?document.documentElement.classList.add(\"dark\"):document.documentElement.classList.remove(\"dark\")},[i.theme]);const{openFundAllocation:Na}=Di();A.useEffect(()=>{window.showFundAllocation=Na},[Na]);const{currentMonthExpenses:Gt}=A.useMemo(()=>{const ie=new Date,Le=ie.getMonth(),ft=ie.getFullYear();return{currentMonthExpenses:r.filter(Mt=>!Mt.isInternalTransfer).filter(Mt=>{const Ct=new Date(Mt.date);return Ct.getMonth()===Le&&Ct.getFullYear()===ft})}},[r]),kt=A.useMemo(()=>{const ie=c.reduce(($a,na)=>$a+na.amount,0),Le=r.reduce(($a,na)=>$a+na.amount,0),ft=u.reduce(($a,na)=>$a+na.amount,0);if(ie===0&&ft===0)return{score:50,savingsRate:0,debtRatio:0,spendingRatio:0};const at=[...c,...r,...u];let Bt=1;if(at.length>0){const $a=at.map(fs=>new Date(fs.date).getTime()),na=new Date(Math.min(...$a)),sa=Math.abs(new Date().getTime()-na.getTime()),dn=Math.ceil(sa/(1e3*60*60*24*30));Bt=Math.max(1,dn)}const Ct=ie/Bt*12,ht=ie>0?(ie-Le)/ie:0,Yt=ie>0?Le/ie:0,Rt=Ct>0?ft/Ct:ft>0?1/0:0;let Ye=50;return ht>=.4?Ye+=30:ht>=.2?Ye+=20:ht>=.1?Ye+=10:ht>0?Ye+=5:Ye-=20,Rt===0?Ye+=20:Rt<=.3?Ye+=10:Rt<=.6?Ye-=10:Rt<=1?Ye-=30:Ye-=50,Yt<=.5?Ye+=20:Yt<=.7?Ye+=10:Yt<=.9?Ye+=0:Ye-=10,{score:Math.max(0,Math.min(100,Math.round(Ye))),savingsRate:ht,debtRatio:Rt,spendingRatio:Yt}},[c,r,u]),dt=A.useMemo(()=>({totalIncome:c.reduce((ie,Le)=>ie+Le.amount,0),totalExpenses:r.reduce((ie,Le)=>ie+Le.amount,0),activeDebts:u.filter(ie=>ie.status===\"pending\").length,goalsCount:m.length,recentTransactions:[...r.slice(0,5).map(ie=>({type:\"expense\",...ie})),...c.slice(0,5).map(ie=>({type:\"income\",...ie}))],expenses:r,incomes:c,accounts:g,investments:x,liabilities:h,goals:m,debts:u,currentMonthExpenses:Gt,savingsRate:kt.savingsRate,healthScore:kt.score,brainSummary:qj({investments:x,accounts:g,healthScore:kt.score,savingsRate:kt.savingsRate,totalIncome:c.reduce((ie,Le)=>ie+Le.amount,0),totalExpenses:r.reduce((ie,Le)=>ie+Le.amount,0),activeDebts:u.filter(ie=>ie.status===\"pending\").length,goalsCount:m.length},i.currency,de)}),[c,r,u,m,kt.savingsRate,kt.score,g,x,h,Gt,i.currency,de]),ds=A.useMemo(()=>c.reduce((ie,Le)=>ie+Le.amount,0),[c]);if(v)return n.jsx(H0,{});const Sa=async()=>{await f()},Aa=ie=>{rt(ie),tt(null),Ie(!0)},un=ie=>{rt(\"expense\"),tt(ie),Ie(!0)},nn=ie=>{rt(\"income\"),tt(ie),Ie(!0)},Fa=ie=>{rt(\"debt\"),tt(ie),Ie(!0)},Da=ie=>{De?Ve===\"expense\"?B(De.id,ie):Ve===\"income\"?P(De.id,ie):Ve===\"debt\"&&se(De.id,ie):Ve===\"expense\"?(O(ie),ie.roundUpAmount&&Ue(m.length>0?m[0].id:\"general\",\"goal\",void 0,ie.roundUpAmount,ie.accountId)):Ve===\"income\"?R(ie):Ve===\"debt\"&&S(ie)},Ue=async(ie,Le,ft,at,Bt)=>{if(!at&&!It)return;const Mt=at||(It?It.roundedAmount-It.expenseAmount:0),Ct=Bt||(It?It.accountId:\"\"),ht=g.find(Yt=>Yt.id===Ct);if(ht&&await Te(ht.id,{balance:ht.balance-Mt}),Le===\"goal\"){const Yt=m.find(Rt=>Rt.id===ie);if(Yt)await ye(ie,{currentAmount:Yt.currentAmount+Mt}),J.success(`Saved ${cn[i.currency]}${Mt} to ${Yt.name}!`);else{const Rt=m.find(Ye=>Ye.name===\"General Savings\");if(Rt)await ye(Rt.id,{currentAmount:Rt.currentAmount+Mt}),J.success(`Saved ${cn[i.currency]}${Mt} to General Savings!`);else{const Ye={name:\"General Savings\",targetAmount:1e4,currentAmount:Mt,targetDate:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString(),emoji:\"🐷\"};fe(Ye),J.success(`Created \"General Savings\" and saved ${cn[i.currency]}${Mt}!`)}}}else me(Yt=>Yt+Mt),J.success(`Saved ${cn[i.currency]}${Mt} to Emergency Fund!`);ja(!1),ji({particleCount:50,spread:60,origin:{y:.7}})},wt=ie=>{const Le={today:1,week:7,month:30},ft=new Date;ft.setDate(ft.getDate()+Le[ie]),localStorage.setItem(\"roundUpMutedUntil\",ft.toISOString()),ja(!1),J.info(`Round ups muted for ${ie===\"today\"?\"today\":ie===\"week\"?\"a week\":\"a month\"}`)};return n.jsxs(n.Fragment,{children:[n.jsx(Bn,{mode:\"wait\",children:(T===\"guest\"||T===\"authenticating\")&&n.jsx(Oe.div,{className:\"fixed inset-0 z-0\",exit:{opacity:0,scale:.95,filter:\"blur(20px)\"},transition:{duration:.8},children:n.jsx(vN,{})},\"login-container\")}),n.jsx(Bn,{children:T===\"authenticating\"&&n.jsx(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4},className:\"fixed inset-0 z-50\",children:n.jsx(H0,{message:$?.message,subMessage:$?.subMessage})},\"loading-sprite\")}),n.jsxs(Bn,{mode:\"wait\",children:[T===\"authenticated\"&&(!i.onboardingPhase||i.onboardingPhase<3)&&!i.isSampleMode&&n.jsx(jN,{}),T===\"authenticated\"&&((i.onboardingPhase??0)>=3||i.isSampleMode)&&n.jsx(Oe.div,{className:\"relative z-10\",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.8,ease:[.16,1,.3,1]},children:n.jsxs(\"div\",{className:\"min-h-screen bg-transparent text-foreground transition-colors font-sans\",children:[n.jsx(hj,{activeTab:de,onTabChange:ie=>xe(ie),notificationCount:y.filter(ie=>!ie.read).length,onNotificationClick:()=>la(!bt),onSettingsClick:()=>ut(!zt),forceHide:He,renderFab:ie=>n.jsx(xN,{isVisible:ie&&!zt&&!bt&&!He,onOpenAI:()=>mt(!0),onAddTransaction:Aa,onMigrate:()=>Oa(!0)}),children:n.jsx(hN,{onRefresh:Sa,children:n.jsx(yN,{children:n.jsxs(A.Suspense,{fallback:n.jsxs(\"div\",{className:\"space-y-6 pt-12\",children:[n.jsx(pN,{}),n.jsx(\"p\",{className:\"text-center text-slate-500 text-sm\",children:\"Loading Component...\"})]}),children:[de===\"dashboard\"&&n.jsx(\"div\",{className:\"space-y-6\",children:n.jsx(NN,{expenses:r,incomes:c,currency:i.currency,goals:m,liabilities:h,debts:u,investments:x,accounts:g,emergencyFundAmount:p,healthScore:kt.score,userName:i.name,isOffline:re,isSampleMode:i.isSampleMode,onResumeOnboarding:()=>N({isSampleMode:!1})})}),de===\"transactions\"&&n.jsx(SN,{expenses:r,incomes:c,debts:u,accounts:g,currency:i.currency,onEditExpense:un,onDeleteExpense:L,onEditIncome:nn,onDeleteIncome:V,onEditDebt:Fa,onDeleteDebt:he,onSettleDebt:ve}),de===\"goals\"&&n.jsx(AN,{goals:m,currency:i.currency,accounts:g,expenses:r,incomes:c,onCreateGoal:fe,onUpdateGoal:ye,onDeleteGoal:Se,onDeductFromAccount:async(ie,Le)=>{const ft=g.find(at=>at.id===ie);ft&&await Te(ie,{balance:ft.balance-Le})}}),de===\"accounts\"&&n.jsx(fN,{accounts:g,currency:i.currency,onCreateAccount:qe,onUpdateAccount:Te,onDeleteAccount:ee}),de===\"investments\"&&n.jsx(TN,{}),de===\"emergency\"&&n.jsx(DN,{currency:i.currency,userId:M,expenses:r,incomes:c,accounts:g,onEmergencyFundUpdate:ie=>me(ie)}),de===\"liability\"&&n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsx(CN,{liabilities:h,currency:i.currency,totalMonthlyIncome:ds}),n.jsx(kN,{currency:i.currency,expenses:r,accounts:g})]}),de===\"recurring\"&&n.jsx(dj,{}),de===\"more\"&&n.jsx(sN,{onNavigate:ie=>xe(ie),onOpenSettings:()=>ut(!0),onOpenNotifications:()=>la(!0),emergencyFundAmount:p,bankAccountsCount:g.filter(ie=>ie.type===\"bank\").length,cardsCount:g.filter(ie=>ie.type===\"credit_card\").length,currency:i.currency,onOpenAbout:()=>ba(!0)})]})})})}),n.jsx(xj,{isOpen:Ke,onClose:()=>{Ie(!1),tt(null)},type:Ve,onSubmit:Da,initialData:De,accounts:g,currency:i.currency,roundUpEnabled:i.roundUpEnabled}),It&&n.jsx(bj,{isOpen:ma,onClose:()=>ja(!1),onConfirm:Ue,expenseAmount:It.expenseAmount,roundedAmount:It.roundedAmount,currency:i.currency,goals:m,onMute:wt}),n.jsx(bN,{isOpen:St,onClose:()=>mt(!1),context:dt,settings:i,isOffline:re}),n.jsx(nN,{isOpen:zt,onClose:()=>ut(!1),settings:i,onUpdateSettings:N,onAchievementClick:ie=>{Ee(ie),yt(!0),ut(!1)},onOpenAbout:()=>ba(!0)}),n.jsx(rN,{isOpen:bt,onClose:()=>la(!1),notifications:y,onNotificationClick:async ie=>{if(ie.achievementId&&(Ee(ie.achievementId),yt(!0)),ie.action&&ie.action.type===\"verify_subscription\"&&ie.action.status===\"completed\"){const{description:Le,amount:ft,category:at,accountId:Bt,date:Mt}=ie.action.payload;try{await je({type:\"expense\",description:Le,amount:ft,category:at,accountId:Bt,frequency:\"monthly\",startDate:Mt||new Date().toISOString().split(\"T\")[0],tags:[\"auto-verified\",\"subscription\"]}),J.success(`Verified: ${Le} is now a recurring subscription.`),G(Ct=>Ct.map(ht=>ht.id===ie.id?{...ht,read:!0}:ht))}catch{J.error(\"Failed to automate subscription.\")}}else ie.action&&ie.action.status===\"dismissed\"&&(J.info(\"Marked as one-time purchase.\"),G(Le=>Le.map(ft=>ft.id===ie.id?{...ft,read:!0}:ft)));ie.action||la(!1)},onMarkAsRead:ie=>{G(Le=>Le.map(ft=>ft.id===ie?{...ft,read:!0}:ft))},onClearRead:()=>{G(ie=>ie.filter(Le=>!Le.read)),J.success(\"Read notifications cleared\")}}),n.jsx(oN,{isOpen:He,onClose:()=>{yt(!1),Ee(null)},achievementId:ce}),n.jsx(uN,{isOpen:C,onClose:oe,accounts:g,goals:m,currency:i.currency,destinationType:Y,emergencyFund:{currentAmount:p,targetAmount:1e5},onAllocate:ge,liabilities:h,expenses:r}),n.jsx(mN,{isOpen:Ut,onClose:()=>Oa(!1),accounts:g,currency:i.currency,onTransfer:z}),n.jsx(wN,{isOpen:_a,onClose:()=>ba(!1)})]})},\"main-app\")]}),le&&n.jsx(Jp,{open:!0,onOpenChange:()=>ue(null),children:n.jsxs(Wp,{className:\"bg-slate-900/95 border-white/10 text-slate-100 z-[99999999] backdrop-blur-xl\",children:[n.jsxs(eg,{children:[n.jsx(ag,{className:\"text-white text-xl font-bold font-sans\",children:\"Backfill Configuration Required\"}),n.jsxs(ng,{className:\"text-slate-400 text-base\",children:[\"System detected \",n.jsxs(\"span\",{className:\"text-emerald-400 font-bold\",children:[le.count,\" missing entries\"]}),\" in the transaction history from \",n.jsx(\"span\",{className:\"text-white font-medium\",children:le.dates[0]?.toLocaleDateString(\"en-IN\",{day:\"numeric\",month:\"short\",year:\"numeric\"})}),\"to \",n.jsx(\"span\",{className:\"text-white font-medium\",children:le.dates[le.dates.length-1]?.toLocaleDateString(\"en-IN\",{day:\"numeric\",month:\"short\",year:\"numeric\"})}),\".\",n.jsx(\"br\",{}),n.jsx(\"br\",{}),\"Would you like to auto-populate the ledger for this period?\"]})]}),n.jsxs(tg,{className:\"mt-4\",children:[n.jsx(ig,{onClick:()=>ue(null),className:\"bg-white/5 border-white/5 text-slate-400 hover:text-white hover:bg-white/10 rounded-xl h-12 uppercase tracking-wider text-xs font-bold\",children:\"Cancel\"}),n.jsx(sg,{onClick:()=>{Ne(),ue(null)},className:\"bg-indigo-600 hover:bg-indigo-500 text-white border-0 font-bold rounded-xl h-12 px-8 shadow-lg shadow-indigo-600/20\",children:\"Generate Ledger\"})]})]})}),n.jsx(t1,{position:\"bottom-center\",richColors:!0,theme:\"dark\",toastOptions:{style:{background:\"#1C1C1E\",border:\"1px solid rgba(255, 255, 255, 0.1)\",color:\"#FFFFFF\",borderRadius:\"20px\",backdropFilter:\"none\",zIndex:999999}},className:\"!z-[999999]\"})]})}function MN({children:i,...r}){return n.jsx(Nj,{...r,children:i})}vv.createRoot(document.getElementById(\"root\")).render(n.jsx(r1,{children:n.jsx(MN,{attribute:\"class\",defaultTheme:\"dark\",forcedTheme:\"dark\",children:n.jsx(EN,{})})}));export{Bn as A,Ge as B,bl as C,Bs as D,Pt as I,Re as L,Fp as M,Os as N,ha as S,BN as a,V1 as b,Ku as c,yp as d,aa as e,$e as f,ct as g,Ls as h,gj as i,qs as j,Is as k,Vs as l,Oe as m,ga as n,pa as o,xa as p,vt as q,ku as r,Di as s,J as t,cN as u,LN as v,UN as w};"
      },
      {
        "file": "dist_test\\assets\\index-DHabN7TV.js",
        "line": 59,
        "snippet": "`.trim();return await lg(g,h,x,u)},tN=async(i,r)=>await lg(i,r,\"Respond with only the word 'OK' to verify connectivity.\",\"ASSISTANT\"),aN=i=>{if(i.aiProvider&&Dl(i.aiProvider,i))return i.aiProvider;const r=[\"openai\",\"anthropic\",\"gemini\",\"deepseek\",\"perplexity\"];for(const c of r)if(Dl(c,i))return c;return null},q0={BASE_URL:\"/\",DEV:!1,MODE:\"production\",PROD:!0,SSR:!1},nN=({isOpen:i,onClose:r,settings:c,onUpdateSettings:u,onAchievementClick:m,onOpenAbout:g})=>{const[h,y]=A.useState(c.name||\"\"),[p,x]=A.useState(c.photoURL||\"\"),[v,f]=A.useState(!1),[N,M]=A.useState(null),[O,B]=A.useState({}),[L,R]=A.useState(!1),{logout:P,scheduleAccountDeletion:V,migrateSubscriptions:S,cleanupDuplicates:se,clearAllData:he}=Di(),[ve,fe]=A.useState(!1),ye=async()=>{R(!0);try{await S()}catch(ce){console.error(\"Migration failed:\",ce),J.error(\"Migration failed\")}finally{R(!1)}},[Se,qe]=A.useState(\"USD\"),[Te,ee]=A.useState(\"100\"),[me,G]=A.useState(\"100000\"),[C,Y]=A.useState(\"10\"),[oe,ge]=A.useState(\"6\"),[z,T]=A.useState(!1),re=async()=>{const Ee={USD:\"US\",INR:\"IN\",GBP:\"GB\",EUR:\"EMU\",AED:\"AE\",SAR:\"SA\"}[c.currency]||\"US\";T(!0);try{const yt=await(await fetch(`https://api.worldbank.org/v2/country/${Ee}/indicator/FP.CPI.TOTL.ZG?format=json&per_page=1`)).json();if(yt&&yt[1]&&yt[1][0]&&yt[1][0].value){const Ut=yt[1][0].value;ge(Ut.toFixed(2)),J.success(`Inflation rate synced for ${c.currency}`)}}catch(He){console.error(\"Inflation sync failed:\",He),J.error(\"Failed to sync inflation rate.\")}finally{T(!1)}},$=Array.from({length:(parseInt(C)||0)+1},(ce,Ee)=>{const He=parseFloat(me)||0,yt=parseFloat(oe)||0,Ut=He*Math.pow(1+yt/100,Ee),Oa=He/Math.pow(1+yt/100,Ee);return{year:Ee,futureCost:Math.round(Ut),purchasingPower:Math.round(Oa)}}),le=[\"INR\",\"USD\",\"EUR\",\"GBP\",\"AED\",\"SAR\"],ue=c.currency;A.useEffect(()=>{y(c.name||\"\"),x(c.photoURL||\"\")},[c]),A.useEffect(()=>{i&&Ne()},[i,Se]);const Ne=async()=>{try{const Ee=await(await fetch(`https://api.exchangerate-api.com/v4/latest/${Se}`)).json();B(Ee.rates||{}),Te&&je(Te,Ee.rates)}catch(ce){console.error(\"Error loading exchange rates:\",ce)}},je=(ce,Ee)=>{const He=parseFloat(ce);if(!isNaN(He)&&He>0){const Ut=(Ee||O)[ue]||1;M(He*Ut)}else M(null)},de=ce=>{ee(ce),je(ce)},{setTheme:xe}=jj();A.useEffect(()=>{c.theme!==\"dark\"&&(xe(\"dark\"),u({theme:\"dark\"}))},[]);const Ke=()=>{u({name:h,photoURL:p}),f(!1)},Ie=ce=>{const Ee=ce.target.files?.[0];if(Ee){const He=new FileReader;He.onloadend=()=>{x(He.result)},He.readAsDataURL(Ee)}},Ve=n1(),rt=new Set(c.unlockedAchievements),De=c.aiProvider||\"openai\",tt=[{id:\"openai\",label:\"OpenAI\",placeholder:\"sk-...\"},{id:\"anthropic\",label:\"Anthropic\",placeholder:\"sk-ant-...\"},{id:\"gemini\",label:\"Gemini\",placeholder:\"AIza...\"},{id:\"deepseek\",label:\"Deepseek\",placeholder:\"sk-...\"},{id:\"perplexity\",label:\"Perplexity\",placeholder:\"pplx-...\"}],[St,mt]=A.useState(!1),[zt,ut]=A.useState(null),bt=A.useCallback((ce,Ee)=>{u({[ce]:Ee})},[u]),la=async()=>{const ce=Dl(De,c);if(!ce){J.error(\"No API key found in Settings or System Environment\");return}mt(!0),ut(null);try{const Ee=await tN(De,ce);Ee.error?(ut({success:!1,message:Ee.error}),J.error(`Connection failed: ${Ee.error}`)):(ut({success:!0,message:\"Neural link established.\"}),J.success(\"Connection successful!\"))}catch(Ee){const He=Ee.message||\"Unknown protocol error\";ut({success:!1,message:He}),J.error(`Protocol breach: ${He}`)}finally{mt(!1)}};return n.jsx(Xp,{open:i,onOpenChange:r,children:n.jsxs(Qp,{side:\"left\",className:\"w-full sm:max-w-lg overflow-y-auto px-0 bg-slate-950 border-white/5 text-slate-100 h-dvh\",children:[n.jsx(Zp,{className:\"sr-only\",children:\"Settings\"}),n.jsx(Kp,{className:\"sr-only\",children:\"Customize your FinHub core experience.\"}),n.jsxs(\"div\",{className:\"space-y-12 animate-in fade-in slide-in-from-left-4 duration-500 px-8 pt-12 pb-10 text-white relative\",children:[n.jsx(\"div\",{className:\"absolute top-4 right-4 z-20\",children:n.jsx(Ge,{variant:\"ghost\",size:\"icon\",onClick:r,className:\"w-10 h-10 rounded-full bg-white/5 text-slate-400 hover:text-white hover:bg-white/10\",children:n.jsx(Tl,{className:\"w-5 h-5\"})})}),n.jsxs(\"div\",{className:\"flex flex-col gap-2\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-1.5 h-8 bg-indigo-500 rounded-full shadow-[0_0_15px_rgba(99,102,241,0.5)]\"}),n.jsx(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tight leading-none text-white\",children:\"System Config\"})]}),n.jsx(\"p\",{className:\"text-slate-500 font-bold ml-4 text-sm\",children:\"Customize your FinHub core experience.\"})]}),n.jsxs(\"div\",{className:\"space-y-10\",children:[n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"h3\",{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Mu,{className:\"w-3.5 h-3.5\"}),\"User Identity\"]}),n.jsx(Ge,{variant:\"ghost\",size:\"sm\",onClick:()=>f(!v),className:\"text-[10px] font-black uppercase tracking-widest text-indigo-400 hover:text-indigo-300 hover:bg-white/5\",children:v?\"Abort\":\"Refine\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-8 bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-indigo-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsxs(\"div\",{className:\"relative\",children:[p?n.jsx(\"img\",{src:p,alt:\"Profile\",className:\"w-24 h-24 rounded-full object-cover border-4 border-slate-800 shadow-2xl\"}):n.jsx(\"div\",{className:\"w-24 h-24 bg-gradient-to-br from-indigo-600 to-purple-700 rounded-full flex items-center justify-center shadow-2xl\",children:n.jsx(Mu,{className:\"w-12 h-12 text-white/90\"})}),v&&n.jsxs(\"label\",{className:\"absolute bottom-0 right-0 w-9 h-9 bg-indigo-600 rounded-full flex items-center justify-center cursor-pointer hover:bg-indigo-500 shadow-lg border-4 border-slate-900 transition-transform active:scale-90\",children:[n.jsx(ty,{className:\"w-4 h-4 text-white\"}),n.jsx(\"input\",{type:\"file\",accept:\"image/*\",className:\"hidden\",onChange:Ie,\"aria-label\":\"Upload profile picture\"})]})]}),n.jsx(\"div\",{className:\"flex-1 min-w-0\",children:v?n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(Re,{htmlFor:\"settings-profile-name\",className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Alias\"}),n.jsx(Pt,{id:\"settings-profile-name\",name:\"name\",placeholder:\"e.g. Maverick\",value:h,onChange:ce=>y(ce.target.value),className:\"bg-white/5 border-white/5 rounded-xl h-12 text-white placeholder:text-slate-700 font-bold\",autoComplete:\"name\"})]}),n.jsx(Ge,{size:\"sm\",onClick:Ke,className:\"w-full h-12 bg-indigo-600 hover:bg-indigo-500 text-white font-black rounded-xl\",children:\"Commit Identity\"})]}):n.jsxs(n.Fragment,{children:[n.jsx(\"h4\",{className:\"text-2xl font-black text-slate-100 tracking-tight\",children:h||\"Guest User\"}),n.jsx(\"p\",{className:\"text-xs text-slate-500 font-bold uppercase tracking-widest mt-1\",children:\"FinHub Node // 0x50.3\"})]})})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsx(\"div\",{className:\"space-y-4\",children:n.jsxs(\"button\",{onClick:()=>u({roundUpEnabled:!c.roundUpEnabled}),className:`w-full flex items-center justify-between p-6 rounded-[32px] border transition-all relative overflow-hidden group ${c.roundUpEnabled?\"bg-emerald-500/10 border-emerald-500/50 shadow-[0_0_20px_rgba(16,185,129,0.1)]\":\"bg-slate-900/40 border-white/5 grayscale opacity-60 hover:opacity-100 hover:grayscale-0\"}`,children:[n.jsx(\"div\",{className:`absolute top-0 right-0 w-24 h-24 blur-3xl opacity-10 -mr-12 -mt-12 transition-colors ${c.roundUpEnabled?\"bg-emerald-500\":\"bg-slate-500\"}`}),n.jsxs(\"div\",{className:\"space-y-1 relative z-10 flex-1 pr-4 text-left\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-2 text-sm font-black text-slate-100 uppercase tracking-tight\",children:[n.jsx(Si,{className:`w-4 h-4 ${c.roundUpEnabled?\"text-emerald-500\":\"text-slate-500\"}`}),\"Virtual Round-Ups\"]}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 font-bold leading-relaxed uppercase tracking-widest\",children:\"Build your fortress automatically via expense spillover.\"})]}),n.jsx(\"div\",{className:`relative z-10 px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${c.roundUpEnabled?\"bg-emerald-500 text-white shadow-lg shadow-emerald-500/20\":\"bg-slate-800 text-slate-500\"}`,children:c.roundUpEnabled?\"Active\":\"Offline\"})]})}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(Re,{htmlFor:\"settings-currency\",className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Lh,{className:\"w-3.5 h-3.5\"}),\"Standard Denomination\"]}),n.jsxs(\"div\",{className:\"bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-indigo-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsx(\"div\",{className:\"space-y-2 relative z-10\",children:n.jsxs(ha,{value:c.currency,onValueChange:ce=>u({currency:ce}),children:[n.jsx(ga,{id:\"settings-currency\",name:\"currency\",className:\"bg-white/5 border-white/5 rounded-2xl h-14 font-black\",children:n.jsx(pa,{})}),n.jsxs(xa,{className:\"bg-slate-900 border-white/10 text-white\",children:[n.jsx(vt,{value:\"USD\",children:\"USD ($) - US Dollar\"}),n.jsx(vt,{value:\"EUR\",children:\"EUR (€) - Euro\"}),n.jsx(vt,{value:\"GBP\",children:\"GBP (£) - British Pound\"}),n.jsx(vt,{value:\"INR\",children:\"INR (₹) - Indian Rupee\"}),n.jsx(vt,{value:\"AED\",children:\"AED (د.إ) - UAE Dirham\"}),n.jsx(vt,{value:\"SAR\",children:\"SAR (﷼) - Saudi Riyal\"})]})]})})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(Re,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Lh,{className:\"w-3.5 h-3.5\"}),\"Foreign Exchange Probe\"]}),n.jsxs(\"div\",{className:\"space-y-6 p-6 bg-slate-900/40 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-blue-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4 relative z-10\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(Re,{htmlFor:\"converter-from-currency\",className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Source\"}),n.jsxs(ha,{value:Se,onValueChange:ce=>{qe(ce)},children:[n.jsx(ga,{id:\"converter-from-currency\",name:\"fromCurrency\",className:\"bg-white/5 border-white/5 rounded-2xl h-12\",children:n.jsx(pa,{})}),n.jsx(xa,{className:\"bg-slate-900 border-white/10 text-white\",children:le.map(ce=>n.jsxs(vt,{value:ce,children:[cn[ce],\" \",ce]},ce))})]})]}),n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(Re,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Target\"}),n.jsxs(\"div\",{className:\"h-12 flex items-center justify-center bg-indigo-500/10 rounded-2xl border border-indigo-500/20 text-xs font-black text-indigo-400\",children:[cn[ue],\" \",ue]})]})]}),n.jsxs(\"div\",{className:\"space-y-1.5 relative z-10\",children:[n.jsx(Re,{htmlFor:\"converter-amount\",className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Capital Amount\"}),n.jsx(Pt,{id:\"converter-amount\",name:\"amount\",type:\"number\",placeholder:\"Enter amount\",value:Te,onChange:ce=>{const Ee=ce.target.value;parseFloat(Ee)<0||de(Ee)},min:\"0\",className:\"bg-white/5 border-white/5 rounded-2xl h-14 font-black text-lg\",autoComplete:\"off\"})]}),N!==null&&n.jsxs(\"div\",{className:\"p-6 bg-white/5 rounded-2xl border border-white/5 animate-in fade-in slide-in-from-top-2 relative z-10\",children:[n.jsx(\"p\",{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 mb-2\",children:\"Calculated Projection\"}),n.jsxs(\"div\",{className:\"flex items-baseline gap-2\",children:[n.jsxs(\"p\",{className:\"text-2xl font-black text-emerald-400 tabular-nums\",children:[cn[ue],N.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold uppercase tracking-widest\",children:\"ESTIMATED VALUATION\"})]}),O[ue]&&n.jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-white/5 flex items-center justify-between\",children:[n.jsx(\"span\",{className:\"text-[8px] font-black uppercase tracking-[0.2em] text-slate-700\",children:\"Protocol Rate\"}),n.jsxs(\"span\",{className:\"text-[10px] font-black text-slate-500 tabular-nums\",children:[\"1 \",Se,\" = \",O[ue].toFixed(4),\" \",ue]})]})]})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(Re,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(Si,{className:\"w-3.5 h-3.5 text-rose-500\"}),\"Inflation Projection Node\"]}),n.jsxs(\"div\",{className:\"space-y-6 p-6 bg-slate-900/40 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-rose-500 blur-3xl opacity-5 -mr-12 -mt-12\"}),n.jsxs(\"div\",{className:\"space-y-4 relative z-10\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(Re,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Current Capital\"}),n.jsx(Pt,{type:\"number\",value:me,onChange:ce=>G(ce.target.value),className:\"bg-white/5 border-white/5 rounded-2xl h-12 font-black\",placeholder:\"e.g. 1000000\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsx(Re,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Horizon (Years)\"}),n.jsx(Pt,{type:\"number\",value:C,onChange:ce=>Y(ce.target.value),className:\"bg-white/5 border-white/5 rounded-2xl h-12 font-black\"})]}),n.jsxs(\"div\",{className:\"space-y-1.5\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between ml-1\",children:[n.jsx(Re,{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500\",children:\"Rate (%)\"}),n.jsxs(\"button\",{onClick:re,disabled:z,className:\"text-[8px] font-black uppercase text-indigo-400 hover:text-indigo-300 disabled:opacity-50 flex items-center gap-1\",children:[z?n.jsx(uu,{className:\"w-2 h-2 animate-spin\"}):n.jsx(ay,{className:\"w-2 h-2\"}),\"Sync\"]})]}),n.jsx(Pt,{type:\"number\",value:oe,onChange:ce=>ge(ce.target.value),className:\"bg-white/5 border-white/5 rounded-2xl h-12 font-black\"})]})]}),me&&n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(\"div\",{className:\"h-32 w-full bg-black/20 rounded-2xl p-2 border border-white/5 overflow-hidden\",children:n.jsx(fv,{width:\"100%\",height:\"100%\",minHeight:128,minWidth:100,children:n.jsxs(mv,{data:$,children:[n.jsxs(\"defs\",{children:[n.jsxs(\"linearGradient\",{id:\"colorCost\",x1:\"0\",y1:\"0\",x2:\"0\",y2:\"1\",children:[n.jsx(\"stop\",{offset:\"5%\",stopColor:\"#FB7185\",stopOpacity:.3}),n.jsx(\"stop\",{offset:\"95%\",stopColor:\"#FB7185\",stopOpacity:0})]}),n.jsxs(\"linearGradient\",{id:\"colorPower\",x1:\"0\",y1:\"0\",x2:\"0\",y2:\"1\",children:[n.jsx(\"stop\",{offset:\"5%\",stopColor:\"#34D399\",stopOpacity:.3}),n.jsx(\"stop\",{offset:\"95%\",stopColor:\"#34D399\",stopOpacity:0})]})]}),n.jsx(hv,{strokeDasharray:\"3 3\",vertical:!1,stroke:\"rgba(255,255,255,0.05)\"}),n.jsx(pv,{contentStyle:{backgroundColor:\"#0f172a\",border:\"1px solid rgba(255,255,255,0.1)\",borderRadius:\"8px\",fontSize:\"10px\"},itemStyle:{color:\"#fff\",padding:\"2px 0\"}}),n.jsx(Fh,{type:\"monotone\",dataKey:\"futureCost\",stroke:\"#FB7185\",fillOpacity:1,fill:\"url(#colorCost)\"}),n.jsx(Fh,{type:\"monotone\",dataKey:\"purchasingPower\",stroke:\"#34D399\",fillOpacity:1,fill:\"url(#colorPower)\"})]})})}),n.jsxs(\"div\",{className:\"p-6 bg-white/5 rounded-2xl border border-white/5 space-y-4\",children:[n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 mb-2\",children:\"Future Cost\"}),n.jsxs(\"p\",{className:\"text-xl font-black text-rose-400 tabular-nums\",children:[cn[c.currency],Math.round(parseFloat(me)*Math.pow(1+parseFloat(oe)/100,parseFloat(C))).toLocaleString()]})]}),n.jsxs(\"div\",{className:\"pt-4 border-t border-white/5\",children:[n.jsx(\"p\",{className:\"text-[9px] font-black uppercase tracking-widest text-slate-500 mb-2\",children:\"Real Purchasing Power\"}),n.jsxs(\"p\",{className:\"text-xl font-black text-emerald-400 tabular-nums\",children:[cn[c.currency],Math.round(parseFloat(me)/Math.pow(1+parseFloat(oe)/100,parseFloat(C))).toLocaleString()]}),n.jsx(\"p\",{className:\"text-[8px] text-slate-600 font-bold uppercase tracking-widest mt-1\",children:\"VALUATION IN TODAY'S MONEY\"})]})]})]})]})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(Re,{className:\"text-[10px] font-bold uppercase tracking-[0.2em] text-slate-500 flex items-center gap-2\",children:[n.jsx(ny,{className:\"w-3.5 h-3.5 text-indigo-400\"}),\"AI Assistant Config\"]}),n.jsxs(\"div\",{className:\"space-y-6 bg-slate-900/40 p-6 rounded-[32px] border border-white/5 relative overflow-hidden group\",children:[n.jsxs(\"div\",{className:\"space-y-1.5 relative z-10\",children:[n.jsx(Re,{htmlFor:\"ai-provider-select\",className:\"text-[9px] font-bold uppercase tracking-widest text-slate-500 ml-1\",children:\"Preferred Provider\"}),n.jsxs(ha,{value:De,onValueChange:ce=>u({aiProvider:ce}),children:[n.jsx(ga,{id:\"ai-provider-select\",name:\"aiProvider\",className:\"bg-slate-900 border-white/5 rounded-xl h-11 text-[10px] font-bold uppercase tracking-widest\",children:n.jsx(pa,{})}),n.jsx(xa,{className:\"bg-slate-900 border-white/10 text-white\",children:tt.map(ce=>n.jsx(vt,{value:ce.id,className:\"text-[10px] font-bold uppercase tracking-widest\",children:ce.label},ce.id))})]})]}),n.jsxs(\"div\",{className:\"space-y-4 pt-2 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between px-1\",children:[n.jsx(Re,{className:\"text-[9px] font-bold uppercase tracking-widest text-slate-500\",children:\"Active Credential\"}),n.jsx(\"div\",{className:\"flex items-center gap-1.5\",children:n.jsx(\"span\",{className:\"text-[8px] font-bold text-indigo-400/70 uppercase tracking-tighter\",children:tt.find(ce=>ce.id===De)?.label})})]}),tt.filter(ce=>ce.id===De).map(ce=>{const Ee=c.apiKeys?.[ce.id],He=`VITE_${ce.id.toUpperCase()}_API_KEY`,yt=!!q0[He];return n.jsxs(\"div\",{className:\"flex items-center gap-3 bg-indigo-500/5 p-4 rounded-2xl border border-indigo-500/20 group/active transition-all\",children:[n.jsx(\"div\",{className:\"flex-1 min-w-0\",children:n.jsxs(\"div\",{className:\"relative group/input\",children:[n.jsx(Pt,{type:\"password\",value:Ee||\"\",onChange:Ut=>bt(\"apiKeys\",{...c.apiKeys,[ce.id]:Ut.target.value}),placeholder:yt?\"Using System Environment Key\":`Enter ${ce.label} Key`,className:`bg-transparent border-none p-0 h-auto text-sm font-bold text-white placeholder:text-slate-700 focus-visible:ring-0 shadow-none ${yt&&!Ee?\"opacity-40 italic font-medium\":\"\"}`,disabled:yt&&!Ee}),yt&&!Ee&&n.jsx(\"div\",{className:\"flex items-center gap-1 mt-1\",children:n.jsx(\"span\",{className:\"text-[7px] font-black text-emerald-500 uppercase tracking-widest bg-emerald-500/10 px-1 py-0.5 rounded\",children:\"System Linked\"})})]})}),Ee&&n.jsx(\"button\",{onClick:()=>bt(\"apiKeys\",{...c.apiKeys,[ce.id]:\"\"}),className:\"text-slate-600 hover:text-rose-500 transition-colors p-1\",title:\"Clear saved key\",\"aria-label\":`Clear saved key for ${ce.label}`,children:n.jsx(Ai,{className:\"w-3.5 h-3.5\"})})]},ce.id)}),n.jsx(Ge,{onClick:la,disabled:St||!Dl(De,c),className:`w-full h-11 transition-all font-bold uppercase tracking-[0.2em] text-[10px] rounded-xl ${zt?.success?\"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20\":zt?.success===!1?\"bg-rose-500/10 text-rose-400 border border-rose-500/20\":\"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20\"}`,children:St?n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(uu,{className:\"w-3.5 h-3.5 animate-spin\"}),\"Verifying...\"]}):zt?.success?n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(Sl,{className:\"w-3.5 h-3.5\"}),\"Link Stable\"]}):\"Validate Connection\"})]}),n.jsxs(Ej,{className:\"relative z-10\",children:[n.jsx(Mj,{asChild:!0,children:n.jsxs(Ge,{variant:\"ghost\",className:\"w-full h-8 hover:bg-white/5 text-slate-500 hover:text-slate-300 text-[8px] font-bold uppercase tracking-widest group/trigger flex items-center justify-between px-2 rounded-lg\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(sy,{className:\"w-3 h-3 text-slate-600 group-hover/trigger:text-slate-400\"}),\"Alternative Nodes\"]}),n.jsx(Kr,{className:\"w-3 h-3 transition-transform duration-300 group-data-[state=open]/trigger:rotate-180\"})]})}),n.jsx(zj,{className:\"pt-4 space-y-3 animate-in fade-in slide-in-from-top-2 duration-300\",children:n.jsx(\"div\",{className:\"grid gap-2\",children:tt.filter(ce=>ce.id!==De).map(ce=>{const Ee=c.apiKeys?.[ce.id],He=`VITE_${ce.id.toUpperCase()}_API_KEY`,yt=!!q0[He];return n.jsxs(\"div\",{className:\"flex items-center gap-3 bg-slate-950/40 p-3 rounded-xl border border-white/5 hover:border-white/10 transition-colors\",children:[n.jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between mb-1\",children:[n.jsx(\"span\",{className:\"text-[8px] font-bold uppercase tracking-wider text-slate-500\",children:ce.label}),yt&&!Ee&&n.jsx(\"span\",{className:\"text-[7px] font-bold text-emerald-500/50 uppercase tracking-tighter\",children:\"System\"})]}),n.jsx(Pt,{type:\"password\",value:Ee||\"\",onChange:Ut=>bt(\"apiKeys\",{...c.apiKeys,[ce.id]:Ut.target.value}),placeholder:yt?\"Using System Default\":\"Key not found\",className:\"bg-transparent border-none p-0 h-auto text-[10px] text-slate-400 placeholder:text-slate-800 focus-visible:ring-0 shadow-none italic font-medium cursor-not-allowed\",disabled:yt&&!Ee})]}),Ee&&n.jsx(\"button\",{onClick:()=>bt(\"apiKeys\",{...c.apiKeys,[ce.id]:\"\"}),className:\"text-slate-800 hover:text-rose-500 transition-colors p-1\",title:\"Clear saved key\",\"aria-label\":`Clear saved key for ${ce.label}`,children:n.jsx(Ai,{className:\"w-3 h-3\"})})]},ce.id)})})})]})]})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(Re,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(du,{className:\"w-3.5 h-3.5 text-indigo-400\"}),\"Data Optimization Node\"]}),n.jsxs(\"div\",{className:\"p-6 bg-slate-900/40 rounded-[32px] border border-white/5 relative overflow-hidden\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-300\",children:\"Subscription Protocol Scan\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-wide mt-1\",children:\"DETECT & MIGRATE RECURRING SIGNALS\"})]}),n.jsx(Ge,{onClick:ye,disabled:L,className:\"bg-indigo-600 hover:bg-indigo-500 text-white font-black uppercase tracking-widest text-[9px] h-9 px-4 rounded-xl shadow-lg shadow-indigo-500/20\",children:L?n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(uu,{className:\"w-3 h-3 animate-spin\"}),\"Scanning...\"]}):\"Execute Scan\"})]}),n.jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-white/5 flex items-center justify-between\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-300\",children:\"Redundancy Purge\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-wide mt-1\",children:\"REMOVE BLANK & DUPLICATE ENTRIES\"})]}),n.jsx(Ge,{onClick:async()=>{const ce=J.loading(\"Purging duplicates...\");try{const Ee=await se();J.dismiss(ce)}catch{J.dismiss(ce),J.error(\"Purge failed\")}},className:\"bg-rose-500/10 hover:bg-rose-500/20 text-rose-400 border border-rose-500/20 font-black uppercase tracking-widest text-[9px] h-9 px-4 rounded-xl\",children:\"Purge Logs\"})]})]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(Re,{className:\"text-[10px] font-black uppercase tracking-[0.3em] text-slate-600 flex items-center gap-2\",children:[n.jsx(iy,{className:\"w-3.5 h-3.5 text-amber-500\"}),\"Reputation Rank (\",c.unlockedAchievements.length,\"/\",Ve.length,\")\"]}),n.jsx(\"div\",{className:\"grid grid-cols-4 sm:grid-cols-6 gap-3\",children:Ve.map(ce=>{const Ee=rt.has(ce.id);return n.jsx(\"button\",{onClick:()=>{Ee&&m&&m(ce.id)},disabled:!Ee,className:`w-12 h-12 rounded-xl border flex items-center justify-center text-xl transition-all ${Ee?\"border-amber-500/50 bg-amber-500/10 grayscale-0 hover:scale-110 hover:shadow-lg hover:shadow-amber-500/20 active:scale-95\":\"border-white/5 bg-white/5 grayscale opacity-20 cursor-not-allowed\"}`,children:ce.icon},ce.id)})}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 font-bold text-center leading-relaxed\",children:c.unlockedAchievements.length>0?\"Select a sigil to view the record of your triumph.\":\"Initiate financial protocols to manifest higher ranks.\"})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsx(\"div\",{className:\"space-y-4\",children:n.jsxs(\"div\",{className:\"p-4 bg-rose-500/5 border border-rose-500/10 rounded-2xl flex items-center justify-between\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h4\",{className:\"text-[10px] font-black uppercase tracking-widest text-rose-400\",children:\"Factory Reset\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-wide mt-1\",children:\"WIPE ALL TRANSACTIONS & RECURRING (KEEP ACCOUNT)\"})]}),n.jsx(Ge,{onClick:async()=>{confirm(\"Are you sure? This deletes ALL transaction data.\")&&await he()},className:\"bg-slate-950 hover:bg-rose-500 text-rose-500 hover:text-white border border-rose-500/20 font-black uppercase tracking-widest text-[9px] h-9 px-4 rounded-xl transition-colors\",children:\"Wipe Data\"})]})}),n.jsx(Rj,{className:\"bg-white/5\"}),n.jsxs(\"div\",{className:\"text-center pt-8 space-y-2 opacity-40 hover:opacity-100 transition-opacity duration-700 pb-10\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-[0.5em] text-slate-100\",children:\"Obsidian System Node\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-500 uppercase tracking-widest\",children:\"Architect: Sijo Joseph // BUILD 50.3.0 // QUANTUM CORE\"}),n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-700 uppercase tracking-widest mt-4\",children:\"© 2025 NEURAL FINHUB FABRIC\"}),n.jsx(\"button\",{onClick:g,className:\"mt-4 text-[8px] font-black text-indigo-400/60 hover:text-indigo-400 uppercase tracking-[0.2em] transition-colors\",children:\"[ Protocol Info // About ]\"})]}),n.jsxs(\"div\",{className:\"px-2 pb-10\",children:[n.jsxs(Ge,{variant:\"outline\",onClick:()=>{P(),r()},className:\"w-full h-14 bg-white/5 hover:bg-white/10 border-white/10 hover:border-white/20 text-white/60 hover:text-white font-black uppercase tracking-widest gap-3 rounded-[24px] transition-all group mb-4\",children:[n.jsx(ly,{className:\"w-5 h-5 group-hover:-translate-x-1 transition-transform\"}),\"Terminate Session\"]}),n.jsxs(Jp,{open:ve,onOpenChange:fe,children:[n.jsx(Oj,{asChild:!0,children:n.jsxs(Ge,{variant:\"outline\",className:\"w-full h-14 bg-rose-500/5 hover:bg-rose-500/10 border-rose-500/20 hover:border-rose-500/40 text-rose-500 font-black uppercase tracking-widest gap-3 rounded-[24px] transition-all group\",children:[n.jsx(du,{className:\"w-5 h-5 group-hover:scale-110 transition-transform\"}),\"Delete Account & Data\"]})}),n.jsxs(Wp,{className:\"bg-slate-950 border-white/10 text-white rounded-[32px] p-8\",children:[n.jsxs(eg,{children:[n.jsxs(ag,{className:\"text-2xl font-black tracking-tight flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"p-2 rounded-full bg-rose-500/20 text-rose-500\",children:n.jsx(du,{className:\"w-6 h-6\"})}),\"Irreversible Action?\"]}),n.jsxs(ng,{className:\"text-slate-400 font-medium leading-relaxed mt-4\",children:[\"Your account will be \",n.jsx(\"span\",{className:\"text-white font-bold italic\",children:\"deactivated immediately\"}),\" and scheduled for permanent deletion in \",n.jsx(\"span\",{className:\"text-white font-bold\",children:\"30 days\"}),\".\",n.jsx(\"br\",{}),n.jsx(\"br\",{}),\"Log in anytime before then to cancel this request and restore your data node.\"]})]}),n.jsxs(tg,{className:\"mt-8 gap-3\",children:[n.jsx(ig,{className:\"h-14 flex-1 rounded-2xl bg-white/5 border-white/10 text-slate-400 hover:bg-white/10 hover:text-white font-black uppercase tracking-widest transition-all\",children:\"Abort\"}),n.jsx(sg,{onClick:async()=>{await V(),r()},className:\"h-14 flex-1 rounded-2xl bg-rose-600 hover:bg-rose-500 text-white font-black uppercase tracking-widest shadow-lg shadow-rose-500/20 transition-all active:scale-95\",children:\"Confirm Purge\"})]})]})]})]})]})]})})};function sN({onNavigate:i,onOpenSettings:r,onOpenNotifications:c,emergencyFundAmount:u,bankAccountsCount:m,cardsCount:g,currency:h,onOpenAbout:y}){return n.jsxs(\"div\",{className:\"space-y-12 animate-in fade-in slide-in-from-bottom-4 duration-700 px-4 pb-20\",children:[n.jsxs(\"div\",{children:[n.jsx(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tight leading-none mb-3\",children:\"Settings & Assets\"}),n.jsx(\"p\",{className:\"text-slate-500 font-bold max-w-md\",children:\"Configure your financial universe and manage core system components.\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[n.jsxs(aa,{className:\"p-8 cursor-pointer bg-black border-white/5 sq-2xl border hover:bg-white/5 transition-all duration-300 group relative overflow-hidden\",onClick:()=>i(\"emergency\"),children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-blue-500 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20\"}),n.jsxs(\"div\",{className:\"relative z-10\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-blue-500/10 border border-blue-500/20 sq-md flex items-center justify-center text-blue-400 mb-8 group-hover:scale-110 transition-transform duration-500\",children:n.jsx(Ti,{className:\"w-8 h-8\"})}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100\",children:\"Emergency Fund\"}),n.jsx(\"p\",{className:\"text-2xl font-black tabular-nums text-blue-400\",children:$e(u,h)})]}),n.jsxs(\"div\",{className:\"mt-8 flex items-center justify-between text-slate-500\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest\",children:\"Financial Safety Net\"}),n.jsx(xn,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]})]})]}),n.jsxs(aa,{className:\"p-8 cursor-pointer bg-black border-white/5 sq-2xl border hover:bg-white/5 transition-all duration-300 group relative overflow-hidden\",onClick:()=>i(\"accounts\"),children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-emerald-500 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20\"}),n.jsxs(\"div\",{className:\"relative z-10\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-emerald-500/10 border border-emerald-500/20 sq-md flex items-center justify-center text-emerald-400 mb-8 group-hover:scale-110 transition-transform duration-500\",children:n.jsx(ep,{className:\"w-8 h-8\"})}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100\",children:\"Accounts & Cards\"}),n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsxs(\"div\",{className:\"space-y-0.5\",children:[n.jsx(\"p\",{className:\"text-2xl font-black tabular-nums text-emerald-400\",children:m}),n.jsx(\"p\",{className:\"text-[10px] font-bold text-slate-600 uppercase tracking-wider\",children:\"Banks\"})]}),n.jsx(\"div\",{className:\"w-px h-8 bg-white/5 self-center mt-2\"}),n.jsxs(\"div\",{className:\"space-y-0.5\",children:[n.jsx(\"p\",{className:\"text-2xl font-black tabular-nums text-emerald-400\",children:g}),n.jsx(\"p\",{className:\"text-[10px] font-bold text-slate-600 uppercase tracking-wider\",children:\"Cards\"})]})]})]}),n.jsxs(\"div\",{className:\"mt-8 flex items-center justify-between text-slate-500\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest\",children:\"Manage Liquidity\"}),n.jsx(xn,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]})]})]}),n.jsxs(aa,{className:\"p-8 cursor-pointer bg-black border-white/5 sq-2xl border hover:bg-white/5 transition-all duration-300 group relative overflow-hidden\",onClick:()=>i(\"recurring\"),children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 bg-indigo-500 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20\"}),n.jsxs(\"div\",{className:\"relative z-10\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-indigo-500/10 border border-indigo-500/20 sq-md flex items-center justify-center text-indigo-400 mb-8 group-hover:scale-110 transition-transform duration-500\",children:n.jsx(Wr,{className:\"w-8 h-8\"})}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100\",children:\"Recurring Flow\"}),n.jsx(\"p\",{className:\"text-sm font-bold text-slate-400 uppercase tracking-tight\",children:\"Subscriptions & EMIs\"})]}),n.jsxs(\"div\",{className:\"mt-11 flex items-center justify-between text-slate-500\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest\",children:\"Active Commitments\"}),n.jsx(xn,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]})]})]})]}),n.jsxs(\"div\",{className:\"pt-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 mb-8\",children:[n.jsx(\"div\",{className:\"w-1.5 h-6 bg-slate-700 rounded-full\"}),n.jsx(\"h3\",{className:\"text-xs font-black uppercase tracking-[0.3em] text-slate-600\",children:\"System Configuration\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 gap-4\",children:[n.jsx(aa,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group\",onClick:r,children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400 group-hover:text-white transition-colors\",children:n.jsx(ry,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"App Settings\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"Preferences & Display\"})]})]}),n.jsx(xn,{className:\"w-5 h-5 text-slate-700 group-hover:text-slate-400 transition-colors\"})]})}),n.jsx(aa,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group\",onClick:c,children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400 group-hover:text-white transition-colors\",children:n.jsx(Gu,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"Alert Center\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"System Notifications\"})]})]}),n.jsx(xn,{className:\"w-5 h-5 text-slate-700 group-hover:text-slate-400 transition-colors\"})]})}),n.jsx(aa,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group opacity-60 hover:opacity-100\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400\",children:n.jsx(oy,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"Support\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"Documentation & Help\"})]})]}),n.jsx(xn,{className:\"w-5 h-5 text-slate-700 transition-colors\"})]})}),n.jsx(aa,{className:\"p-6 cursor-pointer bg-black border-white/5 sq-xl border hover:bg-white/5 transition-all group opacity-60 hover:opacity-100\",onClick:y,children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-white/5 sq-md flex items-center justify-center text-slate-400\",children:n.jsx(cy,{className:\"w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-sm font-black text-slate-200 uppercase tracking-tight\",children:\"About\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold\",children:\"Version 5.0 Stable Release\"})]})]}),n.jsx(xn,{className:\"w-5 h-5 text-slate-700 transition-colors\"})]})})]})]}),n.jsxs(\"div\",{className:\"text-center pt-8 border-t border-white/5\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-[0.5em] text-slate-700 mb-1\",children:\"FinHub Obsidian System\"}),n.jsx(\"p\",{className:\"text-[9px] font-bold text-slate-800\",children:\"BUILD 50.3.0 // QUANTUM CORE\"})]})]})}function iN({className:i,children:r,...c}){return n.jsxs(uy,{\"data-slot\":\"scroll-area\",className:ct(\"relative\",i),...c,children:[n.jsx(dy,{\"data-slot\":\"scroll-area-viewport\",className:\"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1\",children:r}),n.jsx(lN,{}),n.jsx(fy,{})]})}function lN({className:i,orientation:r=\"vertical\",...c}){return n.jsx(my,{\"data-slot\":\"scroll-area-scrollbar\",orientation:r,className:ct(\"flex touch-none p-px transition-colors select-none\",r===\"vertical\"&&\"h-full w-2.5 border-l border-l-transparent\",r===\"horizontal\"&&\"h-2.5 flex-col border-t border-t-transparent\",i),...c,children:n.jsx(hy,{\"data-slot\":\"scroll-area-thumb\",className:\"bg-border relative flex-1 rounded-full\"})})}function rN({isOpen:i,onClose:r,notifications:c,onNotificationClick:u,onMarkAsRead:m,onClearRead:g}){const h=c.filter(B=>!B.read).length,y=c.filter(B=>B.read).length,p=B=>{switch(B){case\"achievement\":return n.jsx(gy,{className:\"w-5 h-5 text-yellow-500\"});case\"goal\":return n.jsx(_s,{className:\"w-5 h-5 text-green-500\"});case\"insight\":return n.jsx(Si,{className:\"w-5 h-5 text-blue-500\"});case\"alert\":return n.jsx(Jr,{className:\"w-5 h-5 text-red-500\"});case\"reminder\":return n.jsx(Eu,{className:\"w-5 h-5 text-indigo-500\"})}},x=B=>{const L=new Date(B),P=new Date().getTime()-L.getTime(),V=Math.floor(P/6e4),S=Math.floor(P/36e5),se=Math.floor(P/864e5);return V<60?`${V}m ago`:S<24?`${S}h ago`:`${se}d ago`},[v,f]=A.useState({reminders:!0,transactions:!0,achievements:!1,insights:!1}),N=B=>{f(L=>({...L,[B]:!L[B]}))},M=[\"reminders\",\"transactions\",\"insights\",\"achievements\"],O=c.reduce((B,L)=>{const R=L.category||\"insights\";return B[R]||(B[R]=[]),B[R].push(L),B},{});return Object.keys(O).forEach(B=>{O[B].sort((L,R)=>L.read!==R.read?L.read?1:-1:new Date(R.timestamp).getTime()-new Date(L.timestamp).getTime())}),n.jsx(Xp,{open:i,onOpenChange:r,children:n.jsxs(Qp,{side:\"right\",className:\"w-full sm:max-w-lg p-0 flex flex-col h-dvh max-h-dvh bg-black border-white/5 text-slate-100 overflow-hidden z-[99999]\",children:[n.jsx(Zp,{className:\"sr-only\",children:\"Notifications\"}),n.jsx(Kp,{className:\"sr-only\",children:\"Protocol Intelligence Pulse\"}),n.jsxs(\"div\",{className:\"px-8 pt-28 pb-10 border-b border-white/5 bg-black relative overflow-hidden animate-in fade-in slide-in-from-right-4 duration-500\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-48 h-48 bg-indigo-500 blur-[120px] opacity-10 -mr-24 -mt-24\"}),n.jsx(\"div\",{className:\"absolute bottom-0 left-0 w-24 h-24 bg-blue-500 blur-[80px] opacity-5 -ml-12 -mb-12\"}),n.jsx(\"div\",{className:\"absolute top-8 right-8 z-30\",children:n.jsx(Ge,{variant:\"ghost\",size:\"icon\",onClick:r,className:\"w-10 h-10 sq-full bg-white/5 text-slate-400 hover:text-white hover:bg-white/10\",children:n.jsx(Tl,{className:\"w-5 h-5\"})})}),n.jsxs(\"div\",{className:\"flex items-center justify-between relative z-10\",children:[n.jsxs(\"div\",{className:\"flex flex-col gap-2\",children:[n.jsx(\"div\",{className:\"flex items-center gap-4\",children:n.jsxs(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tighter leading-none flex items-center gap-4\",children:[\"Pulse\",h>0&&n.jsx(\"span\",{className:\"flex items-center justify-center min-w-[24px] h-6 px-2 text-[10px] font-black bg-indigo-600 text-white sq-full shadow-[0_0_15px_rgba(79,70,229,0.4)]\",children:h})]})}),n.jsx(\"p\",{className:\"text-slate-500 font-black text-[10px] uppercase tracking-[0.3em] leading-none ml-0.5\",children:\"System Intelligence Stack\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[h>0&&n.jsx(Ge,{variant:\"ghost\",size:\"icon\",title:\"Mark all as read\",onClick:()=>{c.forEach(B=>{B.read||m?.(B.id)})},className:\"w-11 h-11 sq-md bg-white/5 text-slate-400 hover:text-indigo-400 hover:bg-white/10 transition-all duration-300 border border-white/5 active:scale-90\",children:n.jsx(py,{className:\"w-5 h-5\"})}),y>0&&n.jsx(Ge,{variant:\"ghost\",size:\"icon\",title:\"Clear history\",onClick:()=>{confirm(`Purge ${y} recorded protocol entries?`)&&g?.()},className:\"w-11 h-11 sq-md bg-white/5 text-slate-400 hover:text-rose-400 hover:bg-rose-500/10 transition-all duration-300 border border-white/5 active:scale-90\",children:n.jsx(Ai,{className:\"w-5 h-5\"})})]})]})]}),n.jsx(iN,{className:\"flex-1 w-full bg-black overflow-hidden custom-scrollbar\",children:n.jsx(\"div\",{className:\"px-6 space-y-12 py-8 pb-32\",children:c.length===0?n.jsxs(\"div\",{className:\"text-center py-32 flex flex-col items-center animate-in fade-in zoom-in duration-700\",children:[n.jsxs(\"div\",{className:\"w-24 h-24 bg-white/5 border border-white/5 sq-2xl flex items-center justify-center text-slate-800 mb-8 shadow-inner relative group\",children:[n.jsx(\"div\",{className:\"absolute inset-0 bg-indigo-500/5 blur-2xl sq-full group-hover:bg-indigo-500/10 transition-colors\"}),n.jsx(Gu,{className:\"w-10 h-10 relative z-10\"})]}),n.jsx(\"h4\",{className:\"text-2xl font-black text-slate-100 mb-3 tracking-tight\",children:\"Signal Silence\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-black uppercase tracking-[0.3em] max-w-[260px] leading-relaxed\",children:\"The protocol pulse is flat. We will alert you upon system breakthroughs.\"})]}):M.map(B=>{const L=O[B]||[];if(L.length===0)return null;const R=v[B],P=R?L.length:1,V=L.filter(S=>!S.read).length;return n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"button\",{onClick:()=>N(B),className:\"w-full flex items-center justify-between px-2 group\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-[0.4em] text-slate-500 group-hover:text-slate-300 transition-colors\",children:B}),V>0&&n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 sq-full animate-pulse shadow-[0_0_10px_rgba(99,102,241,0.6)]\"})]}),n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(\"span\",{className:\"text-[10px] font-black text-slate-700\",children:L.length}),R?n.jsx(Vu,{className:\"w-3 h-3 text-slate-700\"}):n.jsx(Kr,{className:\"w-3 h-3 text-slate-700\"})]})]}),n.jsxs(\"div\",{className:\"space-y-3 relative\",children:[!R&&L.length>1&&n.jsxs(n.Fragment,{children:[n.jsx(\"div\",{className:\"absolute top-2 left-2 right-2 h-full bg-black/40 sq-xl -z-10 border border-white/5 translate-y-2 scale-[0.98]\"}),n.jsx(\"div\",{className:\"absolute top-4 left-4 right-4 h-full bg-black/20 sq-xl -z-20 border border-white/5 translate-y-4 scale-[0.96]\"})]}),L.slice(0,P).map((S,se)=>{const he={style:{\"--anim-delay\":`${se*50}ms`,\"--z-index\":100-se}};return n.jsxs(\"div\",{...he,className:`p-6 sq-xl border transition-all duration-500 group relative overflow-hidden cursor-pointer active:scale-[0.98] animate-in fade-in slide-in-from-right-4 fill-mode-both [animation-delay:var(--anim-delay)] z-[var(--z-index)] ${S.read?\"bg-black border-white/5\":\"bg-black border-indigo-500/30 shadow-lg shadow-indigo-500/5 hover:border-indigo-500/50\"}`,onClick:ve=>{ve.stopPropagation(),u?.(S),S.read||m?.(S.id)},children:[S.priority===\"high\"&&!S.read&&n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 bg-red-500 blur-[80px] opacity-10 -mr-16 -mt-16\"}),!S.read&&S.priority!==\"high\"&&n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 bg-indigo-500 blur-[80px] opacity-10 -mr-16 -mt-16 group-hover:opacity-20 transition-opacity\"}),n.jsxs(\"div\",{className:\"flex gap-4 relative z-10\",children:[n.jsx(\"div\",{className:`w-12 h-12 sq-md flex items-center justify-center shrink-0 border border-white/5 transition-all duration-500 ${S.read?\"bg-white/5 text-slate-600\":S.priority===\"high\"?\"bg-red-500/10 text-red-400\":\"bg-indigo-500/10 text-indigo-400 shadow-inner\"}`,children:p(S.type)}),n.jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[n.jsxs(\"div\",{className:\"flex items-start justify-between gap-4\",children:[n.jsx(\"h4\",{className:`text-sm font-black tracking-tight leading-tight ${S.read?\"text-slate-500\":\"text-slate-100\"}`,children:S.title}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-700 whitespace-nowrap pt-1\",children:x(S.timestamp)})]}),n.jsx(\"p\",{className:`text-xs mt-2 leading-relaxed font-bold tracking-tight ${S.read?\"text-slate-700\":\"text-slate-400\"}`,children:S.message}),S.priority===\"high\"&&!S.read&&n.jsxs(\"div\",{className:\"mt-4 flex items-center gap-2\",children:[n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-red-400 sq-full animate-ping\"}),n.jsx(\"span\",{className:\"text-[10px] font-black text-red-400 uppercase tracking-[0.2em]\",children:\"Critical Stability Alert\"})]}),S.action&&S.action.status===\"pending\"&&n.jsxs(\"div\",{className:\"mt-4 flex gap-3 animate-in fade-in slide-in-from-top-1\",children:[n.jsx(Ge,{size:\"sm\",className:\"h-8 text-[10px] font-black uppercase tracking-widest bg-emerald-600 hover:bg-emerald-500 text-white border-0\",onClick:ve=>{ve.stopPropagation(),S.action.status=\"completed\",u?.(S)},children:\"Yes, Automate\"}),n.jsx(Ge,{size:\"sm\",variant:\"ghost\",className:\"h-8 text-[10px] font-black uppercase tracking-widest text-slate-500 hover:text-slate-300 hover:bg-white/5\",onClick:ve=>{ve.stopPropagation(),S.action.status=\"dismissed\",S.read||m?.(S.id)},children:\"No, One-time\"})]})]})]})]},S.id)})]})]},B)})})})]})})}const I0=[{text:\"An investment in knowledge pays the best interest.\",author:\"Benjamin Franklin\",category:\"financial-literacy\"},{text:\"It's not how much money you make, but how much money you keep, how hard it works for you, and how many generations you keep it for.\",author:\"Robert Kiyosaki\",category:\"financial-literacy\"},{text:\"Financial peace isn't the acquisition of stuff. It's learning to live on less than you make, so you can give money back and have money to invest.\",author:\"Dave Ramsey\",category:\"financial-literacy\"},{text:\"Do not save what is left after spending; instead spend what is left after saving.\",author:\"Warren Buffett\",category:\"financial-literacy\"},{text:\"The stock market is a device for transferring money from the impatient to the patient.\",author:\"Warren Buffett\",category:\"financial-literacy\"},{text:\"Know what you own, and know why you own it.\",author:\"Peter Lynch\",category:\"financial-literacy\"},{text:\"The individual investor should act consistently as an investor and not as a speculator.\",author:\"Ben Graham\",category:\"financial-literacy\"},{text:\"Price is what you pay. Value is what you get.\",author:\"Warren Buffett\",category:\"financial-literacy\"},{text:\"The goal isn't more money. The goal is living life on your terms.\",author:\"Chris Brogan\",category:\"financial-freedom\"},{text:\"Financial freedom is available to those who learn about it and work for it.\",author:\"Robert Kiyosaki\",category:\"financial-freedom\"},{text:\"The rich invest in time, the poor invest in money.\",author:\"Warren Buffett\",category:\"financial-freedom\"},{text:\"Wealth is the ability to fully experience life.\",author:\"Henry David Thoreau\",category:\"financial-freedom\"},{text:\"It's not about having lots of money. It's about knowing how to manage the money you do have.\",author:\"Dave Ramsey\",category:\"financial-freedom\"},{text:\"Money is a terrible master but an excellent servant.\",author:\"P.T. Barnum\",category:\"financial-freedom\"},{text:\"The quickest way to double your money is to fold it in half and put it in your back pocket.\",author:\"Will Rogers\",category:\"financial-freedom\"},{text:\"The best time to plant a tree was 20 years ago. The second best time is now.\",author:\"Chinese Proverb\",category:\"motivation\"},{text:\"A journey of a thousand miles begins with a single step.\",author:\"Lao Tzu\",category:\"motivation\"},{text:\"Success is not final, failure is not fatal: it is the courage to continue that counts.\",author:\"Winston Churchill\",category:\"motivation\"},{text:\"The only way to do great work is to love what you do.\",author:\"Steve Jobs\",category:\"motivation\"},{text:\"Don't watch the clock; do what it does. Keep going.\",author:\"Sam Levenson\",category:\"motivation\"},{text:\"Wealth is not about having a lot of money; it's about having a lot of options.\",author:\"Chris Rock\",category:\"motivation\"},{text:\"Every time you borrow money, you're robbing your future self.\",author:\"Nathan W. Morris\",category:\"motivation\"},{text:\"The habit of saving is itself an education; it fosters every virtue, teaches self-denial, cultivates the sense of order, trains to forethought, and so broadens the mind.\",author:\"T.T. Munger\",category:\"motivation\"},{text:\"Too many people spend money they haven't earned, to buy things they don't want, to impress people they don't like.\",author:\"Will Rogers\",category:\"motivation\"},{text:\"A budget is telling your money where to go instead of wondering where it went.\",author:\"Dave Ramsey\",category:\"motivation\"},{text:\"Beware of little expenses. A small leak will sink a great ship.\",author:\"Benjamin Franklin\",category:\"motivation\"},{text:\"Never spend your money before you have earned it.\",author:\"Thomas Jefferson\",category:\"motivation\"}];function V0(){return I0[Math.floor(Math.random()*I0.length)]}function oN({isOpen:i,onClose:r,achievementId:c}){const[u,m]=A.useState(V0());if(A.useEffect(()=>{i&&c&&(m(V0()),ji({particleCount:150,spread:100,origin:{y:.6},colors:[\"#FFD700\",\"#FFA500\",\"#FF6347\",\"#9370DB\",\"#3CB371\"]}))},[i,c]),!c)return null;const g=gp(c);return g?n.jsx(Bs,{open:i,onOpenChange:r,children:n.jsxs(Ls,{className:\"w-[270px] sm:w-full sm:max-w-md bg-slate-950 border-[#38383A] p-0 overflow-hidden rounded-[32px] shadow-2xl transition-all duration-500\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 sm:w-64 sm:h-64 bg-yellow-500 blur-[60px] sm:blur-[120px] opacity-10 -mr-16 -mt-16 sm:-mr-32 sm:-mt-32\"}),n.jsx(\"div\",{className:\"absolute bottom-0 left-0 w-24 h-24 sm:w-48 sm:h-48 bg-indigo-500 blur-[50px] sm:blur-[100px] opacity-5 -ml-12 -mb-12 sm:-ml-24 sm:-mb-24\"}),n.jsxs(qs,{className:\"px-6 sm:px-10 pt-8 sm:pt-12 pb-0 relative z-10\",children:[n.jsx(Is,{className:\"text-center text-xl sm:text-3xl font-black text-white tracking-tight transition-all\",children:\"Achievement Unlocked\"}),n.jsx(Vs,{className:\"text-center text-[8px] sm:text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] sm:tracking-[0.3em] mt-1 sm:mt-2 transition-all\",children:\"Protocol Milestone Verified\"})]}),n.jsxs(\"div\",{className:\"space-y-6 sm:space-y-10 py-8 sm:py-12 px-6 sm:px-10 relative z-10\",children:[n.jsxs(\"div\",{className:\"relative flex justify-center\",children:[n.jsx(Oe.div,{className:\"relative z-10\",initial:{scale:0,rotateY:0},animate:{scale:1,rotateY:[0,1080],transition:{scale:{duration:.8,ease:\"backOut\"},rotateY:{duration:4,ease:\"easeInOut\"}}},children:n.jsxs(\"div\",{className:\"relative\",children:[n.jsx(Oe.div,{className:\"absolute inset-0 bg-yellow-400 blur-3xl opacity-20 rounded-full\",animate:{scale:[1,1.3,1],opacity:[.2,.4,.2]},transition:{duration:3,repeat:1/0,ease:\"easeInOut\"}}),n.jsxs(\"div\",{className:\"relative w-32 h-32 sm:w-44 sm:h-44 bg-gradient-to-br from-yellow-400 via-orange-500 to-yellow-600 rounded-[32px] sm:rounded-[48px] flex items-center justify-center shadow-[0_15px_40px_rgba(234,179,8,0.25)] border-4 border-white/20 transition-all\",children:[n.jsx(\"span\",{className:\"text-5xl sm:text-7xl drop-shadow-2xl transition-all\",children:g.icon}),n.jsx(\"div\",{className:\"absolute inset-0 bg-gradient-to-tr from-white/10 to-transparent pointer-events-none rounded-[28px] sm:rounded-[44px]\"})]})]})}),n.jsxs(\"div\",{className:\"absolute inset-0 z-20 flex justify-center items-center pointer-events-none\",children:[n.jsx(Oe.div,{className:\"absolute w-32 h-32 sm:w-48 sm:h-48 bg-yellow-500/40 blur-[40px] sm:blur-[60px] rounded-full\",initial:{scale:0,opacity:0},animate:{scale:1.4,opacity:1},transition:{delay:.3,duration:1.2,ease:\"easeOut\"}}),n.jsx(Oe.div,{className:\"absolute w-24 h-24 sm:w-36 sm:h-36 bg-indigo-500/30 blur-[30px] sm:blur-[45px] rounded-full -ml-8 -mt-6 sm:-ml-12 sm:-mt-10\",initial:{scale:0,opacity:0},animate:{scale:1.8,opacity:.8},transition:{delay:.4,duration:1.2,ease:\"easeOut\"}}),n.jsx(Oe.div,{className:\"absolute w-20 h-20 sm:w-32 sm:h-32 bg-rose-500/30 blur-[25px] sm:blur-[40px] rounded-full ml-10 mt-8 sm:ml-16 sm:mt-12\",initial:{scale:0,opacity:0},animate:{scale:1.6,opacity:.8},transition:{delay:.5,duration:1.2,ease:\"easeOut\"}})]})]}),n.jsxs(Oe.div,{className:\"text-center space-y-2 sm:space-y-4\",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:.6},children:[n.jsx(\"h3\",{className:\"text-lg sm:text-3xl font-black bg-gradient-to-r from-yellow-200 via-yellow-500 to-yellow-200 bg-clip-text text-transparent tracking-tight transition-all\",children:g.name}),n.jsx(\"p\",{className:\"text-slate-400 font-bold text-[11px] sm:text-sm leading-relaxed max-w-[200px] sm:max-w-[280px] mx-auto transition-all\",children:g.description})]}),n.jsx(Oe.div,{className:\"flex justify-center\",initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},children:n.jsxs(\"div\",{className:\"flex items-center gap-3 sm:gap-4\",children:[n.jsx(\"div\",{className:\"h-px w-12 sm:w-20 bg-gradient-to-r from-transparent via-white/10 to-transparent\"}),n.jsx(\"div\",{className:\"w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full bg-yellow-500/50 blur-[1px] animate-pulse\"}),n.jsx(\"div\",{className:\"h-px w-12 sm:w-20 bg-gradient-to-r from-transparent via-white/10 to-transparent\"})]})}),n.jsxs(Oe.div,{className:\"p-4 sm:p-8 bg-white/5 rounded-2xl sm:rounded-[32px] border border-white/5 relative overflow-hidden transition-all\",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:1},children:[n.jsx(\"div\",{className:\"absolute top-0 left-0 w-12 h-12 bg-indigo-500 blur-2xl opacity-5\"}),n.jsxs(\"div\",{className:\"flex items-start gap-3 sm:gap-6 relative z-10 text-left\",children:[n.jsx(\"span\",{className:\"text-xl sm:text-3xl pt-0 opacity-40\",children:'\"'}),n.jsxs(\"div\",{className:\"flex-1\",children:[n.jsx(\"p\",{className:\"text-[10px] sm:text-sm font-bold italic text-slate-300 leading-snug sm:leading-relaxed tracking-tight transition-all\",children:u.text}),n.jsxs(\"div\",{className:\"flex items-center gap-2 sm:gap-4 mt-3 sm:mt-6 transition-all\",children:[n.jsx(\"div\",{className:\"h-px flex-1 bg-white/5\"}),n.jsxs(\"p\",{className:\"text-[8px] sm:text-[10px] font-black text-slate-500 uppercase tracking-widest shrink-0\",children:[\"— \",u.author]})]})]})]})]})]})]})}):null}const cN=({accounts:i,goals:r,liabilities:c,expenses:u,emergencyFundAmount:m=0})=>{const g=A.useMemo(()=>i.filter(f=>f.type===\"bank\"||f.type===\"cash\").reduce((f,N)=>f+N.balance,0),[i]),h=A.useMemo(()=>i.filter(f=>f.type===\"credit_card\").reduce((f,N)=>f+Math.abs(N.balance),0),[i]),y=A.useMemo(()=>{const f=c.reduce((M,O)=>M+(O.emiAmount||0),0),N=u.filter(M=>M.isRecurring).reduce((M,O)=>M+O.amount,0);return f+N},[c,u]),p=A.useMemo(()=>r.reduce((N,M)=>N+M.currentAmount,0)+(m||0),[r,m]),x=A.useMemo(()=>p+y,[p,y]),v=A.useMemo(()=>{const f=g-x;return Math.max(0,f)},[g,x]);return{totalBankBalance:g,totalCreditUsage:h,totalCommitments:y,shadowWalletTotal:p,totalReserved:x,availableToSpend:v}},bl=({children:i,icon:r,variant:c=\"blue\",glow:u=!0,className:m,...g})=>{const h={blue:\"border-blue-500/50 text-blue-400 hover:border-blue-500 hover:shadow-[0_0_20px_rgba(59,130,246,0.4)] shadow-[0_0_10px_rgba(59,130,246,0.2)]\",green:\"border-emerald-500/50 text-emerald-400 hover:border-emerald-500 hover:shadow-[0_0_20px_rgba(16,185,129,0.4)] shadow-[0_0_10px_rgba(16,185,129,0.2)]\",purple:\"border-purple-500/50 text-purple-400 hover:border-purple-500 hover:shadow-[0_0_20px_rgba(168,85,247,0.4)] shadow-[0_0_10px_rgba(168,85,247,0.2)]\",rose:\"border-rose-500/50 text-rose-400 hover:border-rose-500 hover:shadow-[0_0_20px_rgba(244,63,94,0.4)] shadow-[0_0_10px_rgba(244,63,94,0.2)]\"};return n.jsxs(\"button\",{className:ct(\"relative group flex items-center justify-center gap-2 px-6 h-11\",\"bg-[#0A141E]/80 backdrop-blur-md border-2 rounded-2xl transition-all duration-300\",\"font-mono font-bold uppercase tracking-widest text-[10px]\",\"hover:scale-[1.02] active:scale-[0.98]\",h[c],m),...g,children:[r&&n.jsx(r,{className:\"w-4 h-4 transition-all duration-700 ease-quantum group-hover:rotate-[720deg] active:-rotate-12\"}),n.jsx(\"span\",{children:i})]})};function uN({isOpen:i,onClose:r,accounts:c,goals:u,currency:m,destinationType:g,emergencyFund:h,onAllocate:y,liabilities:p=[],expenses:x=[]}){const[v,f]=A.useState(\"\"),[N,M]=A.useState(\"\"),[O,B]=A.useState(\"\"),[L,R]=A.useState(!1),[P,V]=A.useState(!1),{availableToSpend:S,totalBankBalance:se,shadowWalletTotal:he,totalCommitments:ve}=cN({accounts:c,goals:u,liabilities:p,expenses:x,emergencyFundAmount:h?.currentAmount||0});A.useEffect(()=>{if(i&&!v&&c.length>0){const C=c.filter(Y=>Y.type===\"bank\"||Y.type===\"cash\");if(C.length>0){const Y=C.find(oe=>oe.balance>=S)||[...C].sort((oe,ge)=>ge.balance-oe.balance)[0];f(Y.id)}}},[i,S,c,v]);const fe=c.find(C=>C.id===v),ye=u.find(C=>C.id===N),Se=parseFloat(O)||0,qe=()=>{if(S>0){if(B(S.toString()),g===\"goal\"&&!N&&u.length>0){const C=[...u].sort((Y,oe)=>{const ge=new Date(Y.targetDate).getTime(),z=new Date(oe.targetDate).getTime();if(ge!==z)return ge-z;const T=Y.currentAmount/Y.targetAmount,re=oe.currentAmount/oe.targetAmount;return T-re});M(C[0].id),J.info(`Suggested: ${C[0].name} based on timeline & progress`,{icon:n.jsx(bn,{className:\"w-4 h-4 text-blue-400\"})})}}else J.error(\"No surplus liquidity available for auto-fill\")},Te=()=>{if(!v){J.error(\"Please select an account\");return}if(g===\"goal\"&&!N){J.error(\"Please select a goal\");return}if(!O||Se<=0){J.error(\"Please enter a valid amount\");return}if(fe&&Se>fe.balance){J.error(\"Insufficient balance in selected account\");return}R(!0)},ee=()=>{y({accountId:v,destinationId:g===\"goal\"?N:\"emergency-fund\",amount:Se,destinationType:g}),f(\"\"),M(\"\"),B(\"\"),R(!1),r()},me=()=>{R(!1)},G=()=>{f(\"\"),M(\"\"),B(\"\"),R(!1),V(!1),r()};return n.jsx(Bs,{open:i,onOpenChange:G,children:n.jsx(Ls,{className:\"max-w-md bg-black border-white/5 text-white p-0 custom-scrollbar sq-2xl overflow-hidden\",children:n.jsxs(\"div\",{className:\"max-h-[85vh] overflow-y-auto p-8 custom-scrollbar\",children:[n.jsxs(qs,{className:\"mb-6\",children:[n.jsx(Is,{className:\"text-xl font-black tracking-tight text-white mb-1\",children:g===\"goal\"?\"🎯 ALLOCATE TO GOAL\":\"🛡️ ALLOCATE TO RESERVE\"}),n.jsxs(Vs,{className:\"text-slate-500 text-[10px] uppercase font-black tracking-widest\",children:[\"Protocol: Move liquidity from account to \",g===\"goal\"?\"savings milestone\":\"emergency reserve\"]})]}),L?n.jsxs(\"div\",{className:\"space-y-6 py-4\",children:[n.jsx(\"div\",{className:\"text-center pt-2\",children:n.jsx(\"p\",{className:\"text-[10px] text-emerald-500 uppercase font-black tracking-[0.2em] animate-pulse\",children:\"Capital Allocation Protocol Ready\"})}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"div\",{className:\"p-5 bg-white/5 sq-md border border-white/10 relative overflow-hidden group\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 p-2 opacity-5\",children:n.jsx(Hu,{className:\"w-8 h-8\"})}),n.jsx(\"p\",{className:\"text-[8px] text-slate-500 uppercase font-black tracking-widest mb-3 opacity-60\",children:\"Debit Source\"}),n.jsx(\"p\",{className:\"font-black text-sm text-white tracking-tight\",children:fe?.name}),n.jsxs(\"div\",{className:\"mt-4 space-y-2.5\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-medium\",children:[n.jsx(\"span\",{className:\"text-slate-400 uppercase tracking-tighter\",children:\"Current Liquidity\"}),n.jsx(\"span\",{className:\"font-mono text-white\",children:$e(fe?.balance||0,m)})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-bold text-rose-500\",children:[n.jsx(\"span\",{className:\"uppercase tracking-tighter\",children:\"Debit Volume\"}),n.jsxs(\"span\",{className:\"font-mono\",children:[\"-\",$e(Se,m)]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"flex justify-between text-xs font-black\",children:[n.jsx(\"span\",{className:\"text-slate-500 uppercase tracking-widest\",children:\"Post-Debit Projection\"}),n.jsx(\"span\",{className:\"text-blue-400 font-mono\",children:$e((fe?.balance||0)-Se,m)})]})]})]}),n.jsx(\"div\",{className:\"flex justify-center -my-2 relative z-10\",children:n.jsx(\"div\",{className:\"w-10 h-10 bg-blue-600 sq-md flex items-center justify-center shadow-[0_0_20px_rgba(37,99,235,0.3)] border border-blue-400/20\",children:n.jsx(ap,{className:\"w-5 h-5 text-white\"})})}),n.jsxs(\"div\",{className:`p-5 sq-md border relative overflow-hidden ${g===\"goal\"?\"bg-emerald-500/5 border-emerald-500/20\":\"bg-blue-500/5 border-blue-500/20\"}`,children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 p-2 opacity-10\",children:g===\"goal\"?n.jsx(bn,{className:\"w-8 h-8 text-emerald-500\"}):n.jsx(_s,{className:\"w-8 h-8 text-blue-500\"})}),n.jsx(\"p\",{className:\"text-[8px] text-slate-500 uppercase font-black tracking-widest mb-3 opacity-60\",children:\"Credit Destination\"}),n.jsxs(\"div\",{className:\"flex items-center gap-2 mb-4\",children:[n.jsx(\"span\",{className:\"text-xl\",children:g===\"goal\"?ye?.emoji:\"🛡️\"}),n.jsx(\"p\",{className:\"font-black text-sm text-white tracking-tight\",children:g===\"goal\"?ye?.name:\"Emergency Reserve\"})]}),n.jsxs(\"div\",{className:\"space-y-2.5\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-medium\",children:[n.jsx(\"span\",{className:\"text-slate-400 uppercase tracking-tighter\",children:\"Current Level\"}),n.jsx(\"span\",{className:\"font-mono text-white\",children:$e((g===\"goal\"?ye?.currentAmount:h?.currentAmount)||0,m)})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[11px] font-bold text-emerald-400\",children:[n.jsx(\"span\",{className:\"uppercase tracking-tighter\",children:\"Credit Volume\"}),n.jsxs(\"span\",{className:\"font-mono\",children:[\"+\",$e(Se,m)]})]}),n.jsx(\"div\",{className:\"h-px bg-white/5\"}),n.jsxs(\"div\",{className:\"flex justify-between text-xs font-black\",children:[n.jsx(\"span\",{className:\"text-slate-500 uppercase tracking-widest\",children:\"Post-Credit Value\"}),n.jsx(\"span\",{className:\"text-emerald-400 font-mono\",children:$e(((g===\"goal\"?ye?.currentAmount:h?.currentAmount)||0)+Se,m)})]})]})]})]}),n.jsx(\"div\",{className:\"p-4 bg-amber-500/5 border border-amber-500/20 sq-md\",children:n.jsxs(\"div\",{className:\"flex gap-3\",children:[n.jsx(zu,{className:\"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5\"}),n.jsxs(\"div\",{className:\"text-[10px]\",children:[n.jsx(\"p\",{className:\"font-black text-amber-400 uppercase tracking-widest mb-1\",children:\"Node Equilibrium Warning\"}),n.jsxs(\"p\",{className:\"text-amber-500/70 font-bold leading-relaxed\",children:[\"Net Liquidity and \",fe?.name,\" reserves will be reduced by \",$e(Se,m),\" immediately. This action is final.\"]})]})]})}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(bl,{onClick:me,className:\"flex-1 h-12 text-slate-500 hover:text-white border-white/5 font-black tracking-[0.2em]\",children:\"Re-Configure\"}),n.jsx(bl,{onClick:ee,className:\"flex-1 h-12 bg-emerald-600/20 text-emerald-400 border-emerald-500/30 font-black tracking-[0.2em] shadow-lg shadow-emerald-500/10\",children:\"Execute Move\"})]})]}):n.jsxs(\"div\",{className:\"space-y-6\",children:[S>0&&n.jsxs(\"div\",{className:\"relative group overflow-hidden sq-xl border border-emerald-500/20 bg-emerald-500/5 p-5 transition-all hover:bg-emerald-500/10 mb-2\",children:[n.jsx(Fp,{variant:\"savings\"}),n.jsxs(\"div\",{className:\"relative z-10 flex flex-col gap-4\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-10 h-10 bg-emerald-500/20 sq-md flex items-center justify-center border border-emerald-500/30\",children:n.jsx(bn,{className:\"w-5 h-5 text-emerald-400\"})}),n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-[9px] text-emerald-500/70 font-black uppercase tracking-widest\",children:\"Surplus Detected\"}),n.jsx(\"h4\",{className:\"text-xl font-black text-white tabular-nums\",children:$e(S,m)})]})]}),n.jsx(\"button\",{onClick:()=>V(!P),className:\"p-2 hover:bg-white/5 rounded-full transition-colors text-slate-500 hover:text-white\",title:\"Show Calculation\",children:P?n.jsx(Vu,{className:\"w-4 h-4\"}):n.jsx(xy,{className:\"w-4 h-4\"})})]}),P&&n.jsxs(\"div\",{className:\"py-3 border-t border-emerald-500/10 space-y-2 animate-in fade-in slide-in-from-top-2 duration-300\",children:[n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-emerald-500/60 font-medium\",children:[n.jsx(\"span\",{children:\"Total Liquidity\"}),n.jsx(\"span\",{children:$e(se,m)})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-rose-500/60 font-medium\",children:[n.jsx(\"span\",{children:\"Shadow Wallet (Goals + EF)\"}),n.jsxs(\"span\",{children:[\"-\",$e(he,m)]})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-rose-500/60 font-medium pb-2 border-b border-emerald-500/10\",children:[n.jsx(\"span\",{children:\"Total Commitments (Bills)\"}),n.jsxs(\"span\",{children:[\"-\",$e(ve,m)]})]}),n.jsxs(\"div\",{className:\"flex justify-between text-[10px] text-emerald-400 font-bold uppercase pt-1\",children:[n.jsx(\"span\",{children:\"Available Safety Margin\"}),n.jsx(\"span\",{children:$e(S,m)})]})]}),n.jsx(bl,{onClick:()=>{qe(),S>fe?.balance&&J.warning(\"Surplus exceeds selected account balance. Source adjusted.\")},className:\"w-full h-11 bg-emerald-500/20 text-emerald-400 border-emerald-500/30 font-black tracking-widest\",children:\"Allocate All Surplus\"})]})]}),n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(Re,{htmlFor:\"allocate-from-account\",className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 mb-2 block\",children:\"Source Node\"}),n.jsxs(ha,{value:v,onValueChange:f,children:[n.jsx(ga,{id:\"allocate-from-account\",name:\"fromAccountId\",className:\"bg-black border-white/5 sq-md h-14 text-white focus:ring-1 focus:ring-blue-500/50\",children:n.jsx(pa,{placeholder:\"Select Capital Source\"})}),n.jsx(xa,{className:\"bg-black border-white/10 text-white sq-xl\",children:c.map(C=>n.jsx(vt,{value:C.id,className:\"hover:bg-white/5\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between w-full\",children:[n.jsxs(\"span\",{children:[C.icon,\" \",C.name]}),n.jsx(\"span\",{className:\"text-[10px] text-slate-500 ml-4 font-mono\",children:$e(C.balance,m)})]})},C.id))})]}),fe&&n.jsxs(\"p\",{className:\"text-[10px] text-slate-500 mt-2 italic px-1\",children:[\"Available Liquidity: \",$e(fe.balance,m)]})]}),g===\"goal\"?n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(Re,{htmlFor:\"allocate-to-goal\",className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 mb-2 block\",children:\"Target Milestone\"}),n.jsxs(ha,{value:N,onValueChange:M,children:[n.jsx(ga,{id:\"allocate-to-goal\",name:\"toGoalId\",className:\"bg-black border-white/5 sq-md h-14 text-white focus:ring-1 focus:ring-emerald-500/50\",children:n.jsx(pa,{placeholder:\"Choose Destination Goal\"})}),n.jsx(xa,{className:\"bg-black border-white/10 text-white sq-xl\",children:u.map(C=>{const Y=C.currentAmount/C.targetAmount*100;return n.jsx(vt,{value:C.id,className:\"hover:bg-white/5\",children:n.jsxs(\"div\",{className:\"flex items-center gap-2\",children:[n.jsx(\"span\",{className:\"text-lg\",children:C.emoji}),n.jsxs(\"div\",{className:\"min-w-0\",children:[n.jsx(\"div\",{className:\"font-bold text-xs uppercase tracking-tight\",children:C.name}),n.jsxs(\"div\",{className:\"text-[9px] text-slate-500 font-mono\",children:[Math.round(Y),\"% SYNCHRONIZED • \",$e(C.currentAmount,m)]})]})]})},C.id)})})]})]}):n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(Re,{className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 mb-2 block\",children:\"Stability Reserve\"}),n.jsx(\"div\",{className:\"p-4 bg-white/5 border border-white/10 sq-md\",children:n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-10 h-10 bg-blue-500/10 sq-md flex items-center justify-center border border-blue-500/20\",children:\"🛡️\"}),n.jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[n.jsx(\"p\",{className:\"font-black text-xs uppercase tracking-widest text-white\",children:\"Emergency Fund\"}),h&&n.jsxs(\"p\",{className:\"text-[9px] text-slate-500 font-mono mt-1\",children:[$e(h.currentAmount,m),\" / \",$e(h.targetAmount,m)]})]})]})})]}),n.jsxs(\"div\",{className:\"space-y-2 text-label\",children:[n.jsx(\"div\",{className:\"flex justify-between items-center mb-1\",children:n.jsx(Re,{htmlFor:\"allocate-amount\",className:\"text-[10px] uppercase tracking-widest font-black text-slate-500 block\",children:\"Contribution Volume\"})}),n.jsxs(\"div\",{className:\"relative\",children:[n.jsx(\"span\",{className:\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500\",children:m===\"INR\"?\"₹\":\"$\"}),n.jsx(Pt,{id:\"allocate-amount\",name:\"amount\",type:\"number\",placeholder:\"0\",value:O,onChange:C=>B(C.target.value),className:\"pl-8 bg-black border-white/5 h-12\",min:\"0\",step:\"0.01\"})]}),fe&&Se>fe.balance&&n.jsxs(\"div\",{className:\"flex items-center gap-2 text-sm text-red-600\",children:[n.jsx(zu,{className:\"w-4 h-4\"}),n.jsx(\"span\",{children:\"Amount exceeds available balance\"})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(bl,{onClick:G,className:\"flex-1 h-12 text-slate-500 hover:text-white border-white/5 font-black tracking-[0.2em]\",children:\"Abort\"}),n.jsx(bl,{onClick:Te,className:\"flex-1 h-12 bg-blue-600/20 text-blue-400 border-blue-500/30 font-black tracking-[0.2em] shadow-lg shadow-blue-500/10\",children:\"Preview Mode\"})]})]})]})})})}const dN=[{name:\"HDFC Bank\",icon:\"🏦\",color:\"#1d4ed8\",type:\"bank\"},{name:\"ICICI Bank\",icon:\"🏦\",color:\"#ea580c\",type:\"bank\"},{name:\"State Bank of India\",icon:\"🏦\",color:\"#2563eb\",type:\"bank\"},{name:\"Axis Bank\",icon:\"🏦\",color:\"#9d174d\",type:\"bank\"},{name:\"Kotak Mahindra Bank\",icon:\"🏦\",color:\"#dc2626\",type:\"bank\"},{name:\"Bank of America\",icon:\"🏦\",color:\"#0033aa\",type:\"bank\"},{name:\"Chase Bank\",icon:\"🏦\",color:\"#117aca\",type:\"bank\"},{name:\"Wells Fargo\",icon:\"🏦\",color:\"#d71e28\",type:\"bank\"},{name:\"HSBC\",icon:\"🏦\",color:\"#db0011\",type:\"bank\"},{name:\"Barclays\",icon:\"🏦\",color:\"#00aeef\",type:\"bank\"},{name:\"Standard Chartered\",icon:\"🏦\",color:\"#00945e\",type:\"bank\"},{name:\"Citibank\",icon:\"🏦\",color:\"#003b70\",type:\"bank\"},{name:\"DBS Bank\",icon:\"🏦\",color:\"#ff0000\",type:\"bank\"},{name:\"Federal Bank\",icon:\"🏦\",color:\"#0b5a91\",type:\"bank\"},{name:\"American Express\",icon:\"💳\",color:\"#006fcf\",type:\"credit_card\"},{name:\"Discover\",icon:\"💳\",color:\"#ff6600\",type:\"credit_card\"},{name:\"Capital One\",icon:\"💳\",color:\"#d22e2e\",type:\"credit_card\"},{name:\"Goldman Sachs\",icon:\"🏦\",color:\"#725a34\",type:\"bank\"},{name:\"Morgan Stanley\",icon:\"🏦\",color:\"#000033\",type:\"bank\"},{name:\"Apple Card\",icon:\"💳\",color:\"#000000\",type:\"credit_card\"},{name:\"PayPal\",icon:\"💳\",color:\"#003087\",type:\"credit_card\"},{name:\"Revolut\",icon:\"💳\",color:\"#000000\",type:\"credit_card\"},{name:\"Monzo\",icon:\"💳\",color:\"#ff4d4f\",type:\"credit_card\"}];function fN({accounts:i,currency:r,onCreateAccount:c,onUpdateAccount:u,onDeleteAccount:m}){const[g,h]=A.useState(!1),[y,p]=A.useState(null),[x,v]=A.useState({name:\"\",type:\"bank\",balance:0,color:gu[0],icon:xu[0].value,creditLimit:0,safeLimitPercentage:30,serviceChargePercentage:0,statementDate:1}),[f,N]=A.useState([]),M=S=>{S?(p(S),v({name:S.name,type:S.type,balance:S.balance,color:S.color,icon:S.icon,creditLimit:S.creditLimit||0,safeLimitPercentage:S.safeLimitPercentage||30,serviceChargePercentage:S.serviceChargePercentage||0,statementDate:S.statementDate||1})):(p(null),v({name:\"\",type:\"bank\",balance:0,color:gu[0],icon:xu[0].value,creditLimit:0,safeLimitPercentage:30,serviceChargePercentage:0,statementDate:1})),N([]),h(!0)},O=S=>{if(v({...x,name:S}),S.length>1){const se=dN.filter(he=>he.name.toLowerCase().includes(S.toLowerCase())).slice(0,4);N(se)}else N([])},B=S=>{v({...x,name:S.name,type:S.type,icon:S.icon,color:S.color}),N([])},L=async S=>{if(S.preventDefault(),!x.name.trim()){J.error(\"Please enter an account name\");return}try{y?await u(y.id,x):await c(x),h(!1)}catch(se){console.error(\"Error saving account:\",se)}},R=async S=>{if(confirm(\"Are you sure you want to delete this account? This action cannot be undone.\"))try{await m(S)}catch(se){console.error(\"Error deleting account:\",se)}};return n.jsxs(\"div\",{className:\"space-y-12 animate-in fade-in slide-in-from-bottom-4 duration-700 px-4 pb-24\",children:[n.jsxs(\"div\",{className:\"flex items-end justify-between gap-6\",children:[n.jsxs(\"div\",{className:\"min-w-0\",children:[n.jsx(\"h2\",{className:\"text-3xl font-black text-slate-100 tracking-tight leading-none mb-3 truncate\",children:\"Accounts & Cards\"}),n.jsxs(\"div\",{className:\"flex flex-wrap gap-2 mb-3\",children:[n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-emerald-500 bg-emerald-500/10 px-2 py-0.5 rounded-lg border border-emerald-500/20 whitespace-nowrap\",children:[i.filter(S=>S.type===\"bank\").length,\" Banks\"]}),n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-rose-500 bg-rose-500/10 px-2 py-0.5 rounded-lg border border-rose-500/20 whitespace-nowrap\",children:[i.filter(S=>S.type===\"credit_card\").length,\" Credit\"]}),n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-amber-500 bg-amber-500/10 px-2 py-0.5 rounded-lg border border-amber-500/20 whitespace-nowrap\",children:[i.filter(S=>S.type===\"cash\").length,\" Cash\"]}),n.jsxs(\"span\",{className:\"text-[8px] font-black uppercase tracking-widest text-blue-500 bg-blue-500/10 px-2 py-0.5 rounded-lg border border-blue-500/20 whitespace-nowrap\",children:[i.filter(S=>S.type===\"investment\").length,\" Holding\"]})]}),n.jsx(\"p\",{className:\"text-slate-500 font-bold max-w-md text-[10px] truncate\",children:\"Monitor liquidity across core reservoirs and credit pools.\"})]}),n.jsxs(Ge,{onClick:()=>M(),className:\"bg-emerald-600 hover:bg-emerald-500 text-white rounded-xl px-6 h-12 font-bold shadow-lg shadow-emerald-600/20 transition-all active:scale-95 shrink-0\",children:[n.jsx(Nl,{className:\"w-4 h-4 sm:mr-2\"}),n.jsx(\"span\",{className:\"hidden sm:inline\",children:\"Add Account\"}),n.jsx(\"span\",{className:\"sm:hidden\",children:\"Add\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(by,{className:\"w-3.5 h-3.5\"}),\"Bank Accounts\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(S=>S.type===\"bank\").map(S=>n.jsx(P,{account:S},S.id)),i.filter(S=>S.type===\"bank\").length===0&&n.jsx(V,{message:\"No bank accounts detected.\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(yy,{className:\"w-3.5 h-3.5\"}),\"Credit Pools (Cards)\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(S=>S.type===\"credit_card\").map(S=>n.jsx(P,{account:S},S.id)),i.filter(S=>S.type===\"credit_card\").length===0&&n.jsx(V,{message:\"No credit pools detected.\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(Hu,{className:\"w-3.5 h-3.5\"}),\"Cash in Hand\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(S=>S.type===\"cash\").map(S=>n.jsx(P,{account:S},S.id)),i.filter(S=>S.type===\"cash\").length===0&&n.jsx(V,{message:\"No physical liquid reservoirs detected.\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"h3\",{className:\"text-[10px] uppercase font-black tracking-[0.3em] text-slate-600 flex items-center gap-2 ml-2\",children:[n.jsx(Si,{className:\"w-3.5 h-3.5\"}),\"Investment Holding Nodes\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[i.filter(S=>S.type===\"investment\").map(S=>n.jsx(P,{account:S},S.id)),i.filter(S=>S.type===\"investment\").length===0&&n.jsx(\"div\",{className:\"md:col-span-2 lg:col-span-3 p-8 border border-dashed border-white/5 squircle-22 flex items-center justify-center text-slate-600 font-bold text-xs\",children:\"No investment nodes detected. Link them to track growth separately.\"})]})]}),n.jsx(Bs,{open:g,onOpenChange:h,children:n.jsxs(Ls,{className:\"max-w-md max-h-[90vh] overflow-y-auto bg-slate-950 border-white/10 text-white squircle-22 p-8 custom-scrollbar\",children:[n.jsxs(qs,{children:[n.jsx(Is,{className:\"text-3xl font-black tracking-tight text-white mb-2\",children:y?\"Refine Account\":\"New Liquidity Reservoir\"}),n.jsx(Vs,{className:\"text-slate-500 font-bold mb-6\",children:\"Establish a new liquidity pool in the Obsidian system.\"})]}),n.jsxs(\"form\",{onSubmit:L,className:\"space-y-8\",children:[n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"name\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Account Identity\"}),n.jsx(Pt,{id:\"name\",name:\"name\",value:x.name,onChange:S=>O(S.target.value),placeholder:\"e.g. Mercury Checking\",required:!0,className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white focus:ring-emerald-500/50\",autoComplete:\"off\"}),f.length>0&&n.jsxs(\"div\",{className:\"mt-3 p-4 bg-indigo-500/5 border border-indigo-500/10 squircle-12 flex items-start gap-4 animate-in fade-in zoom-in-95 duration-300\",children:[n.jsx(bn,{className:\"w-4 h-4 text-indigo-400 mt-1 flex-shrink-0\"}),n.jsxs(\"div\",{className:\"flex-1\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-widest text-indigo-300 mb-3 opacity-60\",children:\"Intelligence Suggested\"}),n.jsx(\"div\",{className:\"grid grid-cols-1 gap-2\",children:f.map(S=>n.jsxs(\"button\",{type:\"button\",onClick:()=>B(S),className:\"flex items-center gap-3 p-2.5 squircle-12 bg-white/5 hover:bg-white/10 transition-all group border border-white/5\",children:[n.jsx(\"span\",{className:\"text-lg group-hover:scale-110 transition-transform\",children:S.icon}),n.jsx(\"span\",{className:\"text-xs font-bold text-slate-300 group-hover:text-white transition-colors\",children:S.name})]},S.name))})]})]})]}),n.jsxs(\"div\",{className:\"grid grid-cols-3 gap-4\",children:[n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${x.type===\"bank\"?\"border-emerald-500 bg-emerald-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>v({...x,type:\"bank\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-emerald-500/20 flex items-center justify-center text-xl mb-2\",children:\"🏦\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Bank Reservoir\"})]}),n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${x.type===\"credit_card\"?\"border-rose-500 bg-rose-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>v({...x,type:\"credit_card\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-rose-500/20 flex items-center justify-center text-xl mb-2\",children:\"💳\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Credit Pool\"})]}),n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${x.type===\"cash\"?\"border-amber-500 bg-amber-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>v({...x,type:\"cash\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-amber-500/20 flex items-center justify-center text-xl mb-2\",children:\"💵\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Cash in Hand\"})]}),n.jsxs(\"div\",{className:`p-4 squircle-12 border-2 cursor-pointer transition-all ${x.type===\"investment\"?\"border-blue-500 bg-blue-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,onClick:()=>v({...x,type:\"investment\"}),children:[n.jsx(\"div\",{className:\"w-10 h-10 squircle-12 bg-blue-500/20 flex items-center justify-center text-xl mb-2\",children:\"📈\"}),n.jsx(\"p\",{className:\"text-[9px] font-black uppercase text-white leading-tight\",children:\"Growth Node\"})]})]}),n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"balance\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:x.type===\"bank\"||x.type===\"cash\"||x.type===\"investment\"?\"Initial Liquidity\":\"Current Spent Balance\"}),n.jsx(Os,{id:\"balance\",name:\"balance\",value:x.balance,onChange:S=>v({...x,balance:parseFloat(S)||0}),placeholder:\"0.00\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]}),x.type===\"credit_card\"&&n.jsxs(\"div\",{className:\"space-y-6 animate-in slide-in-from-top-4 duration-500\",children:[n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"creditLimit\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Total Credit Limit\"}),n.jsx(Os,{id:\"creditLimit\",name:\"creditLimit\",value:x.creditLimit,onChange:S=>v({...x,creditLimit:parseFloat(S)||0}),placeholder:\"e.g. 100000\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]}),n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"safeLimit\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Safe Use Threshold (%)\"}),n.jsx(Os,{id:\"safeLimit\",name:\"safeLimitPercentage\",value:x.safeLimitPercentage,onChange:S=>v({...x,safeLimitPercentage:parseFloat(S)||30}),placeholder:\"30\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]})]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"serviceCharge\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Svc Charge (%)\"}),n.jsx(Os,{id:\"serviceCharge\",name:\"serviceChargePercentage\",value:x.serviceChargePercentage,onChange:S=>v({...x,serviceChargePercentage:parseFloat(S)||0}),placeholder:\"0.0\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",autoComplete:\"off\"})]}),n.jsxs(\"div\",{children:[n.jsx(Re,{htmlFor:\"statementDate\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Statement Date\"}),n.jsxs(ha,{value:x.statementDate.toString(),onValueChange:S=>v({...x,statementDate:parseInt(S)}),children:[n.jsx(ga,{id:\"statementDate\",name:\"statementDate\",className:\"bg-white/5 border-white/5 squircle-12 h-14 text-white\",children:n.jsx(pa,{})}),n.jsx(xa,{className:\"bg-slate-900 border-white/10 text-white\",children:[...Array(31)].map((S,se)=>n.jsx(vt,{value:(se+1).toString(),children:se+1},se+1))})]})]})]})]}),n.jsxs(\"div\",{children:[n.jsx(Re,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"System Icon\"}),n.jsx(\"div\",{className:\"grid grid-cols-6 sm:grid-cols-9 gap-2\",children:xu.map(S=>n.jsx(\"button\",{type:\"button\",onClick:()=>v({...x,icon:S.value}),className:`w-10 h-10 squircle-12 flex items-center justify-center text-lg border-2 transition-all ${x.icon===S.value?\"border-emerald-500 bg-emerald-500/10\":\"border-white/5 bg-white/5 hover:border-white/10\"}`,children:S.value},S.value))})]}),n.jsxs(\"div\",{children:[n.jsx(Re,{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 block\",children:\"Brand Color\"}),n.jsx(\"div\",{className:\"flex flex-wrap gap-3\",children:gu.map(S=>{const se={style:{\"--btn-color\":S}};return n.jsx(\"button\",{type:\"button\",onClick:()=>v({...x,color:S}),\"aria-label\":`Select color ${S}`,className:`w-8 h-8 rounded-full border-4 transition-all bg-[length:100%_100%] bg-[var(--btn-color)] ${x.color===S?\"border-white scale-110 shadow-lg shadow-white/20\":\"border-transparent hover:scale-105\"}`,...se},S)})})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Ge,{type:\"button\",variant:\"ghost\",onClick:()=>h(!1),className:\"flex-1 h-14 squircle-12 font-bold text-slate-500 hover:text-white\",children:\"Abort\"}),n.jsx(Ge,{type:\"submit\",className:\"flex-1 h-14 squircle-12 bg-emerald-600 hover:bg-emerald-500 text-white font-black shadow-lg shadow-emerald-600/20\",children:y?\"Update Account\":\"Ignite Account\"})]})]})]})})]});function P({account:S}){const se=S.type===\"credit_card\",he=se?(S.creditLimit||0)*(S.safeLimitPercentage||30)/100:0,ve=se&&S.creditLimit?Math.abs(S.balance)/S.creditLimit*100:0,fe=se&&ve<=(S.safeLimitPercentage||30);return n.jsxs(aa,{className:\"p-6 bg-slate-900/40 border-white/5 squircle-22 border hover:bg-slate-900/60 transition-all duration-300 group relative overflow-hidden\",children:[(()=>{const ye={style:{\"--card-glow\":S.color}};return n.jsx(\"div\",{className:\"absolute top-0 right-0 w-24 h-24 blur-3xl opacity-5 -mr-12 -mt-12 transition-opacity group-hover:opacity-20 bg-[var(--card-glow)]\",...ye})})(),n.jsxs(\"div\",{className:\"flex items-start justify-between mb-8 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[(()=>{const ye={style:{\"--icon-bg\":S.color+\"15\"}};return n.jsx(\"div\",{className:\"w-16 h-16 squircle-12 flex items-center justify-center text-3xl shadow-inner border border-white/5 group-hover:scale-105 transition-transform bg-[var(--icon-bg)]\",...ye,children:S.icon})})(),n.jsxs(\"div\",{className:\"min-w-0\",children:[n.jsx(\"h3\",{className:\"text-xl font-black text-slate-100 truncate\",children:S.name}),n.jsxs(\"div\",{className:\"flex items-center gap-1.5 mt-1\",children:[n.jsx(\"div\",{className:`w-1.5 h-1.5 rounded-full ${se?fe?\"bg-indigo-500\":\"bg-rose-500\":\"bg-emerald-500\"}`}),n.jsx(\"span\",{className:\"text-[10px] uppercase font-black tracking-widest text-slate-500\",children:se?\"Credit Pool\":\"Bank Account\"})]})]})]}),n.jsxs(\"div\",{className:\"flex gap-2\",children:[n.jsx(Ge,{variant:\"ghost\",title:\"Edit Account\",size:\"sm\",onClick:()=>M(S),className:\"w-8 h-8 p-0 squircle-12 hover:bg-white/5 text-slate-600 hover:text-white transition-all\",children:n.jsx(vy,{className:\"w-3.5 h-3.5\"})}),n.jsx(Ge,{variant:\"ghost\",title:\"Delete Account\",size:\"sm\",onClick:()=>R(S.id),className:\"w-8 h-8 p-0 squircle-12 hover:bg-rose-500/10 text-slate-600 hover:text-rose-400 transition-all\",children:n.jsx(Ai,{className:\"w-3.5 h-3.5\"})})]})]}),n.jsxs(\"div\",{className:\"pt-6 border-t border-white/5 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-end\",children:[n.jsxs(\"div\",{className:\"space-y-1\",children:[n.jsx(\"p\",{className:\"text-[10px] uppercase font-black tracking-widest text-slate-600\",children:se?\"Current Obligation\":\"Available Liquidity\"}),(()=>{const ye={style:{\"--balance-color\":S.color}};return n.jsx(\"h4\",{className:\"text-2xl font-black tabular-nums tracking-tight text-[var(--balance-color)]\",...ye,children:$e(S.balance,r)})})()]}),se&&S.creditLimit?n.jsxs(\"div\",{className:\"text-right\",children:[n.jsx(\"p\",{className:\"text-[9px] font-black text-slate-600 uppercase mb-1\",children:\"Limit Use\"}),n.jsxs(\"p\",{className:`text-xs font-black tabular-nums ${fe?\"text-indigo-400\":\"text-rose-400\"}`,children:[ve.toFixed(1),\"%\"]})]}):n.jsx(\"div\",{className:\"bg-white/5 px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest text-slate-500 border border-white/5\",children:\"Synced\"})]}),se&&S.creditLimit&&n.jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-white/5 flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"space-y-1\",children:[n.jsx(\"p\",{className:\"text-[8px] font-black text-slate-700 uppercase\",children:\"Safe Threshold\"}),n.jsx(\"p\",{className:\"text-[10px] font-black text-slate-500\",children:$e(he,r)})]}),S.serviceChargePercentage?n.jsxs(\"div\",{className:\"text-right space-y-1\",children:[n.jsx(\"p\",{className:\"text-[8px] font-black text-slate-700 uppercase\",children:\"Svc Charge\"}),n.jsxs(\"p\",{className:\"text-[10px] font-black text-slate-500\",children:[S.serviceChargePercentage,\"%\"]})]}):null,se&&S.statementDate&&n.jsxs(\"div\",{className:\"text-right space-y-1 ml-auto\",children:[n.jsx(\"p\",{className:\"text-[8px] font-black text-slate-700 uppercase\",children:\"Statement\"}),n.jsxs(\"p\",{className:\"text-[10px] font-black text-slate-500\",children:[\"Day \",S.statementDate]})]})]})]})]})}function V({message:S}){return n.jsx(\"div\",{className:\"py-12 text-center bg-slate-800/20 squircle-22 border border-dashed border-white/10 col-span-full\",children:n.jsx(\"p\",{className:\"text-sm text-slate-500 font-bold\",children:S})})}}function mN({isOpen:i,onClose:r,accounts:c,currency:u,onTransfer:m}){const[g,h]=A.useState(\"\"),[y,p]=A.useState(\"\"),[x,v]=A.useState(\"\"),[f,N]=A.useState(!1),M=c.find(V=>V.id===g),O=c.find(V=>V.id===y),B=parseFloat(x)||0,L=()=>{if(!g){J.error(\"Please select source reservoir\");return}if(!y){J.error(\"Please select destination reservoir\");return}if(g===y){J.error(\"Source and destination must be different\");return}if(!x||B<=0){J.error(\"Please enter a valid amount\");return}if(M&&B>M.balance){J.error(\"Insufficient funds in source reservoir\");return}N(!0)},R=()=>{m(g,y,B),P()},P=()=>{h(\"\"),p(\"\"),v(\"\"),N(!1),r()};return n.jsx(Bs,{open:i,onOpenChange:P,children:n.jsxs(Ls,{className:\"max-w-md max-h-[90vh] overflow-y-auto bg-[#020408] border-white/5 p-0 shadow-2xl custom-scrollbar text-white\",children:[n.jsxs(\"div\",{className:\"px-8 pt-10 pb-8 border-b border-white/5 relative overflow-hidden bg-indigo-500/5\",children:[n.jsx(\"div\",{className:\"absolute top-0 right-0 w-32 h-32 blur-[60px] opacity-20 -mr-16 -mt-16 bg-indigo-500\"}),n.jsxs(qs,{className:\"relative z-10\",children:[n.jsxs(Is,{className:\"text-2xl font-black tracking-tighter text-slate-100 flex items-center gap-3\",children:[n.jsx(Ru,{className:\"w-6 h-6 text-indigo-400\"}),\"Capital Migration\"]}),n.jsx(Vs,{className:\"text-slate-500 font-bold text-[10px] uppercase tracking-[0.2em] mt-1\",children:\"Transfer between core liquidity reservoirs\"})]})]}),n.jsx(\"div\",{className:\"p-8\",children:f?n.jsxs(\"div\",{className:\"space-y-6 animate-in fade-in zoom-in-95 duration-300\",children:[n.jsxs(\"div\",{className:\"p-6 bg-slate-900/50 border border-white/5 rounded-3xl space-y-6\",children:[n.jsxs(\"div\",{className:\"flex items-center justify-between gap-4\",children:[n.jsxs(\"div\",{className:\"flex-1 text-center space-y-2\",children:[n.jsx(\"div\",{className:\"w-12 h-12 rounded-2xl bg-slate-800 border border-white/10 flex items-center justify-center text-2xl mx-auto\",children:M?.icon}),n.jsx(\"p\",{className:\"text-[10px] font-black uppercase text-slate-500 truncate\",children:M?.name})]}),n.jsxs(\"div\",{className:\"flex flex-col items-center gap-1\",children:[n.jsx(Ru,{className:\"w-6 h-6 text-indigo-400 animate-pulse\"}),n.jsx(\"p\",{className:\"text-[10px] font-black text-indigo-400\",children:$e(B,u)})]}),n.jsxs(\"div\",{className:\"flex-1 text-center space-y-2\",children:[n.jsx(\"div\",{className:\"w-12 h-12 rounded-2xl bg-slate-800 border border-white/10 flex items-center justify-center text-2xl mx-auto\",children:O?.icon}),n.jsx(\"p\",{className:\"text-[10px] font-black uppercase text-slate-500 truncate\",children:O?.name})]})]}),n.jsxs(\"div\",{className:\"space-y-4 pt-4 border-t border-white/5\",children:[n.jsxs(\"div\",{className:\"flex justify-between items-center text-xs\",children:[n.jsx(\"span\",{className:\"text-slate-500 font-bold\",children:\"Source New Balance\"}),n.jsx(\"span\",{className:\"text-rose-400 font-black\",children:$e((M?.balance||0)-B,u)})]}),n.jsxs(\"div\",{className:\"flex justify-between items-center text-xs\",children:[n.jsx(\"span\",{className:\"text-slate-500 font-bold\",children:\"Dest. New Balance\"}),n.jsx(\"span\",{className:\"text-emerald-400 font-black\",children:$e((O?.balance||0)+B,u)})]})]})]}),n.jsxs(\"div\",{className:\"p-4 bg-amber-500/5 border border-amber-500/10 rounded-2xl flex gap-3\",children:[n.jsx(wy,{className:\"w-5 h-5 text-amber-500 flex-shrink-0\"}),n.jsx(\"p\",{className:\"text-[10px] text-amber-200/60 font-medium leading-relaxed\",children:\"Notice: This migration will instantly adjust the liquidity status of both reservoirs. This action is recorded in the central protocol.\"})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Ge,{variant:\"ghost\",onClick:()=>N(!1),className:\"flex-1 h-12 rounded-2xl text-slate-500 font-bold hover:bg-white/5\",children:\"Back\"}),n.jsx(Ge,{onClick:R,className:\"flex-1 h-12 rounded-2xl bg-indigo-600 hover:bg-indigo-500 text-white font-black shadow-lg shadow-indigo-600/20 transition-all active:scale-95\",children:\"Confirm Migration\"})]})]}):n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(Re,{htmlFor:\"source-reservoir\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Source Reservoir\"}),n.jsxs(ha,{value:g,onValueChange:h,children:[n.jsx(ga,{id:\"source-reservoir\",className:\"h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-200 font-bold\",children:n.jsx(pa,{placeholder:\"Select source\"})}),n.jsx(xa,{className:\"bg-slate-900 border-white/5 max-h-[40vh]\",children:c.map(V=>n.jsx(vt,{value:V.id,className:\"focus:bg-white/5 focus:text-white\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between w-full pr-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-xl\",children:V.icon}),n.jsx(\"span\",{children:V.name})]}),n.jsx(\"span\",{className:\"text-xs font-black text-slate-500\",children:$e(V.balance,u)})]})},V.id))})]})]}),n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(Re,{htmlFor:\"dest-reservoir\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Destination Reservoir\"}),n.jsxs(ha,{value:y,onValueChange:p,children:[n.jsx(ga,{id:\"dest-reservoir\",className:\"h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-200 font-bold\",children:n.jsx(pa,{placeholder:\"Select destination\"})}),n.jsx(xa,{className:\"bg-slate-900 border-white/5 max-h-[40vh]\",children:c.map(V=>n.jsx(vt,{value:V.id,className:\"focus:bg-white/5 focus:text-white\",disabled:V.id===g,children:n.jsxs(\"div\",{className:\"flex items-center justify-between w-full pr-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"span\",{className:\"text-xl\",children:V.icon}),n.jsx(\"span\",{children:V.name})]}),n.jsx(\"span\",{className:\"text-xs font-black text-slate-500\",children:$e(V.balance,u)})]})},V.id))})]})]}),n.jsxs(\"div\",{className:\"space-y-3\",children:[n.jsx(Re,{htmlFor:\"migration-amount\",className:\"text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1\",children:\"Capital Amount\"}),n.jsxs(\"div\",{className:\"relative group\",children:[n.jsx(\"div\",{className:\"absolute left-5 top-1/2 -translate-y-1/2 text-slate-500 font-bold group-focus-within:text-indigo-400 transition-colors\",children:u===\"INR\"?\"₹\":\"$\"}),n.jsx(Pt,{id:\"migration-amount\",name:\"amount\",type:\"number\",placeholder:\"0.00\",value:x,onChange:V=>v(V.target.value),className:\"pl-12 h-14 bg-slate-900 border-white/5 rounded-2xl focus:ring-1 focus:ring-indigo-500/50 text-slate-100 font-black text-xl\"})]}),M&&B>M.balance&&n.jsxs(\"div\",{className:\"flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-rose-400 ml-1 animate-in slide-in-from-top-1\",children:[n.jsx(zu,{className:\"w-3 h-3\"}),n.jsx(\"span\",{children:\"Insufficient stability in source reservoir\"})]})]}),n.jsxs(\"div\",{className:\"flex gap-4 pt-4\",children:[n.jsx(Ge,{variant:\"ghost\",onClick:P,className:\"flex-1 h-12 rounded-2xl text-slate-500 font-bold hover:bg-white/5\",children:\"Cancel\"}),n.jsx(Ge,{onClick:L,className:\"flex-1 h-12 rounded-2xl bg-indigo-600 hover:bg-indigo-500 text-white font-black shadow-lg shadow-indigo-600/20 transition-all active:scale-95\",children:\"Verify Migration\"})]})]})})]})})}function hN({onRefresh:i,children:r}){const c=A.useRef(0),[u,m]=A.useState(0),[g,h]=A.useState(!1),y=A.useRef(null),p=80,x=f=>{y.current&&y.current.scrollTop===0&&(c.current=f.touches[0].clientY)};A.useEffect(()=>{const f=M=>{if(c.current===0)return;const B=M.touches[0].clientY-c.current;if(B>0&&y.current&&y.current.scrollTop===0){M.cancelable&&M.preventDefault();const L=Math.min(B,p*1.5);L>=p&&u<p&&window.navigator.vibrate&&window.navigator.vibrate(10),m(L)}},N=y.current;return N&&N.addEventListener(\"touchmove\",f,{passive:!1}),()=>{N&&N.removeEventListener(\"touchmove\",f)}},[]);const v=async()=>{u>=p&&!g&&(h(!0),await i(),h(!1)),m(0),c.current=0};return n.jsxs(\"div\",{ref:y,className:\"relative overflow-y-auto\",onTouchStart:x,onTouchEnd:v,children:[n.jsx(Oe.div,{className:\"absolute top-0 left-0 right-0 flex justify-center items-center\",style:{height:u,opacity:u/p},animate:{y:g?0:-p},children:n.jsxs(\"div\",{className:\"flex flex-col items-center gap-2 py-4\",children:[n.jsx(Oe.div,{animate:{rotate:g?360:u/p*180},transition:{rotate:{duration:g?1:0,repeat:g?1/0:0,ease:\"linear\"}},children:n.jsx(Wr,{className:\"w-6 h-6 text-[#0A84FF]\"})}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-[0.2em] text-[#8E8E93]\",children:g?\"Synchronizing...\":u>=p?\"Relinquish to Sync\":\"Pull to Synchronize\"})]})}),n.jsx(Oe.div,{animate:{y:g?60:0},transition:{duration:.2},children:r})]})}function Rs({className:i,...r}){return n.jsx(\"div\",{\"data-slot\":\"skeleton\",className:ct(\"bg-accent animate-pulse rounded-md\",i),...r})}function pN(){return n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(aa,{className:\"p-4\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-3 mb-4\",children:[n.jsx(Rs,{className:\"w-12 h-12 rounded-lg\"}),n.jsxs(\"div\",{className:\"space-y-2 flex-1\",children:[n.jsx(Rs,{className:\"h-5 w-32\"}),n.jsx(Rs,{className:\"h-4 w-48\"})]})]}),n.jsx(\"div\",{className:\"grid grid-cols-3 gap-3\",children:[1,2,3].map(i=>n.jsx(\"div\",{className:\"space-y-2\",children:n.jsx(Rs,{className:\"h-20 w-full rounded-lg\"})},i))})]}),[1,2,3].map(i=>n.jsx(aa,{className:\"p-6\",children:n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(Rs,{className:\"h-6 w-48\"}),n.jsx(Rs,{className:\"h-4 w-full\"}),n.jsx(Rs,{className:\"h-4 w-3/4\"})]})},i))]})}function gN(i,r,c=30){let u=0;const m=h=>{u=h.touches[0].clientX},g=h=>{const p=h.touches[0].clientX-u;u<c&&p>30&&(h.cancelable&&h.preventDefault(),window.navigator.vibrate&&window.navigator.vibrate(20),i(),u=window.innerWidth),u>window.innerWidth-c&&p<-30&&(h.cancelable&&h.preventDefault(),window.navigator.vibrate&&window.navigator.vibrate(20),r(),u=0)};return document.addEventListener(\"touchstart\",m,{passive:!0}),document.addEventListener(\"touchmove\",g,{passive:!1}),()=>{document.removeEventListener(\"touchstart\",m),document.removeEventListener(\"touchmove\",g)}}const xN=({onOpenAI:i,onAddTransaction:r,onMigrate:c,isVisible:u})=>n.jsxs(\"div\",{id:\"fab-dock\",className:`fixed right-5 bottom-[110px] flex flex-col gap-3.5 z-[110] transition-all duration-500 ease-quantum ${u?\"translate-x-0 opacity-100\":\"translate-x-[100px] opacity-0\"}`,children:[n.jsx(\"div\",{onClick:i,title:\"AI Assistant\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-[#a855f74d] shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-[#A855F7] hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(bn,{className:\"w-5 h-5 group-hover:rotate-12 transition-transform\"})}),n.jsx(\"div\",{onClick:c,title:\"Migrate Capital\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-indigo-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-indigo-400 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(Ru,{className:\"w-5 h-5 group-hover:scale-110 transition-transform\"})}),n.jsx(\"div\",{onClick:()=>r(\"debt\"),title:\"Added Personal IOU\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-yellow-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-yellow-500 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(tp,{className:\"w-5 h-5 group-hover:-translate-y-0.5 transition-transform\"})}),n.jsx(\"div\",{onClick:()=>r(\"income\"),title:\"Add Money In\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-emerald-500/40 shadow-[0_0_20px_rgba(16,185,129,0.1)] cursor-pointer text-emerald-500 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(Nl,{className:\"w-5 h-5 group-hover:rotate-90 transition-transform\"})}),n.jsx(\"div\",{onClick:()=>r(\"expense\"),title:\"Add Money Out\",className:\"w-[52px] h-[52px] sq-md flex items-center justify-center bg-black border border-rose-500/20 shadow-[0_10px_30px_rgba(0,0,0,0.6)] cursor-pointer text-rose-500 hover:scale-110 active:scale-95 transition-all duration-300 group\",children:n.jsx(jy,{className:\"w-5 h-5 group-hover:scale-110 transition-transform\"})})]}),bN=({isOpen:i,onClose:r,context:c,settings:u,isOffline:m=!1})=>{const[g,h]=A.useState(\"\"),[y,p]=A.useState([{text:\"Hello! I've analyzed your cash flow. How can I assist with your goals?\",type:\"ai\"}]),[x,v]=A.useState(!1),f=A.useRef(null);A.useEffect(()=>{f.current&&f.current.scrollIntoView({behavior:\"smooth\"})},[y]);const N=async()=>{if(!g.trim()||x)return;const M=g.trim();h(\"\"),p(O=>[...O,{text:M,type:\"user\"}]),v(!0);try{if(m){setTimeout(()=>{p(B=>[...B,{text:\"FinHub is currently in 'Cached View' (Offline). I've analyzed your local financial fabric: your liquidity nodes are stable, but synchronizing with global AI intelligence requires a stable link. How can I help you optimize your local state?\",type:\"ai\"}]),v(!1)},1e3);return}const O=await eN({userPrompt:M,context:c,settings:u,persona:\"ANALYST\"});O.error?p(B=>[...B,{text:O.error,type:\"ai\"}]):p(B=>[...B,{text:O.text||\"Analyzing financial pattern...\",type:\"ai\"}])}catch{p(B=>[...B,{text:\"Connection error. FinHub has transitioned to local 'Cached View'.\",type:\"ai\"}])}finally{m||v(!1)}};return i?n.jsxs(\"div\",{id:\"ai-chat-overlay\",className:\"fixed inset-0 bg-[#020408] z-[200] flex flex-col p-6 animate-in fade-in zoom-in-95 duration-300\",children:[n.jsx(\"div\",{className:\"absolute inset-0 bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-indigo-500/10 via-transparent to-transparent opacity-50\"}),n.jsxs(\"div\",{className:\"flex justify-between items-center mb-10 relative z-10\",children:[n.jsxs(\"div\",{className:\"flex items-center gap-4\",children:[n.jsx(\"div\",{className:\"w-12 h-12 bg-indigo-500/10 rounded-2xl flex items-center justify-center border border-indigo-500/20\",children:n.jsx(bn,{className:\"text-indigo-400 w-6 h-6\"})}),n.jsxs(\"div\",{children:[n.jsx(\"h2\",{className:\"font-black text-2xl text-white tracking-tight leading-none\",children:\"AI Analyst\"}),n.jsxs(\"div\",{className:\"flex items-center gap-2 mt-1\",children:[n.jsx(\"p\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500\",children:\"Neural Core Context\"}),m&&n.jsx(\"span\",{className:\"text-[8px] bg-amber-500/10 text-amber-500 px-1.5 py-0.5 rounded border border-amber-500/20 font-black tracking-tighter uppercase\",children:\"Cached View\"})]})]})]}),n.jsx(\"button\",{onClick:r,\"aria-label\":\"Close Chat\",className:\"bg-white/5 w-12 h-12 rounded-full flex items-center justify-center hover:bg-white/10 hover:text-white text-slate-400 transition-all active:scale-95\",children:n.jsx(Tl,{className:\"w-6 h-6\"})})]}),n.jsxs(\"div\",{id:\"chat-messages\",className:\"flex-1 overflow-y-auto space-y-4 pr-2 custom-scrollbar\",children:[y.map((M,O)=>n.jsxs(\"div\",{className:ct(\"p-4 rounded-[24px] text-sm leading-relaxed\",M.type===\"ai\"?\"bg-slate-900 border border-white/5 text-slate-200 self-start max-w-[85%]\":\"bg-indigo-600 text-white font-medium shadow-lg shadow-indigo-600/20 self-end max-w-[85%]\"),children:[M.type===\"ai\"&&n.jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[n.jsx(bn,{className:\"w-3 h-3 text-indigo-400 font-black\"}),n.jsx(\"span\",{className:\"text-[10px] font-black uppercase tracking-widest text-slate-500\",children:\"Guru Analysis\"})]}),M.text]},O)),x&&n.jsx(\"div\",{className:\"p-4 bg-slate-900 border border-white/5 rounded-[24px] self-start animate-pulse\",children:n.jsxs(\"div\",{className:\"flex items-center gap-3\",children:[n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:0ms]\"}),n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:150ms]\"}),n.jsx(\"div\",{className:\"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce [animation-delay:300ms]\"})]})}),n.jsx(\"div\",{ref:f})]}),n.jsxs(\"div\",{className:\"mt-8 flex gap-3 p-2 bg-slate-900/40 rounded-[28px] border border-white/5 relative z-10\",children:[n.jsx(\"input\",{type:\"text\",value:g,onChange:M=>h(M.target.value),onKeyDown:M=>M.key===\"Enter\"&&N(),placeholder:\"Ask the analyst...\",className:\"flex-1 bg-transparent border-none px-6 py-4 text-white focus:outline-none placeholder:text-slate-600 font-bold\"}),n.jsx(\"button\",{onClick:N,disabled:x||!g.trim(),\"aria-label\":\"Send Message\",className:\"w-14 h-14 bg-indigo-600 rounded-[22px] flex items-center justify-center shadow-lg shadow-indigo-900/30 hover:bg-indigo-500 transition-all active:scale-90 disabled:opacity-50 disabled:cursor-not-allowed group\",children:n.jsx(Ny,{className:\"w-6 h-6 text-white group-hover:-translate-y-1 transition-transform\"})})]}),n.jsx(\"p\",{className:\"text-[9px] font-bold text-slate-600 text-center uppercase tracking-widest mt-4\",children:\"Encryption Verified // Neural Fabric Link Stable\"})]}):null};class yN extends A.Component{state={hasError:!1};static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,c){console.error(\"Uncaught error:\",r,c)}render(){return this.state.hasError?n.jsx(\"div\",{className:\"min-h-[400px] flex items-center justify-center p-6\",children:n.jsxs(aa,{className:\"max-w-md w-full p-8 bg-slate-900 border-white/10 text-center space-y-6 rounded-[32px]\",children:[n.jsx(\"div\",{className:\"w-16 h-16 bg-rose-500/10 rounded-full flex items-center justify-center mx-auto\",children:n.jsx(Jr,{className:\"w-8 h-8 text-rose-500\"})}),n.jsxs(\"div\",{className:\"space-y-2\",children:[n.jsx(\"h2\",{className:\"text-xl font-black text-white uppercase tracking-tight\",children:\"System Glitch Detected\"}),n.jsx(\"p\",{className:\"text-sm text-slate-400 font-medium\",children:\"The neural link to this component was interrupted. This usually happens during background updates.\"})]}),this.state.error&&n.jsx(\"pre\",{className:\"text-[10px] bg-black/40 p-3 rounded-xl text-rose-400/80 overflow-x-auto text-left font-mono\",children:this.state.error.message}),n.jsxs(Ge,{onClick:()=>window.location.reload(),className:\"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-black py-6 rounded-2xl gap-2 h-auto\",children:[n.jsx(Wr,{className:\"w-4 h-4\"}),\"Re-establish Connection\"]})]})}):this.props.children}}const vN=()=>{const{checkIdentity:i,login:r,signup:c,sendOtp:u,verifyOtp:m,resetPin:g,isRememberedUser:h,rememberedMobile:y,pendingMobile:p,clearPendingSession:x}=Di(),[v,f]=A.useState(\"identity\"),[N,M]=A.useState(\"\"),[O,B]=A.useState(\"\"),[L,R]=A.useState(\"\"),[P,V]=A.useState(\"\"),[S,se]=A.useState(\"\"),[he,ve]=A.useState(\"\"),[fe,ye]=A.useState(!1),[Se,qe]=A.useState(!1),[Te,ee]=A.useState(!1),[me,G]=A.useState(!1),C=A.useRef(null);A.useEffect(()=>{h&&y?(M(y),f(\"verify\"),Y()):p&&(M(p),f(\"verify\"))},[h,y,p]);const Y=async()=>{G(!0),setTimeout(async()=>{Math.random()>.2?await r(\"2255\",!0)||G(!1):(G(!1),navigator.vibrate&&navigator.vibrate([50,50]))},1500)};A.useEffect(()=>{v===\"identity\"&&N.length===10&&oe()},[N,v]),A.useEffect(()=>{v===\"verify\"&&O.length===4&&re()},[O,v]),A.useEffect(()=>{C.current&&(C.current.focus(),C.current.type!==\"hidden\"&&C.current.select())},[v]);const oe=async()=>{if(N.length!==10)return;const xe=await i(N);f(xe?\"verify\":\"create_name\"),B(\"\")},ge=async()=>{await u(N)&&f(\"otp_reset\")},z=async()=>{if(L.trim().length<2)return;await u(N)&&f(\"otp_verify\")},T=async()=>{await m(N,P)?f(v===\"otp_verify\"?\"create_pin\":\"reset_pin\"):$()},re=async()=>{v===\"verify\"?await r(O,Se)?(navigator.vibrate&&navigator.vibrate([10]),!Se&&!h&&ee(!0)):$():v===\"create_pin\"?O.length===4&&(await c(N,O,L,Se)||$()):v===\"reset_pin\"&&(S===he&&S.length===4&&await g(N,S)?(f(\"verify\"),B(\"\"),se(\"\"),ve(\"\")):$())},$=()=>{ye(!0),navigator.vibrate&&navigator.vibrate([50,30,50]),setTimeout(()=>ye(!1),500),V(\"\"),B(\"\"),ve(\"\")},le=()=>v===\"identity\"?N.length!==10:v===\"verify\"?O.length!==4:v===\"otp_verify\"||v===\"otp_reset\"?P.length!==4:v===\"create_name\"?L.trim().length<2:v===\"create_pin\"?O.length!==4:v===\"reset_pin\"?S.length!==4||he.length!==4:!1,ue=()=>{x(),f(\"identity\"),M(\"\"),B(\"\")},Ne=xe=>{xe.key===\"Enter\"&&!le()&&je()()},je=()=>{switch(v){case\"identity\":return oe;case\"otp_verify\":case\"otp_reset\":return T;case\"create_name\":return z;case\"verify\":case\"create_pin\":case\"reset_pin\":return re;default:return()=>{}}},de=()=>{switch(v){case\"identity\":return\"Continue\";case\"otp_verify\":case\"otp_reset\":return\"Verify OTP\";case\"create_name\":return\"Next\";case\"verify\":return\"Login\";case\"create_pin\":return\"Create Account\";case\"reset_pin\":return\"Reset PIN\";default:return\"Continue\"}};return n.jsxs(\"div\",{className:\"fixed inset-0 flex flex-col items-center justify-center overflow-hidden font-sans auth-mesh-gradient z-[9999999]\",children:[n.jsx(\"div\",{className:\"absolute inset-0 z-0 bg-[url('/mesh-grid.svg')] opacity-20\"}),n.jsxs(Oe.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},className:\"absolute top-12 z-10 flex flex-col items-center gap-2\",children:[n.jsx(\"img\",{src:\"/images/logo-dark.png\",alt:\"FinHub\",className:\"h-12 w-auto\"}),n.jsx(\"span\",{className:\"text-xs font-medium text-white/40 tracking-widest uppercase\",children:\"v0.1 Beta\"})]}),n.jsxs(\"div\",{className:\"z-10 w-full max-w-sm px-8\",children:[n.jsxs(Bn,{mode:\"wait\",children:[v===\"identity\"&&n.jsxs(Oe.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},exit:{x:-20,opacity:0},className:\"flex flex-col gap-6\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Welcome\"}),n.jsx(\"p\",{className:\"text-white/50 text-sm mt-2\",children:\"Enter your mobile number to continue\"})]}),n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-sky-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"Mobile Number\"}),n.jsx(\"input\",{ref:C,type:\"text\",inputMode:\"numeric\",maxLength:10,value:N,onChange:xe=>M(xe.target.value.replace(/\\D/g,\"\")),onKeyDown:Ne,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"999 999 9999\"})]}),n.jsxs(\"div\",{onClick:()=>{qe(!Se),navigator.vibrate&&navigator.vibrate(5)},className:\"flex items-center gap-3 cursor-pointer self-center\",children:[n.jsx(\"div\",{className:`h-5 w-5 rounded-md border transition-all flex items-center justify-center ${Se?\"bg-sky-500 border-sky-500\":\"border-white/20 bg-white/5\"}`,children:Se&&n.jsx(Sl,{className:\"h-3.5 w-3.5 text-white\"})}),n.jsx(\"span\",{className:\"text-sm text-white/60 font-medium\",children:\"Remember me for 30 days\"})]})]},\"identity\"),v===\"create_name\"&&n.jsxs(Oe.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},exit:{x:-20,opacity:0},className:\"flex flex-col gap-6\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Who are you?\"}),n.jsx(\"p\",{className:\"text-white/50 text-sm mt-2\",children:\"Personalize your node experience\"})]}),n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-sky-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"Full Name\"}),n.jsx(\"input\",{ref:C,type:\"text\",value:L,onChange:xe=>R(xe.target.value),onKeyDown:Ne,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"Joe Doe\"})]})]},\"create_name\"),(v===\"otp_verify\"||v===\"otp_reset\")&&n.jsxs(Oe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,x:fe?[0,-10,10,-10,10,0]:0},exit:{scale:1.1,opacity:0},className:\"relative flex flex-col gap-8 items-center\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"div\",{className:\"mb-4 flex justify-center\",children:n.jsx(\"div\",{className:\"p-4 rounded-full bg-white/5 ring-1 ring-white/10\",children:n.jsx(Sy,{className:\"h-8 w-8 text-sky-400\"})})}),n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Verify Node\"}),n.jsxs(\"p\",{className:\"text-white/40 text-sm mt-2\",children:[\"Enter the 4-digit code sent to\",n.jsx(\"br\",{}),n.jsx(\"span\",{className:\"text-white/70\",children:N})]})]}),n.jsxs(\"div\",{className:\"group relative flex flex-col items-center justify-center rounded-[32px] bg-white/5 p-10 ring-1 ring-white/10 backdrop-blur-md\",children:[n.jsx(\"div\",{className:\"flex gap-5\",children:[0,1,2,3].map(xe=>n.jsx(Oe.div,{animate:{scale:xe<P.length?1.2:1,backgroundColor:xe<P.length?\"#fff\":\"rgba(255,255,255,0.1)\"},transition:{duration:.1},className:\"h-3.5 w-3.5 rounded-full\"},xe))}),n.jsx(\"input\",{ref:C,type:\"password\",inputMode:\"numeric\",maxLength:4,value:P,onChange:xe=>V(xe.target.value.replace(/\\D/g,\"\")),onKeyDown:Ne,className:\"absolute inset-0 opacity-0 cursor-default\",\"aria-label\":\"One-time Password\",placeholder:\"OTP\"})]})]},\"otp\"),v===\"reset_pin\"&&n.jsxs(Oe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,x:fe?[0,-10,10,-10,10,0]:0},exit:{scale:1.1,opacity:0},className:\"relative flex flex-col gap-8 items-center\",children:[n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(\"div\",{className:\"mb-4 flex justify-center\",children:n.jsx(\"div\",{className:\"p-4 rounded-full bg-white/5 ring-1 ring-white/10\",children:n.jsx(Ay,{className:\"h-8 w-8 text-amber-400\"})})}),n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Reset PIN\"}),n.jsx(\"p\",{className:\"text-white/40 text-sm mt-2\",children:\"Choose a new secure 4-digit access code\"})]}),n.jsxs(\"div\",{className:\"space-y-4 w-full\",children:[n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-amber-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"New PIN\"}),n.jsx(\"input\",{type:\"password\",inputMode:\"numeric\",maxLength:4,value:S,onChange:xe=>se(xe.target.value.replace(/\\D/g,\"\")),onKeyDown:Ne,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"****\"})]}),n.jsxs(\"div\",{className:\"group relative rounded-2xl bg-[#1C1C1E] p-4 ring-1 ring-white/10 transition-all focus-within:ring-amber-500/50\",children:[n.jsx(\"label\",{className:\"text-xs font-medium uppercase tracking-wider text-white/40\",children:\"Confirm PIN\"}),n.jsx(\"input\",{type:\"password\",inputMode:\"numeric\",maxLength:4,value:he,onChange:xe=>ve(xe.target.value.replace(/\\D/g,\"\")),onKeyDown:Ne,className:\"mt-1 w-full bg-transparent text-xl font-medium text-white placeholder-white/20 outline-none\",placeholder:\"****\"})]})]})]},\"reset_pin\"),(v===\"verify\"||v===\"create_pin\")&&n.jsxs(Oe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,x:fe?[0,-10,10,-10,10,0]:0},exit:{scale:1.1,opacity:0},className:\"relative flex flex-col gap-8 items-center\",children:[n.jsx(Oe.div,{initial:{opacity:0},animate:{opacity:1},className:\"fixed inset-0 z-[-1] bg-black/80 backdrop-blur-xl\"}),n.jsxs(\"div\",{className:\"text-center\",children:[n.jsx(Oe.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:\"mb-4 flex justify-center\",children:n.jsx(\"div\",{className:\"p-4 rounded-full bg-white/5 ring-1 ring-white/10\",children:n.jsx(Ti,{className:\"h-8 w-8 text-sky-400\"})})}),n.jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:v===\"verify\"?\"Private Access\":\"Secure Setup\"}),n.jsx(\"p\",{className:\"text-white/40 text-sm mt-2\",children:v===\"verify\"?\"Encrypted PIN required\":\"Create your master PIN\"})]}),n.jsxs(\"div\",{className:\"group relative flex flex-col items-center justify-center rounded-[32px] bg-white/5 p-10 ring-1 ring-white/10 backdrop-blur-md\",children:[n.jsx(\"div\",{className:\"flex gap-5\",children:[0,1,2,3].map(xe=>n.jsx(Oe.div,{animate:{scale:xe<O.length?1.2:1,backgroundColor:xe<O.length?\"#fff\":\"rgba(255,255,255,0.1)\"},transition:{duration:.1},className:\"h-3.5 w-3.5 rounded-full\"},xe))}),n.jsx(\"input\",{ref:C,type:\"password\",inputMode:\"numeric\",maxLength:4,value:O,onChange:xe=>B(xe.target.value.replace(/\\D/g,\"\")),onKeyDown:Ne,className:\"absolute inset-0 opacity-0 cursor-default\",\"aria-label\":\"Access PIN\",placeholder:\"PIN\"})]}),v===\"verify\"&&n.jsxs(\"div\",{className:\"flex flex-col items-center gap-4\",children:[n.jsxs(\"button\",{onClick:Y,className:\"flex items-center gap-2 text-sky-400 text-sm font-medium\",children:[n.jsx(_s,{className:\"h-5 w-5\"}),\" Use Biometrics\"]}),n.jsx(\"button\",{onClick:ge,className:\"text-white/30 text-xs hover:text-white/50 transition-colors\",children:\"Forgot PIN? Reset via SMS\"}),n.jsx(\"button\",{onClick:ue,className:\"text-sky-500/50 text-[10px] font-bold uppercase tracking-widest hover:text-sky-400/80 transition-colors mt-2\",children:\"Login with another account\"})]})]},\"pin\")]}),n.jsxs(Oe.button,{onClick:je(),disabled:le(),className:`mt-8 flex w-full items-center justify-center gap-2 rounded-[22px] py-4 text-base font-semibold text-white shadow-lg transition-all ${le()?\"cursor-not-allowed bg-[#3A3A3C] opacity-50\":\"bg-gradient-to-r from-[#0A84FF] to-[#0047AB] shadow-sky-500/20 active:scale-95\"}`,whileTap:{scale:.98},children:[de(),!le()&&n.jsx(ap,{className:\"h-4 w-4\"})]})]}),n.jsx(Bn,{children:Te&&n.jsx(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"fixed inset-0 z-[60] flex items-end justify-center bg-black/60 p-6 backdrop-blur-sm\",children:n.jsxs(Oe.div,{initial:{y:100},animate:{y:0},exit:{y:100},className:\"w-full max-w-sm rounded-[32px] bg-[#1C1C1E] p-8 text-center ring-1 ring-white/10 shadow-2xl\",children:[n.jsx(\"div\",{className:\"mx-auto mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-sky-500/20 text-sky-400\",children:n.jsx(Sl,{className:\"h-8 w-8\"})}),n.jsx(\"h3\",{className:\"text-xl font-bold text-white\",children:\"Speed up your next login?\"}),n.jsx(\"p\",{className:\"mt-2 text-sm text-white/50\",children:\"We can securely remember your ID so you can skip the mobile entry next time.\"}),n.jsxs(\"div\",{className:\"mt-8 flex flex-col gap-3\",children:[n.jsx(\"button\",{onClick:()=>{localStorage.setItem(\"finhub_remembered_mobile\",N),ee(!1)},className:\"w-full rounded-2xl bg-sky-500 py-4 font-semibold text-white active:scale-95 transition-all\",children:\"Enable Smart Login\"}),n.jsx(\"button\",{onClick:()=>ee(!1),className:\"w-full py-2 text-sm font-medium text-white/30 active:text-white/50\",children:\"Maybe later\"})]})]})})}),n.jsx(Bn,{children:me&&n.jsx(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"fixed inset-0 z-[70] flex flex-col items-center justify-center bg-black/40 backdrop-blur-md\",children:n.jsxs(Oe.div,{initial:{scale:.8},animate:{scale:1},className:\"flex flex-col items-center\",children:[n.jsxs(\"div\",{className:\"relative mb-6\",children:[n.jsx(Oe.div,{animate:{scale:[1,1.2,1],opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0},className:\"absolute inset-0 rounded-full bg-sky-500/30 blur-2xl\"}),n.jsx(\"div\",{className:\"relative flex h-24 w-24 items-center justify-center rounded-full bg-white/5 ring-1 ring-white/20\",children:n.jsx(_s,{className:\"h-12 w-12 text-sky-400\"})})]}),n.jsx(\"h3\",{className:\"text-lg font-medium text-white\",children:\"Scanning Biometrics\"}),n.jsx(\"p\",{className:\"mt-2 text-sm text-white/40 italic\",children:\"Verifying your node identity...\"}),n.jsx(\"button\",{onClick:()=>G(!1),className:\"mt-12 text-xs font-medium uppercase tracking-widest text-white/20 hover:text-white/40\",children:\"Cancel & use PIN\"})]})})}),n.jsx(\"div\",{className:\"absolute bottom-8 text-center text-[10px] text-white/20\",children:n.jsx(\"p\",{children:\"Protected by FinHub Node Protocols. Data is localized and encrypted.\"})})]})},H0=({message:i=\"Secure Node Handshake\",subMessage:r=\"Re-encrypting local session...\"})=>n.jsxs(\"div\",{className:\"fixed inset-0 z-[100] flex flex-col items-center justify-center bg-[#000000] overflow-hidden\",children:[n.jsx(Oe.div,{animate:{opacity:[.1,.2,.1],scale:[1,1.1,1]},transition:{duration:4,repeat:1/0,ease:\"easeInOut\"},className:\"absolute h-[500px] w-[500px] rounded-full bg-sky-500/10 blur-[120px]\"}),n.jsxs(\"div\",{className:\"relative flex flex-col items-center justify-center gap-12\",children:[n.jsxs(\"div\",{className:\"relative flex items-center justify-center\",children:[[0,1,2].map(c=>n.jsx(Oe.div,{className:\"absolute rounded-full border border-sky-400/20\",initial:{width:80,height:80,opacity:0},animate:{width:[80,250],height:[80,250],opacity:[.4,0]},transition:{duration:3,repeat:1/0,delay:c*1,ease:\"easeOut\"}},c)),n.jsx(Oe.div,{animate:{y:[0,-10,0]},transition:{duration:4,repeat:1/0,ease:\"easeInOut\"},className:\"relative z-10\",children:n.jsx(Oe.div,{animate:{scale:[1,1.1,1],filter:[\"drop-shadow(0 0 15px rgba(56,189,248,0.3))\",\"drop-shadow(0 0 30px rgba(56,189,248,0.6))\",\"drop-shadow(0 0 15px rgba(56,189,248,0.3))\"]},transition:{duration:3,repeat:1/0,ease:\"easeInOut\"},className:\"relative flex h-32 w-32 items-center justify-center rounded-[32px] bg-gradient-to-br from-[#1C1C1E] to-[#000000] ring-1 ring-white/10 shadow-2xl backdrop-blur-xl\",children:n.jsx(\"img\",{src:\"/images/logo-icon.png\",alt:\"FinHub\",className:\"h-20 w-20 object-contain drop-shadow-lg\"})})})]}),n.jsx(Oe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:\"flex flex-col items-center gap-2\",children:n.jsxs(\"div\",{className:\"flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/5 ring-1 ring-white/5 backdrop-blur-md\",children:[n.jsx(Ti,{className:\"h-3 w-3 text-sky-400\"}),n.jsx(\"span\",{className:\"text-[10px] font-bold tracking-[0.2em] uppercase text-white/40\",children:i})]})})]}),n.jsxs(\"div\",{className:\"absolute bottom-16 w-full max-w-[200px] px-6\",children:[n.jsx(\"div\",{className:\"h-[2px] w-full overflow-hidden rounded-full bg-white/10\",children:n.jsx(Oe.div,{initial:{x:\"-100%\"},animate:{x:\"100%\"},transition:{duration:1.5,repeat:1/0,ease:\"easeInOut\"},className:\"h-full w-1/3 bg-gradient-to-r from-transparent via-sky-400 to-transparent\"})}),n.jsx(\"div\",{className:\"mt-3 text-center\",children:n.jsx(\"span\",{className:\"text-[10px] font-medium text-white/20 italic tracking-wider\",children:r})})]})]}),wN=({isOpen:i,onClose:r})=>n.jsx(Bn,{children:i&&n.jsxs(n.Fragment,{children:[n.jsx(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,className:\"fixed inset-0 z-[200] bg-black/60 backdrop-blur-sm\"}),n.jsx(\"div\",{className:\"fixed inset-0 z-[201] flex items-center justify-center p-4 pointer-events-none\",children:n.jsxs(Oe.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:\"spring\",damping:25,stiffness:300},className:\"w-full max-w-md bg-slate-900 border border-white/5 rounded-[32px] shadow-2xl overflow-hidden pointer-events-auto relative\",children:[n.jsx(\"div\",{className:\"absolute top-0 inset-x-0 h-32 bg-gradient-to-b from-indigo-500/10 to-transparent pointer-events-none\"}),n.jsx(\"button\",{onClick:r,className:\"absolute top-6 right-6 p-2 rounded-full bg-white/5 text-slate-400 hover:text-white hover:bg-white/10 transition-colors z-10\",\"aria-label\":\"Close about us popup\",children:n.jsx(Tl,{className:\"w-5 h-5\"})}),n.jsxs(\"div\",{className:\"p-8 pt-12 space-y-8 relative\",children:[n.jsxs(\"div\",{className:\"flex flex-col items-center text-center gap-3\",children:[n.jsx(\"div\",{className:\"w-16 h-16 rounded-[22px] bg-indigo-600 flex items-center justify-center shadow-lg shadow-indigo-500/20\",children:n.jsx(Dy,{className:\"w-8 h-8 text-white\"})}),n.jsxs(\"div\",{children:[n.jsx(\"h2\",{className:\"text-2xl font-black text-white tracking-tight uppercase\",children:\"FinHub Core\"}),n.jsx(\"p\",{className:\"text-[10px] font-bold text-indigo-400 uppercase tracking-[0.3em]\",children:\"Quantum Fabric v50.3\"})]})]}),n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsxs(\"section\",{className:\"space-y-2\",children:[n.jsxs(\"h3\",{className:\"text-[10px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2\",children:[n.jsx(_s,{className:\"w-3.5 h-3.5\"}),\"Our Vision\"]}),n.jsx(\"p\",{className:\"text-sm text-slate-300 leading-relaxed font-medium\",children:\"FinHub is designed to be the central nervous system of your personal economy. We merge neural-inspired data models with high-precision tracking to navigate complex wealth landscapes.\"})]}),n.jsxs(\"section\",{className:\"space-y-2\",children:[n.jsxs(\"h3\",{className:\"text-[10px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2\",children:[n.jsx(Ti,{className:\"w-3.5 h-3.5\"}),\"Core Protocol\"]}),n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[n.jsxs(\"div\",{className:\"bg-white/5 p-3 rounded-2xl border border-white/5\",children:[n.jsx(\"span\",{className:\"block text-[8px] font-black text-indigo-400 uppercase mb-1\",children:\"Localization\"}),n.jsx(\"span\",{className:\"text-[10px] text-slate-400 leading-tight\",children:\"Sovereign identity via node storage.\"})]}),n.jsxs(\"div\",{className:\"bg-white/5 p-3 rounded-2xl border border-white/5\",children:[n.jsx(\"span\",{className:\"block text-[8px] font-black text-indigo-400 uppercase mb-1\",children:\"Clamping Logic\"}),n.jsx(\"span\",{className:\"text-[10px] text-slate-400 leading-tight\",children:\"Mathematical stability in all simulations.\"})]})]})]}),n.jsxs(\"div\",{className:\"pt-6 border-t border-white/5 flex flex-col items-center gap-2\",children:[n.jsx(\"p\",{className:\"text-[8px] font-bold text-slate-600 uppercase tracking-widest\",children:\"Architect: Sijo Joseph\"}),n.jsx(\"p\",{className:\"text-[10px] font-black text-slate-800 uppercase tracking-[0.2em]\",children:\"© 2025 Neural FinHub Fabric\"})]})]})]})]})})]})}),jN=()=>{const{settings:i,updateSettings:r,createGoal:c,createLiability:u}=Di(),[m,g]=A.useState(1),[h,y]=A.useState(\"intro\"),[p,x]=A.useState(!1),[v,f]=A.useState([]),[N,M]=A.useState({name:\"\",amount:\"\",interest:\"\"}),[O,B]=A.useState(i.passiveIncomeTarget?.toString()||\"\"),L=async ye=>{await r({isSampleMode:ye})},R=async ye=>{x(!0),ye||(await c({name:\"Health Insurance\",targetAmount:5e5,currentAmount:0,targetDate:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString(),emoji:\"🏥\",type:\"protection\",status:\"active\",createdAt:new Date().toISOString()}),await c({name:\"Term Insurance\",targetAmount:1e7,currentAmount:0,targetDate:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString(),emoji:\"🛡️\",type:\"protection\",status:\"active\",createdAt:new Date().toISOString()})),y(\"completion\"),x(!1)},P=()=>{g(2),y(\"intro\")},V=()=>{N.name&&N.amount&&N.interest&&(f([...v,N]),M({name:\"\",amount:\"\",interest:\"\"}))},S=ye=>{f(v.filter((Se,qe)=>qe!==ye))},se=async()=>{x(!0);for(const ye of v){const Se=parseFloat(ye.interest);await u({name:ye.name,type:\"other\",principal:parseFloat(ye.amount),outstanding:parseFloat(ye.amount),interestRate:Se,emiAmount:0,startDate:new Date().toISOString(),tenure:12,penalty_applied:Se>10})}y(\"completion\"),x(!1)},he=()=>{g(3),y(\"intro\")},ve=async()=>{x(!0),await r({passiveIncomeTarget:parseFloat(O)||0}),y(\"completion\"),x(!1)},fe=async()=>{await r({onboardingPhase:3})};return n.jsxs(\"div\",{className:\"fixed inset-0 z-[300] flex items-center justify-center p-6 bg-black overflow-hidden\",children:[n.jsxs(\"div\",{className:\"absolute inset-0 overflow-hidden pointer-events-none transition-colors duration-1000\",children:[n.jsxs(Bn,{children:[m===1&&n.jsxs(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"absolute inset-0\",children:[n.jsx(\"div\",{className:\"absolute -top-[20%] -left-[10%] w-[60%] h-[60%] bg-teal-500/20 blur-[120px] rounded-full animate-pulse\"}),n.jsx(\"div\",{className:\"absolute -bottom-[20%] -right-[10%] w-[60%] h-[60%] bg-emerald-500/10 blur-[120px] rounded-full animate-pulse\"})]},\"teal-bg\"),m===2&&n.jsxs(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"absolute inset-0\",children:[n.jsx(\"div\",{className:\"absolute -top-[20%] -left-[10%] w-[60%] h-[60%] bg-orange-500/20 blur-[120px] rounded-full animate-pulse\"}),n.jsx(\"div\",{className:\"absolute -bottom-[20%] -right-[10%] w-[60%] h-[60%] bg-rose-500/10 blur-[120px] rounded-full animate-pulse\"})]},\"orange-bg\"),m===3&&n.jsxs(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"absolute inset-0\",children:[n.jsx(\"div\",{className:\"absolute -top-[20%] -left-[10%] w-[60%] h-[60%] bg-purple-500/20 blur-[120px] rounded-full animate-pulse\"}),n.jsx(\"div\",{className:\"absolute -bottom-[20%] -right-[10%] w-[60%] h-[60%] bg-amber-500/10 blur-[120px] rounded-full animate-pulse\"})]},\"purple-bg\")]}),n.jsx(\"div\",{className:\"absolute top-[30%] left-[20%] w-[40%] h-[40%] bg-white/5 blur-[100px] rounded-full\"})]}),n.jsxs(Bn,{mode:\"wait\",children:[m===1&&h===\"intro\"&&n.jsxs(Oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:\"max-w-md w-full text-center space-y-8 relative z-10\",children:[n.jsx(\"div\",{className:\"w-20 h-20 bg-teal-500/10 border border-teal-500/20 rounded-[28px] flex items-center justify-center mx-auto mb-6 shadow-2xl shadow-teal-500/20\",children:n.jsx(Ti,{className:\"w-10 h-10 text-teal-400\"})}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"h1\",{className:\"text-4xl font-black text-white tracking-tight leading-tight uppercase\",children:[\"Welcome to \",n.jsx(\"span\",{className:\"text-teal-400\",children:\"FinHub\"})]}),n.jsx(\"p\",{className:\"text-slate-400 text-lg font-medium leading-relaxed\",children:\"Before we look at your wealth, let's ensure it's protected.\"})]}),n.jsxs(\"div\",{className:\"flex flex-col gap-3 w-full\",children:[n.jsxs(\"button\",{onClick:()=>y(\"question\"),className:\"group py-5 bg-white text-black font-black uppercase tracking-[0.2em] rounded-24 flex items-center justify-center gap-3 hover:bg-teal-400 transition-all duration-500\",children:[\"Begin Shield \",n.jsx(xn,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]}),n.jsx(\"button\",{onClick:()=>L(!0),className:\"py-3 text-slate-500 font-bold uppercase tracking-widest text-[10px] hover:text-teal-400 transition-colors\",children:\"View Sample Node\"})]})]},\"p1-intro\"),m===1&&h===\"question\"&&n.jsxs(Oe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:\"max-w-md w-full space-y-8 relative z-10\",children:[n.jsxs(\"div\",{className:\"space-y-4 text-center\",children:[n.jsx(\"div\",{className:\"text-[10px] font-black text-teal-500 uppercase tracking-[0.4em] mb-2\",children:\"Protocol: Protection Check\"}),n.jsx(\"h2\",{className:\"text-3xl font-black text-white tracking-tight leading-tight\",children:\"Do you have Health and Term Insurance?\"}),n.jsx(\"p\",{className:\"text-slate-500 font-bold\",children:\"These are the foundations of any terminal wealth flight path.\"})]}),n.jsxs(\"div\",{className:\"grid grid-cols-1 gap-4 pt-4 text-left\",children:[n.jsx(\"button\",{onClick:()=>R(!0),disabled:p,className:\"p-6 bg-slate-900/50 border border-white/5 rounded-3xl text-left hover:border-teal-500/30 hover:bg-teal-500/5 transition-all group\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"space-y-1\",children:[n.jsx(\"p\",{className:\"text-white font-black uppercase tracking-widest group-hover:text-teal-400 transition-colors\",children:\"Yes, I'm covered\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 font-bold uppercase\",children:\"Shield is active\"})]}),n.jsx(Sl,{className:\"w-6 h-6 text-slate-700 group-hover:text-teal-500 transition-colors\"})]})}),n.jsx(\"button\",{onClick:()=>R(!1),disabled:p,className:\"p-6 bg-slate-900/50 border border-white/5 rounded-3xl text-left hover:border-amber-500/30 hover:bg-amber-500/5 transition-all group\",children:n.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[n.jsxs(\"div\",{className:\"space-y-1\",children:[n.jsx(\"p\",{className:\"text-white font-black uppercase tracking-widest group-hover:text-amber-400 transition-colors\",children:\"Not yet\"}),n.jsx(\"p\",{className:\"text-[10px] text-slate-500 font-bold uppercase\",children:\"Security leak detected\"})]}),n.jsx(Jr,{className:\"w-6 h-6 text-slate-700 group-hover:text-amber-500 transition-colors\"})]})})]})]},\"p1-question\"),m===1&&h===\"completion\"&&n.jsxs(Oe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:\"max-w-md w-full text-center space-y-8 relative z-10\",children:[n.jsx(\"div\",{className:\"w-20 h-20 bg-teal-500/10 border border-teal-500/20 rounded-[28px] flex items-center justify-center mx-auto mb-6\",children:n.jsx(Sl,{className:\"w-10 h-10 text-teal-400\"})}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(\"h2\",{className:\"text-3xl font-black text-white tracking-tight leading-tight uppercase\",children:\"Shield Protocol Deployed\"}),n.jsx(\"p\",{className:\"text-slate-400 text-lg font-medium leading-relaxed\",children:\"Understood. We've prioritized these. A single emergency shouldn't crash your flight path.\"})]}),n.jsx(\"button\",{onClick:P,className:\"w-full py-5 bg-teal-500 text-black font-black uppercase tracking-[0.2em] rounded-24 hover:bg-teal-400 transition-all duration-500 shadow-xl shadow-teal-500/20\",children:\"Initialize Phase 2\"})]},\"p1-comp\"),m===2&&h===\"intro\"&&n.jsxs(Oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:\"max-w-md w-full text-center space-y-8 relative z-10\",children:[n.jsx(\"div\",{className:\"w-20 h-20 bg-orange-500/10 border border-orange-500/20 rounded-[28px] flex items-center justify-center mx-auto mb-6 shadow-2xl shadow-orange-500/20\",children:n.jsx(qh,{className:\"w-10 h-10 text-orange-400\"})}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"h1\",{className:\"text-4xl font-black text-white tracking-tight leading-tight uppercase\",children:[\"Action \",n.jsx(\"span\",{className:\"text-orange-400\",children:\"Zone\"})]}),n.jsx(\"p\",{className:\"text-slate-400 text-lg font-medium leading-relaxed\",children:\"Now, let's find the 'Wealth Leaks' that are slowing you down.\"})]}),n.jsxs(\"div\",{className:\"flex flex-col gap-3 w-full\",children:[n.jsxs(\"button\",{onClick:()=>y(\"question\"),className:\"group py-5 bg-white text-black font-black uppercase tracking-[0.2em] rounded-24 flex items-center justify-center gap-3 hover:bg-orange-400 transition-all duration-500\",children:[\"Run Scan \",n.jsx(xn,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]}),n.jsx(\"button\",{onClick:()=>L(!0),className:\"py-3 text-slate-500 font-bold uppercase tracking-widest text-[10px] hover:text-orange-400 transition-colors\",children:\"View Sample Node\"})]})]},\"p2-intro\"),m===2&&h===\"question\"&&n.jsxs(Oe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:\"max-w-md w-full space-y-6 relative z-10 flex flex-col h-[80vh]\",children:[n.jsxs(\"div\",{className:\"space-y-2 text-center shrink-0\",children:[n.jsx(\"div\",{className:\"text-[10px] font-black text-orange-500 uppercase tracking-[0.4em] mb-1\",children:\"Alert: High-Interest Detection\"}),n.jsx(\"h2\",{className:\"text-2xl font-black text-white tracking-tight uppercase\",children:\"Identify High-Interest Debt\"}),n.jsx(\"p\",{className:\"text-slate-500 text-xs font-bold leading-relaxed\",children:\"List liabilities (Credit Cards, Personal Loans) with interest above 10%.\"})]}),n.jsxs(\"div\",{className:\"space-y-3 bg-white/5 p-4 rounded-3xl border border-white/5 shrink-0\",children:[n.jsxs(\"div\",{className:\"grid grid-cols-2 gap-2\",children:[n.jsx(\"input\",{placeholder:\"Name (e.g. ICICI CC)\",className:\"bg-black/50 border border-white/10 p-3 rounded-xl text-xs font-bold focus:border-orange-500 outline-none transition-colors\",value:N.name,onChange:ye=>M({...N,name:ye.target.value})}),n.jsx(\"input\",{type:\"number\",placeholder:\"Amount\",className:\"bg-black/50 border border-white/10 p-3 rounded-xl text-xs font-bold focus:border-orange-500 outline-none transition-colors\",value:N.amount,onChange:ye=>M({...N,amount:ye.target.value})})]}),n.jsxs(\"div\",{className:\"flex gap-2\",children:[n.jsx(\"input\",{type:\"number\",placeholder:\"Interest % (e.g. 14)\",className:\"flex-1 bg-black/50 border border-white/10 p-3 rounded-xl text-xs font-bold focus:border-orange-500 outline-none transition-colors\",value:N.interest,onChange:ye=>M({...N,interest:ye.target.value})}),n.jsx(\"button\",{onClick:V,className:\"px-6 bg-orange-500 hover:bg-orange-400 text-black rounded-xl p-3 transition-colors shrink-0\",\"aria-label\":\"Add liability\",children:n.jsx(Nl,{className:\"w-5 h-5\"})})]})]}),n.jsxs(\"div\",{className:\"flex-1 overflow-y-auto space-y-2 py-2 pr-1 custom-scrollbar\",children:[v.map((ye,Se)=>n.jsxs(Oe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:\"flex items-center justify-between p-4 bg-slate-900/40 border border-white/5 rounded-2xl group\",children:[n.jsxs(\"div\",{children:[n.jsx(\"p\",{className:\"text-xs font-black uppercase text-white\",children:ye.name}),n.jsxs(\"p\",{className:\"text-[10px] font-bold text-slate-500 uppercase\",children:[\"₹\",ye.amount,\" @ \",ye.interest,\"%\"]})]}),n.jsx(\"button\",{onClick:()=>S(Se),className:\"text-slate-600 hover:text-rose-500 transition-colors\",\"aria-label\":\"Remove liability\",children:n.jsx(Ai,{className:\"w-4 h-4\"})})]},Se)),v.length===0&&n.jsx(\"div\",{className:\"h-20 flex items-center justify-center border border-dashed border-white/5 rounded-2xl\",children:n.jsx(\"p\",{className:\"text-[10px] text-slate-600 font-bold uppercase tracking-widest\",children:\"No leaks added yet\"})})]}),n.jsxs(\"div\",{className:\"pt-4 shrink-0 flex gap-3\",children:[n.jsx(\"button\",{onClick:()=>y(\"completion\"),className:\"flex-1 py-4 text-slate-500 font-black uppercase text-xs tracking-widest hover:text-white transition-colors\",children:\"Skip (No High Debt)\"}),n.jsx(\"button\",{onClick:se,disabled:v.length===0||p,className:\"flex-1 py-4 bg-orange-500 text-black font-black uppercase text-xs tracking-widest rounded-2xl disabled:opacity-50 hover:bg-orange-400 transition-all shadow-lg shadow-orange-500/20\",children:\"Patch Leaks\"})]})]},\"p2-question\"),m===2&&h===\"completion\"&&n.jsxs(Oe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:\"max-w-md w-full text-center space-y-8 relative z-10\",children:[n.jsx(\"div\",{className:\"w-20 h-20 bg-rose-500/10 border border-rose-500/20 rounded-[28px] flex items-center justify-center mx-auto mb-6\",children:n.jsx(qh,{className:\"w-10 h-10 text-rose-400\"})}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(\"h2\",{className:\"text-3xl font-black text-white tracking-tight leading-tight uppercase\",children:\"Analysis Complete\"}),n.jsxs(\"p\",{className:\"text-slate-400 text-lg font-medium leading-relaxed leading-relaxed\",children:[\"Found them. Paying these off isn't an expense—it's a \",n.jsx(\"span\",{className:\"text-rose-400\",children:\"guaranteed profit\"}),\". We'll tackle these before we scale your investments.\"]})]}),n.jsx(\"button\",{onClick:he,className:\"w-full py-5 bg-orange-500 text-black font-black uppercase tracking-[0.2em] rounded-24 hover:bg-orange-400 transition-all duration-500 shadow-xl shadow-orange-500/20\",children:\"Initialize Phase 3\"})]},\"p2-comp\"),m===3&&h===\"intro\"&&n.jsxs(Oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:\"max-w-md w-full text-center space-y-8 relative z-10\",children:[n.jsx(\"div\",{className:\"w-20 h-20 bg-purple-500/10 border border-purple-500/20 rounded-[28px] flex items-center justify-center mx-auto mb-6 shadow-2xl shadow-purple-500/20\",children:n.jsx(bn,{className:\"w-10 h-10 text-purple-400\"})}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"h1\",{className:\"text-4xl font-black text-white tracking-tight leading-tight uppercase\",children:[\"Growth \",n.jsx(\"span\",{className:\"text-purple-400\",children:\"Zone\"})]}),n.jsx(\"p\",{className:\"text-slate-400 text-lg font-medium leading-relaxed\",children:\"Your foundation is set. Now, what does freedom look like for you?\"})]}),n.jsxs(\"div\",{className:\"flex flex-col gap-3 w-full\",children:[n.jsxs(\"button\",{onClick:()=>y(\"question\"),className:\"group py-5 bg-white text-black font-black uppercase tracking-[0.2em] rounded-24 flex items-center justify-center gap-3 hover:bg-purple-400 transition-all duration-500\",children:[\"Set Target \",n.jsx(xn,{className:\"w-5 h-5 group-hover:translate-x-1 transition-transform\"})]}),n.jsx(\"button\",{onClick:()=>L(!0),className:\"py-3 text-slate-500 font-bold uppercase tracking-widest text-[10px] hover:text-purple-400 transition-colors\",children:\"View Sample Node\"})]})]},\"p3-intro\"),m===3&&h===\"question\"&&n.jsxs(Oe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:\"max-w-md w-full space-y-8 relative z-10\",children:[n.jsxs(\"div\",{className:\"space-y-4 text-center\",children:[n.jsx(\"div\",{className:\"text-[10px] font-black text-purple-500 uppercase tracking-[0.4em] mb-2\",children:\"Protocol: Freedom Metric\"}),n.jsx(\"h2\",{className:\"text-3xl font-black text-white tracking-tight leading-tight uppercase\",children:\"Target Monthly Passive Income\"}),n.jsx(\"p\",{className:\"text-slate-500 font-bold text-sm leading-relaxed\",children:\"This sets the baseline for your Freedom Meter. Every rupee you save now will be measured in Time.\"})]}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsxs(\"div\",{className:\"relative\",children:[n.jsx(\"span\",{className:\"absolute left-6 top-1/2 -translate-y-1/2 text-2xl font-black text-slate-700\",children:\"₹\"}),n.jsx(\"input\",{type:\"number\",placeholder:\"50,000\",className:\"w-full bg-slate-900/50 border border-white/5 p-8 pl-12 rounded-[32px] text-4xl font-black text-white outline-none focus:border-purple-500/50 transition-all tabular-nums\",value:O,onChange:ye=>B(ye.target.value)})]}),n.jsx(\"button\",{onClick:ve,disabled:!O||p,className:\"w-full py-5 bg-purple-500 text-black font-black uppercase tracking-[0.2em] rounded-24 hover:bg-purple-400 transition-all duration-500 shadow-xl shadow-purple-500/20 disabled:opacity-50\",children:\"Lock Horizon\"})]})]},\"p3-question\"),m===3&&h===\"completion\"&&n.jsxs(Oe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:\"max-w-md w-full text-center space-y-8 relative z-10\",children:[n.jsx(\"div\",{className:\"w-20 h-20 bg-amber-500/10 border border-amber-500/20 rounded-[28px] flex items-center justify-center mx-auto mb-6\",children:n.jsx(W0,{className:\"w-10 h-10 text-amber-400\"})}),n.jsxs(\"div\",{className:\"space-y-4\",children:[n.jsx(\"h2\",{className:\"text-3xl font-black text-white tracking-tight leading-tight uppercase\",children:\"Target Locked\"}),n.jsxs(\"p\",{className:\"text-slate-400 text-lg font-medium leading-relaxed leading-relaxed\",children:[\"Welcome to the cockpit. Every rupee you save now will be measured in \",n.jsx(\"span\",{className:\"text-amber-400\",children:\"Time\"}),\", not just numbers.\"]})]}),n.jsx(\"button\",{onClick:fe,className:\"w-full py-5 bg-amber-500 text-black font-black uppercase tracking-[0.2em] rounded-24 hover:bg-amber-400 transition-all duration-500 shadow-xl shadow-amber-500/20\",children:\"Launch Terminal\"})]},\"p3-comp\")]})]})},NN=A.lazy(()=>Us(()=>import(\"./Dashboard-77mHvodX.js\"),__vite__mapDeps([0,1,2,3,4,5,6,7])).then(i=>({default:i.Dashboard}))),SN=A.lazy(()=>Us(()=>import(\"./TransactionList-C9g51JND.js\"),__vite__mapDeps([8,1,2,4,7,6])).then(i=>({default:i.TransactionList}))),AN=A.lazy(()=>Us(()=>import(\"./GoalsTracker-CDWKNqoN.js\"),__vite__mapDeps([9,1,2,7,6])).then(i=>({default:i.GoalsTracker}))),DN=A.lazy(()=>Us(()=>import(\"./EmergencyFundsTab-VfBln1SL.js\"),__vite__mapDeps([10,1,2,7,6])).then(i=>({default:i.EmergencyFundsTab}))),TN=A.lazy(()=>Us(()=>import(\"./InvestmentsTab-7b7ZOF_8.js\"),__vite__mapDeps([11,1,2,3,4,12,6,7])).then(i=>({default:i.InvestmentsTab}))),kN=A.lazy(()=>Us(()=>import(\"./LiabilityTab-Cihd-oaZ.js\"),__vite__mapDeps([13,1,2,7,6])).then(i=>({default:i.LiabilityTab}))),CN=A.lazy(()=>Us(()=>import(\"./LiabilityDashboard-BEre0Oy9.js\"),__vite__mapDeps([14,1,2,5,12,7,6])).then(i=>({default:i.LiabilityDashboard})));function EN(){const{settings:i,expenses:r,incomes:c,debts:u,goals:m,accounts:g,liabilities:h,notifications:y,emergencyFundAmount:p,investments:x,isLoading:v,refreshData:f,updateSettings:N,userId:M,createExpense:O,updateExpense:B,deleteExpense:L,createIncome:R,updateIncome:P,deleteIncome:V,createDebt:S,updateDebt:se,deleteDebt:he,settleDebt:ve,createGoal:fe,updateGoal:ye,deleteGoal:Se,createAccount:qe,updateAccount:Te,deleteAccount:ee,setEmergencyFundAmount:me,setNotifications:G,isFundAllocationOpen:C,fundAllocationType:Y,closeFundAllocation:oe,performFundAllocation:ge,transferFunds:z,authStatus:T,isOffline:re,authMessage:$,backfillRequest:le,setBackfillRequest:ue,executeBackfill:Ne,createRecurring:je}=Di(),[de,xe]=A.useState(\"dashboard\"),[Ke,Ie]=A.useState(!1),[Ve,rt]=A.useState(\"expense\"),[De,tt]=A.useState(null),[St,mt]=A.useState(!1),[zt,ut]=A.useState(!1),[bt,la]=A.useState(!1),[ce,Ee]=A.useState(null),[He,yt]=A.useState(!1),[Ut,Oa]=A.useState(!1),[_a,ba]=A.useState(!1),[ma,ja]=A.useState(!1),[It]=A.useState(null);A.useEffect(()=>gN(()=>ut(!0),()=>la(!0)),[]),A.useEffect(()=>{i.theme===\"dark\"?document.documentElement.classList.add(\"dark\"):document.documentElement.classList.remove(\"dark\")},[i.theme]);const{openFundAllocation:Na}=Di();A.useEffect(()=>{window.showFundAllocation=Na},[Na]);const{currentMonthExpenses:Gt}=A.useMemo(()=>{const ie=new Date,Le=ie.getMonth(),ft=ie.getFullYear();return{currentMonthExpenses:r.filter(Mt=>!Mt.isInternalTransfer).filter(Mt=>{const Ct=new Date(Mt.date);return Ct.getMonth()===Le&&Ct.getFullYear()===ft})}},[r]),kt=A.useMemo(()=>{const ie=c.reduce(($a,na)=>$a+na.amount,0),Le=r.reduce(($a,na)=>$a+na.amount,0),ft=u.reduce(($a,na)=>$a+na.amount,0);if(ie===0&&ft===0)return{score:50,savingsRate:0,debtRatio:0,spendingRatio:0};const at=[...c,...r,...u];let Bt=1;if(at.length>0){const $a=at.map(fs=>new Date(fs.date).getTime()),na=new Date(Math.min(...$a)),sa=Math.abs(new Date().getTime()-na.getTime()),dn=Math.ceil(sa/(1e3*60*60*24*30));Bt=Math.max(1,dn)}const Ct=ie/Bt*12,ht=ie>0?(ie-Le)/ie:0,Yt=ie>0?Le/ie:0,Rt=Ct>0?ft/Ct:ft>0?1/0:0;let Ye=50;return ht>=.4?Ye+=30:ht>=.2?Ye+=20:ht>=.1?Ye+=10:ht>0?Ye+=5:Ye-=20,Rt===0?Ye+=20:Rt<=.3?Ye+=10:Rt<=.6?Ye-=10:Rt<=1?Ye-=30:Ye-=50,Yt<=.5?Ye+=20:Yt<=.7?Ye+=10:Yt<=.9?Ye+=0:Ye-=10,{score:Math.max(0,Math.min(100,Math.round(Ye))),savingsRate:ht,debtRatio:Rt,spendingRatio:Yt}},[c,r,u]),dt=A.useMemo(()=>({totalIncome:c.reduce((ie,Le)=>ie+Le.amount,0),totalExpenses:r.reduce((ie,Le)=>ie+Le.amount,0),activeDebts:u.filter(ie=>ie.status===\"pending\").length,goalsCount:m.length,recentTransactions:[...r.slice(0,5).map(ie=>({type:\"expense\",...ie})),...c.slice(0,5).map(ie=>({type:\"income\",...ie}))],expenses:r,incomes:c,accounts:g,investments:x,liabilities:h,goals:m,debts:u,currentMonthExpenses:Gt,savingsRate:kt.savingsRate,healthScore:kt.score,brainSummary:qj({investments:x,accounts:g,healthScore:kt.score,savingsRate:kt.savingsRate,totalIncome:c.reduce((ie,Le)=>ie+Le.amount,0),totalExpenses:r.reduce((ie,Le)=>ie+Le.amount,0),activeDebts:u.filter(ie=>ie.status===\"pending\").length,goalsCount:m.length},i.currency,de)}),[c,r,u,m,kt.savingsRate,kt.score,g,x,h,Gt,i.currency,de]),ds=A.useMemo(()=>c.reduce((ie,Le)=>ie+Le.amount,0),[c]);if(v)return n.jsx(H0,{});const Sa=async()=>{await f()},Aa=ie=>{rt(ie),tt(null),Ie(!0)},un=ie=>{rt(\"expense\"),tt(ie),Ie(!0)},nn=ie=>{rt(\"income\"),tt(ie),Ie(!0)},Fa=ie=>{rt(\"debt\"),tt(ie),Ie(!0)},Da=ie=>{De?Ve===\"expense\"?B(De.id,ie):Ve===\"income\"?P(De.id,ie):Ve===\"debt\"&&se(De.id,ie):Ve===\"expense\"?(O(ie),ie.roundUpAmount&&Ue(m.length>0?m[0].id:\"general\",\"goal\",void 0,ie.roundUpAmount,ie.accountId)):Ve===\"income\"?R(ie):Ve===\"debt\"&&S(ie)},Ue=async(ie,Le,ft,at,Bt)=>{if(!at&&!It)return;const Mt=at||(It?It.roundedAmount-It.expenseAmount:0),Ct=Bt||(It?It.accountId:\"\"),ht=g.find(Yt=>Yt.id===Ct);if(ht&&await Te(ht.id,{balance:ht.balance-Mt}),Le===\"goal\"){const Yt=m.find(Rt=>Rt.id===ie);if(Yt)await ye(ie,{currentAmount:Yt.currentAmount+Mt}),J.success(`Saved ${cn[i.currency]}${Mt} to ${Yt.name}!`);else{const Rt=m.find(Ye=>Ye.name===\"General Savings\");if(Rt)await ye(Rt.id,{currentAmount:Rt.currentAmount+Mt}),J.success(`Saved ${cn[i.currency]}${Mt} to General Savings!`);else{const Ye={name:\"General Savings\",targetAmount:1e4,currentAmount:Mt,targetDate:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString(),emoji:\"🐷\"};fe(Ye),J.success(`Created \"General Savings\" and saved ${cn[i.currency]}${Mt}!`)}}}else me(Yt=>Yt+Mt),J.success(`Saved ${cn[i.currency]}${Mt} to Emergency Fund!`);ja(!1),ji({particleCount:50,spread:60,origin:{y:.7}})},wt=ie=>{const Le={today:1,week:7,month:30},ft=new Date;ft.setDate(ft.getDate()+Le[ie]),localStorage.setItem(\"roundUpMutedUntil\",ft.toISOString()),ja(!1),J.info(`Round ups muted for ${ie===\"today\"?\"today\":ie===\"week\"?\"a week\":\"a month\"}`)};return n.jsxs(n.Fragment,{children:[n.jsx(Bn,{mode:\"wait\",children:(T===\"guest\"||T===\"authenticating\")&&n.jsx(Oe.div,{className:\"fixed inset-0 z-0\",exit:{opacity:0,scale:.95,filter:\"blur(20px)\"},transition:{duration:.8},children:n.jsx(vN,{})},\"login-container\")}),n.jsx(Bn,{children:T===\"authenticating\"&&n.jsx(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4},className:\"fixed inset-0 z-50\",children:n.jsx(H0,{message:$?.message,subMessage:$?.subMessage})},\"loading-sprite\")}),n.jsxs(Bn,{mode:\"wait\",children:[T===\"authenticated\"&&(!i.onboardingPhase||i.onboardingPhase<3)&&!i.isSampleMode&&n.jsx(jN,{}),T===\"authenticated\"&&((i.onboardingPhase??0)>=3||i.isSampleMode)&&n.jsx(Oe.div,{className:\"relative z-10\",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.8,ease:[.16,1,.3,1]},children:n.jsxs(\"div\",{className:\"min-h-screen bg-transparent text-foreground transition-colors font-sans\",children:[n.jsx(hj,{activeTab:de,onTabChange:ie=>xe(ie),notificationCount:y.filter(ie=>!ie.read).length,onNotificationClick:()=>la(!bt),onSettingsClick:()=>ut(!zt),forceHide:He,renderFab:ie=>n.jsx(xN,{isVisible:ie&&!zt&&!bt&&!He,onOpenAI:()=>mt(!0),onAddTransaction:Aa,onMigrate:()=>Oa(!0)}),children:n.jsx(hN,{onRefresh:Sa,children:n.jsx(yN,{children:n.jsxs(A.Suspense,{fallback:n.jsxs(\"div\",{className:\"space-y-6 pt-12\",children:[n.jsx(pN,{}),n.jsx(\"p\",{className:\"text-center text-slate-500 text-sm\",children:\"Loading Component...\"})]}),children:[de===\"dashboard\"&&n.jsx(\"div\",{className:\"space-y-6\",children:n.jsx(NN,{expenses:r,incomes:c,currency:i.currency,goals:m,liabilities:h,debts:u,investments:x,accounts:g,emergencyFundAmount:p,healthScore:kt.score,userName:i.name,isOffline:re,isSampleMode:i.isSampleMode,onResumeOnboarding:()=>N({isSampleMode:!1})})}),de===\"transactions\"&&n.jsx(SN,{expenses:r,incomes:c,debts:u,accounts:g,currency:i.currency,onEditExpense:un,onDeleteExpense:L,onEditIncome:nn,onDeleteIncome:V,onEditDebt:Fa,onDeleteDebt:he,onSettleDebt:ve}),de===\"goals\"&&n.jsx(AN,{goals:m,currency:i.currency,accounts:g,expenses:r,incomes:c,onCreateGoal:fe,onUpdateGoal:ye,onDeleteGoal:Se,onDeductFromAccount:async(ie,Le)=>{const ft=g.find(at=>at.id===ie);ft&&await Te(ie,{balance:ft.balance-Le})}}),de===\"accounts\"&&n.jsx(fN,{accounts:g,currency:i.currency,onCreateAccount:qe,onUpdateAccount:Te,onDeleteAccount:ee}),de===\"investments\"&&n.jsx(TN,{}),de===\"emergency\"&&n.jsx(DN,{currency:i.currency,userId:M,expenses:r,incomes:c,accounts:g,onEmergencyFundUpdate:ie=>me(ie)}),de===\"liability\"&&n.jsxs(\"div\",{className:\"space-y-6\",children:[n.jsx(CN,{liabilities:h,currency:i.currency,totalMonthlyIncome:ds}),n.jsx(kN,{currency:i.currency,expenses:r,accounts:g})]}),de===\"recurring\"&&n.jsx(dj,{}),de===\"more\"&&n.jsx(sN,{onNavigate:ie=>xe(ie),onOpenSettings:()=>ut(!0),onOpenNotifications:()=>la(!0),emergencyFundAmount:p,bankAccountsCount:g.filter(ie=>ie.type===\"bank\").length,cardsCount:g.filter(ie=>ie.type===\"credit_card\").length,currency:i.currency,onOpenAbout:()=>ba(!0)})]})})})}),n.jsx(xj,{isOpen:Ke,onClose:()=>{Ie(!1),tt(null)},type:Ve,onSubmit:Da,initialData:De,accounts:g,currency:i.currency,roundUpEnabled:i.roundUpEnabled}),It&&n.jsx(bj,{isOpen:ma,onClose:()=>ja(!1),onConfirm:Ue,expenseAmount:It.expenseAmount,roundedAmount:It.roundedAmount,currency:i.currency,goals:m,onMute:wt}),n.jsx(bN,{isOpen:St,onClose:()=>mt(!1),context:dt,settings:i,isOffline:re}),n.jsx(nN,{isOpen:zt,onClose:()=>ut(!1),settings:i,onUpdateSettings:N,onAchievementClick:ie=>{Ee(ie),yt(!0),ut(!1)},onOpenAbout:()=>ba(!0)}),n.jsx(rN,{isOpen:bt,onClose:()=>la(!1),notifications:y,onNotificationClick:async ie=>{if(ie.achievementId&&(Ee(ie.achievementId),yt(!0)),ie.action&&ie.action.type===\"verify_subscription\"&&ie.action.status===\"completed\"){const{description:Le,amount:ft,category:at,accountId:Bt,date:Mt}=ie.action.payload;try{await je({type:\"expense\",description:Le,amount:ft,category:at,accountId:Bt,frequency:\"monthly\",startDate:Mt||new Date().toISOString().split(\"T\")[0],tags:[\"auto-verified\",\"subscription\"]}),J.success(`Verified: ${Le} is now a recurring subscription.`),G(Ct=>Ct.map(ht=>ht.id===ie.id?{...ht,read:!0}:ht))}catch{J.error(\"Failed to automate subscription.\")}}else ie.action&&ie.action.status===\"dismissed\"&&(J.info(\"Marked as one-time purchase.\"),G(Le=>Le.map(ft=>ft.id===ie.id?{...ft,read:!0}:ft)));ie.action||la(!1)},onMarkAsRead:ie=>{G(Le=>Le.map(ft=>ft.id===ie?{...ft,read:!0}:ft))},onClearRead:()=>{G(ie=>ie.filter(Le=>!Le.read)),J.success(\"Read notifications cleared\")}}),n.jsx(oN,{isOpen:He,onClose:()=>{yt(!1),Ee(null)},achievementId:ce}),n.jsx(uN,{isOpen:C,onClose:oe,accounts:g,goals:m,currency:i.currency,destinationType:Y,emergencyFund:{currentAmount:p,targetAmount:1e5},onAllocate:ge,liabilities:h,expenses:r}),n.jsx(mN,{isOpen:Ut,onClose:()=>Oa(!1),accounts:g,currency:i.currency,onTransfer:z}),n.jsx(wN,{isOpen:_a,onClose:()=>ba(!1)})]})},\"main-app\")]}),le&&n.jsx(Jp,{open:!0,onOpenChange:()=>ue(null),children:n.jsxs(Wp,{className:\"bg-slate-900/95 border-white/10 text-slate-100 z-[99999999] backdrop-blur-xl\",children:[n.jsxs(eg,{children:[n.jsx(ag,{className:\"text-white text-xl font-bold font-sans\",children:\"Backfill Configuration Required\"}),n.jsxs(ng,{className:\"text-slate-400 text-base\",children:[\"System detected \",n.jsxs(\"span\",{className:\"text-emerald-400 font-bold\",children:[le.count,\" missing entries\"]}),\" in the transaction history from \",n.jsx(\"span\",{className:\"text-white font-medium\",children:le.dates[0]?.toLocaleDateString(\"en-IN\",{day:\"numeric\",month:\"short\",year:\"numeric\"})}),\"to \",n.jsx(\"span\",{className:\"text-white font-medium\",children:le.dates[le.dates.length-1]?.toLocaleDateString(\"en-IN\",{day:\"numeric\",month:\"short\",year:\"numeric\"})}),\".\",n.jsx(\"br\",{}),n.jsx(\"br\",{}),\"Would you like to auto-populate the ledger for this period?\"]})]}),n.jsxs(tg,{className:\"mt-4\",children:[n.jsx(ig,{onClick:()=>ue(null),className:\"bg-white/5 border-white/5 text-slate-400 hover:text-white hover:bg-white/10 rounded-xl h-12 uppercase tracking-wider text-xs font-bold\",children:\"Cancel\"}),n.jsx(sg,{onClick:()=>{Ne(),ue(null)},className:\"bg-indigo-600 hover:bg-indigo-500 text-white border-0 font-bold rounded-xl h-12 px-8 shadow-lg shadow-indigo-600/20\",children:\"Generate Ledger\"})]})]})}),n.jsx(t1,{position:\"bottom-center\",richColors:!0,theme:\"dark\",toastOptions:{style:{background:\"#1C1C1E\",border:\"1px solid rgba(255, 255, 255, 0.1)\",color:\"#FFFFFF\",borderRadius:\"20px\",backdropFilter:\"none\",zIndex:999999}},className:\"!z-[999999]\"})]})}function MN({children:i,...r}){return n.jsx(Nj,{...r,children:i})}vv.createRoot(document.getElementById(\"root\")).render(n.jsx(r1,{children:n.jsx(MN,{attribute:\"class\",defaultTheme:\"dark\",forcedTheme:\"dark\",children:n.jsx(EN,{})})}));export{Bn as A,Ge as B,bl as C,Bs as D,Pt as I,Re as L,Fp as M,Os as N,ha as S,BN as a,V1 as b,Ku as c,yp as d,aa as e,$e as f,ct as g,Ls as h,gj as i,qs as j,Is as k,Vs as l,Oe as m,ga as n,pa as o,xa as p,vt as q,ku as r,Di as s,J as t,cN as u,LN as v,UN as w};"
      },
      {
        "file": "src\\App.tsx",
        "line": 69,
        "snippet": "type View = \"dashboard\" | \"transactions\" | \"goals\" | \"investments\" | \"accounts\" | \"emergency\" | \"more\" | \"recurring\" | \"budgets\";"
      },
      {
        "file": "src\\App.tsx",
        "line": 573,
        "snippet": "{view === \"transactions\" && ("
      },
      {
        "file": "src\\App.tsx",
        "line": 757,
        "snippet": "} else if (notification.category === 'transactions') {"
      },
      {
        "file": "src\\App.tsx",
        "line": 758,
        "snippet": "setView('transactions');"
      },
      {
        "file": "src\\components\\layout\\BottomNav.tsx",
        "line": 31,
        "snippet": "className={`flex flex-col items-center transition-all cursor-pointer ${activeTab === 'transactions' ? 'text-[#0A84FF]' : 'text-[#8E8E93] hover:text-white'}`}"
      },
      {
        "file": "src\\components\\layout\\BottomNav.tsx",
        "line": 32,
        "snippet": "onClick={() => onTabChange('transactions')}"
      },
      {
        "file": "src\\components\\NotificationsPanel.tsx",
        "line": 69,
        "snippet": "const categoriesOrder = ['reminders', 'transactions', 'insights', 'achievements'] as const;"
      },
      {
        "file": "src\\config\\dbTables.ts",
        "line": 8,
        "snippet": "TRANSACTIONS: 'transactions',"
      },
      {
        "file": "src\\hooks\\useExpenseActions.ts",
        "line": 87,
        "snippet": "type: 'alert', priority: 'medium', category: 'transactions',"
      },
      {
        "file": "src\\hooks\\useExpenseActions.ts",
        "line": 95,
        "snippet": "type: 'alert', priority: 'medium', category: 'transactions',"
      },
      {
        "file": "src\\hooks\\useExpenseActions.ts",
        "line": 130,
        "snippet": "type: 'alert', priority: 'medium', category: 'transactions',"
      },
      {
        "file": "src\\hooks\\useExpenseActions.ts",
        "line": 203,
        "snippet": "id: `verify_sub_${response.expense.id}`, type: 'insight', priority: 'medium', category: 'transactions',"
      },
      {
        "file": "src\\types\\index.ts",
        "line": 272,
        "snippet": "category: 'reminders' | 'transactions' | 'achievements' | 'insights';"
      }
    ]
  ]
]